"use strict";(self.webpackChunkangular_scanner_camera_capture=self.webpackChunkangular_scanner_camera_capture||[]).push([[179],{375:()=>{function zr(e){return"function"==typeof e}function Ru(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Jc=Ru(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,a)=>`${a+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Lu(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class xo{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(zr(r))try{r()}catch(o){n=o instanceof Jc?o.errors:[o]}const{_finalizers:a}=this;if(a){this._finalizers=null;for(const o of a)try{Pm(o)}catch(u){n=n??[],u instanceof Jc?n=[...n,...u.errors]:n.push(u)}}if(n)throw new Jc(n)}}add(n){var t;if(n&&n!==this)if(this.closed)Pm(n);else{if(n instanceof xo){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&Lu(t,n)}remove(n){const{_finalizers:t}=this;t&&Lu(t,n),n instanceof xo&&n._removeParent(this)}}xo.EMPTY=(()=>{const e=new xo;return e.closed=!0,e})();const Em=xo.EMPTY;function Mm(e){return e instanceof xo||e&&"closed"in e&&zr(e.remove)&&zr(e.add)&&zr(e.unsubscribe)}function Pm(e){zr(e)?e():e.unsubscribe()}const as={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Qc={setTimeout(e,n,...t){const{delegate:r}=Qc;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=Qc;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Am(e){Qc.setTimeout(()=>{const{onUnhandledError:n}=as;if(!n)throw e;n(e)})}function xm(){}const rS=$d("C",void 0,void 0);function $d(e,n,t){return{kind:e,value:n,error:t}}let ss=null;function qc(e){if(as.useDeprecatedSynchronousErrorHandling){const n=!ss;if(n&&(ss={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=ss;if(ss=null,t)throw r}}else e()}class eh extends xo{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Mm(n)&&n.add(this)):this.destination=lS}static create(n,t,r){return new ku(n,t,r)}next(n){this.isStopped?nh(function oS(e){return $d("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?nh(function iS(e){return $d("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?nh(rS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const sS=Function.prototype.bind;function th(e,n){return sS.call(e,n)}class uS{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){Xc(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){Xc(r)}else Xc(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){Xc(t)}}}class ku extends eh{constructor(n,t,r){let a;if(super(),zr(n)||!n)a={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&as.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),a={next:n.next&&th(n.next,o),error:n.error&&th(n.error,o),complete:n.complete&&th(n.complete,o)}):a=n}this.destination=new uS(a)}}function Xc(e){as.useDeprecatedSynchronousErrorHandling?function aS(e){as.useDeprecatedSynchronousErrorHandling&&ss&&(ss.errorThrown=!0,ss.error=e)}(e):Am(e)}function nh(e,n){const{onStoppedNotification:t}=as;t&&Qc.setTimeout(()=>t(e,n))}const lS={closed:!0,next:xm,error:function cS(e){throw e},complete:xm},rh="function"==typeof Symbol&&Symbol.observable||"@@observable";function us(e){return e}function Rm(e){return 0===e.length?us:1===e.length?e[0]:function(t){return e.reduce((r,a)=>a(r),t)}}let Ii=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,a){const o=function fS(e){return e&&e instanceof eh||function hS(e){return e&&zr(e.next)&&zr(e.error)&&zr(e.complete)}(e)&&Mm(e)}(t)?t:new ku(t,r,a);return qc(()=>{const{operator:u,source:s}=this;o.add(u?u.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Lm(r))((a,o)=>{const u=new ku({next:s=>{try{t(s)}catch(f){o(f),u.unsubscribe()}},error:o,complete:a});this.subscribe(u)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[rh](){return this}pipe(...t){return Rm(t)(this)}toPromise(t){return new(t=Lm(t))((r,a)=>{let o;this.subscribe(u=>o=u,u=>a(u),()=>r(o))})}}return e.create=n=>new e(n),e})();function Lm(e){var n;return null!==(n=e??as.Promise)&&void 0!==n?n:Promise}const gS=Ru(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let sa=(()=>{class e extends Ii{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new km(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new gS}next(t){qc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){qc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){qc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:a,observers:o}=this;return r||a?Em:(this.currentObservers=null,o.push(t),new xo(()=>{this.currentObservers=null,Lu(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:a,isStopped:o}=this;r?t.error(a):o&&t.complete()}asObservable(){const t=new Ii;return t.source=this,t}}return e.create=(n,t)=>new km(n,t),e})();class km extends sa{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:Em}}function Fm(e){return zr(e?.lift)}function Ai(e){return n=>{if(Fm(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function xi(e,n,t,r,a){return new pS(e,n,t,r,a)}class pS extends eh{constructor(n,t,r,a,o,u){super(n),this.onFinalize=o,this.shouldUnsubscribe=u,this._next=t?function(s){try{t(s)}catch(f){n.error(f)}}:super._next,this._error=a?function(s){try{a(s)}catch(f){n.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){n.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Ar(e,n){return Ai((t,r)=>{let a=0;t.subscribe(xi(r,o=>{r.next(e.call(n,o,a++))}))})}function cs(e){return this instanceof cs?(this.v=e,this):new cs(e)}function vS(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,r=t.apply(e,n||[]),o=[];return a={},u("next"),u("throw"),u("return"),a[Symbol.asyncIterator]=function(){return this},a;function u(c){r[c]&&(a[c]=function(_){return new Promise(function(h,y){o.push([c,_,h,y])>1||s(c,_)})})}function s(c,_){try{!function f(c){c.value instanceof cs?Promise.resolve(c.value.v).then(v,l):I(o[0][2],c)}(r[c](_))}catch(h){I(o[0][3],h)}}function v(c){s("next",c)}function l(c){s("throw",c)}function I(c,_){c(_),o.shift(),o.length&&s(o[0][0],o[0][1])}}function yS(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function Wm(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(u){return new Promise(function(s,f){!function a(o,u,s,f){Promise.resolve(f).then(function(v){o({value:v,done:s})},u)}(s,f,(u=e[o](u)).done,u.value)})}}}const Bm=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Vm(e){return zr(e?.then)}function Um(e){return zr(e[rh])}function Gm(e){return Symbol.asyncIterator&&zr(e?.[Symbol.asyncIterator])}function jm(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Hm=function DS(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function zm(e){return zr(e?.[Hm])}function Km(e){return vS(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:a}=yield cs(t.read());if(a)return yield cs(void 0);yield yield cs(r)}}finally{t.releaseLock()}})}function Ym(e){return zr(e?.getReader)}function ua(e){if(e instanceof Ii)return e;if(null!=e){if(Um(e))return function bS(e){return new Ii(n=>{const t=e[rh]();if(zr(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Bm(e))return function wS(e){return new Ii(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(Vm(e))return function SS(e){return new Ii(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Am)})}(e);if(Gm(e))return Jm(e);if(zm(e))return function TS(e){return new Ii(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(Ym(e))return function CS(e){return Jm(Km(e))}(e)}throw jm(e)}function Jm(e){return new Ii(n=>{(function ES(e,n){var t,r,a,o;return function mS(e,n,t,r){return new(t||(t=Promise))(function(o,u){function s(l){try{v(r.next(l))}catch(I){u(I)}}function f(l){try{v(r.throw(l))}catch(I){u(I)}}function v(l){l.done?o(l.value):function a(o){return o instanceof t?o:new t(function(u){u(o)})}(l.value).then(s,f)}v((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=yS(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(u){a={error:u}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(a)throw a.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Ia(e,n,t,r=0,a=!1){const o=n.schedule(function(){t(),a?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!a)return o}function Oi(e,n,t=1/0){return zr(n)?Oi((r,a)=>Ar((o,u)=>n(r,o,a,u))(ua(e(r,a))),t):("number"==typeof n&&(t=n),Ai((r,a)=>function MS(e,n,t,r,a,o,u,s){const f=[];let v=0,l=0,I=!1;const c=()=>{I&&!f.length&&!v&&n.complete()},_=y=>v<r?h(y):f.push(y),h=y=>{o&&n.next(y),v++;let p=!1;ua(t(y,l++)).subscribe(xi(n,m=>{a?.(m),o?_(m):n.next(m)},()=>{p=!0},void 0,()=>{if(p)try{for(v--;f.length&&v<r;){const m=f.shift();u?Ia(n,u,()=>h(m)):h(m)}c()}catch(m){n.error(m)}}))};return e.subscribe(xi(n,_,()=>{I=!0,c()})),()=>{s?.()}}(r,a,e,t)))}function xs(e=1/0){return Oi(us,e)}const Da=new Ii(e=>e.complete());function oh(e){return e[e.length-1]}function Fu(e){return function AS(e){return e&&zr(e.schedule)}(oh(e))?e.pop():void 0}function Qm(e,n=0){return Ai((t,r)=>{t.subscribe(xi(r,a=>Ia(r,e,()=>r.next(a),n),()=>Ia(r,e,()=>r.complete(),n),a=>Ia(r,e,()=>r.error(a),n)))})}function qm(e,n=0){return Ai((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function Xm(e,n){if(!e)throw new Error("Iterable cannot be null");return new Ii(t=>{Ia(t,n,()=>{const r=e[Symbol.asyncIterator]();Ia(t,n,()=>{r.next().then(a=>{a.done?t.complete():t.next(a.value)})},0,!0)})})}function Di(e,n){return n?function WS(e,n){if(null!=e){if(Um(e))return function LS(e,n){return ua(e).pipe(qm(n),Qm(n))}(e,n);if(Bm(e))return function FS(e,n){return new Ii(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(Vm(e))return function kS(e,n){return ua(e).pipe(qm(n),Qm(n))}(e,n);if(Gm(e))return Xm(e,n);if(zm(e))return function OS(e,n){return new Ii(t=>{let r;return Ia(t,n,()=>{r=e[Hm](),Ia(t,n,()=>{let a,o;try{({value:a,done:o}=r.next())}catch(u){return void t.error(u)}o?t.complete():t.next(a)},0,!0)}),()=>zr(r?.return)&&r.return()})}(e,n);if(Ym(e))return function NS(e,n){return Xm(Km(e),n)}(e,n)}throw jm(e)}(e,n):ua(e)}function ah(e,n,...t){if(!0===n)return void e();if(!1===n)return;const r=new ku({next:()=>{r.unsubscribe(),e()}});return n(...t).subscribe(r)}function Gr(e){for(let n in e)if(e[n]===Gr)return n;throw Error("Could not find renamed property on target object.")}function jr(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(jr).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function uh(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const US=Gr({__forward_ref__:Gr});function ch(e){return e.__forward_ref__=ch,e.toString=function(){return jr(this())},e}function $n(e){return function lh(e){return"function"==typeof e&&e.hasOwnProperty(US)&&e.__forward_ref__===ch}(e)?e():e}class Bn extends Error{constructor(n,t){super(function Zc(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}(n,t)),this.code=n}}function or(e){return"string"==typeof e?e:null==e?"":String(e)}function $c(e,n){throw new Bn(-201,!1)}function _o(e,n){null==e&&function Br(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function dr(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function wa(e){return{providers:e.providers||[],imports:e.imports||[]}}function el(e){return Zm(e,tl)||Zm(e,e_)}function Zm(e,n){return e.hasOwnProperty(n)?e[n]:null}function $m(e){return e&&(e.hasOwnProperty(dh)||e.hasOwnProperty(qS))?e[dh]:null}const tl=Gr({\u0275prov:Gr}),dh=Gr({\u0275inj:Gr}),e_=Gr({ngInjectableDef:Gr}),qS=Gr({ngInjectorDef:Gr});var Xn=(()=>((Xn=Xn||{})[Xn.Default=0]="Default",Xn[Xn.Host=1]="Host",Xn[Xn.Self=2]="Self",Xn[Xn.SkipSelf=4]="SkipSelf",Xn[Xn.Optional=8]="Optional",Xn))();let hh;function Ro(e){const n=hh;return hh=e,n}function t_(e,n,t){const r=el(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Xn.Optional?null:void 0!==n?n:void $c(jr(e))}function Ba(e){return{toString:e}.toString()}var zo=(()=>((zo=zo||{})[zo.OnPush=0]="OnPush",zo[zo.Default=1]="Default",zo))(),ca=(()=>{return(e=ca||(ca={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",ca;var e})();const Hr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Rs={},kr=[],nl=Gr({\u0275cmp:Gr}),fh=Gr({\u0275dir:Gr}),gh=Gr({\u0275pipe:Gr}),n_=Gr({\u0275mod:Gr}),Sa=Gr({\u0275fac:Gr}),Ou=Gr({__NG_ELEMENT_ID__:Gr});let ZS=0;function Lo(e){return Ba(()=>{const t=!0===e.standalone,r={},a={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===zo.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||kr,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ca.Emulated,id:"c"+ZS++,styles:e.styles||kr,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,u=e.features;return a.inputs=o_(e.inputs,r),a.outputs=o_(e.outputs),u&&u.forEach(s=>s(a)),a.directiveDefs=o?()=>("function"==typeof o?o():o).map(r_).filter(i_):null,a.pipeDefs=o?()=>("function"==typeof o?o():o).map(qi).filter(i_):null,a})}function r_(e){return Vr(e)||Qi(e)}function i_(e){return null!==e}function Va(e){return Ba(()=>({type:e.type,bootstrap:e.bootstrap||kr,declarations:e.declarations||kr,imports:e.imports||kr,exports:e.exports||kr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function o_(e,n){if(null==e)return Rs;const t={};for(const r in e)if(e.hasOwnProperty(r)){let a=e[r],o=a;Array.isArray(a)&&(o=a[1],a=a[0]),t[a]=r,n&&(n[a]=o)}return t}const Vi=Lo;function Vr(e){return e[nl]||null}function Qi(e){return e[fh]||null}function qi(e){return e[gh]||null}function vo(e,n){const t=e[n_]||null;if(!t&&!0===n)throw new Error(`Type ${jr(e)} does not have '\u0275mod' property.`);return t}function lo(e){return Array.isArray(e)&&"object"==typeof e[1]}function Yo(e){return Array.isArray(e)&&!0===e[1]}function _h(e){return 0!=(8&e.flags)}function al(e){return 2==(2&e.flags)}function sl(e){return 1==(1&e.flags)}function Jo(e){return null!==e.template}function iT(e){return 0!=(256&e[2])}function gs(e,n){return e.hasOwnProperty(Sa)?e[Sa]:null}class sT{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ps(){return u_}function u_(e){return e.type.prototype.ngOnChanges&&(e.setInput=cT),uT}function uT(){const e=l_(this),n=e?.current;if(n){const t=e.previous;if(t===Rs)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function cT(e,n,t,r){const a=l_(e)||function lT(e,n){return e[c_]=n}(e,{previous:Rs,current:null}),o=a.current||(a.current={}),u=a.previous,s=this.declaredInputs[t],f=u[s];o[s]=new sT(f&&f.currentValue,n,u===Rs),e[r]=n}ps.ngInherit=!0;const c_="__ngSimpleChanges__";function l_(e){return e[c_]||null}function pi(e){for(;Array.isArray(e);)e=e[0];return e}function Oo(e,n){return pi(n[e.index])}function bh(e,n){return e.data[n]}function Io(e,n){const t=n[e];return lo(t)?t:t[0]}function cl(e){return 64==(64&e[2])}function Ua(e,n){return null==n?null:e[n]}function h_(e){e[18]=0}function wh(e,n){e[5]+=n;let t=e,r=e[3];for(;null!==r&&(1===n&&1===t[5]||-1===n&&0===t[5]);)r[5]+=n,t=r,r=r[3]}const rr={lFrame:w_(null),bindingsEnabled:!0};function g_(){return rr.bindingsEnabled}function sn(){return rr.lFrame.lView}function Pr(){return rr.lFrame.tView}function bi(){let e=__();for(;null!==e&&64===e.type;)e=e.parent;return e}function __(){return rr.lFrame.currentTNode}function la(e,n){const t=rr.lFrame;t.currentTNode=e,t.isParent=n}function Sh(){return rr.lFrame.isParent}function Bs(){return rr.lFrame.bindingIndex++}function ST(e,n){const t=rr.lFrame;t.bindingIndex=t.bindingRootIndex=e,Ch(n)}function Ch(e){rr.lFrame.currentDirectiveIndex=e}function Mh(e){rr.lFrame.currentQueryIndex=e}function CT(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[6]:null}function D_(e,n,t){if(t&Xn.SkipSelf){let a=n,o=e;for(;!(a=a.parent,null!==a||t&Xn.Host||(a=CT(o),null===a||(o=o[15],10&a.type))););if(null===a)return!1;n=a,e=o}const r=rr.lFrame=b_();return r.currentTNode=n,r.lView=e,!0}function Ph(e){const n=b_(),t=e[1];rr.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function b_(){const e=rr.lFrame,n=null===e?null:e.child;return null===n?w_(e):n}function w_(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function S_(){const e=rr.lFrame;return rr.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const T_=S_;function Ah(){const e=S_();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Zi(){return rr.lFrame.selectedIndex}function Ga(e){rr.lFrame.selectedIndex=e}function si(){const e=rr.lFrame;return bh(e.tView,e.selectedIndex)}function dl(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const o=e.data[t].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:s,ngAfterViewInit:f,ngAfterViewChecked:v,ngOnDestroy:l}=o;u&&(e.contentHooks||(e.contentHooks=[])).push(-t,u),s&&((e.contentHooks||(e.contentHooks=[])).push(t,s),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,s)),f&&(e.viewHooks||(e.viewHooks=[])).push(-t,f),v&&((e.viewHooks||(e.viewHooks=[])).push(t,v),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,v)),null!=l&&(e.destroyHooks||(e.destroyHooks=[])).push(t,l)}}function hl(e,n,t){C_(e,n,3,t)}function fl(e,n,t,r){(3&e[2])===t&&C_(e,n,t,r)}function xh(e,n){let t=e[2];(3&t)===n&&(t&=2047,t+=1,e[2]=t)}function C_(e,n,t,r){const o=r??-1,u=n.length-1;let s=0;for(let f=void 0!==r?65535&e[18]:0;f<u;f++)if("number"==typeof n[f+1]){if(s=n[f],null!=r&&s>=r)break}else n[f]<0&&(e[18]+=65536),(s<o||-1==o)&&(FT(e,t,n,f),e[18]=(4294901760&e[18])+f+2),f++}function FT(e,n,t,r){const a=t[r]<0,o=t[r+1],s=e[a?-t[r]:t[r]];if(a){if(e[2]>>11<e[18]>>16&&(3&e[2])===n){e[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}class Uu{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function gl(e,n,t){let r=0;for(;r<t.length;){const a=t[r];if("number"==typeof a){if(0!==a)break;r++;const o=t[r++],u=t[r++],s=t[r++];e.setAttribute(n,u,s,o)}else{const o=a,u=t[++r];M_(o)?e.setProperty(n,o,u):e.setAttribute(n,o,u),r++}}return r}function E_(e){return 3===e||4===e||6===e}function M_(e){return 64===e.charCodeAt(0)}function pl(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const a=n[r];"number"==typeof a?t=a:0===t||P_(e,t,a,null,-1===t||2===t?n[++r]:null)}}return e}function P_(e,n,t,r,a){let o=0,u=e.length;if(-1===n)u=-1;else for(;o<e.length;){const s=e[o++];if("number"==typeof s){if(s===n){u=-1;break}if(s>n){u=o-1;break}}}for(;o<e.length;){const s=e[o];if("number"==typeof s)break;if(s===t){if(null===r)return void(null!==a&&(e[o+1]=a));if(r===e[o+1])return void(e[o+2]=a)}o++,null!==r&&o++,null!==a&&o++}-1!==u&&(e.splice(u,0,n),o=u+1),e.splice(o++,0,t),null!==r&&e.splice(o++,0,r),null!==a&&e.splice(o++,0,a)}function A_(e){return-1!==e}function Vs(e){return 32767&e}function Us(e,n){let t=function VT(e){return e>>16}(e),r=n;for(;t>0;)r=r[15],t--;return r}let Lh=!0;function ml(e){const n=Lh;return Lh=e,n}let UT=0;const da={};function ju(e,n){const t=Fh(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,kh(r.data,e),kh(n,null),kh(r.blueprint,null));const a=_l(e,n),o=e.injectorIndex;if(A_(a)){const u=Vs(a),s=Us(a,n),f=s[1].data;for(let v=0;v<8;v++)n[o+v]=s[u+v]|f[u+v]}return n[o+8]=a,o}function kh(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Fh(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function _l(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,a=n;for(;null!==a;){if(r=B_(a),null===r)return-1;if(t++,a=a[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function vl(e,n,t){!function GT(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ou)&&(r=t[Ou]),null==r&&(r=t[Ou]=UT++);const a=255&r;n.data[e+(a>>5)]|=1<<a}(e,n,t)}function L_(e,n,t){if(t&Xn.Optional)return e;$c()}function k_(e,n,t,r){if(t&Xn.Optional&&void 0===r&&(r=null),0==(t&(Xn.Self|Xn.Host))){const a=e[9],o=Ro(void 0);try{return a?a.get(n,r,t&Xn.Optional):t_(n,r,t&Xn.Optional)}finally{Ro(o)}}return L_(r,0,t)}function F_(e,n,t,r=Xn.Default,a){if(null!==e){if(1024&n[2]){const u=function JT(e,n,t,r,a){let o=e,u=n;for(;null!==o&&null!==u&&1024&u[2]&&!(256&u[2]);){const s=O_(o,u,t,r|Xn.Self,da);if(s!==da)return s;let f=o.parent;if(!f){const v=u[21];if(v){const l=v.get(t,da,r);if(l!==da)return l}f=B_(u),u=u[15]}o=f}return a}(e,n,t,r,da);if(u!==da)return u}const o=O_(e,n,t,r,da);if(o!==da)return o}return k_(n,t,r,a)}function O_(e,n,t,r,a){const o=function zT(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Ou)?e[Ou]:void 0;return"number"==typeof n?n>=0?255&n:KT:n}(t);if("function"==typeof o){if(!D_(n,e,r))return r&Xn.Host?L_(a,0,r):k_(n,t,r,a);try{const u=o(r);if(null!=u||r&Xn.Optional)return u;$c()}finally{T_()}}else if("number"==typeof o){let u=null,s=Fh(e,n),f=-1,v=r&Xn.Host?n[16][6]:null;for((-1===s||r&Xn.SkipSelf)&&(f=-1===s?_l(e,n):n[s+8],-1!==f&&W_(r,!1)?(u=n[1],s=Vs(f),n=Us(f,n)):s=-1);-1!==s;){const l=n[1];if(N_(o,s,l.data)){const I=HT(s,n,t,u,r,v);if(I!==da)return I}f=n[s+8],-1!==f&&W_(r,n[1].data[s+8]===v)&&N_(o,s,n)?(u=l,s=Vs(f),n=Us(f,n)):s=-1}}return a}function HT(e,n,t,r,a,o){const u=n[1],s=u.data[e+8],l=function yl(e,n,t,r,a){const o=e.providerIndexes,u=n.data,s=1048575&o,f=e.directiveStart,l=o>>20,c=a?s+l:e.directiveEnd;for(let _=r?s:s+l;_<c;_++){const h=u[_];if(_<f&&t===h||_>=f&&h.type===t)return _}if(a){const _=u[f];if(_&&Jo(_)&&_.type===t)return f}return null}(s,u,t,null==r?al(s)&&Lh:r!=u&&0!=(3&s.type),a&Xn.Host&&o===s);return null!==l?Hu(n,u,l,s):da}function Hu(e,n,t,r){let a=e[t];const o=n.data;if(function OT(e){return e instanceof Uu}(a)){const u=a;u.resolving&&function GS(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Bn(-200,`Circular dependency in DI detected for ${e}${t}`)}(function Lr(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():or(e)}(o[t]));const s=ml(u.canSeeViewProviders);u.resolving=!0;const f=u.injectImpl?Ro(u.injectImpl):null;D_(e,r,Xn.Default);try{a=e[t]=u.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&function kT(e,n,t){const{ngOnChanges:r,ngOnInit:a,ngDoCheck:o}=n.type.prototype;if(r){const u=u_(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,u),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,u)}a&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,a),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,o))}(t,o[t],n)}finally{null!==f&&Ro(f),ml(s),u.resolving=!1,T_()}}return a}function N_(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function W_(e,n){return!(e&Xn.Self||e&Xn.Host&&n)}class Gs{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return F_(this._tNode,this._lView,n,r,t)}}function KT(){return new Gs(bi(),sn())}function B_(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[6]:null}const Hs="__parameters__";function Ks(e,n,t){return Ba(()=>{const r=function Nh(e){return function(...t){if(e){const r=e(...t);for(const a in r)this[a]=r[a]}}}(n);function a(...o){if(this instanceof a)return r.apply(this,o),this;const u=new a(...o);return s.annotation=u,s;function s(f,v,l){const I=f.hasOwnProperty(Hs)?f[Hs]:Object.defineProperty(f,Hs,{value:[]})[Hs];for(;I.length<=l;)I.push(null);return(I[l]=I[l]||[]).push(u),f}}return t&&(a.prototype=Object.create(t.prototype)),a.prototype.ngMetadataName=e,a.annotationCls=a,a})}class ir{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=dr({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ea(e,n){e.forEach(t=>Array.isArray(t)?Ea(t,n):n(t))}function U_(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Il(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}const Qu={},Uh="__NG_DI_FLAG__",bl="ngTempTokenPath",aC=/\n/gm,z_="__source";let qu;function Js(e){const n=qu;return qu=e,n}function uC(e,n=Xn.Default){if(void 0===qu)throw new Bn(-203,!1);return null===qu?t_(e,void 0,n):qu.get(e,n&Xn.Optional?null:void 0,n)}function Kn(e,n=Xn.Default){return(function XS(){return hh}()||uC)($n(e),n)}function di(e,n=Xn.Default){return"number"!=typeof n&&(n=0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)),Kn(e,n)}function Gh(e){const n=[];for(let t=0;t<e.length;t++){const r=$n(e[t]);if(Array.isArray(r)){if(0===r.length)throw new Bn(900,!1);let a,o=Xn.Default;for(let u=0;u<r.length;u++){const s=r[u],f=cC(s);"number"==typeof f?-1===f?a=s.token:o|=f:a=s}n.push(Kn(a,o))}else n.push(Kn(r))}return n}function Xu(e,n){return e[Uh]=n,e.prototype[Uh]=n,e}function cC(e){return e[Uh]}const Zu=Xu(Ks("Optional"),8),$u=Xu(Ks("SkipSelf"),4);let Hh;class iv{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const LC=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var mi=(()=>((mi=mi||{})[mi.NONE=0]="NONE",mi[mi.HTML=1]="HTML",mi[mi.STYLE=2]="STYLE",mi[mi.SCRIPT=3]="SCRIPT",mi[mi.URL=4]="URL",mi[mi.RESOURCE_URL=5]="RESOURCE_URL",mi))();function Xh(e){const n=function ic(){const e=sn();return e&&e[12]}();return n?n.sanitize(mi.URL,e)||"":function nc(e,n){const t=function PC(e){return e instanceof iv&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===n}(e,"URL")?function Ha(e){return e instanceof iv?e.changingThisBreaksApplicationSecurity:e}(e):function El(e){return(e=String(e)).match(LC)?e:"unsafe:"+e}(or(e))}const Zh=new ir("ENVIRONMENT_INITIALIZER"),fv=new ir("INJECTOR",-1),gv=new ir("INJECTOR_DEF_TYPES");class pv{get(n,t=Qu){if(t===Qu){const r=new Error(`NullInjectorError: No provider for ${jr(n)}!`);throw r.name="NullInjectorError",r}return t}}function YC(...e){return{\u0275providers:mv(0,e)}}function mv(e,...n){const t=[],r=new Set;let a;return Ea(n,o=>{const u=o;$h(u,t,[],r)&&(a||(a=[]),a.push(u))}),void 0!==a&&_v(a,t),t}function _v(e,n){for(let t=0;t<e.length;t++){const{providers:a}=e[t];Ea(a,o=>{n.push(o)})}}function $h(e,n,t,r){if(!(e=$n(e)))return!1;let a=null,o=$m(e);const u=!o&&Vr(e);if(o||u){if(u&&!u.standalone)return!1;a=e}else{const f=e.ngModule;if(o=$m(f),!o)return!1;a=f}const s=r.has(a);if(u){if(s)return!1;if(r.add(a),u.dependencies){const f="function"==typeof u.dependencies?u.dependencies():u.dependencies;for(const v of f)$h(v,n,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!s){let v;r.add(a);try{Ea(o.imports,l=>{$h(l,n,t,r)&&(v||(v=[]),v.push(l))})}finally{}void 0!==v&&_v(v,n)}if(!s){const v=gs(a)||(()=>new a);n.push({provide:a,useFactory:v,deps:kr},{provide:gv,useValue:a,multi:!0},{provide:Zh,useValue:()=>Kn(a),multi:!0})}const f=o.providers;null==f||s||Ea(f,l=>{n.push(l)})}}return a!==e&&void 0!==e.providers}const JC=Gr({provide:String,useValue:Gr});function ef(e){return null!==e&&"object"==typeof e&&JC in e}function ms(e){return"function"==typeof e}const tf=new ir("Set Injector scope."),Pl={},qC={};let nf;function Al(){return void 0===nf&&(nf=new pv),nf}class za{}class Iv extends za{constructor(n,t,r,a){super(),this.parent=t,this.source=r,this.scopes=a,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,af(n,u=>this.processProvider(u)),this.records.set(fv,Xs(void 0,this)),a.has("environment")&&this.records.set(za,Xs(void 0,this));const o=this.records.get(tf);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gv.multi,kr,Xn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const t=Js(this),r=Ro(void 0);try{return n()}finally{Js(t),Ro(r)}}get(n,t=Qu,r=Xn.Default){this.assertNotDestroyed();const a=Js(this),o=Ro(void 0);try{if(!(r&Xn.SkipSelf)){let s=this.records.get(n);if(void 0===s){const f=function tE(e){return"function"==typeof e||"object"==typeof e&&e instanceof ir}(n)&&el(n);s=f&&this.injectableDefInScope(f)?Xs(rf(n),Pl):null,this.records.set(n,s)}if(null!=s)return this.hydrate(n,s)}return(r&Xn.Self?Al():this.parent).get(n,t=r&Xn.Optional&&t===Qu?null:t)}catch(u){if("NullInjectorError"===u.name){if((u[bl]=u[bl]||[]).unshift(jr(n)),a)throw u;return function lC(e,n,t,r){const a=e[bl];throw n[z_]&&a.unshift(n[z_]),e.message=function dC(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let a=jr(n);if(Array.isArray(n))a=n.map(jr).join(" -> ");else if("object"==typeof n){let o=[];for(let u in n)if(n.hasOwnProperty(u)){let s=n[u];o.push(u+":"+("string"==typeof s?JSON.stringify(s):jr(s)))}a=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${a}]: ${e.replace(aC,"\n  ")}`}("\n"+e.message,a,t,r),e.ngTokenPath=a,e[bl]=null,e}(u,n,"R3InjectorError",this.source)}throw u}finally{Ro(o),Js(a)}}resolveInjectorInitializers(){const n=Js(this),t=Ro(void 0);try{const r=this.get(Zh.multi,kr,Xn.Self);for(const a of r)a()}finally{Js(n),Ro(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(jr(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Bn(205,!1)}processProvider(n){let t=ms(n=$n(n))?n:$n(n&&n.provide);const r=function ZC(e){return ef(e)?Xs(void 0,e.useValue):Xs(function Dv(e,n,t){let r;if(ms(e)){const a=$n(e);return gs(a)||rf(a)}if(ef(e))r=()=>$n(e.useValue);else if(function yv(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Gh(e.deps||[]));else if(function vv(e){return!(!e||!e.useExisting)}(e))r=()=>Kn($n(e.useExisting));else{const a=$n(e&&(e.useClass||e.provide));if(!function $C(e){return!!e.deps}(e))return gs(a)||rf(a);r=()=>new a(...Gh(e.deps))}return r}(e),Pl)}(n);if(ms(n)||!0!==n.multi)this.records.get(t);else{let a=this.records.get(t);a||(a=Xs(void 0,Pl,!0),a.factory=()=>Gh(a.multi),this.records.set(t,a)),t=n,a.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===Pl&&(t.value=qC,t.value=t.factory()),"object"==typeof t.value&&t.value&&function eE(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=$n(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function rf(e){const n=el(e),t=null!==n?n.factory:gs(e);if(null!==t)return t;if(e instanceof ir)throw new Bn(204,!1);if(e instanceof Function)return function XC(e){const n=e.length;if(n>0)throw function Ju(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}(n,"?"),new Bn(204,!1);const t=function JS(e){const n=e&&(e[tl]||e[e_]);if(n){const t=function QS(e){if(e.hasOwnProperty("name"))return e.name;const n=(""+e).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),n}return null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new Bn(204,!1)}function Xs(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function nE(e){return!!e.\u0275providers}function af(e,n){for(const t of e)Array.isArray(t)?af(t,n):nE(t)?af(t.\u0275providers,n):n(t)}class bv{}class oE{resolveComponentFactory(n){throw function iE(e){const n=Error(`No component factory found for ${jr(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let oc=(()=>{class e{}return e.NULL=new oE,e})();function aE(){return Zs(bi(),sn())}function Zs(e,n){return new Ka(Oo(e,n))}let Ka=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=aE,e})();class Sv{}let cE=(()=>{class e{}return e.\u0275prov=dr({token:e,providedIn:"root",factory:()=>null}),e})();class Rl{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const lE=new Rl("14.2.1"),sf={};function hf(e){return e.ngOriginalError}class $s{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&hf(n);for(;t&&hf(t);)t=hf(t);return t||null}}const ff=new Map;let bE=0;const pf="__ngContext__";function ji(e,n){lo(n)?(e[pf]=n[20],function SE(e){ff.set(e[20],e)}(n)):e[pf]=n}function ac(e){const n=e[pf];return"number"==typeof n?function Av(e){return ff.get(e)||null}(n):n||null}function mf(e){const n=ac(e);return n?lo(n)?n:n.lView:null}function Ma(e){return e instanceof Function?e():e}var ho=(()=>((ho=ho||{})[ho.Important=1]="Important",ho[ho.DashCase=2]="DashCase",ho))();function vf(e,n){return undefined(e,n)}function sc(e){const n=e[3];return Yo(n)?n[3]:n}function yf(e){return Nv(e[13])}function If(e){return Nv(e[4])}function Nv(e){for(;null!==e&&!Yo(e);)e=e[4];return e}function tu(e,n,t,r,a){if(null!=r){let o,u=!1;Yo(r)?o=r:lo(r)&&(u=!0,r=r[0]);const s=pi(r);0===e&&null!==t?null==a?jv(n,t,s):_s(n,t,s,a||null,!0):1===e&&null!==t?_s(n,t,s,a||null,!0):2===e?function qv(e,n,t){const r=Ll(e,n);r&&function XE(e,n,t,r){e.removeChild(n,t,r)}(e,r,n,t)}(n,s,u):3===e&&n.destroyNode(s),null!=o&&function e1(e,n,t,r,a){const o=t[7];o!==pi(t)&&tu(n,e,r,o,a);for(let s=10;s<t.length;s++){const f=t[s];uc(f[1],f,e,n,r,o)}}(n,e,o,t,a)}}function bf(e,n,t){return e.createElement(n,t)}function Bv(e,n){const t=e[9],r=t.indexOf(n),a=n[3];512&n[2]&&(n[2]&=-513,wh(a,-1)),t.splice(r,1)}function wf(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const a=r[17];null!==a&&a!==e&&Bv(a,r),n>0&&(e[t-1][4]=r[4]);const o=Il(e,10+n);!function jE(e,n){uc(e,n,n[11],2,null,null),n[0]=null,n[6]=null}(r[1],r);const u=o[19];null!==u&&u.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Vv(e,n){if(!(128&n[2])){const t=n[11];t.destroyNode&&uc(e,n,t,3,null,null),function KE(e){let n=e[13];if(!n)return Sf(e[1],e);for(;n;){let t=null;if(lo(n))t=n[13];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)lo(n)&&Sf(n[1],n),n=n[3];null===n&&(n=e),lo(n)&&Sf(n[1],n),t=n&&n[4]}n=t}}(n)}}function Sf(e,n){if(!(128&n[2])){n[2]&=-65,n[2]|=128,function qE(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const a=n[t[r]];if(!(a instanceof Uu)){const o=t[r+1];if(Array.isArray(o))for(let u=0;u<o.length;u+=2){const s=a[o[u]],f=o[u+1];try{f.call(s)}finally{}}else try{o.call(a)}finally{}}}}(e,n),function QE(e,n){const t=e.cleanup,r=n[7];let a=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const u=t[o+1],s="function"==typeof u?u(n):pi(n[u]),f=r[a=t[o+2]],v=t[o+3];"boolean"==typeof v?s.removeEventListener(t[o],f,v):v>=0?r[a=v]():r[a=-v].unsubscribe(),o+=2}else{const u=r[a=t[o+1]];t[o].call(u)}if(null!==r){for(let o=a+1;o<r.length;o++)(0,r[o])();n[7]=null}}(e,n),1===n[1].type&&n[11].destroy();const t=n[17];if(null!==t&&Yo(n[3])){t!==n[3]&&Bv(t,n);const r=n[19];null!==r&&r.detachView(e)}!function TE(e){ff.delete(e[20])}(n)}}function Uv(e,n,t){return function Gv(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[0];if(2&r.flags){const a=e.data[r.directiveStart].encapsulation;if(a===ca.None||a===ca.Emulated)return null}return Oo(r,t)}(e,n.parent,t)}function _s(e,n,t,r,a){e.insertBefore(n,t,r,a)}function jv(e,n,t){e.appendChild(n,t)}function Hv(e,n,t,r,a){null!==r?_s(e,n,t,r,a):jv(e,n,t)}function Ll(e,n){return e.parentNode(n)}let Yv=function Kv(e,n,t){return 40&e.type?Oo(e,t):null};function kl(e,n,t,r){const a=Uv(e,r,n),o=n[11],s=function zv(e,n,t){return Yv(e,n,t)}(r.parent||n[6],r,n);if(null!=a)if(Array.isArray(t))for(let f=0;f<t.length;f++)Hv(o,a,t[f],s,!1);else Hv(o,a,t,s,!1)}function Fl(e,n){if(null!==n){const t=n.type;if(3&t)return Oo(n,e);if(4&t)return Cf(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return Fl(e,r);{const a=e[n.index];return Yo(a)?Cf(-1,a):pi(a)}}if(32&t)return vf(n,e)()||pi(e[n.index]);{const r=Qv(e,n);return null!==r?Array.isArray(r)?r[0]:Fl(sc(e[16]),r):Fl(e,n.next)}}return null}function Qv(e,n){return null!==n?e[16][6].projection[n.projection]:null}function Cf(e,n){const t=10+e+1;if(t<n.length){const r=n[t],a=r[1].firstChild;if(null!==a)return Fl(r,a)}return n[7]}function Ef(e,n,t,r,a,o,u){for(;null!=t;){const s=r[t.index],f=t.type;if(u&&0===n&&(s&&ji(pi(s),r),t.flags|=4),64!=(64&t.flags))if(8&f)Ef(e,n,t.child,r,a,o,!1),tu(n,e,a,s,o);else if(32&f){const v=vf(t,r);let l;for(;l=v();)tu(n,e,a,l,o);tu(n,e,a,s,o)}else 16&f?Xv(e,n,r,t,a,o):tu(n,e,a,s,o);t=u?t.projectionNext:t.next}}function uc(e,n,t,r,a,o){Ef(t,r,e.firstChild,n,a,o,!1)}function Xv(e,n,t,r,a,o){const u=t[16],f=u[6].projection[r.projection];if(Array.isArray(f))for(let v=0;v<f.length;v++)tu(n,e,a,f[v],o);else Ef(e,n,f,u[3],a,o,!0)}function Zv(e,n,t){e.setAttribute(n,"style",t)}function Mf(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function $v(e,n,t){let r=e.length;for(;;){const a=e.indexOf(n,t);if(-1===a)return a;if(0===a||e.charCodeAt(a-1)<=32){const o=n.length;if(a+o===r||e.charCodeAt(a+o)<=32)return a}t=a+1}}const ey="ng-template";function n1(e,n,t){let r=0;for(;r<e.length;){let a=e[r++];if(t&&"class"===a){if(a=e[r],-1!==$v(a.toLowerCase(),n,0))return!0}else if(1===a){for(;r<e.length&&"string"==typeof(a=e[r++]);)if(a.toLowerCase()===n)return!0;return!1}}return!1}function ty(e){return 4===e.type&&e.value!==ey}function i1(e,n,t){return n===(4!==e.type||t?e.value:ey)}function o1(e,n,t){let r=4;const a=e.attrs||[],o=function u1(e){for(let n=0;n<e.length;n++)if(E_(e[n]))return n;return e.length}(a);let u=!1;for(let s=0;s<n.length;s++){const f=n[s];if("number"!=typeof f){if(!u)if(4&r){if(r=2|1&r,""!==f&&!i1(e,f,t)||""===f&&1===n.length){if(Qo(r))return!1;u=!0}}else{const v=8&r?f:n[++s];if(8&r&&null!==e.attrs){if(!n1(e.attrs,v,t)){if(Qo(r))return!1;u=!0}continue}const I=a1(8&r?"class":f,a,ty(e),t);if(-1===I){if(Qo(r))return!1;u=!0;continue}if(""!==v){let c;c=I>o?"":a[I+1].toLowerCase();const _=8&r?c:null;if(_&&-1!==$v(_,v,0)||2&r&&v!==c){if(Qo(r))return!1;u=!0}}}}else{if(!u&&!Qo(r)&&!Qo(f))return!1;if(u&&Qo(f))continue;u=!1,r=f|1&r}}return Qo(r)||u}function Qo(e){return 0==(1&e)}function a1(e,n,t,r){if(null===n)return-1;let a=0;if(r||!t){let o=!1;for(;a<n.length;){const u=n[a];if(u===e)return a;if(3===u||6===u)o=!0;else{if(1===u||2===u){let s=n[++a];for(;"string"==typeof s;)s=n[++a];continue}if(4===u)break;if(0===u){a+=4;continue}}a+=o?1:2}return-1}return function c1(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function ny(e,n,t=!1){for(let r=0;r<n.length;r++)if(o1(e,n[r],t))return!0;return!1}function ry(e,n){return e?":not("+n.trim()+")":n}function d1(e){let n=e[0],t=1,r=2,a="",o=!1;for(;t<e.length;){let u=e[t];if("string"==typeof u)if(2&r){const s=e[++t];a+="["+u+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?a+="."+u:4&r&&(a+=" "+u);else""!==a&&!Qo(u)&&(n+=ry(o,a),a=""),r=u,o=o||!Qo(r);t++}return""!==a&&(n+=ry(o,a)),n}const ar={};function eo(e){iy(Pr(),sn(),Zi()+e,!1)}function iy(e,n,t,r){if(!r)if(3==(3&n[2])){const o=e.preOrderCheckHooks;null!==o&&hl(n,o,t)}else{const o=e.preOrderHooks;null!==o&&fl(n,o,0,t)}Ga(t)}function uy(e,n=null,t=null,r){const a=cy(e,n,t,r);return a.resolveInjectorInitializers(),a}function cy(e,n=null,t=null,r,a=new Set){const o=[t||kr,YC(e)];return r=r||("object"==typeof e?void 0:jr(e)),new Iv(o,n||Al(),r||null,a)}let qo=(()=>{class e{static create(t,r){if(Array.isArray(t))return uy({name:""},r,t,"");{const a=t.name??"";return uy({name:a},t.parent,t.providers,a)}}}return e.THROW_IF_NOT_FOUND=Qu,e.NULL=new pv,e.\u0275prov=dr({token:e,providedIn:"any",factory:()=>Kn(fv)}),e.__NG_ELEMENT_ID__=-1,e})();function Hn(e,n=Xn.Default){const t=sn();return null===t?Kn(e,n):F_(bi(),t,$n(e),n)}function Lf(){throw new Error("invalid")}function Cy(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const a=t[r],o=t[r+1];if(-1!==o){const u=e.data[o];Mh(a),u.contentQueries(2,n[o],o)}}}function Vl(e,n,t,r,a,o,u,s,f,v,l){const I=n.blueprint.slice();return I[0]=a,I[2]=76|r,(null!==l||e&&1024&e[2])&&(I[2]|=1024),h_(I),I[3]=I[15]=e,I[8]=t,I[10]=u||e&&e[10],I[11]=s||e&&e[11],I[12]=f||e&&e[12]||null,I[9]=v||e&&e[9]||null,I[6]=o,I[20]=function wE(){return bE++}(),I[21]=l,I[16]=2==n.type?e[16]:I,I}function ru(e,n,t,r,a){let o=e.data[n];if(null===o)o=function Hf(e,n,t,r,a){const o=__(),u=Sh(),f=e.data[n]=function J1(e,n,t,r,a,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:a,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?o:o&&o.parent,t,n,r,a);return null===e.firstChild&&(e.firstChild=f),null!==o&&(u?null==o.child&&null!==f.parent&&(o.child=f):null===o.next&&(o.next=f)),f}(e,n,t,r,a),function wT(){return rr.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=r,o.attrs=a;const u=function Vu(){const e=rr.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();o.injectorIndex=null===u?-1:u.injectorIndex}return la(o,!0),o}function iu(e,n,t,r){if(0===t)return-1;const a=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return a}function Ul(e,n,t){Ph(n);try{const r=e.viewQuery;null!==r&&$f(1,r,t);const a=e.template;null!==a&&Ey(e,n,a,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Cy(e,n),e.staticViewQueries&&$f(2,e.viewQuery,t);const o=e.components;null!==o&&function H1(e,n){for(let t=0;t<n.length;t++)lM(e,n[t])}(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,Ah()}}function cc(e,n,t,r){const a=n[2];if(128!=(128&a)){Ph(n);try{h_(n),function v_(e){return rr.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&Ey(e,n,t,2,r);const u=3==(3&a);if(u){const v=e.preOrderCheckHooks;null!==v&&hl(n,v,null)}else{const v=e.preOrderHooks;null!==v&&fl(n,v,0,null),xh(n,0)}if(function uM(e){for(let n=yf(e);null!==n;n=If(n)){if(!n[2])continue;const t=n[9];for(let r=0;r<t.length;r++){const a=t[r],o=a[3];0==(512&a[2])&&wh(o,1),a[2]|=512}}}(n),function sM(e){for(let n=yf(e);null!==n;n=If(n))for(let t=10;t<n.length;t++){const r=n[t],a=r[1];cl(r)&&cc(a,r,a.template,r[8])}}(n),null!==e.contentQueries&&Cy(e,n),u){const v=e.contentCheckHooks;null!==v&&hl(n,v)}else{const v=e.contentHooks;null!==v&&fl(n,v,1),xh(n,1)}!function G1(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const a=t[r];if(a<0)Ga(~a);else{const o=a,u=t[++r],s=t[++r];ST(u,o),s(2,n[o])}}}finally{Ga(-1)}}(e,n);const s=e.components;null!==s&&function j1(e,n){for(let t=0;t<n.length;t++)cM(e,n[t])}(n,s);const f=e.viewQuery;if(null!==f&&$f(2,f,r),u){const v=e.viewCheckHooks;null!==v&&hl(n,v)}else{const v=e.viewHooks;null!==v&&fl(n,v,2),xh(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[2]&=-41,512&n[2]&&(n[2]&=-513,wh(n[3],-1))}finally{Ah()}}}function z1(e,n,t,r){const a=n[10],u=function d_(e){return 4==(4&e[2])}(n);try{!u&&a.begin&&a.begin(),u&&Ul(e,n,r),cc(e,n,t,r)}finally{!u&&a.end&&a.end()}}function Ey(e,n,t,r,a){const o=Zi(),u=2&r;try{Ga(-1),u&&n.length>22&&iy(e,n,22,!1),t(r,a)}finally{Ga(o)}}function zf(e,n,t){!g_()||(function $1(e,n,t,r){const a=t.directiveStart,o=t.directiveEnd;e.firstCreatePass||ju(t,n),ji(r,n);const u=t.initialInputs;for(let s=a;s<o;s++){const f=e.data[s],v=Jo(f);v&&iM(n,t,f);const l=Hu(n,e,s,t);ji(l,n),null!==u&&oM(0,s-a,l,f,0,u),v&&(Io(t.index,n)[8]=l)}}(e,n,t,Oo(t,n)),128==(128&t.flags)&&function eM(e,n,t){const r=t.directiveStart,a=t.directiveEnd,o=t.index,u=function TT(){return rr.lFrame.currentDirectiveIndex}();try{Ga(o);for(let s=r;s<a;s++){const f=e.data[s],v=n[s];Ch(s),(null!==f.hostBindings||0!==f.hostVars||null!==f.hostAttrs)&&Fy(f,v)}}finally{Ga(-1),Ch(u)}}(e,n,t))}function Kf(e,n,t=Oo){const r=n.localNames;if(null!==r){let a=n.index+1;for(let o=0;o<r.length;o+=2){const u=r[o+1],s=-1===u?t(n,e):e[u];e[a++]=s}}}function Py(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=Yf(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function Yf(e,n,t,r,a,o,u,s,f,v){const l=22+r,I=l+a,c=function K1(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:ar);return t}(l,I),_="function"==typeof v?v():v;return c[1]={type:e,blueprint:c,template:t,queries:null,viewQuery:s,declTNode:n,data:c.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:f,consts:_,incompleteFirstPass:!1}}function xy(e,n,t){for(let r in e)if(e.hasOwnProperty(r)){const a=e[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(n,a):t[r]=[n,a]}return t}function Ry(e,n){const r=n.directiveEnd,a=e.data,o=n.attrs,u=[];let s=null,f=null;for(let v=n.directiveStart;v<r;v++){const l=a[v],I=l.inputs,c=null===o||ty(n)?null:aM(I,o);u.push(c),s=xy(I,v,s),f=xy(l.outputs,v,f)}null!==s&&(s.hasOwnProperty("class")&&(n.flags|=16),s.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=u,n.inputs=s,n.outputs=f}function Ly(e,n){const t=Io(n,e);16&t[2]||(t[2]|=32)}function Jf(e,n,t,r){let a=!1;if(g_()){const o=function tM(e,n,t){const r=e.directiveRegistry;let a=null;if(r)for(let o=0;o<r.length;o++){const u=r[o];ny(t,u.selectors,!1)&&(a||(a=[]),vl(ju(t,n),e,u.type),Jo(u)?(Oy(e,t),a.unshift(u)):a.push(u))}return a}(e,n,t),u=null===r?null:{"":-1};if(null!==o){a=!0,Ny(t,e.data.length,o.length);for(let l=0;l<o.length;l++){const I=o[l];I.providersResolver&&I.providersResolver(I)}let s=!1,f=!1,v=iu(e,n,o.length,null);for(let l=0;l<o.length;l++){const I=o[l];t.mergedAttrs=pl(t.mergedAttrs,I.hostAttrs),Wy(e,t,n,v,I),rM(v,I,u),null!==I.contentQueries&&(t.flags|=8),(null!==I.hostBindings||null!==I.hostAttrs||0!==I.hostVars)&&(t.flags|=128);const c=I.type.prototype;!s&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),s=!0),!f&&(c.ngOnChanges||c.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),f=!0),v++}Ry(e,t)}u&&function nM(e,n,t){if(n){const r=e.localNames=[];for(let a=0;a<n.length;a+=2){const o=t[n[a+1]];if(null==o)throw new Bn(-301,!1);r.push(n[a],o)}}}(t,r,u)}return t.mergedAttrs=pl(t.mergedAttrs,t.attrs),a}function ky(e,n,t,r,a,o){const u=o.hostBindings;if(u){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const f=~n.index;(function Z1(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(s)!=f&&s.push(f),s.push(r,a,u)}}function Fy(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function Oy(e,n){n.flags|=2,(e.components||(e.components=[])).push(n.index)}function rM(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;Jo(n)&&(t[""]=e)}}function Ny(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function Wy(e,n,t,r,a){e.data[r]=a;const o=a.factory||(a.factory=gs(a.type)),u=new Uu(o,Jo(a),Hn);e.blueprint[r]=u,t[r]=u,ky(e,n,0,r,iu(e,t,a.hostVars,ar),a)}function iM(e,n,t){const r=Oo(n,e),a=Py(t),o=e[10],u=Gl(e,Vl(e,a,null,t.onPush?32:16,r,n,o,o.createRenderer(r,t),null,null,null));e[n.index]=u}function fa(e,n,t,r,a,o){const u=Oo(e,n);!function Qf(e,n,t,r,a,o,u){if(null==o)e.removeAttribute(n,a,t);else{const s=null==u?or(o):u(o,r||"",a);e.setAttribute(n,a,s,t)}}(n[11],u,o,e.value,t,r,a)}function oM(e,n,t,r,a,o){const u=o[n];if(null!==u){const s=r.setInput;for(let f=0;f<u.length;){const v=u[f++],l=u[f++],I=u[f++];null!==s?r.setInput(t,I,v,l):t[l]=I}}}function aM(e,n){let t=null,r=0;for(;r<n.length;){const a=n[r];if(0!==a)if(5!==a){if("number"==typeof a)break;e.hasOwnProperty(a)&&(null===t&&(t=[]),t.push(a,e[a],n[r+1])),r+=2}else r+=2;else r+=4}return t}function By(e,n,t,r){return new Array(e,!0,!1,n,null,0,r,t,null,null)}function cM(e,n){const t=Io(n,e);if(cl(t)){const r=t[1];48&t[2]?cc(r,t,r.template,t[8]):t[5]>0&&qf(t)}}function qf(e){for(let r=yf(e);null!==r;r=If(r))for(let a=10;a<r.length;a++){const o=r[a];if(cl(o))if(512&o[2]){const u=o[1];cc(u,o,u.template,o[8])}else o[5]>0&&qf(o)}const t=e[1].components;if(null!==t)for(let r=0;r<t.length;r++){const a=Io(t[r],e);cl(a)&&a[5]>0&&qf(a)}}function lM(e,n){const t=Io(n,e),r=t[1];(function dM(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(r,t),Ul(r,t,t[8])}function Gl(e,n){return e[13]?e[14][4]=n:e[13]=n,e[14]=n,n}function Xf(e){for(;e;){e[2]|=32;const n=sc(e);if(iT(e)&&!n)return e;e=n}return null}function $f(e,n,t){Mh(0),n(e,t)}function Uy(e){return e[7]||(e[7]=[])}function Gy(e){return e.cleanup||(e.cleanup=[])}function Hy(e,n){const t=e[9],r=t?t.get($s,null):null;r&&r.handleError(n)}function eg(e,n,t,r,a){for(let o=0;o<t.length;){const u=t[o++],s=t[o++],f=n[u],v=e.data[u];null!==v.setInput?v.setInput(f,a,r,s):f[s]=a}}function Aa(e,n,t){const r=function ul(e,n){return pi(n[e])}(n,e);!function Wv(e,n,t){e.setValue(n,t)}(e[11],r,t)}function jl(e,n,t){let r=t?e.styles:null,a=t?e.classes:null,o=0;if(null!==n)for(let u=0;u<n.length;u++){const s=n[u];"number"==typeof s?o=s:1==o?a=uh(a,s):2==o&&(r=uh(r,s+": "+n[++u]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=a:e.classesWithoutHost=a}function Hl(e,n,t,r,a=!1){for(;null!==t;){const o=n[t.index];if(null!==o&&r.push(pi(o)),Yo(o))for(let s=10;s<o.length;s++){const f=o[s],v=f[1].firstChild;null!==v&&Hl(f[1],f,v,r)}const u=t.type;if(8&u)Hl(e,n,t.child,r);else if(32&u){const s=vf(t,n);let f;for(;f=s();)r.push(f)}else if(16&u){const s=Qv(n,t);if(Array.isArray(s))r.push(...s);else{const f=sc(n[16]);Hl(f[1],f,s,r,!0)}}t=a?t.projectionNext:t.next}return r}class lc{constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,t=n[1];return Hl(t,n,t.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Yo(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(wf(n,r),Il(t,r))}this._attachedToViewContainer=!1}Vv(this._lView[1],this._lView)}onDestroy(n){!function Ay(e,n,t,r){const a=Uy(n);null===t?a.push(r):(a.push(t),e.firstCreatePass&&Gy(e).push(r,a.length-1))}(this._lView[1],this._lView,null,n)}markForCheck(){Xf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Zf(e,n,t){const r=n[10];r.begin&&r.begin();try{cc(e,n,e.template,t)}catch(a){throw Hy(n,a),a}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Bn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zE(e,n){uc(e,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Bn(902,!1);this._appRef=n}}class fM extends lc{constructor(n){super(n),this._view=n}detectChanges(){!function Vy(e){!function hM(e){for(let n=0;n<e.components.length;n++){const t=e.components[n],r=mf(t);if(null!==r){const a=r[1];z1(a,r,a.template,t)}}}(e[8])}(this._view)}checkNoChanges(){}get context(){return null}}class tg extends oc{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Vr(n);return new dc(t,this.ngModule)}}function zy(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class pM{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){const a=this.injector.get(n,sf,r);return a!==sf||t===sf?a:this.parentInjector.get(n,t,r)}}class dc extends bv{constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function h1(e){return e.map(d1).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return zy(this.componentDef.inputs)}get outputs(){return zy(this.componentDef.outputs)}create(n,t,r,a){let o=(a=a||this.ngModule)instanceof za?a:a?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const u=o?new pM(n,o):n,s=u.get(Sv,null);if(null===s)throw new Bn(407,!1);const f=u.get(cE,null),v=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",I=r?function Y1(e,n,t){return e.selectRootElement(n,t===ca.ShadowDom)}(v,r,this.componentDef.encapsulation):bf(s.createRenderer(null,this.componentDef),l,function gM(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(l)),c=this.componentDef.onPush?288:272,_={components:[]},h=Yf(0,null,null,1,0,null,null,null,null,null),y=Vl(null,h,_,c,null,null,s,v,f,u,null);let p,m;Ph(y);try{const T=function vM(e,n,t,r,a,o){const u=t[1];t[22]=e;const f=ru(u,22,2,"#host",null),v=f.mergedAttrs=n.hostAttrs;null!==v&&(jl(f,v,!0),null!==e&&(gl(a,e,v),null!==f.classes&&Mf(a,e,f.classes),null!==f.styles&&Zv(a,e,f.styles)));const l=r.createRenderer(e,n),I=Vl(t,Py(n),null,n.onPush?32:16,t[22],f,r,l,o||null,null,null);return u.firstCreatePass&&(vl(ju(f,t),u,n.type),Oy(u,f),Ny(f,t.length,1)),Gl(t,I),t[22]=I}(I,this.componentDef,y,s,v);if(I)if(r)gl(v,I,["ng-version",lE.full]);else{const{attrs:C,classes:D}=function f1(e){const n=[],t=[];let r=1,a=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===a?""!==o&&n.push(o,e[++r]):8===a&&t.push(o);else{if(!Qo(a))break;a=o}r++}return{attrs:n,classes:t}}(this.componentDef.selectors[0]);C&&gl(v,I,C),D&&D.length>0&&Mf(v,I,D.join(" "))}if(m=bh(h,22),void 0!==t){const C=m.projection=[];for(let D=0;D<this.ngContentSelectors.length;D++){const S=t[D];C.push(null!=S?Array.from(S):null)}}p=function yM(e,n,t,r,a){const o=t[1],u=function X1(e,n,t){const r=bi();e.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Wy(e,r,n,iu(e,n,1,null),t),Ry(e,r));const a=Hu(n,e,r.directiveStart,r);ji(a,n);const o=Oo(r,n);return o&&ji(o,n),a}(o,t,n);if(r.components.push(u),e[8]=u,null!==a)for(const f of a)f(u,n);if(n.contentQueries){const f=bi();n.contentQueries(1,u,f.directiveStart)}const s=bi();return!o.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Ga(s.index),ky(t[1],s,0,s.directiveStart,s.directiveEnd,n),Fy(n,u)),u}(T,this.componentDef,y,_,[DM]),Ul(h,y,null)}finally{Ah()}return new _M(this.componentType,p,Zs(m,y),y,m)}}class _M extends class rE{}{constructor(n,t,r,a,o){super(),this.location=r,this._rootLView=a,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new fM(a),this.componentType=n}setInput(n,t){const r=this._tNode.inputs;let a;if(null!==r&&(a=r[n])){const o=this._rootLView;eg(o[1],o,a,n,t),Ly(o,this._tNode.index)}}get injector(){return new Gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function DM(){const e=bi();dl(sn()[1],e)}let zl=null;function vs(){if(!zl){const e=Hr.Symbol;if(e&&e.iterator)zl=e.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<n.length;++t){const r=n[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(zl=r)}}}return zl}function hc(e){return!!function rg(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&vs()in e)}function Hi(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function ig(e,n,t,r){const a=sn();return Hi(a,Bs(),n)&&(Pr(),fa(si(),a,e,n,t,r)),ig}function Qa(e,n,t,r,a,o,u,s){const f=sn(),v=Pr(),l=e+22,I=v.firstCreatePass?function LM(e,n,t,r,a,o,u,s,f){const v=n.consts,l=ru(n,e,4,u||null,Ua(v,s));Jf(n,t,l,Ua(v,f)),dl(n,l);const I=l.tViews=Yf(2,l,r,a,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,v);return null!==n.queries&&(n.queries.template(n,l),I.queries=n.queries.embeddedTView(l)),l}(l,v,f,n,t,r,a,o,u):v.data[l];la(I,!1);const c=f[11].createComment("");kl(v,f,c,I),ji(c,f),Gl(f,f[l]=By(c,f,c,I)),sl(I)&&zf(v,f,I),null!=u&&Kf(f,I,s)}function zi(e,n,t){const r=sn();return Hi(r,Bs(),n)&&function wo(e,n,t,r,a,o,u,s){const f=Oo(n,t);let l,v=n.inputs;!s&&null!=v&&(l=v[r])?(eg(e,t,l,r,a),al(n)&&Ly(t,n.index)):3&n.type&&(r=function Q1(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),a=null!=u?u(a,n.value||"",r):a,o.setProperty(f,r,a))}(Pr(),si(),r,e,n,r[11],t,!1),zi}function og(e,n,t,r,a){const u=a?"class":"style";eg(e,t,n.inputs[u],u,r)}function Qr(e,n,t,r){const a=sn(),o=Pr(),u=22+e,s=a[11],f=a[u]=bf(s,n,function LT(){return rr.lFrame.currentNamespace}()),v=o.firstCreatePass?function OM(e,n,t,r,a,o,u){const s=n.consts,v=ru(n,e,2,a,Ua(s,o));return Jf(n,t,v,Ua(s,u)),null!==v.attrs&&jl(v,v.attrs,!1),null!==v.mergedAttrs&&jl(v,v.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,v),v}(u,o,a,0,n,t,r):o.data[u];la(v,!0);const l=v.mergedAttrs;null!==l&&gl(s,f,l);const I=v.classes;null!==I&&Mf(s,f,I);const c=v.styles;return null!==c&&Zv(s,f,c),64!=(64&v.flags)&&kl(o,a,f,v),0===function _T(){return rr.lFrame.elementDepthCount}()&&ji(f,a),function vT(){rr.lFrame.elementDepthCount++}(),sl(v)&&(zf(o,a,v),function My(e,n,t){if(_h(n)){const a=n.directiveEnd;for(let o=n.directiveStart;o<a;o++){const u=e.data[o];u.contentQueries&&u.contentQueries(1,t[o],o)}}}(o,v,a)),null!==r&&Kf(a,v),Qr}function ni(){let e=bi();Sh()?function Th(){rr.lFrame.isParent=!1}():(e=e.parent,la(e,!1));const n=e;!function yT(){rr.lFrame.elementDepthCount--}();const t=Pr();return t.firstCreatePass&&(dl(t,e),_h(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function WT(e){return 0!=(16&e.flags)}(n)&&og(t,n,sn(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function BT(e){return 0!=(32&e.flags)}(n)&&og(t,n,sn(),n.stylesWithoutHost,!1),ni}function to(e,n,t,r){return Qr(e,n,t,r),ni(),to}function Yl(e){return!!e&&"function"==typeof e.then}const aI=function oI(e){return!!e&&"function"==typeof e.subscribe};function Wo(e,n,t,r){const a=sn(),o=Pr(),u=bi();return function uI(e,n,t,r,a,o,u,s){const f=sl(r),l=e.firstCreatePass&&Gy(e),I=n[8],c=Uy(n);let _=!0;if(3&r.type||s){const p=Oo(r,n),m=s?s(p):p,T=c.length,C=s?S=>s(pi(S[r.index])):r.index;let D=null;if(!s&&f&&(D=function WM(e,n,t,r){const a=e.cleanup;if(null!=a)for(let o=0;o<a.length-1;o+=2){const u=a[o];if(u===t&&a[o+1]===r){const s=n[7],f=a[o+2];return s.length>f?s[f]:null}"string"==typeof u&&(o+=2)}return null}(e,n,a,r.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=o,D.__ngLastListenerFn__=o,_=!1;else{o=lI(r,n,I,o,!1);const S=t.listen(m,a,o);c.push(o,S),l&&l.push(a,C,T,T+1)}}else o=lI(r,n,I,o,!1);const h=r.outputs;let y;if(_&&null!==h&&(y=h[a])){const p=y.length;if(p)for(let m=0;m<p;m+=2){const M=n[y[m]][y[m+1]].subscribe(o),G=c.length;c.push(o,M),l&&l.push(a,r.index,G,-(G+1))}}}(o,a,a[11],u,e,n,0,r),Wo}function cI(e,n,t,r){try{return!1!==t(r)}catch(a){return Hy(e,a),!1}}function lI(e,n,t,r,a){return function o(u){if(u===Function)return r;Xf(2&e.flags?Io(e.index,n):n);let f=cI(n,0,r,u),v=o.__ngNextListenerFn__;for(;v;)f=cI(n,0,v,u)&&f,v=v.__ngNextListenerFn__;return a&&!1===f&&(u.preventDefault(),u.returnValue=!1),f}}function gu(e=1){return function ET(e){return(rr.lFrame.contextLView=function MT(e,n){for(;e>0;)n=n[15],e--;return n}(e,rr.lFrame.contextLView))[8]}(e)}function no(e,n=""){const t=sn(),r=Pr(),a=e+22,o=r.firstCreatePass?ru(r,a,1,n,null):r.data[a],u=t[a]=function Df(e,n){return e.createText(n)}(t[11],n);kl(r,t,u,o),la(o,!1)}function Is(e,n,t){const r=sn(),a=function au(e,n,t,r){return Hi(e,Bs(),t)?n+or(t)+r:ar}(r,e,n,t);return a!==ar&&Aa(r,Zi(),a),Is}const _u="en-US";let rD=_u;class bs{}class PD{}class AD extends bs{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tg(this);const r=vo(n);this._bootstrapComponents=Ma(r.bootstrap),this._r3Injector=cy(n,t,[{provide:bs,useValue:this},{provide:oc,useValue:this.componentFactoryResolver}],jr(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class mg extends PD{constructor(n){super(),this.moduleType=n}create(n){return new AD(this.moduleType,n)}}class CA extends bs{constructor(n,t,r){super(),this.componentFactoryResolver=new tg(this),this.instance=null;const a=new Iv([...n,{provide:bs,useValue:this},{provide:oc,useValue:this.componentFactoryResolver}],t||Al(),r,new Set(["environment"]));this.injector=a,a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function $l(e,n,t=null){return new CA(e,n,t).injector}let EA=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=mv(0,t.type),a=r.length>0?$l([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,a)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=dr({token:e,providedIn:"environment",factory:()=>new e(Kn(za))}),e})();function xD(e){e.getStandaloneInjector=n=>n.get(EA).getOrCreateStandaloneInjector(e)}function yc(e,n,t){const r=function Xi(){const e=rr.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}()+e,a=sn();return a[r]===ar?function ga(e,n,t){return e[n]=t}(a,r,t?n.call(t):n()):function fc(e,n){return e[n]}(a,r)}function vg(e){return n=>{setTimeout(e,void 0,n)}}const io=class ZA extends sa{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let a=n,o=t||(()=>null),u=r;if(n&&"object"==typeof n){const f=n;a=f.next?.bind(f),o=f.error?.bind(f),u=f.complete?.bind(f)}this.__isAsync&&(o=vg(o),a&&(a=vg(a)),u&&(u=vg(u)));const s=super.subscribe({next:a,error:o,complete:u});return n instanceof xo&&n.add(s),s}};let xa=(()=>{class e{}return e.__NG_ELEMENT_ID__=nx,e})();const ex=xa,tx=class extends ex{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(n,t){const r=this._declarationTContainer.tViews,a=Vl(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null,t||null);a[17]=this._declarationLView[this._declarationTContainer.index];const u=this._declarationLView[19];return null!==u&&(a[19]=u.createEmbeddedView(r)),Ul(r,a,n),new lc(a)}};function nx(){return function ed(e,n){return 4&e.type?new tx(n,e,Zs(e,n)):null}(bi(),sn())}let ea=(()=>{class e{}return e.__NG_ELEMENT_ID__=rx,e})();function rx(){return function zD(e,n){let t;const r=n[e.index];if(Yo(r))t=r;else{let a;if(8&e.type)a=pi(r);else{const o=n[11];a=o.createComment("");const u=Oo(e,n);_s(o,Ll(o,u),a,function ZE(e,n){return e.nextSibling(n)}(o,u),!1)}n[e.index]=t=By(r,n,a,e),Gl(n,t)}return new jD(t,e,n)}(bi(),sn())}const ix=ea,jD=class extends ix{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return Zs(this._hostTNode,this._hostLView)}get injector(){return new Gs(this._hostTNode,this._hostLView)}get parentInjector(){const n=_l(this._hostTNode,this._hostLView);if(A_(n)){const t=Us(n,this._hostLView),r=Vs(n);return new Gs(t[1].data[r+8],t)}return new Gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=HD(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let a,o;"number"==typeof r?a=r:null!=r&&(a=r.index,o=r.injector);const u=n.createEmbeddedView(t||{},o);return this.insert(u,a),u}createComponent(n,t,r,a,o){const u=n&&!function Yu(e){return"function"==typeof e}(n);let s;if(u)s=t;else{const I=t||{};s=I.index,r=I.injector,a=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}const f=u?n:new dc(Vr(n)),v=r||this.parentInjector;if(!o&&null==f.ngModule){const c=(u?v:this.parentInjector).get(za,null);c&&(o=c)}const l=f.create(v,a,void 0,o);return this.insert(l.hostView,s),l}insert(n,t){const r=n._lView,a=r[1];if(function mT(e){return Yo(e[3])}(r)){const l=this.indexOf(n);if(-1!==l)this.detach(l);else{const I=r[3],c=new jD(I,I[6],I[3]);c.detach(c.indexOf(n))}}const o=this._adjustIndex(t),u=this._lContainer;!function YE(e,n,t,r){const a=10+r,o=t.length;r>0&&(t[a-1][4]=n),r<o-10?(n[4]=t[a],U_(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const u=n[17];null!==u&&t!==u&&function JE(e,n){const t=e[9];n[16]!==n[3][3][16]&&(e[2]=!0),null===t?e[9]=[n]:t.push(n)}(u,n);const s=n[19];null!==s&&s.insertView(e),n[2]|=64}(a,r,u,o);const s=Cf(o,u),f=r[11],v=Ll(f,u[7]);return null!==v&&function HE(e,n,t,r,a,o){r[0]=a,r[6]=n,uc(e,r,t,1,a,o)}(a,u[6],f,r,v,s),n.attachToViewContainerRef(),U_(Ig(u),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=HD(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=wf(this._lContainer,t);r&&(Il(Ig(this._lContainer),t),Vv(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=wf(this._lContainer,t);return r&&null!=Il(Ig(this._lContainer),t)?new lc(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function HD(e){return e[8]}function Ig(e){return e[8]||(e[8]=[])}function nd(...e){}const rd=new ir("Application Initializer");let id=(()=>{class e{constructor(t){this.appInits=t,this.resolve=nd,this.reject=nd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,a)=>{this.resolve=r,this.reject=a})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let a=0;a<this.appInits.length;a++){const o=this.appInits[a]();if(Yl(o))t.push(o);else if(aI(o)){const u=new Promise((s,f)=>{o.subscribe({complete:s,error:f})});t.push(u)}}Promise.all(t).then(()=>{r()}).catch(a=>{this.reject(a)}),0===t.length&&r(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Kn(rd,8))},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const wc=new ir("AppId",{providedIn:"root",factory:function pb(){return`${Lg()}${Lg()}${Lg()}`}});function Lg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const mb=new ir("Platform Initializer"),_b=new ir("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vb=new ir("appBootstrapListener");let kx=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Ra=new ir("LocaleId",{providedIn:"root",factory:()=>di(Ra,Xn.Optional|Xn.SkipSelf)||function Fx(){return typeof $localize<"u"&&$localize.locale||_u}()});class Nx{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let kg=(()=>{class e{compileModuleSync(t){return new mg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Ma(vo(t).declarations).reduce((u,s)=>{const f=Vr(s);return f&&u.push(new dc(f)),u},[]);return new Nx(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Vx=(()=>Promise.resolve(0))();function Fg(e){typeof Zone>"u"?Vx.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ti{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new io(!1),this.onMicrotaskEmpty=new io(!1),this.onStable=new io(!1),this.onError=new io(!1),typeof Zone>"u")throw new Bn(908,!1);Zone.assertZonePatched();const a=this;if(a._nesting=0,a._outer=a._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const o=Zone.AsyncStackTaggingZoneSpec;a._inner=a._inner.fork(new o("Angular"))}Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&t,a.shouldCoalesceRunChangeDetection=r,a.lastRequestAnimationFrameId=-1,a.nativeRequestAnimationFrame=function Ux(){let e=Hr.requestAnimationFrame,n=Hr.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function Hx(e){const n=()=>{!function jx(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Hr,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Ng(e),e.isCheckStableRunning=!0,Og(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Ng(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,a,o,u,s)=>{try{return Db(e),t.invokeTask(a,o,u,s)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&n(),bb(e)}},onInvoke:(t,r,a,o,u,s,f)=>{try{return Db(e),t.invoke(a,o,u,s,f)}finally{e.shouldCoalesceRunChangeDetection&&n(),bb(e)}},onHasTask:(t,r,a,o)=>{t.hasTask(a,o),r===a&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Ng(e),Og(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,a,o)=>(t.handleError(a,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(a)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ti.isInAngularZone())throw new Bn(909,!1)}static assertNotInAngularZone(){if(Ti.isInAngularZone())throw new Bn(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,a){const o=this._inner,u=o.scheduleEventTask("NgZoneEvent: "+a,n,Gx,nd,nd);try{return o.runTask(u,t,r)}finally{o.cancelTask(u)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const Gx={};function Og(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ng(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Db(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function bb(e){e._nesting--,Og(e)}class zx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new io,this.onMicrotaskEmpty=new io,this.onStable=new io,this.onError=new io}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,a){return n.apply(t,r)}}const wb=new ir(""),od=new ir("");let Vg,Wg=(()=>{class e{constructor(t,r,a){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Vg||(function Kx(e){Vg=e}(a),a.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ti.assertNotInAngularZone(),Fg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Fg(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,a){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:a})}whenStable(t,r,a){if(a&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,a),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,a){return[]}}return e.\u0275fac=function(t){return new(t||e)(Kn(Ti),Kn(Bg),Kn(od))},e.\u0275prov=dr({token:e,factory:e.\u0275fac}),e})(),Bg=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Vg?.findTestabilityInTree(this,t,r)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),qa=null;const Sb=new ir("AllowMultipleToken"),Ug=new ir("PlatformDestroyListeners");class Tb{constructor(n,t){this.name=n,this.token=t}}function Eb(e,n,t=[]){const r=`Platform: ${n}`,a=new ir(r);return(o=[])=>{let u=Gg();if(!u||u.injector.get(Sb,!1)){const s=[...t,...o,{provide:a,useValue:!0}];e?e(s):function Qx(e){if(qa&&!qa.get(Sb,!1))throw new Bn(400,!1);qa=e;const n=e.get(Pb);(function Cb(e){const n=e.get(mb,null);n&&n.forEach(t=>t())})(e)}(function Mb(e=[],n){return qo.create({name:n,providers:[{provide:tf,useValue:"platform"},{provide:Ug,useValue:new Set([()=>qa=null])},...e]})}(s,r))}return function Xx(e){const n=Gg();if(!n)throw new Bn(401,!1);return n}()}}function Gg(){return qa?.get(Pb)??null}let Pb=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function xb(e,n){let t;return t="noop"===e?new zx:("zone.js"===e?void 0:e)||new Ti(n),t}(r?.ngZone,function Ab(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:Ti,useValue:a}];return a.run(()=>{const u=qo.create({providers:o,parent:this.injector,name:t.moduleType.name}),s=t.create(u),f=s.injector.get($s,null);if(!f)throw new Bn(402,!1);return a.runOutsideAngular(()=>{const v=a.onError.subscribe({next:l=>{f.handleError(l)}});s.onDestroy(()=>{sd(this._modules,s),v.unsubscribe()})}),function Rb(e,n,t){try{const r=t();return Yl(r)?r.catch(a=>{throw n.runOutsideAngular(()=>e.handleError(a)),a}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(f,a,()=>{const v=s.injector.get(id);return v.runInitializers(),v.donePromise.then(()=>(function iD(e){_o(e,"Expected localeId to be defined"),"string"==typeof e&&(rD=e.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ra,_u)||_u),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const a=Lb({},r);return function Yx(e,n,t){const r=new mg(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,a))}_moduleDoBootstrap(t){const r=t.injector.get(ad);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(a=>r.bootstrap(a));else{if(!t.instance.ngDoBootstrap)throw new Bn(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Bn(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Ug,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Kn(qo))},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function Lb(e,n){return Array.isArray(n)?n.reduce(Lb,e):{...e,...n}}let ad=(()=>{class e{constructor(t,r,a){this._zone=t,this._injector=r,this._exceptionHandler=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Ii(s=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{s.next(this._stable),s.complete()})}),u=new Ii(s=>{let f;this._zone.runOutsideAngular(()=>{f=this._zone.onStable.subscribe(()=>{Ti.assertNotInAngularZone(),Fg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,s.next(!0))})})});const v=this._zone.onUnstable.subscribe(()=>{Ti.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{s.next(!1)}))});return()=>{f.unsubscribe(),v.unsubscribe()}});this.isStable=function BS(...e){const n=Fu(e),t=function RS(e,n){return"number"==typeof oh(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?ua(r[0]):xs(t)(Di(r,n)):Da}(o,u.pipe(function VS(e={}){const{connector:n=(()=>new sa),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:a=!0}=e;return o=>{let u,s,f,v=0,l=!1,I=!1;const c=()=>{s?.unsubscribe(),s=void 0},_=()=>{c(),u=f=void 0,l=I=!1},h=()=>{const y=u;_(),y?.unsubscribe()};return Ai((y,p)=>{v++,!I&&!l&&c();const m=f=f??n();p.add(()=>{v--,0===v&&!I&&!l&&(s=ah(h,a))}),m.subscribe(p),!u&&v>0&&(u=new ku({next:T=>m.next(T),error:T=>{I=!0,c(),s=ah(_,t,T),m.error(T)},complete:()=>{l=!0,c(),s=ah(_,r),m.complete()}}),ua(y).subscribe(u))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const a=t instanceof bv;if(!this._injector.get(id).done)throw!a&&function Ls(e){const n=Vr(e)||Qi(e)||qi(e);return null!==n&&n.standalone}(t),new Bn(405,false);let u;u=a?t:this._injector.get(oc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);const s=function Jx(e){return e.isBoundToModule}(u)?void 0:this._injector.get(bs),v=u.create(qo.NULL,[],r||u.selector,s),l=v.location.nativeElement,I=v.injector.get(wb,null);return I?.registerApplication(l),v.onDestroy(()=>{this.detachView(v.hostView),sd(this.components,v),I?.unregisterApplication(l)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Bn(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;sd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(vb,[]).concat(this._bootstrapListeners).forEach(a=>a(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>sd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Bn(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(Kn(Ti),Kn(za),Kn($s))},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function sd(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let Fb=!0,jg=(()=>{class e{}return e.__NG_ELEMENT_ID__=eR,e})();function eR(e){return function tR(e,n,t){if(al(e)&&!t){const r=Io(e.index,n);return new lc(r,r)}return 47&e.type?new lc(n[16],n):null}(bi(),sn(),16==(16&e))}class Vb{constructor(){}supports(n){return hc(n)}create(n){return new sR(n)}}const aR=(e,n)=>n;class sR{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||aR}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,a=0,o=null;for(;t||r;){const u=!r||t&&t.currentIndex<Gb(r,a,o)?t:r,s=Gb(u,a,o),f=u.currentIndex;if(u===r)a--,r=r._nextRemoved;else if(t=t._next,null==u.previousIndex)a++;else{o||(o=[]);const v=s-a,l=f-a;if(v!=l){for(let c=0;c<v;c++){const _=c<o.length?o[c]:o[c]=0,h=_+c;l<=h&&h<v&&(o[c]=_+1)}o[u.previousIndex]=l-v}}s!==f&&n(u,s,f)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!hc(n))throw new Bn(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let a,o,u,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let s=0;s<this.length;s++)o=n[s],u=this._trackByFn(s,o),null!==t&&Object.is(t.trackById,u)?(r&&(t=this._verifyReinsertion(t,o,u,s)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,u,s),r=!0),t=t._next}else a=0,function AM(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[vs()]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,s=>{u=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,u)?(r&&(t=this._verifyReinsertion(t,s,u,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,u,a),r=!0),t=t._next,a++}),this.length=a;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,a){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,o,a)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,a))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,o,a)):n=this._addAfter(new uR(t,r),o,a),n}_verifyReinsertion(n,t,r,a){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?n=this._reinsertAfter(o,n._prev,a):n.currentIndex!=a&&(n.currentIndex=a,this._addToMoves(n,a)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const a=n._prevRemoved,o=n._nextRemoved;return null===a?this._removalsHead=o:a._nextRemoved=o,null===o?this._removalsTail=a:o._prevRemoved=a,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const a=null===t?this._itHead:t._next;return n._next=a,n._prev=t,null===a?this._itTail=n:a._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new Ub),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ub),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class uR{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cR{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Ub{constructor(){this.map=new Map}put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new cR,this.map.set(t,r)),r.add(n)}get(n,t){const a=this.map.get(n);return a?a.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Gb(e,n,t){const r=e.previousIndex;if(null===r)return r;let a=0;return t&&r<t.length&&(a=t[r]),r+n+a}function Hb(){return new ld([new Vb])}let ld=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(null!=r){const a=r.factories.slice();t=t.concat(a)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||Hb()),deps:[[e,new $u,new Zu]]}}find(t){const r=this.factories.find(a=>a.supports(t));if(null!=r)return r;throw new Bn(901,!1)}}return e.\u0275prov=dr({token:e,providedIn:"root",factory:Hb}),e})();const gR=Eb(null,"core",[]);let pR=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(Kn(ad))},e.\u0275mod=Va({type:e}),e.\u0275inj=wa({}),e})();function Du(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let dd=null;function Xa(){return dd}const fo=new ir("DocumentToken");let Jg=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=dr({token:e,factory:function(){return function yR(){return Kn(Kb)}()},providedIn:"platform"}),e})();const IR=new ir("Location Initialized");let Kb=(()=>{class e extends Jg{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xa().getBaseHref(this._doc)}onPopState(t){const r=Xa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Xa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,a){Yb()?this._history.pushState(t,r,a):this.location.hash=a}replaceState(t,r,a){Yb()?this._history.replaceState(t,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Kn(fo))},e.\u0275prov=dr({token:e,factory:function(){return function DR(){return new Kb(Kn(fo))}()},providedIn:"platform"}),e})();function Yb(){return!!window.history.pushState}function Qg(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function Jb(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function ka(e){return e&&"?"!==e[0]?"?"+e:e}let Ss=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=dr({token:e,factory:function(){return di(qb)},providedIn:"root"}),e})();const Qb=new ir("appBaseHref");let qb=(()=>{class e extends Ss{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??di(fo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Qg(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ka(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${r}${a}`:r}pushState(t,r,a,o){const u=this.prepareExternalUrl(a+ka(o));this._platformLocation.pushState(t,r,u)}replaceState(t,r,a,o){const u=this.prepareExternalUrl(a+ka(o));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Kn(Jg),Kn(Qb,8))},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),bR=(()=>{class e extends Ss{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Qg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,a,o){let u=this.prepareExternalUrl(a+ka(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,a,o){let u=this.prepareExternalUrl(a+ka(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Kn(Jg),Kn(Qb,8))},e.\u0275prov=dr({token:e,factory:e.\u0275fac}),e})(),qg=(()=>{class e{constructor(t){this._subject=new io,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Jb(Xb(r)),this._locationStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ka(r))}normalize(t){return e.stripTrailingSlash(function SR(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,Xb(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",a=null){this._locationStrategy.pushState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ka(r)),a)}replaceState(t,r="",a=null){this._locationStrategy.replaceState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ka(r)),a)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(a=>a(t,r))}subscribe(t,r,a){return this._subject.subscribe({next:t,error:r,complete:a})}}return e.normalizeQueryParams=ka,e.joinWithSlash=Qg,e.stripTrailingSlash=Jb,e.\u0275fac=function(t){return new(t||e)(Kn(Ss))},e.\u0275prov=dr({token:e,factory:function(){return function wR(){return new qg(Kn(Ss))}()},providedIn:"root"}),e})();function Xb(e){return e.replace(/\/index.html$/,"")}class lL{constructor(n,t,r,a){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let c0=(()=>{class e{constructor(t,r,a){this._viewContainer=t,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((a,o,u)=>{if(null==a.previousIndex)r.createEmbeddedView(this._template,new lL(a.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===o?void 0:o);else if(null!==o){const s=r.get(o);r.move(s,u),l0(s,a)}});for(let a=0,o=r.length;a<o;a++){const s=r.get(a).context;s.index=a,s.count=o,s.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{l0(r.get(a.currentIndex),a)})}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(Hn(ea),Hn(xa),Hn(ld))},e.\u0275dir=Vi({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function l0(e,n){e.context.$implicit=n.item}let ap=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new hL,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){d0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){d0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(Hn(ea),Hn(xa))},e.\u0275dir=Vi({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class hL{constructor(){this.$implicit=null,this.ngIf=null}}function d0(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${jr(n)}'.`)}let g0=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Va({type:e}),e.\u0275inj=wa({}),e})();let GL=(()=>{class e{}return e.\u0275prov=dr({token:e,providedIn:"root",factory:()=>new jL(Kn(fo),window)}),e})();class jL{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function HL(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const o=a.shadowRoot;if(o){const u=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(u)return u}a=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],a-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=m0(this.window.history)||m0(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function m0(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class fp extends class ck extends class vR{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function _R(e){dd||(dd=e)}(new fp)}onAndCancel(n,t,r){return n.addEventListener(t,r,!1),()=>{n.removeEventListener(t,r,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function lk(){return Mc=Mc||document.querySelector("base"),Mc?Mc.getAttribute("href"):null}();return null==t?null:function dk(e){bd=bd||document.createElement("a"),bd.setAttribute("href",e);const n=bd.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){Mc=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function sL(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[a,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===n)return decodeURIComponent(o)}return null}(document.cookie,n)}}let bd,Mc=null;const I0=new ir("TRANSITION_ID"),fk=[{provide:rd,useFactory:function hk(e,n,t){return()=>{t.get(id).donePromise.then(()=>{const r=Xa(),a=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<a.length;o++)r.remove(a[o])})}},deps:[I0,fo,qo],multi:!0}];let pk=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=dr({token:e,factory:e.\u0275fac}),e})();const wd=new ir("EventManagerPlugins");let Sd=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let o=0;o<a.length;o++){const u=a[o];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(Kn(wd),Kn(Ti))},e.\u0275prov=dr({token:e,factory:e.\u0275fac}),e})();class D0{constructor(n){this._doc=n}addGlobalEventListener(n,t,r){const a=Xa().getGlobalEventTarget(this._doc,n);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let b0=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=dr({token:e,factory:e.\u0275fac}),e})(),Pc=(()=>{class e extends b0{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(o=>{const u=this._doc.createElement("style");u.textContent=o,a.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(w0),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(w0))}}return e.\u0275fac=function(t){return new(t||e)(Kn(fo))},e.\u0275prov=dr({token:e,factory:e.\u0275fac}),e})();function w0(e){Xa().remove(e)}const gp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pp=/%COMP%/g;function Td(e,n,t){for(let r=0;r<n.length;r++){let a=n[r];Array.isArray(a)?Td(e,a,t):(a=a.replace(pp,e),t.push(a))}return t}function C0(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let mp=(()=>{class e{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new _p(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case ca.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new Dk(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case ca.ShadowDom:return new bk(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=Td(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Kn(Sd),Kn(Pc),Kn(wc))},e.\u0275prov=dr({token:e,factory:e.\u0275fac}),e})();class _p{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(gp[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){(M0(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(M0(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,a){if(a){t=a+":"+t;const o=gp[a];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const a=gp[r];a?n.removeAttributeNS(a,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,a){a&(ho.DashCase|ho.Important)?n.style.setProperty(t,r,a&ho.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&ho.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,C0(r)):this.eventManager.addEventListener(n,t,C0(r))}}function M0(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class Dk extends _p{constructor(n,t,r,a){super(n),this.component=r;const o=Td(a+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function vk(e){return"_ngcontent-%COMP%".replace(pp,e)}(a+"-"+r.id),this.hostAttr=function yk(e){return"_nghost-%COMP%".replace(pp,e)}(a+"-"+r.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class bk extends _p{constructor(n,t,r,a){super(n),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Td(a.id,a.styles,[]);for(let u=0;u<o.length;u++){const s=document.createElement("style");s.textContent=o[u],this.shadowRoot.appendChild(s)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let wk=(()=>{class e extends D0{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return e.\u0275fac=function(t){return new(t||e)(Kn(fo))},e.\u0275prov=dr({token:e,factory:e.\u0275fac}),e})();const P0=["alt","control","meta","shift"],Sk={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tk={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Ck=(()=>{class e extends D0{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,a){const o=e.parseEventName(r),u=e.eventCallback(o.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xa().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const o=e._normalizeKey(r.pop());let u="",s=r.indexOf("code");if(s>-1&&(r.splice(s,1),u="code."),P0.forEach(v=>{const l=r.indexOf(v);l>-1&&(r.splice(l,1),u+=v+".")}),u+=o,0!=r.length||0===o.length)return null;const f={};return f.domEventName=a,f.fullKey=u,f}static matchEventFullKeyCode(t,r){let a=Sk[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(a=t.code,o="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),P0.forEach(u=>{u!==a&&(0,Tk[u])(t)&&(o+=u+".")}),o+=a,o===r)}static eventCallback(t,r,a){return o=>{e.matchEventFullKeyCode(o,t)&&a.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(Kn(fo))},e.\u0275prov=dr({token:e,factory:e.\u0275fac}),e})();const x0=[{provide:_b,useValue:"browser"},{provide:mb,useValue:function Ek(){fp.makeCurrent()},multi:!0},{provide:fo,useFactory:function Pk(){return function DC(e){Hh=e}(document),document},deps:[]}],Ak=Eb(gR,"browser",x0),R0=new ir(""),L0=[{provide:od,useClass:class gk{addToWindow(n){Hr.getAngularTestability=(r,a=!0)=>{const o=n.findTestabilityInTree(r,a);if(null==o)throw new Error("Could not find testability for element.");return o},Hr.getAllAngularTestabilities=()=>n.getAllTestabilities(),Hr.getAllAngularRootElements=()=>n.getAllRootElements(),Hr.frameworkStabilizers||(Hr.frameworkStabilizers=[]),Hr.frameworkStabilizers.push(r=>{const a=Hr.getAllAngularTestabilities();let o=a.length,u=!1;const s=function(f){u=u||f,o--,0==o&&r(u)};a.forEach(function(f){f.whenStable(s)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?Xa().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:wb,useClass:Wg,deps:[Ti,Bg,od]},{provide:Wg,useClass:Wg,deps:[Ti,Bg,od]}],k0=[{provide:tf,useValue:"root"},{provide:$s,useFactory:function Mk(){return new $s},deps:[]},{provide:wd,useClass:wk,multi:!0,deps:[fo,Ti,_b]},{provide:wd,useClass:Ck,multi:!0,deps:[fo]},{provide:mp,useClass:mp,deps:[Sd,Pc,wc]},{provide:Sv,useExisting:mp},{provide:b0,useExisting:Pc},{provide:Pc,useClass:Pc,deps:[fo]},{provide:Sd,useClass:Sd,deps:[wd,Ti]},{provide:class zL{},useClass:pk,deps:[]},[]];let xk=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:wc,useValue:t.appId},{provide:I0,useExisting:wc},fk]}}}return e.\u0275fac=function(t){return new(t||e)(Kn(R0,12))},e.\u0275mod=Va({type:e}),e.\u0275inj=wa({providers:[...k0,...L0],imports:[g0,pR]}),e})(),F0=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return e.\u0275fac=function(t){return new(t||e)(Kn(fo))},e.\u0275prov=dr({token:e,factory:function(t){let r=null;return r=t?new t:function Lk(){return new F0(Kn(fo))}(),r},providedIn:"root"}),e})();function Yn(...e){return Di(e,Fu(e))}typeof window<"u"&&window;class ia extends sa{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const Cd=Ru(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Uk}=Array,{getPrototypeOf:Gk,prototype:jk,keys:Hk}=Object;const{isArray:Yk}=Array;function W0(...e){const n=Fu(e),t=function xS(e){return zr(oh(e))?e.pop():void 0}(e),{args:r,keys:a}=function zk(e){if(1===e.length){const n=e[0];if(Uk(n))return{args:n,keys:null};if(function Kk(e){return e&&"object"==typeof e&&Gk(e)===jk}(n)){const t=Hk(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}(e);if(0===r.length)return Di([],n);const o=new Ii(function Xk(e,n,t=us){return r=>{B0(n,()=>{const{length:a}=e,o=new Array(a);let u=a,s=a;for(let f=0;f<a;f++)B0(n,()=>{const v=Di(e[f],n);let l=!1;v.subscribe(xi(r,I=>{o[f]=I,l||(l=!0,s--),s||r.next(t(o.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,n,a?u=>function qk(e,n){return e.reduce((t,r,a)=>(t[r]=n[a],t),{})}(a,u):us));return t?o.pipe(function Qk(e){return Ar(n=>function Jk(e,n){return Yk(n)?e(...n):e(n)}(e,n))}(t)):o}function B0(e,n,t){e?Ia(t,e,n):n()}function Ip(...e){return function Zk(){return xs(1)}()(Di(e,Fu(e)))}function V0(e){return new Ii(n=>{ua(e()).subscribe(n)})}function Ac(e,n){const t=zr(e)?e:()=>e,r=a=>a.error(t());return new Ii(n?a=>n.schedule(r,0,a):r)}function Dp(){return Ai((e,n)=>{let t=null;e._refCount++;const r=xi(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const a=e._connection,o=t;t=null,a&&(!o||a===o)&&a.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class U0 extends Ii{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Fm(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new xo;const t=this.getSubject();n.add(this.source.subscribe(xi(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=xo.EMPTY)}return n}refCount(){return Dp()(this)}}function _a(e,n){return Ai((t,r)=>{let a=null,o=0,u=!1;const s=()=>u&&!a&&r.complete();t.subscribe(xi(r,f=>{a?.unsubscribe();let v=0;const l=o++;ua(e(f,l)).subscribe(a=xi(r,I=>r.next(n?n(f,I,l,v++):I),()=>{a=null,s()}))},()=>{u=!0,s()}))})}function xc(e){return e<=0?()=>Da:Ai((n,t)=>{let r=0;n.subscribe(xi(t,a=>{++r<=e&&(t.next(a),e<=r&&t.complete())}))})}function $a(e,n){return Ai((t,r)=>{let a=0;t.subscribe(xi(r,o=>e.call(n,o,a++)&&r.next(o)))})}function Ed(e){return Ai((n,t)=>{let r=!1;n.subscribe(xi(t,a=>{r=!0,t.next(a)},()=>{r||t.next(e),t.complete()}))})}function G0(e=eF){return Ai((n,t)=>{let r=!1;n.subscribe(xi(t,a=>{r=!0,t.next(a)},()=>r?t.complete():t.error(e())))})}function eF(){return new Cd}function es(e,n){const t=arguments.length>=2;return r=>r.pipe(e?$a((a,o)=>e(a,o,r)):us,xc(1),t?Ed(n):G0(()=>new Cd))}function Ts(e,n){return zr(n)?Oi(e,n,1):Oi(e,1)}function Yi(e,n,t){const r=zr(e)||n||t?{next:e,error:n,complete:t}:e;return r?Ai((a,o)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let s=!0;a.subscribe(xi(o,f=>{var v;null===(v=r.next)||void 0===v||v.call(r,f),o.next(f)},()=>{var f;s=!1,null===(f=r.complete)||void 0===f||f.call(r),o.complete()},f=>{var v;s=!1,null===(v=r.error)||void 0===v||v.call(r,f),o.error(f)},()=>{var f,v;s&&(null===(f=r.unsubscribe)||void 0===f||f.call(r)),null===(v=r.finalize)||void 0===v||v.call(r)}))}):us}function ts(e){return Ai((n,t)=>{let o,r=null,a=!1;r=n.subscribe(xi(t,void 0,void 0,u=>{o=ua(e(u,ts(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):a=!0})),a&&(r.unsubscribe(),r=null,o.subscribe(t))})}function tF(e,n,t,r,a){return(o,u)=>{let s=t,f=n,v=0;o.subscribe(xi(u,l=>{const I=v++;f=s?e(f,l,I):(s=!0,l),r&&u.next(f)},a&&(()=>{s&&u.next(f),u.complete()})))}}function j0(e,n){return Ai(tF(e,n,arguments.length>=2,!0))}function bp(e){return e<=0?()=>Da:Ai((n,t)=>{let r=[];n.subscribe(xi(t,a=>{r.push(a),e<r.length&&r.shift()},()=>{for(const a of r)t.next(a);t.complete()},void 0,()=>{r=null}))})}function H0(e,n){const t=arguments.length>=2;return r=>r.pipe(e?$a((a,o)=>e(a,o,r)):us,bp(1),t?Ed(n):G0(()=>new Cd))}function wp(e){return Ai((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}const gr="primary",Rc=Symbol("RouteTitle");class iF{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bu(e){return new iF(e)}function oF(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const a={};for(let o=0;o<r.length;o++){const u=r[o],s=e[o];if(u.startsWith(":"))a[u.substring(1)]=s;else if(u!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:a}}function va(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let a;for(let o=0;o<t.length;o++)if(a=t[o],!z0(e[a],n[a]))return!1;return!0}function z0(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((a,o)=>r[o]===a)}return e===n}function K0(e){return Array.prototype.concat.apply([],e)}function Y0(e){return e.length>0?e[e.length-1]:null}function Ni(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function ns(e){return aI(e)?e:Yl(e)?Di(Promise.resolve(e)):Yn(e)}const uF={exact:function q0(e,n,t){if(!Es(e.segments,n.segments)||!Md(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!q0(e.children[r],n.children[r],t))return!1;return!0},subset:X0},J0={exact:function cF(e,n){return va(e,n)},subset:function lF(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>z0(e[t],n[t]))},ignored:()=>!0};function Q0(e,n,t){return uF[t.paths](e.root,n.root,t.matrixParams)&&J0[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function X0(e,n,t){return Z0(e,n,n.segments,t)}function Z0(e,n,t,r){if(e.segments.length>t.length){const a=e.segments.slice(0,t.length);return!(!Es(a,t)||n.hasChildren()||!Md(a,t,r))}if(e.segments.length===t.length){if(!Es(e.segments,t)||!Md(e.segments,t,r))return!1;for(const a in n.children)if(!e.children[a]||!X0(e.children[a],n.children[a],r))return!1;return!0}{const a=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!!(Es(e.segments,a)&&Md(e.segments,a,r)&&e.children[gr])&&Z0(e.children[gr],n,o,r)}}function Md(e,n,t){return n.every((r,a)=>J0[t](e[a].parameters,r.parameters))}class Cs{constructor(n,t,r){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bu(this.queryParams)),this._queryParamMap}toString(){return fF.serialize(this)}}class _r{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Ni(t,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pd(this)}}class Lc{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bu(this.parameters)),this._parameterMap}toString(){return nw(this)}}function Es(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let $0=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=dr({token:e,factory:function(){return new Tp},providedIn:"root"}),e})();class Tp{parse(n){const t=new bF(n);return new Cs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${kc(n.root,!0)}`,r=function mF(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(a=>`${Ad(t)}=${Ad(a)}`).join("&"):`${Ad(t)}=${Ad(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function gF(e){return encodeURI(e)}(n.fragment)}`:""}`}}const fF=new Tp;function Pd(e){return e.segments.map(n=>nw(n)).join("/")}function kc(e,n){if(!e.hasChildren())return Pd(e);if(n){const t=e.children[gr]?kc(e.children[gr],!1):"",r=[];return Ni(e.children,(a,o)=>{o!==gr&&r.push(`${o}:${kc(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function hF(e,n){let t=[];return Ni(e.children,(r,a)=>{a===gr&&(t=t.concat(n(r,a)))}),Ni(e.children,(r,a)=>{a!==gr&&(t=t.concat(n(r,a)))}),t}(e,(r,a)=>a===gr?[kc(e.children[gr],!1)]:[`${a}:${kc(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[gr]?`${Pd(e)}/${t[0]}`:`${Pd(e)}/(${t.join("//")})`}}function ew(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ad(e){return ew(e).replace(/%3B/gi,";")}function Cp(e){return ew(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xd(e){return decodeURIComponent(e)}function tw(e){return xd(e.replace(/\+/g,"%20"))}function nw(e){return`${Cp(e.path)}${function pF(e){return Object.keys(e).map(n=>`;${Cp(n)}=${Cp(e[n])}`).join("")}(e.parameters)}`}const _F=/^[^\/()?;=#]+/;function Rd(e){const n=e.match(_F);return n?n[0]:""}const vF=/^[^=?&#]+/,IF=/^[^&#]+/;class bF{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _r([],{}):new _r([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[gr]=new _r(n,t)),r}parseSegment(){const n=Rd(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Bn(4009,!1);return this.capture(n),new Lc(xd(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=Rd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=Rd(this.remaining);a&&(r=a,this.capture(r))}n[xd(t)]=xd(r)}parseQueryParam(n){const t=function yF(e){const n=e.match(vF);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function DF(e){const n=e.match(IF);return n?n[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const a=tw(t),o=tw(r);if(n.hasOwnProperty(a)){let u=n[a];Array.isArray(u)||(u=[u],n[a]=u),u.push(o)}else n[a]=o}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Rd(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Bn(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=gr);const u=this.parseChildren();t[o]=1===Object.keys(u).length?u[gr]:new _r([],u),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Bn(4011,!1)}}function Ep(e){return e.segments.length>0?new _r([],{[gr]:e}):e}function Ld(e){const n={};for(const r of Object.keys(e.children)){const o=Ld(e.children[r]);(o.segments.length>0||o.hasChildren())&&(n[r]=o)}return function wF(e){if(1===e.numberOfChildren&&e.children[gr]){const n=e.children[gr];return new _r(e.segments.concat(n.segments),n.children)}return e}(new _r(e.segments,n))}function Ms(e){return e instanceof Cs}function CF(e,n,t,r,a){if(0===t.length)return wu(n.root,n.root,n.root,r,a);const o=function ow(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new iw(!0,0,e);let n=0,t=!1;const r=e.reduce((a,o,u)=>{if("object"==typeof o&&null!=o){if(o.outlets){const s={};return Ni(o.outlets,(f,v)=>{s[v]="string"==typeof f?f.split("/"):f}),[...a,{outlets:s}]}if(o.segmentPath)return[...a,o.segmentPath]}return"string"!=typeof o?[...a,o]:0===u?(o.split("/").forEach((s,f)=>{0==f&&"."===s||(0==f&&""===s?t=!0:".."===s?n++:""!=s&&a.push(s))}),a):[...a,o]},[]);return new iw(t,n,r)}(t);return o.toRoot()?wu(n.root,n.root,new _r([],{}),r,a):function u(f){const v=function MF(e,n,t,r){if(e.isAbsolute)return new Su(n.root,!0,0);if(-1===r)return new Su(t,t===n.root,0);return function aw(e,n,t){let r=e,a=n,o=t;for(;o>a;){if(o-=a,r=r.parent,!r)throw new Bn(4005,!1);a=r.segments.length}return new Su(r,!1,a-o)}(t,r+(Fc(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,n,e.snapshot?._urlSegment,f),l=v.processChildren?Nc(v.segmentGroup,v.index,o.commands):Pp(v.segmentGroup,v.index,o.commands);return wu(n.root,v.segmentGroup,l,r,a)}(e.snapshot?._lastPathIndex)}function Fc(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Oc(e){return"object"==typeof e&&null!=e&&e.outlets}function wu(e,n,t,r,a){let u,o={};r&&Ni(r,(f,v)=>{o[v]=Array.isArray(f)?f.map(l=>`${l}`):`${f}`}),u=e===n?t:rw(e,n,t);const s=Ep(Ld(u));return new Cs(s,o,a)}function rw(e,n,t){const r={};return Ni(e.children,(a,o)=>{r[o]=a===n?t:rw(a,n,t)}),new _r(e.segments,r)}class iw{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&Fc(r[0]))throw new Bn(4003,!1);const a=r.find(Oc);if(a&&a!==Y0(r))throw new Bn(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Su{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function Pp(e,n,t){if(e||(e=new _r([],{})),0===e.segments.length&&e.hasChildren())return Nc(e,n,t);const r=function AF(e,n,t){let r=0,a=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;a<e.segments.length;){if(r>=t.length)return o;const u=e.segments[a],s=t[r];if(Oc(s))break;const f=`${s}`,v=r<t.length-1?t[r+1]:null;if(a>0&&void 0===f)break;if(f&&v&&"object"==typeof v&&void 0===v.outlets){if(!uw(f,v,u))return o;r+=2}else{if(!uw(f,{},u))return o;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(e,n,t),a=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new _r(e.segments.slice(0,r.pathIndex),{});return o.children[gr]=new _r(e.segments.slice(r.pathIndex),e.children),Nc(o,0,a)}return r.match&&0===a.length?new _r(e.segments,{}):r.match&&!e.hasChildren()?Ap(e,n,t):r.match?Nc(e,0,a):Ap(e,n,t)}function Nc(e,n,t){if(0===t.length)return new _r(e.segments,{});{const r=function PF(e){return Oc(e[0])?e[0].outlets:{[gr]:e}}(t),a={};return Ni(r,(o,u)=>{"string"==typeof o&&(o=[o]),null!==o&&(a[u]=Pp(e.children[u],n,o))}),Ni(e.children,(o,u)=>{void 0===r[u]&&(a[u]=o)}),new _r(e.segments,a)}}function Ap(e,n,t){const r=e.segments.slice(0,n);let a=0;for(;a<t.length;){const o=t[a];if(Oc(o)){const f=xF(o.outlets);return new _r(r,f)}if(0===a&&Fc(t[0])){r.push(new Lc(e.segments[n].path,sw(t[0]))),a++;continue}const u=Oc(o)?o.outlets[gr]:`${o}`,s=a<t.length-1?t[a+1]:null;u&&s&&Fc(s)?(r.push(new Lc(u,sw(s))),a+=2):(r.push(new Lc(u,{})),a++)}return new _r(r,{})}function xF(e){const n={};return Ni(e,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[r]=Ap(new _r([],{}),0,t))}),n}function sw(e){const n={};return Ni(e,(t,r)=>n[r]=`${t}`),n}function uw(e,n,t){return e==t.path&&va(n,t.parameters)}class Oa{constructor(n,t){this.id=n,this.url=t}}class xp extends Oa{constructor(n,t,r="imperative",a=null){super(n,t),this.type=0,this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ps extends Oa{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class kd extends Oa{constructor(n,t,r,a){super(n,t),this.reason=r,this.code=a,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cw extends Oa{constructor(n,t,r,a){super(n,t),this.error=r,this.target=a,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class RF extends Oa{constructor(n,t,r,a){super(n,t),this.urlAfterRedirects=r,this.state=a,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class LF extends Oa{constructor(n,t,r,a){super(n,t),this.urlAfterRedirects=r,this.state=a,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kF extends Oa{constructor(n,t,r,a,o){super(n,t),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class FF extends Oa{constructor(n,t,r,a){super(n,t),this.urlAfterRedirects=r,this.state=a,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OF extends Oa{constructor(n,t,r,a){super(n,t),this.urlAfterRedirects=r,this.state=a,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NF{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class WF{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class BF{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VF{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UF{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GF{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lw{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class dw{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=Rp(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=Rp(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=Lp(n,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==n)}pathFromRoot(n){return Lp(n,this._root).map(t=>t.value)}}function Rp(e,n){if(e===n.value)return n;for(const t of n.children){const r=Rp(e,t);if(r)return r}return null}function Lp(e,n){if(e===n.value)return[n];for(const t of n.children){const r=Lp(e,t);if(r.length)return r.unshift(n),r}return[]}class Na{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function Tu(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class hw extends dw{constructor(n,t){super(n),this.snapshot=t,kp(this,n)}toString(){return this.snapshot.toString()}}function fw(e,n){const t=function HF(e,n){const u=new Fd([],{},{},"",{},gr,n,null,e.root,-1,{});return new pw("",new Na(u,[]))}(e,n),r=new ia([new Lc("",{})]),a=new ia({}),o=new ia({}),u=new ia({}),s=new ia(""),f=new As(r,a,u,s,o,gr,n,t.root);return f.snapshot=t.root,new hw(new Na(f,[]),t)}class As{constructor(n,t,r,a,o,u,s,f){this.url=n,this.params=t,this.queryParams=r,this.fragment=a,this.data=o,this.outlet=u,this.component=s,this.title=this.data?.pipe(Ar(v=>v[Rc]))??Yn(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ar(n=>bu(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ar(n=>bu(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gw(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const a=t[r],o=t[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(o.component)break;r--}}return function zF(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Fd{constructor(n,t,r,a,o,u,s,f,v,l,I,c){this.url=n,this.params=t,this.queryParams=r,this.fragment=a,this.data=o,this.outlet=u,this.component=s,this.title=this.data?.[Rc],this.routeConfig=f,this._urlSegment=v,this._lastPathIndex=l,this._correctedLastPathIndex=c??l,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pw extends dw{constructor(n,t){super(t),this.url=n,kp(this,t)}toString(){return mw(this._root)}}function kp(e,n){n.value._routerState=e,n.children.forEach(t=>kp(e,t))}function mw(e){const n=e.children.length>0?` { ${e.children.map(mw).join(", ")} } `:"";return`${e.value}${n}`}function Fp(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,va(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),va(n.params,t.params)||e.params.next(t.params),function aF(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!va(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),va(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Op(e,n){const t=va(e.params,n.params)&&function dF(e,n){return Es(e,n)&&e.every((t,r)=>va(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||Op(e.parent,n.parent))}function Wc(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const a=function YF(e,n,t){return n.children.map(r=>{for(const a of t.children)if(e.shouldReuseRoute(r.value,a.value.snapshot))return Wc(e,r,a);return Wc(e,r)})}(e,n,t);return new Na(r,a)}{if(e.shouldAttach(n.value)){const o=e.retrieve(n.value);if(null!==o){const u=o.route;return u.value._futureSnapshot=n.value,u.children=n.children.map(s=>Wc(e,s)),u}}const r=function JF(e){return new As(new ia(e.url),new ia(e.params),new ia(e.queryParams),new ia(e.fragment),new ia(e.data),e.outlet,e.component,e)}(n.value),a=n.children.map(o=>Wc(e,o));return new Na(r,a)}}const Np="ngNavigationCancelingError";function _w(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=Ms(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,a=vw(!1,0,n);return a.url=t,a.navigationBehaviorOptions=r,a}function vw(e,n,t){const r=new Error("NavigationCancelingError: "+(e||""));return r[Np]=!0,r.cancellationCode=n,t&&(r.url=t),r}function yw(e){return Iw(e)&&Ms(e.url)}function Iw(e){return e&&e[Np]}class QF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Bc,this.attachRef=null}}let Bc=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const a=this.getOrCreateContext(t);a.outlet=r,this.contexts.set(t,a)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new QF,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Od=!1;let Wp=(()=>{class e{constructor(t,r,a,o,u){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new io,this.deactivateEvents=new io,this.attachEvents=new io,this.detachEvents=new io,this.name=a||gr,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Bn(4012,Od);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Bn(4012,Od);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Bn(4012,Od);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Bn(4013,Od);this._activatedRoute=t;const a=this.location,u=t._futureSnapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,f=new qF(t,s,a.injector);if(r&&function XF(e){return!!e.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(u);this.activated=a.createComponent(v,a.length,f)}else this.activated=a.createComponent(u,{index:a.length,injector:f,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(Hn(Bc),Hn(ea),function zu(e){return function jT(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let a=0;for(;a<r;){const o=t[a];if(E_(o))break;if(0===o)a+=2;else if("number"==typeof o)for(a++;a<r&&"string"==typeof t[a];)a++;else{if(o===n)return t[a+1];a+=2}}}return null}(bi(),e)}("name"),Hn(jg),Hn(za))},e.\u0275dir=Vi({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),e})();class qF{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===As?this.route:n===Bc?this.childContexts:this.parent.get(n,t)}}let Bp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Lo({type:e,selectors:[["ng-component"]],standalone:!0,features:[xD],decls:1,vars:0,template:function(t,r){1&t&&to(0,"router-outlet")},dependencies:[Wp],encapsulation:2}),e})();function Dw(e,n){return e.providers&&!e._injector&&(e._injector=$l(e.providers,n,`Route: ${e.path}`)),e._injector??n}function Up(e){const n=e.children&&e.children.map(Up),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==gr&&(t.component=Bp),t}function Uo(e){return e.outlet||gr}function bw(e,n){const t=e.filter(r=>Uo(r)===n);return t.push(...e.filter(r=>Uo(r)!==n)),t}function Vc(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class nO{constructor(n,t,r,a){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=a}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),Fp(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const a=Tu(t);n.children.forEach(o=>{const u=o.value.outlet;this.deactivateRoutes(o,a[u],r),delete a[u]}),Ni(a,(o,u)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){const a=n.value,o=t?t.value:null;if(a===o)if(a.component){const u=r.getContext(a.outlet);u&&this.deactivateChildRoutes(n,t,u.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),a=r&&n.value.component?r.children:t,o=Tu(n);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],a);if(r&&r.outlet){const u=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:u,route:n,contexts:s})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),a=r&&n.value.component?r.children:t,o=Tu(n);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,t,r){const a=Tu(t);n.children.forEach(o=>{this.activateRoutes(o,a[o.value.outlet],r),this.forwardEvent(new GF(o.value.snapshot))}),n.children.length&&this.forwardEvent(new VF(n.value.snapshot))}activateRoutes(n,t,r){const a=n.value,o=t?t.value:null;if(Fp(a),a===o)if(a.component){const u=r.getOrCreateContext(a.outlet);this.activateChildRoutes(n,t,u.children)}else this.activateChildRoutes(n,t,r);else if(a.component){const u=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const s=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),u.children.onOutletReAttached(s.contexts),u.attachRef=s.componentRef,u.route=s.route.value,u.outlet&&u.outlet.attach(s.componentRef,s.route.value),Fp(s.route.value),this.activateChildRoutes(n,null,u.children)}else{const s=Vc(a.snapshot),f=s?.get(oc)??null;u.attachRef=null,u.route=a,u.resolver=f,u.injector=s,u.outlet&&u.outlet.activateWith(a,u.injector),this.activateChildRoutes(n,null,u.children)}}else this.activateChildRoutes(n,null,r)}}class ww{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Nd{constructor(n,t){this.component=n,this.route=t}}function rO(e,n,t){const r=e._root;return Uc(r,n?n._root:null,t,[r.value])}function Cu(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function YS(e){return null!==el(e)}(e)?n.get(e):e:r}function Uc(e,n,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const o=Tu(n);return e.children.forEach(u=>{(function oO(e,n,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,u=n?n.value:null,s=t?t.getContext(e.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){const f=function aO(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Es(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Es(e.url,n.url)||!va(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Op(e,n)||!va(e.queryParams,n.queryParams);default:return!Op(e,n)}}(u,o,o.routeConfig.runGuardsAndResolvers);f?a.canActivateChecks.push(new ww(r)):(o.data=u.data,o._resolvedData=u._resolvedData),Uc(e,n,o.component?s?s.children:null:t,r,a),f&&s&&s.outlet&&s.outlet.isActivated&&a.canDeactivateChecks.push(new Nd(s.outlet.component,u))}else u&&Gc(n,s,a),a.canActivateChecks.push(new ww(r)),Uc(e,null,o.component?s?s.children:null:t,r,a)})(u,o[u.value.outlet],t,r.concat([u.value]),a),delete o[u.value.outlet]}),Ni(o,(u,s)=>Gc(u,t.getContext(s),a)),a}function Gc(e,n,t){const r=Tu(e),a=e.value;Ni(r,(o,u)=>{Gc(o,a.component?n?n.children.getContext(u):null:n,t)}),t.canDeactivateChecks.push(new Nd(a.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,a))}function jc(e){return"function"==typeof e}function Gp(e){return e instanceof Cd||"EmptyError"===e?.name}const Wd=Symbol("INITIAL_VALUE");function Eu(){return _a(e=>W0(e.map(n=>n.pipe(xc(1),function $k(...e){const n=Fu(e);return Ai((t,r)=>{(n?Ip(e,t,n):Ip(e,t)).subscribe(r)})}(Wd)))).pipe(Ar(n=>{for(const t of n)if(!0!==t){if(t===Wd)return Wd;if(!1===t||t instanceof Cs)return t}return!0}),$a(n=>n!==Wd),xc(1)))}function Sw(e){return function dS(...e){return Rm(e)}(Yi(n=>{if(Ms(n))throw _w(0,n)}),Ar(n=>!0===n))}const jp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tw(e,n,t,r,a){const o=Hp(e,n,t);return o.matched?function wO(e,n,t,r){const a=n.canMatch;return a&&0!==a.length?Yn(a.map(u=>{const s=Cu(u,e);return ns(function hO(e){return e&&jc(e.canMatch)}(s)?s.canMatch(n,t):e.runInContext(()=>s(n,t)))})).pipe(Eu(),Sw()):Yn(!0)}(r=Dw(n,r),n,t).pipe(Ar(u=>!0===u?o:{...jp})):Yn(o)}function Hp(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...jp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(n.matcher||oF)(t,e,n);if(!a)return{...jp};const o={};Ni(a.posParams,(s,f)=>{o[f]=s.path});const u=a.consumed.length>0?{...o,...a.consumed[a.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:u,positionalParamSegments:a.posParams??{}}}function Bd(e,n,t,r,a="corrected"){if(t.length>0&&function CO(e,n,t){return t.some(r=>Vd(e,n,r)&&Uo(r)!==gr)}(e,t,r)){const u=new _r(n,function TO(e,n,t,r){const a={};a[gr]=r,r._sourceSegment=e,r._segmentIndexShift=n.length;for(const o of t)if(""===o.path&&Uo(o)!==gr){const u=new _r([],{});u._sourceSegment=e,u._segmentIndexShift=n.length,a[Uo(o)]=u}return a}(e,n,r,new _r(t,e.children)));return u._sourceSegment=e,u._segmentIndexShift=n.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function EO(e,n,t){return t.some(r=>Vd(e,n,r))}(e,t,r)){const u=new _r(e.segments,function SO(e,n,t,r,a,o){const u={};for(const s of r)if(Vd(e,t,s)&&!a[Uo(s)]){const f=new _r([],{});f._sourceSegment=e,f._segmentIndexShift="legacy"===o?e.segments.length:n.length,u[Uo(s)]=f}return{...a,...u}}(e,n,t,r,e.children,a));return u._sourceSegment=e,u._segmentIndexShift=n.length,{segmentGroup:u,slicedSegments:t}}const o=new _r(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:t}}function Vd(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function Cw(e,n,t,r){return!!(Uo(e)===r||r!==gr&&Vd(n,t,e))&&("**"===e.path||Hp(n,e,t).matched)}function Ew(e,n,t){return 0===n.length&&!e.children[t]}const Ud=!1;class Gd{constructor(n){this.segmentGroup=n||null}}class Mw{constructor(n){this.urlTree=n}}function Hc(e){return Ac(new Gd(e))}function Pw(e){return Ac(new Mw(e))}class xO{constructor(n,t,r,a,o){this.injector=n,this.configLoader=t,this.urlSerializer=r,this.urlTree=a,this.config=o,this.allowRedirects=!0}apply(){const n=Bd(this.urlTree.root,[],[],this.config).segmentGroup,t=new _r(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,t,gr).pipe(Ar(o=>this.createUrlTree(Ld(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ts(o=>{if(o instanceof Mw)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Gd?this.noMatchError(o):o}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,gr).pipe(Ar(a=>this.createUrlTree(Ld(a),n.queryParams,n.fragment))).pipe(ts(a=>{throw a instanceof Gd?this.noMatchError(a):a}))}noMatchError(n){return new Bn(4002,Ud)}createUrlTree(n,t,r){const a=Ep(n);return new Cs(a,t,r)}expandSegmentGroup(n,t,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,t,r).pipe(Ar(o=>new _r([],o))):this.expandSegment(n,r,t,r.segments,a,!0)}expandChildren(n,t,r){const a=[];for(const o of Object.keys(r.children))"primary"===o?a.unshift(o):a.push(o);return Di(a).pipe(Ts(o=>{const u=r.children[o],s=bw(t,o);return this.expandSegmentGroup(n,s,u,o).pipe(Ar(f=>({segment:f,outlet:o})))}),j0((o,u)=>(o[u.outlet]=u.segment,o),{}),H0())}expandSegment(n,t,r,a,o,u){return Di(r).pipe(Ts(s=>this.expandSegmentAgainstRoute(n,t,r,s,a,o,u).pipe(ts(v=>{if(v instanceof Gd)return Yn(null);throw v}))),es(s=>!!s),ts((s,f)=>{if(Gp(s))return Ew(t,a,o)?Yn(new _r([],{})):Hc(t);throw s}))}expandSegmentAgainstRoute(n,t,r,a,o,u,s){return Cw(a,t,o,u)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(n,t,a,o,u):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,r,a,o,u):Hc(t):Hc(t)}expandSegmentAgainstRouteUsingRedirect(n,t,r,a,o,u){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,a,u):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,a,o,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,a){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Pw(o):this.lineralizeSegments(r,o).pipe(Oi(u=>{const s=new _r(u,{});return this.expandSegment(n,s,t,u,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,a,o,u){const{matched:s,consumedSegments:f,remainingSegments:v,positionalParamSegments:l}=Hp(t,a,o);if(!s)return Hc(t);const I=this.applyRedirectCommands(f,a.redirectTo,l);return a.redirectTo.startsWith("/")?Pw(I):this.lineralizeSegments(a,I).pipe(Oi(c=>this.expandSegment(n,t,r,c.concat(v),u,!1)))}matchSegmentAgainstRoute(n,t,r,a,o){return"**"===r.path?(n=Dw(r,n),r.loadChildren?(r._loadedRoutes?Yn({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(n,r)).pipe(Ar(s=>(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,new _r(a,{})))):Yn(new _r(a,{}))):Tw(t,r,a,n).pipe(_a(({matched:u,consumedSegments:s,remainingSegments:f})=>u?this.getChildConfig(n=r._injector??n,r,a).pipe(Oi(l=>{const I=l.injector??n,c=l.routes,{segmentGroup:_,slicedSegments:h}=Bd(t,s,f,c),y=new _r(_.segments,_.children);if(0===h.length&&y.hasChildren())return this.expandChildren(I,c,y).pipe(Ar(C=>new _r(s,C)));if(0===c.length&&0===h.length)return Yn(new _r(s,{}));const p=Uo(r)===o;return this.expandSegment(I,y,c,h,p?gr:o,!0).pipe(Ar(T=>new _r(s.concat(T.segments),T.children)))})):Hc(t)))}getChildConfig(n,t,r){return t.children?Yn({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?Yn({routes:t._loadedRoutes,injector:t._loadedInjector}):function bO(e,n,t,r){const a=n.canLoad;return void 0===a||0===a.length?Yn(!0):Yn(a.map(u=>{const s=Cu(u,e);return ns(function uO(e){return e&&jc(e.canLoad)}(s)?s.canLoad(n,t):e.runInContext(()=>s(n,t)))})).pipe(Eu(),Sw())}(n,t,r).pipe(Oi(a=>a?this.configLoader.loadChildren(n,t).pipe(Yi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function PO(e){return Ac(vw(Ud,3))}())):Yn({routes:[],injector:n})}lineralizeSegments(n,t){let r=[],a=t.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return Yn(r);if(a.numberOfChildren>1||!a.children[gr])return Ac(new Bn(4e3,Ud));a=a.children[gr]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreateUrlTree(n,t,r,a){const o=this.createSegmentGroup(n,t.root,r,a);return new Cs(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return Ni(n,(a,o)=>{if("string"==typeof a&&a.startsWith(":")){const s=a.substring(1);r[o]=t[s]}else r[o]=a}),r}createSegmentGroup(n,t,r,a){const o=this.createSegments(n,t.segments,r,a);let u={};return Ni(t.children,(s,f)=>{u[f]=this.createSegmentGroup(n,s,r,a)}),new _r(o,u)}createSegments(n,t,r,a){return t.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,a):this.findOrReturn(o,r))}findPosParam(n,t,r){const a=r[t.path.substring(1)];if(!a)throw new Bn(4001,Ud);return a}findOrReturn(n,t){let r=0;for(const a of t){if(a.path===n.path)return t.splice(r),a;r++}return n}}class LO{}class OO{constructor(n,t,r,a,o,u,s,f){this.injector=n,this.rootComponentType=t,this.config=r,this.urlTree=a,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=s,this.urlSerializer=f}recognize(){const n=Bd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,gr).pipe(Ar(t=>{if(null===t)return null;const r=new Fd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},gr,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Na(r,t),o=new pw(this.url,a);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(n){const t=n.value,r=gw(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(n,t,r,a){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r):this.processSegment(n,t,r,r.segments,a)}processChildren(n,t,r){return Di(Object.keys(r.children)).pipe(Ts(a=>{const o=r.children[a],u=bw(t,a);return this.processSegmentGroup(n,u,o,a)}),j0((a,o)=>a&&o?(a.push(...o),a):null),function nF(e,n=!1){return Ai((t,r)=>{let a=0;t.subscribe(xi(r,o=>{const u=e(o,a++);(u||n)&&r.next(o),!u&&r.complete()}))})}(a=>null!==a),Ed(null),H0(),Ar(a=>{if(null===a)return null;const o=Aw(a);return function NO(e){e.sort((n,t)=>n.value.outlet===gr?-1:t.value.outlet===gr?1:n.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(n,t,r,a,o){return Di(t).pipe(Ts(u=>this.processSegmentAgainstRoute(u._injector??n,u,r,a,o)),es(u=>!!u),ts(u=>{if(Gp(u))return Ew(r,a,o)?Yn([]):Yn(null);throw u}))}processSegmentAgainstRoute(n,t,r,a,o){if(t.redirectTo||!Cw(t,r,a,o))return Yn(null);let u;if("**"===t.path){const s=a.length>0?Y0(a).parameters:{},f=Rw(r)+a.length;u=Yn({snapshot:new Fd(a,s,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kw(t),Uo(t),t.component??t._loadedComponent??null,t,xw(r),f,Fw(t),f),consumedSegments:[],remainingSegments:[]})}else u=Tw(r,t,a,n).pipe(Ar(({matched:s,consumedSegments:f,remainingSegments:v,parameters:l})=>{if(!s)return null;const I=Rw(r)+f.length;return{snapshot:new Fd(f,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kw(t),Uo(t),t.component??t._loadedComponent??null,t,xw(r),I,Fw(t),I),consumedSegments:f,remainingSegments:v}}));return u.pipe(_a(s=>{if(null===s)return Yn(null);const{snapshot:f,consumedSegments:v,remainingSegments:l}=s;n=t._injector??n;const I=t._loadedInjector??n,c=function WO(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:_,slicedSegments:h}=Bd(r,v,l,c.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution);if(0===h.length&&_.hasChildren())return this.processChildren(I,c,_).pipe(Ar(p=>null===p?null:[new Na(f,p)]));if(0===c.length&&0===h.length)return Yn([new Na(f,[])]);const y=Uo(t)===o;return this.processSegment(I,c,_,h,y?gr:o).pipe(Ar(p=>null===p?null:[new Na(f,p)]))}))}}function BO(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function Aw(e){const n=[],t=new Set;for(const r of e){if(!BO(r)){n.push(r);continue}const a=n.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==a?(a.children.push(...r.children),t.add(a)):n.push(r)}for(const r of t){const a=Aw(r.children);n.push(new Na(r.value,a))}return n.filter(r=>!t.has(r))}function xw(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function Rw(e){let n=e,t=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift??0;return t-1}function kw(e){return e.data||{}}function Fw(e){return e.resolve||{}}function Ow(e){return"string"==typeof e.title||null===e.title}function zp(e){return _a(n=>{const t=e(n);return t?Di(t).pipe(Ar(()=>n)):Yn(n)})}let Nw=(()=>{class e{buildTitle(t){let r,a=t.root;for(;void 0!==a;)r=this.getResolvedTitleForRoute(a)??r,a=a.children.find(o=>o.outlet===gr);return r}getResolvedTitleForRoute(t){return t.data[Rc]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=dr({token:e,factory:function(){return di(Ww)},providedIn:"root"}),e})(),Ww=(()=>{class e extends Nw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(t){return new(t||e)(Kn(F0))},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class YO{}class QO extends class JO{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}{}const Hd=new ir("",{providedIn:"root",factory:()=>({})}),Kp=new ir("ROUTES");let Yp=(()=>{class e{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Yn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ns(t.loadComponent()).pipe(Yi(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),wp(()=>{this.componentLoaders.delete(t)})),a=new U0(r,()=>new sa).pipe(Dp());return this.componentLoaders.set(t,a),a}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Yn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Ar(s=>{this.onLoadEndListener&&this.onLoadEndListener(r);let f,v,l=!1;Array.isArray(s)?v=s:(f=s.create(t).injector,v=K0(f.get(Kp,[],Xn.Self|Xn.Optional)));return{routes:v.map(Up),injector:f}}),wp(()=>{this.childrenLoaders.delete(r)})),u=new U0(o,()=>new sa).pipe(Dp());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return ns(t()).pipe(Oi(r=>r instanceof PD||Array.isArray(r)?Yn(r):Di(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(t){return new(t||e)(Kn(qo),Kn(kg))},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class XO{}class ZO{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,t){return n}}function $O(e){throw e}function eN(e,n,t){return n.parse("/")}const tN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Vw(){const e=di($0),n=di(Bc),t=di(qg),r=di(qo),a=di(kg),o=di(Kp,{optional:!0})??[],u=di(Hd,{optional:!0})??{},s=di(Ww),f=di(Nw,{optional:!0}),v=di(XO,{optional:!0}),l=di(YO,{optional:!0}),I=new Wi(null,e,n,t,r,a,K0(o));return v&&(I.urlHandlingStrategy=v),l&&(I.routeReuseStrategy=l),I.titleStrategy=f??s,function rN(e,n){e.errorHandler&&(n.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(n.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(n.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(n.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(n.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(n.canceledNavigationResolution=e.canceledNavigationResolution)}(u,I),I}let Wi=(()=>{class e{constructor(t,r,a,o,u,s,f){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=a,this.location=o,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new sa,this.errorHandler=$O,this.malformedUriErrorHandler=eN,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Yn(void 0),this.urlHandlingStrategy=new ZO,this.routeReuseStrategy=new QO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(Yp),this.configLoader.onLoadEndListener=c=>this.triggerEvent(new WF(c)),this.configLoader.onLoadStartListener=c=>this.triggerEvent(new NF(c)),this.ngModule=u.get(bs),this.console=u.get(kx);const I=u.get(Ti);this.isNgZoneEnabled=I instanceof Ti&&Ti.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function sF(){return new Cs(new _r([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fw(this.currentUrlTree,this.rootComponentType),this.transitions=new ia({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe($a(a=>0!==a.id),Ar(a=>({...a,extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),_a(a=>{let o=!1,u=!1;return Yn(a).pipe(Yi(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),_a(s=>{const f=this.browserUrlTree.toString(),v=!this.navigated||s.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Uw(s.source)&&(this.browserUrlTree=s.extractedUrl),Yn(s).pipe(_a(I=>{const c=this.transitions.getValue();return r.next(new xp(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),c!==this.transitions.getValue()?Da:Promise.resolve(I)}),function RO(e,n,t,r){return _a(a=>function AO(e,n,t,r,a){return new xO(e,n,t,r,a).apply()}(e,n,t,a.extractedUrl,r).pipe(Ar(o=>({...a,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Yi(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},a.urlAfterRedirects=I.urlAfterRedirects}),function UO(e,n,t,r,a,o){return Oi(u=>function FO(e,n,t,r,a,o,u="emptyOnly",s="legacy"){return new OO(e,n,t,r,a,u,s,o).recognize().pipe(_a(f=>null===f?function kO(e){return new Ii(n=>n.error(e))}(new LO):Yn(f)))}(e,n,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,a,o).pipe(Ar(s=>({...u,targetSnapshot:s}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Yi(I=>{if(a.targetSnapshot=I.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const _=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(_,I)}this.browserUrlTree=I.urlAfterRedirects}const c=new RF(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);r.next(c)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:c,extractedUrl:_,source:h,restoredState:y,extras:p}=s,m=new xp(c,this.serializeUrl(_),h,y);r.next(m);const T=fw(_,this.rootComponentType).snapshot;return Yn(a={...s,targetSnapshot:T,urlAfterRedirects:_,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=s.rawUrl,s.resolve(null),Da}),Yi(s=>{const f=new LF(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot);this.triggerEvent(f)}),Ar(s=>a={...s,guards:rO(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function gO(e,n){return Oi(t=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:o,canDeactivateChecks:u}}=t;return 0===u.length&&0===o.length?Yn({...t,guardsResult:!0}):function pO(e,n,t,r){return Di(e).pipe(Oi(a=>function DO(e,n,t,r,a){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?Yn(o.map(s=>{const f=Vc(n)??a,v=Cu(s,f);return ns(function dO(e){return e&&jc(e.canDeactivate)}(v)?v.canDeactivate(e,n,t,r):f.runInContext(()=>v(e,n,t,r))).pipe(es())})).pipe(Eu()):Yn(!0)}(a.component,a.route,t,n,r)),es(a=>!0!==a,!0))}(u,r,a,e).pipe(Oi(s=>s&&function sO(e){return"boolean"==typeof e}(s)?function mO(e,n,t,r){return Di(n).pipe(Ts(a=>Ip(function vO(e,n){return null!==e&&n&&n(new BF(e)),Yn(!0)}(a.route.parent,r),function _O(e,n){return null!==e&&n&&n(new UF(e)),Yn(!0)}(a.route,r),function IO(e,n,t){const r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(u=>function iO(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(u)).filter(u=>null!==u).map(u=>V0(()=>Yn(u.guards.map(f=>{const v=Vc(u.node)??t,l=Cu(f,v);return ns(function lO(e){return e&&jc(e.canActivateChild)}(l)?l.canActivateChild(r,e):v.runInContext(()=>l(r,e))).pipe(es())})).pipe(Eu())));return Yn(o).pipe(Eu())}(e,a.path,t),function yO(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return Yn(!0);const a=r.map(o=>V0(()=>{const u=Vc(n)??t,s=Cu(o,u);return ns(function cO(e){return e&&jc(e.canActivate)}(s)?s.canActivate(n,e):u.runInContext(()=>s(n,e))).pipe(es())}));return Yn(a).pipe(Eu())}(e,a.route,t))),es(a=>!0!==a,!0))}(r,o,e,n):Yn(s)),Ar(s=>({...t,guardsResult:s})))})}(this.ngModule.injector,s=>this.triggerEvent(s)),Yi(s=>{if(a.guardsResult=s.guardsResult,Ms(s.guardsResult))throw _w(0,s.guardsResult);const f=new kF(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.triggerEvent(f)}),$a(s=>!!s.guardsResult||(this.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),zp(s=>{if(s.guards.canActivateChecks.length)return Yn(s).pipe(Yi(f=>{const v=new FF(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(v)}),_a(f=>{let v=!1;return Yn(f).pipe(function GO(e,n){return Oi(t=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=t;if(!a.length)return Yn(t);let o=0;return Di(a).pipe(Ts(u=>function jO(e,n,t,r){const a=e.routeConfig,o=e._resolve;return void 0!==a?.title&&!Ow(a)&&(o[Rc]=a.title),function HO(e,n,t,r){const a=function zO(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===a.length)return Yn({});const o={};return Di(a).pipe(Oi(u=>function KO(e,n,t,r){const a=Vc(n)??r,o=Cu(e,a);return ns(o.resolve?o.resolve(n,t):a.runInContext(()=>o(n,t)))}(e[u],n,t,r).pipe(es(),Yi(s=>{o[u]=s}))),bp(1),function rF(e){return Ar(()=>e)}(o),ts(u=>Gp(u)?Da:Ac(u)))}(o,e,n,r).pipe(Ar(u=>(e._resolvedData=u,e.data=gw(e,t).resolve,a&&Ow(a)&&(e.data[Rc]=a.title),null)))}(u.route,r,e,n)),Yi(()=>o++),bp(1),Oi(u=>o===a.length?Yn(t):Da))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Yi({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),Yi(f=>{const v=new OF(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(v)}))}),zp(s=>{const f=v=>{const l=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(v.routeConfig).pipe(Yi(I=>{v.component=I}),Ar(()=>{})));for(const I of v.children)l.push(...f(I));return l};return W0(f(s.targetSnapshot.root)).pipe(Ed(),xc(1))}),zp(()=>this.afterPreactivation()),Ar(s=>{const f=function KF(e,n,t){const r=Wc(e,n._root,t?t._root:void 0);return new hw(r,n)}(this.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return a={...s,targetRouterState:f}}),Yi(s=>{this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects)}),((e,n,t)=>Ar(r=>(new nO(n,r.targetRouterState,r.currentRouterState,t).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,s=>this.triggerEvent(s)),Yi({next(){o=!0},complete(){o=!0}}),wp(()=>{o||u||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),ts(s=>{if(u=!0,Iw(s)){yw(s)||(this.navigated=!0,this.restoreHistory(a,!0));const f=new kd(a.id,this.serializeUrl(a.extractedUrl),s.message,s.cancellationCode);if(r.next(f),yw(s)){const v=this.urlHandlingStrategy.merge(s.url,this.rawUrlTree),l={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Uw(a.source)};this.scheduleNavigation(v,"imperative",null,l,{resolve:a.resolve,reject:a.reject,promise:a.promise})}else a.resolve(!1)}else{this.restoreHistory(a,!0);const f=new cw(a.id,this.serializeUrl(a.extractedUrl),s,a.targetSnapshot??void 0);r.next(f);try{a.resolve(this.errorHandler(s))}catch(v){a.reject(v)}}return Da}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const a={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const s={...o};delete s.navigationId,delete s.\u0275routerPageId,0!==Object.keys(s).length&&(a.state=s)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,o,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Up),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:a,queryParams:o,fragment:u,queryParamsHandling:s,preserveFragment:f}=r,v=a||this.routerState.root,l=f?this.currentUrlTree.fragment:u;let I=null;switch(s){case"merge":I={...this.currentUrlTree.queryParams,...o};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=o||null}return null!==I&&(I=this.removeEmptyProps(I)),CF(v,this.currentUrlTree,t,I,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const a=Ms(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function iN(e){for(let n=0;n<e.length;n++){if(null==e[n])throw new Bn(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return r}isActive(t,r){let a;if(a=!0===r?{...tN}:!1===r?{...nN}:r,Ms(t))return Q0(this.currentUrlTree,t,a);const o=this.parseUrl(t);return Q0(this.currentUrlTree,o,a)}removeEmptyProps(t){return Object.keys(t).reduce((r,a)=>{const o=t[a];return null!=o&&(r[a]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ps(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,a,o,u){if(this.disposed)return Promise.resolve(!1);let s,f,v;u?(s=u.resolve,f=u.reject,v=u.promise):v=new Promise((c,_)=>{s=c,f=_});const l=++this.navigationId;let I;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),I=a&&a.\u0275routerPageId?a.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):I=0,this.setTransition({id:l,targetPageId:I,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:s,reject:f,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(c=>Promise.reject(c))}setBrowserUrl(t,r){const a=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",o):this.location.go(a,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===a?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(a)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,a){const o=new kd(t.id,this.serializeUrl(t.extractedUrl),r,a);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return e.\u0275fac=function(t){Lf()},e.\u0275prov=dr({token:e,factory:function(){return Vw()},providedIn:"root"}),e})();function Uw(e){return"imperative"!==e}let zc=(()=>{class e{constructor(t,r,a){this.router=t,this.route=r,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new sa,this.subscription=t.events.subscribe(o=>{o instanceof Ps&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=Du(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Du(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Du(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,a,o,u){return!!(0!==t||r||a||o||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(t){return new(t||e)(Hn(Wi),Hn(As),Hn(Ss))},e.\u0275dir=Vi({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&Wo("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&ig("target",r.target)("href",r.href,Xh)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[ps]}),e})();class Gw{}let sN=(()=>{class e{constructor(t,r,a,o,u){this.router=t,this.injector=a,this.preloadingStrategy=o,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe($a(t=>t instanceof Ps),Ts(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const a=[];for(const o of r){o.providers&&!o._injector&&(o._injector=$l(o.providers,t,`Route: ${o.path}`));const u=o._injector??t,s=o._loadedInjector??u;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?a.push(this.preloadConfig(u,o)):(o.children||o._loadedRoutes)&&a.push(this.processRoutes(s,o.children??o._loadedRoutes))}return Di(a).pipe(xs())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let a;a=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Yn(null);const o=a.pipe(Oi(u=>null===u?Yn(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));return r.loadComponent&&!r._loadedComponent?Di([o,this.loader.loadComponent(r)]).pipe(xs()):o})}}return e.\u0275fac=function(t){return new(t||e)(Kn(Wi),Kn(kg),Kn(za),Kn(Gw),Kn(Yp))},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Qp=new ir("");let jw=(()=>{class e{constructor(t,r,a={}){this.router=t,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ps&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lw&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new lw(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){Lf()},e.\u0275prov=dr({token:e,factory:e.\u0275fac}),e})();function Mu(e,n){return{\u0275kind:e,\u0275providers:n}}function qp(e){return[{provide:Kp,multi:!0,useValue:e}]}function zw(){const e=di(qo);return n=>{const t=e.get(ad);if(n!==t.components[0])return;const r=e.get(Wi),a=e.get(Kw);1===e.get(Xp)&&r.initialNavigation(),e.get(Yw,null,Xn.Optional)?.setUpPreloading(),e.get(Qp,null,Xn.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),a.next(),a.complete()}}const Kw=new ir("",{factory:()=>new sa}),Xp=new ir("",{providedIn:"root",factory:()=>1});const Yw=new ir("");function dN(e){return Mu(0,[{provide:Yw,useExisting:sN},{provide:Gw,useExisting:e}])}const Jw=new ir("ROUTER_FORROOT_GUARD"),hN=[qg,{provide:$0,useClass:Tp},{provide:Wi,useFactory:Vw},Bc,{provide:As,useFactory:function Hw(e){return e.routerState.root},deps:[Wi]},Yp];function fN(){return new Tb("Router",Wi)}let Qw=(()=>{class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[hN,[],qp(t),{provide:Jw,useFactory:_N,deps:[[Wi,new Zu,new $u]]},{provide:Hd,useValue:r||{}},r?.useHash?{provide:Ss,useClass:bR}:{provide:Ss,useClass:qb},{provide:Qp,useFactory:()=>{const e=di(Wi),n=di(GL),t=di(Hd);return t.scrollOffset&&n.setOffset(t.scrollOffset),new jw(e,n,t)}},r?.preloadingStrategy?dN(r.preloadingStrategy).\u0275providers:[],{provide:Tb,multi:!0,useFactory:fN},r?.initialNavigation?vN(r):[],[{provide:qw,useFactory:zw},{provide:vb,multi:!0,useExisting:qw}]]}}static forChild(t){return{ngModule:e,providers:[qp(t)]}}}return e.\u0275fac=function(t){return new(t||e)(Kn(Jw,8))},e.\u0275mod=Va({type:e}),e.\u0275inj=wa({imports:[Bp]}),e})();function _N(e){return"guarded"}function vN(e){return["disabled"===e.initialNavigation?Mu(3,[{provide:rd,multi:!0,useFactory:()=>{const n=di(Wi);return()=>{n.setUpLocationChangeListener()}}},{provide:Xp,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Mu(2,[{provide:Xp,useValue:0},{provide:rd,multi:!0,deps:[qo],useFactory:n=>{const t=n.get(IR,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(o=>{const u=n.get(Wi),s=n.get(Kw);(function a(o){n.get(Wi).events.pipe($a(s=>s instanceof Ps||s instanceof kd||s instanceof cw),Ar(s=>s instanceof Ps||s instanceof kd&&(0===s.code||1===s.code)&&null),$a(s=>null!==s),xc(1)).subscribe(()=>{o()})})(()=>{o(!0),r=!0}),u.afterPreactivation=()=>(o(!0),r||s.closed?Yn(void 0):s),u.initialNavigation()}))}}]).\u0275providers:[]]}const qw=new ir(""),IN=[{id:"scanner-capture",name:"Scanner Capture",description:"Capture documents from scanner"},{id:"camera-capture",name:"Camera Capture",description:"Capture documents from camera stream"},{id:"document-scanner",name:"Document Scanner",description:"Scan documents from camera stream and do edge detection, perspective correction and image enhancement"}],DN=function(){return["/scanner-capture"]};function bN(e,n){if(1&e&&(Qr(0,"a",3),no(1),ni()),2&e){const t=gu().$implicit;zi("title",t.name+" details")("routerLink",yc(3,DN)),eo(1),Is("> ",t.name," ")}}const wN=function(){return["/camera-capture"]};function SN(e,n){if(1&e&&(Qr(0,"a",3),no(1),ni()),2&e){const t=gu().$implicit;zi("title",t.name+" details")("routerLink",yc(3,wN)),eo(1),Is("> ",t.name," ")}}const TN=function(){return["/document-scanner"]};function CN(e,n){if(1&e&&(Qr(0,"a",3),no(1),ni()),2&e){const t=gu().$implicit;zi("title",t.name+" details")("routerLink",yc(3,TN)),eo(1),Is("> ",t.name," ")}}function EN(e,n){if(1&e&&(Qr(0,"p"),no(1),ni()),2&e){const t=gu().$implicit;eo(1),Is("Description: ",t.description,"")}}function MN(e,n){if(1&e&&(Qr(0,"div")(1,"h3")(2,"div"),Qa(3,bN,2,4,"ng-template",1),Qa(4,SN,2,4,"ng-template",1),Qa(5,CN,2,4,"ng-template",1),ni()(),Qa(6,EN,2,1,"p",2),ni()),2&e){const t=n.$implicit;eo(3),zi("ngIf","scanner-capture"===t.id),eo(1),zi("ngIf","camera-capture"===t.id),eo(1),zi("ngIf","document-scanner"===t.id),eo(1),zi("ngIf",t.description)}}let PN=(()=>{class e{constructor(){this.products=IN}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Lo({type:e,selectors:[["app-product-list"]],decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngIf"],[4,"ngIf"],[3,"title","routerLink"]],template:function(t,r){1&t&&(Qr(0,"h2"),no(1,"Examples"),ni(),Qa(2,MN,7,4,"div",0)),2&t&&(eo(2),zi("ngForOf",r.products))},dependencies:[c0,ap,zc]}),e})();function Xw(e,n,t,r,a,o,u){try{var s=e[o](u),f=s.value}catch(v){return void t(v)}s.done?n(f):Promise.resolve(f).then(r,a)}function Kc(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var o=e.apply(n,t);function u(f){Xw(o,r,a,u,s,"next",f)}function s(f){Xw(o,r,a,u,s,"throw",f)}u(void 0)})}}function Zr(e,n,t,r){return new(t||(t=Promise))(function(a,o){function u(v){try{f(r.next(v))}catch(l){o(l)}}function s(v){try{f(r.throw(v))}catch(l){o(l)}}function f(v){var l;v.done?a(v.value):(l=v.value,l instanceof t?l:new t(function(I){I(l)})).then(u,s)}f((r=r.apply(e,n||[])).next())})}const Pu=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name&&typeof HTMLCanvasElement>"u"),Jd=!Pu&&typeof self>"u";class An{constructor(){this._canvasMaxWH="iPhone"==An.browserInfo.OS||"Android"==An.browserInfo.OS?2048:4096,this._singleFrameMode=!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),this._singleFrameModeIpt=()=>{let n=document.createElement("input");return n.setAttribute("type","file"),n.setAttribute("accept","image/*"),n.setAttribute("capture",""),n.addEventListener("change",()=>Zr(this,void 0,void 0,function*(){let t=n.files[0];n.value="",this.onSingleFrameAcquired(t)})),n},this._clickIptSingleFrameMode=()=>{this._singleFrameModeIpt().click()},this.styleEls=[],this.bSaveOriCanvas=!0,this.maxVideoCvsLength=3,this.videoCvses=[],this.videoGlCvs=null,this.videoGl=null,this.glImgData=null,this._onCameraSelChange=()=>{this.play(this._selCam.value).then(()=>{this._isOpen||this.stop()})},this._onResolutionSelChange=()=>{let n,t;if(this._selRsl&&-1!=this._selRsl.selectedIndex){let r=this._selRsl.options[this._selRsl.selectedIndex];n=r.getAttribute("data-width"),t=r.getAttribute("data-height")}this.play(void 0,n,t).then(()=>{this._isOpen||this.stop()})},this._onCloseBtnClick=()=>{this.close()},this._isOpen=!1,this.videoSettings={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}},this.iPlayRound=0,this.promisePlay=null,this._allCameras=[],this._currentCamera=null,this._videoTrack=null,this._lastDeviceId=void 0,this._vc_bPlayingVideoBeforeHide=!1,this._ev_documentHideEvent=()=>{"visible"===document.visibilityState?this._vc_bPlayingVideoBeforeHide&&("Firefox"==An.browserInfo.browser?this.play():this._video.play(),this._vc_bPlayingVideoBeforeHide=!1):this._video&&!this._video.paused&&(this._vc_bPlayingVideoBeforeHide=!0,this._video.pause())},this._video=null,this._bgLoading=null,this._selCam=null,this._bgCamera=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._region=null,this.bChangeRegionIndexManually=!1,this._regionIndex=-1,this._loopInterval=0,this._frameQueueMaxLength=1,this._frameQueue=[],this._bFetchingLoopStarted=!1,this._bStoppedByPause=!1,this.alwaysRefreshBuffer=!0,this._bufferRefreshInterval=0,this.bDestroyed=!1}static getVersion(){return this._version}static detectEnvironment(){return Zr(this,void 0,void 0,function*(){let n={wasm:typeof WebAssembly<"u"&&(typeof navigator>"u"||!(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&/\(.+\s11_2_([2-6]).*\)/.test(navigator.userAgent))),worker:Pu?process.version>="v12":typeof Worker<"u",getUserMedia:!(typeof navigator>"u"||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),camera:!1,browser:this.browserInfo.browser,version:this.browserInfo.version,OS:this.browserInfo.OS};if(n.getUserMedia)try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(t=>{t.stop()}),n.camera=!0}catch{}return n})}static get engineResourcePath(){return this._engineResourcePath}static set engineResourcePath(n){if(this._hasEngineResourceLoaded)throw new Error("`engineResourcePath` is not allowed to change after `createInstance` is called.");if(null==n&&(n="./"),Pu||Jd)An._engineResourcePath=n;else{let t=document.createElement("a");t.href=n,An._engineResourcePath=t.href}this._engineResourcePath.endsWith("/")||(An._engineResourcePath+="/")}static get defaultUIElementURL(){var n;return null===(n=this._defaultUIElementURL)||void 0===n?void 0:n.replace("@engineResourcePath/",An.engineResourcePath)}static set defaultUIElementURL(n){this._defaultUIElementURL=n}getUIElement(){return this.UIElement}setUIElement(n){return Zr(this,void 0,void 0,function*(){if("string"==typeof n||n instanceof String){if(!n.trim().startsWith("<")){let r=yield fetch(n);if(!r.ok)throw Error("setUIElement(elementOrUrl): Network Error: "+r.statusText);n=yield r.text()}if(!n.trim().startsWith("<"))throw Error("setUIElement(elementOrUrl): Can't get valid HTMLElement.");let t=document.createElement("div");t.innerHTML=n;for(let r=0;r<t.childElementCount;++r){let a=t.children[r];a instanceof HTMLStyleElement&&(this.styleEls.push(a),document.head.append(a))}(n=1==t.childElementCount?t.children[0]:t).remove()}this.UIElement=n})}get singleFrameMode(){return this._singleFrameMode}set singleFrameMode(n){if(this._isOpen)throw new Error("`singleFrameMode` is not allowed to change when camera is open.");this._singleFrameMode=n}get ifSaveOriginalImageInACanvas(){return this.bSaveOriCanvas}set ifSaveOriginalImageInACanvas(n){this.bSaveOriCanvas=n}_bindUI(){if(!this.UIElement)throw new Error("Need to define `UIElement` before opening.");let n=[this.UIElement],t=this.UIElement.children;for(let a of t)n.push(a);for(let a=0;a<n.length;++a)for(let o of n[a].children)n.push(o);let r=null;for(let a of n)!this._video&&a.classList.contains("dce-video")?(this._video=a,this._video.setAttribute("playsinline","true")):!this._bgLoading&&a.classList.contains("dce-bg-loading")?this._bgLoading=a:!this._bgCamera&&a.classList.contains("dce-bg-camera")?this._bgCamera=a:!this._selCam&&a.classList.contains("dce-sel-camera")?this._selCam=a:!this._selRsl&&a.classList.contains("dce-sel-resolution")?(this._selRsl=a,this._selRsl.options.length||(this._selRsl.innerHTML=[this._optGotRsl?"":'<option class="dce-opt-gotResolution" value="got"></option>','<option data-width="1920" data-height="1080">ask 1920 x 1080</option>','<option data-width="1280" data-height="720">ask 1280 x 720</option>','<option data-width="640" data-height="480">ask 640 x 480</option>'].join(""),this._optGotRsl=this._optGotRsl||this._selRsl.options[0])):!this._optGotRsl&&a.classList.contains("dce-opt-gotResolution")?this._optGotRsl=a:!this._btnClose&&a.classList.contains("dce-btn-close")?this._btnClose=a:!this._video&&a.classList.contains("dce-existingVideo")?(this._video=a,this._video.setAttribute("playsinline","true")):!r&&a.tagName&&"video"==a.tagName.toLowerCase()&&(r=a);if(!this._video&&r&&(this._video=r),this.singleFrameMode?this._video&&(this._video.addEventListener("click",this._clickIptSingleFrameMode),this._video.style.cursor="pointer",this._video.setAttribute("title","Take a photo")):this._bgLoading&&(this._bgLoading.style.display=""),this.singleFrameMode?(this._video&&(this._video.addEventListener("click",this._clickIptSingleFrameMode),this._video.style.cursor="pointer",this._video.setAttribute("title","Take a photo")),this._bgCamera&&(this._bgCamera.style.display="")):this._bgLoading&&(this._bgLoading.style.display=""),this._selCam&&this._selCam.addEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.addEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.addEventListener("click",this._onCloseBtnClick),!this._video)throw this._unbindUI(),Error("Can not find HTMLVideoElement with class `dce-video`");this._isOpen=!0}_unbindUI(){this.singleFrameMode?(this._video&&(this._video.removeEventListener("click",this._clickIptSingleFrameMode),this._video.style.cursor="",this._video.removeAttribute("title")),this._bgCamera&&(this._bgCamera.style.display="none")):this._bgLoading&&(this._bgLoading.style.display="none"),this._selCam&&this._selCam.removeEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.removeEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.removeEventListener("click",this._onCloseBtnClick),this._video=null,this._selCam=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._isOpen=!1}_assertOpen(){if(!this._isOpen)throw Error("The camera is not open.")}get video(){return this._video}set region(n){this._region=n,this._bFetchingLoopStarted&&(this._regionIndex=-1,this._fetchingLoop(!1))}get region(){return this._region}set regionIndex(n){this.bChangeRegionIndexManually&&(this._regionIndex=this._region instanceof Array&&this._region.length>n?n:0)}get regionIndex(){return this._regionIndex}set loopInterval(n){n>=0&&(this._loopInterval=n),this._bFetchingLoopStarted&&this._fetchingLoop(!1)}get loopInterval(){return this._loopInterval}set frameQueueMaxLength(n){for(this._frameQueueMaxLength=n;this._frameQueue&&this._frameQueue.length>this._frameQueueMaxLength;)this._frameQueue.shift()}get frameQueueMaxLength(){return this._frameQueueMaxLength}get frameQueue(){return JSON.parse(JSON.stringify(this._frameQueue))}set bufferRefreshInterval(n){this._bufferRefreshInterval=n}get bufferRefreshInterval(){return this._bufferRefreshInterval}isContextDestroyed(){return this.bDestroyed}static createInstance(n){return Zr(this,void 0,void 0,function*(){if(Pu)throw new Error("`CameraEnhancer` is not supported in Node.js.");let t=new An;("string"==typeof n||n instanceof String)&&(n=JSON.parse(n));for(let r in n)t[r]=n[r];return yield t.setUIElement(this.defaultUIElementURL),this._hasEngineResourceLoaded=!0,document.addEventListener("visibilitychange",t._ev_documentHideEvent),t})}play(n,t,r){return Zr(this,void 0,void 0,function*(){if(this._assertOpen(),this._video&&this.videoSrc){yield new Promise((u,s)=>{this._video.onloadedmetadata=()=>Zr(this,void 0,void 0,function*(){this._video.onloadedmetadata=null,yield this._video.play(),u()}),"string"==typeof this.videoSrc||this.videoSrc instanceof String?this._video.src=this.videoSrc:this._video.srcObject=this.videoSrc,setTimeout(()=>s(new Error("Failed to play video. Timeout.")),4e3)});let o={width:this._video.videoWidth,height:this._video.videoHeight};return this.onPlayed&&setTimeout(()=>{this.onPlayed(o)},0),o}if(this.singleFrameMode)return this._clickIptSingleFrameMode(),{width:0,height:0};const a=++this.iPlayRound;return this.promisePlay&&(yield this.promisePlay,a<this.iPlayRound)?{width:this._video.videoWidth,height:this._video.videoHeight}:(this.promisePlay=(()=>Zr(this,void 0,void 0,function*(){var o;try{this._video&&this._video.srcObject&&this.stop(),An._onLog&&An._onLog("DCE: ======before video========"),yield this.getAllCameras();let u=()=>{if(this.bDestroyed)throw l&&l.getTracks().forEach(S=>{S.stop()}),this._video.srcObject=null,this._videoTrack=null,this._currentCamera=null,new Error("The CameraEnhancer instance has been destroyed.")};const s=JSON.parse(JSON.stringify(this.videoSettings));let f;"boolean"==typeof s.video&&(s.video={}),t&&(s.video.width={ideal:t}),r&&(s.video.height={ideal:r});const v=["rear","back","r\xfcck","arri\xe8re","trasera","tr\xe1s","traseira","posteriore","\u540e\u9762","\u5f8c\u9762","\u80cc\u9762","\u540e\u7f6e","\u5f8c\u7f6e","\u80cc\u7f6e","\u0437\u0430\u0434\u043d\u0435\u0439","\u0627\u0644\u062e\u0644\u0641\u064a\u0629","\ud6c4","arka","achterzijde","\u0e2b\u0e25\u0e31\u0e07","baksidan","bagside","sau","bak","tylny","takakamera","belakang","\u05d0\u05d7\u05d5\u05e8\u05d9\u05ea","\u03c0\u03af\u03c3\u03c9","spate","h\xe1ts\xf3","zadn\xed","darrere","zadn\xe1","\u0437\u0430\u0434\u043d\u044f","stra\u017enja","belakang","\u092c\u0948\u0915"];let l,I=()=>{for(let S of this._allCameras){let M=S.label.toLowerCase();if(M&&v.some(G=>-1!=M.indexOf(G))&&/\b0(\b)?/.test(M)){delete s.video.facingMode,s.video.deviceId={ideal:S.deviceId};break}}s.video.deviceId||-1==["Android","HarmonyOS"].indexOf(An.browserInfo.OS)||(delete s.video.facingMode,s.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})};if(n)delete s.video.facingMode,s.video.deviceId={exact:n},this._lastDeviceId=n;else if(!s.video.deviceId)if(this._lastDeviceId)delete s.video.facingMode,s.video.deviceId={exact:this._lastDeviceId};else if(s.video.facingMode){let S=s.video.facingMode;S instanceof Array&&S.length&&(S=S[0]),S=S.exact||S.ideal||S,"environment"===S&&(f=!!s.video.facingMode,I())}An._onLog&&An._onLog("DCE: ======try getUserMedia========");let c,_=[0,500],h=null,y=null,p=S=>Zr(this,void 0,void 0,function*(){for(let M of _){u(),M&&(yield new Promise(G=>setTimeout(G,M))),u();{const G=S.video.deviceId;y=G?G.exact||G.ideal||G:null}try{An._onLog&&An._onLog("DCE: ask "+JSON.stringify(S)),l=yield navigator.mediaDevices.getUserMedia(S);break}catch(G){h=G,An._onLog&&An._onLog("DCE: "+G.message||0)}}});if(yield p(s),!l&&(An._onLog&&An._onLog("DCE: ======try getUserMedia again========"),c=JSON.parse(JSON.stringify(s)),"object"==typeof c.video&&("iPhone"==An.browserInfo.OS?(t>=1280||r>=1280?c.video.width=1280:t>=640||r>=640?c.video.width=640:(t<640||r<640)&&(c.video.width=320),delete c.video.height):f&&!s.video.deviceId?(delete c.video.facingMode,this._allCameras.length&&(c.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})):c.video=!0),An._onLog&&An._onLog("DCE: "+c),yield p(c)),l||(_=[1e3,2e3],yield p(s)),l||(yield p(c)),!l)throw h;const m=()=>{const S=l.getVideoTracks();let M,G;if(S.length&&(M=this._videoTrack=S[0]),this._video&&M){if(M.label)for(let L of this._allCameras)if(M.label==L.label){L._checked=!0,G=L,this._lastDeviceId=L.deviceId;break}if(!G&&y)for(let L of this._allCameras)if(y==L.deviceId){M.label&&(L._checked=!0,L.label=M.label),G=L,this._lastDeviceId=L.deviceId;break}}this._currentCamera=G};if(yield this.getAllCameras(),u(),f){m(),I();let S=s.video.deviceId;S&&(S=S.exact||S.ideal||S);let M=null===(o=this._currentCamera)||void 0===o?void 0:o.deviceId;!S||M&&S==M||(l.getTracks().forEach(G=>{G.stop()}),_=[0,500,1e3,2e3],yield p(s))}u(),yield(()=>Zr(this,void 0,void 0,function*(){An._onLog&&An._onLog("======play video========"),yield new Promise((S,M)=>{this._video.onloadedmetadata=()=>Zr(this,void 0,void 0,function*(){this._video.onloadedmetadata=null,yield this._video.play(),S()}),this._video.srcObject=l,setTimeout(()=>M(new Error("Failed to play video. Timeout.")),4e3)})}))(),An._onLog&&An._onLog("DCE: ======played video========"),this._bgLoading&&(this._bgLoading.style.animationPlayState="paused");const C="got "+this._video.videoWidth+"x"+this._video.videoHeight;this._optGotRsl&&(this._optGotRsl.setAttribute("data-width",this._video.videoWidth),this._optGotRsl.setAttribute("data-height",this._video.videoHeight),this._optGotRsl.innerText=C,this._selRsl&&this._optGotRsl.parentNode==this._selRsl&&(this._selRsl.value="got")),An._onLog&&An._onLog("DCE: "+C),m(),u(),this._renderSelCameraInfo();let D={width:this._video.videoWidth,height:this._video.videoHeight};return this.onPlayed&&setTimeout(()=>{this.onPlayed(D)},0),this.promisePlay=null,D}catch(u){throw this.promisePlay=null,u}}))(),yield this.promisePlay)})}resume(){return Zr(this,void 0,void 0,function*(){yield this.play(),this._bStoppedByPause&&(this._bStoppedByPause=!1,this.startFetchingLoop())})}pause(){this._video&&this._video.pause(),this._bFetchingLoopStarted&&(this.stopFetchingLoop(),this._bStoppedByPause=!0)}close(){return Zr(this,void 0,void 0,function*(){this.stop(),this._unbindUI(),this.UIElement.style.display="none",this.stopFetchingLoop()})}open(){return Zr(this,void 0,void 0,function*(){return this._bindUI(),this.UIElement.parentNode||(this.UIElement.style.position="fixed",this.UIElement.style.left="0",this.UIElement.style.top="0",document.body.append(this.UIElement)),"none"==this.UIElement.style.display&&(this.UIElement.style.display=""),yield this.play()})}stop(){this._video&&this._video.srcObject&&(An._onLog&&An._onLog("DCE: ======stop video========"),this._video.srcObject.getTracks().forEach(n=>{n.stop()}),this._video.srcObject=null,this._videoTrack=null,this._currentCamera=null),this._video&&this._video.classList.contains("dce-existingVideo")&&(An._onLog&&An._onLog("DCE: ======stop existing video========"),this._video.pause(),this._video.currentTime=0),this._bgLoading&&(this._bgLoading.style.animationPlayState=""),this._frameQueue.length=0}getAllCameras(){return Zr(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.enumerateDevices(),t=[],r=[];if(this._allCameras)for(let a of this._allCameras)a._checked&&r.push(a);for(let a=0;a<n.length;a++){let o,u=n[a];if("videoinput"==u.kind){for(let s of r)u.deviceId==s.deviceId&&(o=s);o||(o={},o.deviceId=u.deviceId,o.label=u.label?u.label:"camera "+a),t.push(o)}}return this._allCameras=t,An._onLog&&An._onLog("DCE: "+JSON.stringify(this._allCameras)),Promise.resolve(t)})}_renderSelCameraInfo(){if(this._selCam&&(this._selCam.innerHTML=""),this._selCam){let n;for(let t of this._allCameras){let r=document.createElement("option");r.value=t.deviceId,r.innerText=t.label,this._selCam.append(r),t.deviceId&&this._currentCamera&&this._currentCamera.deviceId==t.deviceId&&(n=r)}this._selCam.value=n?n.value:""}}getSelectedCamera(){return Zr(this,void 0,void 0,function*(){return this._currentCamera})}selectCamera(n){return Zr(this,void 0,void 0,function*(){return yield this.play(n.deviceId||n)})}getResolution(){return this._isOpen?[this._video.videoWidth,this._video.videoHeight]:null}setResolution(n,t){return Zr(this,void 0,void 0,function*(){let r,a;return this._isOpen?(n instanceof Array?(r=n[0],a=n[1]):(r=n,a=t),yield this.play(null,r,a)):yield Promise.reject(new Error("The camera is not open."))})}getVideoSettings(){return JSON.parse(JSON.stringify(this.videoSettings))}updateVideoSettings(n){return this.videoSettings=JSON.parse(JSON.stringify(n)),this._lastDeviceId=null,this._isOpen?this.play():Promise.resolve()}isOpen(){return this._isOpen}getCapabilities(){return this._assertOpen(),this._videoTrack.getCapabilities?this._videoTrack.getCapabilities():{}}getCameraSettings(){return this._assertOpen(),this._videoTrack.getSettings()}getConstraints(){return this._assertOpen(),this._videoTrack.getConstraints()}applyConstraints(n){return Zr(this,void 0,void 0,function*(){if(this._assertOpen(),!this._videoTrack.applyConstraints)throw Error("Not supported.");return yield this._videoTrack.applyConstraints(n)})}turnOnTorch(){return Zr(this,void 0,void 0,function*(){if(this._assertOpen(),this.getCapabilities().torch)return yield this._videoTrack.applyConstraints({advanced:[{torch:!0}]});throw Error("Not supported.")})}turnOffTorch(){return Zr(this,void 0,void 0,function*(){if(this._assertOpen(),this.getCapabilities().torch)return yield this._videoTrack.applyConstraints({advanced:[{torch:!1}]});throw Error("Not supported.")})}setColorTemperature(n){return Zr(this,void 0,void 0,function*(){this._assertOpen();let t=this.getCapabilities().colorTemperature;if(!t)throw Error("Not supported.");return n<t.min?n=t.min:n>t.max&&(n=t.max),yield this._videoTrack.applyConstraints({advanced:[{colorTemperature:n}]})})}setExposureCompensation(n){return Zr(this,void 0,void 0,function*(){this._assertOpen();let t=this.getCapabilities().exposureCompensation;if(!t)throw Error("Not supported.");return n<t.min?n=t.min:n>t.max&&(n=t.max),yield this._videoTrack.applyConstraints({advanced:[{exposureCompensation:n}]})})}setZoom(n){return Zr(this,void 0,void 0,function*(){this._assertOpen();let t=this.getCapabilities().zoom;if(!t)throw Error("Not supported.");return n<t.min?n=t.min:n>t.max&&(n=t.max),yield this._videoTrack.applyConstraints({advanced:[{zoom:n}]})})}setFrameRate(n){return Zr(this,void 0,void 0,function*(){this._assertOpen();let t=this.getCapabilities().frameRate;if(!t)throw Error("Not supported.");return n<t.min?n=t.min:n>t.max&&(n=t.max),yield this._videoTrack.applyConstraints({width:{ideal:Math.max(this._video.videoWidth,this._video.videoHeight)},frameRate:n})})}getFrameRate(){return this.getCameraSettings().frameRate}getFrame(n){if(this.bDestroyed)throw Error("The DCE instance has been destroyed.");this._assertOpen(),An._onLog&&An._onLog("DCE: getFrame(region?)");const t=Date.now(),r=this._video.videoWidth,a=this._video.videoHeight,o=Math.max(r,a);let u,s;if(o>this._canvasMaxWH){let y=this._canvasMaxWH/o;u=Math.round(r*y),s=Math.round(a*y)}else u=r,s=a;let f=0,v=0,l=r,I=a,c=r,_=a;if(n){let y,p,m,T;n.regionMeasuredByPercentage?(y=n.regionLeft*u/100,p=n.regionTop*s/100,m=n.regionRight*u/100,T=n.regionBottom*s/100):(y=n.regionLeft,p=n.regionTop,m=n.regionRight,T=n.regionBottom),c=m-y,l=Math.round(c/u*r),_=T-p,I=Math.round(_/s*a),f=Math.round(y/u*r),v=Math.round(p/s*a)}let h=0==f&&0==v&&r==l&&a==I&&r==c&&a==_;if(!this.bSaveOriCanvas&&h){this.videoGlCvs||(this.videoGlCvs=globalThis.OffscreenCanvas?new OffscreenCanvas(c,_):document.createElement("canvas"));const y=this.videoGlCvs;y.width==c&&y.height==_||(y.height=_,y.width=c,this.videoGl&&this.videoGl.viewport(0,0,c,_));const p=this.videoGl||y.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0})||y.getContext("experimental-webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0});if(!this.videoGl){this.videoGl=p;const M=p.createShader(p.VERTEX_SHADER);p.shaderSource(M,"\nattribute vec4 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\n\nvoid main() {\n    gl_Position = a_position;\n    v_uv = a_uv;\n}\n"),p.compileShader(M),p.getShaderParameter(M,p.COMPILE_STATUS)||console.error("An error occurred compiling the shaders: "+p.getShaderInfoLog(M));const G=p.createShader(p.FRAGMENT_SHADER);p.shaderSource(G,"\nprecision lowp float;\n\nvarying vec2 v_uv;\n\nuniform sampler2D u_texture;\n\nvoid main() {\n    vec4 sample =  texture2D(u_texture, v_uv);\n    float grey = 0.299 * sample.r + 0.587 * sample.g + 0.114 * sample.b;\n    gl_FragColor = vec4(grey, 0.0, 0.0, 1.0);\n}\n"),p.compileShader(G),p.getShaderParameter(G,p.COMPILE_STATUS)||console.error("An error occurred compiling the shaders: "+p.getShaderInfoLog(G));const L=p.createProgram();p.attachShader(L,M),p.attachShader(L,G),p.linkProgram(L),p.getProgramParameter(L,p.LINK_STATUS)||console.error("Unable to initialize the shader program: "+p.getProgramInfoLog(L)),p.useProgram(L),p.bindBuffer(p.ARRAY_BUFFER,p.createBuffer()),p.bufferData(p.ARRAY_BUFFER,new Float32Array([-1,1,0,1,1,1,1,1,-1,-1,0,0,1,-1,1,0]),p.STATIC_DRAW);const W=p.getAttribLocation(L,"a_position");p.enableVertexAttribArray(W),p.vertexAttribPointer(W,2,p.FLOAT,!1,16,0);const F=p.getAttribLocation(L,"a_uv");p.enableVertexAttribArray(F),p.vertexAttribPointer(F,2,p.FLOAT,!1,16,8),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,p.createTexture()),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.uniform1i(p.getUniformLocation(L,"u_texture"),0)}(!this.glImgData||this.glImgData.length<c*_*4)&&(this.glImgData=new Uint8Array(c*_*4)),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,this._video);let m=An._onLog?Date.now():0;p.drawArrays(p.TRIANGLE_STRIP,0,4),An._onLog&&An._onLog("DCE: Grey cost: "+(Date.now()-m));const T=this.glImgData;p.readPixels(0,0,p.drawingBufferWidth,p.drawingBufferHeight,p.RGBA,p.UNSIGNED_BYTE,T);let C=An._onLog?Date.now():0,D=new Uint8Array(new Uint32Array(T.buffer));An._onLog&&An._onLog("DCE: Extract grey cost: "+(Date.now()-C));const S=Date.now();return{canvas:null,data:D,region:null,sx:0,sy:0,width:c,height:_,timeSpent:S-t,timeStamp:S}}{let y=null;if(this.bSaveOriCanvas)y=document.createElement("canvas"),y.width=c,y.height=_,y.dbrCtx2d=y.getContext("2d");else{for(let D of this.videoCvses)if(D.width==c&&D.height==_){y=D;break}y||(globalThis.OffscreenCanvas?y=new OffscreenCanvas(c,_):(y=document.createElement("canvas"),y.width=c,y.height=_),y.dbrCtx2d=y.getContext("2d"),this.videoCvses.length>=this.maxVideoCvsLength&&(this.videoCvses=this.videoCvses.slice(1)),this.videoCvses.push(y))}const p=y.dbrCtx2d;h?p.drawImage(this._video,0,0):p.drawImage(this._video,f,v,l,I,0,0,c,_);let m=y.dbrCtx2d||y.getContext("2d");if(0===y.width||0===y.height)return null;let T=m.getImageData(0,0,y.width,y.height).data;const C=Date.now();return{data:T,canvas:y,region:n,sx:f,sy:v,width:l,height:I,timeSpent:C-t,timeStamp:C}}}getCurrentRegion(){let n;if(this._region)if(this._region instanceof Array){if(this.bChangeRegionIndexManually){if(this._regionIndex>=this._region.length)throw new Error("the 'regionIndex' should be less than the length of region array.")}else++this._regionIndex>=this._region.length&&(this._regionIndex=0);n=this._region[this._regionIndex]}else n=this._region;else n=null;return n}_fetchingLoop(n){if(this.bDestroyed)return void this.stopFetchingLoop();if(!this._isOpen||!this.isFetchingLoopStarted())return void this.stopFetchingLoop();if(this._video.paused)return An._onLog&&An._onLog("DCE: Video is paused. Ask in 1s."),this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId),void(this._frameLoopTimeoutId=setTimeout(()=>{this._fetchingLoop(!0)},1e3));const t=()=>{An._onLog&&An._onLog("DCE: start fetching a frame: "+Date.now());let a=this.getCurrentRegion(),o=this.getFrame(a);this._frameQueue&&this._frameQueue.length>=this._frameQueueMaxLength&&this._frameQueue.shift(),this._frameQueue.push(o),An._onLog&&An._onLog("DCE: finish fetching a frame: "+Date.now())},r=()=>{this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this._bufferRefreshInterval<=0||(this._frameLoopTimeoutId2=setTimeout(()=>{this.bDestroyed?this.stopFetchingLoop():this._isOpen&&this.isFetchingLoopStarted()?this._video.paused?this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId):(An._onLog&&An._onLog("DCE: second timeout executes: "+Date.now()),t(),r()):this.stopFetchingLoop()},this._bufferRefreshInterval))};n&&(this._frameQueue.length<this._frameQueueMaxLength?(t(),r()):this.alwaysRefreshBuffer&&t()),this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId),this._frameLoopTimeoutId=setTimeout(()=>{this._fetchingLoop(!0)},this._loopInterval)}startFetchingLoop(){if(this.bDestroyed)throw Error("The DCE instance has been destroyed.");if(this._assertOpen(),this._video.paused)throw Error("The video is paused.");this.isFetchingLoopStarted()||(this._bFetchingLoopStarted=!0,An._onLog&&An._onLog("start fetching loop: "+Date.now()),this._fetchingLoop(!0))}isFetchingLoopStarted(){return this._bFetchingLoopStarted}stopFetchingLoop(){this._bFetchingLoopStarted&&(An._onLog&&An._onLog("stop fetching loop: "+Date.now()),this._frameLoopTimeoutId&&clearTimeout(this._frameLoopTimeoutId),this._frameQueue.length=0,this._bFetchingLoopStarted=!1)}getFrameFromBuffer(n){return this._frameQueue&&this._frameQueue.length?n?n<this._frameQueue.length?(this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this._frameQueue.splice(n,1)[0]):void 0:(this._frameLoopTimeoutId2&&clearTimeout(this._frameLoopTimeoutId2),this._frameQueue.shift()):null}getQueueLength(){return this._frameQueue.length}}An._jsVersion="2.0.3",An._jsEditVersion="20210628",An._version="JS "+An._jsVersion+"."+An._jsEditVersion,An.browserInfo=function(){if(!Pu&&!Jd){var e={init:function(){this.browser=this.searchString(this.dataBrowser)||"unknownBrowser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",this.OS=this.searchString(this.dataOS)||"unknownOS","Linux"==this.OS&&-1!=navigator.userAgent.indexOf("Windows NT")&&(this.OS="HarmonyOS")},searchString:function(n){for(var t=0;t<n.length;t++){var r=n[t].string,a=n[t].prop;if(this.versionSearchString=n[t].versionSearch||n[t].identity,r){if(-1!=r.indexOf(n[t].subString))return n[t].identity}else if(a)return n[t].identity}},searchVersion:function(n){var t=n.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(n.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"OPR",identity:"OPR"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}],dataOS:[{string:navigator.userAgent,subString:"HarmonyOS",identity:"HarmonyOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};return e.init(),{browser:e.browser,version:e.version,OS:e.OS}}if(Jd)return{browser:"ssr",version:0,OS:"ssr"}}(),An._hasEngineResourceLoaded=!1,An._engineResourcePath=(()=>{if(Pu)return"";if(!Jd&&document.currentScript){let e=document.currentScript.src,n=e.indexOf("?");if(-1!=n)e=e.substring(0,n);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"})(),An._defaultUIElementURL="@engineResourcePath/dce.ui.html";let AN=(()=>{class e{static get browserInfo(){return An.browserInfo}static getVersion(){return An.getVersion()}static detectEnvironment(){return An.detectEnvironment()}static get engineResourcePath(){return An.engineResourcePath}static set engineResourcePath(t){An.engineResourcePath=t}static get _onLog(){return An._onLog}static set _onLog(t){An._onLog=t}}return e.CameraEnhancer=An,e})();function Vn(e,n,t,r){return new(t||(t=Promise))(function(a,o){function u(v){try{f(r.next(v))}catch(l){o(l)}}function s(v){try{f(r.throw(v))}catch(l){o(l)}}function f(v){var l;v.done?a(v.value):(l=v.value,l instanceof t?l:new t(function(I){I(l)})).then(u,s)}f((r=r.apply(e,n||[])).next())})}var So,Au,Qd,oa,e;(e=So||(So={}))[e.IPF_Binary=0]="IPF_Binary",e[e.IPF_BinaryInverted=1]="IPF_BinaryInverted",e[e.IPF_GrayScaled=2]="IPF_GrayScaled",e[e.IPF_NV21=3]="IPF_NV21",e[e.IPF_RGB_565=4]="IPF_RGB_565",e[e.IPF_RGB_555=5]="IPF_RGB_555",e[e.IPF_RGB_888=6]="IPF_RGB_888",e[e.IPF_ARGB_8888=7]="IPF_ARGB_8888",e[e.IPF_RGB_161616=8]="IPF_RGB_161616",e[e.IPF_ARGB_16161616=9]="IPF_ARGB_16161616",e[e.IPF_ABGR_8888=10]="IPF_ABGR_8888",e[e.IPF_ABGR_16161616=11]="IPF_ABGR_16161616",e[e.IPF_BGR_888=12]="IPF_BGR_888",function(e){e[e.DBR_SYSTEM_EXCEPTION=1]="DBR_SYSTEM_EXCEPTION",e[e.DBR_SUCCESS=0]="DBR_SUCCESS",e[e.DBR_UNKNOWN=-1e4]="DBR_UNKNOWN",e[e.DBR_NO_MEMORY=-10001]="DBR_NO_MEMORY",e[e.DBR_NULL_REFERENCE=-10002]="DBR_NULL_REFERENCE",e[e.DBR_LICENSE_INVALID=-10003]="DBR_LICENSE_INVALID",e[e.DBR_LICENSE_EXPIRED=-10004]="DBR_LICENSE_EXPIRED",e[e.DBR_FILE_NOT_FOUND=-10005]="DBR_FILE_NOT_FOUND",e[e.DBR_FILETYPE_NOT_SUPPORTED=-10006]="DBR_FILETYPE_NOT_SUPPORTED",e[e.DBR_BPP_NOT_SUPPORTED=-10007]="DBR_BPP_NOT_SUPPORTED",e[e.DBR_INDEX_INVALID=-10008]="DBR_INDEX_INVALID",e[e.DBR_BARCODE_FORMAT_INVALID=-10009]="DBR_BARCODE_FORMAT_INVALID",e[e.DBR_CUSTOM_REGION_INVALID=-10010]="DBR_CUSTOM_REGION_INVALID",e[e.DBR_MAX_BARCODE_NUMBER_INVALID=-10011]="DBR_MAX_BARCODE_NUMBER_INVALID",e[e.DBR_IMAGE_READ_FAILED=-10012]="DBR_IMAGE_READ_FAILED",e[e.DBR_TIFF_READ_FAILED=-10013]="DBR_TIFF_READ_FAILED",e[e.DBR_QR_LICENSE_INVALID=-10016]="DBR_QR_LICENSE_INVALID",e[e.DBR_1D_LICENSE_INVALID=-10017]="DBR_1D_LICENSE_INVALID",e[e.DBR_DIB_BUFFER_INVALID=-10018]="DBR_DIB_BUFFER_INVALID",e[e.DBR_PDF417_LICENSE_INVALID=-10019]="DBR_PDF417_LICENSE_INVALID",e[e.DBR_DATAMATRIX_LICENSE_INVALID=-10020]="DBR_DATAMATRIX_LICENSE_INVALID",e[e.DBR_PDF_READ_FAILED=-10021]="DBR_PDF_READ_FAILED",e[e.DBR_PDF_DLL_MISSING=-10022]="DBR_PDF_DLL_MISSING",e[e.DBR_PAGE_NUMBER_INVALID=-10023]="DBR_PAGE_NUMBER_INVALID",e[e.DBR_CUSTOM_SIZE_INVALID=-10024]="DBR_CUSTOM_SIZE_INVALID",e[e.DBR_CUSTOM_MODULESIZE_INVALID=-10025]="DBR_CUSTOM_MODULESIZE_INVALID",e[e.DBR_RECOGNITION_TIMEOUT=-10026]="DBR_RECOGNITION_TIMEOUT",e[e.DBR_JSON_PARSE_FAILED=-10030]="DBR_JSON_PARSE_FAILED",e[e.DBR_JSON_TYPE_INVALID=-10031]="DBR_JSON_TYPE_INVALID",e[e.DBR_JSON_KEY_INVALID=-10032]="DBR_JSON_KEY_INVALID",e[e.DBR_JSON_VALUE_INVALID=-10033]="DBR_JSON_VALUE_INVALID",e[e.DBR_JSON_NAME_KEY_MISSING=-10034]="DBR_JSON_NAME_KEY_MISSING",e[e.DBR_JSON_NAME_VALUE_DUPLICATED=-10035]="DBR_JSON_NAME_VALUE_DUPLICATED",e[e.DBR_TEMPLATE_NAME_INVALID=-10036]="DBR_TEMPLATE_NAME_INVALID",e[e.DBR_JSON_NAME_REFERENCE_INVALID=-10037]="DBR_JSON_NAME_REFERENCE_INVALID",e[e.DBR_PARAMETER_VALUE_INVALID=-10038]="DBR_PARAMETER_VALUE_INVALID",e[e.DBR_DOMAIN_NOT_MATCHED=-10039]="DBR_DOMAIN_NOT_MATCHED",e[e.DBR_RESERVEDINFO_NOT_MATCHED=-10040]="DBR_RESERVEDINFO_NOT_MATCHED",e[e.DBR_AZTEC_LICENSE_INVALID=-10041]="DBR_AZTEC_LICENSE_INVALID",e[e.DBR_LICENSE_DLL_MISSING=-10042]="DBR_LICENSE_DLL_MISSING",e[e.DBR_LICENSEKEY_NOT_MATCHED=-10043]="DBR_LICENSEKEY_NOT_MATCHED",e[e.DBR_REQUESTED_FAILED=-10044]="DBR_REQUESTED_FAILED",e[e.DBR_LICENSE_INIT_FAILED=-10045]="DBR_LICENSE_INIT_FAILED",e[e.DBR_PATCHCODE_LICENSE_INVALID=-10046]="DBR_PATCHCODE_LICENSE_INVALID",e[e.DBR_POSTALCODE_LICENSE_INVALID=-10047]="DBR_POSTALCODE_LICENSE_INVALID",e[e.DBR_DPM_LICENSE_INVALID=-10048]="DBR_DPM_LICENSE_INVALID",e[e.DBR_FRAME_DECODING_THREAD_EXISTS=-10049]="DBR_FRAME_DECODING_THREAD_EXISTS",e[e.DBR_STOP_DECODING_THREAD_FAILED=-10050]="DBR_STOP_DECODING_THREAD_FAILED",e[e.DBR_SET_MODE_ARGUMENT_ERROR=-10051]="DBR_SET_MODE_ARGUMENT_ERROR",e[e.DBR_LICENSE_CONTENT_INVALID=-10052]="DBR_LICENSE_CONTENT_INVALID",e[e.DBR_LICENSE_KEY_INVALID=-10053]="DBR_LICENSE_KEY_INVALID",e[e.DBR_LICENSE_DEVICE_RUNS_OUT=-10054]="DBR_LICENSE_DEVICE_RUNS_OUT",e[e.DBR_GET_MODE_ARGUMENT_ERROR=-10055]="DBR_GET_MODE_ARGUMENT_ERROR",e[e.DBR_IRT_LICENSE_INVALID=-10056]="DBR_IRT_LICENSE_INVALID",e[e.DBR_MAXICODE_LICENSE_INVALID=-10057]="DBR_MAXICODE_LICENSE_INVALID",e[e.DBR_GS1_DATABAR_LICENSE_INVALID=-10058]="DBR_GS1_DATABAR_LICENSE_INVALID",e[e.DBR_GS1_COMPOSITE_LICENSE_INVALID=-10059]="DBR_GS1_COMPOSITE_LICENSE_INVALID",e[e.DBR_DOTCODE_LICENSE_INVALID=-10061]="DBR_DOTCODE_LICENSE_INVALID",e[e.DMERR_NO_LICENSE=-2e4]="DMERR_NO_LICENSE",e[e.DMERR_LICENSE_SYNC_FAILED=-20003]="DMERR_LICENSE_SYNC_FAILED",e[e.DMERR_TRIAL_LICENSE=-20010]="DMERR_TRIAL_LICENSE",e[e.DMERR_FAILED_TO_REACH_LTS=-20200]="DMERR_FAILED_TO_REACH_LTS"}(Au||(Au={})),function(e){e[e.IMRDT_IMAGE=1]="IMRDT_IMAGE",e[e.IMRDT_CONTOUR=2]="IMRDT_CONTOUR",e[e.IMRDT_LINESEGMENT=4]="IMRDT_LINESEGMENT",e[e.IMRDT_LOCALIZATIONRESULT=8]="IMRDT_LOCALIZATIONRESULT",e[e.IMRDT_REGIONOFINTEREST=16]="IMRDT_REGIONOFINTEREST",e[e.IMRDT_QUADRILATERAL=32]="IMRDT_QUADRILATERAL"}(Qd||(Qd={})),function(e){e[e.BF_ALL=-31457281]="BF_ALL",e[e.BF_ONED=1050623]="BF_ONED",e[e.BF_GS1_DATABAR=260096]="BF_GS1_DATABAR",e[e.BF_CODE_39=1]="BF_CODE_39",e[e.BF_CODE_128=2]="BF_CODE_128",e[e.BF_CODE_93=4]="BF_CODE_93",e[e.BF_CODABAR=8]="BF_CODABAR",e[e.BF_ITF=16]="BF_ITF",e[e.BF_EAN_13=32]="BF_EAN_13",e[e.BF_EAN_8=64]="BF_EAN_8",e[e.BF_UPC_A=128]="BF_UPC_A",e[e.BF_UPC_E=256]="BF_UPC_E",e[e.BF_INDUSTRIAL_25=512]="BF_INDUSTRIAL_25",e[e.BF_CODE_39_EXTENDED=1024]="BF_CODE_39_EXTENDED",e[e.BF_GS1_DATABAR_OMNIDIRECTIONAL=2048]="BF_GS1_DATABAR_OMNIDIRECTIONAL",e[e.BF_GS1_DATABAR_TRUNCATED=4096]="BF_GS1_DATABAR_TRUNCATED",e[e.BF_GS1_DATABAR_STACKED=8192]="BF_GS1_DATABAR_STACKED",e[e.BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL=16384]="BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL",e[e.BF_GS1_DATABAR_EXPANDED=32768]="BF_GS1_DATABAR_EXPANDED",e[e.BF_GS1_DATABAR_EXPANDED_STACKED=65536]="BF_GS1_DATABAR_EXPANDED_STACKED",e[e.BF_GS1_DATABAR_LIMITED=131072]="BF_GS1_DATABAR_LIMITED",e[e.BF_PATCHCODE=262144]="BF_PATCHCODE",e[e.BF_PDF417=33554432]="BF_PDF417",e[e.BF_QR_CODE=67108864]="BF_QR_CODE",e[e.BF_DATAMATRIX=134217728]="BF_DATAMATRIX",e[e.BF_AZTEC=268435456]="BF_AZTEC",e[e.BF_MAXICODE=536870912]="BF_MAXICODE",e[e.BF_MICRO_QR=1073741824]="BF_MICRO_QR",e[e.BF_MICRO_PDF417=524288]="BF_MICRO_PDF417",e[e.BF_GS1_COMPOSITE=-2147483648]="BF_GS1_COMPOSITE",e[e.BF_MSI_CODE=1048576]="BF_MSI_CODE",e[e.BF_NULL=0]="BF_NULL"}(oa||(oa={})),"object"==typeof global&&global.process&&global.process.release&&global;const rs=typeof self>"u",qd=rs?{}:self;class yt{constructor(){this._canvasMaxWH="iPhone"==yt.browserInfo.OS||"Android"==yt.browserInfo.OS?2048:4096,this._instanceID=void 0,this.bSaveOriCanvas=!1,this.oriCanvas=null,this.bFilterRegionInJs=!0,this._region=null,this._timeStartDecode=null,this._timeEnterInnerDBR=null,this._timeGetMessage=null,this._bUseWebgl=!0,this.decodeRecords={},this.bDestroyed=!1,this._lastErrorCode=0,this._lastErrorString="",this._lastInnerDecodeDuration=0}static get version(){return this._version}static get license(){return this._license}static set license(n){if("unload"!=this._loadWasmStatus)throw new Error("`license` is not allowed to change after `createInstance` or `loadWasm` is called.");yt._license=n}static get productKeys(){return this._license}static set productKeys(n){yt.license=n}static get handshakeCode(){return this._license}static set handshakeCode(n){yt.license=n}static get organizationID(){return this._license}static set organizationID(n){yt.license=n}static set sessionPassword(n){if("unload"!=this._loadWasmStatus)throw new Error("`sessionPassword` is not allowed to change after `createInstance` or `loadWasm` is called.");yt._sessionPassword=n}static get sessionPassword(){return this._sessionPassword}static detectEnvironment(){return Vn(this,void 0,void 0,function*(){let n={wasm:typeof WebAssembly<"u"&&(typeof navigator>"u"||!(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&/\(.+\s11_2_([2-6]).*\)/.test(navigator.userAgent))),worker:!(typeof Worker>"u"),getUserMedia:!(typeof navigator>"u"||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),camera:!1,browser:this.browserInfo.browser,version:this.browserInfo.version,OS:this.browserInfo.OS};if(n.getUserMedia)try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(t=>{t.stop()}),n.camera=!0}catch{}return n})}static get engineResourcePath(){return this._engineResourcePath}static set engineResourcePath(n){if("unload"!=this._loadWasmStatus)throw new Error("`engineResourcePath` is not allowed to change after `createInstance` or `loadWasm` is called.");if(null==n&&(n="./"),rs)yt._engineResourcePath=n;else{let t=document.createElement("a");t.href=n,yt._engineResourcePath=t.href}this._engineResourcePath.endsWith("/")||(yt._engineResourcePath+="/")}static get licenseServer(){return this._licenseServer}static set licenseServer(n){if("unload"!=this._loadWasmStatus)throw new Error("`licenseServer` is not allowed to change after `createInstance` or `loadWasm` is called.");if(null==n)yt._licenseServer=[];else{n instanceof Array||(n=[n]);for(let t=0;t<n.length;++t){if(!rs){let r=document.createElement("a");r.href=n[t],n[t]=r.href}n[t].endsWith("/")||(n[t]+="/")}yt._licenseServer=n}}static get deviceFriendlyName(){return this._deviceFriendlyName}static set deviceFriendlyName(n){if("unload"!=this._loadWasmStatus)throw new Error("`deviceFriendlyName` is not allowed to change after `createInstance` or `loadWasm` is called.");yt._deviceFriendlyName=n||""}static get _bUseFullFeature(){return this.__bUseFullFeature}static set _bUseFullFeature(n){if("unload"!=this._loadWasmStatus)throw new Error("`_bUseFullFeature` is not allowed to change after `createInstance` or `loadWasm` is called.");yt.__bUseFullFeature=n}get ifSaveOriginalImageInACanvas(){return this.bSaveOriCanvas}set ifSaveOriginalImageInACanvas(n){this.bSaveOriCanvas=n}getOriginalImageInACanvas(){return this.oriCanvas}set region(n){this._region=n}get region(){return this._region}static isLoaded(){return"loadSuccess"==this._loadWasmStatus}isContextDestroyed(){return this.bDestroyed}static get lastErrorCode(){return this._lastErrorCode}static get lastErrorString(){return this._lastErrorString}get lastErrorCode(){return this._lastErrorCode}get lastErrorString(){return this._lastErrorString}static loadWasm(){return Vn(this,void 0,void 0,function*(){let n,t=yt._license,r=JSON.parse(JSON.stringify(yt._licenseServer)),a=yt._sessionPassword,o=null,u=null,s=0;if(t.startsWith("t")||t.startsWith("f"))s=0;else if(0===t.length||t.startsWith("P")||t.startsWith("L"))s=1;else{s=2;const f=t.indexOf(":");if(-1!=f&&(t=t.substring(f+1)),t.startsWith("DLS2")){let v=t.substring(4);v=atob(v);const l=JSON.parse(v);if(l.handshakeCode?t=l.handshakeCode:l.organizationID&&(t=l.organizationID),"number"==typeof t&&(t=JSON.stringify(t)),t||(t=""),0===r.length){let I=[];l.mainServerURL&&(I[0]=l.mainServerURL),l.standbyServerURL&&(I[1]=l.standbyServerURL),yt.licenseServer=I,r=yt.licenseServer}!a&&l.sessionPassword&&(a=l.sessionPassword),l.chargeWay&&(u=l.chargeWay),l.limitedLicenseModules&&(o=l.limitedLicenseModules)}}if(s&&(qd.crypto||(n="Please upgrade your browser to support online key."),qd.crypto.subtle||(n="Require https to use online key in this browser.")),n){if(1!==s)throw new Error(n);s=0,console.warn(n),yt._lastErrorCode=Au.DMERR_FAILED_TO_REACH_LTS,yt._lastErrorString=n}return 1===s&&(t="",console.warn("Automatically apply for a public trial license.")),yield new Promise((f,v)=>Vn(this,void 0,void 0,function*(){switch(yt._loadWasmStatus){case"unload":{yt._loadWasmStatus="loading";let l=yt.engineResourcePath+yt._workerName;yt.engineResourcePath.startsWith(location.origin)||(l=yield fetch(l).then(I=>I.blob()).then(I=>URL.createObjectURL(I))),yt._dbrWorker=new Worker(l),yt._dbrWorker.onerror=I=>{yt._loadWasmStatus="loadFail";let c=new Error(I.message);yt._loadWasmErr=c;for(let _ of yt._loadWasmCallbackArr)_(c);yt._loadWasmCallbackArr=[]},yt._dbrWorker.onmessage=I=>Vn(this,void 0,void 0,function*(){let c=I.data?I.data:I;switch(c.type){case"log":yt._onLog&&yt._onLog(c.message);break;case"load":{c.message&&(c.message=c.message.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamsoft-barcode-reader/#javascript)"));let _=!1;if(1===s&&(_=!0),c.success){yt._loadWasmStatus="loadSuccess",yt._version=c.version+"(JS "+yt._jsVersion+"."+yt._jsEditVersion+")",yt._onLog&&yt._onLog("load dbr worker success");for(let h of yt._loadWasmCallbackArr)h();yt._loadWasmCallbackArr=[],yt._dbrWorker.onerror=null,c.message&&console.warn(c.message)}else{let h=new Error(c.message);h.stack=c.stack+"\n"+h.stack,yt._loadWasmStatus="loadFail",yt._loadWasmErr=h;for(let y of yt._loadWasmCallbackArr)y(h);yt._loadWasmCallbackArr=[],_||111==c.ltsErrorCode&&-1!=c.message.toLowerCase().indexOf("trial license")&&(_=!0)}_&&yt.showDialog(c.success?"warn":"error",c.message);break}case"task":{let _=c.id,h=c.body;try{yt._taskCallbackMap.get(_)(h),yt._taskCallbackMap.delete(_)}catch(y){throw yt._taskCallbackMap.delete(_),y}break}default:yt._onLog&&yt._onLog(I)}}),yt._dbrWorker.postMessage({type:"loadWasm",bd:yt._bWasmDebug,engineResourcePath:yt.engineResourcePath,version:yt._jsVersion,brtk:!!s,bptk:1===s,lcs:t,dm:location.origin.startsWith("http")?location.origin:"https://localhost",bUseFullFeature:yt._bUseFullFeature,browserInfo:yt.browserInfo,deviceFriendlyName:yt.deviceFriendlyName,ls:r,sp:a,lm:o,cw:u})}case"loading":yt._loadWasmCallbackArr.push(l=>{l?v(l):f()});break;case"loadSuccess":f();break;case"loadFail":v(yt._loadWasmErr)}}))})}static showDialog(n,t){return Vn(this,void 0,void 0,function*(){if(!yt._bNeverShowDialog)try{let r=yield fetch(yt.engineResourcePath+"dls.license.dialog.html");if(!r.ok)throw Error("Get license dialog fail. Network Error: "+r.statusText);let a=yield r.text();if(!a.trim().startsWith("<"))throw Error("Get license dialog fail. Can't get valid HTMLElement.");let o=document.createElement("div");o.innerHTML=a;let u=[];for(let y=0;y<o.childElementCount;++y){let p=o.children[y];p instanceof HTMLStyleElement&&(u.push(p),document.head.append(p))}let s=1==o.childElementCount?o.children[0]:o;s.remove();let f,v,l,I,c,_=[s],h=s.children;for(let y of h)_.push(y);for(let y=0;y<_.length;++y)for(let p of _[y].children)_.push(p);for(let y of _)if(!f&&y.classList.contains("dls-license-mask"))f=y,y.addEventListener("click",p=>{if(y==p.target){s.remove();for(let m of u)m.remove()}});else if(!v&&y.classList.contains("dls-license-icon-close"))v=y,y.addEventListener("click",()=>{s.remove();for(let p of u)p.remove()});else if(!l&&y.classList.contains("dls-license-icon-error"))l=y,"error"!=n&&y.remove();else if(!I&&y.classList.contains("dls-license-icon-warn"))I=y,"warn"!=n&&y.remove();else if(!c&&y.classList.contains("dls-license-msg-content")){c=y;let p=t;for(;p;){let m=p.indexOf("["),T=p.indexOf("]",m),C=p.indexOf("(",T),D=p.indexOf(")",C);if(-1==m||-1==T||-1==C||-1==D){y.appendChild(new Text(p));break}m>0&&y.appendChild(new Text(p.substring(0,m)));let S=document.createElement("a"),M=p.substring(m+1,T);S.innerText=M;let G=p.substring(C+1,D);S.setAttribute("href",G),S.setAttribute("target","_blank"),y.appendChild(S),p=p.substring(D+1)}}document.body.appendChild(s)}catch(r){yt._onLog&&yt._onLog(r.message||r)}})}static createInstanceInWorker(n=!1){return Vn(this,void 0,void 0,function*(){return yield yt.loadWasm(),yield new Promise((t,r)=>{let a=yt._nextTaskID++;yt._taskCallbackMap.set(a,o=>{if(o.success)return t(o.instanceID);{let u=new Error(o.message);return u.stack=o.stack+"\n"+u.stack,r(u)}}),yt._dbrWorker.postMessage({type:"createInstance",id:a,bScanner:n})})})}static createInstance(){return Vn(this,void 0,void 0,function*(){let n=new yt;return n._instanceID=yield yt.createInstanceInWorker(),n})}decode(n){return Vn(this,void 0,void 0,function*(){yt._onLog&&yt._onLog("decode(source: any)"),yt._onLog&&(this._timeStartDecode=Date.now());{let t={};return!this.region||this.region instanceof Array||(t.region=JSON.parse(JSON.stringify(this.region))),n instanceof Blob?yield this._decode_Blob(n,t):n instanceof ArrayBuffer?yield this._decode_ArrayBuffer(n,t):n instanceof Uint8Array||n instanceof Uint8ClampedArray?yield this._decode_Uint8Array(n,t):n instanceof HTMLImageElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?yield this._decode_Image(n,t):n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?yield this._decode_Canvas(n,t):n instanceof HTMLVideoElement?yield this._decode_Video(n,t):"string"==typeof n?"data:image/"==n.substring(0,11)?yield this._decode_Base64(n,t):yield this._decode_Url(n,t):yield Promise.reject(TypeError("'_decode(source, config)': Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'."))}})}decodeBase64String(n){return Vn(this,void 0,void 0,function*(){let t={};return!this.region||this.region instanceof Array||(t.region=JSON.parse(JSON.stringify(this.region))),this._decode_Base64(n,t)})}decodeUrl(n){return Vn(this,void 0,void 0,function*(){let t={};return!this.region||this.region instanceof Array||(t.region=JSON.parse(JSON.stringify(this.region))),this._decode_Url(n,t)})}_decodeBuffer_Uint8Array(n,t,r,a,o,u){return Vn(this,void 0,void 0,function*(){return yield new Promise((s,f)=>{let v=yt._nextTaskID++;yt._taskCallbackMap.set(v,l=>{if(l.success){let I,c=yt._onLog?Date.now():0;yt._onLog&&yt._onLog("worker return result: "+c),this._lastInnerDecodeDuration=l.duration;try{I=this._handleRetJsonString(l.decodeReturn)}catch(_){return f(_)}if(yt._onLog){let _=Date.now();yt._onLog("DBR time get result: "+c),yt._onLog("Handle image cost: "+(this._timeEnterInnerDBR-this._timeStartDecode)),yt._onLog("DBR worker decode image cost: "+(c-this._timeEnterInnerDBR)),yt._onLog("DBR worker handle results: "+(_-c)),yt._onLog("Total decode image cost: "+(_-this._timeStartDecode))}return s(I)}{let I=new Error(l.message);return I.stack=l.stack+"\n"+I.stack,f(I)}}),this._timeEnterInnerDBR=Date.now(),yt._onLog&&yt._onLog("Send buffer to worker:"+this._timeEnterInnerDBR),yt._dbrWorker.postMessage({type:"decodeBuffer",id:v,instanceID:this._instanceID,body:{buffer:n,width:t,height:r,stride:a,format:o,config:u}},[n.buffer]),yt._onLog&&u&&u._timeEndGettingFrame&&yt._onLog("decode image delay: "+(this._timeEnterInnerDBR-u._timeEndGettingFrame))})})}_decodeBuffer_Blob(n,t,r,a,o,u){return Vn(this,void 0,void 0,function*(){yt._onLog&&yt._onLog("_decodeBuffer_Blob(buffer,width,height,stride,format)");const s=n.arrayBuffer?yield n.arrayBuffer():yield new Promise((f,v)=>{let l=new FileReader;l.readAsArrayBuffer(n),l.onload=()=>{f(l.result)},l.onerror=()=>{v(l.error)}});return yield this._decodeBuffer_Uint8Array(new Uint8Array(s),t,r,a,o,u)})}decodeBuffer(n,t,r,a,o,u){return Vn(this,void 0,void 0,function*(){let s;return yt._onLog&&yt._onLog("decodeBuffer(buffer,width,height,stride,format)"),yt._onLog&&(this._timeStartDecode=Date.now()),n instanceof Uint8Array||n instanceof Uint8ClampedArray?s=yield this._decodeBuffer_Uint8Array(n,t,r,a,o,u):n instanceof ArrayBuffer?s=yield this._decodeBuffer_Uint8Array(new Uint8Array(n),t,r,a,o,u):n instanceof Blob&&(s=yield this._decodeBuffer_Blob(n,t,r,a,o,u)),s})}_decodeFileInMemory_Uint8Array(n){return Vn(this,void 0,void 0,function*(){return yield new Promise((t,r)=>{let a=yt._nextTaskID++;yt._taskCallbackMap.set(a,o=>{if(o.success){let u;this._lastInnerDecodeDuration=o.duration;try{u=this._handleRetJsonString(o.decodeReturn)}catch(s){return r(s)}return t(u)}{let u=new Error(o.message);return u.stack=o.stack+"\n"+u.stack,r(u)}}),yt._dbrWorker.postMessage({type:"decodeFileInMemory",id:a,instanceID:this._instanceID,body:{bytes:n}})})})}getRuntimeSettings(){return Vn(this,void 0,void 0,function*(){return yield new Promise((n,t)=>{let r=yt._nextTaskID++;yt._taskCallbackMap.set(r,a=>{if(a.success){let o=JSON.parse(a.results);return null!=this.userDefinedRegion&&(o.region=JSON.parse(JSON.stringify(this.userDefinedRegion))),n(o)}{let o=new Error(a.message);return o.stack=a.stack+"\n"+o.stack,t(o)}}),yt._dbrWorker.postMessage({type:"getRuntimeSettings",id:r,instanceID:this._instanceID})})})}updateRuntimeSettings(n){return Vn(this,void 0,void 0,function*(){let t;if("string"==typeof n)if("speed"==n){let r=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=r.barcodeFormatIds,t.barcodeFormatIds_2=r.barcodeFormatIds_2,t.region=r.region,t.deblurLevel=3,t.expectedBarcodesCount=0,t.localizationModes=[2,0,0,0,0,0,0,0]}else if("balance"==n){let r=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=r.barcodeFormatIds,t.barcodeFormatIds_2=r.barcodeFormatIds_2,t.region=r.region,t.deblurLevel=5,t.expectedBarcodesCount=512,t.localizationModes=[2,16,0,0,0,0,0,0]}else if("coverage"==n){let r=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=r.barcodeFormatIds,t.barcodeFormatIds_2=r.barcodeFormatIds_2,t.region=r.region}else t=JSON.parse(n);else{if("object"!=typeof n)throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");if(t=JSON.parse(JSON.stringify(n)),t.region instanceof Array){let r=t.region;[r.regionLeft,r.regionTop,r.regionLeft,r.regionBottom,r.regionMeasuredByPercentage].some(a=>void 0!==a)&&(t.region={regionLeft:r.regionLeft||0,regionTop:r.regionTop||0,regionRight:r.regionRight||0,regionBottom:r.regionBottom||0,regionMeasuredByPercentage:r.regionMeasuredByPercentage||0})}}if(!yt._bUseFullFeature){if(0!=(t.barcodeFormatIds&~(oa.BF_ONED|oa.BF_QR_CODE|oa.BF_PDF417|oa.BF_DATAMATRIX))||0!=t.barcodeFormatIds_2)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(0!=t.intermediateResultTypes)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}if(this.bFilterRegionInJs){let r=t.region;if(r instanceof Array)throw Error("The `region` of type `Array` is only allowed in `BarcodeScanner`.");this.userDefinedRegion=JSON.parse(JSON.stringify(r)),this.region=(r.regionLeft||r.regionTop||r.regionRight||r.regionBottom||r.regionMeasuredByPercentage)&&(r.regionLeft||r.regionTop||100!=r.regionRight||100!=r.regionBottom||!r.regionMeasuredByPercentage)?r:null,t.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0}}else this.userDefinedRegion=null,this.region=null;return yield new Promise((r,a)=>{let o=yt._nextTaskID++;yt._taskCallbackMap.set(o,u=>{if(u.success){try{this._handleRetJsonString(u.updateReturn)}catch(s){a(s)}return r()}{let s=new Error(u.message);return s.stack=u.stack+"\n"+s.stack,a(s)}}),yt._dbrWorker.postMessage({type:"updateRuntimeSettings",id:o,instanceID:this._instanceID,body:{settings:JSON.stringify(t)}})})})}resetRuntimeSettings(){return Vn(this,void 0,void 0,function*(){return this.userDefinedRegion=null,this.region=null,yield new Promise((n,t)=>{let r=yt._nextTaskID++;yt._taskCallbackMap.set(r,a=>{if(a.success)return n();{let o=new Error(a.message);return o.stack=a.stack+"\n"+o.stack,t(o)}}),yt._dbrWorker.postMessage({type:"resetRuntimeSettings",id:r,instanceID:this._instanceID})})})}outputSettingsToString(){return Vn(this,void 0,void 0,function*(){if(!yt._bUseFullFeature)throw Error("outputSettingsToString() is not supported in the compact version. Please try the full-featured version.");return yield new Promise((n,t)=>{let r=yt._nextTaskID++;yt._taskCallbackMap.set(r,a=>{if(a.success)return n(a.results);{let o=new Error(a.message);return o.stack=a.stack+"\n"+o.stack,t(o)}}),yt._dbrWorker.postMessage({type:"outputSettingsToString",id:r,instanceID:this._instanceID})})})}initRuntimeSettingsWithString(n){return Vn(this,void 0,void 0,function*(){if(!yt._bUseFullFeature)throw Error("initRuntimeSettingsWithString() is not supported in the compact version. Please try the full-featured version.");if("string"==typeof n);else{if("object"!=typeof n)throw TypeError("'initRuntimeSettingstWithString(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");n=JSON.stringify(n)}return yield new Promise((t,r)=>{let a=yt._nextTaskID++;yt._taskCallbackMap.set(a,o=>{if(o.success){try{this._handleRetJsonString(o.initReturn)}catch(u){r(u)}return t()}{let u=new Error(o.message);return u.stack=o.stack+"\n"+u.stack,r(u)}}),yt._dbrWorker.postMessage({type:"initRuntimeSettingsWithString",id:a,instanceID:this._instanceID,body:{settings:n}})})})}_decode_Blob(n,t){return Vn(this,void 0,void 0,function*(){yt._onLog&&yt._onLog("_decode_Blob(blob: Blob)");let r=null,a=null;if(typeof createImageBitmap<"u")try{r=yield createImageBitmap(n)}catch{}var u;r||(a=yield(u=n,new Promise((s,f)=>{let v=URL.createObjectURL(u),l=new Image;l.dbrObjUrl=v,l.src=v,l.onload=()=>{s(l)},l.onerror=I=>{f(new Error("Can't convert blob to image : "+(I instanceof Event?I.type:I)))}})));let o=yield this._decode_Image(r||a,t);return r&&r.close(),o})}_decode_ArrayBuffer(n,t){return Vn(this,void 0,void 0,function*(){return yield this._decode_Blob(new Blob([n]),t)})}_decode_Uint8Array(n,t){return Vn(this,void 0,void 0,function*(){return yield this._decode_Blob(new Blob([n]),t)})}_decode_Image(n,t){return Vn(this,void 0,void 0,function*(){yt._onLog&&yt._onLog("_decode_Image(image: HTMLImageElement|ImageBitmap)"),t=t||{};let r,a,o,u,s=n instanceof HTMLImageElement?n.naturalWidth:n.width,f=n instanceof HTMLImageElement?n.naturalHeight:n.height,v=t.region;if(v){let h,y,p,m;v.regionMeasuredByPercentage?(h=v.regionLeft*s/100,y=v.regionTop*f/100,p=v.regionRight*s/100,m=v.regionBottom*f/100):(h=v.regionLeft,y=v.regionTop,p=v.regionRight,m=v.regionBottom),r=h,a=y,s=Math.round(p-h),f=Math.round(m-y)}else r=0,a=0;const l=Math.max(s,f);if(l>this._canvasMaxWH){const h=this._canvasMaxWH/l;s>f?(o=this._canvasMaxWH,u=Math.round(f*h)):(o=Math.round(s*h),u=this._canvasMaxWH)}else o=s,u=f;let I,c;!this.bSaveOriCanvas&&qd.OffscreenCanvas?I=new OffscreenCanvas(o,u):(I=document.createElement("canvas"),I.width=o,I.height=u),I.getContext("2d").drawImage(n,r,a,s,f,0,0,o,u),n.dbrObjUrl&&URL.revokeObjectURL(n.dbrObjUrl),v?(c=JSON.parse(JSON.stringify(t)),delete c.region):c=t;let _=yield this._decode_Canvas(I,c);return yt.fixResultLocationWhenFilterRegionInJs(v,_,r,a,s,f,o,u),_})}_decode_Canvas(n,t){return Vn(this,void 0,void 0,function*(){if(yt._onLog&&yt._onLog("_decode_Canvas(canvas:HTMLCanvasElement)"),n.crossOrigin&&"anonymous"!=n.crossOrigin)throw"cors";(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=n);let r=(n.dbrCtx2d||n.getContext("2d")).getImageData(0,0,n.width,n.height).data;return yield this._decodeBuffer_Uint8Array(r,n.width,n.height,4*n.width,So.IPF_ABGR_8888,t)})}_decode_Video(n,t){return Vn(this,void 0,void 0,function*(){if(yt._onLog&&yt._onLog("_decode_Video(video)"),!(n instanceof HTMLVideoElement))throw TypeError("'_decode_Video(video [, config] )': Type of 'video' should be 'HTMLVideoElement'.");if(n.crossOrigin&&"anonymous"!=n.crossOrigin)throw"cors";let r,a,o,u,s=n.videoWidth,f=n.videoHeight,v=(t=t||{}).region;if(v){let h,y,p,m;v.regionMeasuredByPercentage?(h=v.regionLeft*s/100,y=v.regionTop*f/100,p=v.regionRight*s/100,m=v.regionBottom*f/100):(h=v.regionLeft,y=v.regionTop,p=v.regionRight,m=v.regionBottom),r=h,a=y,s=Math.round(p-h),f=Math.round(m-y)}else r=0,a=0;const l=Math.max(s,f);if(l>this._canvasMaxWH){const h=this._canvasMaxWH/l;s>f?(o=this._canvasMaxWH,u=Math.round(f*h)):(o=Math.round(s*h),u=this._canvasMaxWH)}else o=s,u=f;let c,I=null;!this.bSaveOriCanvas&&qd.OffscreenCanvas?I=new OffscreenCanvas(o,u):(I=document.createElement("canvas"),I.width=o,I.height=u),(I.dbrCtx2d=I.getContext("2d")).drawImage(n,r,a,s,f,0,0,o,u),v?(c=JSON.parse(JSON.stringify(t)),delete c.region):c=t;let _=yield this._decode_Canvas(I,t);return v&&yt.fixResultLocationWhenFilterRegionInJs(v,_,r,a,s,f,o,u),_})}_decode_Base64(n,t){return Vn(this,void 0,void 0,function*(){if(yt._onLog&&yt._onLog("_decode_Base64(base64Str)"),"string"!=typeof n)return Promise.reject("'_decode_Base64(base64Str, config)': Type of 'base64Str' should be 'string'.");"data:image/"==n.substring(0,11)&&(n=n.substring(n.indexOf(",")+1));{let r=atob(n),a=r.length,o=new Uint8Array(a);for(;a--;)o[a]=r.charCodeAt(a);return yield this._decode_Blob(new Blob([o]),t)}})}_decode_Url(n,t){return Vn(this,void 0,void 0,function*(){if(yt._onLog&&yt._onLog("_decode_Url(url)"),"string"!=typeof n)throw TypeError("'_decode_Url(url, config)': Type of 'url' should be 'string'.");{let r=yield new Promise((a,o)=>{let u=new XMLHttpRequest;u.open("GET",n,!0),u.responseType="blob",u.send(),u.onloadend=()=>Vn(this,void 0,void 0,function*(){a(u.response)}),u.onerror=()=>{o(new Error("Network Error: "+u.statusText))}});return yield this._decode_Blob(r,t)}})}_decode_FilePath(n,t){return Vn(this,void 0,void 0,function*(){throw yt._onLog&&yt._onLog("_decode_FilePath(path)"),Error("'_decode_FilePath(path, config)': The method is only supported in node environment.")})}static fixResultLocationWhenFilterRegionInJs(n,t,r,a,o,u,s,f){if(n&&t.length>0)for(let v of t){let l=v.localizationResult;2==l.resultCoordinateType&&(l.x1*=.01*s,l.x2*=.01*s,l.x3*=.01*s,l.x4*=.01*s,l.y1*=.01*f,l.y2*=.01*f,l.y3*=.01*f,l.y4*=.01*f);let I=s/o,c=f/u;l.x1=l.x1/I+r,l.x2=l.x2/I+r,l.x3=l.x3/I+r,l.x4=l.x4/I+r,l.y1=l.y1/c+a,l.y2=l.y2/c+a,l.y3=l.y3/c+a,l.y4=l.y4/c+a,2==l.resultCoordinateType&&(l.x1*=100/o,l.x2*=100/o,l.x3*=100/o,l.x4*=100/o,l.y1*=100/u,l.y2*=100/u,l.y3*=100/u,l.y4*=100/u)}}static BarcodeReaderException(n,t){let r,a=Au.DBR_UNKNOWN;return"number"==typeof n?(a=n,r=new Error(t)):r=new Error(n),r.code=a,r}_handleRetJsonString(n){let t=Au;if(n.textResults){for(let r=0;r<n.textResults.length;r++){let a=n.textResults[r];try{let o=a.barcodeText,u="";for(let s=0;s<o.length;s++)u+=String.fromCharCode(o[s]);try{a.barcodeText=decodeURIComponent(escape(u))}catch{a.barcodeText=u}}catch{a.barcodeText=""}if(null!=a.exception){yt._setWarnnedEx.has(a.exception)||(yt._setWarnnedEx.add(a.exception),console.warn(a.exception));let o={};a.exception.split(";").forEach(u=>{let s=u.indexOf(":");o[u.substring(0,s)]=u.substring(s+1)}),a.exception=o}}return this.decodeRecords=n.decodeRecords?n.decodeRecords:{},this._lastErrorCode=n.exception,this._lastErrorString=n.description,n.exception&&!yt._setWarnnedEx.has(n.description)&&(yt._setWarnnedEx.add(n.description),console.warn(n.description)),n.textResults}if(n.exception==t.DBR_SUCCESS)return n.data;throw yt.BarcodeReaderException(n.exception,n.description)}setModeArgument(n,t,r,a){return Vn(this,void 0,void 0,function*(){return yield new Promise((o,u)=>{let s=yt._nextTaskID++;yt._taskCallbackMap.set(s,f=>{if(f.success){try{this._handleRetJsonString(f.setReturn)}catch(v){return u(v)}return o()}{let v=new Error(f.message);return v.stack=f.stack+"\n"+v.stack,u(v)}}),yt._dbrWorker.postMessage({type:"setModeArgument",id:s,instanceID:this._instanceID,body:{modeName:n,index:t,argumentName:r,argumentValue:a}})})})}getModeArgument(n,t,r){return Vn(this,void 0,void 0,function*(){return yield new Promise((a,o)=>{let u=yt._nextTaskID++;yt._taskCallbackMap.set(u,s=>{if(s.success){let f;try{f=this._handleRetJsonString(s.getReturn)}catch(v){return o(v)}return a(f)}{let f=new Error(s.message);return f.stack=s.stack+"\n"+f.stack,o(f)}}),yt._dbrWorker.postMessage({type:"getModeArgument",id:u,instanceID:this._instanceID,body:{modeName:n,index:t,argumentName:r}})})})}getIntermediateResults(){return Vn(this,void 0,void 0,function*(){return yield new Promise((n,t)=>{let r=yt._nextTaskID++;yt._taskCallbackMap.set(r,a=>{if(a.success)return n(a.results);{let o=new Error(a.message);return o.stack=a.stack+"\n"+o.stack,t(o)}}),yt._dbrWorker.postMessage({type:"getIntermediateResults",id:r,instanceID:this._instanceID})})})}getIntermediateCanvas(){return Vn(this,void 0,void 0,function*(){let n=yield this.getIntermediateResults(),t=[];for(let r of n)if(r.dataType==Qd.IMRDT_IMAGE)for(let a of r.results){const o=a.bytes;let u;switch(yt._onLog&&yt._onLog(" "+o.length+" "+o.byteLength+" "+a.width+" "+a.height+" "+a.stride+" "+a.format),a.format){case So.IPF_ABGR_8888:u=new Uint8ClampedArray(o);break;case So.IPF_RGB_888:{const v=o.length/3;u=new Uint8ClampedArray(4*v);for(let l=0;l<v;++l)u[4*l]=o[3*l+2],u[4*l+1]=o[3*l+1],u[4*l+2]=o[3*l],u[4*l+3]=255;break}case So.IPF_GrayScaled:{const v=o.length;u=new Uint8ClampedArray(4*v);for(let l=0;l<v;l++)u[4*l]=u[4*l+1]=u[4*l+2]=o[l],u[4*l+3]=255;break}case So.IPF_Binary:case So.IPF_BinaryInverted:{a.width=8*a.stride,a.height=o.length/a.stride;const v=o.length;u=new Uint8ClampedArray(8*v*4);for(let l=0;l<v;l++){let I=o[l];for(let c=0;c<8;++c)u[4*(8*l+c)]=u[4*(8*l+c)+1]=u[4*(8*l+c)+2]=(128&I)/128*255,u[4*(8*l+c)+3]=255,I<<=1}break}default:console.warn("unknow intermediate image",a)}if(!u)continue;let s=new ImageData(u,a.width,a.height),f=document.createElement("canvas");f.width=a.width,f.height=a.height,f.getContext("2d").putImageData(s,0,0),t.push(f)}return t})}destroy(){return this.destroyContext()}destroyContext(){if(yt._onLog&&yt._onLog("destroyContext()"),!this.bDestroyed)return this.bDestroyed=!0,new Promise((n,t)=>{let r=yt._nextTaskID++;yt._taskCallbackMap.set(r,a=>{if(a.success)return n();{let o=new Error(a.message);return o.stack=a.stack+"\n"+o.stack,t(o)}}),yt._dbrWorker.postMessage({type:"destroyContext",id:r,instanceID:this._instanceID})})}}yt._jsVersion="8.8.7",yt._jsEditVersion="20220125",yt._version="loading...(JS "+yt._jsVersion+"."+yt._jsEditVersion+")",yt._license=!rs&&document.currentScript&&(document.currentScript.getAttribute("data-license")||document.currentScript.getAttribute("data-productKeys")||document.currentScript.getAttribute("data-licenseKey")||document.currentScript.getAttribute("data-handshakeCode")||document.currentScript.getAttribute("data-organizationID"))||"",yt._sessionPassword=!rs&&document.currentScript&&document.currentScript.getAttribute("data-sessionPassword")||"",yt.browserInfo=function(){if(!rs){var e={init:function(){this.browser=this.searchString(this.dataBrowser)||"unknownBrowser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",this.OS=this.searchString(this.dataOS)||"unknownOS","Linux"==this.OS&&-1!=navigator.userAgent.indexOf("Windows NT")&&(this.OS="HarmonyOS")},searchString:function(n){for(var t=0;t<n.length;t++){var r=n[t].string,a=n[t].prop;if(this.versionSearchString=n[t].versionSearch||n[t].identity,r){if(-1!=r.indexOf(n[t].subString))return n[t].identity}else if(a)return n[t].identity}},searchVersion:function(n){var t=n.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(n.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"OPR",identity:"OPR"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}],dataOS:[{string:navigator.userAgent,subString:"HarmonyOS",identity:"HarmonyOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};return e.init(),{browser:e.browser,version:e.version,OS:e.OS}}if(rs)return{browser:"ssr",version:0,OS:"ssr"}}(),yt._workerName="dbr-"+yt._jsVersion+".worker.js",yt._engineResourcePath=(()=>{if(!rs&&document.currentScript){let e=document.currentScript.src,n=e.indexOf("?");if(-1!=n)e=e.substring(0,n);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"})(),yt._licenseServer=[],yt._deviceFriendlyName="",yt._isShowRelDecodeTimeInResults=!1,yt._bWasmDebug=!1,yt._bNeverShowDialog=!1,yt.__bUseFullFeature=!0,yt._nextTaskID=0,yt._taskCallbackMap=new Map,yt._loadWasmStatus="unload",yt._loadWasmCallbackArr=[],yt._lastErrorCode=0,yt._lastErrorString="",yt._setWarnnedEx=new Set,yt._loadWasmErr=null,"object"==typeof global&&global.process&&global.process.release&&global;class Ji extends yt{constructor(){super(),this._clickIptSingleFrameMode=()=>{},this.intervalTime=0,this.bSaveOriCanvas=!1,this._intervalGetVideoFrame=0,this.array_getFrameTimeCost=[],this.array_decodeFrameTimeCost=[],this._indexCurrentDecodingFrame=0,this._bPauseScan=!1,this._intervalDetectVideoPause=1e3,this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._selCam=null,this._selRsl=null,this._btnClose=null,this._soundOnSuccessfullRead=new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"),this.bPlaySoundOnSuccessfulRead=!1,this.bVibrateOnSuccessfulRead=!1,this.vibrateDuration=300,this.regionMaskFillStyle="rgba(0,0,0,0.5)",this.regionMaskStrokeStyle="rgb(254,142,20)",this.regionMaskLineWidth=2,this.barcodeFillStyle="rgba(254,180,32,0.3)",this.barcodeStrokeStyle="rgba(254,180,32,0.9)",this.barcodeLineWidth=1,this.beingLazyDrawRegionsults=!1,this.dce=null,this._onCameraSelChange=()=>{this._divScanLight&&(this._divScanLight.style.display="none"),this._drawRegionsults(),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this._onResolutionSelChange=()=>{this._divScanLight&&(this._divScanLight.style.display="none"),this._drawRegionsults(),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0},this._onCloseBtnClick=()=>{this.hide()}}static get defaultUIElementURL(){var n;return null===(n=Ji._defaultUIElementURL)||void 0===n?void 0:n.replace("@engineResourcePath/",yt.engineResourcePath)}static set defaultUIElementURL(n){Ji._defaultUIElementURL=n}getUIElement(){return this.dce.getUIElement()}setUIElement(n){return Vn(this,void 0,void 0,function*(){yield this.dce.setUIElement(n)})}get singleFrameMode(){return this.dce.singleFrameMode}set singleFrameMode(n){this.dce.singleFrameMode=n,n&&Vn(this,void 0,void 0,function*(){let t=yield this.getScanSettings();t.oneDTrustFrameCount=1,yield this.updateScanSettings(t)})}get ifSaveOriginalImageInACanvas(){return this.bSaveOriCanvas}set ifSaveOriginalImageInACanvas(n){this.bSaveOriCanvas=n,this.dce&&(this.dce.ifSaveOriginalImageInACanvas=n)}_assertOpen(){if(!this.dce.isOpen())throw Error("The scanner is not open.")}get soundOnSuccessfullRead(){return this._soundOnSuccessfullRead}set soundOnSuccessfullRead(n){this._soundOnSuccessfullRead=n instanceof HTMLAudioElement?n:new Audio(n)}get whenToPlaySoundforSuccessfulRead(){return!0===this.bPlaySoundOnSuccessfulRead?"frame":this.bPlaySoundOnSuccessfulRead?this.bPlaySoundOnSuccessfulRead:"never"}set whenToPlaySoundforSuccessfulRead(n){this.bPlaySoundOnSuccessfulRead="never"!==n&&n}get whenToVibrateforSuccessfulRead(){return!0===this.bVibrateOnSuccessfulRead?"frame":this.bVibrateOnSuccessfulRead?this.bVibrateOnSuccessfulRead:"never"}set whenToVibrateforSuccessfulRead(n){this.bVibrateOnSuccessfulRead="never"!==n&&n}set region(n){this._region=n,this.dce&&(this.dce.region=n),this.singleFrameMode||(this.beingLazyDrawRegionsults=!0,setTimeout(()=>{this.beingLazyDrawRegionsults&&this._drawRegionsults()},500)),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}get region(){return this._region}createDCEInstance(){return Vn(this,void 0,void 0,function*(){this.dce||(yt._onLog&&yt._onLog("createDCEInstance()"),An.defaultUIElementURL=null,this.dce=yield An.createInstance(),this.dce.bChangeRegionIndexManually=!0,this.dce.regionIndex=0,this.dce.bufferRefreshInterval=200,this.dce.alwaysRefreshBuffer=!1,this.dce.ifSaveOriginalImageInACanvas=!1,this.dce.onSingleFrameAcquired=n=>Vn(this,void 0,void 0,function*(){let t=yield this.decode(n);yield this.clearMapDecodeRecord();for(let r of t)delete r.bUnduplicated;if(this._drawRegionsults(t),this.onFrameRead&&this.isOpen()&&!this._bPauseScan&&this.onFrameRead(t),this.onUniqueRead&&this.isOpen()&&!this._bPauseScan)for(let r of t)this.onUniqueRead(r.barcodeText,r)}),this._clickIptSingleFrameMode=this.dce._clickIptSingleFrameMode)})}static createInstance(n){return Vn(this,void 0,void 0,function*(){let t=new Ji;yield t.createDCEInstance(),t._instanceID=yield Ji.createInstanceInWorker(!0),"string"==typeof n&&(n=JSON.parse(n));for(let r in n)t[r]=n[r];return yield t.setUIElement(Ji.defaultUIElementURL),t.singleFrameMode&&console.warn("The `navigator.mediaDevices.getUserMedia` is unavailable. automatically change to `singleFrameMode`."),t.singleFrameMode||(yield t.updateRuntimeSettings("single")),t})}decode(n){return super.decode(n)}decodeBase64String(n){return super.decodeBase64String(n)}decodeUrl(n){return super.decodeUrl(n)}decodeBuffer(n,t,r,a,o,u){return super.decodeBuffer(n,t,r,a,o,u)}decodeCurrentFrame(n){return Vn(this,void 0,void 0,function*(){this._assertOpen();let t=null;n&&n.region&&(t=n.region);let r=this.dce.getFrame(t);if(r&&null===r.canvas){let{data:a,width:o,height:u}=r;return yield this._decodeBuffer_Uint8Array(a,o,u,o,So.IPF_GrayScaled)}if(r&&r.canvas){let{data:a,canvas:o,region:u,sx:s,sy:f,sWidth:v,sHeight:l}=r;(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=o);let I=yield this._decodeBuffer_Uint8Array(a,o.width,o.height,4*o.width,So.IPF_ABGR_8888);return yt.fixResultLocationWhenFilterRegionInJs(u,I,s,f,v,l,o.width,o.height),I}})}clearMapDecodeRecord(){return Vn(this,void 0,void 0,function*(){return yield new Promise((n,t)=>{let r=yt._nextTaskID++;yt._taskCallbackMap.set(r,a=>{if(a.success)return n();{let o=new Error(a.message);return o.stack=a.stack+"\n"+o.stack,t(o)}}),yt._dbrWorker.postMessage({type:"clearMapDecodeRecord",id:r,instanceID:this._instanceID})})})}static isRegionSinglePreset(n){return JSON.stringify(n)==JSON.stringify(Ji.singlePresetRegion)}static isRegionNormalPreset(n){return 0==n.regionLeft&&0==n.regionTop&&0==n.regionRight&&0==n.regionBottom&&0==n.regionMeasuredByPercentage}updateRuntimeSettings(n){return Vn(this,void 0,void 0,function*(){let t;if("string"==typeof n)if("speed"==n){let r=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=r.barcodeFormatIds,t.barcodeFormatIds_2=r.barcodeFormatIds_2,Ji.isRegionSinglePreset(r.region)||(t.region=r.region)}else if("balance"==n){let r=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=r.barcodeFormatIds,t.barcodeFormatIds_2=r.barcodeFormatIds_2,Ji.isRegionSinglePreset(r.region)||(t.region=r.region),t.deblurLevel=3,t.expectedBarcodesCount=512,t.localizationModes=[2,16,0,0,0,0,0,0],t.timeout=1e5}else if("coverage"==n){let r=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=r.barcodeFormatIds,t.barcodeFormatIds_2=r.barcodeFormatIds_2,Ji.isRegionSinglePreset(r.region)||(t.region=r.region),t.deblurLevel=5,t.expectedBarcodesCount=512,t.scaleDownThreshold=1e5,t.localizationModes=[2,16,4,8,0,0,0,0],t.timeout=1e5}else if("single"==n){let r=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),t=yield this.getRuntimeSettings(),t.barcodeFormatIds=r.barcodeFormatIds,t.barcodeFormatIds_2=r.barcodeFormatIds_2,t.region=Ji.isRegionNormalPreset(r.region)?JSON.parse(JSON.stringify(Ji.singlePresetRegion)):r.region,t.expectedBarcodesCount=1,t.localizationModes=[16,2,0,0,0,0,0,0],t.barcodeZoneMinDistanceToImageBorders=0}else t=JSON.parse(n);else{if("object"!=typeof n)throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'string' or 'PlainObject'.");if(t=JSON.parse(JSON.stringify(n)),t.region instanceof Array){let r=n.region;[r.regionLeft,r.regionTop,r.regionLeft,r.regionBottom,r.regionMeasuredByPercentage].some(a=>void 0!==a)&&(t.region={regionLeft:r.regionLeft||0,regionTop:r.regionTop||0,regionRight:r.regionRight||0,regionBottom:r.regionBottom||0,regionMeasuredByPercentage:r.regionMeasuredByPercentage||0})}}if(!yt._bUseFullFeature){if(0!=(t.barcodeFormatIds&~(oa.BF_ONED|oa.BF_QR_CODE|oa.BF_PDF417|oa.BF_DATAMATRIX))||0!=t.barcodeFormatIds_2)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(0!=t.intermediateResultTypes)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}{let r=t.region;if(this.userDefinedRegion=this.bFilterRegionInJs?JSON.parse(JSON.stringify(r)):null,r instanceof Array)if(r.length){for(let a=0;a<r.length;++a){let o=r[a];o&&((o.regionLeft||o.regionTop||o.regionRight||o.regionBottom||o.regionMeasuredByPercentage)&&(o.regionLeft||o.regionTop||100!=o.regionRight||100!=o.regionBottom||!o.regionMeasuredByPercentage)||(r[a]=null))}this.region=r}else this.region=null;else this.region=(r.regionLeft||r.regionTop||r.regionRight||r.regionBottom||r.regionMeasuredByPercentage)&&(r.regionLeft||r.regionTop||100!=r.regionRight||100!=r.regionBottom||!r.regionMeasuredByPercentage)?r:null;this.bFilterRegionInJs&&(t.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0})}yield new Promise((r,a)=>{let o=yt._nextTaskID++;yt._taskCallbackMap.set(o,u=>{if(u.success){try{this._handleRetJsonString(u.updateReturn)}catch(s){a(s)}return r()}{let s=new Error(u.message);return s.stack=u.stack+"\n"+s.stack,a(s)}}),yt._dbrWorker.postMessage({type:"updateRuntimeSettings",id:o,instanceID:this._instanceID,body:{settings:JSON.stringify(t)}})}),"single"==n&&(yield this.setModeArgument("BinarizationModes",0,"EnableFillBinaryVacancy","0"),yield this.setModeArgument("LocalizationModes",0,"ScanDirection","2"),yield this.setModeArgument("BinarizationModes",0,"BlockSizeX","71"),yield this.setModeArgument("BinarizationModes",0,"BlockSizeY","71"))})}_bindUI(){let n=this.getUIElement();if(!n)throw new Error("Need to define `UIElement` before opening.");let t=[n];for(let r=0;r<t.length;++r)for(let a of t[r].children)t.push(a);for(let r of t)this.dce._video||!r.classList.contains("dce-video")&&!r.classList.contains("dbrScanner-video")?this.dce._bgLoading||!r.classList.contains("dce-bg-loading")&&!r.classList.contains("dbrScanner-bg-loading")?this.dce._bgCamera||!r.classList.contains("dce-bg-camera")&&!r.classList.contains("dbrScanner-bg-camera")?!this._cvsDrawArea&&r.classList.contains("dbrScanner-cvs-drawarea")?this._cvsDrawArea=r:!this._divScanArea&&r.classList.contains("dbrScanner-cvs-scanarea")?this._divScanArea=r:!this._divScanLight&&r.classList.contains("dbrScanner-scanlight")?this._divScanLight=r:this.dce._selCam||!r.classList.contains("dce-sel-camera")&&!r.classList.contains("dbrScanner-sel-camera")?!this.dce._selRsl&&r.classList.contains("dbrScanner-sel-resolution")?(this.dce._selRsl=r,this.dce._selRsl.options.length||(this.dce._selRsl.innerHTML=[this.dce._optGotRsl?"":'<option class="dbrScanner-opt-gotResolution" value="got"></option>','<option data-width="1920" data-height="1080">ask 1920 x 1080</option>','<option data-width="1280" data-height="720">ask 1280 x 720</option>','<option data-width="640" data-height="480">ask 640 x 480</option>'].join(""),this.dce._optGotRsl=this.dce._optGotRsl||this.dce._selRsl.options[0])):this.dce._optGotRsl||!r.classList.contains("dce-opt-gotResolution")&&!r.classList.contains("dbrScanner-opt-gotResolution")?this.dce._btnClose||!r.classList.contains("dce-btn-close")&&!r.classList.contains("dbrScanner-btn-close")?this.dce._video||!r.classList.contains("dce-existingVideo")&&!r.classList.contains("dbrScanner-existingVideo")||(this.dce._video=r,this.dce._video.setAttribute("playsinline","true"),this.dce.singleFrameMode=!1):this.dce._btnClose=r:this.dce._optGotRsl=r:this.dce._selCam=r:this.dce._bgCamera=r:this.dce._bgLoading=r:(this.dce._video=r,this.dce._video.setAttribute("playsinline","true"));if(this.dce._bindUI(),this._selCam=this.dce._selCam,this._selRsl=this.dce._selRsl,this._btnClose=this.dce._btnClose,this.singleFrameMode&&(this._cvsDrawArea&&(this._cvsDrawArea.addEventListener("click",this._clickIptSingleFrameMode),this._cvsDrawArea.style.cursor="pointer",this._cvsDrawArea.setAttribute("title","Take a photo")),this._divScanArea&&(this._divScanArea.addEventListener("click",this._clickIptSingleFrameMode),this._divScanArea.style.cursor="pointer",this._divScanArea.setAttribute("title","Take a photo"))),this._selCam&&this._selCam.addEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.addEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.addEventListener("click",this._onCloseBtnClick),!this.dce.video)throw this._unbindUI(),Error("Can not find HTMLVideoElement with class `dbrScanner-video`.")}_unbindUI(){this._clearRegionsults(),this.singleFrameMode&&(this._cvsDrawArea&&(this._cvsDrawArea.removeEventListener("click",this._clickIptSingleFrameMode),this._cvsDrawArea.style.cursor="",this._cvsDrawArea.removeAttribute("title")),this._divScanArea&&(this._divScanArea.removeEventListener("click",this._clickIptSingleFrameMode),this._divScanArea.style.cursor="",this._divScanArea.removeAttribute("title"))),this._selCam&&this._selCam.removeEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.removeEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.removeEventListener("click",this._onCloseBtnClick),this.dce._unbindUI(),this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._selCam=null,this._selRsl=null,this._btnClose=null}set onPlayed(n){this.dce.onPlayed=n}get onPlayed(){return this.dce.onPlayed}get onUnduplicatedRead(){return this.onUniqueRead}set onUnduplicatedRead(n){this.onUniqueRead=n}getAllCameras(){return Vn(this,void 0,void 0,function*(){return this.dce.getAllCameras()})}getCurrentCamera(){return Vn(this,void 0,void 0,function*(){return this.dce.getSelectedCamera()})}setCurrentCamera(n){return Vn(this,void 0,void 0,function*(){return this.dce.selectCamera(n)})}getResolution(){return this.dce.getResolution()}setResolution(n,t){return Vn(this,void 0,void 0,function*(){return this.dce.setResolution(n,t)})}getScanSettings(){return Vn(this,void 0,void 0,function*(){return yield new Promise((n,t)=>{let r=yt._nextTaskID++;yt._taskCallbackMap.set(r,a=>{if(a.success){let o=a.results;return o.intervalTime=this.intervalTime,n(o)}{let o=new Error(a.message);return o.stack+="\n"+a.stack,t(o)}}),yt._dbrWorker.postMessage({type:"getScanSettings",id:r,instanceID:this._instanceID})})})}updateScanSettings(n){return Vn(this,void 0,void 0,function*(){return this.intervalTime=n.intervalTime,yield new Promise((t,r)=>{let a=yt._nextTaskID++;yt._taskCallbackMap.set(a,o=>{if(o.success)return t();{let u=new Error(o.message);return u.stack+="\n"+o.stack,r(u)}}),Ji._dbrWorker.postMessage({type:"updateScanSettings",id:a,instanceID:this._instanceID,body:{settings:n}})})})}getVideoSettings(){return this.dce.getVideoSettings()}updateVideoSettings(n){return this.dce.updateVideoSettings(n)}isOpen(){return this.dce&&this.dce.isOpen()}_show(){let n=this.getUIElement();n.parentNode||(n.style.position="fixed",n.style.left="0",n.style.top="0",document.body.append(n)),"none"==n.style.display&&(n.style.display="")}stop(){this.dce.stop(),this._divScanLight&&(this._divScanLight.style.display="none"),this._drawRegionsults(),this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}pause(){this.dce.pause(),this._divScanLight&&(this._divScanLight.style.display="none")}play(n,t,r){return Vn(this,void 0,void 0,function*(){return this.dce.play(n,t,r)})}pauseScan(){this._assertOpen(),this._bPauseScan=!0,this._divScanLight&&(this._divScanLight.style.display="none")}resumeScan(){this._assertOpen(),this._bPauseScan=!1}getCapabilities(){return this.dce.getCapabilities()}getCameraSettings(){return this.dce.getCameraSettings()}getConstraints(){return this.dce.getConstraints()}applyConstraints(n){return Vn(this,void 0,void 0,function*(){return this.dce.applyConstraints(n)})}turnOnTorch(){return Vn(this,void 0,void 0,function*(){return this.dce.turnOnTorch()})}turnOffTorch(){return Vn(this,void 0,void 0,function*(){return this.dce.turnOffTorch()})}setColorTemperature(n){return Vn(this,void 0,void 0,function*(){return this.dce.setColorTemperature(n)})}setExposureCompensation(n){return Vn(this,void 0,void 0,function*(){return this.dce.setExposureCompensation(n)})}setZoom(n){return Vn(this,void 0,void 0,function*(){return this.dce.setZoom(n)})}setFrameRate(n){return Vn(this,void 0,void 0,function*(){return this.dce.setFrameRate(n)})}getFrameRate(){return this.dce.getFrameRate()}_cloneDecodeResults(n){if(n instanceof Array){let t=[];for(let r of n)t.push(this._cloneDecodeResults(r));return t}return JSON.parse(JSON.stringify(n,(r,a)=>"oriVideoCanvas"==r||"searchRegionCanvas"==r?void 0:a))}_loopReadVideo(){return Vn(this,void 0,void 0,function*(){if(this.bDestroyed)return void this.dce.stopFetchingLoop();if(!this.isOpen())return this.dce.stopFetchingLoop(),void(yield this.clearMapDecodeRecord());if(!this.dce.video||this.dce.video.paused||this._bPauseScan)return yt._onLog&&yt._onLog("Video or scan is paused. Ask in 1s."),this.dce.stopFetchingLoop(),yield this.clearMapDecodeRecord(),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},this._intervalDetectVideoPause));this._divScanLight&&"none"==this._divScanLight.style.display&&(this._divScanLight.style.display=""),yt._onLog&&yt._onLog("======= once read ======="),yt._onLog&&(this._timeStartDecode=Date.now());let n=this._getVideoFrame();if(!n)return this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),void(this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},0));(()=>Vn(this,void 0,void 0,function*(){if(n&&null===n.canvas){let{data:t,width:r,height:a,timeStamp:o}=n,u={timeStamp:o};return yield this._decodeBuffer_Uint8Array(t,r,a,r,So.IPF_GrayScaled,u)}if(n&&n.canvas){let{data:t,canvas:r,region:a,sx:o,sy:u,width:s,height:f,timeStamp:v}=n,l={timeStamp:v};(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=r);let I=yield this._decodeBuffer_Uint8Array(t,r.width,r.height,4*r.width,So.IPF_ABGR_8888,l);return yt.fixResultLocationWhenFilterRegionInJs(a,I,o,u,r.width,r.height,s,f),I}{let t=new Error("imgData is empty.");return new Promise(r=>r(t))}}))().then(t=>{yt._onLog&&yt._onLog(t);let r=this.array_decodeFrameTimeCost,a=this.array_getFrameTimeCost,o=this._indexCurrentDecodingFrame;if((()=>{if(this.region instanceof Array){for(r[o]&&r[o]instanceof Array||(r[o]=[]);r[o].length>=5;)r[o].shift();r[o].push(this._lastInnerDecodeDuration)}else{for(;r.length>=5;)r.shift();r.push(this._lastInnerDecodeDuration)}})(),this._intervalGetVideoFrame=(()=>{let u=0;if(this.region instanceof Array){let s=0,f=0;s=o+1>=this.region.length?0:o+1,f=s+1>=this.region.length?0:s+1,u=r[s]&&r[s].length&&a[f]&&a[f].length?Math.min(...r[s])-Math.max(...a[f]):0}else if(a&&a.length){let s=Math.min(...r),f=Math.max(...a);s&&f&&(u=s-f)}else u=0;return u>0?u:0})()+this.intervalTime,this.isOpen()&&this.dce.video&&!this.dce.video.paused&&!this._bPauseScan){if(this.bPlaySoundOnSuccessfulRead&&t.length){let u=!1;if(!0===this.bPlaySoundOnSuccessfulRead||"frame"===this.bPlaySoundOnSuccessfulRead)u=!0;else if("unduplicated"===this.bPlaySoundOnSuccessfulRead)for(let s of t)if(s.bUnduplicated){u=!0;break}u&&(this.soundOnSuccessfullRead.currentTime=0,this.soundOnSuccessfullRead.play().catch(s=>{console.warn("Autoplay not allowed. User interaction required: "+(s.message||s))}))}if(navigator.vibrate&&this.bVibrateOnSuccessfulRead&&t.length){let u=!1;if(!0===this.bVibrateOnSuccessfulRead||"frame"===this.bVibrateOnSuccessfulRead)u=!0;else if("unduplicated"===this.bVibrateOnSuccessfulRead)for(let s of t)if(s.bUnduplicated){u=!0;break}if(u)try{navigator.vibrate(this.vibrateDuration)}catch(s){console.warn("Vibration not allowed. User interaction required: "+(s.message||s))}}if(this.onFrameRead){let u=this._cloneDecodeResults(t);for(let s of u)delete s.bUnduplicated;this.onFrameRead(u)}if(this.onUniqueRead)for(let u of t)u.bUnduplicated&&this.onUniqueRead(u.barcodeText,this._cloneDecodeResults(u));this._drawRegionsults(t)}this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this.intervalTime?this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},this.intervalTime):this._loopReadVideo()}).catch(t=>{this.dce.stopFetchingLoop(),yt._onLog&&yt._onLog(t.message||t),this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._loopReadVideoTimeoutId=setTimeout(()=>{this._loopReadVideo()},Math.max(this.intervalTime,1e3)),"platform error"==t.message||console.warn(t.message)})})}_getVideoFrame(){let n=this.dce.isFetchingLoopStarted();if(this.dce.loopInterval=this._intervalGetVideoFrame,n||this.dce.startFetchingLoop(),!this.dce.getQueueLength())return this.dce.loopInterval=0,null;let t=this.dce.getFrameFromBuffer();return this._indexCurrentDecodingFrame=this.dce.regionIndex,this.region instanceof Array&&this.dce.regionIndex++,(r=>{let a=r.timeSpent,o=this.array_getFrameTimeCost;if(this.region instanceof Array){let u=this._indexCurrentDecodingFrame;for(o[u]&&o[u]instanceof Array||(o[u]=[]);o[u].length>=5;)o[u].shift();o[u].push(a)}else{for(;o.length>=5;)o.shift();o.push(a)}})(t),t}_drawRegionsults(n){let t,r,a;if(this.beingLazyDrawRegionsults=!1,this.singleFrameMode){if(!this.oriCanvas)return;t="contain",r=this.oriCanvas.width,a=this.oriCanvas.height}else{if(!this.dce.video)return;t=this.dce.video.style.objectFit||"contain",r=this.dce.video.videoWidth,a=this.dce.video.videoHeight}let o=this.region;if(o&&(!o.regionLeft&&!o.regionRight&&!o.regionTop&&!o.regionBottom&&!o.regionMeasuredByPercentage||o instanceof Array?o=null:o.regionMeasuredByPercentage?o=o.regionLeft||o.regionRight||100!==o.regionTop||100!==o.regionBottom?{regionLeft:Math.round(o.regionLeft/100*r),regionTop:Math.round(o.regionTop/100*a),regionRight:Math.round(o.regionRight/100*r),regionBottom:Math.round(o.regionBottom/100*a)}:null:(o=JSON.parse(JSON.stringify(o)),delete o.regionMeasuredByPercentage)),this._cvsDrawArea){this._cvsDrawArea.style.objectFit=t;let u=this._cvsDrawArea;u.width=r,u.height=a;let s=u.getContext("2d");if(o){s.fillStyle=this.regionMaskFillStyle,s.fillRect(0,0,u.width,u.height),s.globalCompositeOperation="destination-out",s.fillStyle="#000";let f=Math.round(this.regionMaskLineWidth/2);s.fillRect(o.regionLeft-f,o.regionTop-f,o.regionRight-o.regionLeft+2*f,o.regionBottom-o.regionTop+2*f),s.globalCompositeOperation="source-over",s.strokeStyle=this.regionMaskStrokeStyle,s.lineWidth=this.regionMaskLineWidth,s.rect(o.regionLeft,o.regionTop,o.regionRight-o.regionLeft,o.regionBottom-o.regionTop),s.stroke()}if(n){s.globalCompositeOperation="destination-over",s.fillStyle=this.barcodeFillStyle,s.strokeStyle=this.barcodeStrokeStyle,s.lineWidth=this.barcodeLineWidth,n=n||[];for(let f of n){let v=f.localizationResult;s.beginPath(),s.moveTo(v.x1,v.y1),s.lineTo(v.x2,v.y2),s.lineTo(v.x3,v.y3),s.lineTo(v.x4,v.y4),s.fill(),s.beginPath(),s.moveTo(v.x1,v.y1),s.lineTo(v.x2,v.y2),s.lineTo(v.x3,v.y3),s.lineTo(v.x4,v.y4),s.closePath(),s.stroke()}}this.singleFrameMode&&(s.globalCompositeOperation="destination-over",s.drawImage(this.oriCanvas,0,0))}if(this._divScanArea&&this.dce.video){let u=this.dce.video.offsetWidth,s=this.dce.video.offsetHeight,f=1;u/s<r/a?(f=u/r,this._divScanArea.style.left="0",this._divScanArea.style.top=Math.round((s-a*f)/2)+"px"):(f=s/a,this._divScanArea.style.left=Math.round((u-r*f)/2)+"px",this._divScanArea.style.top="0");let v=o?Math.round(o.regionLeft*f):0,l=o?Math.round(o.regionTop*f):0,I=Math.round(o?o.regionRight*f-v:r*f),c=Math.round(o?o.regionBottom*f-l:a*f);this._divScanArea.style.marginLeft=v+"px",this._divScanArea.style.marginTop=l+"px",this._divScanArea.style.width=I+"px",this._divScanArea.style.height=c+"px"}}_clearRegionsults(){this._cvsDrawArea&&(this._cvsDrawArea.width=this._cvsDrawArea.height=0)}open(){return Vn(this,void 0,void 0,function*(){this._bindUI();let n=yield this.play();return this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._drawRegionsults(),this._loopReadVideo()),n})}openVideo(){return Vn(this,void 0,void 0,function*(){this._bindUI();let n=yield this.play();return this._bPauseScan=!0,this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._drawRegionsults(),this._loopReadVideo()),n})}close(){return Vn(this,void 0,void 0,function*(){this.stop(),this._unbindUI(),this._bPauseScan=!1})}show(){return Vn(this,void 0,void 0,function*(){this._bindUI(),this._show();let n=yield this.play();return this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._drawRegionsults(),this._loopReadVideo()),n})}showVideo(){return Vn(this,void 0,void 0,function*(){this._bindUI(),this._show();let n=yield this.play();return this._bPauseScan=!0,this.singleFrameMode||(this._loopReadVideoTimeoutId&&clearTimeout(this._loopReadVideoTimeoutId),this._drawRegionsults(),this._loopReadVideo()),n})}hide(){return Vn(this,void 0,void 0,function*(){this.stop(),this._unbindUI(),this._bPauseScan=!1,this.getUIElement().style.display="none"})}destroy(){return this.destroyContext()}destroyContext(){const n=Object.create(null,{destroyContext:{get:()=>super.destroyContext}});return Vn(this,void 0,void 0,function*(){yield this.close(),this.bDestroyed||(yield n.destroyContext.call(this))})}}var Zp,$p,em,tm,nm,rm,im,om,am,sm,um,cm,lm,dm,hm,fm,gm,pm,mm,_m,vm,ym,Im,Dm,bm,wm,Sm;Ji._defaultUIElementURL="@engineResourcePath/dbr.scanner.html",Ji.singlePresetRegion=[null,{regionLeft:0,regionTop:30,regionRight:100,regionBottom:70,regionMeasuredByPercentage:1},{regionLeft:25,regionTop:25,regionRight:75,regionBottom:75,regionMeasuredByPercentage:1},{regionLeft:25,regionTop:25,regionRight:75,regionBottom:75,regionMeasuredByPercentage:1}],function(e){e[e.BICM_DARK_ON_LIGHT=1]="BICM_DARK_ON_LIGHT",e[e.BICM_LIGHT_ON_DARK=2]="BICM_LIGHT_ON_DARK",e[e.BICM_DARK_ON_DARK=4]="BICM_DARK_ON_DARK",e[e.BICM_LIGHT_ON_LIGHT=8]="BICM_LIGHT_ON_LIGHT",e[e.BICM_DARK_LIGHT_MIXED=16]="BICM_DARK_LIGHT_MIXED",e[e.BICM_DARK_ON_LIGHT_DARK_SURROUNDING=32]="BICM_DARK_ON_LIGHT_DARK_SURROUNDING",e[e.BICM_SKIP=0]="BICM_SKIP",e[e.BICM_REV=2147483648]="BICM_REV"}(Zp||(Zp={})),function(e){e[e.BCM_AUTO=1]="BCM_AUTO",e[e.BCM_GENERAL=2]="BCM_GENERAL",e[e.BCM_SKIP=0]="BCM_SKIP",e[e.BCM_REV=2147483648]="BCM_REV"}($p||($p={})),function(e){e[e.BF2_NULL=0]="BF2_NULL",e[e.BF2_POSTALCODE=32505856]="BF2_POSTALCODE",e[e.BF2_NONSTANDARD_BARCODE=1]="BF2_NONSTANDARD_BARCODE",e[e.BF2_USPSINTELLIGENTMAIL=1048576]="BF2_USPSINTELLIGENTMAIL",e[e.BF2_POSTNET=2097152]="BF2_POSTNET",e[e.BF2_PLANET=4194304]="BF2_PLANET",e[e.BF2_AUSTRALIANPOST=8388608]="BF2_AUSTRALIANPOST",e[e.BF2_RM4SCC=16777216]="BF2_RM4SCC",e[e.BF2_DOTCODE=2]="BF2_DOTCODE"}(em||(em={})),function(e){e[e.BM_AUTO=1]="BM_AUTO",e[e.BM_LOCAL_BLOCK=2]="BM_LOCAL_BLOCK",e[e.BM_SKIP=0]="BM_SKIP",e[e.BM_THRESHOLD=4]="BM_THRESHOLD",e[e.BM_REV=2147483648]="BM_REV"}(tm||(tm={})),function(e){e[e.ECCM_CONTRAST=1]="ECCM_CONTRAST"}(nm||(nm={})),function(e){e[e.CFM_GENERAL=1]="CFM_GENERAL"}(rm||(rm={})),function(e){e[e.CCM_AUTO=1]="CCM_AUTO",e[e.CCM_GENERAL_HSV=2]="CCM_GENERAL_HSV",e[e.CCM_SKIP=0]="CCM_SKIP",e[e.CCM_REV=2147483648]="CCM_REV"}(im||(im={})),function(e){e[e.CICM_GENERAL=1]="CICM_GENERAL",e[e.CICM_SKIP=0]="CICM_SKIP",e[e.CICM_REV=2147483648]="CICM_REV"}(om||(om={})),function(e){e[e.CM_IGNORE=1]="CM_IGNORE",e[e.CM_OVERWRITE=2]="CM_OVERWRITE"}(am||(am={})),function(e){e[e.DM_SKIP=0]="DM_SKIP",e[e.DM_DIRECT_BINARIZATION=1]="DM_DIRECT_BINARIZATION",e[e.DM_THRESHOLD_BINARIZATION=2]="DM_THRESHOLD_BINARIZATION",e[e.DM_GRAY_EQUALIZATION=4]="DM_GRAY_EQUALIZATION",e[e.DM_SMOOTHING=8]="DM_SMOOTHING",e[e.DM_MORPHING=16]="DM_MORPHING",e[e.DM_DEEP_ANALYSIS=32]="DM_DEEP_ANALYSIS",e[e.DM_SHARPENING=64]="DM_SHARPENING",e[e.DM_BASED_ON_LOC_BIN=128]="DM_BASED_ON_LOC_BIN",e[e.DM_SHARPENING_SMOOTHING=256]="DM_SHARPENING_SMOOTHING"}(sm||(sm={})),function(e){e[e.DRM_AUTO=1]="DRM_AUTO",e[e.DRM_GENERAL=2]="DRM_GENERAL",e[e.DRM_SKIP=0]="DRM_SKIP",e[e.DRM_REV=2147483648]="DRM_REV"}(um||(um={})),function(e){e[e.DPMCRM_AUTO=1]="DPMCRM_AUTO",e[e.DPMCRM_GENERAL=2]="DPMCRM_GENERAL",e[e.DPMCRM_SKIP=0]="DPMCRM_SKIP",e[e.DPMCRM_REV=2147483648]="DPMCRM_REV"}(cm||(cm={})),function(e){e[e.GTM_INVERTED=1]="GTM_INVERTED",e[e.GTM_ORIGINAL=2]="GTM_ORIGINAL",e[e.GTM_SKIP=0]="GTM_SKIP",e[e.GTM_REV=2147483648]="GTM_REV"}(lm||(lm={})),function(e){e[e.IPM_AUTO=1]="IPM_AUTO",e[e.IPM_GENERAL=2]="IPM_GENERAL",e[e.IPM_GRAY_EQUALIZE=4]="IPM_GRAY_EQUALIZE",e[e.IPM_GRAY_SMOOTH=8]="IPM_GRAY_SMOOTH",e[e.IPM_SHARPEN_SMOOTH=16]="IPM_SHARPEN_SMOOTH",e[e.IPM_MORPHOLOGY=32]="IPM_MORPHOLOGY",e[e.IPM_SKIP=0]="IPM_SKIP",e[e.IPM_REV=2147483648]="IPM_REV"}(dm||(dm={})),function(e){e[e.IRSM_MEMORY=1]="IRSM_MEMORY",e[e.IRSM_FILESYSTEM=2]="IRSM_FILESYSTEM",e[e.IRSM_BOTH=4]="IRSM_BOTH"}(hm||(hm={})),function(e){e[e.IRT_NO_RESULT=0]="IRT_NO_RESULT",e[e.IRT_ORIGINAL_IMAGE=1]="IRT_ORIGINAL_IMAGE",e[e.IRT_COLOUR_CLUSTERED_IMAGE=2]="IRT_COLOUR_CLUSTERED_IMAGE",e[e.IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE=4]="IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE",e[e.IRT_TRANSFORMED_GRAYSCALE_IMAGE=8]="IRT_TRANSFORMED_GRAYSCALE_IMAGE",e[e.IRT_PREDETECTED_REGION=16]="IRT_PREDETECTED_REGION",e[e.IRT_PREPROCESSED_IMAGE=32]="IRT_PREPROCESSED_IMAGE",e[e.IRT_BINARIZED_IMAGE=64]="IRT_BINARIZED_IMAGE",e[e.IRT_TEXT_ZONE=128]="IRT_TEXT_ZONE",e[e.IRT_CONTOUR=256]="IRT_CONTOUR",e[e.IRT_LINE_SEGMENT=512]="IRT_LINE_SEGMENT",e[e.IRT_FORM=1024]="IRT_FORM",e[e.IRT_SEGMENTATION_BLOCK=2048]="IRT_SEGMENTATION_BLOCK",e[e.IRT_TYPED_BARCODE_ZONE=4096]="IRT_TYPED_BARCODE_ZONE",e[e.IRT_PREDETECTED_QUADRILATERAL=8192]="IRT_PREDETECTED_QUADRILATERAL"}(fm||(fm={})),function(e){e[e.LM_SKIP=0]="LM_SKIP",e[e.LM_AUTO=1]="LM_AUTO",e[e.LM_CONNECTED_BLOCKS=2]="LM_CONNECTED_BLOCKS",e[e.LM_LINES=8]="LM_LINES",e[e.LM_STATISTICS=4]="LM_STATISTICS",e[e.LM_SCAN_DIRECTLY=16]="LM_SCAN_DIRECTLY",e[e.LM_STATISTICS_MARKS=32]="LM_STATISTICS_MARKS",e[e.LM_STATISTICS_POSTAL_CODE=64]="LM_STATISTICS_POSTAL_CODE",e[e.LM_CENTRE=128]="LM_CENTRE",e[e.LM_ONED_FAST_SCAN=256]="LM_ONED_FAST_SCAN",e[e.LM_REV=2147483648]="LM_REV"}(gm||(gm={})),function(e){e[e.PDFRM_RASTER=1]="PDFRM_RASTER",e[e.PDFRM_AUTO=2]="PDFRM_AUTO",e[e.PDFRM_VECTOR=4]="PDFRM_VECTOR",e[e.PDFRM_REV=2147483648]="PDFRM_REV"}(pm||(pm={})),function(e){e[e.QRECL_ERROR_CORRECTION_H=0]="QRECL_ERROR_CORRECTION_H",e[e.QRECL_ERROR_CORRECTION_L=1]="QRECL_ERROR_CORRECTION_L",e[e.QRECL_ERROR_CORRECTION_M=2]="QRECL_ERROR_CORRECTION_M",e[e.QRECL_ERROR_CORRECTION_Q=3]="QRECL_ERROR_CORRECTION_Q"}(mm||(mm={})),function(e){e[e.RPM_AUTO=1]="RPM_AUTO",e[e.RPM_GENERAL=2]="RPM_GENERAL",e[e.RPM_GENERAL_RGB_CONTRAST=4]="RPM_GENERAL_RGB_CONTRAST",e[e.RPM_GENERAL_GRAY_CONTRAST=8]="RPM_GENERAL_GRAY_CONTRAST",e[e.RPM_GENERAL_HSV_CONTRAST=16]="RPM_GENERAL_HSV_CONTRAST",e[e.RPM_SKIP=0]="RPM_SKIP",e[e.RPM_REV=2147483648]="RPM_REV"}(_m||(_m={})),function(e){e[e.RCT_PIXEL=1]="RCT_PIXEL",e[e.RCT_PERCENTAGE=2]="RCT_PERCENTAGE"}(vm||(vm={})),function(e){e[e.RT_STANDARD_TEXT=0]="RT_STANDARD_TEXT",e[e.RT_RAW_TEXT=1]="RT_RAW_TEXT",e[e.RT_CANDIDATE_TEXT=2]="RT_CANDIDATE_TEXT",e[e.RT_PARTIAL_TEXT=3]="RT_PARTIAL_TEXT"}(ym||(ym={})),function(e){e[e.SUM_AUTO=1]="SUM_AUTO",e[e.SUM_LINEAR_INTERPOLATION=2]="SUM_LINEAR_INTERPOLATION",e[e.SUM_NEAREST_NEIGHBOUR_INTERPOLATION=4]="SUM_NEAREST_NEIGHBOUR_INTERPOLATION",e[e.SUM_SKIP=0]="SUM_SKIP",e[e.SUM_REV=2147483648]="SUM_REV"}(Im||(Im={})),function(e){e[e.TP_REGION_PREDETECTED=1]="TP_REGION_PREDETECTED",e[e.TP_IMAGE_PREPROCESSED=2]="TP_IMAGE_PREPROCESSED",e[e.TP_IMAGE_BINARIZED=4]="TP_IMAGE_BINARIZED",e[e.TP_BARCODE_LOCALIZED=8]="TP_BARCODE_LOCALIZED",e[e.TP_BARCODE_TYPE_DETERMINED=16]="TP_BARCODE_TYPE_DETERMINED",e[e.TP_BARCODE_RECOGNIZED=32]="TP_BARCODE_RECOGNIZED"}(Dm||(Dm={})),function(e){e[e.TFM_AUTO=1]="TFM_AUTO",e[e.TFM_GENERAL_CONTOUR=2]="TFM_GENERAL_CONTOUR",e[e.TFM_SKIP=0]="TFM_SKIP",e[e.TFM_REV=2147483648]="TFM_REV"}(bm||(bm={})),function(e){e[e.TROM_CONFIDENCE=1]="TROM_CONFIDENCE",e[e.TROM_POSITION=2]="TROM_POSITION",e[e.TROM_FORMAT=4]="TROM_FORMAT",e[e.TROM_SKIP=0]="TROM_SKIP",e[e.TROM_REV=2147483648]="TROM_REV"}(wm||(wm={})),function(e){e[e.TDM_AUTO=1]="TDM_AUTO",e[e.TDM_GENERAL_WIDTH_CONCENTRATION=2]="TDM_GENERAL_WIDTH_CONCENTRATION",e[e.TDM_SKIP=0]="TDM_SKIP",e[e.TDM_REV=2147483648]="TDM_REV"}(Sm||(Sm={}));class Tr{static get version(){return yt.version}static get productKeys(){return yt.productKeys}static set productKeys(n){yt.productKeys=n}static get handshakeCode(){return yt.handshakeCode}static set handshakeCode(n){yt.handshakeCode=n}static get organizationID(){return yt.organizationID}static set organizationID(n){yt.organizationID=n}static get sessionPassword(){return yt.sessionPassword}static set sessionPassword(n){yt.sessionPassword=n}static get browserInfo(){return yt.browserInfo}static detectEnvironment(){return yt.detectEnvironment()}static get _workerName(){return yt._workerName}static set _workerName(n){yt._workerName=n}static get engineResourcePath(){return yt.engineResourcePath}static set engineResourcePath(n){yt.engineResourcePath=n}static get licenseServer(){return yt.licenseServer}static set licenseServer(n){yt.licenseServer=n}static get deviceFriendlyName(){return yt.deviceFriendlyName}static set deviceFriendlyName(n){yt.deviceFriendlyName=n}static get _onLog(){return yt._onLog}static set _onLog(n){yt._onLog=n}static get _bWasmDebug(){return yt._bWasmDebug}static set _bWasmDebug(n){yt._bWasmDebug=n}static get _bUseFullFeature(){return yt._bUseFullFeature}static set _bUseFullFeature(n){yt._bUseFullFeature=n}static get _dbrWorker(){return yt._dbrWorker}static isLoaded(){return yt.isLoaded()}static isWasmLoaded(){return yt.isLoaded()}static loadWasm(){return yt.loadWasm()}}Tr.DBR=Tr,Tr.BarcodeReader=yt,Tr.BarcodeScanner=Ji,Tr.CameraEnhancer=AN,Tr.EnumBarcodeColourMode=Zp,Tr.EnumBarcodeComplementMode=$p,Tr.EnumBarcodeFormat=oa,Tr.EnumBarcodeFormat_2=em,Tr.EnumBinarizationMode=tm,Tr.EnumClarityCalculationMethod=nm,Tr.EnumClarityFilterMode=rm,Tr.EnumColourClusteringMode=im,Tr.EnumColourConversionMode=om,Tr.EnumConflictMode=am,Tr.EnumDeblurMode=sm,Tr.EnumDeformationResistingMode=um,Tr.EnumDPMCodeReadingMode=cm,Tr.EnumErrorCode=Au,Tr.EnumGrayscaleTransformationMode=lm,Tr.EnumImagePixelFormat=So,Tr.EnumImagePreprocessingMode=dm,Tr.EnumIMResultDataType=Qd,Tr.EnumIntermediateResultSavingMode=hm,Tr.EnumIntermediateResultType=fm,Tr.EnumLocalizationMode=gm,Tr.EnumPDFReadingMode=pm,Tr.EnumQRCodeErrorCorrectionLevel=mm,Tr.EnumRegionPredetectionMode=_m,Tr.EnumResultCoordinateType=vm,Tr.EnumResultType=ym,Tr.EnumScaleUpMode=Im,Tr.EnumTerminatePhase=Dm,Tr.EnumTextFilterMode=bm,Tr.EnumTextResultOrderMode=wm,Tr.EnumTextureDetectionMode=Sm;var Zw,Xd,Q=self.Dynamsoft||{Lib:{}};self.Dynamsoft=Q,function(){Q.Lib||(Q.Lib={});var e,n,t=Q.Lib,r=navigator,a=!0,o=!1,u=!1,s=!1,f=!1,v=!1,l=!1,I=!1,c=!1,_=!1,h=!1,y=[];"userAgentData"in r?(h=!0,(e=r.userAgentData).platform&&""!=e.platform&&("brands"in e&&Array.isArray(e.brands)&&0<e.brands.length?y=e.brands:"uaList"in e&&Array.isArray(e.uaList)&&0<e.uaList.length&&(y=e.uaList),0<y.length&&(a=!1))):(e=r.platform.toLowerCase(),r=r.userAgent.toLowerCase(),o=/win32|win64|windows/.test(e),f=/ucweb|ucbrowser/g.test(r),v=/playbook/g.test(r),l=/blackberry|bb10/g.test(r),I=/huaweibrowser/g.test(r),c=/opera|opr/g.test(r),u=!((_=/firefox|fxios/g.test(r))||I)&&/edge\/|edga\/|edgios\/|edg\//g.test(r),h=!(l||v||f||c||u||I)&&/chrome|crios/g.test(r),!o||u||_||h||(e=r.indexOf("msie "),n=r.indexOf("trident"),r=r.indexOf("rv:"),s=-1!=e||-1!=n||-1!=r)),t.preNavInfo={bUseUserAgent:a,uaBrands:y,bIE:s,bEdge:u,bWin:o,bUC:f,bPlaybook:v,bBlackBerry:l,bHuaWeiBrowser:I,bOpera:c,bFirefox:_,bChrome:h}}(),Q.Lib.preNavInfo.bIE&&(function(e){var n;"object"==typeof exports&&typeof module<"u"?module.exports=e():("function"==typeof define&&define,typeof window<"u"?n=window:typeof global<"u"?n=global:typeof self<"u"&&(n=self),n.Promise=e())}(function(){return function r(a,o,u){function s(l,I){if(!o[l]){if(!a[l]){var c="function"==typeof _dereq_&&_dereq_;if(!I&&c)return c(l,!0);if(f)return f(l,!0);var _=new Error("Cannot find module '"+l+"'");throw _.code="MODULE_NOT_FOUND",_}var h=o[l]={exports:{}};a[l][0].call(h.exports,function(y){return s(a[l][1][y]||y)},h,h.exports,r,a,o,u)}return o[l].exports}for(var f="function"==typeof _dereq_&&_dereq_,v=0;v<u.length;v++)s(u[v]);return s}({1:[function(r,a,o){a.exports=function(u){function s(v){var l=new f(v),I=l.promise();return l.setHowMany(1),l.setUnwrap(),l.init(),I}var f=u._SomePromiseArray;u.any=function(v){return s(v)},u.prototype.any=function(){return s(this)}}},{}],2:[function(r,a,o){function u(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new h(16),this._normalQueue=new h(16),this._haveDrainedQueues=!1;var y=this;this.drainQueues=function(){y._drainQueues()},this._schedule=_}function l(y){for(;y.length()>0;)I(y)}function I(y){var p=y.shift();if("function"!=typeof p)p._settlePromises();else{var m=y.shift(),T=y.shift();p.call(m,T)}}var c;try{throw new Error}catch(y){c=y}var _=r("./schedule"),h=r("./queue");u.prototype.setScheduler=function(y){var p=this._schedule;return this._schedule=y,this._customScheduler=!0,p},u.prototype.hasCustomScheduler=function(){return this._customScheduler},u.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},u.prototype.fatalError=function(y,p){p?(process.stderr.write("Fatal "+(y instanceof Error?y.stack:y)+"\n"),process.exit(2)):this.throwLater(y)},u.prototype.throwLater=function(y,p){if(1===arguments.length&&(p=y,y=function(){throw p}),typeof setTimeout<"u")setTimeout(function(){y(p)},0);else try{this._schedule(function(){y(p)})}catch{throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},u.prototype.invokeLater=function s(y,p,m){this._lateQueue.push(y,p,m),this._queueTick()},u.prototype.invoke=function f(y,p,m){this._normalQueue.push(y,p,m),this._queueTick()},u.prototype.settlePromises=function v(y){this._normalQueue._pushOne(y),this._queueTick()},u.prototype._drainQueues=function(){l(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,l(this._lateQueue)},u.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},u.prototype._reset=function(){this._isTickUsed=!1},a.exports=u,a.exports.firstLineError=c},{"./queue":26,"./schedule":29}],3:[function(r,a,o){a.exports=function(u,s,f,v){var l=!1,I=function(y,p){this._reject(p)},c=function(y,p){p.promiseRejectionQueued=!0,p.bindingPromise._then(I,I,null,this,y)},_=function(y,p){0==(50397184&this._bitField)&&this._resolveCallback(p.target)},h=function(y,p){p.promiseRejectionQueued||this._reject(y)};u.prototype.bind=function(y){l||(l=!0,u.prototype._propagateFrom=v.propagateFromFunction(),u.prototype._boundValue=v.boundValueFunction());var p=f(y),m=new u(s);m._propagateFrom(this,1);var T=this._target();if(m._setBoundTo(p),p instanceof u){var C={promiseRejectionQueued:!1,promise:m,target:T,bindingPromise:p};T._then(s,c,void 0,m,C),p._then(_,h,void 0,m,C),m._setOnCancel(p)}else m._resolveCallback(T);return m},u.prototype._setBoundTo=function(y){void 0!==y?(this._bitField=2097152|this._bitField,this._boundTo=y):this._bitField=-2097153&this._bitField},u.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},u.bind=function(y,p){return u.resolve(p).bind(y)}}},{}],4:[function(r,a,o){var s;typeof Promise<"u"&&(s=Promise);var f=r("./promise")();f.noConflict=function u(){try{Promise===f&&(Promise=s)}catch{}return f},a.exports=f},{"./promise":22}],5:[function(r,a,o){var u=Object.create;if(u){var s=u(null),f=u(null);s[" size"]=f[" size"]=0}a.exports=function(v){function I(m){var C=function l(m,T){var C;if(null!=m&&(C=m[T]),"function"!=typeof C){var D="Object "+y.classString(m)+" has no method '"+y.toString(T)+"'";throw new v.TypeError(D)}return C}(m,this.pop());return C.apply(m,this)}function c(m){return m[this]}function _(m){var T=+this;return 0>T&&(T=Math.max(0,T+m.length)),m[T]}var y=r("./util"),p=y.canEvaluate;v.prototype.call=function(m){var T=[].slice.call(arguments,1);return T.push(m),this._then(I,void 0,void 0,T,void 0)},v.prototype.get=function(m){var T;if("number"==typeof m)T=_;else if(p){var D=(void 0)(m);T=null!==D?D:c}else T=c;return this._then(T,void 0,void 0,m,void 0)}}},{"./util":36}],6:[function(r,a,o){a.exports=function(u,s,f,v){var l=r("./util"),I=l.tryCatch,c=l.errorObj,_=u._async;u.prototype.break=u.prototype.cancel=function(){if(!v.cancellation())return this._warn("cancellation is disabled");for(var h=this,y=h;h._isCancellable();){if(!h._cancelBy(y)){y._isFollowing()?y._followee().cancel():y._cancelBranched();break}var p=h._cancellationParent;if(null==p||!p._isCancellable()){h._isFollowing()?h._followee().cancel():h._cancelBranched();break}h._isFollowing()&&h._followee().cancel(),h._setWillBeCancelled(),y=h,h=p}},u.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},u.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},u.prototype._cancelBy=function(h){return h===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},u.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},u.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),_.invoke(this._cancelPromises,this,void 0))},u.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},u.prototype._unsetOnCancel=function(){this._onCancelField=void 0},u.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},u.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},u.prototype._doInvokeOnCancel=function(h,y){if(l.isArray(h))for(var p=0;p<h.length;++p)this._doInvokeOnCancel(h[p],y);else if(void 0!==h)if("function"==typeof h){if(!y){var m=I(h).call(this._boundValue());m===c&&(this._attachExtraTrace(m.e),_.throwLater(m.e))}}else h._resultCancelled(this)},u.prototype._invokeOnCancel=function(){var h=this._onCancel();this._unsetOnCancel(),_.invoke(this._doInvokeOnCancel,this,h)},u.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},u.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(r,a,o){a.exports=function(u){var f=r("./util"),v=r("./es5").keys,l=f.tryCatch,I=f.errorObj;return function s(c,_,h){return function(y){var p=h._boundValue();e:for(var m=0;m<c.length;++m){var T=c[m];if(T===Error||null!=T&&T.prototype instanceof Error){if(y instanceof T)return l(_).call(p,y)}else if("function"==typeof T){var C=l(T).call(p,y);if(C===I)return C;if(C)return l(_).call(p,y)}else if(f.isObject(y)){for(var D=v(T),S=0;S<D.length;++S){var M=D[S];if(T[M]!=y[M])continue e}return l(_).call(p,y)}}return u}}}},{"./es5":13,"./util":36}],8:[function(r,a,o){a.exports=function(u){function s(){this._trace=new s.CapturedTrace(v())}function v(){var c=I.length-1;return c>=0?I[c]:void 0}var l=!1,I=[];return u.prototype._promiseCreated=function(){},u.prototype._pushContext=function(){},u.prototype._popContext=function(){return null},u._peekContext=u.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,I.push(this._trace))},s.prototype._popContext=function(){if(void 0!==this._trace){var c=I.pop(),_=c._promiseCreated;return c._promiseCreated=null,_}return null},s.CapturedTrace=null,s.create=function f(){return l?new s:void 0},s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var c=u.prototype._pushContext,_=u.prototype._popContext,h=u._peekContext,y=u.prototype._peekContext,p=u.prototype._promiseCreated;s.deactivateLongStackTraces=function(){u.prototype._pushContext=c,u.prototype._popContext=_,u._peekContext=h,u.prototype._peekContext=y,u.prototype._promiseCreated=p,l=!1},l=!0,u.prototype._pushContext=s.prototype._pushContext,u.prototype._popContext=s.prototype._popContext,u._peekContext=u.prototype._peekContext=v,u.prototype._promiseCreated=function(){var m=this._peekContext();m&&null==m._promiseCreated&&(m._promiseCreated=this)}},s}},{}],9:[function(r,a,o){a.exports=function(u,s,f,v){function l(pe,Ie){return{promise:Ie}}function I(){return!1}function c(pe,Ie,$e){var st=this;try{pe(Ie,$e,function(Nt){if("function"!=typeof Nt)throw new TypeError("onCancel must be a function, got: "+Ve.toString(Nt));st._attachCancellationCallback(Nt)})}catch(Nt){return Nt}}function _(pe){if(!this._isCancellable())return this;var Ie=this._onCancel();void 0!==Ie?Ve.isArray(Ie)?Ie.push(pe):this._setOnCancel([Ie,pe]):this._setOnCancel(pe)}function h(){return this._onCancelField}function y(pe){this._onCancelField=pe}function p(){this._cancellationParent=void 0,this._onCancelField=void 0}function m(pe,Ie){if(0!=(1&Ie)){this._cancellationParent=pe;var $e=pe._branchesRemainingToCancel;void 0===$e&&($e=0),pe._branchesRemainingToCancel=$e+1}0!=(2&Ie)&&pe._isBound()&&this._setBoundTo(pe._boundTo)}function C(){var pe=this._boundTo;return void 0!==pe&&pe instanceof u?pe.isFulfilled()?pe.value():void 0:pe}function D(){this._trace=new de(this._peekContext())}function S(pe,Ie){if(At(pe)){var $e=this._trace;if(void 0!==$e&&Ie&&($e=$e._parent),void 0!==$e)$e.attachExtraTrace(pe);else if(!pe.__stackCleaned__){var st=$(pe);Ve.notEnumerableProp(pe,"stack",st.message+"\n"+st.stack.join("\n")),Ve.notEnumerableProp(pe,"__stackCleaned__",!0)}}}function M(){this._trace=void 0}function W(pe,Ie,$e){if(We.warnings){var st,Nt=new we(pe);if(Ie)$e._attachExtraTrace(Nt);else if(We.longStackTraces&&(st=u._peekContext()))st.attachExtraTrace(Nt);else{var Pt=$(Nt);Nt.stack=Pt.message+"\n"+Pt.stack.join("\n")}tn("warning",Nt)||V(Nt,"",!0)}}function Z(pe){for(var Ie=[],$e=0;$e<pe.length;++$e){var st=pe[$e],Nt="    (No stack trace)"===st||Ze.test(st),Pt=Nt&&Ee(st);Nt&&!Pt&&(Re&&" "!==st.charAt(0)&&(st="    "+st),Ie.push(st))}return Ie}function $(pe){var Ie=pe.stack,$e=pe.toString();return Ie="string"==typeof Ie&&Ie.length>0?function X(pe){for(var Ie=pe.stack.replace(/\s+$/g,"").split("\n"),$e=0;$e<Ie.length;++$e){var st=Ie[$e];if("    (No stack trace)"===st||Ze.test(st))break}return $e>0&&"SyntaxError"!=pe.name&&(Ie=Ie.slice($e)),Ie}(pe):["    (No stack trace)"],{message:$e,stack:"SyntaxError"==pe.name?Ie:Z(Ie)}}function V(pe,Ie,$e){var st;typeof console<"u"&&(st=Ve.isObject(pe)?Ie+Ne(pe.stack,pe):Ie+String(pe),"function"==typeof it?it(st,$e):("function"==typeof console.log||"object"==typeof console.log)&&console.log(st))}function De(pe,Ie,$e,st){var Nt=!1;try{"function"==typeof Ie&&(Nt=!0,"rejectionHandled"===pe?Ie(st):Ie($e,st))}catch(Pt){Ce.throwLater(Pt)}"unhandledRejection"===pe?tn(pe,$e,st)||Nt||V($e,"Unhandled rejection "):tn(pe,st)}function fe(pe){var Ie;if("function"==typeof pe)Ie="[function "+(pe.name||"anonymous")+"]";else{if(Ie=pe&&"function"==typeof pe.toString?pe.toString():Ve.toString(pe),/\[object [a-zA-Z0-9$_]+\]/.test(Ie))try{Ie=JSON.stringify(pe)}catch{}0===Ie.length&&(Ie="(empty array)")}return"(<"+function je(pe){return pe.length<41?pe:pe.substr(0,38)+"..."}(Ie)+">, no stack trace)"}function Se(){return"function"==typeof Ae}function rt(pe){var Ie=pe.match(_e);return Ie?{fileName:Ie[1],line:parseInt(Ie[2],10)}:void 0}function de(pe){this._parent=pe,this._promisesCreated=0;var Ie=this._length=1+(void 0===pe?0:pe._length);Ae(this,de),Ie>32&&this.uncycle()}var _t,be,it,mt,Ce=u._async,we=r("./errors").Warning,Ve=r("./util"),bt=r("./es5"),At=Ve.canAttachTrace,St=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,Pe=/\((?:timers\.js):\d+:\d+\)/,ae=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,Ze=null,Ne=null,Re=!1,ze=!(0==Ve.env("BLUEBIRD_DEBUG")||!Ve.env("BLUEBIRD_DEBUG")&&"development"!==Ve.env("NODE_ENV")),Qe=!(0==Ve.env("BLUEBIRD_WARNINGS")||!ze&&!Ve.env("BLUEBIRD_WARNINGS")),ot=!(0==Ve.env("BLUEBIRD_LONG_STACK_TRACES")||!ze&&!Ve.env("BLUEBIRD_LONG_STACK_TRACES")),Lt=0!=Ve.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Qe||!!Ve.env("BLUEBIRD_W_FORGOTTEN_RETURN"));(function(){function pe(){for(var st=0;st<$e.length;++st)$e[st]._notifyUnhandledRejection();Ie()}function Ie(){$e.length=0}var $e=[];mt=function(st){$e.push(st),setTimeout(pe,1)},bt.defineProperty(u,"_unhandledRejectionCheck",{value:pe}),bt.defineProperty(u,"_unhandledRejectionClear",{value:Ie})})(),u.prototype.suppressUnhandledRejections=function(){var pe=this._target();pe._bitField=-1048577&pe._bitField|524288},u.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),mt(this))},u.prototype._notifyUnhandledRejectionIsHandled=function(){De("rejectionHandled",_t,void 0,this)},u.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},u.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},u.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var pe=this._settledValue();this._setUnhandledRejectionIsNotified(),De("unhandledRejection",be,pe,this)}},u.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},u.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},u.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},u.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},u.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},u.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},u.prototype._warn=function(pe,Ie,$e){return W(pe,Ie,$e||this)},u.onPossiblyUnhandledRejection=function(pe){var Ie=u._getContext();be=Ve.contextBind(Ie,pe)},u.onUnhandledRejectionHandled=function(pe){var Ie=u._getContext();_t=Ve.contextBind(Ie,pe)};var Ot=function(){};u.longStackTraces=function(){if(Ce.haveItemsQueued()&&!We.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!We.longStackTraces&&Se()){var pe=u.prototype._captureStackTrace,Ie=u.prototype._attachExtraTrace,$e=u.prototype._dereferenceTrace;We.longStackTraces=!0,Ot=function(){if(Ce.haveItemsQueued()&&!We.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");u.prototype._captureStackTrace=pe,u.prototype._attachExtraTrace=Ie,u.prototype._dereferenceTrace=$e,s.deactivateLongStackTraces(),We.longStackTraces=!1},u.prototype._captureStackTrace=D,u.prototype._attachExtraTrace=S,u.prototype._dereferenceTrace=M,s.activateLongStackTraces()}},u.hasLongStackTraces=function(){return We.longStackTraces&&Se()};var Bt={unhandledrejection:{before:function(){var pe=Ve.global.onunhandledrejection;return Ve.global.onunhandledrejection=null,pe},after:function(pe){Ve.global.onunhandledrejection=pe}},rejectionhandled:{before:function(){var pe=Ve.global.onrejectionhandled;return Ve.global.onrejectionhandled=null,pe},after:function(pe){Ve.global.onrejectionhandled=pe}}},Ft=function(){var pe=function($e,st){if(!$e)return!Ve.global.dispatchEvent(st);var Nt;try{return Nt=$e.before(),!Ve.global.dispatchEvent(st)}finally{$e.after(Nt)}};try{if("function"==typeof CustomEvent){var Ie=new CustomEvent("CustomEvent");return Ve.global.dispatchEvent(Ie),function(st,Nt){st=st.toLowerCase();var et=new CustomEvent(st,{detail:Nt,cancelable:!0});return bt.defineProperty(et,"promise",{value:Nt.promise}),bt.defineProperty(et,"reason",{value:Nt.reason}),pe(Bt[st],et)}}return"function"==typeof Event?(Ie=new Event("CustomEvent"),Ve.global.dispatchEvent(Ie),function(st,Nt){st=st.toLowerCase();var Pt=new Event(st,{cancelable:!0});return Pt.detail=Nt,bt.defineProperty(Pt,"promise",{value:Nt.promise}),bt.defineProperty(Pt,"reason",{value:Nt.reason}),pe(Bt[st],Pt)}):((Ie=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),Ve.global.dispatchEvent(Ie),function($e,st){$e=$e.toLowerCase();var Nt=document.createEvent("CustomEvent");return Nt.initCustomEvent($e,!1,!0,st),pe(Bt[$e],Nt)})}catch{}return function(){return!1}}(),It=Ve.isNode?function(){return process.emit.apply(process,arguments)}:Ve.global?function(pe){var Ie="on"+pe.toLowerCase(),$e=Ve.global[Ie];return!!$e&&($e.apply(Ve.global,[].slice.call(arguments,1)),!0)}:function(){return!1},Kt={promiseCreated:l,promiseFulfilled:l,promiseRejected:l,promiseResolved:l,promiseCancelled:l,promiseChained:function(pe,Ie,$e){return{promise:Ie,child:$e}},warning:function(pe,Ie){return{warning:Ie}},unhandledRejection:function(pe,Ie,$e){return{reason:Ie,promise:$e}},rejectionHandled:l},tn=function(pe){var Ie=!1;try{Ie=It.apply(null,arguments)}catch(st){Ce.throwLater(st),Ie=!0}var $e=!1;try{$e=Ft(pe,Kt[pe].apply(null,arguments))}catch(st){Ce.throwLater(st),$e=!0}return $e||Ie};u.config=function(pe){if("longStackTraces"in(pe=Object(pe))&&(pe.longStackTraces?u.longStackTraces():!pe.longStackTraces&&u.hasLongStackTraces()&&Ot()),"warnings"in pe){var Ie=pe.warnings;We.warnings=!!Ie,Lt=We.warnings,Ve.isObject(Ie)&&"wForgottenReturn"in Ie&&(Lt=!!Ie.wForgottenReturn)}if("cancellation"in pe&&pe.cancellation&&!We.cancellation){if(Ce.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");u.prototype._clearCancellationData=p,u.prototype._propagateFrom=m,u.prototype._onCancel=h,u.prototype._setOnCancel=y,u.prototype._attachCancellationCallback=_,u.prototype._execute=c,en=m,We.cancellation=!0}if("monitoring"in pe&&(pe.monitoring&&!We.monitoring?(We.monitoring=!0,u.prototype._fireEvent=tn):!pe.monitoring&&We.monitoring&&(We.monitoring=!1,u.prototype._fireEvent=I)),"asyncHooks"in pe&&Ve.nodeSupportsAsyncResource){var st=!!pe.asyncHooks;We.asyncHooks!==st&&(We.asyncHooks=st,st?f():v())}return u},u.prototype._fireEvent=I,u.prototype._execute=function(pe,Ie,$e){try{pe(Ie,$e)}catch(st){return st}},u.prototype._onCancel=function(){},u.prototype._setOnCancel=function(pe){},u.prototype._attachCancellationCallback=function(pe){},u.prototype._captureStackTrace=function(){},u.prototype._attachExtraTrace=function(){},u.prototype._dereferenceTrace=function(){},u.prototype._clearCancellationData=function(){},u.prototype._propagateFrom=function(pe,Ie){};var en=function T(pe,Ie){0!=(2&Ie)&&pe._isBound()&&this._setBoundTo(pe._boundTo)},Ee=function(){return!1},_e=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;Ve.inherits(de,Error),s.CapturedTrace=de,de.prototype.uncycle=function(){var pe=this._length;if(!(2>pe)){for(var Ie=[],$e={},st=0,Nt=this;void 0!==Nt;++st)Ie.push(Nt),Nt=Nt._parent;for(st=(pe=this._length=st)-1;st>=0;--st){var Pt=Ie[st].stack;void 0===$e[Pt]&&($e[Pt]=st)}for(st=0;pe>st;++st){var lt=$e[Ie[st].stack];if(void 0!==lt&&lt!==st){lt>0&&(Ie[lt-1]._parent=void 0,Ie[lt-1]._length=1),Ie[st]._parent=void 0,Ie[st]._length=1;var Ut=st>0?Ie[st-1]:this;pe-1>lt?(Ut._parent=Ie[lt+1],Ut._parent.uncycle(),Ut._length=Ut._parent._length+1):(Ut._parent=void 0,Ut._length=1);for(var xt=Ut._length+1,wn=st-2;wn>=0;--wn)Ie[wn]._length=xt,xt++;return}}}},de.prototype.attachExtraTrace=function(pe){if(!pe.__stackCleaned__){this.uncycle();for(var Ie=$(pe),$e=Ie.message,st=[Ie.stack],Nt=this;void 0!==Nt;)st.push(Z(Nt.stack.split("\n"))),Nt=Nt._parent;(function H(pe){for(var Ie=pe[0],$e=1;$e<pe.length;++$e){for(var st=pe[$e],Nt=Ie.length-1,Pt=Ie[Nt],et=-1,lt=st.length-1;lt>=0;--lt)if(st[lt]===Pt){et=lt;break}for(lt=et;lt>=0&&Ie[Nt]===st[lt];--lt)Ie.pop(),Nt--;Ie=st}})(st),function U(pe){for(var Ie=0;Ie<pe.length;++Ie)(0===pe[Ie].length||Ie+1<pe.length&&pe[Ie][0]===pe[Ie+1][0])&&(pe.splice(Ie,1),Ie--)}(st),Ve.notEnumerableProp(pe,"stack",function F(pe,Ie){for(var $e=0;$e<Ie.length-1;++$e)Ie[$e].push("From previous event:"),Ie[$e]=Ie[$e].join("\n");return $e<Ie.length&&(Ie[$e]=Ie[$e].join("\n")),pe+"\n"+Ie.join("\n")}($e,st)),Ve.notEnumerableProp(pe,"__stackCleaned__",!0)}};var Ae=function(){var pe=/^\s*at\s*/,Ie=function(Pt,et){return"string"==typeof Pt?Pt:void 0!==et.name&&void 0!==et.message?et.toString():fe(et)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,Ze=pe,Ne=Ie;var $e=Error.captureStackTrace;return Ee=function(Pt){return St.test(Pt)},function(Pt,et){Error.stackTraceLimit+=6,$e(Pt,et),Error.stackTraceLimit-=6}}var Nt,st=new Error;if("string"==typeof st.stack&&st.stack.split("\n")[0].indexOf("stackDetection@")>=0)return Ze=/@/,Ne=Ie,Re=!0,function(Pt){Pt.stack=(new Error).stack};try{throw new Error}catch(Pt){Nt="stack"in Pt}return"stack"in st||!Nt||"number"!=typeof Error.stackTraceLimit?(Ne=function(Pt,et){return"string"==typeof Pt?Pt:"object"!=typeof et&&"function"!=typeof et||void 0===et.name||void 0===et.message?fe(et):et.toString()},null):(Ze=pe,Ne=Ie,function(Pt){Error.stackTraceLimit+=6;try{throw new Error}catch(et){Pt.stack=et.stack}Error.stackTraceLimit-=6})}();typeof console<"u"&&typeof console.warn<"u"&&(it=function(pe){console.warn(pe)},Ve.isNode&&process.stderr.isTTY?it=function(pe,Ie){console.warn((Ie?"\x1b[33m":"\x1b[31m")+pe+"\x1b[0m\n")}:Ve.isNode||"string"!=typeof(new Error).stack||(it=function(pe,Ie){console.warn("%c"+pe,Ie?"color: darkorange":"color: red")}));var We={warnings:Qe,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return ot&&u.longStackTraces(),{asyncHooks:function(){return We.asyncHooks},longStackTraces:function(){return We.longStackTraces},warnings:function(){return We.warnings},cancellation:function(){return We.cancellation},monitoring:function(){return We.monitoring},propagateFromFunction:function(){return en},boundValueFunction:function(){return C},checkForgottenReturns:function G(pe,Ie,$e,st,Nt){if(void 0===pe&&null!==Ie&&Lt){if(void 0!==Nt&&Nt._returnedNonUndefined()||0==(65535&st._bitField))return;$e&&($e+=" ");var Pt="",et="";if(Ie._trace){for(var lt=Ie._trace.stack.split("\n"),Ut=Z(lt),xt=Ut.length-1;xt>=0;--xt){var wn=Ut[xt];if(!Pe.test(wn)){var Ln=wn.match(ae);Ln&&(Pt="at "+Ln[1]+":"+Ln[2]+":"+Ln[3]+" ");break}}if(Ut.length>0){var Cn=Ut[0];for(xt=0;xt<lt.length;++xt)if(lt[xt]===Cn){xt>0&&(et="\n"+lt[xt-1]);break}}}st._warn("a promise was created in a "+$e+"handler "+Pt+"but was not returned from it, see http://goo.gl/rRqMUw"+et,!0,Ie)}},setBounds:function tt(pe,Ie){if(Se()){for(var $e,st,Nt=(pe.stack||"").split("\n"),Pt=(Ie.stack||"").split("\n"),et=-1,lt=-1,Ut=0;Ut<Nt.length;++Ut)if(xt=rt(Nt[Ut])){$e=xt.fileName,et=xt.line;break}for(Ut=0;Ut<Pt.length;++Ut){var xt;if(xt=rt(Pt[Ut])){st=xt.fileName,lt=xt.line;break}}0>et||0>lt||!$e||!st||$e!==st||et>=lt||(Ee=function(wn){if(St.test(wn))return!0;var Ln=rt(wn);return!!(Ln&&Ln.fileName===$e&&et<=Ln.line&&Ln.line<=lt)})}},warn:W,deprecated:function L(pe,Ie){var $e=pe+" is deprecated and will be removed in a future version.";return Ie&&($e+=" Use "+Ie+" instead."),W($e)},CapturedTrace:de,fireDomEvent:Ft,fireGlobalEvent:It}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(r,a,o){a.exports=function(u){function s(){return this.value}function f(){throw this.reason}u.prototype.return=u.prototype.thenReturn=function(v){return v instanceof u&&v.suppressUnhandledRejections(),this._then(s,void 0,void 0,{value:v},void 0)},u.prototype.throw=u.prototype.thenThrow=function(v){return this._then(f,void 0,void 0,{reason:v},void 0)},u.prototype.catchThrow=function(v){if(arguments.length<=1)return this._then(void 0,f,void 0,{reason:v},void 0);var l=arguments[1],I=function(){throw l};return this.caught(v,I)},u.prototype.catchReturn=function(v){if(arguments.length<=1)return v instanceof u&&v.suppressUnhandledRejections(),this._then(void 0,s,void 0,{value:v},void 0);var l=arguments[1];l instanceof u&&l.suppressUnhandledRejections();var I=function(){return l};return this.caught(v,I)}}},{}],11:[function(r,a,o){a.exports=function(u,s){function f(){return I(this)}var l=u.reduce,I=u.all;u.prototype.each=function(c){return l(this,c,s,0)._then(f,void 0,void 0,this,void 0)},u.prototype.mapSeries=function(c){return l(this,c,s,s)},u.each=function(c,_){return l(c,_,s,0)._then(f,void 0,void 0,c,void 0)},u.mapSeries=function v(c,_){return l(c,_,s,s)}}},{}],12:[function(r,a,o){function u(G,L){function W(F){return this instanceof W?(h(this,"message","string"==typeof F?F:L),h(this,"name",G),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new W(F)}return _(W,Error),W}function s(G){return this instanceof s?(h(this,"name","OperationalError"),h(this,"message",G),this.cause=G,this.isOperational=!0,void(G instanceof Error?(h(this,"message",G.message),h(this,"stack",G.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new s(G)}var f,v,l=r("./es5"),I=l.freeze,c=r("./util"),_=c.inherits,h=c.notEnumerableProp,y=u("Warning","warning"),p=u("CancellationError","cancellation error"),m=u("TimeoutError","timeout error"),T=u("AggregateError","aggregate error");try{f=TypeError,v=RangeError}catch{f=u("TypeError","type error"),v=u("RangeError","range error")}for(var C="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),D=0;D<C.length;++D)"function"==typeof Array.prototype[C[D]]&&(T.prototype[C[D]]=Array.prototype[C[D]]);l.defineProperty(T.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),T.prototype.isOperational=!0;var S=0;T.prototype.toString=function(){var G=Array(4*S+1).join(" "),L="\n"+G+"AggregateError of:\n";S++,G=Array(4*S+1).join(" ");for(var W=0;W<this.length;++W){for(var F=this[W]===this?"[Circular AggregateError]":this[W]+"",U=F.split("\n"),H=0;H<U.length;++H)U[H]=G+U[H];L+=(F=U.join("\n"))+"\n"}return S--,L},_(s,Error);var M=Error.__BluebirdErrorTypes__;M||(M=I({CancellationError:p,TimeoutError:m,OperationalError:s,RejectionError:s,AggregateError:T}),l.defineProperty(Error,"__BluebirdErrorTypes__",{value:M,writable:!1,enumerable:!1,configurable:!1})),a.exports={Error,TypeError:f,RangeError:v,CancellationError:M.CancellationError,OperationalError:M.OperationalError,TimeoutError:M.TimeoutError,AggregateError:M.AggregateError,Warning:y}},{"./es5":13,"./util":36}],13:[function(r,a,o){var u=function(){return void 0===this}();if(u)a.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:u,propertyIsWritable:function(p,m){var T=Object.getOwnPropertyDescriptor(p,m);return!(T&&!T.writable&&!T.set)}};else{var s={}.hasOwnProperty,f={}.toString,v={}.constructor.prototype,l=function(p){var m=[];for(var T in p)s.call(p,T)&&m.push(T);return m};a.exports={isArray:function(p){try{return"[object Array]"===f.call(p)}catch{return!1}},keys:l,names:l,defineProperty:function(p,m,T){return p[m]=T.value,p},getDescriptor:function(p,m){return{value:p[m]}},freeze:function(p){return p},getPrototypeOf:function(p){try{return Object(p).constructor.prototype}catch{return v}},isES5:u,propertyIsWritable:function(){return!0}}}},{}],14:[function(r,a,o){a.exports=function(u,s){var f=u.map;u.prototype.filter=function(v,l){return f(this,v,l,s)},u.filter=function(v,l,I){return f(v,l,I,s)}}},{}],15:[function(r,a,o){a.exports=function(u,s,f){function v(C,D,S){this.promise=C,this.type=D,this.handler=S,this.called=!1,this.cancelPromise=null}function l(C){this.finallyHandler=C}function I(C,D){return null!=C.cancelPromise&&(arguments.length>1?C.cancelPromise._reject(D):C.cancelPromise._cancel(),C.cancelPromise=null,!0)}function c(){return h.call(this,this.promise._target()._settledValue())}function _(C){return I(this,C)?void 0:(m.e=C,m)}function h(C){var D=this.promise,S=this.handler;if(!this.called){this.called=!0;var M=this.isFinallyHandler()?S.call(D._boundValue()):S.call(D._boundValue(),C);if(M===f)return M;if(void 0!==M){D._setReturnedNonUndefined();var G=s(M,D);if(G instanceof u){if(null!=this.cancelPromise){if(G._isCancelled()){var L=new p("late cancellation observer");return D._attachExtraTrace(L),m.e=L,m}G.isPending()&&G._attachCancellationCallback(new l(this))}return G._then(c,_,void 0,this,void 0)}}}return D.isRejected()?(I(this),m.e=C,m):(I(this),C)}var y=r("./util"),p=u.CancellationError,m=y.errorObj,T=r("./catch_filter")(f);return v.prototype.isFinallyHandler=function(){return 0===this.type},l.prototype._resultCancelled=function(){I(this.finallyHandler)},u.prototype._passThrough=function(C,D,S,M){return"function"!=typeof C?this.then():this._then(S,M,void 0,new v(this,D,C),void 0)},u.prototype.lastly=u.prototype.finally=function(C){return this._passThrough(C,0,h,h)},u.prototype.tap=function(C){return this._passThrough(C,1,h)},u.prototype.tapCatch=function(C){var D=arguments.length;if(1===D)return this._passThrough(C,1,void 0,h);var S,M=new Array(D-1),G=0;for(S=0;D-1>S;++S){var L=arguments[S];if(!y.isObject(L))return u.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+y.classString(L)));M[G++]=L}M.length=G;var W=arguments[S];return this._passThrough(T(M,W,this),1,void 0,h)},v}},{"./catch_filter":7,"./util":36}],16:[function(r,a,o){a.exports=function(u,s,f,v,l,I){function _(D,S,M,G){if(I.cancellation()){var L=new u(f),W=this._finallyPromise=new u(f);this._promise=L.lastly(function(){return W}),L._captureStackTrace(),L._setOnCancel(this)}else(this._promise=new u(f))._captureStackTrace();this._stack=G,this._generatorFunction=D,this._receiver=S,this._generator=void 0,this._yieldHandlers="function"==typeof M?[M].concat(C):C,this._yieldedPromise=null,this._cancellationPhase=!1}var y=r("./errors").TypeError,p=r("./util"),m=p.errorObj,T=p.tryCatch,C=[];p.inherits(_,l),_.prototype._isResolved=function(){return null===this._promise},_.prototype._cleanup=function(){this._promise=this._generator=null,I.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},_.prototype._promiseCancelled=function(){if(!this._isResolved()){var D;if(typeof this._generator.return<"u")this._promise._pushContext(),D=T(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var M=new u.CancellationError("generator .return() sentinel");u.coroutine.returnSentinel=M,this._promise._attachExtraTrace(M),this._promise._pushContext(),D=T(this._generator.throw).call(this._generator,M),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(D)}},_.prototype._promiseFulfilled=function(D){this._yieldedPromise=null,this._promise._pushContext();var S=T(this._generator.next).call(this._generator,D);this._promise._popContext(),this._continue(S)},_.prototype._promiseRejected=function(D){this._yieldedPromise=null,this._promise._attachExtraTrace(D),this._promise._pushContext();var S=T(this._generator.throw).call(this._generator,D);this._promise._popContext(),this._continue(S)},_.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof u){var D=this._yieldedPromise;this._yieldedPromise=null,D.cancel()}},_.prototype.promise=function(){return this._promise},_.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},_.prototype._continue=function(D){var S=this._promise;if(D===m)return this._cleanup(),this._cancellationPhase?S.cancel():S._rejectCallback(D.e,!1);var M=D.value;if(!0===D.done)return this._cleanup(),this._cancellationPhase?S.cancel():S._resolveCallback(M);var G=v(M,this._promise);if(G instanceof u||(G=function c(D,S,M){for(var G=0;G<S.length;++G){M._pushContext();var L=T(S[G])(D);if(M._popContext(),L===m){M._pushContext();var W=u.reject(m.e);return M._popContext(),W}var F=v(L,M);if(F instanceof u)return F}return null}(G,this._yieldHandlers,this._promise),null!==G)){var L=(G=G._target())._bitField;0==(50397184&L)?(this._yieldedPromise=G,G._proxy(this,null)):0!=(33554432&L)?u._async.invoke(this._promiseFulfilled,this,G._value()):0!=(16777216&L)?u._async.invoke(this._promiseRejected,this,G._reason()):this._promiseCancelled()}else this._promiseRejected(new y("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(M))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},u.coroutine=function(D,S){if("function"!=typeof D)throw new y("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var M=Object(S).yieldHandler,G=_,L=(new Error).stack;return function(){var W=D.apply(this,arguments),F=new G(void 0,void 0,M,L),U=F.promise();return F._generator=W,F._promiseFulfilled(void 0),U}},u.coroutine.addYieldHandler=function(D){if("function"!=typeof D)throw new y("expecting a function but got "+p.classString(D));C.push(D)},u.spawn=function(D){if(I.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof D)return s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var S=new _(D,this),M=S.promise();return S._run(u.spawn),M}}},{"./errors":12,"./util":36}],17:[function(r,a,o){a.exports=function(u,s,f,v,l){r("./util"),u.join=function(){var c,_=arguments.length-1;_>0&&"function"==typeof arguments[_]&&(c=arguments[_]);var h=[].slice.call(arguments);c&&h.pop();var y=new s(h).promise();return void 0!==c?y.spread(c):y}}},{"./util":36}],18:[function(r,a,o){a.exports=function(u,s,f,v,l,I){function c(T,C,D,S){this.constructor$(T),this._promise._captureStackTrace();var M=u._getContext();if(this._callback=h.contextBind(M,C),this._preservedValues=S===l?new Array(this.length()):null,this._limit=D,this._inFlight=0,this._queue=[],m.invoke(this._asyncInit,this,void 0),h.isArray(T))for(var G=0;G<T.length;++G){var L=T[G];L instanceof u&&L.suppressUnhandledRejections()}}function _(T,C,D,S){if("function"!=typeof C)return f("expecting a function but got "+h.classString(C));var M=0;if(void 0!==D){if("object"!=typeof D||null===D)return u.reject(new TypeError("options argument must be an object but it is "+h.classString(D)));if("number"!=typeof D.concurrency)return u.reject(new TypeError("'concurrency' must be a number but it is "+h.classString(D.concurrency)));M=D.concurrency}return new c(T,C,M="number"==typeof M&&isFinite(M)&&M>=1?M:0,S).promise()}var h=r("./util"),y=h.tryCatch,p=h.errorObj,m=u._async;h.inherits(c,s),c.prototype._asyncInit=function(){this._init$(void 0,-2)},c.prototype._init=function(){},c.prototype._promiseFulfilled=function(T,C){var D=this._values,S=this.length(),M=this._preservedValues,G=this._limit;if(0>C){if(D[C=-1*C-1]=T,G>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(G>=1&&this._inFlight>=G)return D[C]=T,this._queue.push(C),!1;null!==M&&(M[C]=T);var L=this._promise,W=this._callback,F=L._boundValue();L._pushContext();var U=y(W).call(F,T,C,S),H=L._popContext();if(I.checkForgottenReturns(U,H,null!==M?"Promise.filter":"Promise.map",L),U===p)return this._reject(U.e),!0;var Z=v(U,this._promise);if(Z instanceof u){var X=(Z=Z._target())._bitField;if(0==(50397184&X))return G>=1&&this._inFlight++,D[C]=Z,Z._proxy(this,-1*(C+1)),!1;if(0==(33554432&X))return 0!=(16777216&X)?(this._reject(Z._reason()),!0):(this._cancel(),!0);U=Z._value()}D[C]=U}return++this._totalResolved>=S&&(null!==M?this._filter(D,M):this._resolve(D),!0)},c.prototype._drainQueue=function(){for(var T=this._queue,C=this._limit,D=this._values;T.length>0&&this._inFlight<C;){if(this._isResolved())return;var S=T.pop();this._promiseFulfilled(D[S],S)}},c.prototype._filter=function(T,C){for(var D=C.length,S=new Array(D),M=0,G=0;D>G;++G)T[G]&&(S[M++]=C[G]);S.length=M,this._resolve(S)},c.prototype.preservedValues=function(){return this._preservedValues},u.prototype.map=function(T,C){return _(this,T,C,null)},u.map=function(T,C,D,S){return _(T,C,D,S)}}},{"./util":36}],19:[function(r,a,o){a.exports=function(u,s,f,v,l){var I=r("./util"),c=I.tryCatch;u.method=function(_){if("function"!=typeof _)throw new u.TypeError("expecting a function but got "+I.classString(_));return function(){var h=new u(s);h._captureStackTrace(),h._pushContext();var y=c(_).apply(this,arguments),p=h._popContext();return l.checkForgottenReturns(y,p,"Promise.method",h),h._resolveFromSyncValue(y),h}},u.attempt=u.try=function(_){if("function"!=typeof _)return v("expecting a function but got "+I.classString(_));var y,h=new u(s);if(h._captureStackTrace(),h._pushContext(),arguments.length>1){l.deprecated("calling Promise.try with more than 1 argument");var p=arguments[1],m=arguments[2];y=I.isArray(p)?c(_).apply(m,p):c(_).call(m,p)}else y=c(_)();var T=h._popContext();return l.checkForgottenReturns(y,T,"Promise.try",h),h._resolveFromSyncValue(y),h},u.prototype._resolveFromSyncValue=function(_){_===I.errorObj?this._rejectCallback(_.e,!1):this._resolveCallback(_,!0)}}},{"./util":36}],20:[function(r,a,o){function s(y){var p;if(function u(y){return y instanceof Error&&_.getPrototypeOf(y)===Error.prototype}(y)){(p=new c(y)).name=y.name,p.message=y.message,p.stack=y.stack;for(var m=_.keys(y),T=0;T<m.length;++T){var C=m[T];h.test(C)||(p[C]=y[C])}return p}return v.markAsOriginatingFromRejection(y),y}var v=r("./util"),l=v.maybeWrapAsError,c=r("./errors").OperationalError,_=r("./es5"),h=/^(?:name|message|stack|cause)$/;a.exports=function f(y,p){return function(m,T){if(null!==y){if(m){var C=s(l(m));y._attachExtraTrace(C),y._reject(C)}else if(p){var D=[].slice.call(arguments,1);y._fulfill(D)}else y._fulfill(T);y=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(r,a,o){a.exports=function(u){function s(h,y){if(!l.isArray(h))return f.call(this,h,y);var m=c(y).apply(this._boundValue(),[null].concat(h));m===_&&I.throwLater(m.e)}function f(h,y){var m=this._boundValue(),T=void 0===h?c(y).call(m,null):c(y).call(m,null,h);T===_&&I.throwLater(T.e)}function v(h,y){if(!h){var m=new Error(h+"");m.cause=h,h=m}var T=c(y).call(this._boundValue(),h);T===_&&I.throwLater(T.e)}var l=r("./util"),I=u._async,c=l.tryCatch,_=l.errorObj;u.prototype.asCallback=u.prototype.nodeify=function(h,y){if("function"==typeof h){var p=f;void 0!==y&&Object(y).spread&&(p=s),this._then(p,v,void 0,this,h)}return this}}},{"./util":36}],22:[function(r,a,o){a.exports=function(){function u(){}function f(Ce){Ce!==$&&function s(Ce,we){if(null==Ce||Ce.constructor!==f)throw new Z("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof we)throw new Z("expecting a function but got "+p.classString(we))}(this,Ce),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(Ce),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function v(Ce){this.promise._resolveCallback(Ce)}function l(Ce){this.promise._rejectCallback(Ce,!1)}function I(Ce){var we=new f($);we._fulfillmentHandler0=Ce,we._rejectionHandler0=Ce,we._promise0=Ce,we._receiver0=Ce}var c=function(){return new Z("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},_=function(){return new f.PromiseInspection(this._target())},h=function(Ce){return f.reject(new Z(Ce))},y={},p=r("./util");p.setReflectHandler(_);var m=function(){var Ce=process.domain;return void 0===Ce?null:Ce},C=function(){return{domain:m(),async:null}},D=p.isNode&&p.nodeSupportsAsyncResource?r("async_hooks").AsyncResource:null,S=function(){return{domain:m(),async:new D("Bluebird::Promise")}},M=p.isNode?C:function(){return null};p.notEnumerableProp(f,"_getContext",M);var W=r("./es5"),F=r("./async"),U=new F;W.defineProperty(f,"_async",{value:U});var H=r("./errors"),Z=f.TypeError=H.TypeError;f.RangeError=H.RangeError;var X=f.CancellationError=H.CancellationError;f.TimeoutError=H.TimeoutError,f.OperationalError=H.OperationalError,f.RejectionError=H.OperationalError,f.AggregateError=H.AggregateError;var $=function(){},V={},De={},fe=r("./thenables")(f,$),je=r("./promise_array")(f,$,fe,h,u),Se=r("./context")(f),rt=Se.create,tt=r("./debuggability")(f,Se,function(){M=S,p.notEnumerableProp(f,"_getContext",S)},function(){M=C,p.notEnumerableProp(f,"_getContext",C)}),de=r("./finally")(f,fe,De),_t=r("./catch_filter")(De),be=r("./nodeback"),it=p.errorObj,mt=p.tryCatch;return f.prototype.toString=function(){return"[object Promise]"},f.prototype.caught=f.prototype.catch=function(Ce){var we=arguments.length;if(we>1){var Ve,bt=new Array(we-1),At=0;for(Ve=0;we-1>Ve;++Ve){var St=arguments[Ve];if(!p.isObject(St))return h("Catch statement predicate: expecting an object but got "+p.classString(St));bt[At++]=St}if(bt.length=At,"function"!=typeof(Ce=arguments[Ve]))throw new Z("The last argument to .catch() must be a function, got "+p.toString(Ce));return this.then(void 0,_t(bt,Ce,this))}return this.then(void 0,Ce)},f.prototype.reflect=function(){return this._then(_,_,void 0,this,void 0)},f.prototype.then=function(Ce,we){if(tt.warnings()&&arguments.length>0&&"function"!=typeof Ce&&"function"!=typeof we){var Ve=".then() only accepts functions but was passed: "+p.classString(Ce);arguments.length>1&&(Ve+=", "+p.classString(we)),this._warn(Ve)}return this._then(Ce,we,void 0,void 0,void 0)},f.prototype.done=function(Ce,we){this._then(Ce,we,void 0,void 0,void 0)._setIsFinal()},f.prototype.spread=function(Ce){return"function"!=typeof Ce?h("expecting a function but got "+p.classString(Ce)):this.all()._then(Ce,void 0,void 0,V,void 0)},f.prototype.toJSON=function(){var Ce={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(Ce.fulfillmentValue=this.value(),Ce.isFulfilled=!0):this.isRejected()&&(Ce.rejectionReason=this.reason(),Ce.isRejected=!0),Ce},f.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new je(this).promise()},f.prototype.error=function(Ce){return this.caught(p.originatesFromRejection,Ce)},f.getNewLibraryCopy=a.exports,f.is=function(Ce){return Ce instanceof f},f.fromNode=f.fromCallback=function(Ce){var we=new f($);we._captureStackTrace();var Ve=arguments.length>1&&!!Object(arguments[1]).multiArgs,bt=mt(Ce)(be(we,Ve));return bt===it&&we._rejectCallback(bt.e,!0),we._isFateSealed()||we._setAsyncGuaranteed(),we},f.all=function(Ce){return new je(Ce).promise()},f.cast=function(Ce){var we=fe(Ce);return we instanceof f||((we=new f($))._captureStackTrace(),we._setFulfilled(),we._rejectionHandler0=Ce),we},f.resolve=f.fulfilled=f.cast,f.reject=f.rejected=function(Ce){var we=new f($);return we._captureStackTrace(),we._rejectCallback(Ce,!0),we},f.setScheduler=function(Ce){if("function"!=typeof Ce)throw new Z("expecting a function but got "+p.classString(Ce));return U.setScheduler(Ce)},f.prototype._then=function(Ce,we,Ve,bt,At){var St=void 0!==At,Pe=St?At:new f($),ae=this._target(),Ze=ae._bitField;St||(Pe._propagateFrom(this,3),Pe._captureStackTrace(),void 0===bt&&0!=(2097152&this._bitField)&&(bt=0!=(50397184&Ze)?this._boundValue():ae===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,Pe));var Ne=M();if(0!=(50397184&Ze)){var Re,ze,Qe=ae._settlePromiseCtx;0!=(33554432&Ze)?(ze=ae._rejectionHandler0,Re=Ce):0!=(16777216&Ze)?(ze=ae._fulfillmentHandler0,Re=we,ae._unsetRejectionIsUnhandled()):(Qe=ae._settlePromiseLateCancellationObserver,ze=new X("late cancellation observer"),ae._attachExtraTrace(ze),Re=we),U.invoke(Qe,ae,{handler:p.contextBind(Ne,Re),promise:Pe,receiver:bt,value:ze})}else ae._addCallbacks(Ce,we,Pe,bt,Ne);return Pe},f.prototype._length=function(){return 65535&this._bitField},f.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},f.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},f.prototype._setLength=function(Ce){this._bitField=-65536&this._bitField|65535&Ce},f.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},f.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},f.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},f.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},f.prototype._isFinal=function(){return(4194304&this._bitField)>0},f.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},f.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},f.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},f.prototype._setAsyncGuaranteed=function(){if(!U.hasCustomScheduler()){var Ce=this._bitField;this._bitField=Ce|(536870912&Ce)>>2^134217728}},f.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},f.prototype._receiverAt=function(Ce){var we=0===Ce?this._receiver0:this[4*Ce-4+3];return we===y?void 0:void 0===we&&this._isBound()?this._boundValue():we},f.prototype._promiseAt=function(Ce){return this[4*Ce-4+2]},f.prototype._fulfillmentHandlerAt=function(Ce){return this[4*Ce-4+0]},f.prototype._rejectionHandlerAt=function(Ce){return this[4*Ce-4+1]},f.prototype._boundValue=function(){},f.prototype._migrateCallback0=function(Ce){var we=Ce._fulfillmentHandler0,Ve=Ce._rejectionHandler0,bt=Ce._promise0,At=Ce._receiverAt(0);void 0===At&&(At=y),this._addCallbacks(we,Ve,bt,At,null)},f.prototype._migrateCallbackAt=function(Ce,we){var Ve=Ce._fulfillmentHandlerAt(we),bt=Ce._rejectionHandlerAt(we),At=Ce._promiseAt(we),St=Ce._receiverAt(we);void 0===St&&(St=y),this._addCallbacks(Ve,bt,At,St,null)},f.prototype._addCallbacks=function(Ce,we,Ve,bt,At){var St=this._length();if(St>=65531&&(St=0,this._setLength(0)),0===St)this._promise0=Ve,this._receiver0=bt,"function"==typeof Ce&&(this._fulfillmentHandler0=p.contextBind(At,Ce)),"function"==typeof we&&(this._rejectionHandler0=p.contextBind(At,we));else{var Pe=4*St-4;this[Pe+2]=Ve,this[Pe+3]=bt,"function"==typeof Ce&&(this[Pe+0]=p.contextBind(At,Ce)),"function"==typeof we&&(this[Pe+1]=p.contextBind(At,we))}return this._setLength(St+1),St},f.prototype._proxy=function(Ce,we){this._addCallbacks(void 0,void 0,we,Ce,null)},f.prototype._resolveCallback=function(Ce,we){if(0==(117506048&this._bitField)){if(Ce===this)return this._rejectCallback(c(),!1);var Ve=fe(Ce,this);if(!(Ve instanceof f))return this._fulfill(Ce);we&&this._propagateFrom(Ve,2);var bt=Ve._target();if(bt===this)return void this._reject(c());var At=bt._bitField;if(0==(50397184&At)){var St=this._length();St>0&&bt._migrateCallback0(this);for(var Pe=1;St>Pe;++Pe)bt._migrateCallbackAt(this,Pe);this._setFollowing(),this._setLength(0),this._setFollowee(Ve)}else if(0!=(33554432&At))this._fulfill(bt._value());else if(0!=(16777216&At))this._reject(bt._reason());else{var ae=new X("late cancellation observer");bt._attachExtraTrace(ae),this._reject(ae)}}},f.prototype._rejectCallback=function(Ce,we,Ve){var bt=p.ensureErrorObject(Ce),At=bt===Ce;if(!At&&!Ve&&tt.warnings()){var St="a promise was rejected with a non-error: "+p.classString(Ce);this._warn(St,!0)}this._attachExtraTrace(bt,!!we&&At),this._reject(Ce)},f.prototype._resolveFromExecutor=function(Ce){if(Ce!==$){var we=this;this._captureStackTrace(),this._pushContext();var Ve=!0,bt=this._execute(Ce,function(At){we._resolveCallback(At)},function(At){we._rejectCallback(At,Ve)});Ve=!1,this._popContext(),void 0!==bt&&we._rejectCallback(bt,!0)}},f.prototype._settlePromiseFromHandler=function(Ce,we,Ve,bt){var At=bt._bitField;if(0==(65536&At)){var St;bt._pushContext(),we===V?Ve&&"number"==typeof Ve.length?St=mt(Ce).apply(this._boundValue(),Ve):(St=it).e=new Z("cannot .spread() a non-array: "+p.classString(Ve)):St=mt(Ce).call(we,Ve);var Pe=bt._popContext();0==(65536&(At=bt._bitField))&&(St===De?bt._reject(Ve):St===it?bt._rejectCallback(St.e,!1):(tt.checkForgottenReturns(St,Pe,"",bt,this),bt._resolveCallback(St)))}},f.prototype._target=function(){for(var Ce=this;Ce._isFollowing();)Ce=Ce._followee();return Ce},f.prototype._followee=function(){return this._rejectionHandler0},f.prototype._setFollowee=function(Ce){this._rejectionHandler0=Ce},f.prototype._settlePromise=function(Ce,we,Ve,bt){var At=Ce instanceof f,St=this._bitField,Pe=0!=(134217728&St);0!=(65536&St)?(At&&Ce._invokeInternalOnCancel(),Ve instanceof de&&Ve.isFinallyHandler()?(Ve.cancelPromise=Ce,mt(we).call(Ve,bt)===it&&Ce._reject(it.e)):we===_?Ce._fulfill(_.call(Ve)):Ve instanceof u?Ve._promiseCancelled(Ce):At||Ce instanceof je?Ce._cancel():Ve.cancel()):"function"==typeof we?At?(Pe&&Ce._setAsyncGuaranteed(),this._settlePromiseFromHandler(we,Ve,bt,Ce)):we.call(Ve,bt,Ce):Ve instanceof u?Ve._isResolved()||(0!=(33554432&St)?Ve._promiseFulfilled(bt,Ce):Ve._promiseRejected(bt,Ce)):At&&(Pe&&Ce._setAsyncGuaranteed(),0!=(33554432&St)?Ce._fulfill(bt):Ce._reject(bt))},f.prototype._settlePromiseLateCancellationObserver=function(Ce){var we=Ce.handler,Ve=Ce.promise,bt=Ce.receiver,At=Ce.value;"function"==typeof we?Ve instanceof f?this._settlePromiseFromHandler(we,bt,At,Ve):we.call(bt,At,Ve):Ve instanceof f&&Ve._reject(At)},f.prototype._settlePromiseCtx=function(Ce){this._settlePromise(Ce.promise,Ce.handler,Ce.receiver,Ce.value)},f.prototype._settlePromise0=function(Ce,we,Ve){var bt=this._promise0,At=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(bt,Ce,At,we)},f.prototype._clearCallbackDataAtIndex=function(Ce){var we=4*Ce-4;this[we+2]=this[we+3]=this[we+0]=this[we+1]=void 0},f.prototype._fulfill=function(Ce){var we=this._bitField;if(!((117506048&we)>>>16)){if(Ce===this){var Ve=c();return this._attachExtraTrace(Ve),this._reject(Ve)}this._setFulfilled(),this._rejectionHandler0=Ce,(65535&we)>0&&(0!=(134217728&we)?this._settlePromises():U.settlePromises(this),this._dereferenceTrace())}},f.prototype._reject=function(Ce){var we=this._bitField;if(!((117506048&we)>>>16))return this._setRejected(),this._fulfillmentHandler0=Ce,this._isFinal()?U.fatalError(Ce,p.isNode):void((65535&we)>0?U.settlePromises(this):this._ensurePossibleRejectionHandled())},f.prototype._fulfillPromises=function(Ce,we){for(var Ve=1;Ce>Ve;Ve++){var bt=this._fulfillmentHandlerAt(Ve),At=this._promiseAt(Ve),St=this._receiverAt(Ve);this._clearCallbackDataAtIndex(Ve),this._settlePromise(At,bt,St,we)}},f.prototype._rejectPromises=function(Ce,we){for(var Ve=1;Ce>Ve;Ve++){var bt=this._rejectionHandlerAt(Ve),At=this._promiseAt(Ve),St=this._receiverAt(Ve);this._clearCallbackDataAtIndex(Ve),this._settlePromise(At,bt,St,we)}},f.prototype._settlePromises=function(){var Ce=this._bitField,we=65535&Ce;if(we>0){if(0!=(16842752&Ce)){var Ve=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,Ve,Ce),this._rejectPromises(we,Ve)}else{var bt=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,bt,Ce),this._fulfillPromises(we,bt)}this._setLength(0)}this._clearCancellationData()},f.prototype._settledValue=function(){var Ce=this._bitField;return 0!=(33554432&Ce)?this._rejectionHandler0:0!=(16777216&Ce)?this._fulfillmentHandler0:void 0},typeof Symbol<"u"&&Symbol.toStringTag&&W.defineProperty(f.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),f.defer=f.pending=function(){return tt.deprecated("Promise.defer","new Promise"),{promise:new f($),resolve:v,reject:l}},p.notEnumerableProp(f,"_makeSelfResolutionError",c),r("./method")(f,$,fe,h,tt),r("./bind")(f,$,fe,tt),r("./cancel")(f,je,h,tt),r("./direct_resolve")(f),r("./synchronous_inspection")(f),r("./join")(f,je,fe,$,U),f.Promise=f,f.version="3.7.2",r("./call_get.js")(f),r("./generators.js")(f,h,$,fe,u,tt),r("./map.js")(f,je,h,fe,$,tt),r("./nodeify.js")(f),r("./promisify.js")(f,$),r("./props.js")(f,je,fe,h),r("./race.js")(f,$,fe,h),r("./reduce.js")(f,je,h,fe,$,tt),r("./settle.js")(f,je,tt),r("./some.js")(f,je,h),r("./timers.js")(f,$,tt),r("./using.js")(f,h,fe,rt,$,tt),r("./any.js")(f),r("./each.js")(f,$),r("./filter.js")(f,$),p.toFastProperties(f),p.toFastProperties(f.prototype),I({a:1}),I({b:2}),I({c:3}),I(1),I(function(){}),I(void 0),I(!1),I(new f($)),tt.setBounds(F.firstLineError,p.lastLineError),f}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(r,a,o){a.exports=function(u,s,f,v,l){function c(h){var y=this._promise=new u(s);h instanceof u&&(y._propagateFrom(h,3),h.suppressUnhandledRejections()),y._setOnCancel(this),this._values=h,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var _=r("./util");return _.inherits(c,l),c.prototype.length=function(){return this._length},c.prototype.promise=function(){return this._promise},c.prototype._init=function h(y,p){var m=f(this._values,this._promise);if(m instanceof u){var T=(m=m._target())._bitField;if(this._values=m,0==(50397184&T))return this._promise._setAsyncGuaranteed(),m._then(h,this._reject,void 0,this,p);if(0==(33554432&T))return 0!=(16777216&T)?this._reject(m._reason()):this._cancel();m=m._value()}if(null!==(m=_.asArray(m)))return 0===m.length?void(-5===p?this._resolveEmptyArray():this._resolve(function I(h){switch(h){case-2:return[];case-3:return{};case-6:return new Map}}(p))):void this._iterate(m);var C=v("expecting an array or an iterable object but got "+_.classString(m)).reason();this._promise._rejectCallback(C,!1)},c.prototype._iterate=function(h){var y=this.getActualLength(h.length);this._length=y,this._values=this.shouldCopyValues()?new Array(y):this._values;for(var p=this._promise,m=!1,T=null,C=0;y>C;++C){var D=f(h[C],p);T=D instanceof u?(D=D._target())._bitField:null,m?null!==T&&D.suppressUnhandledRejections():null!==T?0==(50397184&T)?(D._proxy(this,C),this._values[C]=D):m=0!=(33554432&T)?this._promiseFulfilled(D._value(),C):0!=(16777216&T)?this._promiseRejected(D._reason(),C):this._promiseCancelled(C):m=this._promiseFulfilled(D,C)}m||p._setAsyncGuaranteed()},c.prototype._isResolved=function(){return null===this._values},c.prototype._resolve=function(h){this._values=null,this._promise._fulfill(h)},c.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},c.prototype._reject=function(h){this._values=null,this._promise._rejectCallback(h,!1)},c.prototype._promiseFulfilled=function(h,y){return this._values[y]=h,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},c.prototype._promiseCancelled=function(){return this._cancel(),!0},c.prototype._promiseRejected=function(h){return this._totalResolved++,this._reject(h),!0},c.prototype._resultCancelled=function(){if(!this._isResolved()){var h=this._values;if(this._cancel(),h instanceof u)h.cancel();else for(var y=0;y<h.length;++y)h[y]instanceof u&&h[y].cancel()}},c.prototype.shouldCopyValues=function(){return!0},c.prototype.getActualLength=function(h){return h},c}},{"./util":36}],24:[function(r,a,o){a.exports=function(u,s){function f($){return!U.test($)}function v($){try{return!0===$.__isPromisified__}catch{return!1}}function l($,V,De){var fe=T.getDataPropertyOrDefault($,V+De,W);return!!fe&&v(fe)}function h($,V,De,fe,je){for(var Se=new RegExp(Z(V)+"$"),rt=function c($,V,De,fe){for(var je=T.inheritedDataKeys($),Se=[],rt=0;rt<je.length;++rt){var tt=je[rt],de=$[tt],_t=fe===H||H(tt,de,$);"function"!=typeof de||v(de)||l($,tt,V)||!fe(tt,de,$,_t)||Se.push(tt,de)}return function I($,V,De){for(var fe=0;fe<$.length;fe+=2){var je=$[fe];if(De.test(je))for(var Se=je.replace(De,""),rt=0;rt<$.length;rt+=2)if($[rt]===Se)throw new G("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",V))}}(Se,V,De),Se}($,V,Se,De),tt=0,de=rt.length;de>tt;tt+=2){var _t=rt[tt],be=rt[tt+1],it=_t+V;if(fe===X)$[it]=X(_t,m,_t,be,V,je);else{var mt=fe(be,function(){return X(_t,m,_t,be,V,je)});T.notEnumerableProp(mt,"__isPromisified__",!0),$[it]=mt}}return T.toFastProperties($),$}var m={},T=r("./util"),C=r("./nodeback"),D=T.withAppended,S=T.maybeWrapAsError,M=T.canEvaluate,G=r("./errors").TypeError,W={__isPromisified__:!0},U=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),H=function($){return T.isIdentifier($)&&"_"!==$.charAt(0)&&"constructor"!==$},Z=function($){return $.replace(/([$])/,"\\$")},X=M?void 0:function _($,V,De,fe,je,Se){function rt(){var _t=V;V===m&&(_t=this);var be=new u(s);be._captureStackTrace();var it="string"==typeof de&&this!==tt?this[de]:$,mt=C(be,Se);try{it.apply(_t,D(arguments,mt))}catch(Ce){be._rejectCallback(S(Ce),!0,!0)}return be._isFateSealed()||be._setAsyncGuaranteed(),be}var tt=function(){return this}(),de=$;return"string"==typeof de&&($=fe),T.notEnumerableProp(rt,"__isPromisified__",!0),rt};u.promisify=function($,V){if("function"!=typeof $)throw new G("expecting a function but got "+T.classString($));if(v($))return $;var je=function y($,V,De){return X($,V,void 0,$,null,De)}($,void 0===(V=Object(V)).context?m:V.context,!!V.multiArgs);return T.copyDescriptors($,je,f),je},u.promisifyAll=function($,V){if("function"!=typeof $&&"object"!=typeof $)throw new G("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var De=!!(V=Object(V)).multiArgs,fe=V.suffix;"string"!=typeof fe&&(fe="Async");var je=V.filter;"function"!=typeof je&&(je=H);var Se=V.promisifier;if("function"!=typeof Se&&(Se=X),!T.isIdentifier(fe))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var rt=T.inheritedDataKeys($),tt=0;tt<rt.length;++tt){var de=$[rt[tt]];"constructor"!==rt[tt]&&T.isClass(de)&&(h(de.prototype,fe,je,Se,De),h(de,fe,je,Se,De))}return h($,fe,je,Se,De)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(r,a,o){a.exports=function(u,s,f,v){function l(T){var C,D=!1;if(void 0!==c&&T instanceof c)C=p(T),D=!0;else{var S=y.keys(T),M=S.length;C=new Array(2*M);for(var G=0;M>G;++G){var L=S[G];C[G]=T[L],C[G+M]=L}}this.constructor$(C),this._isMap=D,this._init$(void 0,D?-6:-3)}function I(T){var C,D=f(T);return h(D)?(C=D instanceof u?D._then(u.props,void 0,void 0,void 0,void 0):new l(D).promise(),D instanceof u&&C._propagateFrom(D,2),C):v("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var c,_=r("./util"),h=_.isObject,y=r("./es5");"function"==typeof Map&&(c=Map);var p=function(){function T(S,M){this[C]=S,this[C+D]=M,C++}var C=0,D=0;return function(S){D=S.size,C=0;var M=new Array(2*S.size);return S.forEach(T,M),M}}();_.inherits(l,s),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(T,C){if(this._values[C]=T,++this._totalResolved>=this._length){var S;if(this._isMap)S=function(T){for(var C=new c,D=T.length/2|0,S=0;D>S;++S)C.set(T[D+S],T[S]);return C}(this._values);else{S={};for(var M=this.length(),G=0,L=this.length();L>G;++G)S[this._values[G+M]]=this._values[G]}return this._resolve(S),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(T){return T>>1},u.prototype.props=function(){return I(this)},u.props=function(T){return I(T)}}},{"./es5":13,"./util":36}],26:[function(r,a,o){function s(f){this._capacity=f,this._length=0,this._front=0}s.prototype._willBeOverCapacity=function(f){return this._capacity<f},s.prototype._pushOne=function(f){var v=this.length();this._checkCapacity(v+1),this[this._front+v&this._capacity-1]=f,this._length=v+1},s.prototype.push=function(f,v,l){var I=this.length()+3;if(this._willBeOverCapacity(I))return this._pushOne(f),this._pushOne(v),void this._pushOne(l);var c=this._front+I-3;this._checkCapacity(I);var _=this._capacity-1;this[c+0&_]=f,this[c+1&_]=v,this[c+2&_]=l,this._length=I},s.prototype.shift=function(){var f=this._front,v=this[f];return this[f]=void 0,this._front=f+1&this._capacity-1,this._length--,v},s.prototype.length=function(){return this._length},s.prototype._checkCapacity=function(f){this._capacity<f&&this._resizeTo(this._capacity<<1)},s.prototype._resizeTo=function(f){var v=this._capacity;this._capacity=f,function u(f,v,l,I,c){for(var _=0;c>_;++_)l[_+I]=f[_+v],f[_+v]=void 0}(this,0,this,v,this._front+this._length&v-1)},a.exports=s},{}],27:[function(r,a,o){a.exports=function(u,s,f,v){function l(_,h){var y=f(_);if(y instanceof u)return c(y);if(null===(_=I.asArray(_)))return v("expecting an array or an iterable object but got "+I.classString(_));var p=new u(s);void 0!==h&&p._propagateFrom(h,3);for(var m=p._fulfill,T=p._reject,C=0,D=_.length;D>C;++C){var S=_[C];(void 0!==S||C in _)&&u.cast(S)._then(m,T,void 0,p,null)}return p}var I=r("./util"),c=function(_){return _.then(function(h){return l(h,_)})};u.race=function(_){return l(_,void 0)},u.prototype.race=function(){return l(this,void 0)}}},{"./util":36}],28:[function(r,a,o){a.exports=function(u,s,f,v,l,I){function c(C,D,S,M){this.constructor$(C);var G=u._getContext();this._fn=m.contextBind(G,D),void 0!==S&&(S=u.resolve(S))._attachCancellationCallback(this),this._initialValue=S,this._currentCancellable=null,this._eachValues=M===l?Array(this._length):0===M?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function _(C,D){this.isFulfilled()?D._resolve(C):D._reject(C)}function h(C,D,S,M){return"function"!=typeof D?f("expecting a function but got "+m.classString(D)):new c(C,D,S,M).promise()}function y(C){this.accum=C,this.array._gotAccum(C);var D=v(this.value,this.array._promise);return D instanceof u?(this.array._currentCancellable=D,D._then(p,void 0,void 0,this,void 0)):p.call(this,D)}function p(C){var G,D=this.array,S=D._promise,M=T(D._fn);S._pushContext(),(G=void 0!==D._eachValues?M.call(S._boundValue(),C,this.index,this.length):M.call(S._boundValue(),this.accum,C,this.index,this.length))instanceof u&&(D._currentCancellable=G);var L=S._popContext();return I.checkForgottenReturns(G,L,void 0!==D._eachValues?"Promise.each":"Promise.reduce",S),G}var m=r("./util"),T=m.tryCatch;m.inherits(c,s),c.prototype._gotAccum=function(C){null!=this._eachValues&&C!==l&&this._eachValues.push(C)},c.prototype._eachComplete=function(C){return null!==this._eachValues&&this._eachValues.push(C),this._eachValues},c.prototype._init=function(){},c.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},c.prototype.shouldCopyValues=function(){return!1},c.prototype._resolve=function(C){this._promise._resolveCallback(C),this._values=null},c.prototype._resultCancelled=function(C){return C===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof u&&this._currentCancellable.cancel(),this._initialValue instanceof u&&this._initialValue.cancel()))},c.prototype._iterate=function(C){this._values=C;var D,S,M=C.length;void 0!==this._initialValue?(D=this._initialValue,S=0):(D=u.resolve(C[0]),S=1),this._currentCancellable=D;for(var G=S;M>G;++G){var L=C[G];L instanceof u&&L.suppressUnhandledRejections()}if(!D.isRejected())for(;M>S;++S)D=D._then(y,void 0,void 0,{accum:null,value:C[S],index:S,length:M,array:this},void 0),0==(127&S)&&D._setNoAsyncGuarantee();void 0!==this._eachValues&&(D=D._then(this._eachComplete,void 0,void 0,this,void 0)),D._then(_,_,void 0,D,this)},u.prototype.reduce=function(C,D){return h(this,C,D,null)},u.reduce=function(C,D,S,M){return h(C,D,S,M)}}},{"./util":36}],29:[function(r,a,o){var u,_,h,y,p,s=r("./util"),v=s.getNativePromise();if(s.isNode&&typeof MutationObserver>"u"){var l=global.setImmediate,I=process.nextTick;u=s.isRecentNode?function(_){l.call(global,_)}:function(_){I.call(process,_)}}else if("function"==typeof v&&"function"==typeof v.resolve){var c=v.resolve();u=function(_){c.then(_)}}else u=typeof MutationObserver<"u"&&(typeof window>"u"||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?(_=document.createElement("div"),h={attributes:!0},y=!1,p=document.createElement("div"),new MutationObserver(function(){_.classList.toggle("foo"),y=!1}).observe(p,h),function(C){var D=new MutationObserver(function(){D.disconnect(),C()});D.observe(_,h),y||(y=!0,p.classList.toggle("foo"))}):typeof setImmediate<"u"?function(_){setImmediate(_)}:typeof setTimeout<"u"?function(_){setTimeout(_,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};a.exports=u},{"./util":36}],30:[function(r,a,o){a.exports=function(u,s,f){function v(c){this.constructor$(c)}var l=u.PromiseInspection;r("./util").inherits(v,s),v.prototype._promiseResolved=function(c,_){return this._values[c]=_,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},v.prototype._promiseFulfilled=function(c,_){var h=new l;return h._bitField=33554432,h._settledValueField=c,this._promiseResolved(_,h)},v.prototype._promiseRejected=function(c,_){var h=new l;return h._bitField=16777216,h._settledValueField=c,this._promiseResolved(_,h)},u.settle=function(c){return f.deprecated(".settle()",".reflect()"),new v(c).promise()},u.allSettled=function(c){return new v(c).promise()},u.prototype.settle=function(){return u.settle(this)}}},{"./util":36}],31:[function(r,a,o){a.exports=function(u,s,f){function v(p){this.constructor$(p),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(p,m){if((0|m)!==m||0>m)return f("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var T=new v(p),C=T.promise();return T.setHowMany(m),T.init(),C}var I=r("./util"),c=r("./errors").RangeError,_=r("./errors").AggregateError,h=I.isArray,y={};I.inherits(v,s),v.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var p=h(this._values);!this._isResolved()&&p&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},v.prototype.init=function(){this._initialized=!0,this._init()},v.prototype.setUnwrap=function(){this._unwrap=!0},v.prototype.howMany=function(){return this._howMany},v.prototype.setHowMany=function(p){this._howMany=p},v.prototype._promiseFulfilled=function(p){return this._addFulfilled(p),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},v.prototype._promiseRejected=function(p){return this._addRejected(p),this._checkOutcome()},v.prototype._promiseCancelled=function(){return this._values instanceof u||null==this._values?this._cancel():(this._addRejected(y),this._checkOutcome())},v.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var p=new _,m=this.length();m<this._values.length;++m)this._values[m]!==y&&p.push(this._values[m]);return p.length>0?this._reject(p):this._cancel(),!0}return!1},v.prototype._fulfilled=function(){return this._totalResolved},v.prototype._rejected=function(){return this._values.length-this.length()},v.prototype._addRejected=function(p){this._values.push(p)},v.prototype._addFulfilled=function(p){this._values[this._totalResolved++]=p},v.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},v.prototype._getRangeError=function(p){return new c("Input array must contain at least "+this._howMany+" items but contains only "+p+" items")},v.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},u.some=function(p,m){return l(p,m)},u.prototype.some=function(p){return l(this,p)},u._SomePromiseArray=v}},{"./errors":12,"./util":36}],32:[function(r,a,o){a.exports=function(u){function s(h){void 0!==h?(h=h._target(),this._bitField=h._bitField,this._settledValueField=h._isFateSealed()?h._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}s.prototype._settledValue=function(){return this._settledValueField};var f=s.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},v=s.prototype.error=s.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},l=s.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},I=s.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},c=s.prototype.isPending=function(){return 0==(50397184&this._bitField)},_=s.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};s.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},u.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},u.prototype._isCancelled=function(){return this._target().__isCancelled()},u.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},u.prototype.isPending=function(){return c.call(this._target())},u.prototype.isRejected=function(){return I.call(this._target())},u.prototype.isFulfilled=function(){return l.call(this._target())},u.prototype.isResolved=function(){return _.call(this._target())},u.prototype.value=function(){return f.call(this._target())},u.prototype.reason=function(){var h=this._target();return h._unsetRejectionIsUnhandled(),v.call(h)},u.prototype._value=function(){return this._settledValue()},u.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},u.PromiseInspection=s}},{}],33:[function(r,a,o){a.exports=function(u,s){var _=r("./util"),h=_.errorObj,y=_.isObject,p={}.hasOwnProperty;return function f(m,T){if(y(m)){if(m instanceof u)return m;var C=function l(m){try{return function v(m){return m.then}(m)}catch(T){return h.e=T,h}}(m);if(C===h){T&&T._pushContext();var D=u.reject(C.e);return T&&T._popContext(),D}if("function"==typeof C)return function I(m){try{return p.call(m,"_promise0")}catch{return!1}}(m)?(D=new u(s),m._then(D._fulfill,D._reject,void 0,D,null),D):function c(m,T,C){var M=new u(s),G=M;C&&C._pushContext(),M._captureStackTrace(),C&&C._popContext();var L=!0,W=_.tryCatch(T).call(m,function D(F){M&&(M._resolveCallback(F),M=null)},function S(F){M&&(M._rejectCallback(F,L,!0),M=null)});return L=!1,M&&W===h&&(M._rejectCallback(W.e,!0,!0),M=null),G}(m,C,T)}return m}}},{"./util":36}],34:[function(r,a,o){a.exports=function(u,s,f){function v(m){this.handle=m}function l(m){return clearTimeout(this.handle),m}function I(m){throw clearTimeout(this.handle),m}var c=r("./util"),_=u.TimeoutError;v.prototype._resultCancelled=function(){clearTimeout(this.handle)};var h=function(m){return y(+this).thenReturn(m)},y=u.delay=function(m,T){var C,D;return void 0!==T?(C=u.resolve(T)._then(h,null,null,m,void 0),f.cancellation()&&T instanceof u&&C._setOnCancel(T)):(C=new u(s),D=setTimeout(function(){C._fulfill()},+m),f.cancellation()&&C._setOnCancel(new v(D)),C._captureStackTrace()),C._setAsyncGuaranteed(),C};u.prototype.delay=function(m){return y(m,this)},u.prototype.timeout=function(m,T){m=+m;var C,D,S=new v(setTimeout(function(){C.isPending()&&function(m,T,C){var D;D="string"!=typeof T?T instanceof Error?T:new _("operation timed out"):new _(T),c.markAsOriginatingFromRejection(D),m._attachExtraTrace(D),m._reject(D),C?.cancel()}(C,T,D)},m));return f.cancellation()?(D=this.then(),(C=D._then(l,I,void 0,S,void 0))._setOnCancel(S)):C=this._then(l,I,void 0,S,void 0),C}}},{"./util":36}],35:[function(r,a,o){a.exports=function(u,s,f,v,l,I){function c(W){setTimeout(function(){throw W},0)}function h(W,F){var H=0,Z=W.length,X=new u(l);return function U(){if(H>=Z)return X._fulfill();var $=function _(W){var F=f(W);return F!==W&&"function"==typeof W._isDisposable&&"function"==typeof W._getDisposer&&W._isDisposable()&&F._setDisposable(W._getDisposer()),F}(W[H++]);if($ instanceof u&&$._isDisposable()){try{$=f($._getDisposer().tryDispose(F),W.promise)}catch(V){return c(V)}if($ instanceof u)return $._then(U,c,null,null,null)}U()}(),X}function y(W,F,U){this._data=W,this._promise=F,this._context=U}function p(W,F,U){this.constructor$(W,F,U)}function m(W){return y.isDisposer(W)?(this.resources[this.index]._setDisposable(W),W.promise()):W}function T(W){this.length=W,this.promise=null,this[W-1]=null}var C=r("./util"),D=r("./errors").TypeError,S=r("./util").inherits,M=C.errorObj,G=C.tryCatch,L={};y.prototype.data=function(){return this._data},y.prototype.promise=function(){return this._promise},y.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():L},y.prototype.tryDispose=function(W){var F=this.resource(),U=this._context;void 0!==U&&U._pushContext();var H=F!==L?this.doDispose(F,W):null;return void 0!==U&&U._popContext(),this._promise._unsetDisposable(),this._data=null,H},y.isDisposer=function(W){return null!=W&&"function"==typeof W.resource&&"function"==typeof W.tryDispose},S(p,y),p.prototype.doDispose=function(W,F){return this.data().call(W,W,F)},T.prototype._resultCancelled=function(){for(var W=this.length,F=0;W>F;++F){var U=this[F];U instanceof u&&U.cancel()}},u.using=function(){var W=arguments.length;if(2>W)return s("you must pass at least 2 arguments to Promise.using");var F=arguments[W-1];if("function"!=typeof F)return s("expecting a function but got "+C.classString(F));var U,H=!0;2===W&&Array.isArray(arguments[0])?(W=(U=arguments[0]).length,H=!1):(U=arguments,W--);for(var Z=new T(W),X=0;W>X;++X){var $=U[X];if(y.isDisposer($)){var V=$;($=$.promise())._setDisposable(V)}else{var De=f($);De instanceof u&&($=De._then(m,null,null,{resources:Z,index:X},void 0))}Z[X]=$}var fe=new Array(Z.length);for(X=0;X<fe.length;++X)fe[X]=u.resolve(Z[X]).reflect();var je=u.all(fe).then(function(rt){for(var tt=0;tt<rt.length;++tt){var de=rt[tt];if(de.isRejected())return M.e=de.error(),M;if(!de.isFulfilled())return void je.cancel();rt[tt]=de.value()}Se._pushContext(),F=G(F);var _t=H?F.apply(void 0,rt):F(rt),be=Se._popContext();return I.checkForgottenReturns(_t,be,"Promise.using",Se),_t}),Se=je.lastly(function(){var rt=new u.PromiseInspection(je);return h(Z,rt)});return Z.promise=Se,Se._setOnCancel(Z),Se},u.prototype._setDisposable=function(W){this._bitField=131072|this._bitField,this._disposer=W},u.prototype._isDisposable=function(){return(131072&this._bitField)>0},u.prototype._getDisposer=function(){return this._disposer},u.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},u.prototype.disposer=function(W){if("function"==typeof W)return new p(W,this,v());throw new D}}},{"./errors":12,"./util":36}],36:[function(r,a,o){function u(){try{var we=V;return V=null,we.apply(this,arguments)}catch(Ve){return $.e=Ve,$}}function f(we){return null==we||!0===we||!1===we||"string"==typeof we||"number"==typeof we}function _(we,Ve,bt){return f(we)||Z.defineProperty(we,Ve,{value:bt,configurable:!0,enumerable:!1,writable:!0}),we}function C(we){try{return we+""}catch{return"[no string representation]"}}function D(we){return we instanceof Error||null!==we&&"object"==typeof we&&"string"==typeof we.message&&"string"==typeof we.name}function G(we){return D(we)&&Z.propertyIsWritable(we,"stack")}function L(we){return{}.toString.call(we)}var V,Z=r("./es5"),X=typeof navigator>"u",$={e:{}},De=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:void 0!==this?this:null,je=function(){var we=[Array.prototype,Object.prototype,Function.prototype],Ve=function(St){for(var Pe=0;Pe<we.length;++Pe)if(we[Pe]===St)return!0;return!1};if(Z.isES5){var bt=Object.getOwnPropertyNames;return function(St){for(var Pe=[],ae=Object.create(null);null!=St&&!Ve(St);){var Ze;try{Ze=bt(St)}catch{return Pe}for(var Ne=0;Ne<Ze.length;++Ne){var Re=Ze[Ne];if(!ae[Re]){ae[Re]=!0;var ze=Object.getOwnPropertyDescriptor(St,Re);null!=ze&&null==ze.get&&null==ze.set&&Pe.push(Re)}}St=Z.getPrototypeOf(St)}return Pe}}var At={}.hasOwnProperty;return function(St){if(Ve(St))return[];var Pe=[];e:for(var ae in St)if(At.call(St,ae))Pe.push(ae);else{for(var Ze=0;Ze<we.length;++Ze)if(At.call(we[Ze],ae))continue e;Pe.push(ae)}return Pe}}(),Se=/this\s*\.\s*\S+\s*=/,rt=/^[a-z$_][a-z$_0-9]*$/i,tt="stack"in new Error?function(we){return G(we)?we:new Error(C(we))}:function(we){if(G(we))return we;try{throw new Error(C(we))}catch(Ve){return Ve}},de=function(we){return Z.isArray(we)?we:null};if(typeof Symbol<"u"&&Symbol.iterator){var _t="function"==typeof Array.from?function(we){return Array.from(we)}:function(we){for(var Ve,bt=[],At=we[Symbol.iterator]();!(Ve=At.next()).done;)bt.push(Ve.value);return bt};de=function(we){return Z.isArray(we)?we:null!=we&&"function"==typeof we[Symbol.iterator]?_t(we):null}}var mt,we,be=typeof process<"u"&&"[object process]"===L(process).toLowerCase(),it=typeof process<"u"&&typeof process.env<"u",Ce={setReflectHandler:function(we){mt=we},isClass:function y(we){try{if("function"==typeof we){var Ve=Z.names(we.prototype),bt=Z.isES5&&Ve.length>1,At=Ve.length>0&&!(1===Ve.length&&"constructor"===Ve[0]),St=Se.test(we+"")&&Z.names(we).length>0;if(bt||At||St)return!0}return!1}catch{return!1}},isIdentifier:function m(we){return rt.test(we)},inheritedDataKeys:je,getDataPropertyOrDefault:function c(we,Ve,bt){if(!Z.isES5)return{}.hasOwnProperty.call(we,Ve)?we[Ve]:void 0;var At=Object.getOwnPropertyDescriptor(we,Ve);return null!=At?null==At.get&&null==At.set?At.value:bt:void 0},thrower:function h(we){throw we},isArray:Z.isArray,asArray:de,notEnumerableProp:_,isPrimitive:f,isObject:function v(we){return"function"==typeof we||"object"==typeof we&&null!==we},isError:D,canEvaluate:X,errorObj:$,tryCatch:function s(we){return V=we,u},inherits:function(we,Ve){function bt(){for(var St in this.constructor=we,this.constructor$=Ve,Ve.prototype)At.call(Ve.prototype,St)&&"$"!==St.charAt(St.length-1)&&(this[St+"$"]=Ve.prototype[St])}var At={}.hasOwnProperty;return bt.prototype=Ve.prototype,we.prototype=new bt,we.prototype},withAppended:function I(we,Ve){var bt,At=we.length,St=new Array(At+1);for(bt=0;At>bt;++bt)St[bt]=we[bt];return St[bt]=Ve,St},maybeWrapAsError:function l(we){return f(we)?new Error(C(we)):we},toFastProperties:function p(we){function Ve(){}function bt(){return typeof At.foo}Ve.prototype=we;var At=new Ve;return bt(),bt(),we},filledRange:function T(we,Ve,bt){for(var At=new Array(we),St=0;we>St;++St)At[St]=Ve+St+bt;return At},toString:C,canAttachTrace:G,ensureErrorObject:tt,originatesFromRejection:function M(we){return null!=we&&(we instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===we.isOperational)},markAsOriginatingFromRejection:function S(we){try{_(we,"isOperational",!0)}catch{}},classString:L,copyDescriptors:function W(we,Ve,bt){for(var At=Z.names(we),St=0;St<At.length;++St){var Pe=At[St];if(bt(Pe))try{Z.defineProperty(Ve,Pe,Z.getDescriptor(we,Pe))}catch{}}},isNode:be,hasEnvVariables:it,env:function F(we){return it?process.env[we]:void 0},global:De,getNativePromise:function U(){if("function"==typeof Promise)try{if("[object Promise]"===L(new Promise(function(){})))return Promise}catch{}},contextBind:function H(we,Ve){if(null===we||"function"!=typeof Ve||Ve===mt)return Ve;null!==we.domain&&(Ve=we.domain.bind(Ve));var bt=we.async;if(null!==bt){var At=Ve;Ve=function(){var St=new Array(2).concat([].slice.call(arguments));return St[0]=At,St[1]=this,bt.runInAsyncScope.apply(bt,St)}}return Ve}};Ce.isRecentNode=Ce.isNode&&(process.versions&&process.versions.node?we=process.versions.node.split(".").map(Number):process.version&&(we=process.version.split(".").map(Number)),0===we[0]&&we[1]>10||we[0]>0),Ce.nodeSupportsAsyncResource=Ce.isNode&&function(){var we=!1;try{we="function"==typeof r("async_hooks").AsyncResource.prototype.runInAsyncScope}catch{we=!1}return we}(),Ce.isNode&&Ce.toFastProperties(process);try{throw new Error}catch(we){Ce.lastLineError=we}a.exports=Ce},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),typeof window<"u"&&null!==window?window.P=window.Promise:typeof self<"u"&&null!==self&&(self.P=self.Promise)),Zw=self,Xd=function(){var e={d:function(xe,ut){for(var ue in ut)e.o(ut,ue)&&!e.o(xe,ue)&&Object.defineProperty(xe,ue,{enumerable:!0,get:ut[ue]})}},n=(e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),e.o=function(xe,ut){return Object.prototype.hasOwnProperty.call(xe,ut)},{});function t(xe){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ut){return typeof ut}:function(ut){return ut&&"function"==typeof Symbol&&ut.constructor===Symbol&&ut!==Symbol.prototype?"symbol":typeof ut})(xe)}function a(xe){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ut){return typeof ut}:function(ut){return ut&&"function"==typeof Symbol&&ut.constructor===Symbol&&ut!==Symbol.prototype?"symbol":typeof ut})(xe)}function o(xe,ut){for(var ue=0;ue<ut.length;ue++){var se=ut[ue];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(xe,se.key,se)}}function c(xe,ut,ue){ut in xe?Object.defineProperty(xe,ut,{value:ue,enumerable:!0,configurable:!0,writable:!0}):xe[ut]=ue}function _(xe){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ut){return typeof ut}:function(ut){return ut&&"function"==typeof Symbol&&ut.constructor===Symbol&&ut!==Symbol.prototype?"symbol":typeof ut})(xe)}e.d(n,{default:function(){return qt}});var h,y,p,m=void 0,T=function(ut){return"function"==typeof ut},C=function(ut){return Array.isArray?Array.isArray(ut):ut instanceof Array},S=function(ut){return!1===ut||ut===m||null===ut},Ln="undefined",M=(typeof TypeError>"u"?"undefined":_(TypeError))===Ln?Error:TypeError;function G(xe){h(function(){throw xe})}function L(xe){return this.then(xe,m)}function W(xe){return this.then(m,xe)}function F(xe,ut){return this.then(function(ue){return T(xe)?xe.apply(null,C(ue)?ue:[ue]):X.onlyFuncs?ue:xe},ut||m)}function U(xe){function ut(){xe()}return this.then(ut,ut),this}function H(xe){return this.then(function(ut){return T(xe)?xe.apply(null,C(ut)?ut.splice(0,0,void 0)&&ut:[void 0,ut]):X.onlyFuncs?ut:xe},function(ut){return xe(ut)})}function Z(xe){return this.then(m,xe?function(ut){throw xe(ut),ut}:G)}h=(typeof process>"u"?"undefined":_(process))!==Ln&&process.nextTick?process.nextTick:(typeof MessageChannel>"u"?"undefined":_(MessageChannel))!==Ln?(y=new MessageChannel,p=[],y.port1.onmessage=function(){p.length&&p.shift()()},function(ut){p.push(ut),y.port2.postMessage(0)}):function(ut){setTimeout(ut,0)};var X=function(){function xe(le){if(!(this instanceof xe))throw new TypeError("Cannot call a class as a function");c(this,"alwaysAsyncFn",null),c(this,"status",0),c(this,"pendings",[]),c(this,"promise",{then:function(Ue,ke){var He=new xe;return this.pendings.push([function(nt){try{S(Ue)?He.resolve(nt):He.resolve(T(Ue)?Ue(nt):xe.onlyFuncs?nt:Ue)}catch(zt){He.reject(zt)}},function(nt){if((S(ke)||!T(ke)&&xe.onlyFuncs)&&He.reject(nt),ke)try{He.resolve(T(ke)?ke(nt):ke)}catch(zt){He.reject(zt)}}]),0!==this.status&&this.alwaysAsyncFn(this.execCallbacks),He.promise},success:L,error:W,otherwise:W,apply:F,spread:F,ensure:U,nodify:H,rethrow:Z,isPending:function(){return 0===this.status},getStatus:function(){return this.status}}),this.alwaysAsyncFn=(m!==le?le:xe.alwaysAsync)?h:function(Ue){Ue()},this.promise.toSource=this.promise.toString=this.promise.valueOf=function(){return void 0===this.value?this:this.value}}var ut,ue;return ut=xe,(ue=[{key:"resolve",value:function(le){var Ue=!1;function ke(nt){return function(zt){return Ue?void 0:(Ue=!0,nt(zt))}}if(this.status)return this;try{var He=function(ut){return!(!ut||!_(ut).match(/function|object/))}(le)&&le.then;if(T(He)){if(le===this.promise)throw new M("Promise can't resolve itself");return He.call(le,ke(this.resolve),ke(this.reject)),this}}catch(nt){return ke(this.reject)(nt),this}return this.alwaysAsyncFn(function(){this.value=le,this.status=1,this.execCallbacks()}),this}},{key:"reject",value:function(le){return this.status||this.alwaysAsyncFn(function(){try{throw le}catch(Ue){this.value=Ue}this.status=-1,this.execCallbacks()}),this}},{key:"execCallbacks",value:function(){if(0!==this.status){var le,Ue=this.pendings,ke=0,He=Ue.length,nt=~this.status?0:1;for(this.pendings=[];ke<He;ke++)(le=Ue[ke][nt])&&le(this.value)}}}])&&function I(xe,ut){for(var ue=0;ue<ut.length;ue++){var se=ut[ue];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(xe,se.key,se)}}(ut.prototype,ue),Object.defineProperty(ut,"prototype",{writable:!1}),xe}();function $(xe){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ut){return typeof ut}:function(ut){return ut&&"function"==typeof Symbol&&ut.constructor===Symbol&&ut!==Symbol.prototype?"symbol":typeof ut})(xe)}function fe(xe,ut){for(var ue=0;ue<ut.length;ue++){var se=ut[ue];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(xe,se.key,se)}}function tt(xe){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ut){return typeof ut}:function(ut){return ut&&"function"==typeof Symbol&&ut.constructor===Symbol&&ut!==Symbol.prototype?"symbol":typeof ut})(xe)}function it(xe,ut,ue){ut in xe?Object.defineProperty(xe,ut,{value:ue,enumerable:!0,configurable:!0,writable:!0}):xe[ut]=ue}function we(xe){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ut){return typeof ut}:function(ut){return ut&&"function"==typeof Symbol&&ut.constructor===Symbol&&ut!==Symbol.prototype?"symbol":typeof ut})(xe)}function bt(xe){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ut){return typeof ut}:function(ut){return ut&&"function"==typeof Symbol&&ut.constructor===Symbol&&ut!==Symbol.prototype?"symbol":typeof ut})(xe)}c(X,"deferred",X),c(X,"defer",X),c(X,"nextTick",h),c(X,"alwaysAsync",!0),c(X,"onlyFuncs",!0),c(X,"resolve",function(xe){return new X(!0).resolve(xe).promise}),c(X,"resolved",X.resolve),c(X,"fulfilled",X.resolve),c(X,"reject",function(xe){return new X(!0).reject(xe).promise}),c(X,"rejected",X.reject);var At,St,Pe,ae,Ze,Ne,Re,ze,Qe,ot,Lt,Ot,Bt,Ft,It,Kt,tn,en,Ee,_e,Ae,We,pe,Ie,$e,st,Nt,Pt,et,lt,Ut,xt,wn,Cn=(Ln=typeof window<"u"?window:typeof self<"u"?self:void 0).Dynamsoft,Le=!1,g=function(ut,ue){for(var se in ue)ue.hasOwnProperty(se)&&(ut[se]=ue[se]);return ut};if(!(Le=!!((In=Cn.Lib)&&In.__ver&&In.isNumber(In.__ver)&&20220623<=In.__ver)||Le)){var N=Date.now||function(){return+new Date},In=(Ln.Map||(Ln.Map=function(){this.keys=[],this.data={},this.set=function(ue,se){null==this.data[ue]&&-1==this.keys.indexOf(ue)&&this.keys.push(ue),this.data[ue]=se},this.get=function(ue){return this.data[ue]}}),g(Cn.Lib,{win:Ln,doc:Ln.document,debug:!1,nil:void 0,mix:g,clone:function ue(se){if(null==se||"object"!=bt(se))return se;var le,Ue,ke;if(se instanceof Date)return(le=new Date).setTime(se.getTime()),le;if(se instanceof Array){for(le=[],ke=se.length,Ue=0;Ue<ke;Ue++)le[Ue]=ue(se[Ue]);return le}if(se instanceof Object){for(Ue in le={},se)se.hasOwnProperty(Ue)&&(le[Ue]=ue(se[Ue]));return le}return 0},keys:Object.keys,now:N,getRandom:function(){for(var se,le=N()%1e4,Ue=[],ke=0;ke<5;ke++)se=Math.floor(10*Math.random()),0==ke&&0==se?ke=-1:Ue.push(se);return le<10?Ue.push("000"):le<100?Ue.push("00"):le<1e3&&Ue.push("0"),Ue.push(le),Ue.join("")},guid:function(se){for(var le,Ue,ke=[],He="0123456789abcdef",nt=0;nt<8;nt++)Ue=Math.floor(16*Math.random()),ke.push(He.substring(Ue,Ue+1));for(ke.push("-"),nt=0;nt<4;nt++)Ue=Math.floor(16*Math.random()),ke.push(He.substring(Ue,Ue+1));for(ke.push("-4"),nt=0;nt<3;nt++)Ue=Math.floor(16*Math.random()),ke.push(He.substring(Ue,Ue+1));for(ke.push("-"),Ue=Math.floor(16*Math.random()),le=He.substring(Ue,Ue+1),le=He.substring(Ue=3&le|8,Ue+1),ke.push(le),nt=0;nt<3;nt++)Ue=Math.floor(16*Math.random()),ke.push(He.substring(Ue,Ue+1));for(ke.push("-"),nt=0;nt<8;nt++)Ue=Math.floor(16*Math.random()),ke.push(He.substring(Ue,Ue+1));return ke.unshift(se),ke.join("")},noop:function(){},stringify:Ln.JSON.stringify,parse:Ln.JSON.parse,__ver:20220623}),function r(Ue){var ut,ue,se,le=Ue.Lib,ke=(Ue=le.mix,{}.hasOwnProperty),He={},nt="object"===(typeof HTMLElement>"u"?"undefined":t(HTMLElement));function zt(Gt){return Gt===ut}function Qt(Gt){return se.apply(this,arguments)}function rn(Gt,ce){He["[object "+Gt+"]"]=ce=Gt.toLowerCase(),le["is"+Gt]=function(Me){return le.type(Me)===ce}}Ue(le,{isDef:function(Gt){return Gt!==ut},isUndef:zt,isUndefined:zt,isNull:function(Gt){return null===Gt},isNaN:(se=function(Gt){return isNaN(Gt)},Qt.toString=function(){return se.toString()},Qt),type:function(Gt){return null===Gt||Gt===ut?String(Gt):He[{}.toString.call(Gt)]||"object"},isPlainObject:function(Gt){if(!Gt||"object"!==le.type(Gt)||Gt.nodeType||Gt.window==Gt)return!1;var ce,Me;try{if((Me=Gt.constructor)&&!ke(Gt,"constructor")&&!ke(Me.prototype,"isPrototypeOf"))return!1}catch{return!1}for(ce in Gt);return zt(ce)||ke(Gt,ce)},isDOM:function(Gt){return nt?Gt instanceof HTMLElement:Gt&&"object"===t(Gt)&&(1===Gt.nodeType||9===Gt.nodeType)&&"string"==typeof Gt.nodeName},isDOMInBody:function(Gt){var ce=Gt;if(le.isDOM(Gt))for(;!ce&&ce!=document.body;)ce=ce.parentNode;else ce=0;return!!ce}}),rn("Function"),le.each=ue=function(ce,Me,Xe){if(ce){var Be,Ct,at,Dt=0,kt=ce.length;if(Xe=Xe||null,zt(kt)||le.isFunction(ce))for(at=le.keys(ce);Dt<at.length&&!1!==Me.call(Xe,ce[Be=at[Dt]],Be,ce);Dt++);else for(Ct=ce[0];Dt<kt&&!1!==Me.call(Xe,Ct,Dt,ce);Ct=ce[++Dt]);}return ce},Ue=["String","Object","Boolean","Number"],Array.isArray?le.isArray=Array.isArray:Ue.push("Array"),ue(Ue,rn)}(Cn),function l(se){var ut,ue=se.Lib,le=(se=ue.mix,ue.win);ue.isDef(le.console)&&(ue.isFunction((ut=le.console).log)&&ue.isFunction(ut.error)||(ut=!1)),ue.getFormatedNow=function(He){var ke,nt="yyyy-MM-dd HH:mm:ss.SSSZ",zt={"M+":(He=He?new Date(He):new Date).getUTCMonth()+1,"d+":He.getUTCDate(),"H+":He.getUTCHours(),"h+":He.getUTCHours()%12||12,"m+":He.getUTCMinutes(),"s+":He.getUTCSeconds(),"q+":Math.floor((He.getUTCMonth()+3)/3),"S+":He.getUTCMilliseconds()};for(ke in/(y+)/.test(nt)&&(nt=nt.replace(RegExp.$1,(He.getUTCFullYear()+"").substr(4-RegExp.$1.length))),zt)new RegExp("("+ke+")").test(nt)&&(nt=nt.replace(RegExp.$1,1==RegExp.$1.length?zt[ke]:("000"+zt[ke]).substr(("000"+zt[ke]).length-RegExp.$1.length)));return nt},se(ue,{log:function(ke){var He;ue.debug&&ut&&ue.isFunction(ut.log)&&(He=ue.getFormatedNow((new Date).getTime()),ut.log(["[",He,"] ",ke].join("")))},error:function(Ue){var ke;ue.debug&&ut&&ue.isFunction(ut.error)&&(ke=ue.getFormatedNow((new Date).getTime()),ut.error(["[",ke,"] ",Ue].join("")))},warn:function(Ue){var ke;ue.debug&&ut&&ue.isFunction(ut.warn)&&(ke=ue.getFormatedNow((new Date).getTime()),ut.warn(["[",ke,"] ",Ue].join("")))},info:function(Ue){var ke;ue.debug&&ut&&ue.isFunction(ut.info)&&(ke=ue.getFormatedNow((new Date).getTime()),ut.info(["[",ke,"] ",Ue].join("")))},getLogger:function(){return ut},setLogger:function(Ue){ut=Ue}})}(Cn),(wn=Cn.Lib).mix(wn,{startsWith:function(ue,se){return 0===ue.lastIndexOf(se,0)},endsWith:function(ue,se){var le=ue.length-se.length;return 0<=le&&ue.indexOf(se,le)===le},replaceAll:function(ue,se,le){return ue.replace(new RegExp(se,"gi"),le)},upperCaseFirst:function(ue){return ue.charAt(0).toUpperCase()+ue.substr(1)},removeNonPrintableChar:function(ue){return wn.isString(ue)?ue.replace(/[^\x20-\x7E]/g,""):ue},makeArray:function(ue){if(null==ue)return[];if(wn.isArray(ue))return ue;var se=a(ue.length),le=a(ue);if("number"!==se||ue.alert||"string"===le||"function"===le&&(!("item"in ue)||"number"!==se))return[ue];for(var Ue=[],ke=0,He=ue.length;ke<He;ke++)Ue[ke]=ue[ke];return Ue}}),(xt=Cn.Lib).extend=function(ue,se){var le=function(){ue.apply(this,arguments),se&&se.apply(this,arguments)};return xt.each(ue.prototype,function(Ue,ke){le.prototype[ke]=Ue}),le.prototype.constructor=le},(Ut=Cn.Lib).mix(Ye.prototype,{get:function(ue){return ue in this.__attrs?this.__attrs[ue]:""},set:function(ue,se){ue in this.__attrs&&(this.__attrs[ue]=se)},addAttrs:function(ue){Ut.mix(this.__attrs,ue)}}),Ye.extend=function(ue){var se;return(ue=ue||{}).constructor&&(se=ue.constructor),se=Ut.extend(this,se),Ut.mix(se,ue),se},Ut.Attributes=Ye,In=Cn.Lib,et=(Le=Array.prototype).indexOf,lt=Le.filter,In.mix(In,{filter:function(ue,se,le){return lt.call(ue,se,le||this)},indexOf:function(ue,se){return et.call(se,ue)},uniq:function(ue){for(var se=[],le=ue.length,Ue=0;Ue<le;Ue++){for(var ke=Ue+1;ke<le;ke++)ue[Ue]===ue[ke]&&(ke=++Ue);se.push(ue[Ue])}return se}}),Le=Cn.Lib,Nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Pt=(Pt=(In=String.prototype).trim)||(In.trim=function(){return this.replace(Nt,"")}),Le.trim=function(ue){return null==ue?"":Pt.call(ue)},(st=Cn.Lib).getNavInfoByUserAgent=function(He,On){var le,Ue,ke=st.doc,nt=(He=He.toLowerCase(),On=On.toLowerCase(),/harmonyos/g.test(He)),zt=!nt&&/cros/.test(He),Qt=!nt&&/android/g.test(He)||/android/g.test(On),rn=/iphone/g.test(He)||/iphone/g.test(On),Gt=/macintosh/.test(He),ce=navigator.maxTouchPoints||0,Me=(Gt=/ipad/g.test(He)||(Gt||"macintel"==On)&&1<ce,!(ce=/ucweb|ucbrowser/g.test(He))&&/nexus/g.test(He)&&/version\/[\d.]+.*safari\//g.test(He)),Xe=/playbook/g.test(He),Mt=/hp-tablet/g.test(He),Be=/blackberry|bb10/g.test(He),Ct=/symbian/g.test(He),at=/windows phone/g.test(He),Ht=/mobile/g.test(He),Dt=/arm64|aarch64/g.test(He),kt=/mips64/g.test(He),Rt=/huaweibrowser/g.test(He),qe=Dt||kt,Vt=(Un=!("linux"==On&&0<=He.indexOf("windows nt")&&(On="harmonyos",nt=!0),(Ht=!(Mt=Xe||Gt||Mt)&&(rn||Me||Be||Ct||at||Qt||nt||Ht))||Mt||zt))&&/win32|win64|windows/.test(On),jt=Vt&&/win64|x64/.test(He),ln=Un&&/mac68k|macppc|macintosh|macintel/.test(He),Un=Un&&/linux/.test(On),br=(On="win64"==On||/wow64|x86_64|win64|x64/.test(He)||qe,/wow64/g.test(He)),En=!1,vr=/opera|opr/g.test(He),ei=/360se/g.test(He),fi=/maxthon/g.test(He),pr=/tencenttraveler|qqbrowser/g.test(He),Fr=/the world/g.test(He),ao=/metasr/g.test(He),Li=/avant/g.test(He),Gn=/firefox|fxios/g.test(He),wr=st.preNavInfo.bEdge,Or=st.preNavInfo.bIE,Ei=!(Be||Xe||ce||vr||wr||Rt)&&/chrome|crios/g.test(He),xr="",Jr=0,Mi=/gecko/g.test(He),nn=Ht||Mt,on="";return!(ln||rn||Gt||Vt||Be||Xe||Me)||ce||vr||wr||Or||Gn||(le=He.match(/version\/([\d.]+).*safari\//))&&(Be||Xe||Me||(Ei=!(En=!0)),on=le[1]),wr?(-1<(Be=He.indexOf("edge/"))?Be+=5:-1<(Be=He.indexOf("edg/"))?Be+=4:-1<(Be=He.indexOf("edga/"))?Be+=5:-1<(Be=He.indexOf("edgios/"))&&(Be+=7),-1<Be&&-1<(le=(on=He.slice(Be)).indexOf(" "))&&(on=on.slice(0,le)),nn=!0):Gn?(nn=!0,-1<(le=He.indexOf("firefox/"))?(le=-1<(Xe=(on=le=-1<(Xe=(le=He.slice(le+8)).indexOf(" "))?le.slice(0,Xe):le).indexOf("."))?on.slice(0,Xe):le)<27&&(nn=!1):(rn||Gt)&&-1<(le=He.indexOf("fxios/"))&&(on=le=(le=He.slice(le+6)).slice(0,le.indexOf(" ")))):Or?(Be=He.indexOf("msie "),Xe=He.indexOf("trident"),Ue=He.indexOf("rv:"),-1!=Be?xr=le=(le=He.slice(Be+5)).slice(0,le.indexOf(";")):-1!=Ue?xr=le=(le=(le=He.slice(Ue+3)).slice(0,le.indexOf(";"))).slice(0,le.indexOf(")")):-1!=Xe&&(xr=le=(le=He.slice(Xe+7)).slice(0,le.indexOf(";"))),(""===xr||10<=parseInt(xr))&&(nn=!0),on=le):En?(nn=!0,-1<(le=on.indexOf("."))&&(le=on.slice(0,le))<7&&(nn=!1)):ce?(-1<(le=He.indexOf("ucweb"))?on=He.slice(le+5):-1<(le=He.indexOf("ucbrowser/"))&&-1<(le=(on=He.slice(le+10)).indexOf(" "))&&(on=on.slice(0,le)),nn=!0):vr?(-1<(le=He.indexOf("version/"))?on=He.slice(le+8):-1<(le=He.indexOf("opr/"))&&(on=He.slice(le+4)),nn=!0):Ct?(-1<(le=He.indexOf("browserng/"))&&(on=He.slice(le+10)),nn=!0):at?(-1<(le=He.indexOf("iemobile/"))&&(on=He.slice(le+9)),nn=!0):Ei?(-1<(Be=He.indexOf("chrome/"))?-1<(le=(on=He.slice(Be+7)).indexOf(" "))&&(on=on.slice(0,le)):-1<(Be=He.indexOf("crios/"))&&-1<(le=(on=He.slice(Be+6)).indexOf(" "))&&(on=on.slice(0,le)),nn=!0,-1<(le=on.indexOf("."))&&(le=on.slice(0,le))<27&&(nn=!1)):Rt&&(-1<(Ue=He.indexOf("huaweibrowser"))&&-1<(le=(on=He.slice(Ue+14)).indexOf(" "))&&(on=on.slice(0,le)),nn=!0),(wr||Or)&&(ke.documentMode?Jr=ke.documentMode:(Jr=5,ke.compatMode&&"CSS1Compat"==ke.compatMode&&(Jr=7))),(ln||Un)&&(On=!0,ln&&(le=He.match(/mac os x (\d+)(_|\.)(\d+)/))&&3<le.length&&(10==le[1]&&le[3]<14||le[1]<10)&&(On=!1)),{bWin:Vt,bMac:ln,bLinux:Un,bMobile:Ht,bPad:Mt,bChromeOS:zt,bHarmonyOS:nt,bArm64:Dt,bMips64:kt,bEmbed:qe,bAndroid:Qt,biPhone:rn,biPad:Gt,bWin64:jt,bWOW64:br,bOSx64:On,bIE:Or,bEdge:wr,bChrome:Ei,bFirefox:Gn,bSafari:En,bOpera:vr,bNexus:Me,bUC:ce,b360SE:ei,bMaxthon:fi,bTencentTraveler:pr,bTheWorld:Fr,bMetaSr:ao,bAvant:Li,bHuaWeiBrowser:Rt,bGecko:Mi,bHTML5Edition:nn,strBrowserVersion:on,IEMode:Jr}},function de(xe){var ut,ue,se=xe.getLogger(),le=xe.isDef,Ue=xe.each,ke={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},He={},nt=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;function zt(rn){var Gt=tt(rn);return null==rn||"object"!==Gt&&"function"!==Gt}function Qt(rn){return encodeURIComponent(String(rn))}Ue(ke,function(rn,Gt){He[rn]=Gt}),xe.mix(xe,{urlEncode:Qt,urlDecode:function(rn){return decodeURIComponent(rn.replace(/\+/g," "))},fromUnicode:function(rn){return rn.replace(/\\u([a-f\d]{4})/gi,function(Gt,ce){return String.fromCharCode(parseInt(ce,16))})},escapeHtml:function(rn){return(rn+"").replace(function(){if(ut)return ut;var Gt="";return Ue(ke,function(ce){Gt+=ce+"|"}),Gt=Gt.slice(0,-1),ut=new RegExp(Gt,"g")}(),function(Gt){return He[Gt]})},escapeRegExp:function(rn){return rn.replace(nt,"\\$&")},unEscapeHtml:function(rn){return rn.replace(function(){if(ue)return ue;var Gt="";return Ue(He,function(ce){Gt+=ce+"|"}),Gt+="&#(\\d{1,5});",ue=new RegExp(Gt,"g")}(),function(Gt,ce){return ke[Gt]||String.fromCharCode(+ce)})},param:function(rn,Gt,ce,Me){Gt=Gt||"&",ce=ce||"=",xe.isUndef(Me)&&(Me=!0);var Xe=[];return Ue(rn,function(Be,Ct){var at=Qt(Ct);zt(Be)?(Xe.push(at),le(Be)&&Xe.push(ce,Qt(Be+"")),Xe.push(Gt)):xe.isArray(Be)&&Be.length&&Ue(Be,function(Dt){zt(Dt)&&(Xe.push(at,Me?Qt("[]"):""),le(Dt)&&Xe.push(ce,Qt(Dt+"")),Xe.push(Gt))})}),Xe.pop(),Xe.join("")},unparam:function(rn,Gt,ce){if(!xe.isString(rn)||!(rn=xe.trim(rn)))return{};ce=ce||"=";for(var Me,Xe,Be,Ct={},at=xe.urlDecode,Dt=rn.split(Gt=Gt||"&"),kt=0,Rt=Dt.length;kt<Rt;++kt){if(-1===(Me=xe.indexOf(ce,Dt[kt])))Xe=at(Dt[kt]),Be=void 0;else{Xe=at(Dt[kt].substring(0,Me)),Be=Dt[kt].substring(Me+1);try{Be=at(Be)}catch(qe){se.error("decodeURIComponent error : "+Be),se.error(qe)}xe.endsWith(Xe,"[]")&&(Xe=Xe.substring(0,Xe.length-2))}Xe in Ct?xe.isArray(Ct[Xe])?Ct[Xe].push(Be):Ct[Xe]=[Ct[Xe],Be]:Ct[Xe]=Be}return Ct}})}(Cn.Lib),function De(xe){var ut=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function ue(le,Ue){for(var ke=[],He=0;He<le.length;He++){var nt=le[He];nt&&"."!==nt&&(".."===nt?ke.length&&".."!==ke[ke.length-1]?ke.pop():Ue&&ke.push(".."):ke.push(nt))}return ke}var se=xe.Path={resolve:function(){for(var le,Ue="",ke=arguments,He=!1,nt=ke.length-1;0<=nt&&!He;nt--)xe.isString(le=ke[nt])&&le&&(Ue=le+"/"+Ue,He="/"===le.charAt(0));return(He?"/":"")+ue(xe.filter(Ue.split("/"),function(zt){return!!zt}),!He).join("/")||"."},normalize:function(le){var Ue="/"===le.charAt(0),ke="/"===le.slice(-1);return(le=(le=ue(xe.filter(le.split("/"),function(He){return!!He}),!Ue).join("/"))||Ue?le:".")&&ke&&(le+="/"),(Ue?"/":"")+le},join:function(){var le=xe.makeArray(arguments);return se.normalize(xe.filter(le,function(Ue){return Ue&&xe.isString(Ue)}).join("/"))},relative:function(le,Ue){le=se.normalize(le),Ue=se.normalize(Ue);for(var ke=xe.filter(le.split("/"),function(rn){return!!rn}),He=[],nt=xe.filter(Ue.split("/"),function(rn){return!!rn}),zt=Math.min(ke.length,nt.length),Qt=0;Qt<zt&&ke[Qt]===nt[Qt];Qt++);for(le=Qt;Qt<ke.length;)He.push(".."),Qt++;return(He=He.concat(nt.slice(le))).join("/")},basename:function(nt,ke){var He;return He=(nt=nt.match(ut)||[])[3]||"",ke&&He&&He.slice(-1*ke.length)===ke?He.slice(0,-1*ke.length):He},dirname:function(ke){var Ue=(ke=ke.match(ut)||[])[1]||"";return ke=ke[2]||"",Ue||ke?Ue+(ke=ke&&ke.substring(0,ke.length-1)):"."},extname:function(le){return(le.match(ut)||[])[4]||""}}}(Cn.Lib),function rt(xe){function ut(se){se._queryMap||(se._queryMap=xe.unparam(se._query))}var ue=function(){function se(He){if(!(this instanceof se))throw new TypeError("Cannot call a class as a function");this._query=He||""}var le,Ue;return le=se,(Ue=[{key:"clone",value:function(){return new se(this.toString())}},{key:"reset",value:function(He){return this._query=He||"",this._queryMap=null,this}},{key:"count",value:function(){var nt=0;return ut(this),xe.each(this._queryMap,function(zt){xe.isArray(zt)?nt+=zt.length:nt++}),nt}},{key:"has",value:function(He){var nt;return ut(this),nt=this._queryMap,He?He in nt:!xe.isEmptyObject(nt)}},{key:"get",value:function(He){var nt;return ut(this),nt=this._queryMap,He?nt[He]:nt}},{key:"keys",value:function(){return ut(this),xe.keys(this._queryMap)}},{key:"set",value:function(He,nt){var zt;return ut(this),zt=this._queryMap,xe.isString(He)?this._queryMap[He]=nt:(He instanceof se&&(He=He.get()),xe.each(He,function(Qt,rn){zt[rn]=Qt})),this}},{key:"remove",value:function(He){return ut(this),He?delete this._queryMap[He]:this._queryMap={},this}},{key:"add",value:function(He,nt){var zt,Qt,rn=this;return xe.isString(He)?(ut(rn),Qt=(zt=rn._queryMap)[He],Qt=xe.isUndef(Qt)?nt:[].concat(Qt).concat(nt),zt[He]=Qt):(He instanceof se&&(He=He.get()),xe.each(He,function(Gt,ce){rn.add(ce,Gt)})),rn}},{key:"toString",value:function(He){return ut(this),xe.param(this._queryMap,void 0,void 0,He)}}])&&function Se(xe,ut){for(var ue=0;ue<ut.length;ue++){var se=ut[ue];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(xe,se.key,se)}}(le.prototype,Ue),Object.defineProperty(le,"prototype",{writable:!1}),se}();xe.uriQuery=ue}(Cn.Lib),function je(xe){var ut=xe.uriQuery,ue=xe.each,se=xe.Path,le=xe.getLogger(),Ue=/[#\/\?@]/g,ke=/[#\?]/g,He=/[#@]/g,nt=/#/g,zt={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},Qt=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function rn(Me,Xe){return Me.toLowerCase()===Xe.toLowerCase()}function Gt(Me,Xe){return encodeURI(Me).replace(Xe,function(Be){return"%"+(1===(Be=Be.charCodeAt(0).toString(16)).length?"0"+Be:Be)})}var ce=function(){function Me(at){if(!(this instanceof Me))throw new TypeError("Cannot call a class as a function");if(at instanceof Me)return xe.clone(at);var Dt=this;return xe.mix(Dt,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""}),at=Me.getComponents(at),ue(at,function(kt,Rt){if(kt=kt||"","query"===Rt)Dt.query=new ut(kt);else{try{kt=xe.urlDecode(kt)}catch(qe){le.error(qe+"urlDecode error : "+kt)}Dt[Rt]=kt}}),Dt}var Xe,Be,Ct;return Xe=Me,Ct=[{key:"getComponents",value:function(at){var Dt=(at=at||"").match(Qt)||[],kt={};return ue(zt,function(Rt,qe){kt[qe]=Dt[Rt]}),kt}}],(Be=[{key:"clone",value:function(){var Dt=new Me,kt=this;return ue(zt,function(Rt,qe){Dt[qe]=kt[qe]}),Dt.query=Dt.query.clone(),Dt}},{key:"resolve",value:function(at){xe.isString(at)&&(at=new Me(at));var Dt,kt=0,Rt=this.clone();return ue(["scheme","userInfo","hostname","port","path","query","fragment"],function(qe){var Mt;"path"===qe?kt?Rt[qe]=at[qe]:(Mt=at.path)&&(kt=1,xe.startsWith(Mt,"/")||(Rt.hostname&&!Rt.path?Mt="/"+Mt:Rt.path&&-1!==(Dt=Rt.path.lastIndexOf("/"))&&(Mt=Rt.path.slice(0,Dt+1)+Mt)),Rt.path=se.normalize(Mt)):"query"===qe?(kt||at.query.toString())&&(Rt.query=at.query.clone(),kt=1):(kt||at[qe])&&(Rt[qe]=at[qe],kt=1)}),Rt}},{key:"getScheme",value:function(){return this.scheme}},{key:"setScheme",value:function(at){return this.scheme=at,this}},{key:"getHostname",value:function(){return this.hostname}},{key:"setHostname",value:function(at){return this.hostname=at,this}},{key:"setUserInfo",value:function(at){return this.userInfo=at,this}},{key:"getUserInfo",value:function(){return this.userInfo}},{key:"setPort",value:function(at){return this.port=at,this}},{key:"getPort",value:function(){return this.port}},{key:"setPath",value:function(at){return this.path=at,this}},{key:"getPath",value:function(){return this.path}},{key:"setQuery",value:function(at){return xe.isString(at)&&(xe.startsWith(at,"?")&&(at=at.slice(1)),at=new ut(Gt(at,He))),this.query=at,this}},{key:"getQuery",value:function(){return this.query}},{key:"getFragment",value:function(){return this.fragment}},{key:"setFragment",value:function(at){return xe.startsWith(at,"#")&&(at=at.slice(1)),this.fragment=at,this}},{key:"isSameOriginAs",value:function(at){return rn(this.hostname,at.hostname)&&rn(this.scheme,at.scheme)&&rn(this.port,at.port)}},{key:"toString",value:function(at){var Dt,kt,Rt=[],qe=this;return(Dt=qe.scheme)&&(Rt.push(Gt(Dt,Ue)),Rt.push(":")),(Dt=qe.hostname)&&(Rt.push("//"),(kt=qe.userInfo)&&(Rt.push(Gt(kt,Ue)),Rt.push("@")),Rt.push(encodeURIComponent(Dt)),(kt=qe.port)&&(Rt.push(":"),Rt.push(kt))),(kt=qe.path)&&(Dt&&!xe.startsWith(kt,"/")&&(kt="/"+kt),kt=se.normalize(kt),Rt.push(Gt(kt,ke))),(Dt=qe.query.toString.call(qe.query,at))&&(Rt.push("?"),Rt.push(Dt)),(kt=qe.fragment)&&(Rt.push("#"),Rt.push(Gt(kt,nt))),Rt.join("")}}])&&fe(Xe.prototype,Be),Ct&&fe(Xe,Ct),Object.defineProperty(Xe,"prototype",{writable:!1}),Me}();xe.Uri=ce}(Cn.Lib),Cn);Le=(In=In.Lib).win,In._promise_ver&&In.isNumber(In._promise_ver)&&20220622<=In._promise_ver||(In._promise_ver=20220622,In.isFunction(Le.__zone_symbol__Promise)&&(In.nativePromise=Le.__zone_symbol__Promise),In.Promise=self&&self.Promise?self.Promise:Le&&Le.Promise?Le.Promise:X,In.nativePromise||(In.nativePromise=In.Promise)),(Ie=(pe=Cn).Lib)._defaultAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Ie._defaultPlatform="Win64",$e=Ie.Promise||window.Promise,Ie.getNavInfoSync=function(){var ue,se=Ie.win,le=Ie.preNavInfo.uaBrands,Ue="https:"===(ke=se.location.protocol),ke="https:"!==ke&&"http:"!==ke,He=!1,nt=!0,zt=!0,Qt=0,rn=0,Gt=!1,ce=!1,Me=!1,Xe=!1,Be=!1,Ct=!1,at=!1,Dt=!1,kt=!1,Rt=!1,qe=!1,Mt=!1;if(Ie.preNavInfo.bUseUserAgent)pe.navInfo?ln=pe.navInfo:(Vt=navigator,ln=Ie.getNavInfoByUserAgent(Vt.userAgent,Vt.platform),pe.navInfo=ln),zt=ln.bGecko,Gt=ln.bWin,ce=ln.bMac,Me=ln.bLinux,Be=ln.bAndroid,Xe=ln.bChromeOS,Ct=ln.bHarmonyOS,at=ln.bMobile,Dt=ln.bChrome,kt=ln.bEdge,Rt=ln.bOpera,qe=ln.bFirefox,Mt=ln.bSafari,ue=+ln.strBrowserVersion,(He=ln.bIE)&&(Qt=parseInt(ue),rn=ln.IEMode),nt=ln.bHTML5Edition;else{var Ht,Vt="",jt=0,ln=navigator.userAgentData;for(ln.platform&&""!=ln.platform&&(Vt=ln.platform.toLowerCase(),at=ln.mobile,jt=le.length),Ht=0;Ht<jt;Ht++){var Un=le[Ht].brand.toLowerCase();if(0<=Un.indexOf("chrome")){Dt=!0,ue=le[Ht].version;break}if(0<=Un.indexOf("edge")){kt=!0,ue=le[Ht].version;break}if(0<=Un.indexOf("opera")){Rt=!0,ue=le[Ht].version;break}}Dt||kt||Rt||(Dt=!0,ue="100"),ce=0<=Vt.indexOf("mac"),Xe=0<=Vt.indexOf("chromeos"),Gt="windows"==Vt,Me="linux"==Vt,Be="android"==Vt,Ct=0<=Vt.indexOf("harmony")}return{host:se,bSSL:Ue,bFileSystem:ke,bIE:He,bGecko:zt,IEVersion:Qt,IEMode:rn,bHTML5Edition:nt,bWin:Gt,bMac:ce,bLinux:Me,bAndroid:Be,bChromeOS:Xe,bHarmonyOS:Ct,bMobile:at,bChrome:Dt,bEdge:kt,bOpera:Rt,bFirefox:qe,bSafari:Mt,strBrowserVersion:ue}},Ie.getNavInfoByUAData=function(ue){var se=function(nt){var ke=pe.navInfoSync,He=nt.platform.toLowerCase(),Qt=nt.architecture.toLowerCase(),zt=(nt="64"==nt.bitness,-1<Qt.indexOf("arm")),rn=(Qt=-1<Qt.indexOf("mips"),navigator.maxTouchPoints||0),Gt=ke.bMobile,ce=!1,Me=!1;return/win32|win64|windows/.test(He)||((ce=/android/g.test(He))?Gt=!0:/linux/.test(He)||(/iphone/g.test(He)?Gt=!0:"macintel"==He&&1<rn&&(Me=!0))),{bWin:ke.bWin,bMac:ke.bMac,bLinux:ke.bLinux,bAndroid:ce,bMobile:Gt,bPad:Me,bChromeOS:ke.bChromeOS,bHarmonyOS:ke.bHarmonyOS,bArm64:zt,bMips64:Qt,bEmbed:!1,bOSx64:nt,bIE:!1,bEdge:ke.bEdge,bChrome:ke.bChrome,bFirefox:ke.bFirefox,bSafari:ke.bSafari,bOpera:ke.bOpera,bGecko:!0,bHuaWeiBrowser:!1,bHTML5Edition:!0,strBrowserVersion:ke.strBrowserVersion,IEMode:0}};return ue?$e.resolve(function(){return se(ue)}):navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","bitness"]).then(se)},Ie.asyncGetNavInfo=function(){if(pe.navInfo)return $e.resolve(pe.navInfo);var ue=navigator;if("userAgentData"in ue){var se=navigator.userAgentData;if(se.platform&&""!=se.platform){var le=[];if("brands"in se&&Ie.isArray(se.brands)&&0<se.brands.length?le=se.brands:"uaList"in se&&Ie.isArray(se.uaList)&&0<se.uaList.length&&(le=se.uaList),0<le.length)return Ie.getNavInfoByUAData().then(function(Ue){return pe.navInfo=Ue})}}return pe.navInfo="userAgent"in ue?Ie.getNavInfoByUserAgent(ue.userAgent,ue.platform):Ie.getNavInfoByUserAgent(Ie._defaultAgent,Ie._defaultPlatform),$e.resolve(pe.navInfo)},Ie.getNavInfo=function(){if(pe.navInfo)return pe.navInfo;var ue=navigator;if("userAgentData"in ue){var se=navigator.userAgentData;if(se.platform&&""!=se.platform){var le=[];if("brands"in se&&Ie.isArray(se.brands)&&0<se.brands.length?le=se.brands:"uaList"in se&&Ie.isArray(se.uaList)&&0<se.uaList.length&&(le=se.uaList),0<le.length)return Ie.getNavInfoByUAData().then(function(Ue){pe.navInfo=Ue}),!1}}return pe.navInfo="userAgent"in ue?Ie.getNavInfoByUserAgent(ue.userAgent,ue.platform):Ie.getNavInfoByUserAgent(Ie._defaultAgent,Ie._defaultPlatform),pe.navInfo},pe.navInfoSync=Ie.getNavInfoSync(),In=(Le=Cn).Lib;var Fe=!1,Ke=!1;if(!((Le=Le.navInfoSync).bEdge&&Le.bFileSystem||Le.bIE&&Le.IEVersion<8))try{Ke=window.localStorage,Fe=!!Ke}catch{Ke=!1}In.LS={isSupportLS:function(){return Fe},item:function(ue,se,le){var Ue=null;return this.isSupportLS()&&null!==(Ue=se?(Ke.setItem(ue,se),se):Ke.getItem(ue))?Ue:le},removeItem:function(ue){return!!this.isSupportLS()&&(Ke.removeItem(ue),!0)}},function v(xe){var se=xe.Lib,le=se.win,Ue=se.doc,ke=xe.navInfoSync,He=0,nt=[],zt=/\S/,rn="DOMContentLoaded",Gt="readystatechange",ce="complete",Me=(Qt=!(!Ue||!Ue.addEventListener))?function(kt,Rt,qe){kt.addEventListener(Rt,qe,!1)}:function(kt,Rt,qe){kt.attachEvent("on"+Rt,qe)},Xe=Qt?function(kt,Rt,qe){kt.removeEventListener(Rt,qe,!1)}:function(kt,Rt,qe){kt.detachEvent("on"+Rt,qe)};if(se.mix(se,{isWindow:function(kt){return null!=kt&&kt==kt.window},globalEval:function(kt){kt&&zt.test(kt)&&(le.execScript?le.execScript(kt):le.eval.call(le,kt))},domReady:function(Rt){if(He)try{Rt(se)}catch(qe){se.log(qe.stack||qe,"error"),setTimeout(function(){throw qe},0)}else nt.push(Rt);return this}}),se.ready=se.domReady,se.checkDomReady=function(){He||(He=1,se.asyncGetNavInfo().then(function(kt){Ue&&!ke.nodejs&&Xe(le,"load",se.checkDomReady),function Be(){for(var kt=0;kt<nt.length;kt++)try{nt[kt](se)}catch(Rt){se.log(Rt.stack||Rt,"error"),setTimeout(function(){throw Rt},0)}}()}))},Ue&&Ue.readyState!==ce)if(Me(le,"load",se.checkDomReady),Qt)Me(Ue,rn,function kt(){Xe(Ue,rn,kt),se.checkDomReady()});else{Me(Ue,Gt,function Rt(){Ue.readyState===ce&&(Xe(Ue,Gt,Rt),se.checkDomReady())});var Ct,Qt,Dt=(Qt=Ue&&Ue.documentElement)&&Qt.doScroll;try{Ct=null===le.frameElement}catch{Ct=!1}Dt&&Ct&&function Rt(){try{Dt("left"),setTimeout(se.checkDomReady,30)}catch{setTimeout(Rt,40)}}()}else se.checkDomReady();if(xe.navInfoSync.bIE)try{Ue.execCommand("BackgroundImageCache",!1,!0)}catch{}}(Cn),We="none",(Ae=Cn.Lib).mix(Ae,{get:function(ue){return Ae.doc.getElementById(ue)},hide:function(ue){(ue=Ae.isString(ue)?Ae.get(ue):ue)&&(ue.style.display=We)},show:function(ue){(ue=Ae.isString(ue)?Ae.get(ue):ue)&&(ue.style.display="")},toggle:function(ue){(ue=Ae.isString(ue)?Ae.get(ue):ue)&&(ue.style.display=ue.style.display===We?"":We)},empty:function(ue){if(ue)for(;ue.firstChild;)ue.removeChild(ue.firstChild)}}),(Le=(_e=Cn).Lib).colorStrToInt=function(ue){var se,le="0x";if(/^(rgb|RGB)/.test(ue)){for(var Ue=ue.replace(/[^\d,.]/g,"").split(","),ke=0;ke<3;++ke)le+=se=1==(se=Number(Ue[ke]).toString(16)).length?"0"+se:se;le+=4==Ue.length?se=1==(se=Math.round(255*Number(Ue[ke])).toString(16)).length?"0"+se:se:"ff"}else if("transparent"==ue)le+="00000000";else if(/^#[0-9a-fA-f]{6}$/.test(ue))le+=ue.replace(/#/,"")+"ff";else if(/^#[0-9a-fA-f]{3}$/.test(ue)){for(ke=0;ke<3;++ke)le+=ue[ke]+ue[ke];le+="ff"}else le="-1";return Number(le)},Le.IntToColorStr=function(ue){if(4294967295<ue||ue<0)return null;var se;if(_e.navInfoSync.bHTML5Edition)se="rgba("+Math.floor(ue/16777216)+","+Math.floor(ue/65536)%256+","+Math.floor(ue/256)%256+","+ue%256/255+")";else if(ue%256==0)se="transparent";else{for(se=Math.floor(ue/256).toString(16);6!=se.length;)se="0"+se;se="#"+se}return se},Kt=(It=Cn).Lib,In=(tn=Kt.doc)&&tn.documentElement,en=tn.getElementsByTagName("head")[0]||In,Ee=tn.createElement("script").readyState?function(ue,se){var le=ue.onreadystatechange;ue.onreadystatechange=function(){var Ue=ue.readyState;"loaded"===Ue||"complete"===Ue?(ue.onreadystatechange=null,le&&le(),se.call(this,!0)):"loading"!==Ue&&se.call(this,!1)}}:function(ue,se){ue.addEventListener("load",se,!1),ue.addEventListener("error",se,!1)},Kt.scriptOnload=Ee,Kt.getScript=function(ue,se,le){var Ue;if(Kt.isFunction(le)||(le=function(){}),Kt.isString(ue)&&""!=ue)return Ue=tn.createElement("script"),ue=["",ue].join(""),Ue.src=ue,se&&(Ue.async=!0),Ue.charset="utf-8",Ee(Ue,le),en.insertBefore(Ue,en.firstChild),Ue;le()},Kt.getScripts=function(ue,se,le){var Ue,ke;Kt.isArray(ue)?(ke=function(nt){nt?Ue--:le(),Ue<=0&&le("ok")},(Ue=ue.length)<=0?le("ok"):Kt.each(ue,function(He){Kt.getScript(He,se,ke)})):le()},Kt.getCss=function(ue,se){var le;if(Kt.isFunction(se)||(se=!1),Kt.isString(ue)&&""!=ue)return(le=tn.createElement("link")).href=ue,le.rel="stylesheet",le.async=!0,se&&Ee(le,se),en.insertBefore(le,en.firstChild),le;se&&se()},Kt.getAllCss=function(ue,se){var le,Ue;Kt.isArray(ue)?(le=ue.length,Ue=function(He){He?le--:se(),le<=0&&se("ok")},Kt.each(ue,function(ke){Kt.getCss(ke,Ue)})):se()},Kt.addScript=function(ue){var se,le=ue.body;Kt.isString(le)&&""!=le&&((se=tn.createElement("script")).charset="utf-8",It.navInfoSync.bIE?se.text=le:se.appendChild(tn.createTextNode(le)),se.language=ue.language?ue.language:"javascript",se.type=ue.type?ue.type:"text/javascript",en.insertBefore(se,en.firstChild))},Kt.addJS=function(ue){Kt.addScript({body:ue})},Kt.addVBS=function(ue){Kt.addScript({body:ue,language:"vbscript",type:"text/vbscript"})},function s(Ue){var ut,ue=Ue.Lib,se=Ue.navInfoSync,le=se.bIE&&parseInt(se.IEVersion)<=9,ke=(Ue=se.bIE&&parseInt(se.IEVersion)<=10,ue.win),He=ue.each,nt=new ue.Uri(location.href),zt=nt&&/^(?:about|app|app\-storage|.+\-extension|file|widget)$/.test(nt.getScheme()),Qt=function(){try{return new ke.XMLHttpRequest}catch{}},Gt=!(zt||!ke.XMLHttpRequest)&&"withCredentials"in(Qt()||[]),ce=ke.ActiveXObject?function(qe){return!le&&!zt&&Qt()||function(){try{var Mt=!1;return He(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(Ht){try{return Mt=new ke.ActiveXObject(Ht)}catch(Vt){ue.error("new xhr error: "+Vt.message)}}),Mt}catch{}}()}:Qt,Xe=/^(?:GET|HEAD)$/,Be=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ct={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},at=ut,Dt=(self&&self.fetch?self:ke).fetch,kt=(Ue&&(at=ue.noop),function u(xe,ut,ue){return ut&&o(xe.prototype,ut),ue&&o(xe,ue),Object.defineProperty(xe,"prototype",{writable:!1}),xe}(function qe(){if(!(this instanceof qe))throw new TypeError("Cannot call a class as a function")}));function Rt(qe){var Mt;if(qe&&ue.isString(qe.url))return(Mt=new kt).sendInternal(qe),Mt;ue.log("the url is error.")}ue.mix(kt.prototype,{url:!1,onSuccess:!1,onError:!1,onComplete:!1,method:"GET",async:!0,xhrFields:!1,mimeType:!1,username:!1,password:!1,data:!1,dataType:"text",headers:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:!1,afterSend:!1,timeout:0,cache:!0,crossDomain:!1,retry:0,setRequestHeader:function(qe,Mt){return this.headers[qe]=Mt,this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getNativeXhr:function(){return this.nativeXhr},getResponseHeader:function(qe){var Mt,Ht;if(qe=qe.toLowerCase(),2===this.state){if(!(Ht=this.responseHeaders))for(Ht=this.responseHeaders={};Mt=Be.exec(this.responseHeadersString);)Ht[Mt[1].toLowerCase()]=Mt[2];Mt=Ht[qe]}return void 0===Mt?null:Mt},overrideMimeType:function(qe){return this.state||(this.mimeType=qe),this},abort:function(qe){var Mt=this;return qe=qe||"abort",Mt.state=3,Mt.status=0,Mt.statusText=qe,Mt.nativeXhr&&Mt.nativeXhr.abort(),Mt._callback(),Mt},_ioReady:function(qe,Mt){var Ht=this,Vt=!1;if(2!==Ht.state&&3!==Ht.state){1===Ht.state&&(Ht.state=2),Ht.readyState=4,200<=qe&&qe<300||304===qe?(Mt=304===qe?"not modified":"success",Vt=!0):qe<0&&(qe=0);try{200<=qe&&Ht.handleResponseData()}catch(jt){ue.error(jt.stack||jt,"error"),Mt=jt.message||"parser error"}if((qe<200||!Vt)&&0<Ht.retry)return Ht.retry=Ht.retry-1,void setTimeout(function(){Ht.sendInternal()},200);Ht.status=qe,Ht.statusText=Mt,Ht._callback(Vt)}},_callback:function(qe){var Mt=this,Ht=Mt.timeoutTimer;Ht&&(clearTimeout(Ht),Mt.timeoutTimer=0),He([qe?Mt.onSuccess:Mt.onError,Mt.onComplete],function(Vt){ue.isFunction(Vt)&&Vt.apply(Mt.context,[Mt.responseData,Mt.statusText,Mt])}),Mt.responseData=null},handleResponseData:function(){var qe=this,Mt=qe.dataType,Ht=qe.nativeXhr;if("blob"===Mt||"arraybuffer"===Mt)if(le){if("responseBody"in Ht)ln=ke.dsVbsBinGetLength(Vt=Ht.responseBody),jt=new VBArray(ke.dsVbsBinGetBytes(Vt,0,ln)).toArray();else for(var Vt,jt=[],ln=(Vt=Ht.responseText).length,Un=0;Un<ln;++Un)jt.push(255&Vt.charCodeAt(Un));Vt=null}else jt=ke.Blob?Ht.response:"responseBody"in Ht?Ht.responseBody:Ht.responseText;else if("json"==Mt)jt=Ht.responseType&&"json"==Ht.responseType.toLowerCase()?Ht.response:Ht.responseText?ue.parse(Ht.responseText):{};else if("user-defined"===Mt)jt=void 0!==Ht.response?Ht.response:Ht.responseText;else{qe.responseText=jt=Ht.responseText||"";try{var On=Ht.responseXML;On&&On.documentElement&&(qe.responseXML=On)}catch{}}qe.responseData=jt},sendInternal:function(On){var Mt,Ht,Vt,jt,ln,Un=this,br=(On=Un._setup(On)).method;if(ue.isString(br)&&(br=br.toUpperCase()),Ht=On.contentType,Mt=On.dataType,jt=On.mimeType,ue.isString(ln=On.url)&&(Un.nativeXhr=Vt=ce(On.crossDomain),Vt)){try{if(Un.state=1,On.username?Vt.open(br,ln,On.async,On.username,On.password):Vt.open(br,ln,On.async),(On.async||se.bIE)&&Mt&&"user-defined"!=Mt&&"responseType"in Vt)try{Vt.responseType=Mt}catch{}}catch(En){return void(Un.state<2?(ue.error(En.stack||En,"error"),Un._ioReady(-1,"open error: "+(ue.isNumber(En.number)?"("+En.number+")":"")+(En.message||""))):ue.error(En))}"withCredentials"in(br=On.xhrFields||{})&&(Gt||delete br.withCredentials),He(br,function(En,vr){try{Vt[vr]=En}catch(ei){ue.error(ei)}}),jt&&Vt.overrideMimeType&&Vt.overrideMimeType(jt),!1===(ln=On.headers||{})["X-Requested-With"]&&delete ln["X-Requested-With"],"setRequestHeader"in Vt&&(Ht&&Vt.setRequestHeader("Content-Type",On.contentType),Vt.setRequestHeader("Accept",Mt&&Ct[Mt]?Ct[Mt]+("*"===Mt?"":", */*; q=0.01"):Ct["*"]),He(ln,function(En,vr){Vt.setRequestHeader(vr,En)})),On.cache||(Vt.setRequestHeader("If-Modified-Since","0"),Vt.setRequestHeader("Cache-Control","no-cache")),jt=(br=!Xe.test(On.method))&&On.data||null,br&&le&&(jt=On.data),On.async&&0<On.timeout&&(On.timeout<300&&(On.timeout=300),Un.timeoutTimer=setTimeout(function(){Un.abort("timeout")},On.timeout));try{if(Un.state=1,ue.isFunction(Un.beforeSend)&&!1===Un.beforeSend(Vt,Un))return void Un.abort("cancel");Vt.send(jt),jt=null,On.data=null,ue.isFunction(Un.afterSend)&&Un.afterSend(Un)}catch(En){Un.state<2?(ue.error(En.stack||En,"error"),Un._ioReady(-1,"send error: "+(En.message||""))):ue.error(En)}On.async&&4!==Vt.readyState?Vt.onreadystatechange=function(){Un._xhrCallback()}:Un._xhrCallback()}},_xhrCallback:function(qe,Mt){var Ht=this.nativeXhr;try{if(4===Ht.readyState||Mt)if(Ht.onreadystatechange=at,Mt)4!==Ht.readyState&&Ht.abort();else{this.responseHeadersString=Ht.getAllResponseHeaders();var Vt,jt=Ht.status;try{Vt=Ht.statusText}catch(ln){ue.error("xhr statusText error: "),ue.error(ln),Vt=""}this._ioReady(jt,Vt)}}catch(ln){ue.error(ln.stack||ln,"error"),Ht.onreadystatechange=at,Mt||this._ioReady(-1,ln.message||"process error")}},_setup:function(qe){var Mt,Ht,Vt,jt,ln=this;if(qe){for(Ht in ln.context=qe.context,delete qe.context,qe instanceof kt&&(qe=qe.config),jt=(ln.config=qe).url,jt=ue.startsWith(jt,"http://")||ue.startsWith(jt,"https://")?new ue.Uri(jt):(ue.startsWith(jt,"//")&&(qe.url=jt="http:"+jt),nt.resolve(jt)),Mt=qe.dataType?qe.dataType.toLowerCase():"text",qe.dataType=Mt,qe.method=qe.method?qe.method.toUpperCase():"GET","crossDomain"in qe||(qe.crossDomain=!jt.isSameOriginAs(nt)),Vt=qe.headers)ue.isUndefined(Vt[Ht])&&delete Vt[Ht];ue.mix(ln,qe)}return ln.state=1,ln}}),ue.mix(ue,{ajax:Rt,io:{get:function(qe,Mt,Ht,Vt){return Rt({method:"GET",url:qe,onSuccess:Mt,onError:Ht,dataType:Vt})},post:function(qe,Mt,Ht,Vt,jt){return Rt({method:"POST",data:Mt,url:qe,onSuccess:Ht,onError:Vt,dataType:jt})},put:function(qe,Mt,Ht,Vt,jt){return Rt({method:"PUT",data:Mt,url:qe,onSuccess:Ht,onError:Vt,dataType:jt})}}}),Dt?ue.fetch=function(jt,Mt){var Ht="text",Vt=!1;return Mt&&(Mt.dataType&&(Ht=Mt.dataType),Mt.fetchRaw&&(Vt=!0)),jt=Dt(jt,Mt).then(function(ln){if(ln.ok)return ln;throw{httpCode:ln.status,errorString:["HTTP process error: ",ln.statusText," (",ln.status,")."].join("")}}),Vt?jt:jt.then("blob"==Ht?function(ln){return ln.blob()}:"json"==Ht?function(ln){return ln.json()}:"arraybuffer"==Ht?function(ln){return ln.arrayBuffer()}:function(ln){return ln.text()})}:(le&&ue.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join("")),ue.fetch=function(qe,Mt){return new(ue.nativePromise||window.Promise)(function(Ht,Vt){var jt={url:qe,onSuccess:function(Un,On,br){Ht(Un)},onError:function(Un,On,br){Vt({httpCode:br.status,errorString:On})},dataType:"text",method:ut,data:ut,headers:ut,contentType:ut,mimeType:ut},ln=!1;Mt&&(Mt.method&&(jt.method=Mt.method),Mt.body&&(jt.data=Mt.body),Mt.headers&&(jt.headers||(jt.headers={}),He(Mt.headers,function(Un,On){"content-type"==On.toLowerCase()&&(ln=!0),jt.headers[On]=Un})),Mt.dataType&&(jt.dataType=Mt.dataType),Mt.contentType&&(jt.contentType=Mt.contentType)),ln&&(jt.contentType=!1),"blob"==jt.dataType&&le&&(jt.mimeType="text/plain; charset=x-user-defined"),ue.ajax(jt)})})}(Cn),function f(xe){var ut=xe.Lib;ut.obj={customEvent:{fire:function(ue){var se,le=this;le.exec=le.exec||{},ue=ue.toLowerCase(),se=Array.prototype.slice.call(arguments,1),ut.each(le.exec[ue]||[],function(He){var ke=He.f;He=He.c||le;try{ke.apply(He,se)}catch(nt){ut.log(nt)}})},on:function(ue,se,le){var Ue=this;Ue.exec=Ue.exec||{},ue=ue.toLowerCase(),Ue.exec[ue]=Ue.exec[ue]||[],Ue.exec[ue].push({f:se,c:le})},off:function(ue,se,le){var Ue=this.exec;if(Ue)if(ue)if(ue=ue.toLowerCase(),se)for(var ke=Ue[ue]||[],He=ke.length-1;0<=He;He--)ke[He]===se&&ke.splice(He,1);else Ue[ue]=null;else this.exec=null}}}}(Cn),Ft=(Ot=Cn).Lib,Bt=function(se){return Ot.navInfoSync.bGecko&&"mousewheel"===se?"DOMMouseScroll":se},Ft.mix(Ft,{addEventListener:function(ue,se,le){se=Bt(se),ue&&ue.addEventListener(se,le,!1)},removeEventListener:function(ue,se,le){se=Bt(se),ue&&ue.removeEventListener(se,le,!1)},stopPropagation:function(ue){(ue=ue||Ft.win.event).preventDefault&&ue.preventDefault(),ue.stopPropagation&&ue.stopPropagation(),ue.returnValue=!1,ue.cancelBubble=!0},fireEvent:function(ue,se){var le=Ft.win.document.createEvent("HTMLEvents");le.initEvent(ue,!0,!0),se.dispatchEvent&&se.dispatchEvent(le)}}),Le=(Le=Cn).Lib,ot={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]},Le.base64={UTF16ToUTF8:function(ue){for(var se=[],le=ue.length,Ue=0;Ue<le;Ue++){var ke,He,nt=ue.charCodeAt(Ue);0<nt&&nt<=127?se.push(ue.charAt(Ue)):128<=nt&&nt<=2047?(ke=192|nt>>6&31,He=128|63&nt,se.push(String.fromCharCode(ke),String.fromCharCode(He))):2048<=nt&&nt<=65535&&(ke=224|nt>>12&15,He=128|nt>>6&63,nt=128|63&nt,se.push(String.fromCharCode(ke),String.fromCharCode(He),String.fromCharCode(nt)))}return se.join("")},UTF8ToUTF16:function(ue){for(var se,le,Ue,ke=[],He=ue.length,nt=0;nt<He;nt++)0==((se=ue.charCodeAt(nt))>>7&255)?ke.push(ue.charAt(nt)):6==(se>>5&255)?(Ue=(31&se)<<6|63&(le=ue.charCodeAt(++nt)),ke.push(String.fromCharCode(Ue))):14==(se>>4&255)&&(Ue=(255&(se<<4|(le=ue.charCodeAt(++nt))>>2&15))<<8|(3&le)<<6|63&ue.charCodeAt(++nt),ke.push(String.fromCharCode(Ue)));return ke.join("")},encode:function(ue){for(var se,le,Ue,ke=this.UTF16ToUTF8(ue),He=[],nt=0,zt=ke.length;nt<zt;){if(se=255&ke.charCodeAt(nt++),nt==zt){He.push(ot.encodeChars.charAt(se>>2)),He.push(ot.encodeChars.charAt((3&se)<<4)),He.push("==");break}if(le=ke.charCodeAt(nt++),nt==zt){He.push(ot.encodeChars.charAt(se>>2)),He.push(ot.encodeChars.charAt((3&se)<<4|(240&le)>>4)),He.push(ot.encodeChars.charAt((15&le)<<2)),He.push("=");break}Ue=ke.charCodeAt(nt++),He.push(ot.encodeChars.charAt(se>>2)),He.push(ot.encodeChars.charAt((3&se)<<4|(240&le)>>4)),He.push(ot.encodeChars.charAt((15&le)<<2|(192&Ue)>>6)),He.push(ot.encodeChars.charAt(63&Ue))}return He.join("")},encodeArray:function(ue){for(var se,le,Ue,ke=[],He=0,nt=ue.length;He<nt;){if(se=255&ue[He++],He==nt){ke.push(ot.encodeChars.charAt(se>>2)),ke.push(ot.encodeChars.charAt((3&se)<<4)),ke.push("==");break}if(le=255&ue[He++],He==nt){ke.push(ot.encodeChars.charAt(se>>2)),ke.push(ot.encodeChars.charAt((3&se)<<4|(240&le)>>4)),ke.push(ot.encodeChars.charAt((15&le)<<2)),ke.push("=");break}Ue=255&ue[He++],ke.push(ot.encodeChars.charAt(se>>2)),ke.push(ot.encodeChars.charAt((3&se)<<4|(240&le)>>4)),ke.push(ot.encodeChars.charAt((15&le)<<2|(192&Ue)>>6)),ke.push(ot.encodeChars.charAt(63&Ue))}return ke.join("")},decode:function(ue,se){for(var le,Ue,ke,He,nt=[],zt=0,Qt=ue.length;zt<Qt;){for(;le=ot.decodeChars[255&ue.charCodeAt(zt++)],zt<Qt&&-1==le;);if(-1==le)break;for(;Ue=ot.decodeChars[255&ue.charCodeAt(zt++)],zt<Qt&&-1==Ue;);if(-1==Ue)break;nt.push(se?le<<2|(48&Ue)>>4:String.fromCharCode(le<<2|(48&Ue)>>4));do{if(61==(ke=255&ue.charCodeAt(zt++)))return se?nt:this.UTF8ToUTF16(nt.join(""))}while(ke=ot.decodeChars[ke],zt<Qt&&-1==ke);if(-1==ke)break;nt.push(se?(15&Ue)<<4|(60&ke)>>2:String.fromCharCode((15&Ue)<<4|(60&ke)>>2));do{if(61==(He=255&ue.charCodeAt(zt++)))return se?nt:this.UTF8ToUTF16(nt.join(""))}while(He=ot.decodeChars[He],zt<Qt&&-1==He);if(-1==He)break;nt.push(se?(3&ke)<<6|He:String.fromCharCode((3&ke)<<6|He))}return se?nt:this.UTF8ToUTF16(nt.join(""))}},Le.utf8={fromUTF16:function(ue){for(var se,le=[],Ue=0,ke=ue.length;Ue<ke;)1<=(se=ue.charCodeAt(Ue))&&se<=127?le.push(ue.charAt(Ue)):(2047<se?(le.push(String.fromCharCode(224|se>>12&15)),le.push(String.fromCharCode(128|se>>6&63))):le.push(String.fromCharCode(192|se>>6&31)),le.push(String.fromCharCode(128|se>>0&63))),Ue++;return le.join("")},toUTF16:function(ue){for(var se,le,Ue,ke=[],He=0,nt=ue.length;He<nt;)switch((se=ue.charCodeAt(He++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:ke.push(ue.charAt(He-1));break;case 12:case 13:le=ue.charCodeAt(He++),ke.push(String.fromCharCode((31&se)<<6|63&le));break;case 14:le=ue.charCodeAt(He++),Ue=ue.charCodeAt(He++),ke.push(String.fromCharCode((15&se)<<12|(63&le)<<6|(63&Ue)<<0))}return ke.join("")}},Lt=typeof self<"u"?self:e.g,(Je.prototype=new Error).name="InvalidCharacterError",Le.btoa=Lt.btoa?function(ue){return Lt.btoa(ue)}:function(ue){var se,le,Ue=String(ue),ke=0,He=ot.encodeChars,nt="";for(ke=0,He=ot.encodeChars,nt="";Ue.charAt(0|ke)||(He="=",ke%1);nt+=He.charAt(63&se>>8-ke%1*8)){if(255<(le=Ue.charCodeAt(ke+=.75)))throw new Je("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");se=se<<8|le}return nt},Le.atob=Lt.atob?function(ue){return Lt.atob(ue)}:function(ue){var se,le,Ue=String(ue).replace(/[=]+$/,""),ke=0,He=0,nt="";if(Ue.length%4==1)throw new Je("'atob' failed: The string to be decoded is not correctly encoded.");for(He=ke=0,nt="";le=Ue.charAt(He++);~le&&(se=ke%4?64*se+le:le,ke++%4)&&(nt+=String.fromCharCode(255&se>>(-2*ke&6))))le=ot.encodeChars.indexOf(le);return nt},Qe={queue:[],doNextStarted:!1,timer:null,pushToDo:function(ue,se,le){Qe.queue.push({obj:ue,method:se,args:le})},doNext:function(){if(!Qe.doNextStarted)return clearTimeout(Qe.timer),void(Qe.timer=null);if(0==Qe.queue.length)Qe.timer=setTimeout(Qe.doNext,500);else{var ue=(le=Qe.queue[0]).obj,se=le.method,le=le.args;if(Qe.queue.splice(0,1),ue&&ze.isFunction(ue[se])){var Ue,ke,He=!1;2<le.length&&(ke=le[le.length-1],ze.isFunction(Ue=le[le.length-2])&&ze.isFunction(ke)&&(le[le.length-2]=function(){try{Ue.apply(ue,arguments)}catch{}Qe.timer=setTimeout(Qe.doNext,0)},le[le.length-1]=function(){try{ke.apply(ue,arguments)}catch{}Qe.timer=setTimeout(Qe.doNext,0)},He=!0));try{ue[se].apply(ue,le)}catch{}He||(Qe.timer=setTimeout(Qe.doNext,0))}else if(null===ue&&ze.isFunction(se)){try{se.apply(null,le)}catch{}Qe.timer=setTimeout(Qe.doNext,0)}else ze.log("not invoke a function: "+se),Qe.timer=setTimeout(Qe.doNext,0)}},start:function(){Qe.doNextStarted||(Qe.doNextStarted=!0,Qe.timer=setTimeout(Qe.doNext,0))},stop:function(){clearTimeout(Qe.timer),Qe.doNextStarted=!1,Qe.queue=[]}},(ze=Cn.Lib).asyncQueue=Qe,function V(ue){ue=ue.Lib;var ut,se={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function le(ke,He){for(var nt,zt,Qt,rn,Gt,ce,Me,Xe=1,Be=ke.length,Ct="",at=0;at<Be;at++)if("string"==typeof ke[at])Ct+=ke[at];else if("object"===$(ke[at])){if((Qt=ke[at]).keys)for(nt=He[Xe],zt=0;zt<Qt.keys.length;zt++){if(null==nt)throw new Error(ut('[sprintf] Cannot access property "%s" of undefined value "%s"',Qt.keys[zt],Qt.keys[zt-1]));nt=nt[Qt.keys[zt]]}else nt=Qt.param_no?He[Qt.param_no]:He[Xe++];if(se.not_type.test(Qt.type)&&se.not_primitive.test(Qt.type)&&nt instanceof Function&&(nt=nt()),se.numeric_arg.test(Qt.type)&&"number"!=typeof nt&&isNaN(nt))throw new TypeError(ut("[sprintf] expecting number but found %T",nt));switch(se.number.test(Qt.type)&&(ce=0<=nt),Qt.type){case"b":nt=parseInt(nt,10).toString(2);break;case"c":nt=String.fromCharCode(parseInt(nt,10));break;case"d":case"i":nt=parseInt(nt,10);break;case"j":nt=JSON.stringify(nt,null,Qt.width?parseInt(Qt.width):0);break;case"e":nt=Qt.precision?parseFloat(nt).toExponential(Qt.precision):parseFloat(nt).toExponential();break;case"f":nt=Qt.precision?parseFloat(nt).toFixed(Qt.precision):parseFloat(nt);break;case"g":nt=Qt.precision?String(Number(nt.toPrecision(Qt.precision))):parseFloat(nt);break;case"o":nt=(parseInt(nt,10)>>>0).toString(8);break;case"s":nt=String(nt),nt=Qt.precision?nt.substring(0,Qt.precision):nt;break;case"t":nt=String(!!nt),nt=Qt.precision?nt.substring(0,Qt.precision):nt;break;case"T":nt=Object.prototype.toString.call(nt).slice(8,-1).toLowerCase(),nt=Qt.precision?nt.substring(0,Qt.precision):nt;break;case"u":nt=parseInt(nt,10)>>>0;break;case"v":nt=nt.valueOf(),nt=Qt.precision?nt.substring(0,Qt.precision):nt;break;case"x":nt=(parseInt(nt,10)>>>0).toString(16);break;case"X":nt=(parseInt(nt,10)>>>0).toString(16).toUpperCase()}se.json.test(Qt.type)?Ct+=nt:(!se.number.test(Qt.type)||ce&&!Qt.sign?Me="":(Me=ce?"+":"-",nt=nt.toString().replace(se.sign,"")),rn=Qt.pad_char?"0"===Qt.pad_char?"0":Qt.pad_char.charAt(1):" ",Gt=Qt.width-(Me+nt).length,Gt=Qt.width&&0<Gt?function(Dt,kt){if("_".repeat)return Dt.repeat(kt);for(var Rt=0,qe=[];Rt<kt;Rt++)qe.push(Dt);return qe.join("")}(rn,Gt):"",Ct+=Qt.align?Me+nt+Gt:"0"===rn?Me+Gt+nt:Gt+Me+nt)}return Ct}var Ue=Object.create?Object.create(null):{};ut=function(He){return le(function(nt){if(Ue[nt])return Ue[nt];for(var zt,Qt=nt,rn=[],Gt=0;Qt;){if(null!==(zt=se.text.exec(Qt)))rn.push(zt[0]);else if(null!==(zt=se.modulo.exec(Qt)))rn.push("%");else{if(null===(zt=se.placeholder.exec(Qt)))throw new SyntaxError("[sprintf] unexpected placeholder");if(zt[2]){Gt|=1;var ce=[],Me=zt[2],Xe=[];if(null===(Xe=se.key.exec(Me)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(ce.push(Xe[1]);""!==(Me=Me.substring(Xe[0].length));)if(null!==(Xe=se.key_access.exec(Me)))ce.push(Xe[1]);else{if(null===(Xe=se.index_access.exec(Me)))throw new SyntaxError("[sprintf] failed to parse named argument key");ce.push(Xe[1])}zt[2]=ce}else Gt|=2;if(3===Gt)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");rn.push({placeholder:zt[0],param_no:zt[1],keys:zt[2],sign:zt[3],pad_char:zt[4],align:zt[5],width:zt[6],precision:zt[7],type:zt[8]})}Qt=Qt.substring(zt[0].length)}return Ue[nt]=rn}(He),arguments)},ue.sprintf=ut,ue.vsprintf=function(ke,He){return ut.apply(null,[ke].concat(He||[]))}}(Cn),Ze=(ae=Cn.Lib).doc,ae.Events={registedClass:[],registedObjs:[]},Ne=function(se){var le=se||window.event,Ue=!0;return ae.each(ae.Events.registedObjs,function(ke){ae.each(ae.Events.registedClass,function(He){if(ke instanceof He&&ke.bFocus&&ke.handlerKeyDown&&!(Ue=ke.handlerKeyDown(le)))return!1})}),Ue},ae.ready(function(){ae.addEventListener(Ze.documentElement,"keydown",Ne)}),ae.mix(ae,{getWheelDelta:function(Ue){var se,le=(Ue=Ue||window.event).wheelDelta;return le&&(se=le/120),(Ue=Ue.detail)?-(Ue%3==0?Ue/3:Ue):se}}),ae.EnumMouseButton=Re={LEFT:0,MIDDLE:1,RIGHT:2},ae.detectButton=function(ue){return null==(ue=ue||window.event).which?ue.button<2?Re.LEFT:4==ue.button?Re.MIDDLE:Re.RIGHT:ue.which<2?Re.LEFT:2==ue.which?Re.MIDDLE:Re.RIGHT},Cn.Lib.switchEvent=function(ue){return ue.which=null==(ue=ue||window.event).which?ue.button<2?1:4==ue.button?2:3:ue.which<2?1:2==ue.which?2:3,ue},function _t(xe){xe.currentStyle=function(ut,ue){var se=xe.win,le=se.doc;return ut.currentStyle?ut.currentStyle[ue]:se.getComputedStyle?(ue.replace(/([A-Z])/g,"-$1"),ue.toLowerCase(),le.defaultView.getComputedStyle(ut,null)[ue]):null}}(Cn.Lib),function mt(se){var ue=se.Lib,le=ue.isString,Ue=ue.each,ke=Array.prototype.slice,He=" ",nt=(se=se.navInfoSync).bIE&&se.IEMode<10,zt=/[\n\t\r\.]/g,Qt=function(){function at(qe,Mt,Ht){if(!(this instanceof at))throw new TypeError("Cannot call a class as a function");it(this,"isNodeList",!0),it(this,"length",0);var Vt=this;return Vt instanceof at?(qe&&("string"==typeof qe?ue.error("Err 4001."):ue.isArray(qe)||qe.isNodeList?Array.prototype.push.apply(Vt,ue.makeArray(qe)):(Vt[0]=qe,Vt.length=1)),Vt):new at(qe,Mt,Ht)}var Dt,kt;return Dt=at,(kt=[{key:"item",value:function(qe){return ue.isNumber(qe)?qe>=this.length?null:new at(this[qe]):new at(qe)}},{key:"slice",value:function(){return new at(ke.apply(this,arguments))}},{key:"getDOMNodes",value:function(){return ke.call(this)}},{key:"each",value:function(qe,Mt){var Ht=this;return Ue(Ht,function(Vt,jt){return Vt=new at(Vt),qe.call(Mt||Vt,Vt,jt,Ht)}),Ht}},{key:"getEL",value:function(){return 0<this.length?this[0]:void 0}},{key:"all",value:function(qe){return 0<this.length?ue.all(qe,this):new at}},{key:"one",value:function(qe){return(qe=this.all(qe)).length?qe.slice(0,1):qe}}])&&function be(xe,ut){for(var ue=0;ue<ut.length;ue++){var se=ut[ue];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(xe,se.key,se)}}(Dt.prototype,kt),Object.defineProperty(Dt,"prototype",{writable:!1}),at}();function rn(at){return le(at)&&(at=ue.trim(at))&&3<=at.length&&ue.startsWith(at,"<")&&ue.endsWith(at,">")}function Gt(at){return(He+at+He).replace(zt,He)}function ce(at){return at.replace(zt,"")}function Ct(at,Dt){return Dt&&Dt.isNodeList&&(Dt=Dt.getEL()),le(at)?(rn(at)&&ue.err("Err 4002."),new Qt(ue.sizzle(at,Dt))):at.isNodeList?at:new Qt(at)}ue.mix(Qt.prototype,{before:function(at){var Dt=this.getEL(),kt=[at];Dt&&(rn(at)&&(kt=ue.parseHTML(at)),Ue(kt,function(Rt){Dt.insertBefore(Rt,Dt.childNodes[0])}))},append:function(at){var Dt=this.getEL(),kt=[at];Dt&&(rn(at)&&(kt=ue.parseHTML(at)),Ue(kt,function(Rt){Dt.appendChild(Rt)}))},html:function(at){var Dt,kt=this.getEL();if(kt){if(ue.isUndef(at))return Dt=(Dt=kt).innerHTML,document.all?(Dt=Dt.replace(/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/gi,'$1="$2"').replace(/"'([^'"]*)'"/gi,'"$1"')).replace(/<(\/?)(\w+)([^>]*)>/g,function(Rt,qe,Mt,Ht){return qe?"</"+Mt.toLowerCase()+">":("<"+Mt.toLowerCase()+Ht+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(Vt,jt,ln,Un,On,br,En,vr){return On?'="'+On+'"'+br:Vt})}).replace(/<\/?([^>]+)>/g,function(Rt){return Rt}):Dt;kt.innerHTML="",Ue(ue.parseHTML(at),function(Rt){kt.appendChild(Rt)})}},attr:function(at,Dt){var kt=this.getEL();if(kt){if(ue.isUndef(Dt))return"readonly"===at?kt.readOnly?"readonly":"":"style"!==at&&nt?kt[at]:(kt=kt.attributes[at])&&kt.value;"class"==at?kt.className=Dt:kt[at]=Dt}},style:function(Dt,kt){var Rt=this.getEL();if(Rt)return ue.style(Rt,Dt,kt)},css:function(at){Ue(this,function(Dt){Ue(at,function(kt,Rt){ue.style(Dt,Rt,kt)})})},addClass:function(at){var Dt=this.getEL();Dt&&function(Dt,kt){var Rt,qe,Mt,Ht,Vt=Dt.className,jt=kt.length;if(Vt){for(Rt=Gt(Vt),qe=Vt,Mt=0;Mt<jt;Mt++)Ht=ce(kt[Mt]),Rt.indexOf(He+Ht+He)<0&&(qe+=He+Ht);qe=ue.trim(qe)}else qe=kt.join(" ");Dt.className=qe}(Dt,at.split(He))},removeClass:function(at){var Dt=this.getEL();Dt&&function(Dt,kt){var Rt,qe,Mt,Ht=Dt.className,Vt=kt.length;if(Ht&&Vt){for(Rt=Gt(Ht),qe=0;qe<Vt;qe++)for(Mt=He+ce(kt[qe])+He;0<=Rt.indexOf(Mt);)Rt=Rt.replace(Mt,He);Dt.className=ue.trim(Rt)}}(Dt,at.split(He))},hasClass:function(at){var Dt=this.getEL();if(Dt)return function(Ht,kt){var Rt,qe,Mt,Vt=kt.length;if((Ht=Ht.className)&&Vt){for(Rt=Gt(Ht),qe=0;qe<Vt;qe++)if(Mt=He+ce(kt[qe])+He,Rt.indexOf(Mt)<0)return!1;return!0}return!1}(Dt,at.split(He))},parent:function(){var at=(at=this.getEL())&&at.parentNode;return new Qt(at)},remove:function(){var at=this.getEL();at&&at.parentNode&&at.parentNode.removeChild(at)},offset:function(){var at=this.getEL();return ue.DOM.getElDimensions(at,!0)}}),ue.mix(ue,{all:Ct,one:function(at,Dt){return(at=Ct(at,Dt)).length?at.slice(0,1):at},isNodeList:function(at){return at instanceof Qt}}),ue.ready(function(){ue.all=Ct})}(Cn),At=(In=Cn.Lib).win,St=In.doc,Pe=isNaN,In.DOM={getOffset:function(ue,se,le){ue=ue||At.event;for(var Ue,ke,He=le||ue.target,nt=0,zt=0,Qt=(le=0,0),rn=!1;He&&!Pe(He.offsetLeft)&&!Pe(He.offsetTop);)ke=He.scrollLeft,Ue=He.scrollTop,"BODY"===He.tagName?rn?Ue=ke=0:(ke|=St.documentElement.scrollLeft,Ue|=St.documentElement.scrollTop):"fixed"===He.style.position&&(rn=!0),nt+=He.offsetLeft-ke,zt+=He.offsetTop-Ue,He=He.offsetParent;return se&&(le=se.Left,Qt=se.Top),{x:nt=ue.clientX-nt-le,y:zt=ue.clientY-zt-Qt}},getElDimensions:function(ue,se){var le;return ue?(le=ue.style.display,ue.style.display="",se=se?{offsetTop:ue.offsetTop,offsetLeft:ue.offsetLeft,offsetWidth:ue.offsetWidth,offsetHeight:ue.offsetHeight}:{clientTop:ue.clientTop,clientLeft:ue.clientLeft,clientWidth:ue.clientWidth||(parseInt(ue.style.width)?parseInt(ue.style.width):0),clientHeight:ue.clientHeight||(parseInt(ue.style.height)?parseInt(ue.style.height):0)},ue.style.display=le,se):{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}},In.getElDimensions=In.DOM.getElDimensions,function Ce(xe){var ut,ue,se,le=xe.Lib,Ue=(le.loaderBarClassName="ds-dwt-loaderBar",le.loaderBarSource="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIxMDBweCIgaGVpZ2h0PSIxMDBweCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjE2IiBmaWxsPSIjZmU4ZTE0Ii8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTQuMzQ0IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSg0NSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSIxMi41MzEiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDkwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjEwLjc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxMzUgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTAuMDYzIiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxODAgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iOC4wNjMiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDIyNSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSI2LjQzOCIgZmlsbD0iI2ZlOGUxNCIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjUuMzc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgzMTUgNjQgNjQpIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHZhbHVlcz0iNDUgNjQgNjQ7OTAgNjQgNjQ7MTM1IDY0IDY0OzE4MCA2NCA2NDsyMjUgNjQgNjQ7MjcwIDY0IDY0OzMxNSA2NCA2NDswIDY0IDY0IiBjYWxjTW9kZT0iZGlzY3JldGUiIGR1cj0iNzIwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg==",le.loaderBarSourceIE="data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=",le.createShowMaskContent=function(Be){var Ct,at="",Dt="230px",kt="240px";return Be&&(Be.background&&(at=";background:"+Be.background),Be.width&&(Dt=Be.width),Be.height&&(kt=Be.height),Be.imageSource&&(Ct=Be.imageSource)),['<div align="center" ','class="',le.loaderBarClassName,'" ','style="margin:0 auto;max-width:',Dt,";max-height:",kt,";line-height:",kt,at,'"><img style="user-select: none;max-width:230px; max-height:240px; width:50%" src="',Ct=Ct||le.loaderBarSource,'" draggable="false" /></div>'].join("")},le.win),ke=le.doc,He=!0,nt=!1;function rn(Be){var Ct=ke.createEvent("MouseEvents");return Ct.initMouseEvent(Be.type,Be.bubbles,Be.cancelable,Ue,Be.detail,Be.screenX,Be.screenY,Be.clientX,Be.clientY,Be.ctrlKey,Be.altKey,Be.shiftKey,Be.metaKey,Be.button,Be.relatedTarget),Ct}function Gt(Be){ke.body.dispatchEvent(rn(Be))}var Me={pendingDialogStack:[],_updateStacking:function(Be){var Ct,at=this.pendingDialogStack;0==at.length?ue!==ut&&(le.removeEventListener(ue,"click",Gt),ke&&ke.body&&ke.body.removeChild(ue),ue=ut):(1!=Be&&function ce(){ue===ut&&(ue=ke.createElement("div"),(se=ue.style).position="fixed",se.display="block",se.left=se.top=se.margin=se.padding=0,se.backgroundColor="rgba(128, 128, 128, 0.1)",se.filter="alpha(opacity=10)",se.opacity=se.MozOpacity=.1,se.zIndex=5e5,se.width=se.height="100%",xe.navInfoSync.bIE&&(ue.innerHTML='<iframe src="javascript:\'\'" style="background:none;margin:0px auto;border:0;width:100%;height:100%;position:relative;z-index:9999;"></iframe>'),ke.createEvent&&le.addEventListener(ue,"click",Gt)),ke.body.contains(ue)||ke.body.appendChild(ue)}(),Ct=5e5,le.each(at,function(Dt){Ct++,Dt._dlgInfo.mask&&(Dt._dlgInfo.mask.style.zIndex=Ct++),Dt.style.zIndex=Ct}))},pushDialog:function(Be,Ct){var at;Be.getBoundingClientRect(),1e3<=this.pendingDialogStack.length?le.error("Too many modal dialogs."):((at=ke.createElement("div")).className="dynamsoft-backdrop",1==Ct?(at.style.left=0,at.style.top=0,at.style.position="absolute"):(at.style.left=0,at.style.top=0,at.style.width="100%",at.style.height="100%",at.style.position="fixed"),ke.createEvent&&le.addEventListener(at,"click",function(Dt){Be.dispatchEvent&&(Dt=rn(Dt),Be.dispatchEvent(Dt))}),Be.parentNode.insertBefore(at,Be.nextSibling),Be._dlgInfo.mask=at,this.pendingDialogStack.push(Be),this._updateStacking(Ct))},removeDialog:function(Be){var Ct=le.isArray(this.pendingDialogStack)?le.indexOf(Be,this.pendingDialogStack):-1;-1!=Ct&&(this.pendingDialogStack.splice(Ct,1),(Ct=Be._dlgInfo.mask).parentNode&&Ct.parentNode.removeChild(Ct),Be._dlgInfo.mask=null,this._updateStacking())}};function Xe(Be,Ct){var at,Dt,kt,Rt=this,qe=Ct?"absolute":"fixed",Mt="50%",Ht="50%";Rt._dlgInfo&&Rt._dlgInfo.styleConfig&&(le.isString((at=Rt._dlgInfo.styleConfig).style)?Dt=at.style:(le.isString(at.position)&&(qe=at.position),(le.isString(at.left)||le.isNumber(at.left))&&(Ht=at.left),(le.isString(at.top)||le.isNumber(at.top))&&(Mt=at.top))),Rt.open?le.error("showDialog called on open dialog."):(Rt.open=He,Rt.removeAttribute("closed"),Rt.setAttribute("open","open"),Dt?Rt.setAttribute("style",Dt):((at=["display:block;position:",qe,";left:",Ht,";top:",Mt,";transform:translate(-50%, -50%)"]).push("DIALOG"==Rt.tagName?";margin:0;border-radius:6px;box-shadow:2px 2px 0 0 rgba(0,0,0,.05);-webkit-box-sizing:border-box;box-sizing:border-box;":";border:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;"),Rt.setAttribute("style",at.join(""))),Dt=Rt,Ue.getComputedStyle?kt=Ue.getComputedStyle(Dt):Dt.currentStyle&&(kt=Dt.currentStyle),(kt&&"absolute"!=kt.position||"auto"!=Dt.style.top&&""!=Dt.style.top||"auto"!=Dt.style.bottom&&""!=Dt.style.bottom?nt:!function Qt(Be){for(var Ct=0;Ct<ke.styleSheets.length;++Ct){var at=ke.styleSheets[Ct],Dt=[],kt=void 0,Rt=void 0,qe=void 0;try{Dt=at.cssRules,kt=ke.querySelectorAll}catch{}if(Dt&&kt)for(var Mt=0;Mt<Dt.length;++Mt){Rt=Dt[Mt],qe=nt;try{qe=kt(Rt.selectorText)}catch{}if(qe&&function(jt,ln){for(var Un=0;Un<jt.length;++Un)if(jt[Un]==ln)return He;return nt}(qe,Be)){var Ht=Rt.style.getPropertyValue("top"),Vt=Rt.style.getPropertyValue("bottom");if(Ht&&"auto"!=Ht||Vt&&"auto"!=Vt)return He}}}return nt}(Dt))&&(Ht=ke.body.scrollTop||ke.documentElement.scrollTop,(qe=Rt).style.top=(Ht+=((Mt=Ue.innerHeight||ke.documentElement.clientHeight)-qe.offsetHeight)/2)+"px",qe._dlgInfo.isTopOverridden=He),Be&&(Rt._dlgInfo.modal=He,Me.pushDialog(Rt,Ct)))}le.dialog={setup:function(Be,Ct){Be.show=Xe.bind(Be,nt,Ct),Be.showModal=Xe.bind(Be,He,Ct),Be.close=function(at){var Dt=this;return Dt.open||le.error("closeDialog called on closed dialog."),Dt.open=nt,Dt.removeAttribute("open"),Dt.setAttribute("closed","closed"),Dt.style.display="none",void 0!==at&&(Dt.returnValue=at),Dt._dlgInfo.isTopOverridden&&(Dt.style.top="auto"),Dt._dlgInfo.modal&&Me.removeDialog(Dt),Dt.returnValue}.bind(Be),Be._dlgInfo={}}},le.mask={dlgMask:!1,preOnresize:!1,preOnscroll:!1},le.showMask=function(Be){var Ct,at,Dt,kt,Rt,qe,Mt,Ht,Vt;le.mask.dlgMask||le.dlgLoadingShowStatus||(kt=!1,Be&&(Mt={},Be.style?Mt.style=Be.style:((le.isString(Be.top)||le.isNumber(Be.top))&&(Mt.top=Be.top),(le.isString(Be.left)||le.isNumber(Be.left))&&(Mt.left=Be.left),le.isString(Be.position)&&(Mt.position=Be.position)),Be.confined&&(kt=Be.confined),(le.isString(Be.width)||le.isNumber(Be.width))&&(Ct=Be.width),(le.isString(Be.height)||le.isNumber(Be.height))&&(at=Be.height),le.isString(Be.background)&&(Dt=Be.background),le.isString(Be.imageSource)&&(Vt=Be.imageSource),kt&&Be.wrapperEl&&le.isString(Rt=Be.wrapperEl)&&(Rt=document.getElementById(Rt))),Vt=Vt||((Ht=xe.DWT&&xe.DWT.CustomizableDisplayInfo?xe.DWT.CustomizableDisplayInfo:Ht)&&le.isString(Ht.loaderBarSource)&&""!=Ht.loaderBarSource?Ht.loaderBarSource:xe.navInfoSync.bIE?le.loaderBarSourceIE:le.loaderBarSource),Rt&&(qe=Rt.getBoundingClientRect(),Rt.style.position="relative"),(Be=document.createElement("div")).className="dynamsoft-dialog-wrap",Be.innerHTML=le.createShowMaskContent({width:Ct,height:at,backgroundColor:Dt,imageSource:Vt}),Rt?(Rt.appendChild(Be),Be.style.position="absolute",Be.style.top="50%",Be.style.left="50%",Be.style.transform="translate(-50%, -50%)"):document.body.appendChild(Be),kt&&qe&&(le.mask.preOnresize=!!window.onresize&&window.onresize,le.mask.preOnscroll=!!window.onscroll&&window.onscroll),le.mask.dlgMask=Be,le.dialog.setup(Be,kt),Mt&&(Be._dlgInfo.styleConfig=Mt),Rt&&(Be._dlgInfo.wrapperEl=Rt),Be.showModal())},le.hideMask=function(){var Be=le.mask.dlgMask;Be&&(Be.close(),Be._dlgInfo&&Be._dlgInfo.wrapperEl?(Be._dlgInfo.wrapperEl.removeChild(Be),Be._dlgInfo.wrapperEl=null):document.body.removeChild(Be),le.mask.dlgMask=!1),window.onresize=le.mask.preOnresize?le.mask.preOnresize:null,le.mask.preOnresize=!1,window.onscroll=le.mask.preOnscroll?le.mask.preOnscroll:null,le.mask.preOnscroll=!1}}(Cn),function(ue){var se,le,Ue,ke,He=window.document,nt=(zt=[]).push,zt=zt.slice,Qt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rn=function(){le()};try{nt.apply(zt.call(He.childNodes),He.childNodes)}catch{return}function Gt(ce,Me,Xe,Be){var Ct,at,Dt=Me&&Me.ownerDocument,kt=Me?Me.nodeType:9;if(Xe=Xe||[],"string"!=typeof ce||!ce||1!==kt&&9!==kt&&11!==kt)return Xe;if(!Be&&((Me?Me.ownerDocument||Me:He)!==Ue&&le(Me),Me=Me||Ue,11!==kt&&(at=Qt.exec(ce))))if(Be=at[1]){if(9===kt){if(!(Ct=Me.getElementById(Be)))return Xe;if(Ct.id===Be)return Xe.push(Ct),Xe}else if(Dt&&(Ct=Dt.getElementById(Be))&&ke(Me,Ct)&&Ct.id===Be)return Xe.push(Ct),Xe}else{if(at[2])return nt.apply(Xe,Me.getElementsByTagName(ce)),Xe;if((Be=at[3])&&Me.getElementsByClassName)return nt.apply(Xe,Me.getElementsByClassName(Be)),Xe}return Xe}le=Gt.setDocument=function(Me){return(Me=Me?Me.ownerDocument||Me:He)!==Ue&&9===Me.nodeType&&Me.documentElement&&(He!==(Ue=Me)&&(Me=Ue.defaultView)&&Me.top!==Me&&(Me.addEventListener?Me.addEventListener("unload",rn,!1):Me.attachEvent&&Me.attachEvent("onunload",rn)),ke=function(Be,Ct){if(Ct)for(;Ct=Ct.parentNode;)if(Ct===Be)return!0;return!1}),Ue},Gt.contains=function(ce,Me){return(ce.ownerDocument||ce)!==Ue&&le(ce),ke(ce,Me)},Gt.error=function(ce){throw new Error("Syntax error: "+ce)},se=Gt.getText=function(ce){var Me,Xe="",Be=0,Ct=ce.nodeType;if(Ct){if(1===Ct||9===Ct||11===Ct){if("string"==typeof ce.textContent)return ce.textContent;for(ce=ce.firstChild;ce;ce=ce.nextSibling)Xe+=se(ce)}else if(3===Ct||4===Ct)return ce.nodeValue}else for(;Me=ce[Be++];)Xe+=se(Me);return Xe},le(),ue.support={},ue.sizzle=Gt}(Cn.Lib),function Ve(xe){var ut,ue,se,le,Ue,ke,He,nt,zt,Qt,rn,Gt,ce,Me,Xe,Be,Ct,at,Dt,kt,Rt,qe,Mt,Ht,Vt,jt,ln,Un,br,En,vr,ei=xe.doc,fi=xe.each,pr=ei.documentElement,Fr=xe.support,ao=xe.sizzle,Li=ei.createElement("div"),Gn=ei.createElement("div");function wr(){var nn;pr.appendChild(Li),Gn.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",ut=se=ke=!1,ue=Ue=!0,window.getComputedStyle&&(nn=window.getComputedStyle(Gn),ut="1%"!==(nn||{}).top,ke="2px"===(nn||{}).marginLeft,se="4px"===(nn||{width:"4px"}).width,Gn.style.marginRight="50%",ue="4px"===(nn||{marginRight:"4px"}).marginRight,(nn=Gn.appendChild(document.createElement("div"))).style.cssText=Gn.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",nn.style.marginRight=nn.style.width="0",Gn.style.width="1px",Ue=!parseFloat((window.getComputedStyle(nn)||{}).marginRight),Gn&&Gn.removeChild(nn)),Gn.style.display="none",(le=0===Gn.getClientRects().length)&&(Gn.style.display="",Gn.innerHTML="<table><tr><td></td><td>t</td></tr></table>",Gn.childNodes[0].style.borderCollapse="separate",(nn=Gn.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(le=0===nn[0].offsetHeight)&&(nn[0].style.display="",nn[1].style.display="none",le=0===nn[0].offsetHeight)),pr&&pr.removeChild(Li)}function Or(nn){if(nn in ln)return nn;for(var on=nn.charAt(0).toUpperCase()+nn.slice(1),fn=Un.length;fn--;)if((nn=Un[fn]+on)in ln)return nn}function xr(nn,on,fn,mn,Sn){for(var jn=fn===(mn?"border":"content")?4:"width"===on?1:0,tr=0;jn<4;jn+=2)"margin"===fn&&(tr+=xe.css(nn,fn+Vt[jn],!0,Sn)),mn?("content"===fn&&(tr-=xe.css(nn,"padding"+Vt[jn],!0,Sn)),"margin"!==fn&&(tr-=xe.css(nn,"border"+Vt[jn]+"Width",!0,Sn))):(tr+=xe.css(nn,"padding"+Vt[jn],!0,Sn),"padding"!==fn&&(tr+=xe.css(nn,"border"+Vt[jn]+"Width",!0,Sn)));return tr}function Jr(nn,on,fn){var mn=!0,Sn="width"===on?nn.offsetWidth:nn.offsetHeight,jn=He(nn),tr=Fr.boxSizing&&"border-box"===xe.css(nn,"boxSizing",!1,jn);if(Sn<=0||null==Sn){if(((Sn=nt(nn,on,jn))<0||null==Sn)&&(Sn=nn.style[on]),Gt.test(Sn))return Sn;mn=tr&&(Fr.boxSizingReliable()||Sn===nn.style[on]),Sn=parseFloat(Sn)||0}return Sn+xr(nn,on,fn||(tr?"border":"content"),mn,jn)}function Mi(nn){return new RegExp("^(?:([+-])=|)("+rn+")([a-z%]*)$","i").exec(nn)}Gn.style&&(Gn.style.cssText="float:left;opacity:.5",Fr.opacity="0.5"===Gn.style.opacity,Fr.cssFloat=!!Gn.style.cssFloat,Gn.style.backgroundClip="content-box",Gn.cloneNode(!0).style.backgroundClip="",Fr.clearCloneStyle="content-box"===Gn.style.backgroundClip,(Li=document.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",Gn.innerHTML="",Li.appendChild(Gn),Fr.boxSizing=""===Gn.style.boxSizing||""===Gn.style.MozBoxSizing||""===Gn.style.WebkitBoxSizing,xe.mix(Fr,{reliableHiddenOffsets:function(){return null==ut&&wr(),le},boxSizingReliable:function(){return null==ut&&wr(),se},pixelMarginRight:function(){return null==ut&&wr(),ue},pixelPosition:function(){return null==ut&&wr(),ut},reliableMarginRight:function(){return null==ut&&wr(),Ue},reliableMarginLeft:function(){return null==ut&&wr(),ke}}),zt=/^margin/,Qt=/^(top|right|bottom|left)$/,rn=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Gt=new RegExp("^("+rn+")(?!px)[a-z%]+$","i"),ce=new RegExp("^("+rn+")(.*)$","i"),window.getComputedStyle?(He=function(fn){var mn=(fn=xe.isFunction(fn.getEL)?fn.getEL():fn).ownerDocument.defaultView;return(mn=mn&&mn.opener?mn:window).getComputedStyle(fn)},nt=function(on,fn,mn){var Sn,jn,tr=on.style;return""!==(jn=(mn=mn||He(on))?mn.getPropertyValue(fn)||mn[fn]:void 0)&&void 0!==jn||ao.contains(on.ownerDocument,on)||(jn=xe.style(on,fn)),mn&&!Fr.pixelMarginRight()&&Gt.test(jn)&&zt.test(fn)&&(on=tr.width,fn=tr.minWidth,Sn=tr.maxWidth,tr.minWidth=tr.maxWidth=tr.width=jn,jn=mn.width,tr.width=on,tr.minWidth=fn,tr.maxWidth=Sn),void 0===jn?jn:jn+""}):pr.currentStyle&&(He=function(on){return on.currentStyle},nt=function(on,fn,mn){var Sn,jn,tr,Sr=on.style;return null==(mn=(mn=mn||He(on))?mn[fn]:void 0)&&Sr&&Sr[fn]&&(mn=Sr[fn]),Gt.test(mn)&&!Qt.test(fn)&&(Sn=Sr.left,(tr=(jn=on.runtimeStyle)&&jn.left)&&(jn.left=on.currentStyle.left),Sr.left="fontSize"===fn?"1em":mn,mn=Sr.pixelLeft+"px",Sr.left=Sn,tr&&(jn.left=tr)),void 0===mn?mn:mn+""||"auto"}),Me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Xe=/<([\w:-]+)/,Be=/^\s+/,Ct=/<|&#?\w+;/,at=/<tbody/i,Dt=/^-ms-/,kt=/-([\da-z])/gi,Rt=/^(none|table(?!-c[ea]).+)/,qe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Mt={position:"absolute",visibility:"hidden",display:"block"},Ht={letterSpacing:"0",fontWeight:"400"},Vt=["Top","Right","Bottom","Left"],jt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:Fr.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Un=["Webkit","O","Moz","ms"],"abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video",(ei=document.createElement("div")).style&&(ln=ei.style,Fr.cssFloat=!!ei.style.cssFloat,br=function(on,fn){return fn.toUpperCase()},En={type:xe.type,cssHooks:{},htmlPrefilter:function(nn){return nn.replace(Me,"<$1></$2>")},nodeName:function(nn,on){return nn.nodeName&&nn.nodeName.toLowerCase()===on.toLowerCase()},merge:function(nn,on){for(var fn=+on.length,mn=0,Sn=nn.length;mn<fn;)nn[Sn++]=on[mn++];if(fn!=fn)for(;void 0!==on[mn];)nn[Sn++]=on[mn++];return nn.length=Sn,nn},camelCase:function(nn){return nn.replace(Dt,"ms-").replace(kt,br)},cssProps:{},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}},ei=["flo","at"].join(""),En.cssProps[ei]=Fr.cssFloat?"cssFloat":"styleFloat",vr=function(on,fn,mn,Sn){var jn={};return fi(fn,function(tr,Sr){jn[Sr]=on.style[Sr],on.style[Sr]=fn[Sr]}),Sn=mn.apply(on,Sn||[]),fi(fn,function(tr,Sr){on.style[Sr]=jn[Sr]}),Sn},fi(["height","width"],function(nn,on){En.cssHooks[nn]={get:function(fn,mn,Sn){if(mn)return Rt.test(xe.css(fn,"display"))&&0===fn.offsetWidth?vr(fn,Mt,function(){return Jr(fn,nn,Sn)}):Jr(fn,nn,Sn)},set:function(fn,mn,Sn){var jn=Sn&&He(fn);return Sn=Sn?xr(fn,nn,Sn,Fr.boxSizing&&"border-box"===xe.css(fn,"boxSizing",!1,jn),jn):0,(fn=ce.exec(mn))?Math.max(0,parseInt(fn[1])-(Sn||0))+(fn[2]||"px"):mn}}}),xe.style=function(nn,on,fn,mn){if(nn&&3!==nn.nodeType&&8!==nn.nodeType&&nn.style){var Sn,jn,tr,Sr=En.camelCase(on),so=nn.style;if(on=En.cssProps[Sr]||(En.cssProps[Sr]=Or(Sr)||Sr),tr=En.cssHooks[on]||En.cssHooks[Sr],void 0===fn)return tr&&"get"in tr&&void 0!==(Sn=tr.get(nn,!1,mn))?Sn:so[on]+"";"string"===(jn=we(fn))&&(Sn=Mi(fn))&&Sn[1]&&(fn=function(gi,yi,Mr,Bi){var To,mr=1,Wa=20,ie=function(){return xe.css(gi,yi,"")},me=ie(),oe=Mr&&Mr[3]||(En.cssNumber[yi]?"":"px"),ge=(En.cssNumber[yi]||"px"!==oe&&+me)&&Mi(xe.css(gi,yi));if(ge&&ge[3]!==oe)for(oe=oe||ge[3],Mr=Mr||[],ge=+me||1;ge/=mr=mr||".5",xe.style(gi,yi,ge+oe),mr!==(mr=ie()/me)&&1!==mr&&--Wa;);return Mr&&(ge=+ge||+me||0,To=Mr[1]?ge+(Mr[1]+1)*Mr[2]:+Mr[2]),To}(nn,on,Sn),jn="number"),null!=fn&&fn==fn&&("number"===jn&&(fn+=Sn&&Sn[3]||(En.cssNumber[Sr]?"":"px")),Fr.clearCloneStyle||""!==fn||0!==on.indexOf("background")||(so[on]="inherit"),tr&&"set"in tr&&void 0===(fn=tr.set(nn,fn,mn))||(so[on]=fn))}},xe.css=function(nn,on,fn,mn){var Sn,jn=En.camelCase(on);return on=En.cssProps[jn]||(En.cssProps[jn]=Or(jn)||jn),"normal"===(Sn=void 0===(Sn=(jn=En.cssHooks[on]||En.cssHooks[jn])&&"get"in jn?jn.get(nn,!0,fn):Sn)?nt(nn,on,mn):Sn)&&on in Ht&&(Sn=Ht[on]),""===fn||fn?(jn=parseFloat(Sn),!0===fn||isFinite(jn)?jn||0:Sn):Sn},xe.parseHTML=function(nn,on){if(!nn||"string"!=typeof nn)return[];on=(on="boolean"!=typeof on&&on)||document;var fn=qe.exec(nn);return fn?[on.createElement(fn[1])]:(fn=function Ei(nn,on){for(var fn,mn,Sn,jn,tr,Sr,so=nn.length,gi=function(Bi){var To="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video".split("|"),mr=Bi.createDocumentFragment();if(mr.createElement)for(;To.length;)mr.createElement(To.pop());return mr}(on),yi=[],Mr=0;Mr<so;Mr++)if((mn=nn[Mr])||0===mn)if("object"===xe.type(mn))En.merge(yi,mn.nodeType?[mn]:mn);else if(Ct.test(mn)){if(Sn=Sn||gi.appendChild(on.createElement("div"))){for(jn=(Xe.exec(mn)||["",""])[1].toLowerCase(),Sn.innerHTML=(Sr=jt[jn]||jt._default)[1]+En.htmlPrefilter(mn)+Sr[2],fn=Sr[0];fn--;)Sn=Sn.lastChild;if(!Fr.leadingWhitespace&&Be.test(mn)&&yi.push(on.createTextNode(Be.exec(mn)[0])),!Fr.tbody&&(fn=(mn="table"!==jn||at.test(mn)?"<table>"!==Sr[1]||at.test(mn)?0:Sn:Sn.firstChild)&&mn.childNodes.length,mn))for(;fn--;)En.nodeName(tr=mn.childNodes[fn],"tbody")&&!tr.childNodes.length&&mn.removeChild(tr);for(En.merge(yi,Sn.childNodes),Sn.textContent="";Sn.firstChild;)Sn.removeChild(Sn.firstChild);Sn=gi.lastChild}}else yi.push(on.createTextNode(mn));for(Sn&&gi&&gi.removeChild(Sn),Mr=0;mn=yi[Mr++];)"SCRIPT"!==mn.tagName&&(ao.contains(mn.ownerDocument,mn),gi.appendChild(mn));return Sn=null,gi}([nn],on),En.merge([],fn.childNodes))}))}(Cn.Lib)}function Je(xe){this.message=xe}function Ye(xe){var ut=this,ue=ut.constructor;for(ut.__attrs={},ut.__attrVals={},ut.userConfig=xe;ue;)ut.addAttrs(ue.ATTRS),ue=ue.superclass?ue.superclass.constructor:null;Ut.mix(ut.__attrs,xe)}var qt=Ln.Dynamsoft=Cn;return n.default},"object"==typeof exports&&"object"==typeof module?module.exports=Xd():("function"==typeof define&&define,"object"==typeof exports?exports.Dynamsoft=Xd():Zw.Dynamsoft=Xd()),function(e){var n=e.DWT||(e.DWT={});e.Lib||(e.Lib={}),n.initQueue=[],e.initOrder=e.initOrder||[],e.unloadQueue=e.unloadQueue||[],window.Dynamsoft||(window.Dynamsoft=e)}(Q),Q.DWT.IfUseActiveXForIE10Plus=!1,function(e){if("object"==typeof exports)module.exports=e();else{var n;"function"==typeof define&&define;try{n=window}catch{n=self}n.SparkMD5=e()}}(function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(m,T){var C=m[0],D=m[1],S=m[2],M=m[3];D=((D+=((S=((S+=((M=((M+=((C=((C+=(D&S|~D&M)+T[0]-680876936|0)<<7|C>>>25)+D|0)&D|~C&S)+T[1]-389564586|0)<<12|M>>>20)+C|0)&C|~M&D)+T[2]+606105819|0)<<17|S>>>15)+M|0)&M|~S&C)+T[3]-1044525330|0)<<22|D>>>10)+S|0,D=((D+=((S=((S+=((M=((M+=((C=((C+=(D&S|~D&M)+T[4]-176418897|0)<<7|C>>>25)+D|0)&D|~C&S)+T[5]+1200080426|0)<<12|M>>>20)+C|0)&C|~M&D)+T[6]-1473231341|0)<<17|S>>>15)+M|0)&M|~S&C)+T[7]-45705983|0)<<22|D>>>10)+S|0,D=((D+=((S=((S+=((M=((M+=((C=((C+=(D&S|~D&M)+T[8]+1770035416|0)<<7|C>>>25)+D|0)&D|~C&S)+T[9]-1958414417|0)<<12|M>>>20)+C|0)&C|~M&D)+T[10]-42063|0)<<17|S>>>15)+M|0)&M|~S&C)+T[11]-1990404162|0)<<22|D>>>10)+S|0,D=((D+=((S=((S+=((M=((M+=((C=((C+=(D&S|~D&M)+T[12]+1804603682|0)<<7|C>>>25)+D|0)&D|~C&S)+T[13]-40341101|0)<<12|M>>>20)+C|0)&C|~M&D)+T[14]-1502002290|0)<<17|S>>>15)+M|0)&M|~S&C)+T[15]+1236535329|0)<<22|D>>>10)+S|0,D=((D+=((S=((S+=((M=((M+=((C=((C+=(D&M|S&~M)+T[1]-165796510|0)<<5|C>>>27)+D|0)&S|D&~S)+T[6]-1069501632|0)<<9|M>>>23)+C|0)&D|C&~D)+T[11]+643717713|0)<<14|S>>>18)+M|0)&C|M&~C)+T[0]-373897302|0)<<20|D>>>12)+S|0,D=((D+=((S=((S+=((M=((M+=((C=((C+=(D&M|S&~M)+T[5]-701558691|0)<<5|C>>>27)+D|0)&S|D&~S)+T[10]+38016083|0)<<9|M>>>23)+C|0)&D|C&~D)+T[15]-660478335|0)<<14|S>>>18)+M|0)&C|M&~C)+T[4]-405537848|0)<<20|D>>>12)+S|0,D=((D+=((S=((S+=((M=((M+=((C=((C+=(D&M|S&~M)+T[9]+568446438|0)<<5|C>>>27)+D|0)&S|D&~S)+T[14]-1019803690|0)<<9|M>>>23)+C|0)&D|C&~D)+T[3]-187363961|0)<<14|S>>>18)+M|0)&C|M&~C)+T[8]+1163531501|0)<<20|D>>>12)+S|0,D=((D+=((S=((S+=((M=((M+=((C=((C+=(D&M|S&~M)+T[13]-1444681467|0)<<5|C>>>27)+D|0)&S|D&~S)+T[2]-51403784|0)<<9|M>>>23)+C|0)&D|C&~D)+T[7]+1735328473|0)<<14|S>>>18)+M|0)&C|M&~C)+T[12]-1926607734|0)<<20|D>>>12)+S|0,D=((D+=((S=((S+=((M=((M+=((C=((C+=(D^S^M)+T[5]-378558|0)<<4|C>>>28)+D|0)^D^S)+T[8]-2022574463|0)<<11|M>>>21)+C|0)^C^D)+T[11]+1839030562|0)<<16|S>>>16)+M|0)^M^C)+T[14]-35309556|0)<<23|D>>>9)+S|0,D=((D+=((S=((S+=((M=((M+=((C=((C+=(D^S^M)+T[1]-1530992060|0)<<4|C>>>28)+D|0)^D^S)+T[4]+1272893353|0)<<11|M>>>21)+C|0)^C^D)+T[7]-155497632|0)<<16|S>>>16)+M|0)^M^C)+T[10]-1094730640|0)<<23|D>>>9)+S|0,D=((D+=((S=((S+=((M=((M+=((C=((C+=(D^S^M)+T[13]+681279174|0)<<4|C>>>28)+D|0)^D^S)+T[0]-358537222|0)<<11|M>>>21)+C|0)^C^D)+T[3]-722521979|0)<<16|S>>>16)+M|0)^M^C)+T[6]+76029189|0)<<23|D>>>9)+S|0,D=((D+=((S=((S+=((M=((M+=((C=((C+=(D^S^M)+T[9]-640364487|0)<<4|C>>>28)+D|0)^D^S)+T[12]-421815835|0)<<11|M>>>21)+C|0)^C^D)+T[15]+530742520|0)<<16|S>>>16)+M|0)^M^C)+T[2]-995338651|0)<<23|D>>>9)+S|0,D=((D+=((M=((M+=(D^((C=((C+=(S^(D|~M))+T[0]-198630844|0)<<6|C>>>26)+D|0)|~S))+T[7]+1126891415|0)<<10|M>>>22)+C|0)^((S=((S+=(C^(M|~D))+T[14]-1416354905|0)<<15|S>>>17)+M|0)|~C))+T[5]-57434055|0)<<21|D>>>11)+S|0,D=((D+=((M=((M+=(D^((C=((C+=(S^(D|~M))+T[12]+1700485571|0)<<6|C>>>26)+D|0)|~S))+T[3]-1894986606|0)<<10|M>>>22)+C|0)^((S=((S+=(C^(M|~D))+T[10]-1051523|0)<<15|S>>>17)+M|0)|~C))+T[1]-2054922799|0)<<21|D>>>11)+S|0,D=((D+=((M=((M+=(D^((C=((C+=(S^(D|~M))+T[8]+1873313359|0)<<6|C>>>26)+D|0)|~S))+T[15]-30611744|0)<<10|M>>>22)+C|0)^((S=((S+=(C^(M|~D))+T[6]-1560198380|0)<<15|S>>>17)+M|0)|~C))+T[13]+1309151649|0)<<21|D>>>11)+S|0,D=((D+=((M=((M+=(D^((C=((C+=(S^(D|~M))+T[4]-145523070|0)<<6|C>>>26)+D|0)|~S))+T[11]-1120210379|0)<<10|M>>>22)+C|0)^((S=((S+=(C^(M|~D))+T[2]+718787259|0)<<15|S>>>17)+M|0)|~C))+T[9]-343485551|0)<<21|D>>>11)+S|0,m[0]=C+m[0]|0,m[1]=D+m[1]|0,m[2]=S+m[2]|0,m[3]=M+m[3]|0}function o(m){var C,T=[];for(C=0;C<64;C+=4)T[C>>2]=m.charCodeAt(C)+(m.charCodeAt(C+1)<<8)+(m.charCodeAt(C+2)<<16)+(m.charCodeAt(C+3)<<24);return T}function u(m){var C,T=[];for(C=0;C<64;C+=4)T[C>>2]=m[C]+(m[C+1]<<8)+(m[C+2]<<16)+(m[C+3]<<24);return T}function s(m){var D,S,M,G,L,W,T=m.length,C=[1732584193,-271733879,-1732584194,271733878];for(D=64;D<=T;D+=64)a(C,o(m.substring(D-64,D)));for(S=(m=m.substring(D-64)).length,M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D=0;D<S;D+=1)M[D>>2]|=m.charCodeAt(D)<<(D%4<<3);if(M[D>>2]|=128<<(D%4<<3),D>55)for(a(C,M),D=0;D<16;D+=1)M[D]=0;return G=(G=8*T).toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(G[2],16),W=parseInt(G[1],16)||0,M[14]=L,M[15]=W,a(C,M),C}function v(m){var C,T="";for(C=0;C<4;C+=1)T+=t[m>>8*C+4&15]+t[m>>8*C&15];return T}function l(m){var T;for(T=0;T<m.length;T+=1)m[T]=v(m[T]);return m.join("")}function I(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function y(m){var D,T=[],C=m.length;for(D=0;D<C-1;D+=2)T.push(parseInt(m.substr(D,2),16));return String.fromCharCode.apply(String,T)}function p(){this.reset()}return l(s("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function m(T,C){return(T=0|T||0)<0?Math.max(T+C,0):Math.min(T,C)}ArrayBuffer.prototype.slice=function(T,C){var G,L,W,F,D=this.byteLength,S=m(T,D),M=D;return C!==e&&(M=m(C,D)),S>M?new ArrayBuffer(0):(G=M-S,L=new ArrayBuffer(G),W=new Uint8Array(L),F=new Uint8Array(this,S,G),W.set(F),L)}}(),p.prototype.append=function(m){return this.appendBinary(I(m)),this},p.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var C,T=this._buff.length;for(C=64;C<=T;C+=64)a(this._hash,o(this._buff.substring(C-64,C)));return this._buff=this._buff.substring(C-64),this},p.prototype.end=function(m){var D,M,T=this._buff,C=T.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(D=0;D<C;D+=1)S[D>>2]|=T.charCodeAt(D)<<(D%4<<3);return this._finish(S,C),M=l(this._hash),m&&(M=y(M)),this.reset(),M},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},p.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(m,T){var D,S,M,C=T;if(m[C>>2]|=128<<(C%4<<3),C>55)for(a(this._hash,m),C=0;C<16;C+=1)m[C]=0;D=(D=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),S=parseInt(D[2],16),M=parseInt(D[1],16)||0,m[14]=S,m[15]=M,a(this._hash,m)},p.hash=function(m,T){return p.hashBinary(I(m),T)},p.hashBinary=function(m,T){var D=l(s(m));return T?y(D):D},(p.ArrayBuffer=function(){this.reset()}).prototype.append=function(m){var D,T=function h(m,T,C){var D=new Uint8Array(m.byteLength+T.byteLength);return D.set(new Uint8Array(m)),D.set(new Uint8Array(T),m.byteLength),C?D:D.buffer}(this._buff.buffer,m,!0),C=T.length;for(this._length+=m.byteLength,D=64;D<=C;D+=64)a(this._hash,u(T.subarray(D-64,D)));return this._buff=D-64<C?new Uint8Array(T.buffer.slice(D-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(m){var S,M,T=this._buff,C=T.length,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(S=0;S<C;S+=1)D[S>>2]|=T[S]<<(S%4<<3);return this._finish(D,C),M=l(this._hash),m&&(M=y(M)),this.reset(),M},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var m=p.prototype.getState.call(this);return m.buff=function _(m){return String.fromCharCode.apply(null,new Uint8Array(m))}(m.buff),m},p.ArrayBuffer.prototype.setState=function(m){return m.buff=function c(m,T){var M,C=m.length,D=new ArrayBuffer(C),S=new Uint8Array(D);for(M=0;M<C;M+=1)S[M]=m.charCodeAt(M);return T?S:D}(m.buff,!0),p.prototype.setState.call(this,m)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(m,T){var C=function f(m){var D,S,M,G,L,W,T=m.length,C=[1732584193,-271733879,-1732584194,271733878];for(D=64;D<=T;D+=64)a(C,u(m.subarray(D-64,D)));for(S=(m=D-64<T?m.subarray(D-64):new Uint8Array(0)).length,M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D=0;D<S;D+=1)M[D>>2]|=m[D]<<(D%4<<3);if(M[D>>2]|=128<<(D%4<<3),D>55)for(a(C,M),D=0;D<16;D+=1)M[D]=0;return G=(G=8*T).toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(G[2],16),W=parseInt(G[1],16)||0,M[14]=L,M[15]=W,a(C,M),C}(new Uint8Array(m)),D=l(C);return T?y(D):D},p});var xN={7682:function(e,n,t){e.exports=t(2626)},1445:function(e,n,t){e.exports=t(4122)},8066:function(e,n,t){e.exports=t(1086)},3701:function(e,n,t){e.exports=t(7895)},699:function(e,n,t){e.exports=t(4442)},5683:function(e,n,t){e.exports=t(9447)},677:function(e,n,t){e.exports=t(5376)},1006:function(e,n,t){e.exports=t(6769)},5238:function(e,n,t){e.exports=t(1493)},3662:function(e,n,t){e.exports=t(1777)},1614:function(e,n,t){e.exports=t(5319)},9104:function(e,n,t){e.exports=t(5425)},2825:function(e,n,t){e.exports=t(2740)},189:function(e,n,t){e.exports=t(6094)},4341:function(e,n,t){e.exports=t(3685)},4889:function(e,n,t){e.exports=t(4303)},9356:function(e,n,t){e.exports=t(3799)},9542:function(e,n,t){e.exports=t(5122)},5005:function(e,n,t){e.exports=t(1645)},7711:function(e,n,t){e.exports=t(3103)},9798:function(e,n,t){e.exports=t(9531)},3535:function(e,n,t){e.exports=t(856)},6019:function(e,n,t){e.exports=t(1490)},4579:function(e,n,t){e.exports=t(4803)},1446:function(e,n,t){e.exports=t(6600)},3882:function(e,n,t){e.exports=t(9759)},9927:function(e,n,t){e.exports=t(7740)},6944:function(e,n,t){e.exports=t(8714)},373:function(e,n,t){e.exports=t(2790)},3887:function(e,r,t){t.d(r,{Ho:function(){return o}}),r=t(5238);var a=t.n(r);function o(u){var s=Q.DWT.EnumDWT_ImageType,f=u;return(u instanceof ArrayBuffer||u instanceof Array)&&(f=new Uint8Array(a()(u).call(u,0,12))),37==(u=f)[0]&&80==u[1]&&68==u[2]&&70==u[3]?s.IT_PDF:73==(u=f)[0]&&73==u[1]&&42==u[2]&&0==u[3]||77==u[0]&&77==u[1]&&0==u[2]&&42==u[3]?s.IT_TIF:137==(u=f)[0]&&80==u[1]&&78==u[2]&&71==u[3]?s.IT_PNG:255==(u=f)[0]&&216==u[1]?s.IT_JPG:66==(u=f)[0]&&77==u[1]?s.IT_BMP:0==(u=f)[0]&&0==u[1]&&0==u[2]&&12==u[3]&&106==u[4]&&80==u[5]&&32==u[6]&&32==u[7]||255==u[0]&&79==u[1]&&255==u[2]&&81==u[3]?s.IT_J2K:s.IT_PNG}},9158:function(e,n,t){function r(a){return a}t.d(n,{T:function(){return r}})},668:function(e,n,t){t.d(n,{KX:function(){return p},ME:function(){return rt},zW:function(){return h}});var h=3006,p=5001;function rt(tt){switch(tt){case 0:return"3011";case 1:return"3012";case 2:return"3014";case 3:return"3013";case 4:return"3015";case 14:return"3016";case 3001:return"3001";case 3002:return"3002";case 3003:return"3003";case 3004:return"3004";case 3005:return"3005";case h:return"3006";case 3007:return"3007";case p:return"5001";case 4001:return"4001";case 4002:return"4002";case 4003:return"4003"}return""}},6870:function(){Q.Lib.domReady(function(){var e=document.createElement("style"),n=["dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-backdrop{position:fixed;background:rgba(128,128,128,0.1);top:0;bottom:0;left:0;right:0;z-index:-99999999;}.dynamsoft-dwt-dialogProgress{width:330px;background:#FFF}.dynamsoft-finalMessage{margin:0;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-desc{margin:7px 0;color:#3a3a3a;font:14px Arial,sans-serif}.dynamsoft-status{color:#555;font:14px/22px Arial,sans-serif;margin-bottom:5px}.dynamsoft-progressBar{-webkit-appearance:none;width:280px;margin-bottom:20px;height:14px}.dynamsoft-progressBar,.dynamsoft-progressBar::-webkit-progress-bar{background-color:#e7e7e7;border-radius:7px}.dynamsoft-progressBar::-webkit-progress-value,.dynamsoft-progressBar::-moz-progress-bar{background-color:#50a8e1;border-radius:7px}.dynamsoft-loadingMsg{width:290px;height:290px;margin:auto;color:#CCC;border-width:1px;background:#FFF}.dynamsoft-loadingMsg-msg{margin:0 0 15px 25px;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-loadingMsg-desc{text-align:center;margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.ds-dwt-loaderBar-noserver-parent{height:100%;}.ds-dwt-loaderBar-noserver{margin: 0 auto;padding-top: 50px;text-align: center;}.ds-dwt-loaderBar-noserver img{height: 100px}"].join("");e.type="text/css";try{e.appendChild(document.createTextNode(n))}catch{e.styleSheet.cssText=n}document.body.appendChild(e)})},9032:function(){var e=Q.Lib;e.detect.showMask=function(n){e.detect.bMaskShow=!0,Q.DWT.ScanDirectly||(e.isFunction(Q.OnWebTwainPreExecuteCallback)?Q.OnWebTwainPreExecuteCallback():e.detect.OnWebTwainPreExecute(Q.DWT.IfConfineMaskWithinTheViewer,n))},e.detect.OnWebTwainPreExecute=function(n,t){var r;if(n&&(t?r=t._containerElement:0<Q.DWT.Containers.length&&Q.DWT.Containers[0].ContainerId&&(r=Q.Lib.get(Q.DWT.Containers[0].ContainerId)),r)){var a=r.getBoundingClientRect(),o=r.firstChild;if(o){for(;o;){if(e.isFunction(o.getBoundingClientRect)){a=o.getBoundingClientRect();break}o=o.nextSibling}r=o}}(null==a||1<Q.DWT.Containers.length||1==Q.DWT.Containers.length&&(0==a.width||0==a.height))&&(n=!1,r=null),e.showMask(t=n?{confined:n,wrapperEl:r}:{})},e.detect.hideMask=function(){e.detect.bMaskShow=!1,Q.DWT.ScanDirectly||(e.isFunction(Q.OnWebTwainPostExecuteCallback)?Q.OnWebTwainPostExecuteCallback():e.detect.OnWebTwainPostExecute())},e.detect.OnWebTwainPostExecute=e.hideMask},4393:function(){var e=Q.Lib;e.install={_divDWTNonInstallContainerID:"dwt-NonInstallContainerID",_divDWTemessageContainer:"",_dlgInstall:!1},e.install._strNonInstallDIV=['<div style="text-align:center;" id="',e.install._divDWTNonInstallContainerID,'"></div>'].join("")},5775:function(e,le,Ye){Ye.r(le),le=Ye(3662);var r=Ye.n(le),a=Ye(1695),o=(le=Ye(3535),Ye.n(le)),u=Ye(8420),s=Ye(7344);function f(ce){if(void 0===ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}var v=Ye(189),l=Ye(4341),I=Ye(9542),c=Ye(1445);function _(ce,Me){var Xe;return(_=I?c(Xe=I).call(Xe):function(Ct,at){return Ct.__proto__=at,Ct})(ce,Me)}function h(ce,Me){if("function"!=typeof Me&&null!==Me)throw new TypeError("Super expression must either be null or a function");ce.prototype=v(Me&&Me.prototype,{constructor:{value:ce,writable:!0,configurable:!0}}),l(ce,"prototype",{writable:!1}),Me&&_(ce,Me)}var y=Ye(9623);function p(ce,Me){if(Me&&("object"===(0,y.Z)(Me)||"function"==typeof Me))return Me;if(void 0!==Me)throw new TypeError("Derived constructors may only return object or undefined");return f(ce)}var m=Ye(4889);function T(ce){var Me;return(T=I?c(Me=m).call(Me):function(Be){return Be.__proto__||m(Be)})(ce)}function C(ce,Me,Xe){if(Me.has(ce))return Me.get(ce);throw new TypeError("attempted to "+Xe+" private field on non-instance")}function D(ce,Xe){return(Xe=C(ce,Xe,"get")).get?Xe.get.call(ce):Xe.value}le=Ye(4845);var Ke=Ye(6944),Je=(Ke=Ye.n(Ke),Ye(373));Je=Ye.n(Je);var zt=Ye(5238),M=Ye.n(zt),L=new(Ke()),W=function(){function ce(){(0,u.Z)(this,ce),function G(ce,Me,Xe){if(Me.has(ce))throw new TypeError("Cannot initialize the same private elements twice on an object");Me.set(ce,Xe)}(this,L,{writable:!0,value:{}})}return(0,s.Z)(ce,[{key:"fire",value:function(Me){var Xe,Be=this;Me=Me.toLowerCase(),Xe=M()(Array.prototype).call(arguments,1),a.D.each(D(Be,L)[Me]||[],function(Dt){var at=Dt.f;Dt=Dt.c||Be;try{at.apply(Dt,Xe)}catch(kt){a.D.log(kt)}})}},{key:"on",value:function(Me,Xe,Be){Me=Me.toLowerCase(),D(this,L)[Me]=D(this,L)[Me]||[],D(this,L)[Me].push({f:Xe,c:Be})}},{key:"off",value:function(Me,Xe,Be){if(Me&&Xe){Me=Me.toLowerCase();for(var Ct=D(this,L)[Me]||[],at=Ct.length-1;0<=at;at--)Ct[at]===Xe&&r()(Ct).call(Ct,at,1)}else!function S(ce,Me,Xe){if((Me=C(ce,Me,"set")).set)Me.set.call(ce,Xe);else{if(!Me.writable)throw new TypeError("attempted to set read only private field");Me.value=Xe}}(this,L,{})}}]),ce}(),F=(zt=Ye(7711),Ye.n(zt));function H(ce,Me){Z(ce,Me),Me.add(ce)}function Z(ce,Me){if(Me.has(ce))throw new TypeError("Cannot initialize the same private elements twice on an object")}function X(ce,Me,Xe){if(Me.has(ce))return Xe;throw new TypeError("attempted to get private field on non-instance")}var $="[bio]: ",V=(zt=a.D.win)&&zt.FormData,De=new(Ke()),fe=new(Je()),je=new(Je()),Se=new(Je()),rt=new(Je()),tt=new(Je()),de=new(Je()),_t=new(Je()),be=new(Je()),it=new(Je()),mt=new(Je()),Ce=function(){h(Me,W);var ce=function U(ce){var Me=function(){if(typeof Reflect>"u"||!o()||o().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o()(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Xe,Be=T(ce);return p(this,Me?(Xe=T(this).constructor,o()(Be,arguments,Xe)):Be.apply(this,arguments))}}(Me);function Me(Xe){var Be,Ct,at,Dt;return(0,u.Z)(this,Me),H(f(Be=ce.call(this)),mt),H(f(Be),it),H(f(Be),be),H(f(Be),_t),H(f(Be),de),H(f(Be),tt),H(f(Be),rt),H(f(Be),Se),H(f(Be),je),H(f(Be),fe),Dt={writable:!0,value:{}},Z(Ct=f(Be),at=De),at.set(Ct,Dt),a.D.mix(D(f(Be),De),{action:"",data:{},bChunkedSendData:!0,blockSize:0,ajaxConfig:{value:{},type:"post",processData:!1,cache:!1,dataType:"text",async:!0,contentType:!1,retry:0,headers:{"X-Requested-With":!1}},ajax:"",formData:"",CORS:!1,bOnlyEmptyIsOK:!0}),a.D.mix(D(f(Be),De),Xe),X(f(Be),fe,we).call(f(Be)),Be}return(0,s.Z)(Me,[{key:"get",value:function(Xe){return Xe in D(this,De)?D(this,De)[Xe]:""}},{key:"set",value:function(Xe,Be){Xe in D(this,De)&&(D(this,De)[Xe]=Be)}},{key:"uploadToServer",value:function(Xe){var Be;return(0<(Be=this).get("blockSize")&&Xe&&0<Xe.size?X(Be,rt,At):X(Be,je,Ve)).call(Be,Xe)}},{key:"uploadFilesToServer",value:function(Xe){return X(this,Se,bt).call(this,Xe)}},{key:"abort",value:function(){var Xe=this.get("ajax");return a.D.isObject(Xe)?(Xe.abort(),this.set("ajax",!1)):a.D.log($+"abort(), the value of io invalid!"),this}},{key:"setRequestHeader",value:function(Xe,Be){var Ct=this.get("ajaxConfig");return Ct.headers[Xe]=Be,this.set("ajaxConfig",Ct),Be}}]),Me}();function we(){this.get("CORS");var ce=this.get("ajaxConfig");return a.D.mix(ce,{xhrFields:{withCredentials:!1}}),ce}function Ve(ce){var Me=this,Xe=Me.get("ajaxConfig"),Be=!0,Dt=(X(Me,tt,St).call(Me),ce&&0<ce.size&&(X(Me,de,Pe).call(Me,ce),Me.name=a.D.isString(ce.name)&&""!=ce.name?ce.name:ce.fileName),a.D.mix(Xe,{data:Me.get("formData"),url:Me.get("action"),beforeSend:function(kt,Rt,qe){kt.upload.addEventListener("progress",function(Mt){Me.fire(Ce.event.PROGRESS,{loaded:Mt.loaded,total:Mt.total,name:Me.name})},!1)}}),a.D.mix(Xe,{method:"POST",onSuccess:function(Rt){var qe="";Rt&&(a.D.isArray(Rt)&&1<Rt.length?qe=Rt[0]:a.D.isString(Rt)&&(qe=Rt)),qe=X(Me,mt,Re).call(Me,qe),Me.fire(Ce.event.SUCCESS,qe)},onError:function(Rt,qe,Mt){var Ht;Be=!1,Rt=Rt&&a.D.isArray(Rt)&&2<Rt.length?(Ht=Rt[1],Rt[2]):(Ht=qe,Mt),X(Me,_t,ae).call(Me,Rt,Ht,ce)}}),a.D.ajax(Xe));return Me.set("formData",null),Xe.async?(Me.set("ajax",Dt),!0):(Me.set("ajax",!1),Be)}function bt(ce){var Me=this,Xe=Me.get("ajaxConfig"),Be=!0,Ct=[],kt=(X(Me,tt,St).call(Me),a.D.each(ce,function(Rt){Rt&&0<Rt.size?(X(Me,de,Pe).call(Me,Rt),a.D.isString(Rt.name)&&""!=Rt.name?Ct.push(Rt.name):Ct.push(Rt.fileName)):Ct.push("")}),a.D.mix(Xe,{data:Me.get("formData"),url:Me.get("action"),beforeSend:function(Rt,qe,Mt){Rt.upload.addEventListener("progress",function(Ht){Me.fire(Ce.event.PROGRESS,{loaded:Ht.loaded,total:Ht.total,name:""})},!1)}}),a.D.mix(Xe,{method:"POST",onSuccess:function(qe){var Mt="";Ct=[],qe&&(a.D.isArray(qe)&&1<qe.length?Mt=qe[0]:a.D.isString(qe)&&(Mt=qe)),Mt=X(Me,mt,Re).call(Me,Mt),Me.fire(Ce.event.SUCCESS,Mt)},onError:function(qe,Mt,Ht){var Vt;Be=!1,Ct=[],qe=qe&&a.D.isArray(qe)&&2<qe.length?(Vt=qe[1],qe[2]):(Vt=Mt,Ht),X(Me,_t,ae).call(Me,qe,Vt,ce)}}),Me.name="",a.D.ajax(Xe));return Me.set("formData",null),Xe.async?(Me.set("ajax",kt),!0):(Me.set("ajax",!1),Be)}function At(ce){var Me=this,Xe=Me.get("ajaxConfig"),Ct=function(ln,Ht,Vt){var jt;ln=ln&&a.D.isArray(ln)&&2<ln.length?(jt=ln[1],ln[2]):(jt=Ht,Vt),X(Me,_t,ae).call(Me,ln,jt,ce)},at=(a.D.mix(Xe,{url:Me.get("action")}),ce.size),Dt=0,kt=Me.get("blockSize")||at,Rt=M()(ce)||ce.webkitSlice||ce.mozSlice;!function qe(Mt){var Ht=Rt.call(ce,Dt,Dt+kt,ce.type),Vt=Ht.size,jt=ce.name;X(Me,it,Ne).call(Me,Dt,Vt,at),X(Me,tt,St).call(Me),Mt&&Me.set("data",[]),a.D.isString(jt)&&""!=jt||(jt=ce.fileName),Ht.name=jt,Me.name=jt,X(Me,de,Pe).call(Me,Ht),a.D.mix(Xe,{data:Me.get("formData")}),a.D.mix(Xe,{method:"POST",onSuccess:function(ln,Un,On){Dt=X(Me,be,Ze).call(Me,On)||Dt+Vt,Me.fire(Ce.event.PROGRESS,{loaded:Dt,total:at,name:Me.name}),Dt<at?qe(!1):function(Mt){var Ht="";Mt&&(a.D.isArray(Mt)&&1<Mt.length?Ht=Mt[0]:a.D.isString(Mt)&&(Ht=Mt)),Ht=X(Me,mt,Re).call(Me,Ht),Me.fire(Ce.event.SUCCESS,Ht)}(ln)},onError:Ct}),a.D.ajax(Xe),Me.set("formData",null)}(!0)}function St(){var ce,Me=this.get("data");if(V)if(Me instanceof V)this.set("formData",Me);else{ce=new V;try{a.D.each(Me,function(Xe,Be){ce.append(Be,Xe)}),this.set("formData",ce)}catch{a.D.log($+"something error when reset FormData.")}}else a.D.log($+"the browser does not support ajax.")}function Pe(ce){if(!a.D.isObject(ce))return a.D.log($+"_addFileData(), file parameter invalid!"),!1;var Me=this.get("formData"),Be=(Be=ce.remoteFilename)||"RemoteFile";return Me.append(Be,ce,ce.name),this.set("formData",Me),Me}function ae(ce,Ct,Xe){var Be=Ce.status.ERROR;Ct={status:Be,msg:Ct,response:!1,name:this.name},ce&&(Ct.httpStatus=ce.status,Ct.response=ce.responseText),this.fire(Be,Ct)}function Ze(ce){return(ce=(ce=(ce=ce.getResponseHeader("Range"))&&ce.split("-"))&&1<ce.length&&F()(ce[1],10))&&ce+1}function Ne(ce,Me,Xe){return ce="bytes "+ce+"-"+(ce+Me-1)+"/"+Xe,this.get("ajaxConfig").headers["Content-Range"]=ce}function Re(ce){var Me,Xe,Be,Ct,at=!1,Dt=this.name,kt=Ce.status.SUCCESS,Rt=Ce.event.ERROR;if(a.D.log("Response from server: "+ce),!this.get("bOnlyEmptyIsOK"))return{status:kt,msg:!1,json:!1,response:ce,name:Dt};if(a.D.isUndefined(ce)||""===ce)Ct={status:kt,msg:!1,json:!1,response:"",name:Dt};else if(a.D.isString(ce)){try{for(Me=0;Me<ce.length&&!(10<Me);Me++){if("{"==(Xe=ce[Me])){at=!0;break}if(" "!=Xe&&"\r"!=Xe&&"\n"!=Xe&&"\t"!=Xe)break}at&&(Ct=1==(Be=a.D.parse(ce)).status?{status:kt,msg:!1,json:Be,response:ce,name:Dt}:{status:Rt,msg:!1,json:Be,response:ce,name:Dt})}catch(qe){at=!1,a.D.log(qe)}at||(Ct=""==String(ce).replace(/( |\t|\r|\n)/g,"")?{status:kt,msg:!1,json:!1,response:ce,name:Dt}:{status:Rt,msg:!1,json:!1,response:ce,name:Dt})}else Ct={status:kt,msg:!1,json:!1,response:"",name:Dt};return Ct}function Qe(ce,Me){ot(ce,Me),Me.add(ce)}function ot(ce,Me){if(Me.has(ce))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Lt(ce,Me,Xe){if(Me.has(ce))return Xe;throw new TypeError("attempted to get private field on non-instance")}(0,le.Z)(Ce,"event",{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}),(0,le.Z)(Ce,"status",{SUCCESS:"success",ERROR:"error"});var Ot=new(Ke()),Bt=new(Je()),Ft=new(Je()),It=new(Je()),Kt=new(Je()),tn=function(){h(Me,W);var ce=function ze(ce){var Me=function(){if(typeof Reflect>"u"||!o()||o().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o()(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Xe,Be=T(ce);return p(this,Me?(Xe=T(this).constructor,o()(Be,arguments,Xe)):Be.apply(this,arguments))}}(Me);function Me(Xe){var Be,Ct,at,Dt;return(0,u.Z)(this,Me),Qe(f(Be=ce.call(this)),Kt),Qe(f(Be),It),Qe(f(Be),Ft),Qe(f(Be),Bt),Dt={writable:!0,value:{}},ot(Ct=f(Be),at=Ot),at.set(Ct,Dt),a.D.mix(D(f(Be),Ot),{action:"",retry:0,timeout:0,CORS:!1,async:!0,dataType:"text",fileStatus:"",uploadType:!1,data:{},bOnlyEmptyIsOK:!0}),a.D.mix(D(f(Be),Ot),Xe),Lt(f(Be),Ft,Ee).call(f(Be)),Be}return(0,s.Z)(Me,[{key:"get",value:function(Xe){return Xe in D(this,Ot)?D(this,Ot)[Xe]:""}},{key:"set",value:function(Xe,Be){Xe in D(this,Ot)&&(D(this,Ot)[Xe]=Be)}},{key:"upload",value:function(Xe){var Be,Ct=this.get("uploadType");if(Xe){if(a.D.isArray(Xe))return Ct.uploadFilesToServer(Xe);if(a.D.isObject(Xe))return(Be=Xe).size?(Be.id||(Be.id=a.D.guid("file-")),Be.size&&(Be.textSize=Lt(this,Bt,en).call(this,Be.size))):Be.size=0,Ct.uploadToServer(Be)}return Ct.uploadToServer(Xe)}},{key:"abort",value:function(){return this.get("uploadType").abort(),!0}},{key:"setRequestHeader",value:function(Xe,Be){this.get("uploadType").setRequestHeader(Xe,Be)}}]),Me}();function en(ce){for(var Me=-1;Me++,99<(ce/=1024)&&Me<4;);return Math.max(ce,.1).toFixed(1)+["KB","MB","GB","TB"][Me]}function Ee(){var ce=this,Me={action:ce.get("action"),data:ce.get("data"),CORS:ce.get("CORS"),bOnlyEmptyIsOK:ce.get("bOnlyEmptyIsOK")},Xe=(Me=new Ce(Me)).get("ajaxConfig");return Xe&&(Xe.dataType=ce.get("dataType"),Xe.async=ce.get("async"),Xe.retry=ce.get("retry")),Me.on(Ce.event.SUCCESS,Lt(ce,Kt,Ae),ce),Me.on(Ce.event.ERROR,Lt(ce,Kt,Ae),ce),Me.on(Ce.event.PROGRESS,Lt(ce,It,_e),ce),ce.set("uploadType",Me),Me}function _e(ce){this.fire(tn.event.PROGRESS,ce)}function Ae(ce){var Me=ce.status,Xe=ce.msg,Be=this.get("file");a.D.mix(ce,{file:Be}),"success"===Me?this.fire(tn.event.SUCCESS,ce):(!1!==Xe&&("abort"===Xe?a.D.mix(ce,{canceled:!0}):"timeout"===Xe&&a.D.mix(ce,{timeout:!0})),this.fire(tn.event.ERROR,ce))}(0,le.Z)(tn,"event",{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}),zt=Ye(4579);var We=Ye.n(zt),pe=(a.I.DWT.__innerCheckCertDate=function(ce){var Me,Xe=Date.parse(ce+"T00:00:00");""==ce||isNaN(Xe)||a.I.DWT.CheckCertExpired&&(Me=(new Date).getTime(),Xe-864e5*a.I.DWT.CertificateConfig.UpdateDaysBeforeExpired<=Me&&(a.D.isFunction(a.I.OnCertExpired)&&a.I.OnCertExpired(ce),We()(function(){a.I.DWT.UpdateCert(a.I.DWT.CertificateConfig.URL,a.I.OnUpdateCertSuccess,a.I.OnUpdateCertFailure)},5e3)))},a.I.DWT.__innerUpdateCert=function(ce,Dt,Xe,Be){var Ct=a.I.dcp;Dt=[Dt=Dt?Ct._getHttpPreUrl(Ct.detect.curPortIndex):Ct._getPreUrl(Ct.detect.curPortIndex),Ct._getModuleName(),Ct._getModuleVer(),"/LoadZipFromBytes?type=",2,"&dsver=",Ct.getServiceVersion().join(""),"&ts=",a.D.now()].join(""),a.D.ajax({method:"POST",url:Dt,async:!0,data:ce,onSuccess:Xe,onError:function(){a.D.isFunction(Be)&&Be()}})},a.I.DWT.__innerReboot=function(ce,Me){var Xe=a.I.dcp,Be=[Xe._getPreUrl(Xe.detect.curPortIndex),Xe._getModuleName(),Xe._getModuleVer(),"/admin?ts=",a.D.now()].join("");a.D.ajax({method:"POST",url:Be,async:!0,data:'{"id":"'+(new Date).getTime().toString()+'","method":"Reboot","parameter":[],"version":"dwasm2_'+Xe._getModuleVer()+'"}',onSuccess:ce,onError:Me})},a.I.DWT.UpdateCert=function(ce,Me,Xe){a.D.isString(ce)&&""!=ce?a.D.fetch(ce,{mode:"cors",dataType:"arraybuffer"}).then(function(at){a.I.DWT.__innerUpdateCert(at,!1,function(){a.I.DWT.CheckCertExpired=!1,a.D.isFunction(Me)&&Me()},function(){a.I.navInfoSync.bSSL?a.I.DWT.__innerUpdateCert(at,!0,Me,Xe):a.D.isFunction(Xe)&&Xe()}),at=null},Xe):a.D.isFunction(Xe)&&Xe()},Ke=Ye(1614),Ye.n(Ke)),Ie=Q.Lib,$e=((Je={Errors:{FilePathSyntaxIncorrect:function(ce){ce._errorCode=-3123,ce._errorString="The filename, directory name, or volume label syntax is incorrect."}},checkFilePath:function(ce,Me){return Ie.isString(Me)&&0!=Me.length?!(pe()(Ie).call(Ie,Me,"http://")||pe()(Ie).call(Ie,Me,"https://")||pe()(Ie).call(Ie,Me,"ftp://"))||(Ie.File.Errors.FilePathSyntaxIncorrect(ce),!1):(Ie.Errors.InvalidFile(ce),!1)}}).checkFolder=Je.checkFilePath,Ie.File=Je,Ie.showProgress=function(){},Ie.closeProgress=function(){},le=Ye(5683),Ye.n(le)),st=(zt=Ye(9104),Ye.n(zt)),Nt=Ye(1255),Pt=Nt.CH+".",et=Q.Lib,Te=(et.License={isLTS:function(){return et.isString(Q.DWT.handshakeCode)||et.isString(Q.DWT.organizationID)||Q.DWT.isPublicLicense()},_innerCheckProductKey:function(ce,Me,Xe,mn){var Ct,at=mn,Dt=ce.__licenseInfo;if(Dt&&Dt.LTS){if(!Dt||!et.isArray(Dt.Detail)||0==Dt.Detail.length)return Q.Lib.License.isLTS()?et.Errors.LicenseNoCore(ce):et.Errors.LicenseEmptyOrInvalid(ce),et.License.ShowInvalidLicense("",!0),!1;at=!1}else if(!et.isString(Q.DWT.ProductKey)||""==Q.DWT.ProductKey||"******"==Q.DWT.ProductKey||!Dt||!et.isArray(Dt.Detail)||0==Dt.Detail.length)return Q.Lib.License.isLTS()?et.Errors.LicenseNoCore(ce):et.Errors.LicenseEmptyOrInvalid(ce),et.License.ShowInvalidLicense("",!0),!1;var nn,on,fn,kt=0,Rt=0,qe=[],Mt=[],Ht=!1,Vt=!1,jt=!1,ln=!1,Un=!1,On=!1;if(!this.isBindDomainOK(Dt.Domain))return et.Errors.LicenseBadDomain(ce),at&&et.License.promptLicenseErr(ce),!1;for(0<Dt.Detail.length&&(Ct="FALSE"!=(Gn=Dt.Detail[0]).Trial),vr=1;vr<Dt.Detail.length;vr++)if("FALSE"==(Gn=Dt.Detail[vr]).Trial&&Ct||"TRUE"==Gn.Trial&&!Ct)return et.Errors.LicenseTrialFullMixed(ce),at&&et.License.promptLicenseErr(ce),!1;if(Me.Core||Me.Webcam){for(var br=[],En=!1,vr=0;vr<Dt.Detail.length;vr++)if(wr=this.getEnumLicenseType((Gn=Dt.Detail[vr]).EnumLicenseType),(Me.Core||!Me.Wasm)&&wr.Core||(Me.Webcam||!Me.Wasm)&&wr.Webcam){var ei,fi=this.getLicenseType(Gn.LicenseType);if(et.isString(Gn.Version)&&0==$e()(ei=Gn.Version).call(ei,Pt)){if(et.product.bHTML5Edition){if(fi.ActiveX&&!fi.Html5)continue;Mt.push(Gn)}else{if(!fi.ActiveX&&fi.Html5)continue;Mt.push(Gn)}En=!0}else br.push(Gn)}else Mt.push(Gn);if(!En&&0<br.length)return r()(br).call(br,0),mn=(0==Nt.Ne?[Nt.CH,Nt.$n]:[Nt.CH,Nt.$n,Nt.Ne]).join("."),et.Errors.LicenseVersionNotCurrent(ce,mn),at&&et.License.promptLicenseErr(ce),!1;r()(br).call(br,0)}else Mt=Dt.Detail;for(vr=0;vr<Mt.length;vr++){var pr,Fr,ao,Li=!0,Gn=Mt[vr],wr=this.getEnumLicenseType(Gn.EnumLicenseType);(Me.Core||this.isAllowLicenseType(wr,Me))&&(pr=Gn.ExpireDate.replace(/-/g,"/"),(ao="FALSE"!=Gn.Trial)&&!Q.DWT.HideTrialMessage&&(Fr=this.remainExpireDays(pr))<=5&&(et.isFunction(Q.OnLicenseExpiredMessage)&&Q.OnLicenseExpiredMessage(pr,Fr),Q.DWT.HideTrialMessage=!0),this.isExpiredOrFuture(pr,ao)?qe.push(pr):wr.Core&&15<=F()(Gn.Version)||!wr.Core?Me.Wasm?(Fr=!1,(Fr=!!(Me.Core&&wr.Core||Me.PDFRasterizer&&wr.PDFRasterizer||Me.Webcam&&wr.Webcam)||Fr)&&(-1<$e()(ao=Gn.OS.toLowerCase()).call(ao,"wasm")?this.isBrowserOK(Gn.Browser)||Xe?(kt++,Li=!1):Vt=!0:Me.PDFRasterizer?Un=!0:Me.Webcam?On=!0:ln=!0)):this.isOSOK(Gn.OS,ce)?this.isBrowserOK(Gn.Browser)||Xe?(kt++,Li=!1):Vt=!0:Ht=!0:jt=!0,Li&&Rt++)}if(0<kt)return!0;if(0==Rt)return this.setNoAllowedLicenseTypeError(ce,Me),at&&et.License.promptLicenseErr(ce),!1;if(0<qe.length){var Or,Ei=0,xr=1e20,Jr="",Mi=(new Date).getTime();for(pr="",vr=0;vr<qe.length;vr++)(Or=this.parseDateFromString(qe[vr])).getTime()<Mi&&Or.getTime()>Ei?(Ei=Or.getTime(),pr=qe[vr]):Or.getTime()>Mi&&Or.getTime()<xr&&(xr=Or.getTime(),Jr=qe[vr]);return""!=pr?(Or=this.parseDateFromString(pr),pr=this.getLicenseDateString(Or),et.Errors.LicenseExpired(ce,pr),Q.Lib.License.isLTS()||et.License.ShowInvalidLicense(pr,Ct),at=!1):""!=Jr?(Or=this.parseDateFromString(Jr),Jr=this.getLicenseDateString(Or),et.Errors.LicenseIsFuture(ce,Jr)):(et.Errors.LicenseExpired(ce,""),at=!1,et.License.ShowInvalidLicense()),at&&et.License.promptLicenseErr(ce),!1}return jt?(et.Errors.LicenseLower(ce),at&&et.License.promptLicenseErr(ce),!1):(mn=Q.navInfoSync,Vt?(mn.bEdge?et.Errors.LicenseNoEdge(ce):mn.bChrome?et.Errors.LicenseNoChrome(ce):mn.bFirefox?et.Errors.LicenseNoFirefox(ce):mn.bIE?et.Errors.LicenseNoIE(ce):mn.bSafari?et.Errors.LicenseNoSafari(ce):et.Errors.LicenseNotSupportBorwser(ce),at&&et.License.promptLicenseErr(ce)):Ht?(fn=on=nn=!1,ce._bRemoteMode?ce.__serverPlatform==Q.DWT.EnumDWT_PlatformType.enumWindow?fn=!0:ce.__serverPlatform==Q.DWT.EnumDWT_PlatformType.enumLinux?on=!0:ce.__serverPlatform==Q.DWT.EnumDWT_PlatformType.enumMac&&(nn=!0):(nn=mn.bMac,on=mn.bLinux,fn=mn.bWin),fn?et.Errors.LicenseNotSupportWindows(ce):nn?et.Errors.LicenseNotSupportMAC(ce):on?et.Errors.LicenseNotSupportLinux(ce):et.Errors.LicenseNotSupportOS(ce),at&&et.License.promptLicenseErr(ce)):ln?(et.Errors.LicenseNotSupportWasm(ce),at&&et.License.promptLicenseErr(ce)):Un?(et.Errors.LicenseNotSupportPdfRWasm(ce),at&&et.License.promptLicenseErr(ce)):On?(et.Errors.LicenseNotSupportWebcamWasm(ce),at&&et.License.promptLicenseErr(ce)):(et.Errors.LicenseEmptyOrInvalid(ce),at&&this.promptLicenseErr(ce)),!1)},checkProductKey:function(ce,Me,Xe,Be){var Ct=Q.DWT.licenseException,at=!0;return(Q.Lib.isString(Q.DWT.handshakeCode)||Q.Lib.isString(Q.DWT.organizationID))&&Q.Lib.isString(Q.DWT.ProductKey)&&(Q.Lib.Errors.LongKeyShortKeyMixed(ce),at=!1),(at=at&&Q.Lib.License._innerCheckProductKey(ce,Me,Xe,Be))||(Ct.code=ce._errorCode,Ct.message=ce._errorString,Ct.fromLTS=!1),at},promptLicenseErr:function(ce){var Me,Xe=!1,Be=640<(Be=screen.width)?640:Be-10;et.isNumber(ce.ErrorCode)?(Xe=ce.ErrorCode,Me=ce.ErrorString):et.isNumber(ce.code)?(Xe=ce.code,Me=ce.message):et.isString(ce.message)&&(Xe=!0,Me=ce.message),!1!==Xe&&Q.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',Me,"</div>",'<div style="padding-top:35px"></div>'].join(""),{width:Be,height:0,headerStyle:1})},ShowInvalidLicense:function(ce,Me){if(!et.detect.needUpgrade){if(et.License.isLTS())return Xe=Q.DWT.licenseException.message,void(Q.OnLTSLicenseError&&Q.OnLTSLicenseError(Q.Lib.License.getPublicLicenseContent(Xe)));var Xe=[],Be="is not valid",Ct=640<(Ct=screen.width)?640:Ct-10;ce&&""!=ce&&(Be=-1==$e()(ce).call(ce,"on")?"has expired on "+ce:"has expired "+ce),Xe.push('<div style="padding:0 25px 25px 25px;">'),et.env.bMobile?(Xe.push("The <strong>ProductKey</strong> is not valid."),Me&&(Xe.push(" Please <br /><ul><li>1. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a trial license</a>.</li>"),Xe.push("<li>2. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/web-twain/docs/indepth/development/upgrade.html#update-the-product-key?product=dwt&utm_source=in-product' target='_blank'>Update the ProductKey</a>.</li>"),Xe.push("</ul>"))):Me?(Xe.push("You are seeing this message because your trial key "),Xe.push(Be),Xe.push(". Two quick steps to extend your trial: <br /><div><ul>"),Xe.push("<li style='padding-left:25px'>1.<strong><a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a new trial key</a></strong> and follow the instructions to set the new key</li>"),Xe.push("<li style='padding-left:25px'>2.Refresh your scan page and try again</li>"),Xe.push("</ul></div>If you run into any issues, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a>.")):(Xe.push("You are seeing this message because the license for doc scanning support "),Xe.push(Be),Xe.push(".<br /><div><ul>"),Xe.push("<li><strong>If you are the owner of the website</strong>, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/order/renewalList' target='_blank'>renew your license</a> and follow the instructions to set the new key. Please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a> if you need any help.</li>"),Xe.push("<li><strong>If you are an end-user</strong>, please inform the owner or developer of this website.</li>"),Xe.push("</ul></div>")),Xe.push("</div>"),Q.DWT.ShowMessage(Xe.join(""),{width:Ct,height:0,headerStyle:1}),!et.env.bMobile||(ce=et.one(".ds-dwt-ui-dlg-wrap"))&&0<ce.length&&(ce[0].style.fontSize="1.5em",ce[0].style.lineHeight="1.5em")}},isBindDomainOK:function(ce){if(et.isUndefined(ce)||null==ce||""==ce||"*"==ce||"*.*"==ce)return!0;var Me=location.hostname,Xe=!1;if(""==Me)return!0;for(var Be=Me.toLowerCase().split("."),Ct=Be.length,at=ce.toLowerCase().split(";"),Dt=0;Dt<at.length;Dt++){var kt=at[Dt];if("*.*"==kt){Xe=!0;break}var Rt=kt.split("."),qe=Rt.length;if(0<qe&&qe-1<=Ct){for(var Mt,Ht=!0,Vt=qe-1;0<Vt;Vt--){if(-1<$e()(Mt=Rt[Vt]).call(Mt,"*")){Xe=!0;break}if(0<=Vt+Ct-qe){if(Be[Vt+Ct-qe]!=Rt[Vt]){Ht=!1;break}}else if("*"!=Rt[Vt]){Ht=!1;break}}if(Ht&&("*"==Rt[0]||qe<=Ct&&Be[Ct-qe]==Rt[0])){Xe=!0;break}}}return Xe},isExpiredOrFuture:function(Be,Me){if(""==Be)return!1;if(!Me&&2<(Xe=Be.length)&&"/"==Be[Xe-2]&&"0"==Be[Xe-1])return!1;var Xe=this.parseDateFromString(Be),Ct=(Be=(new Date).getTime())+5184e6;return Xe.getTime()<Be||!!(Me&&Xe.getTime()>Ct)},remainExpireDays:function(Me){if(""==Me)return 65536;Me=this.parseDateFromString(Me);var Xe=(new Date).getTime(),Be=(Me.getTime()-Xe)/864e5;return Me.getTime()<Xe?0:Math.ceil(Be)},isOSOK:function(ce,Me){var Xe=!1,Be=!1,Ct=!1,at=!1,Dt=!1,kt=!1;return""==ce||"0"==ce||(Me._bRemoteMode?Me.__serverPlatform==Q.DWT.EnumDWT_PlatformType.enumWindow?Ct=!0:Me.__serverPlatform==Q.DWT.EnumDWT_PlatformType.enumLinux?Be=!0:Me.__serverPlatform==Q.DWT.EnumDWT_PlatformType.enumMac?Xe=!0:Me.__serverPlatform==Q.DWT.EnumDWT_PlatformType.enumEmbed?Dt=!0:Me.__serverPlatform==Q.DWT.EnumDWT_PlatformType.enumChromeOS&&(kt=!0):(Xe=(Me=Q.navInfoSync).bMac,Be=Me.bLinux,Ct=Me.bWin,at=et.env.bMobile,kt=Me.bChromeOS,Dt=Q.navInfo.bEmbed),ce=ce.toLowerCase(),!!(-1<$e()(ce).call(ce,"windows")&&Ct||-1<$e()(ce).call(ce,"mac")&&Xe||-1<$e()(ce).call(ce,"linux")&&(Be||kt)||-1<$e()(ce).call(ce,"mobile")&&at||-1<$e()(ce).call(ce,"embed")&&Dt))},isBrowserOK:function(ce){if(et.isString(ce)){if(""==ce||"0"==ce)return!0;ce=(ce=ce.toLowerCase()).split(";");var Me=!1,Xe=Q.navInfoSync;return et.each(ce,function(Ct){("chrome"==st()(et).call(et,Ct)&&(Xe.bChrome||Xe.bSafari||Xe.bOpera||Xe.bEdge)||"ie"==st()(et).call(et,Ct)&&Xe.bIE||"firefox"==st()(et).call(et,Ct)&&Xe.bFirefox)&&(Me=!0)}),Me}return!1},parseDateFromString:function(ce){return ce=ce.replace(/-/g,"/"),ce=Date.parse(ce),isNaN(ce)&&(ce=0),(ce=new Date(ce)).setHours(23,59,59,999),ce},getEnumLicenseType:function(ce){var Me=!1,Xe=!1,Be=!1,Ct=!1,at=!1,Dt=!1,kt=!1,Rt=!1,qe=!1;return et.isString(ce)&&et.each(ce.split(";"),function(Mt){2==(Mt=+Mt)||3==Mt||0==Mt||1==Mt?Me=!0:4==Mt?Xe=!0:50==Mt?Be=!0:51==Mt?Ct=!0:52==Mt?at=!0:7==Mt?Dt=!0:8==Mt?kt=!0:9==Mt?Rt=!0:10==Mt&&(qe=!0)}),{Core:Me,PDFRasterizer:Rt,Webcam:kt,barcode1D:Xe,QR:Be,PDF417:Ct,DataMatrix:at,OCR:Dt,OCRPro:qe}},getLicenseType:function(ce){var Me=!1,Xe=!1,Be=!1,Ct=!1,at=!1,Dt=!1,kt=!1,Rt=!1,qe=!1,Mt=!1;return ce&&""!=ce&&("html5;activex;oldie"==(ce=ce.toLowerCase())?Be=!0:"html5"==ce||"win=(aph) or mac=(ph) or linux(h)"==ce?Me=!0:"html5;activex"==ce?Be=Me=!0:"1d barcode reader"==ce?Xe=!0:"2d barcode reader(qrcode)"==ce?Ct=!0:"2d barcode reader(pdf417)"==ce?at=!0:"2d barcode reader(data matrix)"==ce?Dt=!0:"ocr"==ce?kt=!0:"webcam"==ce?Rt=!0:"pdf rasterizer"==ce?qe=!0:"proocr"==ce&&(Mt=!0)),{Html5:Me,PDFRasterizer:qe,Webcam:Rt,barcode1D:Xe,QR:Ct,PDF417:at,DataMatrix:Dt,OCR:kt,OCRPro:Mt,ActiveX:Be}},isAllowLicenseType:function(ce,Me){return Me.Core?ce.Core:Me.PDFRasterizer?ce.PDFRasterizer:Me.Webcam?ce.Webcam:Me.barcode1D?ce.barcode1D:Me.QR?ce.QR:Me.PDF417?ce.PDF417:Me.DataMatrix?ce.DataMatrix:Me.OCR?ce.OCR:Me.OCRPro?ce.OCRPro:ce.Core},setNoAllowedLicenseTypeError:function(ce,Me){Me.Core?Me.Wasm?et.Errors.LicenseNotSupportWasm(ce):et.Errors.LicenseNoCore(ce):Me.PDFRasterizer?Me.Wasm?et.Errors.LicenseNotSupportPdfRWasm(ce):et.Errors.LicenseNoPDF(ce):Me.Webcam?Me.Wasm?et.Errors.LicenseNotSupportWebcamWasm(ce):et.Errors.LicenseNoWebcam(ce):Me.OCR?et.Errors.LicenseNoOCR(ce):Me.OCRPro?et.Errors.LicenseNoOCRPro(ce):et.Errors.LicenseEmptyOrInvalid(ce)},getLicenseDateString:function(Be){var Xe,Me=Be.getFullYear();return[Xe=10<=(Xe=Be.getMonth()+1)?""+Xe:"0"+Xe,"/",Be=10<=Be.getDate()?""+Be.getDate():"0"+Be.getDate(),"/",Me].join("")},hasPDFRProductKey:function(ce){if(ce._isMobileMode()){if(!et.License.checkProductKey(ce,{PDFRasterizer:!0,Wasm:!0},!0))return ce._resetErr(),!1}else if(!et.License.checkProductKey(ce,{PDFRasterizer:!0},!0))return ce._resetErr(),!1;return!0},checkPDFProductKeyWhenNeeds:function(ce,Me){var Xe;return Me!=Q.DWT.EnumDWT_ImageType.IT_PDF&&Me!=Q.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||(et.product.bHTML5Edition?ce.__addon&&ce.__addon.PDF&&(Xe=ce.__addon.PDF.GetConvertMode()):ce.Addon&&ce.Addon.PDF&&(Xe=ce.Addon.PDF.GetConvertMode()),1!=Xe&&4!=Xe)||(et.isFunction(ce._isMobileMode)&&ce._isMobileMode()?this.checkProductKey(ce,{PDFRasterizer:!0,Wasm:!0},!0):this.checkProductKey(ce,{PDFRasterizer:!0},!0))},getPublicLicenseContent:function(ce){var Me=[];if(!et.isString(ce)){if(et.isUndef(ce))return"";ce=ce instanceof Error||"message"in ce?ce.message:""+ce}var Xe=$e()(ce).call(ce,"["),Be=$e()(ce).call(ce,"]",Xe),Ct=$e()(ce).call(ce,"(",Be),at=$e()(ce).call(ce,")",Ct);return-1==Xe||-1==Be||-1==Ct||-1==at?ce:(0<Xe&&Me.push(ce.substring(0,Xe)),Xe=ce.substring(Xe+1,Be),Be=ce.substring(Ct+1,at),Me.push(['<a href="',Be,'" target="_blank" class="dynamsoft-major-color">',Xe,"</a>"].join("")),Me.push(ce.substring(at+1)),Me.join(""))}},Q.DWT.isPublicLicense=function(){return!(!et.isUndef(Q.DWT.ProductKey)||!(et.isUndef(Q.DWT.handshakeCode)&&et.isUndef(Q.DWT.organizationID)||et.isUndef(Q.DWT.handshakeCode)&&"200001"==Q.DWT.organizationID))},Ke=Ye(1006),Ye.n(Ke)),Fe=Q.navInfoSync,qt=(Je=Fe.bHTML5Edition,le=!1,Fe.bIE&&(""===(zt=Fe.IEVersion)||10<=zt?0==Q.DWT.IfUseActiveXForIE10Plus?Je=!0:(le=!(Je=!1),Fe.bHTML5Edition=Je):(Je=!1,9<=zt&&(le=!0))),Ke={name:"Dynamic Web TWAIN",bHTML5Edition:Je,bActiveXEdition:le,host:Q.dcp.host,wsProtocol:"dwt_command",_iImageCaptureDriverType:3,_iBrokerProcessType:1,getChromeEditionPath:Q.dcp.getDSPath,getPKGPath:function(){return Q.DWT.ResourcesPath+"/dist/mac/DynamicWebTWAINMacEdition.pkg"},getMSIPath:function(){return Q.DWT.ResourcesPath+"/dist/win/DynamicWebTWAINPlugIn.msi"},getActiveXCABx86Path:function(){return Q.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAIN.cab"},getActiveXCABx64Path:function(){return Q.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAINx64.cab"},strMIMEType:"Application/DynamicWebTwain-Plugin",strFullClassID:"E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758",scripts:{},bChromeEdition:Je,getServerVersionInfo:function(ce){var Me=Q.DWT.ServerVersionInfo;return Fe.bWin||(Fe.bMac?Me=Q.DWT.ServerMacVersionInfo:(Fe.bLinux||Fe.bChromeOS)&&(Me=Q.DWT.ServerLinuxVersionInfo)),ce?Me:Te()(ce=Q.Lib).call(ce,Me,",","")},getDWTPrefix:function(){return!0===Q.DWT.CustomMode?"dwtc_":"dwt_"},loadResourcePath:!1,loadingResourcePath:!1},zt=Ye(5005),le=Ye.n(zt),Je=Ye(677),zt=Ye.n(Je),Ye=(Je=a.I.navInfoSync).bWin,Je.bMac),xe=Je.bLinux,ut=Je.bSafari,rn=Je.bFirefox,Qt=Je.bChrome,nt=location.hostname,Ue=location.pathname,ue=0,se=Je.bMobile,ke=(le=le()(Je.strBrowserVersion),a.I.navInfo&&(ke=a.I.navInfo,se=se||ke.bPad||ke.biPhone||ke.biPad),Ue=""===nt?(Ye&&1<zt()(Ue).call(Ue,"\\")?Ue.substring(1,zt()(Ue).call(Ue,"\\")):Ue.substring(ue=1,zt()(Ue).call(Ue,"/"))).replace(/%20/g," "):(ue=1,Ue.substring(0,zt()(Ue).call(Ue,"/"))),{bChrome:Qt,bFirefox:rn,bSafari:ut,bIE:Je.bIE,bEdge:Je.bEdge,bWin:Ye,bMac:qt,bLinux:xe,iPluginLength:0,bFileSystem:Je.bFileSystem,bMobile:se,strIEVersion:Je.IEVersion,strChromeVersion:Je.bChrome?le:"",strFirefoxVersion:Je.bFirefox?le:"",basePath:Ue,pathType:ue,isDesktopViewer:function(){return a.I.navInfoSync.bWin||a.I.navInfoSync.bLinux||a.I.navInfoSync.bChromeOS||a.I.navInfoSync.bMac},isPadViewer:function(){return a.I.navInfo.bPad||a.I.navInfo.biPad},isMobileViewer:function(){return a.I.navInfoSync.bMobile||a.I.navInfo.biPhone},isWasmUseFastcomp:function(){if(a.I.Lib.preNavInfo.bUseUserAgent){var ce=F()(a.I.navInfoSync.strBrowserVersion);if(a.I.navInfoSync.bSafari&&13<=ce||a.I.navInfoSync.bFirefox&&94<=ce||a.I.navInfoSync.bChrome&&94<=ce)return!1}else{var Me=[],Xe=0;for(("brands"in(ce=navigator.userAgentData)&&a.D.isArray(ce.brands)&&0<ce.brands.length?Me=ce.brands:"uaList"in ce&&a.D.isArray(ce.uaList)&&0<ce.uaList.length&&(Me=ce.uaList),Xe=0);Xe<Me.length;Xe++){var Be=Me[Xe];if(Be.brand&&("Chromium"==Be.brand||"Google Chrome"==Be.brand)&&Be.version&&94<=F()(Be.version,10))return!1}}return!0}}),He={getHex:function(ce){return 1==(ce=Number(ce).toString(16).toUpperCase()).length?["0",ce].join(""):ce},getColor:function(ce){var Me=(65280&ce)>>8,Xe=255&ce;return["#",He.getHex(ce>>16),He.getHex(Me),He.getHex(Xe)].join("")},RGB2BGR:function(ce){return(255&ce)<<16|65280&ce|ce>>16}},Gt=(He.BGR2RGB=He.RGB2BGR,nt=He,zt=document.location.protocol,Qt=location.hostname,rn=a.I.navInfoSync.bSSL,a.D.env=ke,a.D.product=Ke,a.D.mix(a.D,nt),a.D.BIO=tn,{config:{debug:!(a.I.MSG={Loading:"Processing...",LoadingTiff:"Processing tiff...",LoadingPdf:"Processing pdf...",Encoding:"Processing...",ConvertingToBlob:"Converting to blob...",ConvertingToBase64:"Converting to base64...",SavingPdf:"Saving pdf...",SavingTiff:"Saving tiff...",Downloading:"Downloading...",Uploading:"Uploading...",Wasm_Initializing:"Initializing...",Init_LookingLicense:"Looking for license...",Init_LoadingViewerJs:"Loading the viewer script...",Init_AllJsLoaded:"All scripts loaded.",Init_FireBeforeInitEvt:"OnWebTwainWillInit triggered.",Init_InitActiveX:"Initializing the ActiveX...",Init_InitH5:"Initializing...",Init_InitWasm:"Initializing WebAssembly mode...",Init_DownloadingWasm:"Downloading WebAssembly code...",Init_CompilingWasm:"Compiling WebAssembly code...",Init_InitDynamsoftService:"Initializing the Service mode...",Init_CheckDWT:"Looking for the service module...",Init_CheckDWTVersion:"Checking the service module...",Init_CreatingDWT:"Creating a WebTwain instance...",Init_ConfiguringDWT:"Configuring the WebTwain instance...",Init_SetLicenseForDWT:"Activating the WebTwain instance...",Init_GetLicenseInfoForDWT:"Decoding the license...",Init_CheckingLicense:"Checking the license...",Err_BrowserNotSupportWasm:"It looks like your browser doesn't support the WebAssembly technology which is required to use the library."}),devMode:!1,usingMainMode:!1,bDiscardBlankImage:!1,msg:[],msgPrefix:'<span style="color:#cE5E04"><b>',msgSuffix:"</b></span><br />"},detect:{ssl:rn,dcpStatus:0,dcpCallbackType:0,arySTwains:[],arySTwainsByIP:[],aryWSPool:[],bFirst:!0,bOK:!1,__dialog:!1,scriptLoaded:!1,wasmScriptLoaded:!1,wasmPdfReaderLoaded:!1,wasmLoad:!1,cssLoaded:!1,viewerScriptLoaded:!1,bNoControlEvent:!1,bNeedUpgradeEvent:!1,StartWSTimeoutId:!1,StartWSByIPTimeoutId:!1,bPromptJSOrServerOutdated:!1,bNeedWasm:!1,bAutoLoadDone:!1,detectType:rn?1:"http:"===zt||""===Qt?0:-1,tryTimes:0,ports:[{port:a.I.DWT.SSLPort,ssl:!0},{port:a.I.DWT.Port,ssl:!1}],win64Ports:[{port:18621,ssl:!0},{port:18620,ssl:!1}],cUrlIndex:0,urls:[],onNoControl:!1,needUpgrade:!1,OnDetectNext:!1,OnCreatWS:!1,bMaskShow:!1},page:{bUnload:!1,OnUnload:!1},tmp:{IfAllowLocalCache:!0,EmptyFunction:function(){}}});Gt.appendMessage=function(ce){"string"==typeof ce?Gt.config.msg.push(ce):"[object Array]"===Object.prototype.toString.call(ce)&&a.I.Lib.each(ce,function(Me){Gt.appendMessage(Me)})},Gt.appendRichMessage=function(ce){Gt.appendMessage([Gt.config.msgPrefix,ce,Gt.config.msgSuffix])},Gt.clearMessage=function(){var ce;return r()(ce=Gt.config.msg).call(ce,0),!0},Gt.getRealPath=function(ce){return void 0===ce?"":1==Gt.env.pathType?Gt.env.basePath+ce:Gt.env.basePath+ce.replace(new RegExp("/","g"),"\\\\")},Gt.isLocalIP=function(ce){return ce&&("127.0.0.1"===ce||"localhost"===ce||"local.dynamsoftwebtwain.com"===ce||"local.dynamsoft.com"===ce)},Gt.IsNeedLoadWasm=function(){return a.D.detect.bNeedWasm||!1===a.I.DWT.UseLocalService||a.D.isUndefined(a.I.DWT.UseLocalService)&&a.D.env.bMobile||a.I.DWT.UseBarcodeAddonWasm},Gt.getShadowRoot=function(ce){var Me=ce;if(a.D.win.ShadowRoot)for(;Me;){if(Me instanceof a.D.win.ShadowRoot)return Me;Me=Me.parentNode}return!1},Gt.isShadowRoot=function(ce){return!!(a.D.win.ShadowRoot&&ce instanceof a.D.win.ShadowRoot)},a.D.mix(a.D,Gt),a.D.Addon_Events=[],a.D.Addon_Sendback_Events=[]},2053:function(e,_,h){h.r(_);var r,a,o,u,s,f=h(9623),v=(_=h(7711),h.n(_)),l=(_=h(4579),h.n(_)),I=(_=h(5238),h.n(_)),c=h(1695),y=(_=h(1255),h=v()(_.CH),v()(_.$n)),p=v()(_.Ne),m=_.Bm,T=_.Bm,C=c.I.managerEnv,D=c.D.LS,S=c.I.navInfoSync.host,M=20220401,G=function(){if(c.I.dcp){var W=c.I.dcp.dcpJSVer;if(c.D.isNumber(W))return M<=W}return!1};C||(c.I.managerEnv={},C=c.I.managerEnv),C.resourcesPath=C.resourcesPath||"Resources",C.IfUpdateService=!!C.IfUpdateService,G()?M=G=r:(u=[],s=0,c.I.dcp=a={host:"127.0.0.1",ports:[[18625,18626]],dcpJSVer:M,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],managerVersion:[h,y,p,m],managerVersionMac:[h,y,p,m],managerVersionLinux:[h,y,p,m],serviceVersion:[_.UJ,_.oU,_.$E,T],serviceVersionMac:[_.UJ,_.oU,_.$E,T],serviceVersionLinux:[_.UJ,_.oU,_.$E,T],detect:o={dcpStatus:0,bConnected:!1,connectedResult:"",curPortIndex:0,bConnectNumLimited:!0,IMAXCONNECTCOUNT:5,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}},strSID:"",bEnhancedMode:!1,b64bit:!1,wsProtocol:"dwt_command",dwtPort:0,onReadys:[],getManagerVersion:function(){var L=c.I.navInfoSync;if(!L.bWin){if(L.bMac)return a.managerVersionMac;if(L.bLinux)return a.managerVersionLinux}return a.managerVersion},getServiceVersion:function(){var L=c.I.navInfoSync;if(!L.bWin){if(L.bMac)return a.serviceVersionMac;if(L.bLinux)return a.serviceVersionLinux}return a.serviceVersion},versionInfo:function(L,W){var F=0;o.dcpStatus=o.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,W,function(X){if(c.D.isArray(X)&&0<X.length&&X[0]){o.curPort=a.ports[F%a.ports.length];var $=X[0];if(c.D.isString($)&&a._compareVersion($.split(","),a.oldDWASMVer))return a._setDefaultValuesFromServer(X),o.bConnected=!0,o.dcpStatus=o.EnumDCP_DetectStatus.Connected,a._sendStatusEvent(!1,$),c.D.isFunction(L)&&l()(function(){L(a.strSID,a.bEnhancedMode)},0),!0}return!1},function(X,$,V){return++F,o.curPortIndex=F%a.ports.length,o.bConnected=!1,!!(o.bConnectNumLimited&&F>=o.IMAXCONNECTCOUNT)&&(l()(function(){L(X,$,V)},0),!0)})},_checkOldManagerVersion:function(L,W){o.dcpStatus=o.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,r,L,W)},_checkManagerVersion:function(L,W,F){o.dcpStatus=o.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!1,L,W,F)},_checkService:function(L,W){o.dcpStatus=o.EnumDCP_DetectStatus.CheckingServiceVer,this._postBase("DSVersion",!1,r,L,W)},_checkUpdateFile:function(L,W){this._postBase("CheckUpdateFile",!1,r,L,W)},_updateService:function(L,W){this._postBase("UpdateService",!1,r,L,W)},_postBase:function(L,W,F,U,H){var Z=W?a.oldDWASMVerStr:"dwasm2_"+a._getModuleVer();return Z={id:(new Date).getTime().toString(),method:L,version:Z,parameter:[]},F&&(Z.productKey=F),this._postBaseV2(L,W,Z,500,U,H),!0},_postBaseV2:function(L,W,F,U,H,Z){var X,$,V,De=c.D.stringify(F);if(c.D.isFunction(H)&&c.D.isFunction(Z))if(a.detect.bConnected&&"VersionInfo"==L&&""!=a.detect.connectedResult)H(a.detect.connectedResult);else{if(X=function(de,_t,be){0==--s&&Z(de,_t,be)},$=function(de,_t,be){var it=a._getJSON(de);it&&"result"in it&&(s=-1,a.detect.bConnected||(a.detect.bConnected=!0,a.detect.dcpStatus=a.detect.EnumDCP_DetectStatus.Connected,a.detect.curPort=a.ports[be.index],a.ports=[a.detect.curPort],a.detect.curPortIndex=0,D.isSupportLS()&&D.item("DCP_port",a.detect.curPort[1]),H(it.result)))||X(de,_t,be)},1<(s=a.ports.length)&&D.isSupportLS()){var fe=D.item("DCP_port");if(c.D.isString(fe)&&""!==fe)for(V=1;V<s;V++){var je=a.ports[V],Se=je[0];(je=je[1])==fe&&(a.ports[V][0]=a.ports[0][0],a.ports[V][1]=a.ports[0][1],a.ports[0][0]=Se,a.ports[0][1]=je);break}}for(a.detect.bConnected&&(s=1),u=[],a.detect.bConnected=!1,V=0;V<s;V++){var rt=[a._getPreUrl(V),W?"dcp/":a._getModuleName(),W?a.oldDWASMVerStr:a._getModuleVer(),"/",L,"?type=1&dsver=",a.getServiceVersion().join(""),"&ts=",c.D.now()].join("");u.push({method:"POST",url:rt,timeout:U,data:De,onSuccess:$,onError:X})}for(V=0;V<s;V++)c.D.ajax(u[V]).index=V}},loadZip:function(L,W,F,U){var H=W,Z=F;100===W&&(H=0,Z=function($){c.D.isString($)&&($=$.replace('"result" : [ 0,','"result" : [ 100,')),F($)}),W=(c.I.managerEnv.IfUpdateService?[a._getPreUrl(o.curPortIndex),a._getModuleName(),a._getModuleVer(),"/LoadZipFromBytes?type=",H,"&dsver=",a.getServiceVersion().join(""),"&ts=",c.D.now()]:[a._getPreUrl(o.curPortIndex),"dcp/",a.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",a.getServiceVersion().join(""),"&ts=",c.D.now()]).join(""),c.D.ajax({method:"POST",url:W,async:!0,data:L,onSuccess:Z,onError:U})},oldLoadZip:function(L,W,F,U){var H=[a._getPreUrl(o.curPortIndex),"dcp/",a.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",a.getServiceVersion().join(""),"&ts=",c.D.now()].join("");c.D.ajax({method:"POST",url:H,async:!0,data:L,onSuccess:F,onError:U})},_getPreUrl:function(F){var W;return F=c.I.navInfoSync.bSSL?(W="https://",a.ports[F][1]):(W="http://",a.ports[F][0]),[W,a.host,":",F,"/"].join("")},_getHttpPreUrl:function(L){return["http://",a.host,":",a.ports[L][0],"/"].join("")},_getDcpWsPreUrl:function(L){return a.getWsUrl(a.host,c.I.navInfoSync.bSSL?a.ports[L][1]:a.ports[L][0])},_getJSON:function(L){return!!L&&c.D.parse(L)},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return a.getManagerVersion().join("")},_compareVersion:function(L,W){return!c.D.isLocalIP(a.host)||(c.D.isArray(L)&&4==L.length&&c.D.isArray(W)&&4<=W.length?L[0]>W[0]||L[0]==W[0]&&L[1]>W[1]||L[0]==W[0]&&L[1]==W[1]&&L[2]>W[2]||L[0]==W[0]&&L[1]==W[1]&&L[2]==W[2]&&v()(L[3])>=v()(W[3]):!!(c.D.isArray(L)&&1==L.length&&c.D.isArray(W)&&1<=W.length)&&v()(L[0])>=v()(W[0]))},_getDSUpdateZipUrl:function(){var L,W=c.I.navInfoSync,F="",U="Win";return W.bMac?U="Mac":W.bLinux&&(U="Linux"),L=W.bFileSystem?"":"?t="+c.D.now(),W.bWin&&a.b64bit&&(F="_x64"),[c.I.managerEnv.resourcesPath,"/dist/serviceupdate/",U,"DSUpdate_",a.getManagerVersion().join("."),F,".zip",L].join("")},getPorts:function(L,W,F){var U="GetPorts",H="dwasm2_"+a._getModuleVer();this._postBaseV2(U,!1,{id:"1",method:U,version:H,parameter:[L]},700,W,F)},_setDefaultValuesFromServer:function(L){var W="",F=!1,U=!1,H={};4<L.length&&(W=c.D.isString(L[2])?L[2]:"",F=c.D.isString(L[3])&&"true"===L[3],U=c.D.isString(L[4])&&"64"===L[4]),5<L.length&&(H=L[5]),a.detect.connectedResult=L,a.strSID=W,a.bEnhancedMode=F,a.b64bit=U,a.objEnhancedPorts=H,o.curPort=F&&H&&H.dcp?[(L=H.dcp).port,L.sslPort]:a.ports[o.curPortIndex],F&&H&&H.dwt&&(o.dwtPort=(W=H.dwt)?c.I.navInfoSync.bSSL?W.sslPort:W.port:0)},checkDcpForUpdate:function(L,W,F,U,H,Z,X,$){var V,De,fe,je,Se,rt,tt=!1,de=!0,_t=3,be=0,it=(V=function(we){if(!(c.D.isArray(we)&&0<we.length&&we[0]))return!1;var Ve,bt,At,St=we[0].split(","),Pe=!1;return 4<we.length&&(Pe=c.D.isString(we[4])&&"64"===we[4]),a.b64bit=Pe,c.I.managerEnv.IfUpdateService?a._compareVersion(St,a.oldDWASMVer)?(we=a._getDSUpdateZipUrl(),tt=!0,At=function(Ze){o.dcpStatus=o.EnumDCP_DetectStatus.DownloadedZip,a._sendStatusEvent(),a.oldLoadZip(Ze,0,function(){l()(function(){a._checkManagerVersion($,fe,je)},5e3)},Ve)},Ve=function(Ze,Ne,Re){a._funUpdateFailed(H,Z,Ze,Re.status),l()(X,0)},bt=function(Ze){o.dcpStatus=o.EnumDCP_DetectStatus.DownloadFailed,H&&H(),Ze="The update package can't be downloaded. The error code is "+Ze.httpCode+".",Z&&Z(!0,Ze),a._sendStatusEvent(!0,Ze),l()(X,0)},F&&F(),U&&U(),o.dcpStatus=o.EnumDCP_DetectStatus.DownloadingZip,a._sendStatusEvent(),c.D.fetch(we,{mode:"cors",dataType:"arraybuffer"}).then(At,bt)):de&&(o.dcpStatus=o.EnumDCP_DetectStatus.NotInstalled,F&&F(),L&&L(),a._sendStatusEvent(),de=!1):(o.bConnected=!0,o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),l()(X,0)),!0},De=function(Ce,we){return++be,o.curPortIndex=be%a.ports.length,o.bConnected=!1,o.bConnectNumLimited&&be>=o.IMAXCONNECTCOUNT?(o.dcpStatus=o.EnumDCP_DetectStatus.NotInstalled,a._sendStatusEvent()):l()(function(){a._checkOldManagerVersion(V,De)},1e3),!0},fe=function(we){if(!(c.D.isArray(we)&&0<we.length&&we[0]))return!1;var Ve=we[0].split(",");return!!a._compareVersion(Ve,a.getManagerVersion())&&(a.detect.connectedResult=we,c.I.managerEnv.IfUpdateService?tt?l()(function(){a._checkUpdateZip(U,H,Z,X)},0):l()(function(){a._checkService(Se,rt)},0):(o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),l()(X,0)),!0)},je=function(Ce,we,Ve){var bt=_t<3?500:1e3;return--_t<0?(a._funShowUpgradeDialogWhenUpdateFailed(H,Z),l()(X,0)):l()(function(){a._checkManagerVersion($,fe,je)},bt),!0},Se=function(we){if(!(c.D.isArray(we)&&0<we.length&&we[0]))return F&&F(),!1;var Ve=we[0].split(",");return a._compareVersion(Ve,a.getServiceVersion())?(o.bConnected=!0,H&&H(),o.dcpStatus=o.EnumDCP_DetectStatus.CheckedService,a._sendStatusEvent(!1,we[0]),o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSucceed,a._sendStatusEvent(),l()(X,0)):l()(function(){a._checkUpdateZip(U,H,Z,X)},0),!0},rt=function(we,Ve,bt){return a._funUpdateFailed(H,Z,we,bt.status),l()(X,0),!0},function(we){if(!(c.D.isArray(we)&&0<we.length&&we[0]))return!1;var Ve=we[0];return c.D.isString(Ve)&&a._compareVersion(Ve.split(","),a.oldDWASMVer)?(a._setDefaultValuesFromServer(we),o.curPort=a.ports[be%a.ports.length],c.I.managerEnv.IfUpdateService?l()(function(){a._checkService(Se,rt)},0):(o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),l()(X,0))):(be=0,o.curPortIndex=0,de&&(F&&F(),L&&L(),de=!1),l()(function(){a._checkOldManagerVersion(V,De)},1e3)),!0});W&&W(),a._checkManagerVersion($,it,function Ce(we,Ve){return++be,o.curPortIndex=be%a.ports.length,o.bConnected=!1,de&&(F&&F(),L&&L(we,Ve),de=!1),o.bConnectNumLimited&&be>=o.IMAXCONNECTCOUNT?(be=0,o.curPortIndex=0,l()(function(){a._checkOldManagerVersion(V,De)},1e3)):l()(function(){a._checkManagerVersion($,it,Ce)},1e3),!0})},_checkUpdateZip:function(L,W,F,U,H){var Z,X,$,V,De,fe,je,Se=3;Z=function(tt,de,_t){var be=-1;return 0==(be=_t?_t.status:be)?(l()(function(){a._checkService(fe,je)},5e3),!0):(_t=a._getDSUpdateZipUrl(),o.dcpStatus=o.EnumDCP_DetectStatus.DownloadingZip,a._sendStatusEvent(),c.D.fetch(_t,{mode:"cors",dataType:"arraybuffer"}).then(V,X),!0)},X=function(tt){return o.dcpStatus=o.EnumDCP_DetectStatus.DownloadFailed,W&&W(),tt="The update package can't be downloaded. The error code is "+tt.httpCode+".",F&&F(!0,tt),a._sendStatusEvent(!0,tt),l()(U,0),!0},$=function(tt){if(!(c.D.isArray(tt)&&1<tt.length))return!1;if(1==tt[1])o.dcpStatus=o.EnumDCP_DetectStatus.VerifiedZip,a._sendStatusEvent(),o.dcpStatus=o.EnumDCP_DetectStatus.UpdatingService,a._sendStatusEvent(),l()(function(){a._checkService(fe,je)},5e3);else{var de=0;if(-2373==(de="exception"in tt?tt.exception:de))return a._funUpdateFailed(W,F,tt,200),l()(U,0),!0;l()(Z,0)}return!0},V=function(tt){c.I.dcp.loadZip(tt,1,function(de){var _t,be;try{c.D.isString(de)&&"result"in(be=c.D.parse(de.replace(/\0/g,"")))&&(_t=be.result)}catch{}c.D.isArray(_t)&&2<_t.length&&1==_t[2]?l()(function(){a._checkService(fe,je)},5e3):(a._funUpdateFailed(W,F,de,200),l()(U,0))},De)},De=function(tt,de,_t){var be=-1;return 0==(be=_t?_t.status:be)?l()(function(){a._checkService(fe,je)},5e3):(a._funUpdateFailed(W,F,tt,_t.status),l()(U,0)),!0},fe=function(tt){if(!(c.D.isArray(tt)&&0<tt.length&&tt[0]))return!1;var de=tt[0].split(",");return!!a._compareVersion(de,a.getServiceVersion())&&(o.bConnected=!0,W&&W(),o.dcpStatus=o.EnumDCP_DetectStatus.CheckedService,a._sendStatusEvent(!1,tt[0]),o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSucceed,a._sendStatusEvent(),l()(U,0),!0)},je=function(rt,tt){var de=Se<3?500:1e3;return--Se<0?(a._funShowUpgradeDialogWhenUpdateFailed(W,F),l()(U,0)):l()(function(){a._checkService(fe,je)},de),!0},L&&L(),o.dcpStatus=o.EnumDCP_DetectStatus.VerifyingZip,a._sendStatusEvent(),a._checkUpdateFile($,Z)},_getStatusString:function(L,W){var F,U="";return L==o.EnumDCP_DetectStatus.Init?"Getting manager version":L==o.EnumDCP_DetectStatus.Connected?"Getting manager version succeeded and the version is "+(U=W||U):L==o.EnumDCP_DetectStatus.DownloadingZip?"Downloading the update package":L==o.EnumDCP_DetectStatus.DownloadedZip?"Update package downloaded":L==o.EnumDCP_DetectStatus.DownloadFailed?(F=".","Update package failed to download"+(W&&0<W.length?("."==I()(W).call(W,W.length-1)&&(F="")," with the error: "+W):"")+F):L==o.EnumDCP_DetectStatus.CheckingManagerVer?"Getting manager version":L==o.EnumDCP_DetectStatus.CheckingServiceVer?"Getting service version":L==o.EnumDCP_DetectStatus.NotInstalled?"Dynamsoft Service Not Installed":L==o.EnumDCP_DetectStatus.UpdateSkipped?"Update skipped":L==o.EnumDCP_DetectStatus.CheckedService?"Getting service version succeeded and the version is "+(U=W||U):L==o.EnumDCP_DetectStatus.VerifyingZip?"Verifying the update package":L==o.EnumDCP_DetectStatus.VerifiedZip?"Update package verified":L==o.EnumDCP_DetectStatus.UpdatingService?"Updating the service":L==o.EnumDCP_DetectStatus.UpdateSucceed?"Update succeeded":L==o.EnumDCP_DetectStatus.UpdateFailed?(F=".","The update failed"+(W&&0<W.length?("."==I()(W).call(W,W.length-1)&&(F="")," with the error: "+W):"")+F):""},_sendStatusEvent:function(L,W){L=!!L,c.D.isFunction(S.OnGetServiceUpdateStatus)&&S.OnGetServiceUpdateStatus(L,o.dcpStatus,a._getStatusString(o.dcpStatus,W))},_getErr:function(L){var W,F="";try{c.D.isString(L)?(W=L.replace(/\0/g,""),W=c.D.parse(W)):L&&(W=L),"description"in W&&(F=W.description)}catch{}return F},_funShowUpgradeDialogWhenUpdateFailed:function(L,W){return o.bConnected=!0,o.dcpStatus=o.EnumDCP_DetectStatus.UpdateFailed,L&&L(),W&&W(),a._sendStatusEvent(!0),!0},_funUpdateFailed:function(L,W,F,U){var H;return o.bConnected=!0,o.dcpStatus=o.EnumDCP_DetectStatus.UpdateFailed,L&&L(),L=200==U?(H="The update failed.",a._getStatusString(o.dcpStatus,a._getErr(F))):H="The update failed. The error code is "+U,W&&W(!0,H),a._sendStatusEvent(!0,L),!0},getDSPath:function(L,W){var F,U,H=c.I.managerEnv.resourcesPath;return c.I.Lib.isString(H)&&0<H.length?"/"!=H[H.length-1]&&(H+="/"):H="Resources/",W||(F=c.I.navInfo,W=(U=c.I.navInfoSync).bMac?".pkg":U.bWin?".msi":F.bArm64?"-arm64.deb":F.bMips64?"-mips64el.deb":U.bLinux||U.bChromeOS||U.bHarmonyOS?".deb":".msi"),[H,"dist/DynamsoftServiceSetup",W].join("")},getLinuxHTML5DebPath:function(){return c.I.dcp.getDSPath(!1,".deb")},getLinuxHTML5RpmPath:function(){return c.I.dcp.getDSPath(!1,".rpm")},newWebsocket:function(L,W){var F,U=a.wsProtocol,H=window.MozWebSocket;if(void 0!==H)F=U?new H(L,U):new H(L);else{var Z=window.WebSocket;if(W){var X=window,$=parent;try{for(;X!=$&&$.WebSocket;)Z=$.WebSocket,X=$.window,$=$.parent}catch{Z=window.WebSocket}}F=U?new Z(L,U):new Z(L)}return F},_checkManagerVersionWS:function(L,W,F){var U=a._getDcpWsPreUrl(0),H={id:(new Date).getTime().toString(),method:"VersionInfo",version:"dwasm2_"+a._getModuleVer(),parameter:[]};return L&&(H.productKey=L),a.postStringDataByWS(U,c.D.stringify(H),function($){($=c.D.parse($))&&"result"in $?W($.result):F()},F)},getWsUrl:function(L,W){return[c.I.navInfoSync.bSSL?"wss://":"ws://",L,":",W,"/"].join("")},postStringDataByWS:function(L,W,F,U){var H=0,Z=a.newWebsocket(L,!1);Z.onopen=function(){1==Z.readyState?(Z.onopen=null,Z.send(W)):0==Z.readyState&&l()(Z.onopen,100)},Z.onmessage=function(X){var $=X.data;if("object"===(0,f.Z)($))return X=$=null,U(),void Z.close();X=$.replace(/\0/g,"");try{F(X),Z.close()}catch{c.D.log($),U(),Z.close()}$=null},Z.onerror=function(X){if(0==H&&c.I.navInfoSync.bEdge)return H++,void(Z=a.newWebsocket(L,!0));X&&c.D.log("websocket error: "+X),U(),Z.close()},Z.onclose=function(X){Z.onclose=null,Z.onerror=null,Z.onmessage=null}},getBinaryFileInfo:function(L,W){var F,U="GetBinaryFileInfo",H={id:(new Date).getTime().toString(),method:U,version:"dwasm2_"+a._getModuleVer(),parameter:[]},Z=(H=c.D.stringify(H),function($,V,De){var fe=a._getJSON($);fe?L(fe):W($,V,De)});if(c.I.DWT.ConnectWithSocket&&c.I.navInfoSync.bHTML5Edition)return F=a._getDcpWsPreUrl(0),a.postStringDataByWS(F,H,Z,W);F=[a._getPreUrl(0),a._getModuleName(),a._getModuleVer(),"/",U,"?type=1&dsver=",a.getServiceVersion().join(""),"&ts=",c.D.now()].join(""),c.D.ajax({method:"POST",url:F,timeout:500,data:H,onSuccess:Z,onError:W})},checkDcpV3:function(L,W,F){var U=!0,H=0,Z=function(V){return!!(c.D.isArray(V)&&0<V.length&&V[0])&&(a._setDefaultValuesFromServer(V),o.dcpStatus=o.EnumDCP_DetectStatus.UpdateSkipped,a._sendStatusEvent(),l()(F,0),!0)},X=function $(V,De){return++H,o.bConnectNumLimited&&H>=o.IMAXCONNECTCOUNT?(o.bConnected=!1,o.dcpStatus=o.EnumDCP_DetectStatus.NotInstalled,a._sendStatusEvent()):l()(function(){c.I.DWT.ConnectWithSocket&&c.I.navInfoSync.bHTML5Edition?a._checkManagerVersionWS(L,Z,$):a._checkManagerVersion(L,Z,$)},1e3),U&&(W&&W(V,De),U=!1),!0};o.curPortIndex=0,o.bConnected=!1,c.I.DWT.ConnectWithSocket&&c.I.navInfoSync.bHTML5Edition?a._checkManagerVersionWS(L,Z,X):a._checkManagerVersion(L,Z,X)}},C=M=G=r,c.D.domReady(function(){0<a.onReadys.length&&c.D.each(a.onReadys,function(L){c.D.isFunction(L)&&L()})}))},1383:function(e,a,o){o.r(a);var r=o(1695),u=(a=o(1255),r.I.DWT);(o={CertificateConfig:{},CustomizableDisplayInfo:{}}).RegisterEvent=function(s,f){return("OnWebTwainReady"===s&&r.D.isFunction(f)||"OnWebTwainInitMessage"===s&&r.D.isFunction(f))&&(r.I.DWT[s]=f),!0},r.D.mix(o,a.Sf),r.D.mix(o.CertificateConfig,a.LX),r.D.mix(o.CustomizableDisplayInfo,a.Vn),r.D.mix(o,u),r.I.DWT=o},7378:function(e,s,t){t.r(s);var r=t(1695),a=(s=t(4579),t.n(s)),o=(t(4393),r.I.DWT),u=(o.CloseDialog=function(){var I,c=r.D.install._dlgInstall;c&&(I=r.D.all(".dynamsoft-dialog-close"),r.D.each(I,function(_,h){r.D.removeEventListener(_,"click",o.CloseDialog)}),c.open&&c.close(),document.body.removeChild(c),r.D.install._dlgInstall=!1)},o.ShowDialog=function(I,c,_,h,y){var p;!1!==_&&(I={width:I,height:c,position:"absolute"},h?(p=['<div class="dynamsoft-dwt-dialog-body">',_,"</div>"].join(""),I.closeButton=!1):p=['<div class="ds-dwt-ui-showdlg">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',y?"":'<div class="dynamsoft-dialog-close"></div>',"</div>",_,"</div>","</div>"].join(""),y&&(I.closeButton=!1),o.ShowMessage(p,I))},o.ShowMessage=function(I,c){var _,h,y,p=r.D.install,m="ds-dwt-ui-dlg",T="ds-dwt-ui-dlg-wrap",C=screen.width,D=!0,S=0,M=!0,G=!0,U=0,L="fixed",W="Error",F=r.D.product.bActiveXEdition;c&&(_=c.width,h=c.height,c.seconds&&(S=c.seconds),c.headerStyle&&(U=c.headerStyle),!1===c.closeButton&&(M=!1),c.bAutoClose&&(y=c.bAutoClose,M=!0),0==c.bReadyClosed&&(D=!1),c.position&&(L=c.position),c.caption&&(W=c.caption)),_?C-10<_&&(_=C-10):_=600<C?600:C-10,h=h||"100%",1==U?I=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',M?'<div class="dynamsoft-dialog-close"></div>':"","</div>",I,"</div></div>"].join(""):2==U&&(I=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-ltsdlg-header"><span style="color:#FFF;line-height:35px;margin-left:15px">',W,"</span>",M?'<div class="dynamsoft-dialog-close"></div>':"","</div>",'<div class="dynamsoft-dwt-ltsdlg-body" style="padding:25px 50px 20px 50px;">',I,"</div></div>"].join("")),0==r.D.one("."+m).length?(c=document.createElement("div"),C=document.createElement("div"),U=document.createElement("div"),c.className=m,C.className=T,C.style.margin="auto",C.style.zIndex="9999",C.style.position="relative",C.style.border="0",y&&((W=document.createElement("div")).className="dynamsoft-dialog-close",C.insertBefore(W,C.firstChild),(m=document.createElement("div")).className="dynamsoft-dialog-closeTimer",m.style.width="100%",m.style.height="2px",m.style.marginTop="-2px",m.style.backgroundColor="#fe8e14",C.insertBefore(m,C.firstChild)),C.appendChild(U),U.innerHTML=I,c.appendChild(C),document.body.appendChild(c),p._dlgInstall=c,r.D.dialog.setup(p._dlgInstall,!1),r.I.navInfoSync.bIE&&((W=document.createElement("iframe")).frameborder="0",W.marginheight="0",W.marginwidth="0",W.style.border="0",W.style.backgroundColor="transparent",W.style.position="absolute",W.style.left=0,W.style.top=0,W.style.width="100%",W.style.height=document.body.clientHeight+"px",W.style.margin="0 auto",W.style.zIndex="9990",W.src=["javas","cript:",'""'].join(""),(m=r.D.one(".dynamsoft-backdrop"))&&0<m.length&&(m[0].innerHTML="",m[0].appendChild(W)))):G=!1,(U=r.D.one("."+T))&&U.getEL()&&(U[0].style.width=_+"px",U[0].style.height=r.D.isNumber(h)&&0<h?h+"px":"100%",G||r.D.each(U[0].childNodes,function(H){if("DIV"==H.tagName&&"dynamsoft-dialog-close"!=H.className&&"dynamsoft-dialog-closeTimer"!=H.className)return H.innerHTML=I,!1})),F&&(C=r.D.one(".dynamsoft-dialog"))&&C.getEL()&&(C.getEL().style.border="1px solid #999"),p._dlgInstall.open&&p._dlgInstall.close(),p._dlgInstall.showModal({position:L}),p._dlgInstall.bReadyClosed=D,M&&(c=r.D.all(".dynamsoft-dialog-close"),r.D.each(c,function(H,Z){r.D.addEventListener(H,"click",o.CloseDialog)}),0<c.length&&y&&0<S&&a()(r.D._zdgb_xkz_dhk,100))},o.OnWebTwainPreExecute=function(){r.I.Lib.detect.OnWebTwainPreExecute(r.I.DWT.IfConfineMaskWithinTheViewer)},o.OnWebTwainPostExecute=function(){r.I.Lib.detect.OnWebTwainPostExecute()},function(c,y){var h=r.I.Lib;if(y||r.I.DWT.CloseDialog(),(y=h.get(h.install._divDWTNonInstallContainerID))&&y.parentNode&&y.parentNode.removeChild(y),c&&h.isDOM(c)&&h.show(c),c&&h.isString(c))h.show(c);else{var p,m=r.I.DWT.Containers;if(m)for(p=0;p<m.length;p++)m[p].ContainerId&&h.show(m[p].ContainerId);if(m=r.I.DWT.DynamicContainers)for(p=0;p<m.length;p++)m[p].ContainerId&&h.show(m[p].ContainerId);m=null}""!=h.install._divDWTemessageContainer&&h.show(h.install._divDWTemessageContainer)}),f=(r.D.win.DCP_DWT_OnClickCloseInstall=u,t(9032),s=t(7711),t.n(s)),v=(t(6870),r.D._zdgb_xkz_dhk=function(){var I,c=r.D.install._dlgInstall;c&&(c=r.D.one(".dynamsoft-dialog-closeTimer",c)).getEL()&&(I=f()(c.getEL().style.width),--I<=0?r.I.DWT.CloseDialog():(c.getEL().style.width=I+"%",a()(r.D._zdgb_xkz_dhk,100)))},r.D.ShowLicenseDialog=r.I.DWT.ShowMessage,r.D.createLoadingBarContent=function(){var I=r.D.loaderBarClassName+"-noserver",c=r.D.loaderBarClassName+"-noserver-parent",_="",h=(""!=r.D.loaderBarBackgroundColor&&(_=";background:"+r.D.loaderBarBackgroundColor),[]);return h.push('<dialog class="dynamsoft-loadingMsg" closed="closed" style="top:30%">'),h.push(['<div class="',c,'" style="margin:0 auto',_,'">'].join("")),h.push(['<div class="',I,'" style="margin:0 auto',_,'">'].join("")),h.push(['<img src="',r.D.loaderBarSource,'" />'].join("")),h.push('</div><h3 class="dynamsoft-loadingMsg-msg"> </h3>'),h.push('<p class="dynamsoft-loadingMsg-desc"> </p>'),h.push("</div></dialog>"),h.join("")},r.D.openLoadingMsg=function(){var I,c;r.D.product.bHTML5Edition&&!r.D.dlgLoadingShowStatus&&r.I.DWT.showLoadingMsgDialog&&(I=r.I.DWT.UseLocalService,r.D.env.bMobile||!r.D.isUndefined(I)&&1!=I?(r.D.detect.hideMask(),r.D.dlgLoading||((I=r.D.one(".dynamsoft-loadingMsg"))&&I.getEL()&&I.remove(),(c=r.D.parseHTML(r.D.createLoadingBarContent()))&&0<c.length&&document.body.appendChild(c[0]),(I=r.D.one(".dynamsoft-loadingMsg"))&&I.getEL()&&(r.D.dlgLoading=I[0],r.D.dialog.setup(r.D.dlgLoading))),r.D.dlgLoading.showModal(),r.D.dlgLoadingShowStatus=!0):r.D.detect.showMask())},r.D.showLoadingMsg=function(I,c,_){var h,y;0!=r.D.dlgLoadingShowStatus&&(r.D.one(".dynamsoft-loadingMsg"),h=r.D.one(".dynamsoft-loadingMsg-msg"),y=r.D.one(".dynamsoft-loadingMsg-desc"),h&&h.getEL()&&h.html(c),y&&y.getEL()&&(r.D.env.bMobile&&(y.getEL().style.fontSize="1.4em"),y.html(_)))},r.D.closeLoadingMsg=function(I){r.D.log("closeLoadingMsg:"+I),r.D.detect.hideMask(),1==r.D.dlgLoadingShowStatus&&(r.D.dlgLoading&&r.D.dlgLoading.close(),r.D.dlgLoadingShowStatus=!1)},t(1255)),l=!0;r.D._funsAfterConfigLoaded=[],r.D._safePromptCustomMsg=function(I){var c,_;r.D.product.loadResourcePath?I&&r.D._funsAfterConfigLoaded.push(I):(l&&(_=r.I.DWT.CustomizableDisplayInfo,r.D.mix(c={},v.Vn),_&&(_.loaderBarClassName&&(c.loaderBarClassName=_.loaderBarClassName),_.loaderBarSource&&(c.loaderBarSource=_.loaderBarSource),_.loaderBarWidth&&(c.loaderBarWidth=_.loaderBarWidth),_.loaderBarHeight&&(c.loaderBarHeight=_.loaderBarHeight),_.errorMessages&&r.D.mix(c.errorMessages,_.errorMessages),_.generalMessages&&r.D.mix(c.generalMessages,_.generalMessages),_.customProgressText&&r.D.mix(c.customProgressText,_.customProgressText),_.buttons&&(_.buttons.titles&&r.D.mix(c.buttons.titles,_.buttons.titles),_.buttons.bShowAllButtons&&r.D.mix(c.buttons.bShowAllButtons,_.buttons.bShowAllButtons),_.buttons.visibility&&r.D.mix(c.buttons.visibility,_.buttons.visibility)),_.dialogText&&r.D.mix(c.dialogText,_.dialogText)),r.I.DWT.CustomizableDisplayInfo=c,l=!1),I&&I())}},5930:function(e,n,t){t.r(n),(n=t(1695).I.DWT).EnumDWT_PixelType={TWPT_BW:0,TWPT_GRAY:1,TWPT_RGB:2,TWPT_PALLETE:3,TWPT_CMY:4,TWPT_CMYK:5,TWPT_YUV:6,TWPT_YUVK:7,TWPT_CIEXYZ:8,TWPT_LAB:9,TWPT_SRGB:10,TWPT_SCRGB:11,TWPT_INFRARED:16},n.EnumDWT_BorderStyle={TWBS_NONE:0,TWBS_SINGLEFLAT:1,TWBS_SINGLE3D:2},n.EnumDWT_MessageType={TWQC_GET:1,TWQC_SET:2,TWQC_GETDEFAULT:4,TWQC_GETCURRENT:8,TWQC_RESET:16},n.EnumDWT_Cap={CAP_NONE:0,CAP_XFERCOUNT:1,ICAP_COMPRESSION:256,ICAP_PIXELTYPE:257,ICAP_UNITS:258,ICAP_XFERMECH:259,CAP_AUTHOR:4096,CAP_CAPTION:4097,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_TIMEDATE:4100,CAP_SUPPORTEDCAPS:4101,CAP_EXTENDEDCAPS:4102,CAP_AUTOFEED:4103,CAP_CLEARPAGE:4104,CAP_FEEDPAGE:4105,CAP_REWINDPAGE:4106,CAP_INDICATORS:4107,CAP_SUPPORTEDCAPSEXT:4108,CAP_PAPERDETECTABLE:4109,CAP_UICONTROLLABLE:4110,CAP_DEVICEONLINE:4111,CAP_AUTOSCAN:4112,CAP_THUMBNAILSENABLED:4113,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_CUSTOMDSDATA:4117,CAP_ENDORSER:4118,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTOMATICCAPTURE:4122,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_CLEARBUFFERS:4125,CAP_MAXBATCHBUFFERS:4126,CAP_DEVICETIMEDATE:4127,CAP_POWERSUPPLY:4128,CAP_CAMERAPREVIEWUI:4129,CAP_SERIALNUMBER:4132,CAP_PRINTER:4134,CAP_PRINTERENABLED:4135,CAP_PRINTERINDEX:4136,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSUFFIX:4139,CAP_LANGUAGE:4140,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERORDER:4142,CAP_REACQUIREALLOWED:4144,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERASIDE:4148,CAP_SEGMENTED:4149,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_MICRENABLED:4152,CAP_FEEDERPREP:4153,CAP_FEEDERPOCKET:4154,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_CUSTOMINTERFACEGUID:4156,ICAP_AUTOBRIGHT:4352,ICAP_BRIGHTNESS:4353,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_IMAGEFILEFORMAT:4364,ICAP_LAMPSTATE:4365,ICAP_LIGHTSOURCE:4366,ICAP_ORIENTATION:4368,ICAP_PHYSICALWIDTH:4369,ICAP_PHYSICALHEIGHT:4370,ICAP_SHADOW:4371,ICAP_FRAMES:4372,ICAP_XNATIVERESOLUTION:4374,ICAP_YNATIVERESOLUTION:4375,ICAP_XRESOLUTION:4376,ICAP_YRESOLUTION:4377,ICAP_MAXFRAMES:4378,ICAP_TILES:4379,ICAP_BITORDER:4380,ICAP_CCITTKFACTOR:4381,ICAP_LIGHTPATH:4382,ICAP_PIXELFLAVOR:4383,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_XSCALING:4388,ICAP_YSCALING:4389,ICAP_BITORDERCODES:4390,ICAP_PIXELFLAVORCODES:4391,ICAP_JPEGPIXELTYPE:4392,ICAP_TIMEFILL:4394,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_EXTIMAGEINFO:4399,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_FLIPROTATION:4406,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODETIMEOUT:4413,ICAP_ZOOMFACTOR:4414,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODETIMEOUT:4421,ICAP_FLASHUSED2:4422,ICAP_IMAGEFILTER:4423,ICAP_NOISEFILTER:4424,ICAP_OVERSCAN:4425,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICROTATE:4434,ICAP_JPEGQUALITY:4435,ICAP_FEEDERTYPE:4436,ICAP_ICCPROFILE:4437,ICAP_AUTOSIZE:4438,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_SUPPORTEDEXTIMAGEINFO:4446},n.EnumDWT_CapType={TWON_NONE:0,TWON_ARRAY:3,TWON_ENUMERATION:4,TWON_ONEVALUE:5,TWON_RANGE:6},n.EnumDWT_TransferMode={TWSX_NATIVE:0,TWSX_FILE:1,TWSX_MEMORY:2},n.EnumDWT_FileFormat={TWFF_TIFF:0,TWFF_PICT:1,TWFF_BMP:2,TWFF_XBM:3,TWFF_JFIF:4,TWFF_FPX:5,TWFF_TIFFMULTI:6,TWFF_PNG:7,TWFF_SPIFF:8,TWFF_EXIF:9,TWFF_PDF:10,TWFF_JP2:11,TWFF_JPN:12,TWFF_JPX:13,TWFF_DEJAVU:14,TWFF_PDFA:15,TWFF_PDFA2:16},n.EnumDWT_TIFFCompressionType={TIFF_AUTO:0,TIFF_NONE:1,TIFF_RLE:2,TIFF_FAX3:3,TIFF_T4:3,TIFF_FAX4:4,TIFF_T6:4,TIFF_LZW:5,TIFF_JPEG:7,TIFF_PACKBITS:32773},n.EnumDWT_InterpolationMethod={IM_NEARESTNEIGHBOUR:1,IM_BILINEAR:2,IM_BICUBIC:3,IM_BESTQUALITY:5},n.EnumDWT_ImageType={IT_BMP:0,IT_JPG:1,IT_TIF:2,IT_PNG:3,IT_PDF:4,IT_ALL:5,IT_MULTIPAGE_PDF:7,IT_MULTIPAGE_TIF:8,IT_J2K:14},n.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7},n.EnumDWT_ShowMode={SW_ACTIVE:0,SW_MAX:1,SW_MIN:2,SW_CLOSE:3,SW_IFLIVE:4},n.EnumDWT_CapValueType={TWTY_INT8:0,TWTY_INT16:1,TWTY_INT32:2,TWTY_UINT8:3,TWTY_UINT16:4,TWTY_int:5,TWTY_BOOL:6,TWTY_FIX32:7,TWTY_FRAME:8,TWTY_STR32:9,TWTY_STR64:10,TWTY_STR128:11,TWTY_STR255:12},n.EnumDWT_UnitType={TWUN_INCHES:0,TWUN_CENTIMETERS:1,TWUN_PICAS:2,TWUN_POINTS:3,TWUN_TWIPS:4,TWUN_PIXELS:5,TWUN_MILLIMETERS:6},n.EnumDWT_DUPLEX={TWDX_NONE:0,TWDX_1PASSDUPLEX:1,TWDX_2PASSDUPLEX:2},n.EnumDWT_CapLanguage={TWLG_DAN:0,TWLG_DUT:1,TWLG_ENG:2,TWLG_FCF:3,TWLG_FIN:4,TWLG_FRN:5,TWLG_GER:6,TWLG_ICE:7,TWLG_ITN:8,TWLG_NOR:9,TWLG_POR:10,TWLG_SPA:11,TWLG_SWE:12,TWLG_USA:13,TWLG_USERLOCALE:-1,TWLG_AFRIKAANS:14,TWLG_ALBANIA:15,TWLG_ARABIC:16,TWLG_ARABIC_ALGERIA:17,TWLG_ARABIC_BAHRAIN:18,TWLG_ARABIC_EGYPT:19,TWLG_ARABIC_IRAQ:20,TWLG_ARABIC_JORDAN:21,TWLG_ARABIC_KUWAIT:22,TWLG_ARABIC_LEBANON:23,TWLG_ARABIC_LIBYA:24,TWLG_ARABIC_MOROCCO:25,TWLG_ARABIC_OMAN:26,TWLG_ARABIC_QATAR:27,TWLG_ARABIC_SAUDIARABIA:28,TWLG_ARABIC_SYRIA:29,TWLG_ARABIC_TUNISIA:30,TWLG_ARABIC_UAE:31,TWLG_ARABIC_YEMEN:32,TWLG_BASQUE:33,TWLG_BYELORUSSIAN:34,TWLG_BULGARIAN:35,TWLG_CATALAN:36,TWLG_CHINESE:37,TWLG_CHINESE_HONGKONG:38,TWLG_CHINESE_PRC:39,TWLG_CHINESE_SINGAPORE:40,TWLG_CHINESE_SIMPLIFIED:41,TWLG_CHINESE_TAIWAN:42,TWLG_CHINESE_TRADITIONAL:43,TWLG_CROATIA:44,TWLG_CZECH:45,TWLG_DANISH:0,TWLG_DUTCH:1,TWLG_DUTCH_BELGIAN:46,TWLG_ENGLISH:2,TWLG_ENGLISH_AUSTRALIAN:47,TWLG_ENGLISH_CANADIAN:48,TWLG_ENGLISH_IRELAND:49,TWLG_ENGLISH_NEWZEALAND:50,TWLG_ENGLISH_SOUTHAFRICA:51,TWLG_ENGLISH_UK:52,TWLG_ENGLISH_USA:13,TWLG_ESTONIAN:53,TWLG_FAEROESE:54,TWLG_FARSI:55,TWLG_FINNISH:4,TWLG_FRENCH:5,TWLG_FRENCH_BELGIAN:56,TWLG_FRENCH_CANADIAN:3,TWLG_FRENCH_LUXEMBOURG:57,TWLG_FRENCH_SWISS:58,TWLG_GERMAN:6,TWLG_GERMAN_AUSTRIAN:59,TWLG_GERMAN_LUXEMBOURG:60,TWLG_GERMAN_LIECHTENSTEIN:61,TWLG_GERMAN_SWISS:62,TWLG_GREEK:63,TWLG_HEBREW:64,TWLG_HUNGARIAN:65,TWLG_ICELANDIC:7,TWLG_INDONESIAN:66,TWLG_ITALIAN:8,TWLG_ITALIAN_SWISS:67,TWLG_JAPANESE:68,TWLG_KOREAN:69,TWLG_KOREAN_JOHAB:70,TWLG_LATVIAN:71,TWLG_LITHUANIAN:72,TWLG_NORWEGIAN:9,TWLG_NORWEGIAN_BOKMAL:73,TWLG_NORWEGIAN_NYNORSK:74,TWLG_POLISH:75,TWLG_PORTUGUESE:10,TWLG_PORTUGUESE_BRAZIL:76,TWLG_ROMANIAN:77,TWLG_RUSSIAN:78,TWLG_SERBIAN_LATIN:79,TWLG_SLOVAK:80,TWLG_SLOVENIAN:81,TWLG_SPANISH:11,TWLG_SPANISH_MEXICAN:82,TWLG_SPANISH_MODERN:83,TWLG_SWEDISH:12,TWLG_THAI:84,TWLG_TURKISH:85,TWLG_UKRANIAN:86,TWLG_ASSAMESE:87,TWLG_BENGALI:88,TWLG_BIHARI:89,TWLG_BODO:90,TWLG_DOGRI:91,TWLG_GUJARATI:92,TWLG_HARYANVI:93,TWLG_HINDI:94,TWLG_KANNADA:95,TWLG_KASHMIRI:96,TWLG_MALAYALAM:97,TWLG_MARATHI:98,TWLG_MARWARI:99,TWLG_MEGHALAYAN:100,TWLG_MIZO:101,TWLG_NAGA:102,TWLG_ORISSI:103,TWLG_PUNJABI:104,TWLG_PUSHTU:105,TWLG_SERBIAN_CYRILLIC:106,TWLG_SIKKIMI:107,TWLG_SWEDISH_FINLAND:108,TWLG_TAMIL:109,TWLG_TELUGU:110,TWLG_TRIPURI:111,TWLG_URDU:112,TWLG_VIETNAMESE:113},n.EnumDWT_CapSupportedSizes={TWSS_NONE:0,TWSS_A4LETTER:1,TWSS_B5LETTER:2,TWSS_USLETTER:3,TWSS_USLEGAL:4,TWSS_A5:5,TWSS_B4:6,TWSS_B6:7,TWSS_USLEDGER:9,TWSS_USEXECUTIVE:10,TWSS_A3:11,TWSS_B3:12,TWSS_A6:13,TWSS_C4:14,TWSS_C5:15,TWSS_C6:16,TWSS_4A0:17,TWSS_2A0:18,TWSS_A0:19,TWSS_A1:20,TWSS_A2:21,TWSS_A4:1,TWSS_A7:22,TWSS_A8:23,TWSS_A9:24,TWSS_A10:25,TWSS_ISOB0:26,TWSS_ISOB1:27,TWSS_ISOB2:28,TWSS_ISOB3:12,TWSS_ISOB4:6,TWSS_ISOB5:29,TWSS_ISOB6:7,TWSS_ISOB7:30,TWSS_ISOB8:31,TWSS_ISOB9:32,TWSS_ISOB10:33,TWSS_JISB0:34,TWSS_JISB1:35,TWSS_JISB2:36,TWSS_JISB3:37,TWSS_JISB4:38,TWSS_JISB5:2,TWSS_JISB6:39,TWSS_JISB7:40,TWSS_JISB8:41,TWSS_JISB9:42,TWSS_JISB10:43,TWSS_C0:44,TWSS_C1:45,TWSS_C2:46,TWSS_C3:47,TWSS_C7:48,TWSS_C8:49,TWSS_C9:50,TWSS_C10:51,TWSS_USSTATEMENT:52,TWSS_BUSINESSCARD:53,TWSS_MAXSIZE:54},n.EnumDWT_CapFeederAlignment={TWFA_NONE:0,TWFA_LEFT:1,TWFA_CENTER:2,TWFA_RIGHT:3},n.EnumDWT_CapFeederOrder={TWFO_FIRSTPAGEFIRST:0,TWFO_LASTPAGEFIRST:1},n.EnumDWT_CapPrinter={TWPR_IMPRINTERTOPBEFORE:0,TWPR_IMPRINTERTOPAFTER:1,TWPR_IMPRINTERBOTTOMBEFORE:2,TWPR_IMPRINTERBOTTOMAFTER:3,TWPR_ENDORSERTOPBEFORE:4,TWPR_ENDORSERTOPAFTER:5,TWPR_ENDORSERBOTTOMBEFORE:6,TWPR_ENDORSERBOTTOMAFTER:7},n.EnumDWT_CapPrinterMode={TWPM_SINGLESTRING:0,TWPM_MULTISTRING:1,TWPM_COMPOUNDSTRING:2},n.EnumDWT_CapBitdepthReduction={TWBR_THRESHOLD:0,TWBR_HALFTONE:1,TWBR_CUSTHALFTONE:2,TWBR_DIFFUSION:3},n.EnumDWT_CapBitOrder={TWBO_LSBFIRST:0,TWBO_MSBFIRST:1},n.EnumDWT_CapFilterType={TWFT_RED:0,TWFT_GREEN:1,TWFT_BLUE:2,TWFT_NONE:3,TWFT_WHITE:4,TWFT_CYAN:5,TWFT_MAGENTA:6,TWFT_YELLOW:7,TWFT_BLACK:8},n.EnumDWT_CapFlash={TWFL_NONE:0,TWFL_OFF:1,TWFL_ON:2,TWFL_AUTO:3,TWFL_REDEYE:4},n.EnumDWT_CapFlipRotation={TWFR_BOOK:0,TWFR_FANFOLD:1},n.EnumDWT_CapImageFilter={TWIF_NONE:0,TWIF_AUTO:1,TWIF_LOWPASS:2,TWIF_BANDPASS:3,TWIF_HIGHPASS:4,TWIF_TEXT:3,TWIF_FINELINE:4},n.EnumDWT_CapLightPath={TWLP_REFLECTIVE:0,TWLP_TRANSMISSIVE:1},n.EnumDWT_CapLightSource={TWLS_RED:0,TWLS_GREEN:1,TWLS_BLUE:2,TWLS_NONE:3,TWLS_WHITE:4,TWLS_UV:5,TWLS_IR:6},n.EnumDWT_MagType={TWMD_MICR:0,TWMD_RAW:1,TWMD_INVALID:2},n.EnumDWT_CapNoiseFilter={TWNF_NONE:0,TWNF_AUTO:1,TWNF_LONEPIXEL:2,TWNF_MAJORITYRULE:3},n.EnumDWT_CapORientation={TWOR_ROT0:0,TWOR_ROT90:1,TWOR_ROT180:2,TWOR_ROT270:3,TWOR_PORTRAIT:0,TWOR_LANDSCAPE:3,TWOR_AUTO:4,TWOR_AUTOTEXT:5,TWOR_AUTOPICTURE:6},n.EnumDWT_CapOverscan={TWOV_NONE:0,TWOV_AUTO:1,TWOV_TOPBOTTOM:2,TWOV_LEFTRIGHT:3,TWOV_ALL:4},n.EnumDWT_CapPixelFlavor={TWPF_CHOCOLATE:0,TWPF_VANILLA:1},n.EnumDWT_CapPlanarChunky={TWPC_CHUNKY:0,TWPC_PLANAR:1},n.EnumDWT_DataSourceStatus={TWDSS_CLOSED:0,TWDSS_OPENED:1,TWDSS_ENABLED:2,TWDSS_ACQUIRING:3},n.EnumDWT_FitWindowType={enumFitWindow:0,enumFitWindowHeight:1,enumFitWindowWidth:2},n.EnumDWT_PlatformType={enumUnknown:-1,enumWindow:0,enumMac:1,enumLinux:2,enumEmbed:3,enumChromeOS:4,enumHarmonyOS:5},n.EnumDWT_UploadDataFormat={Binary:0,Base64:1},n.EnumDWT_MouseShape={Default:0,Hand:1,Crosshair:2,Zoom:3,NWResize:4,EResize:5,NResize:6,Resize:7,Move:8},n.EnumDWT_Language={English:0,French:1,Arabic:2,Spanish:3,Portuguese:4,German:5,Italian:6,Russian:7,Chinese:8},n.EnumDWT_InitMsg={Info:1,Error:2,NotInstalledError:3,DownloadError:4,DownloadNotRestartError:5},n.EnumDWT_Driver={TWAIN:0,ICA:3,SANE:3,TWAIN_AND_ICA:4,TWAIN_AND_TWAIN64:4,TWAIN64:5},n.EnumDWT_CompressionType={TWCP_NONE:0,TWCP_PACKBITS:1,TWCP_GROUP31D:2,TWCP_GROUP31DEOL:3,TWCP_GROUP32D:4,TWCP_GROUP4:5,TWCP_JPEG:6,TWCP_LZW:7,TWCP_JBIG:8,TWCP_PNG:9,TWCP_RLE4:10,TWCP_RLE8:11,TWCP_BITFIELDS:12,TWCP_ZIP:13,TWCP_JPEG2000:14},n.EnumDWT_SelectionMode={Single:0,Multiple:1},n.EnumDWT_ConfirmExitType={Cancel:0,Exit:1,SaveAndExit:2}},9435:function(e,r,t){t.r(r),r=t(5683);var a=t.n(r),o=t(1695);function u(s){return o.I.Lib.isString(s)?s:("errorMessage"in s&&(f=s.errorMessage),"message"in s&&(f=s.message),o.I.Lib.isString(f)||(f="message"in f?f.message:""),"errorCode"in s&&-1==a()(f).call(f,"(")&&(f+="("+s.errorCode+")"),"code"in s&&-1==a()(f).call(f,"(")&&(f+="("+s.code+")"),f);var f}o.I.DWT.EnumDWT_Error={ModuleNotExists:-2371},o.D.Errors={OutOfRange:function(s){s._errorCode=-1010,s._errorString="Data parameter out of supported range."},InvalidIndex:function(s){s._errorCode=-1033,s._errorString="Invalid index."},InvalidValue:function(s){s._errorCode=-1034,s._errorString="Invalid value."},NoImage:function(s){s._errorCode=-1035,s._errorString="There is no image."},UnrecognizedExt:function(s){s._errorCode=-1110,s._errorString="Unrecognized file extension."},LoadTextPDFButSetImageOnly:function(s){s._errorCode=-1119,s._errorString="The text-based PDF file was not imported correctly because ConvertMode was set to CM_IMAGEONLY, which means PDF Rasterizer is turned off. Please set ConvertMode to Dynamsoft.DWT.EnumDWT_ConvertMode.CM_AUTO to enable it."},SourceHasNothingToCapture:function(s){s._errorCode=-1029,s._errorString="Source has nothing to capture."},bImageOnlyError_NotPurelyPDF:function(s){return-1416==s},MustUpgradeService:function(s){s._errorCode=-2207,s._errorString="The Dynamsoft Service installed on your computer is outdated and no longer works with the JavaScript code on the website."},Server_Restarted:function(s){s._errorCode=-2208,s._errorString="The connection with the local Dynamsoft Service encountered a problem and has been reset."},HTML5NotSupport:function(s){s._errorCode=-2209,s._errorString="The HTML5 edition does not support this method or property."},CannotCallUIMethodWhenNotBindDefaultViewer:function(s){s._errorCode=-2210,s._errorString="You cannot call this method on this WebTwain instance because it does not use the default viewer."},HttpServerCannotEmpty:function(s){s._errorCode=-2300,s._errorString="Http upload error: the HTTP Server name/ip cannot be empty."},NetworkError:function(s){s._errorCode=-2301,s._errorString="Network error."},InvalidResultFormat:function(s){s._errorCode=-2302,s._errorString="The result format is invalid."},UploadError:function(s,f,v,l){f?(s._errorCode=-2303,s._errorString="Upload cancelled."):(s._errorCode=-2003,l&&0<l||v?(f=["HTTP process error: "],v&&f.push(v),l&&0<l&&f.push(" ("+l+")"),s._errorString=f.join("")+"."):s._errorString="HTTP process error.")},HttpDownloadUrlError:function(s){s._errorCode=-2304,s._errorString="Http download error: the url is invalid."},HttpDownloadError:function(s,f,v,l){f?(s._errorCode=-2305,s._errorString="User cancelled the operation."):(s._errorCode=-2003,l&&0<l||v?(f=["HTTP process error: "],v&&f.push(v),l&&0<l&&f.push(" ("+l+")"),s._errorString=f.join("")+"."):s._errorString="HTTP process error.")},UploadFileCannotEmpty:function(s){s._errorCode=-2306,s._errorString="Upload Error: the upload file cannot be empty."},InvalidWidthOrHeight:function(s){s._errorCode=-2307,s._errorString="The width or height you entered is invalid."},Server_Invalid:function(s){0==s._errorCode&&(s._errorCode=-2308,s._errorString="The local Dynamsoft Service has been stopped.")},InvalidLocalFilename:function(s,f){s._errorCode=-2309,s._errorString="The LocalFile is empty in the name "+f+" Function."},BarCode_InvalidIndex:function(s,f){s._errorCode=-2310,s._errorString="The index is out of range."},BarCode_InvalidRemoteFilename:function(s){s._errorCode=-2311,s._errorString="The RemoteFile field is empty in the Barcode Download Function."},ImageFileLengthCannotZero:function(s){s._errorCode=-2312,s._errorString="The file length is empty."},UploadExceededMaxSize:function(s){s._errorCode=-2313,s._errorString="The size of the images you are about to upload has exceeded the limit."},ParameterCannotEmpty:function(s){s._errorCode=-2314,s._errorString="The parameter cannot be empty."},Webcam_InvalidIndex:function(s,f){s._errorCode=-2315,s._errorString="The index is out of range."},Webcam_InvalidRemoteFilename:function(s){s._errorCode=-2316,s._errorString="The RemoteFile field is empty in the Webcam Download Function."},Pdf_InvalidRemoteFilename:function(s){s._errorCode=-2317,s._errorString="The RemoteFile field is empty in the Pdf Download Function."},InvalidDestination:function(s){s._errorCode=-2318,s._errorString="Invalid destination file."},InvalidSourceFile:function(s){s._errorCode=-2319,s._errorString="Invalid source file."},InvalidFile:function(s){s._errorCode=-2320,s._errorString="Invalid file."},hasLicenseError:function(s){return-2348<=s._errorCode&&s._errorCode<=-2325},OCR_InvalidIndex:function(s,f){s._errorCode=-2321,s._errorString="The index is out of range."},OCR_InvalidLeftOrTopOrRightOrBottom:function(s){s._errorCode=-2322,s._errorString="The left or top or right or bottom you entered is invalid."},OCR_InvalidOutputFormat:function(s){s._errorCode=-2323,s._errorString="The OCR output format is not supported."},OCR_InvalidPageSetMode:function(s){s._errorCode=-2324,s._errorString="The OCR page set mode is not supported."},LicenseEmptyOrInvalid:function(s){s._errorCode=-2325,o.I.Lib.License.isLTS()?(s._errorString="The license is invalid.",o.I.Lib.Errors.SetLTSException(s)):s._errorString="The current product key is empty or invalid."},LicenseExpired:function(s,f){s._errorCode=-2326;var v="";f&&""!=f&&-1==a()(f).call(f,"on")&&(v=" on "+f),o.I.Lib.License.isLTS()?(s._errorString="The license has expired"+v+".",o.I.DWT.lcexp().then(function(){s._errorString=o.I.DWT.licenseException.message})):s._errorString="The current product key has expired"+v+", please contact the site administrator."},LicenseNoChrome:function(s){s._errorCode=-2327,s._errorString="The current product key does not support Chrome, please contact the site administrator."},LicenseNoFirefox:function(s){s._errorCode=-2328,s._errorString="The current product key does not support Firefox, please contact the site administrator."},LicenseNoIE:function(s){s._errorCode=-2329,s._errorString="The current product key does not support IE, please contact the site administrator."},LicenseNoEdge:function(s){s._errorCode=-2330,s._errorString="The current product key does not support Edge, please contact the site administrator."},LicenseNoSafari:function(s){s._errorCode=-2392,s._errorString="The current product key does not support Safari, please contact the site administrator."},LicenseNoCore:function(s){s._errorCode=-2333,o.I.Lib.License.isLTS()?(s._errorString="The license for the module twain is not found or has expired.",o.I.Lib.Errors.SetLTSException(s)):s._errorString="The current product key is missing the core license, please contact the site administrator."},LicenseNoWebcam:function(s){s._errorCode=-2338,o.I.Lib.License.isLTS()?(s._errorString="The license for the module direct show is not found or has expired.",o.I.Lib.Errors.SetLTSException(s)):s._errorString="The current product key does not support Webcam, please contact the site administrator."},LicenseNoPDF:function(s){s._errorCode=-2339,o.I.Lib.License.isLTS()?(s._errorString="The license for the module pdf rasterizer is not found or has expired.",o.I.Lib.Errors.SetLTSException(s)):s._errorString="The current product key does not support pdf rasterizer, please contact the site administrator."},LicenseNoOCR:function(s){s._errorCode=-2340,o.I.Lib.License.isLTS()?(s._errorString="The license for the module ocr is not found or has expired.",o.I.Lib.Errors.SetLTSException(s)):s._errorString="The current product key does not support OCR, please contact the site administrator."},LicenseNoOCRPro:function(s){s._errorCode=-2341,o.I.Lib.License.isLTS()?(s._errorString="The license for the module ocr pro is not found or has expired.",o.I.Lib.Errors.SetLTSException(s)):s._errorString="The current product key does not support OCR pro, please contact the site administrator."},LicenseBadDomain:function(s){s._errorCode=-2342,s._errorString="The domain of your current site does not match the domain bound in the current product key, please contact the site administrator."},LicenseNotSupportBorwser:function(s){s._errorCode=-2343,s._errorString="The current product key does not support your browser, please contact the site administrator."},LicenseNotSupportWindows:function(s){s._errorCode=-2344,s._errorString="The current product key does not support Windows OS, please contact the site administrator."},LicenseNotSupportMAC:function(s){s._errorCode=-2345,s._errorString="The current product key does not support MAC OS, please contact the site administrator."},LicenseNotSupportLinux:function(s){s._errorCode=-2346,s._errorString="The current product key does not support Linux OS, please contact the site administrator."},LicenseNotSupportOS:function(s){s._errorCode=-2347,s._errorString="The current product key does not support your OS, please contact the site administrator."},LicenseLower:function(s){s._errorCode=-2348,s._errorString="The current product key is invalid because it's generated with the licenses of a different major version."},BarcodeLicenseEmpty:function(s){s._errorCode=-2349,s._errorString="The current product key does not include a license for reading barcode, please contact the site administrator."},IndicesCannotEmpty:function(s){s._errorCode=-2350,s._errorString="The indices cannot be empty."},UploadIndexMoreThanOne:function(s){s._errorCode=-2351,s._errorString="You cannot upload more than one image when the format is BMP, JPG or PNG"},IndicesOutOfRange:function(s){s._errorCode=-2352,s._errorString="The indices are out of range."},HttpHeaderNotAllowed:function(s){s._errorCode=-2353,s._errorString="The header name being used is a protected keyword and is not allowed."},HttpHeaderIsEmpty:function(s){s._errorCode=-2354,s._errorString="The header name cannot be empty."},HttpHeaderIsNull:function(s){s._errorCode=-2355,s._errorString="The header name cannot be null."},HttpHeaderIsUndefined:function(s){s._errorCode=-2356,s._errorString="The header name cannot be undefined."},HttpHeaderIsInvalid:function(s){s._errorCode=-2357,s._errorString="The header name you entered is invalid."},IndicesNotArray:function(s){s._errorCode=-2358,s._errorString="The type of the parameter indices must be an Array."},IndexOutOfRange:function(s){s._errorCode=-2359,s._errorString="The index is out of range."},IndexNullOrUndefined:function(s){s._errorCode=-2360,s._errorString="The index is null or undefined."},ConvertBase64IndexMoreThanOne:function(s){s._errorCode=-2361,s._errorString="You cannot convert more than one image to base64 string when the format is BMP, JPG or PNG."},InvalidImageType:function(s){s._errorCode=-2362,s._errorString="The image type is not supported."},InvalidDataFormat:function(s){s._errorCode=-2363,s._errorString="The data format is not supported."},InvalidUploadInSegments:function(s){s._errorCode=-2364,s._errorString="Please use a Boolean value for the parameter bUploadInSegments."},InvalidUrl:function(s){s._errorCode=-2365,s._errorString="The url is invalid."},ConvertBase64Failed:function(s){s._errorCode=-2366,s._errorString="Converting images to a base64 string failed."},InvalidSegmentUploadThreshold:function(s){s._errorCode=-2367,s._errorString="Invalid value for the parameter segmentUploadThreshold."},InvalidModuleSize:function(s){s._errorCode=-2368,s._errorString="Invalid value for the parameter moduleSize."},LicenseNotSupportWasm:function(s){s._errorCode=-2369,s._errorString="The current product key is missing the WASM core license, please contact the site administrator."},LicenseNotSupportPdfRWasm:function(s){s._errorCode=-2370,o.I.Lib.License.isLTS()?(s._errorString="The license for the module pdf rasterizer is not found or has expired.",o.I.Lib.Errors.SetLTSException(s)):s._errorString="The current product key does not support Pdf Rasterizer Wasm, please contact the site administrator."},WebTwainModuleNotExist:function(s){s._errorCode=o.I.DWT.EnumDWT_Error.ModuleNotExists,s._errorString="Dynamic Web TWAIN scanner module is not installed and it is also missing on the server, please contact the site administrator."},ConvertBinaryIndexMoreThanOne:function(s){s._errorCode=-2372,s._errorString="You cannot convert more than one image to binary when the format is BMP, JPG or PNG."},Overlay_InvalidLeftOrTopOrRightOrBottom:function(s){s._errorCode=-2375,s._errorString="The left or top or right or bottom you entered is invalid."},GenerateURL_InvalidRetFromServer:function(s){s._errorCode=-2376,s._errorString="The generate url failed."},ImageCaptureDriverTypeError:function(s){s._errorCode=-2377,s._errorString="Failed to set Image Capture Driver Type."},InvalidTiffTagError:function(s){s._errorCode=-2378,s._errorString="Invalid value for the tiff tag code."},OCR_InvalidRemoteFilename:function(s){s._errorCode=-2379,s._errorString="The RemoteFile field is empty in the OCR Download Function."},Uploader_ModuleError:function(s){s._errorCode=-2380,s._errorString="Please make sure the Uploader Module has been installed."},ScanUploader_InvalidScanSetup:function(s){s._errorCode=-2381,s._errorString="scanSetup is invalid."},ScanUploader_InvalidTransferMode:function(s){s._errorCode=-2382,s._errorString="Scanner setup error: Invalid Transfer Mode."},ScanUploader_InvalidFileXfer:function(s){s._errorCode=-2383,s._errorString="Scanner setup error: fileXfer is invalid."},ScanUploader_InvalidFileXferFilename:function(s){s._errorCode=-2384,s._errorString="Scanner setup error: Invalid fileName in fileXfer."},ScanUploader_InvalidFileXferFileFormat:function(s){s._errorCode=-2385,s._errorString="Scanner setup error: Invalid fileFormat in fileXfer."},ScanUploader_InvalidHttpParams:function(s){s._errorCode=-2386,s._errorString="Output setup error: Invalid httpParams in outputSetup."},ScanUploader_InvalidHttpType:function(s){s._errorCode=-2387,s._errorString="Output setup error: Invalid type in outputSetup."},ScanUploader_InvalidHttpUrl:function(s){s._errorCode=-2388,s._errorString="Output setup error: Invalid url in outputSetup.httpParams."},ScanUploader_InvalidHttpFilename:function(s){s._errorCode=-2389,s._errorString="Output setup error: Invalid fileName in outputSetup.httpParams."},ScanUploader_InvalidOutputFormat:function(s){s._errorCode=-2390,s._errorString="Output setup error: Invalid format in outputSetup."},InvalidImageID:function(s){s._errorCode=-1034,s._errorString="Invalid image ID."},InvalidEventName:function(s){s._errorCode=-2391,s._errorString="Invalid event name."},ConvertBlobIsEmpty:function(s){s._errorCode=-2393,s._errorString="Failed to convert the data to blob."},InvalidTagName:function(s){s._errorCode=-2394,s._errorString="Invalid tag name."},WebTwainModuleDownloadFailure:function(s){s._errorCode=-2395,s._errorString="The module for Dynamic Web TWAIN has failed to download."},LicenseIsFuture:function(s,f){s._errorCode=-2396,s._errorString="The current product key is invalid, please contact the site administrator."},ServiceNotSupport:function(s,f){s._errorCode=-2397,s._errorString=f+" doesn't work under current settings."},MobileNotSupport:function(s,f){s._errorCode=-2400,s._errorString=f+" doesn't work under current settings."},LoadImageFailed:function(s,f){s._errorCode=-2401,s._errorString="Failed to load image: "+u(f)},RotateFailed:function(s,f){s._errorCode=-2402,s._errorString="Failed to rotate image: "+u(f)},FlipFailed:function(s,f){s._errorCode=-2403,s._errorString="Failed to flip image: "+u(f)},MirrorFailed:function(s,f){s._errorCode=-2404,s._errorString="Failed to mirror image: "+u(f)},EraseFailed:function(s,f){s._errorCode=-2405,s._errorString="Failed to erase image: "+u(f)},InvertFailed:function(s,f){s._errorCode=-2406,s._errorString="Failed to invert image: "+u(f)},SaveImageFailed:function(s,f){s._errorCode=-2407,s._errorString="Failed to save image: "+u(f)},ChangeImageSizeFailed:function(s,f){s._errorCode=-2408,s._errorString="Failed to change image size: "+u(f)},CropFailed:function(s,f){s._errorCode=-2409,s._errorString="Failed to crop image: "+u(f)},SkewAngleFailed:function(s,f){s._errorCode=-2410,s._errorString="Failed to skew angle: "+u(f)},ConvertToGrayScaleFailed:function(s,f){s._errorCode=-2411,s._errorString="Failed to convert to gray scale: "+u(f)},ConvertToBWScaleFailed:function(s,f){s._errorCode=-2412,s._errorString="Failed to convert to black and white scale: "+u(f)},SetDPIFailed:function(s,f){s._errorCode=-2413,s._errorString="Failed to set dpi: "+u(f)},SetImageWidthFailed:function(s,f){s._errorCode=-2414,s._errorString="Failed to set image width: "+u(f)},GetLicenseInfoFailed:function(s,f){s._errorCode=-2415,s._errorString="Failed to get license info: "+u(f)},InvalidParameter:function(s){s._errorCode=-2416,s._errorString="Invalid parameter type."},MobileServer_InvalidLeftOrTopOrRightOrBottom:function(s){s._errorCode=-2417,s._errorString="The left or top or right or bottom you entered is invalid."},MobileServer_InvalidWidth:function(s){s._errorCode=-2418,s._errorString="The width you entered is invalid."},MobileServer_InvalidHeight:function(s){s._errorCode=-2419,s._errorString="The height you entered is invalid."},MobileServer_InvalidXResolution:function(s){s._errorCode=-2420,s._errorString="The x resolution you entered is invalid."},MobileServer_InvalidYResolution:function(s){s._errorCode=-2421,s._errorString="The y resolution you entered is invalid."},MobileServer_InvalidImage:function(s){s._errorCode=-2422,s._errorString="The image source is invalid."},MobileServer_InvalidIndex:function(s){s._errorCode=-2423,s._errorString="The index is invalid."},GetMD5Failed:function(s,f){s._errorCode=-2424,s._errorString="Failed to get MD5: "+u(f)},ConvertFromBase64Failed:function(s){s._errorCode=-2425,s._errorString="Converting image from a base64 string failed."},LicenseTrialFullMixed:function(s){s._errorCode=-2426,s._errorString="You have used a full license with a trial license which is not permitted. Please check and update Dynamsoft.DWT.ProductKey."},BarcodeReaderError:function(s,f){s._errorCode=-2427,s._errorString=f},TiffTagCountExceedError:function(s){s._errorCode=-2428,s._errorString="Tiff tag count has exceeded the limit."},SelectSourceMustAsync:function(s){s._errorCode=-2429,s._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when ImageCaptureDriverType is set to TWAIN_AND_ICA or TWAIN_AND_TWAIN64."},HttpLicenseInvalid:function(s){s._errorCode=-2430,s._errorString="The current product key is invalid."},LicenseNotSupportWebcamWasm:function(s){s._errorCode=-2431,s._errorString="The current product key does not support Webcam Wasm, please contact the site administrator."},InvalidParameterInCallback:function(s){s._errorCode=-2432,s._errorString="Invalid parameter."},ActiveXNotSupport:function(s){s._errorCode=-2433,s._errorString="The ActiveX edition does not support this method or property."},DetectCallbackErr:function(s){s._errorCode=-2434},PerspectiveCallback:function(s){s._errorCode=-2435},webtwain_id_not_string:function(){return'Error: The "WebTwainId" is not a string.'},container_id_not_string:function(){return'Error: The argument you passed to the parameter "conatinerId" is not a string.'},container_id_not_exist:function(s){return'Error: The element specified by the id "'+s+"\" doesn't exist."},StartScanFailed:function(s){s._errorCode=-2436,s._errorString="Operation in progress, please try again when the current operation has finished."},ImageEditorOpenCannotPlayVideo:function(s){s._errorCode=-2437,s._errorString="The video can not be played while the Image Editor is open."},SelectSourceMustAsyncWhenRemote:function(s){s._errorCode=-2438,s._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when the scanning is done on a remote machine."},CannotBindViewerWhenNoViewerJS:function(s){s._errorCode=-2439,s._errorString="You cannot call the method bindViewer() when Dynamsoft.DWT.UseDefaultViewer is set to false."},LongKeyShortKeyMixed:function(s){s._errorCode=-2444,s._errorString="You can only specify the license once and have already specified it with the API ProductKey."},ImageEditorExist:function(s){s._errorCode=-2500,s._errorString="An ImageEditor already exists."},ThumbnailViewerExist:function(s){s._errorCode=-2501,s._errorString="A ThumbnailViewer already exists."},CustomElementExist:function(s){s._errorCode=-2502,s._errorString="A CustomElement already exists."},ImageEditorNotExist:function(s){s._errorCode=-2503,s._errorString="This ImageEditor doesn't exist."},ImageEditorDispose:function(s){s._errorCode=-2504,s._errorString="The ImageEditor object has been disposed."},ThumbnailViewerNotExist:function(s){s._errorCode=-2505,s._errorString="This ThumbnailViewer doesn't exist."},ThumbnailViewerDispose:function(s){s._errorCode=-2506,s._errorString="The ThumbnailViewer object has been disposed."},CustomElementNotExist:function(s){s._errorCode=-2507,s._errorString="This CustomElement doesn't exist."},CustomElementDispose:function(s){s._errorCode=-2508,s._errorString="The CustomElement object has been disposed."},EventNotExist:function(s){s._errorCode=-2509,s._errorString="The specified event doesn't exist."},CallbackNotAFunction:function(s){s._errorCode=-2510,s._errorString="The callback is not a function."},ElementRequired:function(s){s._errorCode=-2511,s._errorString="Parameter 'element' is required."},ElementNotExist:function(s){s._errorCode=-2512,s._errorString="Parameter 'element' doesn't exist."},Destroyed:function(s){s._errorCode=-2513,s._errorString="The WebTwain instance has been destroyed and can not be used anymore."},InvalidPropertyValue:function(s){s._errorCode=-2514,s._errorString="Invalid property value. "},HostNotAvailable:function(s,f){s._errorCode=-2515,s._errorString="The Dynamsoft Service is not configured correctly on "+f+". Please check."},CameraRequired:function(s){s._errorCode=-2516,s._errorString="The camera addon is required."},OldTagNameRequired:function(s){s._errorCode=-2517,s._errorString="Old tag name is required."},NewTagNameRequired:function(s){s._errorCode=-2518,s._errorString="New tag name is required."},CursorInvalidMode:function(s){s._errorCode=-2519,s._errorString="The current mode does not support setting the cursor to zoom-in."},SystemExceptionError:function(s,f){s._errorCode=-2520,s._errorString=f},ChangeContrastFailed:function(s,f){s._errorCode=-2521,s._errorString="Failed to change contrast: "+u(f)},ChangeBrightnessFailed:function(s,f){s._errorCode=-2522,s._errorString="Failed to change brightening: "+u(f)},ConvertToGrayScaleFilterCallbackErr:function(s,f){s._errorCode=-2523,s._errorString='Failed to apply "gray" filter: '+u(f)},ConvertToBWScaleFilterCallbackErr:function(s,f){s._errorCode=-2524,s._errorString='Failed to apply "black and white" filter: '+u(f)},RemoveShadowFilterCallbackErr:function(s,f){s._errorCode=-2525,s._errorString='Failed to apply "remove shadow" filter: '+u(f)},EnhanceAndSharpenFilterCallbackErr:function(s,f){s._errorCode=-2526,s._errorString='Failed to apply "enhance and sharpen" filter: '+u(f)},BrightenFilterCallbackErr:function(s,f){s._errorCode=-2527,s._errorString='Failed to apply "brightening" filter: '+u(f)},SaveTonerCallbackErr:function(s,f){s._errorCode=-2528,s._errorString='Failed to apply "save toner" filter: '+u(f)},GetBlurryScoreErr:function(s,f){s._errorCode=-2529,s._errorString="Failed to get blurry score: "+u(f)},FileNameCannotEmpty:function(s){s._errorCode=-2530,s._errorString="Document name cannot be empty."},FileNameNotString:function(s){s._errorCode=-2531,s._errorString="Document name is not a string."},DocumentEditorNotExist:function(s){s._errorCode=-2532,s._errorString="This documentEditor doesn't exist."},DocumentEditorDispose:function(s){s._errorCode=-2533,s._errorString="The documentEditor object has been disposed."},DocumentEditorExist:function(s){s._errorCode=-2534,s._errorString="A documentEditor already exists."},RgbaImageToBlobErr:function(s,f){s._errorCode=-2535,s._errorString="Failed to convert image data: "+u(f)},LoadTextPDFButNoPdfrLicenseErr:function(s){s._errorCode=-2536,s._errorString="This PDF file is not supported by the Core module. You may need to activate your PDF Rasterizer licence to support this PDF file. Please contact support for further information."},WasmNotLoaded:function(s){s._errorCode=-2537,s._errorString="The wasm not loaded."},WasmNotLoaded_UseWasmFalse:function(s){s._errorCode=-2538,s._errorString="The wasm not loaded when Dynamsoft.DWT.UseCameraAddonWasm is set to false."},LicenseVersionNotCurrent:function(s,f){s._errorCode=-2539,s._errorString="The current product key is not for version ".concat(f,", please contact the site administrator.")},FileNotExist:function(s){s._errorCode=-2540,s._errorString="The document does not exist."},FileExist:function(s){s._errorCode=-2541,s._errorString="The document already exists."},WebviewerError:function(s,f,v){s._errorCode=v||-2600,s._errorString=f},ClearErrorInfo:function(s){s._errorCode=0,s._errorString=""},SetLTSException:function(s){var f=o.I.DWT.licenseException;f.code=s._errorCode,f.message=s._errorString,f.fromLTS=!1},__last:!1}},7843:function(e,L,t){t.r(L),L=t(1614);var r,a,o,u,s=t.n(L),f=(L=t(1006),t.n(L)),v=(L=t(3701),t.n(L)),l=(L=t(3662),t.n(L)),I=(L=t(9798),t.n(L)),c=(L=t(7682),t.n(L)),_=(L=t(2825),t.n(L)),h=(L=t(4579),t.n(L)),y=(L=t(7711),t.n(L)),p=(L=t(5683),t.n(L)),m=t(1188),T=t(4130),C=t(8420),D=t(7344),S=t(4845),M=t(1695),G=function(){function be(it){(0,C.Z)(this,be),(0,S.Z)(this,"m_iUsingTime",0),(0,S.Z)(this,"m_jvUsingTime",void 0),(0,S.Z)(this,"m_countMap",{}),(0,S.Z)(this,"m_newConsum",!1),(0,S.Z)(this,"m_mapSavedToDb",!1),(0,S.Z)(this,"m_minExpiredTime",void 0),(0,S.Z)(this,"m_maxExpiredTime",void 0),(0,S.Z)(this,"m_cu",void 0),(0,S.Z)(this,"m_ar",void 0),(0,S.Z)(this,"m_ltsInstance",void 0),this.clearData(),(this.m_enumInstance=it)==M.I.DWT.EnumInstance.dwt_desktop?this.m_deploymentType="desktop":it!=M.I.DWT.EnumInstance.dwt_browser&&it!=M.I.DWT.EnumInstance.dbr||(this.m_deploymentType="browser")}return(0,D.Z)(be,[{key:"clearData",value:function(){this.m_iUsingTime=0,this.m_jvUsingTime=M.D.nil,this.m_countMap={},this.m_newConsum=!1,this.m_mapSavedToDb=!1,this.m_minExpiredTime=M.D.nil,this.m_maxExpiredTime=M.D.nil,this.m_cu=M.D.nil,this.m_ar=M.D.nil,this.m_ltsInstance=M.D.nil}},{key:"set_cu",value:function(it){this.m_cu=it}},{key:"get_cu",value:function(){return this.m_cu}},{key:"set_ar",value:function(it){this.m_ar=it}},{key:"get_ar",value:function(){return this.m_ar}},{key:"get_ltsInstance",value:function(it){return this.m_ltsInstance||(this.m_ltsInstance=it(this.m_enumInstance)),this.m_ltsInstance}},{key:"inited_ltsInstance",value:function(it){return!!this.m_ltsInstance}},{key:"set_maxExpiredTime",value:function(it){this.m_maxExpiredTime=it}},{key:"get_maxExpiredTime",value:function(){return this.m_maxExpiredTime}},{key:"set_minExpiredTime",value:function(it){this.m_minExpiredTime=it}},{key:"get_minExpiredTime",value:function(){return this.m_minExpiredTime}},{key:"get_deploymentType",value:function(){return this.m_deploymentType}}]),be}(),W=(L=t(668),M.I.DWT.LTS=M.I.DWT.LTS||{},M.I.DWT.lwscmd=[],M.I.DWT.licenseException={code:0,message:"",fromLTS:!1},M.I.DWT.bLTSOnline=!0,M.I.DWT.axInstance=void 0,M.I.DWT.lOnUpdateDWObj=[],M.I.DWT.globalWS=[],M.I.DWT.EnumInstance={dwt_desktop:0,dwt_browser:1,dbr:2},0),F={},U=!1,H=!1,Z=!1,X=!1,$=!1,V=Q.Lib;function De(){var be=M.I.DWT.handshakeCode;return M.I.Lib.isString(be)?be:""}function fe(){var be=M.I.DWT.organizationID;return M.I.Lib.isNumber(be)?be=""+be:M.I.Lib.isString(be)||(be=""),be}function je(){return M.I.DWT.JSVersion.split(",")[0]}function Se(be){return(be=be===M.I.Lib.nil?Q.Lib.IsNeedLoadWasm()?M.I.DWT.EnumInstance.dwt_browser:M.I.DWT.EnumInstance.dwt_desktop:be)==M.I.DWT.EnumInstance.dwt_browser?a=a||new G(be):be==M.I.DWT.EnumInstance.dbr?u=u||new G(be):o=o||new G(be)}M.I.DWT.lupverfy=function(){Se(M.I.DWT.EnumInstance.dwt_desktop).get_ltsInstance(tt),Se(M.I.DWT.EnumInstance.dwt_browser).get_ltsInstance(tt),Se(M.I.DWT.EnumInstance.dbr).get_ltsInstance(tt)},M.I.DWT.lsmid=function(be){Se(M.I.DWT.EnumInstance.dwt_desktop).set_cu(be)},M.I.DWT.laddDWTObj=function(be){var it=!1;M.I.Lib.each(M.I.DWT.lOnUpdateDWObj,function(mt){if(mt==be)return!(it=!0)}),it||M.I.DWT.lOnUpdateDWObj.push(be)},M.I.DWT.lremoveDWTObj=function(be){M.I.Lib.each(M.I.DWT.lOnUpdateDWObj,function(it,mt){if(it==be)return l()(it=M.I.DWT.lOnUpdateDWObj).call(it,mt,1),!1})},M.I.DWT.lsendUpdateEvt=function(be){var it=[];if(M.I.Lib.each(M.I.DWT.lOnUpdateDWObj,function(Ce){be==Q.DWT.EnumInstance.dwt_desktop?(Ce.isUsingActiveX()||Ce._bLocalService)&&it.push(Ce):be!=Q.DWT.EnumInstance.dwt_browser||Ce.isUsingActiveX()||Ce._bLocalService||it.push(Ce)}),0==it.length)return M.I.Lib.Promise.resolve();var mt=it[0];return mt.isUsingActiveX()?(M.I.Lib.each(it,function(Ce){Ce.SetLTSInfo(Se(be).get_ar(),Se(be).get_cu())}),mt.GetLicenseInfo().then(function(Ce){Ce&&M.I.Lib.isArray(Ce.Detail)&&0<Ce.Detail.length&&Q.DWT.lsexp(be,Ce.Detail[0].ExpireDate)})):(mt=mt.SetLTSLicenseAsync(Se(be).get_ar()).then(function(Ce){Ce&&M.I.Lib.isArray(Ce.Detail)&&0<Ce.Detail.length&&Q.DWT.lsexp(be,Ce.Detail[0].ExpireDate)}),M.I.Lib.each(it,function(Ce,we){0!=we&&Ce.SetLTSLicenseAsync(Se(be).get_ar())}),mt)},M.I.DWT.lgcb=function(){var be=M.I.navInfo,it=M.I.navInfoSync,mt=[];return it.bChrome?mt.push("Chrome"):it.bFirefox?mt.push("Firefox"):it.bEdge?mt.push("Edge"):it.bIE?mt.push("IE"):it.bSafari?mt.push("Safari"):it.bOpera?mt.push("Opera"):be.b360SE?mt.push("360SE"):be.bTencentTraveler?mt.push("TencentTraveler"):be.bMaxthon?mt.push("Maxthon"):be.bMetaSr?mt.push("MetaSr"):be.bTheWorld?mt.push("TheWorld"):be.bUC?mt.push("UC"):be.bHuaWeiBrowser&&mt.push("HuaWeiBrowser"),mt.push(it.strBrowserVersion),it.bWin?mt.push("Windows"):it.bMac?mt.push("Mac"):it.bLinux?mt.push("Linux"):it.bAndroid?mt.push("Android"):it.bChromeOS?mt.push("ChromeOS"):it.bHarmonyOS?mt.push("HarmonyOS"):Q.Lib.env.bMobile?mt.push("Mobile OS"):be.bEmbed&&mt.push("Embed OS"),mt.join(" ")};function tt(be){var it,mt,Ce=Q.DWT.licenseServer;if(Ce&&0<Ce.length)for(it=0;it<Ce.length;it++)mt=Ce[it],v()(V).call(V,mt,"/")||(Ce[it]=mt+"/");var we,Ve={lf:V.localforage,btoa:V.btoa,atob:V.atob,sutlcb:function(){V.isFunction(Q.DWT.lonsend)&&Q.DWT.lonsend()},fol:Q.DWT.OnFirstOffline,dwt:!0,product:"dwt|dbr"};return Ve.feab=be==Q.DWT.EnumInstance.dwt_browser||be==Q.DWT.EnumInstance.dbr?Q.DWT.lfeab_wasm:Q.DWT.lfeab_ax,!Q.navInfoSync.bIE&&Q.DWT.ltsDebug&&(Ve.debugLog=console.log),Q.LTS&&Q.LTS._?Q.LTS._.createLtsInstance(Ve):((be={}).i=we=function(){return V.Promise.reject({code:-2446,message:"The dynamsoft.lts.js load failed."})},be.s=we,be.caret=we,be)}function de(){return c()()}function _t(mt){var it,Ce="yyyy-MM-ddTHH:mm:ss.SSSZ",we={"M+":(mt=mt?new Date(mt):new Date).getUTCMonth()+1,"d+":mt.getUTCDate(),"H+":mt.getUTCHours(),"h+":mt.getUTCHours()%12||12,"m+":mt.getUTCMinutes(),"s+":mt.getUTCSeconds(),"q+":Math.floor((mt.getUTCMonth()+3)/3),"S+":mt.getUTCMilliseconds()};for(it in/(y+)/.test(Ce)&&(Ce=Ce.replace(RegExp.$1,(mt.getUTCFullYear()+"").substr(4-RegExp.$1.length))),we)new RegExp("("+it+")").test(Ce)&&(Ce=Ce.replace(RegExp.$1,1==RegExp.$1.length?we[it]:("000"+we[it]).substr(("000"+we[it]).length-RegExp.$1.length)));return Ce}M.I.DWT.lglic=function(be){var it=Se(be);if(M.I.DWT.lclex(),it.get_ar()&&it.get_cu())return I().resolve({ar:it.get_ar(),cu:it.get_cu()});var mt,Ce,we,Ve={engineResourcePath:(Ve=M.I.DWT.ResourcesPath,we="",[Ve,we=v()(Ce=Q.Lib).call(Ce,Ve,"/")?we:"/","src"].join("")),version:f()(Ce=M.I.Lib).call(Ce,M.I.DWT.JSVersion,",","."),pk:De(),dm:location.origin?s()(mt=M.I.Lib).call(mt,location.origin,"http")?location.origin:"https://localhost":s()(mt=M.I.Lib).call(mt,location.href,"http")?location.href:"https://localhost",browserInfo:M.I.DWT.lgcb(),deviceFriendlyName:M.I.DWT.DeviceFriendlyName||"",ls:M.I.DWT.licenseServer,sp:M.I.DWT.sessionPassword,og:fe(),getMinExpireTime:function(){return it.get_maxExpiredTime()},getMaxExpireTime:function(){return it.get_minExpiredTime()},fol:M.I.DWT.OnFirstOffline};return Ve.dt=it.get_deploymentType(),be==M.I.DWT.EnumInstance.dwt_desktop&&(Ve.lsu=it.get_cu()),be!=M.I.DWT.EnumInstance.dbr&&(Ve.dwt=!0,Ve.updateLicense=function(bt){it.set_ar(bt.ar),it.get_cu()||it.set_cu(bt.cu),M.I.DWT.lsendUpdateEvt(be)}),it.get_ltsInstance(tt).i(Ve).then(function(bt){return it.get_ar()||it.set_ar()(bt.ar),it.get_cu()||it.set_cu(bt.cu),bt})},M.I.DWT.lshow=function(){return{t:r,t2:W,m:_()(F)}},M.I.DWT.lgct=L.ME,M.I.DWT.lcvrf=function(be){var it=be.isUsingActiveX()||be._bLocalService?Q.DWT.EnumInstance.dwt_desktop:Q.DWT.EnumInstance.dwt_browser;h()(function(){M.I.DWT.lcvrf_(be,it)},1)},M.I.DWT.lcvrf_=function(be,it){var mt,Ce,we,Ve,St=M.I.DWT.lgcb(),At=Se(it),Pe=function(Ze,Ne){var Re,ze,Qe=Q.Lib,ot=0;Qe.isString(Ze)&&""!=Ze&&"{}"!=Ze&&Ne&&Qe.isArray(Ne)&&(Ne.length<1||(ze=Se(Ne[0]),Ne=Qe.parse(Ze),M.I.DWT.lclex(),0==W&&(Ze=de(),Re="",r=_t(W=Ze),F={},ot=0,Qe.each(Ne,function(Lt,Ot){(Ot<ot||0==ot)&&(ot=Ot,Re=Lt)}),0<ot&&ze.get_ltsInstance(tt).s(M.I.DWT.licenseServer,Re,ot,!0).then(function(){},function(Lt){})),Qe.each(Ne,function(Lt,Ot){var Bt=!1,Ft=y()(Ot);0<Ft&&Ft!=ot&&(Ft+18e4<de()&&(Bt=!0),ze.get_ltsInstance(tt).s(M.I.DWT.licenseServer,Lt,Ot,Bt).then(function(){},function(It){}))})))};if((St={handShake:De(),organization:fe(),clientUuid:At.get_cu(),clientFriendName:"",cw:"",os:St,versionMajor:je(),deploymentType:At.get_deploymentType(),edition:"javascript"}).product="dwt|dbr",At=_()(St),!be.isUsingActiveX())return St=Q.Lib.html5.Funs,mt="GetBuffer",Ce=(0,m.dv)(f()(Ce=Q.Lib).call(Ce,At,'"','\\"')),At=be._objWS,we=be.clientId,Ve=(0,T.R)(),M.I.DWT.lwscmd.push({cmd:mt,cmdId:Ve,sFun:Pe,fFun:function(){},params:[it,be._host]}),St.sendData(At,M.I.DWT.lgj(we,mt,Ce,Ve),!1,!0);Pe(be.GetBuffer(At),[it,""])},M.I.DWT.lavrf=function(be,it,mt){var Ce=1;""!=be&&(1<it&&(Ce=it),it=de(),0<W&&W+18e4<it&&(H?(F={},M.I.DWT.lavrf__unload()):M.I.DWT.lavrf__(!0,mt),it=de()+1,r=_t(W=it),F={}),H=!(U=!0),F[be]?F[be]+=Ce:F[be]=Ce,0==W&&M.I.DWT.lavrf__(!0,mt))},M.I.DWT.lavrf_=function(be,it){U&&(be=be||1,h()(function(){M.I.DWT.lavrf__(!1,it)},be))},M.I.DWT.lavrf__=function(Ve,it){var mt,Ce=de(),we=!1,bt=(Ve=!!Ve,0),At=(it=Se(it=M.I.Lib.isUndefined(it)?M.I.DWT.EnumInstance.dwt_browser:it),U=!1,0==W&&(we=!0,r=_t(W=Ce)),mt=W,Pe=r,{}),St=(At.usingTime=Pe,{});if(Q.Lib.each(F,function(ae,Ze){0<(St[Ze]=ae)&&bt++}),At.counts=St,Ve||mt+18e4<Ce){Ve=!0;var Pe=de()+1;if(r=_t(W=Pe),H=!(F={}),0==bt)return}else{if(0==bt)return;H=!0}At.concurrentDuration=we?1:180,Ce=M.I.DWT.lgcb(),Pe={handShake:De(),organization:fe(),clientUuid:it.get_cu(),clientFriendName:"",cw:"",os:Ce,versionMajor:je(),deploymentType:it.get_deploymentType(),edition:"javascript",records:[At],product:"dwt|dbr"},we=_()(Pe),M.I.DWT.ltsDebug&&_t(),M.I.DWT.lclex(),it.get_ltsInstance(tt).s(M.I.DWT.licenseServer,we,""+mt,Ve).then(function(){},function(ae){})},M.I.DWT.lavrf__unload=function(){var be=de(),it=Se(M.I.DWT.EnumInstance.dwt_desktop),mt=Se(M.I.DWT.EnumInstance.dwt_browser),Ce=Se(M.I.DWT.EnumInstance.dbr),we=(U=!1,0==W&&(r=_t(W=be)),be=W,de()+1);r=_t(W=we),H=!(F={}),be+=1,M.I.DWT.lclex(),it.inited_ltsInstance()&&it.get_ltsInstance(tt).s(M.I.DWT.licenseServer,!1,""+be,!0).then(function(){},function(Ve){}),mt.inited_ltsInstance()&&mt.get_ltsInstance(tt).s(M.I.DWT.licenseServer,!1,""+be,!0).then(function(){},function(Ve){}),Ce.inited_ltsInstance()&&Ce.get_ltsInstance(tt).s(M.I.DWT.licenseServer,!1,""+be,!0).then(function(){},function(Ve){})},M.I.DWT.lclex=function(){var be=M.I.DWT.licenseException;be.code=0,be.message="",be.httpResponse="",be.fromLTS=!1},M.I.DWT.li=function(be){var it;return be.axInstance&&(M.I.DWT.axInstance=be.axInstance,M.I.DWT.axInstance)?(it=M.I.DWT.axInstance.GetUUID(),Se(be.instanceMode).set_cu(it),it):Se(be.instanceMode).get_cu()},M.I.DWT.lfeab_ax=function(be){return new(I())(function(it,mt){var Ce="";if(M.I.DWT.axInstance)try{Ce=M.I.DWT.axInstance.Encrypt(be,0)}catch{}it(Ce)})},M.I.DWT.lfeab_wasm=function(be){return new(I())(function(it,mt){var Ce=new Q.Imagecore;Ce.getAesResult(be).then(function(we){Ce.terminate(),it(we)},function(we){Ce.terminate(),mt(we)})})},M.I.DWT.lgj=function(Ve,it,mt,bt){var we=[];return bt=[(we.push("{"),we.push('"id":"'),we.push(Ve),we.push('"'),bt&&(we.push(',"cmdId":"'),we.push(bt),we.push('"')),we.push(',"method":"'),we.push(it),we.push('"'),we.push(',"module":"dwt","version":"'),Ve=Q.Lib).product.getDWTPrefix(),Ve.product.getServerVersionInfo()].join(""),we.push(bt),we.push('"'),null!=mt&&(we.push(',"parameter":'),we.push(mt)),we.push("}"),we.join("")},M.I.DWT.lwsproc=function(be){var it,mt;if(0<=p()(be).call(be,"Exception:")||0==p()(be).call(be,"Error"))return it=be,void((mt=Q.DWT.lwscmd.pop()||{}).fFun&&mt.fFun({code:-2520,message:it}));try{be=Q.Lib.parse(be)}catch(bt){return void((mt=M.I.DWT.lwscmd.pop()||{}).fFun&&mt.fFun(bt))}if(be.cmdId){for(var Ce=-1,we=Q.DWT.lwscmd.length-1;0<=we;we--)if(Q.DWT.lwscmd[we].cmdId==be.cmdId){var Ve;Ce=we,mt=l()(Ve=Q.DWT.lwscmd).call(Ve,Ce,1)[0];break}if(Ce<0)return}"GetBuffer"==be.method?void 0!==be.exception&&void 0!==be.description?mt.fFun&&mt.fFun({code:be.exception,message:be.description}):mt.sFun(mt.sFun&&0<be.result.length?be.result[0]:"",mt.params):mt.sFun&&mt.sFun(be)},M.I.DWT.lsexp=function(be,it){3==(Ce=(it=f()(Ce=M.I.Lib).call(Ce,it,"/","-")).split("-")).length&&(we=Ce[0],mt=Ce[1],Ce=Ce[2],it=[we,mt=mt.length<2?(mt="00"+mt).substr(mt.length-2):mt,Ce=Ce.length<2?(Ce="00"+Ce).substr(Ce.length-2):Ce].join("-"));var mt,Ce,we=[it,"T23:59:59.999Z"].join("");Se(be).set_minExpiredTime(we),Se(be).set_maxExpiredTime(we)},M.I.DWT.lunload=function(){M.I.DWT.lavrf__unload();var be=Se(M.I.DWT.EnumInstance.dwt_desktop),it=Se(M.I.DWT.EnumInstance.dwt_browser),mt=Se(M.I.DWT.EnumInstance.dbr);be.clearData(),it.clearData(),mt.clearData(),W=0,r=M.I.Lib.nil,$=X=Z=U=H=!(F={}),M.I.DWT.lwscmd=[],M.I.DWT.lclex(),M.I.DWT.bLTSOnline=!0,M.I.DWT.axInstance=M.I.Lib.nil,M.I.DWT.lOnUpdateDWObj=[],M.I.DWT.globalWS=[]},M.I.DWT.lcexp=function(be){return Se(be).get_ltsInstance(tt).caret().then(function(){return!1},function(it){var mt=Q.DWT.licenseException,Ce="";return it instanceof Error||"message"in it?Ce=it.message:M.I.Lib.isString(it)&&(Ce=it),M.I.DWT.lsetException(-2445,Ce,!1),X||(X=!0,Q.OnLTSLicenseError&&Q.OnLTSLicenseError(Q.Lib.License.getPublicLicenseContent(mt.message))),!0})},M.I.DWT.OnLicenseException=function(){var be,it,mt,Ce=M.I.DWT.licenseException,we=Ce.message;M.I.Lib.isString(we)&&(-1<p()(we).call(we,"Error Code")?we=f()(be=M.I.Lib).call(be,we,"Error Code","error code"):-1<p()(we).call(we,"Error code")&&(we=f()(be=M.I.Lib).call(be,we,"Error code","error code"))),-1<p()(we).call(we,"(https://www.dynamsoft.com/purchase-center/)")&&(we=we.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamic-web-twain/)"),Ce.message=we),-1<p()(we).call(we,"error code:")?(be=we.substr(0,p()(we).call(we,"message")),it=we.substr(p()(we).call(we,"message")),-1<p()(be).call(be,"{")&&(be=be.substr(p()(be).call(be,"{")+1)),-1<p()(it).call(it,"}")&&(it=it.substr(0,p()(it).call(it,"}"))),be=f()(mt=M.I.Lib).call(mt,be,"error code:",""),it=f()(mt=M.I.Lib).call(mt,it,"message: ",""),M.I.DWT.lsetException(y()(be),it,!0),Q.OnLTSLicenseError&&Q.OnLTSLicenseError(Q.Lib.License.getPublicLicenseContent(we))):(Ce.code||(mt=-2440,-1<p()(we).call(we,"timed out")||-1<p()(we).call(we,"timeout")?mt=-2441:(-1<p()(we).call(we,"access-control-allow-origin")||-1<p()(we).call(we,"cors"))&&(mt=-2443),M.I.DWT.lsetException(mt,we,!0)),-2446!=Ce.code&&Q.OnLTSLicenseError&&Q.OnLTSLicenseError(Q.Lib.License.getPublicLicenseContent(Ce.message)))},M.I.DWT.lol=function(){return M.I.DWT.bLTSOnline},M.I.DWT.OnFirstOffline=function(be){M.I.DWT.bLTSOnline=!1},M.I.DWT.lpubdlg=function(be,it){if(M.I.Lib.isString(be)&&""!=be){if(be=M.I.Lib.atob(be),1==it)return Z||(Z=!0,Q.OnLTSPublicLicenseMessage&&Q.OnLTSPublicLicenseMessage(Q.Lib.License.getPublicLicenseContent(be))),!0;2==it&&(Z=Z||!0)}return!1},M.I.DWT.lcheckLic=function(be,it){var Ce=!1;if(it){if(M.I.Lib.isArray(it.Detail)&&0<it.Detail.length)return Q.DWT.lsexp(be,it.Detail[0].ExpireDate),Q.DWT.lcexp().then(function(we){var Ve=!1;we?Ve=!0:1!=it.Trial&&2!=it.Trial||(Ve=M.I.DWT.lpubdlg(it.Message,it.Trial)),Ve||M.I.DWT.bLTSOnline||$||($=!0,Q.OnLTSConnectionWarning&&Q.OnLTSConnectionWarning())});1!=it.Trial&&2!=it.Trial||(Ce=M.I.DWT.lpubdlg(it.Message,it.Trial))}Ce||M.I.DWT.bLTSOnline||$||($=!0,Q.OnLTSConnectionWarning&&Q.OnLTSConnectionWarning())},M.I.DWT.lisValidID=function(it){return!(!M.I.Lib.isString(it)||""==it)||(it=M.I.DWT.licenseException,M.I.DWT.lsetException(-2447,"Failed to generate an ID for your device to license it: not enough permission.",!0),it=it.message,Q.OnLTSUUIDError&&Q.OnLTSUUIDError(it),!1)},M.I.DWT.lsetException=function(be,it,mt){var Ce=Q.DWT.licenseException;Ce.code=be,Ce.message=it,M.I.Lib.isUndefined(mt)||(Ce.fromLTS=mt)}},6831:function(e,c,t){t.r(c),c=t(3662);var r=t.n(c),a=(c=t(4579),t.n(c)),o=(c=t(9798),t.n(c)),u=(c=t(5683),t.n(c)),s=t(1695),f=(c=t(7711),t.n(c));function v(D,m){var T=this,C=0,S=(D=s.D.isString(D)?document.getElementById(D):D,T.isLoaded=!1,T.displayType=0,T.progress=0,T.progressPosition=0,T.borderWidth={left:0,right:0,top:0,bottom:0},T.orientation=m.orientation||v.Orientation.Horizontal,T.direction=m.direction||v.Direction.LeftToRight,T.creationType=m.creationType||v.CreationType.Replace,T.value=0,T.initialValue=m.value||0,T.minValue=m.minValue||0,T.maxValue=m.maxValue||100,T.showLabel=typeof m.showLabel>"u"||m.showLabel,T.labelText=m.labelText||"",T.width=m.width||280,T.height=m.height||20,T.borderRadius=m.borderRadius||10,T.orientation==v.Orientation.Horizontal&&T.borderRadius>T.height/2&&(T.borderRadius=Math.round(T.height/2)),T.orientation==v.Orientation.Vertical&&T.borderRadius>T.width/2&&(T.borderRadius=Math.round(T.width/2)),T.backColor=m.backColor||"",T.color=m.color||"#50a8e1",T.animationStyle=0,T.animationInterval=m.animationInterval||100,["parent","background","wrapper","left","middle","right","horizontalText","verticalText","marker"]);for(T.extraClassName={},C=0;C<S.length;C++)T.extraClassName[S[C]]=m.extraClassName?"string"==typeof m.extraClassName?m.extraClassName:m.extraClassName[S[C]]||"":"";T.onLoad=m.onLoad||null,T.onValueChanged=m.onValueChanged||null,T.onAnimate=m.onAnimate||null,T.creationType==v.CreationType.Replace?T.parentElement=D:(T.parentElement=document.createElement("DIV"),D.appendChild(T.parentElement)),T.finishLoading()}v.Orientation={Horizontal:0,Vertical:1},v.Direction={LeftToRight:0,RightToLeft:1,TopToBottom:0,BottomToTop:1},v.CreationType={Replace:0,AppendChild:1},v.AnimationStyle={None:0,Static:1,StaticFull:2,Custom:3,CustomFull:4,Flickering1:10,Flickering2:11,Flickering3:12,LeftToRight1:20,LeftToRight2:21,RightToLeft1:22,RightToLeft2:23,TwoWay:24},v.prototype.finishLoading=function(){var p,m=this,T=(m.wrapperElement=null,m.backgroundElement=null,m.valueElement=null,m.leftElement=null,m.middleElement=null,m.rightElement=null,m.backgroundElement=document.createElement("DIV"),m.backgroundElement.className="progressbar_background"+(m.extraClassName.background?" ":"")+m.extraClassName.background,m.backgroundElement.style.cssText=m.backgroundElement.style.cssText+v._createBorderRadiusCss(m.borderRadius),m.parentElement.appendChild(m.backgroundElement),["border-radius","border-bottom-right-radius","-moz-border-radius-bottomright","-webkit-border-bottom-right-radius","-khtml-border-radius-bottomright","-khtml-border-bottom-right-radius"]),D=0,C="";for(D=0;D<T.length&&!(C=v._elementCurrentStyle(m.backgroundElement,T[D]))&&"string"!=typeof C;D++);""!=C&&v._parseInt(C)!=m.borderRadius&&(m.borderRadius=v._parseInt(C)),m.displayType=m.orientation==v.Orientation.Horizontal||m.orientation==v.Orientation.Vertical?0:1,m.parentElement.className=(""!=m.parentElement.className?" ":"")+"progressbar_parent dynamsoft-progressBar"+(m.extraClassName.parent?" ":"")+m.extraClassName.parent,0==m.displayType?((p=m.wrapperElement=document.createElement("DIV")).style.border="1px solid #A0A0A0",p.style.cssFloat="left",p.style.display="inline-block",p.style.width=m.width+"px",p.style.height=m.height+"px",p.style.left="0px",p.style.top=-m.height+"px",p.style.backgroundColor=m.backColor,p.style.backgroundRepeat="no-repeat",p.style.position="relative",p.style.cssText=p.style.cssText+v._createBorderRadiusCss(m.borderRadius),m.parentElement.appendChild(p),m.borderWidth={left:v._parseInt(v._elementCurrentStyle(p,"border-left-width")),right:v._parseInt(v._elementCurrentStyle(p,"border-right-width")),top:v._parseInt(v._elementCurrentStyle(p,"border-top-width")),bottom:v._parseInt(v._elementCurrentStyle(p,"border-bottom-width"))}):1==m.displayType&&(m.orientation==v.Orientation.Horizontal?m.borderRadius>m.width/2&&(m.borderRadius=m.width):m.orientation==v.Orientation.Vertical&&m.borderRadius>m.height/2&&(m.borderRadius=m.height),m.valueElement=document.createElement("DIV"),m.valueElement.className="",m.leftElement=document.createElement("DIV"),m.middleElement=document.createElement("DIV"),m.rightElement=document.createElement("DIV"),m.leftElement.style.border="1px solid #A0A0A0",m.leftElement.style.cssFloat="left",m.leftElement.style.display="inline-block",m.leftElement.style.backgroundColor=m.backColor,m.leftElement.style.backgroundRepeat="no-repeat",m.leftElement.style.position="relative",m.rightElement.style.border="1px solid #A0A0A0",m.rightElement.style.cssFloat="left",m.rightElement.style.display="inline-block",m.rightElement.style.backgroundColor=m.backColor,m.rightElement.style.backgroundRepeat="no-repeat",m.rightElement.style.position="relative",m.middleElement.style.border="1px solid #A0A0A0",m.middleElement.style.cssFloat="left",m.middleElement.style.display="inline-block",m.middleElement.style.overflow="hidden",m.middleElement.style.position="relative",m.valueElement.style.backgroundColor=m.backColor,m.valueElement.style.position="relative",m.orientation==v.Orientation.Horizontal?(m.leftElement.style.width=m.borderRadius+"px",m.leftElement.style.height=m.height+"px",m.leftElement.style.top=-m.height+"px",m.leftElement.style.left="0px",m.leftElement.style.borderRight="none",m.leftElement.style.cssText=m.leftElement.style.cssText+v._createBorderRadiusCss(m.borderRadius,0,0,m.borderRadius),m.rightElement.style.width=m.borderRadius+"px",m.rightElement.style.height=m.height+"px",m.rightElement.style.top=-m.height+"px",m.rightElement.style.borderLeft="none",m.rightElement.style.cssText=m.rightElement.style.cssText+v._createBorderRadiusCss(0,m.borderRadius,m.borderRadius,0),m.middleElement.style.width=m.width-2*m.borderRadius+"px",m.middleElement.style.height=m.height+"px",m.middleElement.style.top=-m.height+"px",m.middleElement.style.borderLeft="none",m.middleElement.style.borderRight="none",m.valueElement.style.width="0px",m.valueElement.style.height=m.height+"px"):m.orientation==v.Orientation.Vertical&&(m.leftElement.style.width=m.width+"px",m.leftElement.style.height=m.borderRadius+"px",m.leftElement.style.top=-m.height+"px",m.leftElement.style.left="0px",m.leftElement.style.borderBottom="none",m.leftElement.style.cssText=m.leftElement.style.cssText+v._createBorderRadiusCss(m.borderRadius,m.borderRadius,0,0),m.rightElement.style.width=m.width+"px",m.rightElement.style.height=m.borderRadius+"px",m.rightElement.style.top=-m.height+"px",m.rightElement.style.left="0px",m.rightElement.style.borderTop="none",m.rightElement.style.cssText=m.rightElement.style.cssText+v._createBorderRadiusCss(0,0,m.borderRadius,m.borderRadius),m.middleElement.style.width=m.width+"px",m.middleElement.style.height=m.height-2*m.borderRadius+"px",m.middleElement.style.top=-m.height+"px",m.middleElement.style.left="0px",m.middleElement.style.borderTop="none",m.middleElement.style.borderBottom="none",m.valueElement.style.width=m.width+"px",m.valueElement.style.height="0px"),m.middleElement.appendChild(m.valueElement),m.parentElement.appendChild(m.leftElement),m.parentElement.appendChild(m.middleElement),m.parentElement.appendChild(m.rightElement),m.orientation==v.Orientation.Horizontal?m.borderWidth={left:v._parseInt(v._elementCurrentStyle(m.leftElement,"border-left-width")),right:v._parseInt(v._elementCurrentStyle(m.rightElement,"border-right-width")),top:v._parseInt(v._elementCurrentStyle(m.middleElement,"border-top-width")),bottom:v._parseInt(v._elementCurrentStyle(m.middleElement,"border-bottom-width"))}:m.orientation==v.Orientation.Vertical&&(m.borderWidth={left:v._parseInt(v._elementCurrentStyle(m.middleElement,"border-left-width")),right:v._parseInt(v._elementCurrentStyle(m.middleElement,"border-right-width")),top:v._parseInt(v._elementCurrentStyle(m.leftElement,"border-top-width")),bottom:v._parseInt(v._elementCurrentStyle(m.rightElement,"border-bottom-width"))})),m.parentElement.style.width=m.width+m.borderWidth.left+m.borderWidth.right+"px",m.parentElement.style.height=m.height+m.borderWidth.top+m.borderWidth.bottom+"px",m.backgroundElement.style.cssFloat="left",m.backgroundElement.style.display="inline-block",m.backgroundElement.style.width=m.width+m.borderWidth.left+m.borderWidth.right+"px",m.backgroundElement.style.height=m.height+"px",m.backgroundElement.style.backgroundColor="#FFFFFF",m.backgroundElement.style.position="relative",0==m.displayType&&(m.backgroundElement.style.width=m.width+m.borderWidth.left+m.borderWidth.right+"px"),m.backgroundElement.style.top=m.borderWidth.top+"px",m.markerElement=document.createElement("DIV"),m.markerElement.style.display="inline-block",m.markerElement.style.zoom="1.0",m.markerElement.style.width=m.width+"px",m.markerElement.style.height=m.height+"px",m.markerElement.style.top=2*-m.height-m.borderWidth.top+"px",m.markerElement.style.left=m.borderWidth.left+"px",m.markerElement.style.backgroundColor=m.color,m.markerElement.style.lineHeight=m.height+"px",m.markerElement.style.position="relative",m.parentElement.appendChild(m.markerElement),m.isLoaded=!0,m.setValue(m.initialValue),null!=m.onLoad&&m.onLoad()},v.prototype.setValue=function(p){var m,T,C,D,S=this;null!==(p=null!==(p=null!==p&&p<S.minValue?S.minValue:p)&&p>S.maxValue?S.maxValue:p)&&(S.value=p),S.isLoaded&&(p=0,S.orientation==v.Orientation.Horizontal?(S.progressPosition=p=S.value/S.maxValue*S.width,0==S.displayType||1==S.displayType&&(S.direction==v.Direction.LeftToRight?S.valueElement.style.width=p<=S.borderRadius?"0px":p>=S.width-S.borderRadius?S.middleElement.style.width:p-S.borderRadius+"px":p<=S.borderRadius?S.valueElement.style.width="0px":p>=S.width-S.borderRadius?(S.valueElement.style.left="0px",S.valueElement.style.width=S.middleElement.style.width):(S.valueElement.style.left=S.width-p-S.borderRadius+"px",S.valueElement.style.width=p-S.borderRadius+"px")),0<p?(S.markerElement.style.width=S.animationStyle!=v.AnimationStyle.StaticFull&&S.animationStyle!=v.AnimationStyle.CustomFull?p+"px":S.width+"px",S.markerElement.style.visibility="visible"):(S.markerElement.style.width=S.width+"px",S.animationStyle!=v.AnimationStyle.StaticFull&&S.animationStyle!=v.AnimationStyle.CustomFull&&(S.markerElement.style.visibility="hidden")),S.markerElement.style.left=S.animationStyle==v.AnimationStyle.StaticFull||S.animationStyle==v.AnimationStyle.CustomFull||S.direction==v.Direction.LeftToRight?S.borderWidth.left+"px":S.width-p+S.borderWidth.left+"px",D=2*-S.height-S.borderWidth.top,0==p||S.width==p?(S.markerElement.style.top=D+"px",S.markerElement.style.height=S.height+"px",S.markerElement.style.cssText=S.markerElement.style.cssText+v._createBorderRadiusCss(S.borderRadius)):p<S.borderRadius?(C=S.height-2.25*(S.borderRadius-Math.sqrt(Math.pow(S.borderRadius,2)-Math.pow(S.borderRadius-p,2))),S.markerElement.style.top=(T=D+S.height/2-C/2)+"px",S.markerElement.style.height=C+"px",S.markerElement.style.cssText=S.direction==v.Direction.LeftToRight?S.markerElement.style.cssText+v._createBorderRadiusCss(S.borderRadius,0,0,S.borderRadius):S.markerElement.style.cssText+v._createBorderRadiusCss(0,S.borderRadius,S.borderRadius,0)):S.width-p<S.borderRadius?(m=(2*(S.borderRadius-(S.width-p))+(S.borderRadius-Math.sqrt(Math.pow(S.borderRadius,2)-Math.pow(S.borderRadius-(S.width-p),2))))/3,S.markerElement.style.cssText=S.direction==v.Direction.LeftToRight?S.markerElement.style.cssText+v._createBorderRadiusCss(S.borderRadius,m,m,S.borderRadius):S.markerElement.style.cssText+v._createBorderRadiusCss(m,S.borderRadius,S.borderRadius,m)):(S.markerElement.style.top=D+"px",S.markerElement.style.height=S.height+"px",S.markerElement.style.cssText=S.direction==v.Direction.LeftToRight?S.markerElement.style.cssText+v._createBorderRadiusCss(S.borderRadius,0,0,S.borderRadius):S.markerElement.style.cssText+v._createBorderRadiusCss(0,S.borderRadius,S.borderRadius,0))):S.orientation==v.Orientation.Vertical&&(S.progressPosition=p=S.value/S.maxValue*S.height,0==S.displayType||1==S.displayType&&(S.direction==v.Direction.TopToBottom?S.valueElement.style.height=p<=S.borderRadius?"0px":p>=S.height-S.borderRadius?S.middleElement.style.height:p-S.borderRadius+"px":p<=S.borderRadius?S.valueElement.style.height="0px":p>=S.height-S.borderRadius?(S.valueElement.style.top="0px",S.valueElement.style.height=S.middleElement.style.height):(S.valueElement.style.top=S.height-p-S.borderRadius+"px",S.valueElement.style.height=p+2*S.borderRadius+"px")),0<p?(S.animationStyle!=v.AnimationStyle.StaticFull&&S.animationStyle!=v.AnimationStyle.CustomFull?S.markerElement.style.height=p+"px":(S.markerElement.style.height=S.height+"px",S.markerElement.style.cssText=S.markerElement.style.cssText+v._createBorderRadiusCss(S.borderRadius)),S.markerElement.style.visibility="visible"):(S.markerElement.style.height="0px",S.animationStyle!=v.AnimationStyle.StaticFull&&S.animationStyle!=v.AnimationStyle.CustomFull&&(S.markerElement.style.visibility="hidden")),T=S.borderWidth.left,0==p||S.height==p?(S.markerElement.style.left=T+"px",S.markerElement.style.width=S.width+"px",S.markerElement.style.cssText=S.markerElement.style.cssText+v._createBorderRadiusCss(S.borderRadius)):p<S.borderRadius?((C=2.5*p)>S.width&&(C=S.width),S.markerElement.style.left=(D=T+S.width/2-C/2)+"px",S.markerElement.style.width=C+"px",S.markerElement.style.cssText=S.direction==v.Direction.BottomToTop?S.markerElement.style.cssText+v._createBorderRadiusCss(0,0,S.borderRadius,S.borderRadius):S.markerElement.style.cssText+v._createBorderRadiusCss(S.borderRadius,S.borderRadius,0,0)):S.height-p<S.borderRadius?(m=(2*(S.borderRadius-(S.height-p))+(S.borderRadius-Math.sqrt(Math.pow(S.borderRadius,2)-Math.pow(S.borderRadius-(S.height-p),2))))/3,S.markerElement.style.cssText=S.direction==v.Direction.BottomToTop?S.markerElement.style.cssText+v._createBorderRadiusCss(m,m,S.borderRadius,S.borderRadius):S.markerElement.style.cssText+v._createBorderRadiusCss(S.borderRadius,S.borderRadius,m,m)):(S.markerElement.style.left=T+"px",S.markerElement.style.width=S.width+"px",S.markerElement.style.cssText=S.direction==v.Direction.BottomToTop?S.markerElement.style.cssText+v._createBorderRadiusCss(0,0,S.borderRadius,S.borderRadius):S.markerElement.style.cssText+v._createBorderRadiusCss(S.borderRadius,S.borderRadius,0,0)),S.markerElement.style.top=S.animationStyle==v.AnimationStyle.StaticFull||S.animationStyle==v.AnimationStyle.CustomFull||S.direction==v.Direction.TopToBottom?2*-S.height-S.borderWidth.top+"px":-S.height-p-S.borderWidth.top+"px"),S.progress=S.value/S.maxValue),null!=S.onValueChanged&&S.onValueChanged()},v._elementCurrentStyle=function(p,m){if(p.currentStyle){var D=0,T="",C=!1;for(D=0;D<m.length;D++)C="-"==m[D].toString()||(T+=C?m[D].toString().toUpperCase():m[D].toString(),!1);return p.currentStyle[m=T]}return getComputedStyle(p,null).getPropertyValue(m)},v._parseInt=function(p){return p=f()(p),isNaN(p)?0:p},v._createBorderRadiusCss=function(p,m,T,C){return null!=p&&null==m&&null==T&&null==C?"; -moz-border-radius: "+p+"px; -ms-border-radius: "+p+"px; -o-border-radius: "+p+"px; -webkit-border-radius: "+p+"px; -khtml-border-radius: "+p+"px; border-radius: "+p+"px;":"; -moz-border-radius: "+(p=p||0)+"px "+(m=m||0)+"px "+(T=T||0)+"px "+(C=C||0)+"px; -ms-border-radius: "+p+"px "+m+"px "+T+"px "+C+"px; -o-border-radius: "+p+"px "+m+"px "+T+"px "+C+"px; -webkit-border-radius: "+p+"px "+m+"px "+T+"px "+C+"px; -khtml-border-radius: "+p+"px "+m+"px "+T+"px "+C+"px; border-radius: "+p+"px "+m+"px "+T+"px "+C+"px;"};var l,I=v,_=(c=s.I.DWT,s.I.navInfo),h=s.D.each;function y(p,m,T){var C={host:p,port:m,ssl:T,ws:null};return new(o())(function(D,S){if(s.D.product.bHTML5Edition)try{C.ws=s.D.getWS(C.host,C.port,C.ssl),s.D.log(["connecting ... [host ssl port:",C.host,C.ssl,C.port,"]"].join(" ")),C.ws.onopen=function(){1==C.ws.readyState?D(C):0==C.ws.readyState&&a()(C.ws.onopen,100)},C.ws.onclose=C.ws.onerror=function(){s.I.Lib.each(s.I.DWT.globalWS,function(M,G){if(M==C.ws)return r()(M=s.I.DWT.globalWS).call(M,G,1),!1}),C.ws.onopen=null,C.ws.onclose=null,C.ws.onerror=null,C.ws=null,S("WebSocket closed.")}}catch(M){s.D.log(M),C.ws&&(s.I.Lib.each(s.I.DWT.globalWS,function(G,L){if(G==C.ws)return r()(G=s.I.DWT.globalWS).call(G,L,1),!1}),C.ws.onopen=null,C.ws.onclose=null,C.ws.onerror=null,C.ws=null),S(M.message)}else S("This browser is currently not supported. Please try Chrome or Firefox!")})}s.D.ProgressBar=I,s.D.env.WSVersion="12.0.0",s.D.env.WSSession=(new Date).getTime(),s.D.getHttpUrl=function(p){return(p.ssl?["https://",p.host,":",p.port,"/"]:["http://",p.host,":",p.port,"/"]).join("")},s.D.getWSUrl=function(p,m,T){return(T?["wss://",p,":",m]:["ws://",p,":",m]).join("")},s.D.getWS_bywsurl=function(p){var m=s.D.product.wsProtocol,T=window.MozWebSocket;if(this.detect.OnCreatWS&&this.detect.OnCreatWS(p,m),void 0!==T)D=m?new T(p,m):new T(p);else{var C=window.WebSocket,D=m?new C(p,m):new C(p);if(3==D.readyState&&s.I.navInfoSync.bEdge){var S=window,M=parent;try{for(;S!=M&&M.WebSocket;)C=M.WebSocket,S=M.window,M=M.parent;D=m?new C(p,m):new C(p)}catch{}}}return s.I.DWT.globalWS.push(D),D},s.D.getWS=function(p,m,T){return p=s.D.getWSUrl(p,m,T),s.D.getWS_bywsurl(p)},s.D._init=function(p){var m,T=s.I.Lib,C=s.I.dcp,D=T.LS.item("DWT_port"),S=T.LS.item("DWT_ssl");if(C.bEnhancedMode||(r()(C=T.detect.urls).call(C,0),T.detect.cUrlIndex=0,!p.bLocalService))return!0;D!==l&&S!==l&&(m={port:D,ssl:"true"==S});var M=function(L){return!m||!(!L||L.port==m.port&&L.ssl==m.ssl)};1===T.detect.detectType?(m!==l&&m.ssl&&T.detect.urls.push(m),h(T.detect.ports,function(G){G.ssl&&M(G)&&T.detect.urls.push(G)})):0===T.detect.detectType?(m===l||m.ssl||T.detect.urls.push(m),h(T.detect.ports,function(G){!1===G.ssl&&M(G)&&T.detect.urls.push(G)})):(m!==l&&T.detect.urls.push(m),h(T.detect.ports,function(G){M(G)&&T.detect.urls.push(G)}))},s.D._reconnect=function(){var p=s.I.DWT.ContainerMap;p&&s.D.each(p,function(m,T){s.D._reconnectDWT(m)})},s.D._reconnectDWT=function(p){var m,T,C,D;if(p&&!p.__bConnecting&&!p.bReady){p.__bConnecting=!0,m=p._host,C=p._ssl,T=p._port;try{(D=s.D.getWS(m,T,C)).onopen=function(){1==D.readyState?((p._objWS=D).clientId=p.clientId,p.bReady||p._OnReady(!0),p.__bConnecting=!1,s.D.detect.hideMask(),s.D.detect.bOK=!0):0==D.readyState?a()(D.onopen,100):p.__bConnecting=!1},D.onclose=D.onerror=function(){D.onopen=null,p.__bConnecting=!1,p.bReady?(s.D.closeProgress(p,"Reconnect"),s.D.detect.hideMask()):(p.__wsRetry++,p.__wsRetry<5?a()(s.D._reconnect,500):(s.D.closeProgress(p,"Reconnect"),s.D.Errors.Server_Restarted(p))),s.I.Lib.each(s.I.DWT.globalWS,function(S,M){if(S==D)return r()(S=s.I.DWT.globalWS).call(S,M,1),!1})}}catch(S){s.D.log(S),D&&s.I.Lib.each(s.I.DWT.globalWS,function(M,G){if(M==D)return r()(M=s.I.DWT.globalWS).call(M,G,1),!1}),p.__bConnecting=!1,p.bReady?s.D.detect.hideMask():(p.__wsRetry++,p.__wsRetry<5&&a()(s.D._reconnect,500))}}},s.D._checkAndReconnect=function(p,m){s.I.DWT.CheckConnectToTheService(p,m,function(){a()(s.D._reconnect,500)},function(){a()(function(){s.D._checkAndReconnect(p,m)},500)})},s.D.connectToWS=function(p){if(!p.bReady&&!p.__bConnecting){var m;p.__bConnecting=!0;try{m=s.D.getWS(s.D.product.host,p._port,p._ssl),s.D.log(["connecting ... [port:",p._port,"]"].join("")),m.onopen=function(){p.__bConnecting=!1,1==m.readyState?((p._objWS=m).clientId=p.clientId,p.bReady||p._OnReady(!0)):0==m.readyState&&a()(m.onopen,100)},m.onclose=m.onerror=function(){m.onopen=null,p.__bConnecting=!1,p.bReady&&s.D.detect.hideMask(),s.I.Lib.each(s.I.DWT.globalWS,function(T,C){if(T==m)return r()(T=s.I.DWT.globalWS).call(T,C,1),!1})}}catch(T){s.D.log(T),m&&s.I.Lib.each(s.I.DWT.globalWS,function(C,D){if(C==m)return r()(C=s.I.DWT.globalWS).call(C,D,1),!1}),p.__bConnecting=!1,p.bReady&&s.D.detect.hideMask()}}},s.D.startWS=function(){var p=s.D.detect,m=!0;if(s.D.product.bHTML5Edition){if(!((m=!s.D.IsNeedLoadWasm()&&m)&&5<p.tryTimes)){if(p.OnDetectNext&&p.OnDetectNext(),0==p.tryTimes&&0<p.cUrlIndex&&0<p.arySTwains.length&&(p.bNoControlEvent||(p.hideMask(),s.D.isFunction(p.onNoControl)&&(S=(D=p.arySTwains[0])._width,p.onNoControl(D._containerElement,S=S<=0?270:S,C=(C=D._height)<=0?350:C,D)),p.bNoControlEvent=!0)),m&&p.cUrlIndex>=p.urls.length&&(p.cUrlIndex=0,p.tryTimes++),!(0<p.arySTwains.length))return s.D.closeLoadingMsg(),void(p.bOK=!0);var T,C,D,S=(T=p.arySTwains[0])._getWebTwainId();return s.I.DWT.ContainerMap[S]?(T._OnReady(),T.dispose()):0==T._bLocalService&&(T.bReady=!0,T._OnReady()),T.bReady||T._destroy?(r()(C=p.arySTwains).call(C,0,1),void(p.arySTwains.length<=0?p.bOK=!0:a()(s.D.startWS,100))):(p.bNoControlEvent||p.showMask(),T.__bConnecting?void 0:(T.__bConnecting=!0,y(s.D.product.host,(D=p.urls[p.cUrlIndex]).port,D.ssl).then(function(M){T.__bConnecting=!1,T._objWS=M.ws,M.ws.clientId=T.clientId,T._host=M.host,T._port=M.port,T._ssl=M.ssl,s.I.DWT.IfUseWSPool&&s.D._addToWSPool(T),T.bReady||(T.bReady=!0,T._OnReady()),r()(M=p.arySTwains).call(M,0,1),p.arySTwains.length<=0?(p.hideMask(),p.bOK=!0):a()(s.D.startWS,100)},function(M){s.D.log(M),T.__bConnecting=!1,T.bReady?p.hideMask():(p.cUrlIndex++,a()(s.D.startWS,100))})))}s.D.log("Failed more than 5 times.")}else s.D.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!")},s.D.startWSByIP=function(){var p=s.D.detect;if(s.D.product.bHTML5Edition){if(!(0<p.arySTwainsByIP.length))return p.hideMask(),void(p.bOK=!0);var m,T,C=(m=p.arySTwainsByIP[0])._getWebTwainId();return s.I.DWT.ContainerMap[C]?(m._OnReady(),m.dispose()):0==m._bLocalService&&(m.bReady=!0,m._OnReady()),m.bReady||m._destroy?(r()(C=p.arySTwainsByIP).call(C,0,1),void(p.arySTwainsByIP.length<=0?(p.hideMask(),p.bOK=!0):a()(s.D.startWSByIP,100))):(p.bNoControlEvent||p.showMask(),m.__bConnecting?void 0:(0<m.__wsRetry&&(p.bNoControlEvent||(p.hideMask(),s.D.isFunction(p.onNoControl)&&p.onNoControl(m._containerElement,C=(C=m._width)<=0?270:C,T=(T=m._height)<=0?350:T,m),p.bNoControlEvent=!0)),m.__bConnecting=!0,y(m._host,m._port,m._ssl).then(function(D){m.__bConnecting=!1,m._objWS=D.ws,D.ws.clientId=m.clientId,s.I.DWT.IfUseWSPool&&s.D._addToWSPool(m),m.bReady||(m.bReady=!0,m._OnReady()),r()(D=p.arySTwainsByIP).call(D,0,1),p.arySTwainsByIP.length<=0?(p.hideMask(),p.bOK=!0):a()(s.D.startWSByIP,100)},function(D){s.D.log(D),m.__bConnecting=!1,m.bReady?p.hideMask():(m.__wsRetry++,a()(s.D.startWSByIP,100))})))}s.D.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!")},s.D.html5.closeAll=function(){var p,m,T,C,D,S,M,G,L;for(s.D.dlgProgress=!1,s.D.detect.bOK=!1,s.D.detect.bFirst=!0,p=s.D.detect.arySTwains.length-1;0<=p;p--)if(T=s.D.detect.arySTwains[p]){for(S=T._id,T._containerElement&&(D=T._containerElement,C=T._containerElement.id),G=!1,m=0;m<s.I.DWT.Containers.length;m++)if((M=s.I.DWT.Containers[m])&&(S==M.WebTwainId||C&&C==M.ContainerId||D==M.Container)){G=!0;break}G&&(T.__unload(),r()(L=s.D.detect.arySTwains).call(L,p,1)),T._isMobileMode()}},s.D.bio=!1,s.D.progressMessage="",s.D.dialogShowStatus=!1,s.D.needShowTwiceShowDialog=!1,s.D.dlgProgress=!1,s.D.cancelFrome=0,s.D.dlgRef=0,s.D.initProgress=function(p){var m,T;s.D.dlgProgress||((T=[]).push('<dialog class="dynamsoft-dwt-dialogProgress" closed="closed" style="top:30%"><div class="ds-dwt-progressWrap">'),T.push('<h3 class="dynamsoft-finalMessage"> </h3>'),T.push('<p class="dynamsoft-desc"> </p><p class="dynamsoft-status">0%</p>'),T.push(_.bIE?'<div class="dynamsoft-progressBar" value="" max="100"></div>':'<progress class="dynamsoft-progressBar" value="" max="100"></progress>'),T.push('<br /><div style="width:100%;text-align:center"><button class="dynamsoft-btnCancel" value="cancel" autofcus>cancel</button></div>'),T.push("</div></dialog>"),(m=s.D.one(".dynamsoft-dwt-dialogProgress"))&&m.getEL()&&m.remove(),(T=s.D.parseHTML(T.join("")))&&0<T.length&&document.body.appendChild(T[0]),_.bIE&&(T=(T=s.D.one(".dynamsoft-progressBar"))&&T.getEL())&&(T.objProgressBar=new I(T,{width:280,height:20})),(m=s.D.one(".dynamsoft-dwt-dialogProgress"))&&m.getEL()&&(s.D.dlgProgress=m[0],s.D.dialog.setup(s.D.dlgProgress)),s.D.dlgRef=0,s.D.dialogShowStatus=!1,s.D.cancelFrome=0)},s.D.setBtnCancelVisibleForProgress=function(p){var m;s.D.dlgRef<=0||0==s.D.dialogShowStatus||(m=(m=s.D.one(".dynamsoft-btnCancel"))&&m.getEL())&&(m.style.display=p?"":"none")},s.D.showProgressMsg=function(p,m,T){var C,D,S,M,G;s.D.dlgRef<=0||0==s.D.dialogShowStatus||(C=s.D.one(".dynamsoft-progressBar"),D=s.D.one(".dynamsoft-status"),S=s.D.one(".dynamsoft-finalMessage"),M=s.D.one(".dynamsoft-desc"),(G=p)<0?G=0:100<p&&(G=100),G=Math.floor(G),S&&S.getEL()&&S.html(m),M&&M.getEL()&&M.html(T),!G&&0!==G||(D&&D.getEL()&&D.html(G+"%"),C&&C.getEL()&&(_.bIE?C[0].objProgressBar?C[0].objProgressBar.setValue(G):C[0].value=G:(_.bEdge&&(C[0].style.display=""),C[0].value=G))),G&&(100<=G||s.D.dlgRef<=0)&&(a()(function(){C&&C.getEL()&&(_.bIE?C[0].objProgressBar?C[0].objProgressBar.setValue(0):C[0].value=0:(_.bEdge&&(C[0].style.display="none"),C[0].value=0))},300),s.D.dlgRef<=0&&s.D.closeProgress(null,"OnPercentDone")))},s.D.showProgress=function(p,m,T){var C,D=s.I.DWT.IfConfineMaskWithinTheViewer?p._containerElement||(0<s.I.DWT.Containers.length&&s.I.DWT.Containers[0].ContainerId?s.I.Lib.get(s.I.DWT.Containers[0].ContainerId):document.body):document.body;!D||D===document.body||""!==(D=(C=D.firstChild)&&C!==s.D.dlgProgress?C:D).style.position&&"static"!==D.style.position||(D.style.position="relative",p.progressContainer={el:D}),D.appendChild(s.D.dlgProgress),s.D.log("showProgress:"+m+",bCancel:"+T),(0==s.D.cancelFrome&&1==p.__IfShowProgressBar||0!=s.D.cancelFrome&&1==p.__IfShowCancelDialogWhenImageTransfer)&&((D=(C=s.D.one(".dynamsoft-btnCancel"))&&C.getEL())&&(D.style.display=0==T?"none":""),0==s.D.dialogShowStatus&&(s.D.dlgProgress&&(s.D.dialog.setup(s.D.dlgProgress,!0),s.D.dlgProgress.showModal()),s.D.dialogShowStatus=!0,m=s.D.one(".dynamsoft-finalMessage"),C=(p=s.D.one(".dynamsoft-progressBar"))&&p.getEL(),D=s.D.one(".dynamsoft-status"),m&&m.getEL()&&m.html(""),D&&D.getEL()&&D.html("0%"),C&&(_.bIE&&C.objProgressBar?C.objProgressBar.setValue(0):C.value=0)),s.D.dlgRef++)},s.D.closeProgress=function(p,m){s.D.log("closeProgress:"+m),m=s.D.one(".dynamsoft-btnCancel"),s.D.dlgRef--,s.D.dlgRef<=0&&(s.D.dlgRef=0),1==s.D.needShowTwiceShowDialog&&1==s.D.cancelFrome?m&&m.getEL()&&(m[0].innerHTML="Cancel"):(m&&m.getEL()&&(m[0].innerHTML="Cancel"),0==s.D.dlgRef&&(1==s.D.dialogShowStatus&&(s.D.dlgProgress&&(s.D.dlgProgress.close(),document.body.appendChild(s.D.dlgProgress),p&&p.progressContainer&&p.progressContainer.el&&(p.progressContainer.el.style.position="",p.progressContainer=null)),s.D.dialogShowStatus=!1),s.D.needShowTwiceShowDialog=!1,s.D.cancelFrome=0))},s.D.html5.CreateDWTObject=function(p){for(var m,T=0;T<s.D.detect.arySTwains.length;T++)if(s.D.detect.arySTwains[T]._id==p.id)return!1;return m=new s.D.html5.STwain(p),p.customIP?s.D.detect.arySTwainsByIP.push(m):(s.D.detect.arySTwains.push(m),s.D.detect.bFirst&&s.D._init(p),s.D.detect.bFirst=!1),m},c.RemoveAllAuthorizations=function(){var p=s.D.LS.item("DWT_port"),m="http://";return m=[m="true"==s.D.LS.item("DWT_ssl")?"https://":m,s.D.product.host,":",p,"/dwt/",s.D.product.getDWTPrefix(),s.D.product.getServerVersionInfo(),"/RemoveAllAuthorizations?t=",s.D.now()].join(""),s.D.ajax({method:"GET",xhrFields:{withCredentials:!0},url:m,async:!0}),!0},s.D._reconnectWSPool=function(){s.D.each(s.D.detect.aryWSPool,function(p){!p||p.bOK||p.__bConnecting||s.D._reconnectWSElement(p)})},s.D._reconnectWSElement=function(p){var m,T;if(p&&!p.bOK&&!p.__bConnecting){m=p.wsurl,p.__bConnecting=!0,p.__wsRetry=0;var C=function(){T&&(s.I.Lib.each(s.I.DWT.globalWS,function(S,M){if(S==T)return r()(S=s.I.DWT.globalWS).call(S,M,1),!1}),T.onopen=null),p.__wsRetry++,p.__wsRetry<5?a()(s.D._reconnectWSPool,500):(p.__bConnecting=!1,s.D.closeProgress(_stwain,"Reconnect"),s.D.each(p.list,function(S,M){s.D.Errors.Server_Restarted(S)}))};try{(T=s.D.getWS_bywsurl(m)).onopen=function(){1==T.readyState?(T.onopen=null,s.D.each(p.list,function(D,S){(D._objWS=T).clientId=D.clientId,D.bReady||D._OnReady(!0)}),p.__bConnecting=!1,p.bOK=!0,s.D.detect.hideMask()):0==T.readyState?a()(T.onopen,300):p.__bConnecting=!1},T.onclose=C}catch(D){s.D.log(D),T&&s.I.Lib.each(s.I.DWT.globalWS,function(S,M){if(S==T)return r()(S=s.I.DWT.globalWS).call(S,M,1),!1}),a()(C,500)}}},s.D._deliverMsg=function(p,m){var T=m.id,C=[];0<=u()(m).call(m,'"method" : "EnableBuffer"')||0<=u()(m).call(m,'"method" : "GetBuffer"')?s.I.DWT.lwsproc(m):(s.D.each(s.D.detect.aryWSPool,function(D,S){if(D.wsurl==p)return C=D.list,!1}),s.D.each(C,function(D,S){if(D.clientId==T)return D._OnRecieveMsg&&D._OnRecieveMsg(m),!1}))},s.D._addToWSPool=function(p){var m,T=p._objWS.url;s.D.each(s.D.detect.aryWSPool,function(C,D){if(C.wsurl==T)return m=C,!1}),m&&s.D.isArray(m.list)?m.list.push(p):s.D.detect.aryWSPool.push({wsurl:T,list:[p]})},s.D._removeFromWSPool=function(p){var m,T,C;p&&p._objWS&&(T=p._objWS.url),s.D.each(s.D.detect.aryWSPool,function(D,S){if(D.wsurl==T)return m=D,!1}),m&&s.D.isArray(m.list)&&(-1<(C=u()(C=m.list).call(C,p))&&r()(p=m.list).call(p,C,1),0==m.list.length&&(m.ws.close(),m.wsurl="",delete m.ws,-1<(C=u()(p=s.D.detect.aryWSPool).call(p,m))&&r()(p=s.D.detect.aryWSPool).call(p,C,1)))}},3839:function(e,_,v){v.r(_),_=v(7711);var r=v.n(_),a=(_=v(3662),v.n(_)),o=(_=v(4579),v.n(_)),u=(_=v(5683),v.n(_)),s=v(1695),f=s.I.navInfo,l=(_=s.D.html5).Funs,I={upload:"Uploading...",download:"Downloading...",load:"Processing...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",encode:"Processing..."},c=function(y,p){var m;s.D.config.bDiscardBlankImage&&(m=y._ImgManager.getCurrentImageIndex(),y.IsBlankImage(m)&&y.RemoveImage(m),m=["Blank Discard (",p,"): ",y.ErrorString].join(""),s.D.isFunction(y.__OnPrintMsg)&&y.__OnPrintMsg(m))};(_=(v=_.STwain).prototype).RegisterEvent=function(h,y){return this._resetErr(),!!this._isValid()&&(this[["__",h].join("")]=y,!0)},_.onEvent=function(h,y){this.RegisterEvent(h,y)},_.on=function(h,y){this.RegisterEvent(h,y)},_.OnRefreshUI=function(h,y,p,m){var T=this;return p&&T._ImgManager.refresh(h,T._ImgManager.count(),!0,m),s.I.Lib.isFunction(T.__OnRefreshUI)&&T.__OnRefreshUI(T._ImgManager.getCurrentImageIndex(),T._ImgManager.count()),!0},_._OnRemoteScanStatusAsync=function(h){var y,p,m,T=this;if(h&&2<=h.length){try{var C=new String(h[1]),D=s.D.parse(C)}catch(S){s.D.log(S.message),s.D.log("parse json failed: "+h[1])}D=D||{sequence:0,screen:[]}}return D&&D.sequence&&(0<D.sequence&&D.screen&&0<D.screen.length?(p=D.sequence,m=D.wnds,C=(h=(C=D.screen)[0]).img,s.D.isString(C)&&""!=C&&(y=h.wnd),p&&y&&(h=s.D.one(".ds-img-screen"))&&T._acquireDivEL&&(T._acquireDivEL.evtFun&&(s.D.removeEventListener(h[0],"mouseup",T._acquireDivEL.evtFun),T._acquireDivEL.evtFun=null),h[0].src=C,T._acquireDivEL.evtFun=function(S){S=s.D.stringify({sequence:p,wnds:m=m||"0",wnd:y+"",type:2,x:S.offsetX,y:S.offsetY}),T._innerSendCmd("SendEventToScannerUI",["[",S,"]"].join(""))},s.D.addEventListener(h[0],"mouseup",T._acquireDivEL.evtFun))):T.__closeRemoteScanUI(!1)),s.D.isFunction(T.__OnRemoteScanStatusAsync)&&T.__OnRemoteScanStatusAsync(D),!0},_._OnConsumed=function(h){},_._OnBitmapChanged=function(h,y,U){var m,T=this,C="10"==h[0],D="c2"==h[0],S="0"==h[0]||D||C,M=h[1].split(","),G=h[2],L=h[3],W=T.__maxImagesInBuffer,F=U,H=(U=-1,[]);if(F||""==(F=T.GetCurrentDocumentName())&&(F=T._ImgManager.getWebViewer().GetDefaultFileName()),C?5<h.length&&(H.push(m=h[5]),!T._blts||1!=G&&2!=G||s.I.Lib.isUndef(m.verify)||(U=s.I.DWT.lgct(m.verify),s.D.isFunction(T.__OnLtsverify)&&T.__OnLtsverify(U,1,s.I.DWT.EnumInstance.dwt_browser),s.I.DWT.lavrf(U,1,s.I.DWT.EnumInstance.dwt_browser))):D?(5<h.length&&(H=h[5]),s.D.isArray(H)||(H=[])):(m={},5<h.length&&(m.width=h[5]),6<h.length&&(m.height=h[6]),7<h.length&&(m.bitDepth=h[7]),8<h.length&&(m.resolutionX=h[8]),9<h.length&&(m.resolutionY=h[9]),10<h.length&&(U=h[10]),H.push(m),-1<U&&T._blts&&(1==G||2==G)&&(D=s.I.DWT.lgct(U),s.D.isFunction(T.__OnLtsverify)&&T.__OnLtsverify(D,1))),s.D.log("OnBitmapChanged:"+h),2==G||1==G&&!T.__IfAppendImage?(s.D.each(M,function(De,fe){var V=r()(De);if(De=T._ImgManager.getCurrentImageIndex(),(fe=fe<H.length&&H[fe]?H[fe]:{}).currentFileName=F,isNaN(V)||V<0)return!0;if(S)T._aryBitmapCache.push(V);else for(var je,Se=0;Se<T._aryBitmapCache.length;Se++)if(T._aryBitmapCache[Se]==V)return a()(je=T._aryBitmapCache).call(je,Se,1),!0;if(T._ImgManager.exists(V))return!0;-1<T.__insertingIndex&&(De=T.__insertingIndex),T._ImgManager.insertBefore(De=-1==De?0:De,W,V,fe),-1<T.__insertingIndex&&(T.__insertingIndex=T.__insertingIndex+1)}),s.D.isFunction(T.__OnRefreshUI)&&T.__OnRefreshUI(T._ImgManager.getCurrentImageIndex(),T._ImgManager.count())):1==G&&T.__IfAppendImage?(s.D.each(M,function(X,$){var V=r()(X);if(isNaN(V)||V<0)return!0;if((X=$<H.length&&H[$]?H[$]:{}).currentFileName=F,S)T._aryBitmapCache.push(V);else for(var De,fe=0;fe<T._aryBitmapCache.length;fe++)if(T._aryBitmapCache[fe]==V)return a()(De=T._aryBitmapCache).call(De,fe,1),!0;if(T._ImgManager.exists(V))return!0;T._ImgManager.append(W,V,X)}),s.D.isFunction(T.__OnRefreshUI)&&T.__OnRefreshUI(T._ImgManager.getCurrentImageIndex(),T._ImgManager.count())):3==G&&S?(m=!1,(m=1==M.length&&-1==M[0]||m)?T._ImgManager.clear():s.D.each(M,function(X,$){if(X=r()(X),isNaN(X)||X<0)return!0;T._ImgManager.removeByServerId(F,X)}),s.D.isFunction(T.__OnRefreshUI)&&T.__OnRefreshUI(T._ImgManager.getCurrentImageIndex(),T._ImgManager.count())):4==G?s.D.each(M,function(V,$){if(V=r()(V),isNaN(V)||V<0)return!0;($=$<H.length&&H[$]?H[$]:{}).currentFileName=F,0<=V&&!T.__bLoadingImage&&(T._isBindViewer()&&(0==T._ImgManager.bImageJustChangedInEditor?T._ImgManager.bImageChangedInViewer=!0:(T._ImgManager.bImageJustChangedInEditor=!1,T._ImgManager.bImageChangedInViewer=!1)),-1<(V=T._ImgManager.convertServerIdToClientIndex(V))&&T.OnRefreshUI(V,T._ImgManager.count(),!0,$))}):5==G&&0<=L&&!T.__bLoadingImage&&((U=0<H.length&&H[0]?H[0]:{}).currentFileName=F,0==T.__IfAppendImage&&T.OnRefreshUI(L,T._ImgManager.count(),!0,U),T._ImgManager.refresh(L,T._ImgManager.count(),!1,U)),s.D.isFunction(T.__OnBitmapChanged)){if(!C&&(s.I.navInfo.bFirefox&&!S||!s.I.navInfo.bFirefox&&S))return!0;var Z=[];s.D.each(M,function(De){if(De=r()(De),isNaN(De)||De<0)return!0;-1<(De=T._ImgManager.convertServerIdToClientIndex(De))&&Z.push(De)}),D=T._ImgManager.getCurrentImageIndex(),h=G,1==G&&(h=T.__IfAppendImage?1:2),T.__OnBitmapChanged(Z,h,D,T._ImgManager.count())}},_._OnPostLoad=function(h,y){var p,m,T=this;void 0!==y&&void 0!==y.exception&&void 0!==y.description&&(T._errorCode=y.exception,T._errorString=y.description),s.D.log("OnPostLoad Results:"),y=h[1].split(","),h=s.D.base64.decode(y[0]),p=s.D.base64.decode(y[1]),s.D.log(h),s.D.log(p),s.D.log(y[2]),c(T,"On PostLoad"),0<=(m=T._ImgManager.getCurrentImageIndex())&&T.OnRefreshUI(m),s.D.isFunction(T.__OnPostLoad)&&T.__OnPostLoad(h,p,y[2])},_._OnPostTransfer=function(h){s.D.log("On PostTransfer Results:"+h),c(this,"On PostTransfer"),s.D.isFunction(this.__OnPostTransfer)&&this.__OnPostTransfer()},_._OnPostTransferAsync=function(h){if(s.D.log("On PostTransfer Async Results:"+h),s.D.isFunction(this.__OnPostTransferAsync)){if(h&&2<=h.length)try{var y,p=String(h[1]).replace(/\\/g,"\\\\");(y=s.D.parse(p)).imageId&&(y.imageId=this.objImageIndexManager.convertServerIdToGuid(y.imageId))}catch{s.D.log(h)}this.__OnPostTransferAsync(y=y||{imageId:-1})}},_._OnPreAllTransfersAsync=function(h){var y=this;if(s.D.isFunction(y.__OnPreAllTransfersAsync)){var p={event:"beforeAcquire",result:{}};try{s.D.isArray(h)&&1<h.length&&(p=s.D.parse(h[1]))}catch{}o()(function(){y.__OnPreAllTransfersAsync(p)},10)}},_._OnPostAllTransfers=function(h){var y=this;2<=h.length&&0==y._errorCode&&(y._errorCode=h[1],y._errorString=h[2]),s.D.log("On PostAllTransfers Results:"+h),y.__bLoadingImage=!1,y.__bAcquireImageNow=!1,y.__closeRemoteScanUI(!0),s.D.isFunction(y.__OnPostAllTransfers)&&y.__OnPostAllTransfers(),s.D.License.isLTS()&&s.I.DWT.lcvrf(y)},_._OnResult=function(h){h=h[1],s.D.isFunction(this.__OnResult)&&this.__OnResult(h)},_._OnTransferCancelled=function(h){var y=this;y._ImgManager.getCurrentImageIndex(),y._ImgManager.count(),y.__bLoadingImage=!1,y.__bAcquireImageNow=!1,s.D.isFunction(y.__OnTransferCancelled)&&y.__OnTransferCancelled()},_._OnTransferError=function(h){s.D.isFunction(this.__OnTransferError)&&this.__OnTransferError()},_._OnSourceUIClose=function(h){this.__closeRemoteScanUI(!0),s.D.isFunction(this.__OnSourceUIClose)&&this.__OnSourceUIClose()},_._OnPreTransfer=function(h){s.D.isFunction(this.__OnPreTransfer)&&this.__OnPreTransfer()},_._OnPreAllTransfers=function(h){s.D.isFunction(this.__OnPreAllTransfers)&&this.__OnPreAllTransfers()},_._OnPercentDone=function(h){var y,p,m,T,C,D,S,M,G,L=this,W=!1,F=s.I.Lib,U=!1,H=0;F.isArray(h)&&2<h.length&&(T=h[0],p=h[2],3<h.length&&(S=h[3]),4<h.length&&(C=h[4]),(y=H=h[1])<0?y=0:100<H&&(y=100),y=Math.floor(y),1!=F.cancelFrome&&2!=F.cancelFrome&&5!=F.cancelFrome||(U=C)),!L._bServerPercentDone&&0!=T||((0<H||0==H)&&(1!=F.cancelFrome&&2!=F.cancelFrome||"http"==S&&(W=!0),3!=F.cancelFrome&&4!=F.cancelFrome||"ftp"==C&&(W=!0)),(0==F.cancelFrome&&1==L.__IfShowProgressBar||0!=F.cancelFrome&&1==L.__IfShowCancelDialogWhenImageTransfer)&&(m=F.one(".dynamsoft-progressBar"),h=F.one(".dynamsoft-status"),T=F.one(".dynamsoft-finalMessage"),C=F.one(".dynamsoft-desc"),3!=F.cancelFrome&&4!=F.cancelFrome||(0==S?l.setBtnCancelVisibleForProgress(L,!1):1==S&&l.setBtnCancelVisibleForProgress(L,!0)),D=H<0?(F.progressMessage=p,F.progressMessage):""!=p&&"1/1"!=p?F.progressMessage+"("+p+")":F.progressMessage,T&&T.getEL()&&(G=M="",u()(D).call(D," ...")&&(D=D.replace(" ...","...")),-1!=u()(D).call(D,"(")?(M=D.substr(0,u()(D).call(D,"(")),G=D.substr(u()(D).call(D,"("))):M=D,F.each(I,function(Z,X){-1!=u()(Z).call(Z,M)&&(D=s.I.DWT.CustomizableDisplayInfo.customProgressText[X]+G)}),""==D&&(D="&nbsp;"),T.html(D)),0!=U?(""==U||F.isUndef(U)?U="&nbsp;":F.isString(U)&&30<U.length&&(U=U.substring(0,30)+"..."),C.html(U)):C.html("&nbsp;"),!y&&0!==y||(h&&h.getEL()&&h.html(y+"%"),m&&m.getEL()&&(f.bIE?m[0].objProgressBar?m[0].objProgressBar.setValue(y):m[0].value=y:(f.bEdge&&(m[0].style.display=""),m[0].value=y))),y&&(100<=y||F.dlgRef<=0)&&(o()(function(){m&&m.getEL()&&(f.bIE?m[0].objProgressBar?m[0].objProgressBar.setValue(0):m[0].value=0:(f.bEdge&&(m[0].style.display="none"),m[0].value=0))},1e3),F.dlgRef<=0&&F.closeProgress(L,"OnPercentDone"))),1==W&&(F.isFunction(L.__OnInternetTransferPercentage)&&L.__OnInternetTransferPercentage(y,!1),F.isFunction(L.__OnInternetTransferPercentageEx)&&L.__OnInternetTransferPercentageEx(y,!1)),F.isFunction(L.__OnPercentDone)&&L.__OnPercentDone())},_._OnGetFilePath=function(h){var y,p=h[1].split(",");s.D.log("On GetFilePath Results:"+h),h=s.D.base64.decode(p[3]),y=s.D.base64.decode(p[4]),"-1032"==p[2]&&(p[2]="-1",h=y=""),s.D.isFunction(this.__OnGetFilePath)&&this.__OnGetFilePath(+p[0],+p[1],+p[2],h,y),this.__bOpenFileNow=!1},_.checkErrorString=function(){var h=this.ErrorCode;return-2115===h||(-2003!==h||s.I.DWT.IfHttpPostErrorNoWindow||window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no").document.writeln(this.__HTTPPostResponseString),0===h)},_.__GetLoadEventsNum=function(){var h=0;return s.D.isFunction(this.__OnPostLoad)&&(h|=1),s.D.isFunction(this.__OnGetFilePath)&&(h|=2),h},_._OnPageFocus=function(h){var y,p=this;if(p.bPageFocus=!0,!p._isMobileMode()&&!p.bReady)return s.I.Lib.connectToWS(p);f.bWin&&!p._isMobileMode()&&s.I.DWT.IfAlwaysFocusOnPopupWindow&&(y=s.D.stringify({sequence:0,wnds:0,wnd:"0",type:3,x:0,y:0}),(p.__bAcquireImageNow||h||p.__bOpenFileNow)&&(p.bServerAlwaysFocusOnPopupWindow=!0,p._innerSendCmd("SendEventToScannerUI",["[",y,"]"].join(""))))},_._OnPageBlur=function(h){var y=this;if(f.bWin&&!y._isMobileMode()){if(!y.bReady)return s.I.Lib.connectToWS(y);var p=s.D.stringify({sequence:0,wnds:0,wnd:"0",type:4,x:0,y:0});0==y.bPageFocus&&!h||(y.bPageFocus=!1,(y.__bAcquireImageNow||h||y.__bOpenFileNow)&&(y.bServerAlwaysFocusOnPopupWindow=!1,y._innerSendCmd("SendEventToScannerUI",["[",p,"]"].join(""))))}}},7367:function(e,f,t){t.r(f),f=t(5683);var r=t.n(f),a=(f=t(7711),t.n(f)),o=(f=t(4579),t.n(f)),u=(f=t(5238),t.n(f)),s=(f=t(677),t.n(f)),v=(f=t(4341),t.n(f)),l=t(1695),I=t(1188);l.D.html5=l.D.html5||{};var c=l.D.html5.Funs={notSupportProperty:function(_){},notSupportMethod:function(_){},cformat:function(_,h){if(l.D.isString(_)){var y,p,m,T=r()(_).call(_,"<%");if(-1==T||(y=_.substring(0,T),!(T+2<(p=r()(_).call(_,">",y)))))return _;T=_.substring(T+1,p),p=_.substring(p+1);try{m=l.D.sprintf(T,h)}catch{m=""}return[y,m,p].join("")}return""},sendData:function(_,h,y,p){var m,T,C,D,S;if(!p){try{_.send(h)}catch(M){l.D.log(M)}return!1}for(p=new ArrayBuffer(12),T=y&&y.size?y.size:0,C=(m=(h=new Blob([h])).size)+T,D=new DataView(p),S=0;S<8&&C;S++)D.setUint8(S,C%256),C=a()(C/256);for(S=0;S<4&&m;S++)D.setUint8(8+S,m%256),m=a()(m/256);return p=new Blob([p,h]),_.send(p),0<T&&_.send(y),!(D=null)},getJson:function(T,h,y,p){var m=[];return m.push("{"),m.push('"id":"'),m.push(T.clientId),m.push('"'),p&&(m.push(',"cmdId":"'),m.push(p),m.push('"')),m.push(',"method":"'),m.push(h),m.push('"'),m.push(',"module":"dwt","version":"'),T=[l.D.product.getDWTPrefix(),l.D.product.getServerVersionInfo()].join(""),m.push(T),m.push('"'),null!=y&&(m.push(',"parameter":'),m.push(y)),m.push("}"),m.join("")},refreshImageAfterInvokeFun:function(_,h,y){return 1==y},loadHttpBlob:function(_,h,y,p,m,T,C,D){var S,L,M=!1,G={method:h,dataType:"blob"};if(D&&(G.headers=D),""!=_.HTTPUserName&&(G.username=_.HTTPUserName,G.password=_.HTTPPassword),p){if((l.I.Lib.env.bMobile||l.I.navInfo.bChrome||l.I.navInfo.bFirefox)&&"get"==h)return G.fetchRaw=!0,fetch(y,G).then(function(X){if(!X.ok)throw{httpCode:X.status,errorString:X.statusText};var F=X.headers.get("Content-Length"),U=0,H=X.body.getReader(),Z=new ReadableStream({start:function($){o()(function De(){H.read().then(function(fe){fe.done?$.close():(C({loaded:U+=fe.value.length,total:F}),$.enqueue(fe.value),o()(De,0))})},0)}});return(X=X.headers.get("Content-Type"))&&""!=X||(X="application/octet-stream"),new Response(Z,{headers:{"Content-Type":X}})}).then(function(W){return W.blob()}).then(function(W){m(W)},function(W){W&&W.httpCode?l.D.Errors.HttpDownloadError(_,!1,W.errorString,W.httpCode):l.D.Errors.HttpDownloadUrlError(_),l.D.isFunction(T)&&T({code:_._errorCode,message:_._errorString})}),!0;G.onSuccess=m,l.D.isFunction(C)&&(G.beforeSend=function(W){W.addEventListener("progress",function(F){delete F.totalSize,delete F.position,C(F)},!1)}),M=!0}else l.I.navInfoSync.bIE?(G.dataType="arraybuffer",G.onSuccess=function(Z,F,U){var H;(Z=Z||U.responseData)&&(H=new Uint8Array(Z)),_._errorCode=0,_._errorString="",m(H),M=!(H=null)}):(G.dataType="text",G.contentType="text/plain; charset=x-user-defined",G.mimeType="text/plain; charset=x-user-defined",G.onSuccess=function(W,F,U){for(var H=U.responseText,Z=H.length,X=new Uint8Array(Z),$=0;$<Z;$++)X[$]=H.charCodeAt($);_._errorCode=0,_._errorString="",m(X),M=!(X=null)}),G.headers?l.D.mix(G.headers,{"X-Requested-With":!1}):G.headers={"X-Requested-With":!1};if("post"==h&&(D=_.httpFormFields))try{L=new FormData,l.D.each(D,function(F,U){F instanceof Blob?L.append(U,F,F.name):L.append(U,F)}),l.D.mix(G,{data:L,processData:!1,contentType:!1})}catch{}return S=function(X,U,H){var Z;2==(X=X&&l.D.isArray(X)&&2<X.length?(Z=X[1],X[2]):(Z=U,H)).state&&0==X.status?"abort"===X.statusText?l.D.Errors.HttpDownloadError(_,!0):l.D.Errors.HttpDownloadUrlError(_):l.D.Errors.HttpDownloadError(_,!1,Z,X.status),l.D.isFunction(T)&&T()},G.url=y,G.async=p,G.onError=S,G.onComplete=function(){l.D.bio=!1},h=l.D.ajax(G),p&&(l.D.bio=h),M},combineUrl:function(_,h,y){var p=[],m=h;return void 0!==m&&void 0!==y&&(l.D.isString(m)||(m=String(h)),0==r()(m).call(m,"http://")?(m=m.replace("http://",""),p.push("http://")):0==r()(m).call(m,"https://")?(m=m.replace("https://",""),p.push("https://")):(0==r()(m).call(m,"//")&&(m=m.replace("//","")),p.push(_.IfSSL?"https://":"http://")),p.push(m),r()(m).call(m,":")<0&&(""==_.HTTPPort&&(_.HTTPPort=l.D.detect.ssl?443:80),(!l.D.detect.ssl&&80!=_.HTTPPort||l.D.detect.ssl&&443!=_.HTTPPort)&&(p.push(":"),p.push(_.HTTPPort))),0!==r()(y).call(y,"/")&&p.push("/"),p.push(y),p.join(""))},httpPostUpload:function(_,h,y,p,m,T,C,D,S,M,G,L){if(!y||y.size<=0)return l.D.Errors.UploadFileCannotEmpty(_),l.D.isFunction(L)&&L(),!1;var W,F=_.MaxUploadImageSize,U=y.size,H=y.type;return F<U&&-1!=F?(l.D.Errors.UploadExceededMaxSize(_),l.D.isFunction(L)&&L(),!1):(""===H||H&&H!=_.HttpContentTypeFieldValue?(F=u()(y)||y.webkitSlice||y.mozSlice,l.D.isString(H=y.name)&&""!=H||(H=y.fileName),(W=F.call(y,0,U,_.HttpContentTypeFieldValue)).name=H):W=y,y=null,W.remoteFilename=_.__remoteFilename,U=this.httpUploadByBIO(_,h,W,m,p,T,C,D,S,M,G,L),W=null,U)},httpPostUploadFiles:function(_,h,y,p,m,T,C,D,S,M,G){var L,W=_.MaxUploadImageSize,F=0;if(!y||!l.D.isArray(y)||y.length<=0)return l.D.Errors.UploadFileCannotEmpty(_),l.D.isFunction(G)&&G(),!1;for(L=0;L<y.length;L++){var U=y[L];if(!U||U.size<=0)return l.D.Errors.UploadFileCannotEmpty(_),l.D.isFunction(G)&&G(),!1;var H,Z=U.size,X=U.type;F+=Z,(""===X||X&&X!=_.HttpContentTypeFieldValue)&&(X=u()(U)||U.webkitSlice||U.mozSlice,H=U.name,Z=X.call(U,0,Z,_.HttpContentTypeFieldValue),l.D.isString(H)&&""!=H||(H=U.fileName),Z.name=this.cformat(H,L+1),y[L]=Z),y[L].remoteFilename=this.cformat(_.__remoteFilename,L+1),U=null}if(W<F&&-1!=W)return l.D.Errors.UploadExceededMaxSize(_),l.D.isFunction(G)&&G(),!1;for(ret=this.httpUploadByBIO(_,h,y,m,p,T,C,D,S,!1,M,G),L=0;L<y.length;L++)y[L]=null;return y=null,ret},httpPostUploadString:function(_,h,L,p,m,T,C,D,S,M,G){if(""==L)return l.D.Errors.UploadFileCannotEmpty(_),l.D.isFunction(G)&&G(),!1;if((W=_.MaxUploadImageSize)<L.length&&-1!=W)return l.D.Errors.UploadExceededMaxSize(_),l.D.isFunction(G)&&G(),!1;(W=new Blob([L],{type:"text/plain"})).name=p,L=this.httpUploadByBIO(_,h,W,m,!0,T,C,D,S,!1,M,G);var W=null;return L},httpUploadByBIO:function(_,h,y,p,m,T,C,D,S,M,G,L){var W=_.httpFormFields,F=new FormData;return l.D.each(W,function(U,H){U instanceof Blob?F.append(H,U,U.name):F.append(H,U)}),l.D.bio=new l.D.BIO({action:h,data:F,async:m,retry:D,bOnlyEmptyIsOK:S}),(W=l.D.bio.get("uploadType"))&&((h=W.get("ajaxConfig"))&&h.headers&&T&&l.D.mix(h.headers,T),0<=p&&W.set("blockSize",p),_.__withCredentials&&l.D.mix(h.xhrFields,{withCredentials:!0})),_.__HTTPPostResponseString=!1,l.D.bio.on(l.D.BIO.event.SUCCESS,function(U){l.D.bio=!1,_.__HTTPPostResponseString=U&&l.D.isString(U.response)?U.response:"",l.D.isFunction(_.__OnHttpUploadStatus)&&_.__OnHttpUploadStatus(U={fileName:U.name,percentage:100,statusCode:200,responseString:_.__HTTPPostResponseString}),l.D.isFunction(G)&&G(_.__HTTPPostResponseString)}),l.D.bio.on(l.D.BIO.event.ERROR,function(U){var H=U&&U.canceled,Z=!1,X=0;l.D.bio=!1,_.__HTTPPostResponseString=U&&l.D.isString(U.response)?U.response:"",H||(U&&U.msg&&(Z=U.msg),U&&U.httpStatus&&(X=U.httpStatus)),l.D.Errors.UploadError(_,H,Z,X),l.D.isFunction(_.__OnHttpUploadStatus)&&_.__OnHttpUploadStatus(H={fileName:U.name,percentage:100,statusCode:X,responseString:_.__HTTPPostResponseString}),l.D.isFunction(L)&&L(_.__HTTPPostResponseString)}),(C||l.D.isFunction(_.__OnHttpUploadStatus))&&(l.D.bio.on(l.D.BIO.event.PROGRESS,function(U){delete U.totalSize,delete U.position;var Z=0===U.total?100:Math.round(100*U.loaded/U.total);[U.loaded," / ",U.total].join(""),l.D.isFunction(_.__OnHttpUploadStatus)&&_.__OnHttpUploadStatus({fileName:U.name,percentage:Z=99<Z?99:Z,statusCode:0,responseString:""}),C&&_._OnPercentDone([0,Z,"","http",U.name])}),C&&_._OnPercentDone([0,-1,l.I.MSG.Uploading,"http"]),l.D.isFunction(_.__OnHttpUploadStatus)&&(m="",l.D.isArray(y)&&0<y.length||(y&&y.name&&""!=y.name?m=y.name:y&&y.fileName&&(m=y.fileName)),_.__OnHttpUploadStatus({fileName:m,percentage:0,statusCode:0,responseString:""}))),M&&M.bCancel?(M.st=2,l.D.isFunction(L)&&L(!1),!1):l.D.bio.upload(y)},httpPutImage:function(_,S,y,p,m,T,C){var D=!0;return S={method:"PUT",url:S,hasContent:!0,processData:!1,async:p,data:y,onSuccess:m,onError:function(){D=!1,l.D.isFunction(T)&&T()},onComplete:function(){l.D.bio=!1},beforeSend:function(M){l.D.isFunction(C)&&M.upload.addEventListener("progress",function(G){delete G.totalSize,delete G.position,C(G)},!1)}},""!=_.HTTPUserName&&(S.username=_.HTTPUserName,S.password=_.HTTPPassword),p||l.D.mix(S,{headers:{"X-Requested-With":!1}}),l.D.bio=l.D.ajax(S),D},dialog:!1,dialogRef:0,showMask:function(_){l.D.log("showMask:"+_+"--"+this.dialogRef),0==this.dialogRef&&l.D.detect.showMask(),this.dialogRef++},hideMask:function(_){var h=this;l.D.log("hideMask:"+_+"--"+h.dialogRef),1<h.dialogRef?h.dialogRef--:h.dialogRef<=1&&(l.D.detect.hideMask(),h.dialog=!1,h.dialogRef=0)},setBtnCancelVisibleForProgress:function(_,h){(0==l.D.cancelFrome&&1==_.__IfShowProgressBar||0!=l.D.cancelFrome&&1==_.__IfShowCancelDialogWhenImageTransfer)&&l.D.setBtnCancelVisibleForProgress(h)},EVENTS:["OnPostAllTransfers","OnPostTransfer","OnPostLoad","OnPreTransfer","OnPreAllTransfers","OnResult","OnTransferCancelled","OnTransferError","OnSourceUIClose","OnGetFilePath","OnPercentDone","OnPostTransferAsync","OnPreAllTransfersAsync","OnRemoteScanStatusAsync","OnConsumed"],SEND_BACK_EVENTS:["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnGetFilePath","OnPostLoad"],handleOnBitmapChangedEvent:function(_,h,y){var p="_OnBitmapChanged";return l.D.isFunction(_[p])&&_[p](h.result,h,y),!1},handleEvent:function(_,h,y){var p=h.result[0],m=_._objWS,T=!1;return l.D.each(c.EVENTS,function(C,D){if(h.event===C)return C=["_",C].join(""),T=!0,l.D.isFunction(_[C])&&_[C](h.result,h),!1}),T?(l.D.log("handled event:"+h.event),l.D.each(c.SEND_BACK_EVENTS,function(C,D){return!c.isServerInvalid(_)&&(h.event===C?(l.D.log("sendback event:"+h.event),c.sendData(m,c.getJson(_,h.event,(0,I.dv)(p),0),!1,!0),!1):void 0)})):(l.D.each(l.D.Addon_Events,function(C,D){if(h.event===C)return C=["_",C].join(""),T=!0,l.D.isFunction(_[C])&&_[C](h.result),!1}),T&&(l.D.log("handled addon event:"+h.event),l.D.each(l.D.Addon_Sendback_Events,function(C,D){return!c.isServerInvalid(_)&&(h.event===C?(l.D.log("sendback addon event:"+h.event),c.sendData(m,c.getJson(_,h.event,(0,I.dv)(p),0),!1,!0),!1):void 0)}))),T},getImageType:function(_){if(void 0===_||_.length<4)return-1;var h=s()(_).call(_,".");return-1===h?-1:".bmp"===(_=u()(_).call(_,h).toLowerCase())||".dib"===_?l.I.DWT.EnumDWT_ImageType.IT_BMP:".jpg"===_||".jpe"===_||".jpeg"===_||".jfif"===_?l.I.DWT.EnumDWT_ImageType.IT_JPG:".tif"===_||".tiff"===_?l.I.DWT.EnumDWT_ImageType.IT_TIF:".png"===_?l.I.DWT.EnumDWT_ImageType.IT_PNG:".pdf"===_?l.I.DWT.EnumDWT_ImageType.IT_PDF:".jp2"===_||".j2k"===_||".j2c"===_?l.I.DWT.EnumDWT_ImageType.IT_J2K:-1},addImageFileExt:function(_,h){var y,p=_.substring(s()(_).call(_,".")).toLowerCase();return".bmp"==p||".dib"==p||".jpg"==p||".jpe"==p||".jpeg"==p||".jfif"==p||".tif"==p||".tiff"==p||".png"==p||".pdf"==p?_:(h==l.I.DWT.EnumDWT_ImageType.IT_BMP?y=[_,".bmp"].join(""):h==l.I.DWT.EnumDWT_ImageType.IT_JPG?y=[_,".jpg"].join(""):h==l.I.DWT.EnumDWT_ImageType.IT_PNG?y=[_,".png"].join(""):h==l.I.DWT.EnumDWT_ImageType.IT_TIF?y=[_,".tif"].join(""):h==l.I.DWT.EnumDWT_ImageType.IT_PDF?y=[_,".pdf"].join(""):h==l.I.DWT.EnumDWT_ImageType.IT_J2K&&(y=[_,".jp2"].join("")),y)},replaceLocalFilename:function(_){return void 0===_?"":(_=(_=String(_)).replace(/\\/g,"\\\\"),l.I.navInfoSync.bFileSystem?decodeURI(_):_)},GetImageInfo:function(_,h){return-1==(h=_._ImgManager.convertClientIndexToServerId(h))?(l.D.Errors.IndexOutOfRange(_),!1):_._innerFun("GetImageInfo",(0,I.dv)(h))},isServerInvalid:function(_){var h=!_.bReady||null===_._objWS,y=_.__bMustUpgradeService;return h?l.D.Errors.Server_Invalid(_):y?l.D.Errors.MustUpgradeService(_):_._destroy&&l.D.Errors.Destroyed(_),h||y||-2208==_._errorCode||_._destroy},isHttpServerInvalid:function(_){var h=!_.bReady||null===_.httpUrl,y=_.__bMustUpgradeService;return h?l.D.Errors.Server_Invalid(_):y&&l.D.Errors.MustUpgradeService(_),h||y||-2208==_._errorCode},getBlobTypeByImageType:function(_){var h="application/octet-stream";switch(_){case 0:h="image/bmp";break;case 1:h="image/jpeg";break;case 2:h="image/tiff";break;case 3:h="image/png";break;case 4:h="application/pdf";break;case 14:h="image/jp2"}return h},DEF:function(_,h,y,p){var m;0!==y&&1!==y?m=y:(m={},y&&(m.set=1==p?function(T){return!l.D.isNumber(T=+T)||isNaN(T)?(l.D.Errors.InvalidValue(_),!1):(_._resetErr(),!!_._isValid()&&_._innerFun(h,(0,I.dv)(T)))}:2==p?function(T){return l.D.isBoolean(T)?(_._resetErr(),!!_._isValid()&&_._innerFun(h,(0,I.dv)(T))):(l.D.Errors.InvalidValue(_),!1)}:function(T){return l.D.isString(T)?(_._resetErr(),!!_._isValid()&&_._innerFun(h,(0,I.dv)(T))):(l.D.Errors.InvalidValue(_),!1)})),m.get||(m.get=function(){return _._resetErr(),!!_._isValid()&&("CurrentSourceName"==h?(T=_._innerFun(h),_.__currentImageCaptureDriverType==l.I.DWT.EnumDWT_Driver.TWAIN64&&0<T.length?"Twain64-"+T:_.__currentImageCaptureDriverType==l.I.DWT.EnumDWT_Driver.ICA&&_.__serverPlatform==l.I.DWT.EnumDWT_PlatformType.enumMac&&0<T.length?"ICA-"+T:T):_._innerFun(h));var T}),h in _||v()(_,h,m)},_DEF_NOT_SUPPORT_MOBILE_A:function(_,h,y){var p={get:function(){return _._mobileNotSupport(h)}};1!==y&&!l.D.isUndef(y)||(p.set=p.get),h in _||v()(_,h,p)},DEF_NOT_SUPPORT_MOBILE:function(_,h,y){l.D.isArray(h)?l.D.each(h,function(p){c._DEF_NOT_SUPPORT_MOBILE_A(_,p,y)}):c._DEF_NOT_SUPPORT_MOBILE_A(_,h,y)},callbacks:[],pushCallback:function(_,h,y){c.callbacks({method:_,callback:h,ticks:y})},refreshUIRef:0,makeParams:I.dv}},1505:function(e,n,t){t.r(n);var r=t(1695);r.D.LS={isSupportLS:function(){var a=r.I.navInfoSync,o=!1;if(!a.bEdge||!a.bFileSystem)try{o=!!window.localStorage}catch{}return o},item:function(a,o,u){var s=null;return this.isSupportLS()&&null!==(s=o?(localStorage.setItem(a,o),o):localStorage.getItem(a))?s:u},removeItem:function(a){return!!this.isSupportLS()&&(localStorage.removeItem(a),!0)}}},8743:function(e,Se,t){t.r(Se);var r,a,o,u,s,f,v,l,I,c,_,h,y,p,m,T,C,D,S,M,G,L,W=t(9623),F=(Se=t(5005),t.n(Se)),U=(Se=t(4579),t.n(Se)),H=(Se=t(5683),t.n(Se)),Z=(Se=t(9927),t.n(Se)),X=(Se=t(7711),t.n(Se)),$=(Se=t(9798),t.n(Se)),V=t(1695),De=t(3887),fe=t(668),je=V.D.html5.STwain,mt=(Se=je.prototype,0),Ce=null,we=function(){return new V.I.Imagecore},Ve=function(){return new V.I.ImageProc},bt=function(){return new V.I.PdfReader},St=(V.D.MobileFuns={makeParams:function(){return arguments},_innerSaveLocal:function(Pe,ae,Ze){var Ne,Qe=window,Re=V.I.navInfo,ze=V.I.navInfoSync;return Qe=Qe.requestFileSystem||Qe.webkitRequestFileSystem||Qe.mozRequestFileSystem,!Re.biPad&&!Re.biPhone||Qe||!(ze.bSafari&&F()(ze.strBrowserVersion)<13)&&ze.bSafari?((Qe=document.createElementNS("http://www.w3.org/1999/xhtml","a")).href=Pe,Qe.download=ae,Qe.target="_blank",document.body.appendChild(Qe),Re.bEdge?Qe.click():((ze=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1),Qe.dispatchEvent(ze)),document.body.removeChild(Qe),!0):(Ne=window.open(Pe,"","",!1),U()(function(){Ne.document.title=ae},100),!0)},saveLocal:function(Pe,ae,Ze){V.D.isString(Pe)&&-1<H()(Pe).call(Pe,"blob:http://")?V.D.MobileFuns._innerSaveLocal(Pe,ae,Ze):Pe instanceof Blob?V.D.MobileFuns._innerSaveLocal(Z().createObjectURL(Pe),ae,Ze):Pe instanceof ArrayBuffer?V.D.MobileFuns._innerSaveLocal(Z().createObjectURL(new Blob([Pe])),ae,Ze):V.D.MobileFuns._innerSaveLocal(Pe,ae,Ze)},dataURLtoBlob:function(Re){var ae,Ze,Ne,ze=(Re=Re.split(","))[0].match(/:(.*?);/)[1];try{ae=atob(Re[1])}catch{return ae="",!1}for(Ze=ae.length,Ne=new Uint8Array(Ze);Ze--;)Ne[Ze]=ae.charCodeAt(Ze);return new Blob([Ne],{type:ze})},appendTiffPage:function(Qe,ae,Ze,Ne){var Re=Qe,ze=ae,ot=(Qe=Ze.context.bShowPercentProgress,Re._aryTiffTag.length);if(0<ot){32<ot&&(ot=32);for(var Lt=0;Lt<ot;Lt++)ze=(ze=ze.then(function(Ot){var Bt;return Ze.context.tagIndex=0,V.D.log("[Wasm]Save Image: page "+Ze.context.cIndex+" add tiff tag "+(Bt=Re._aryTiffTag[Bt=Ze.context.tagIndex]).tag),Ze.addTag(Bt.tag,Bt.content,Bt.UseBase64Encoding)})).then(function(){Ze.context.tagIndex=Ze.context.tagIndex+1})}return ze=ze.then(function(){V.D.log("[Wasm]Save Image: page "+Ze.context.cIndex+" add tiff tag successfully");var Ot=Ze.context.aryIndex,Bt=Ze.context.cIndex;return Re._ImgManager.getWebViewer().GetImageData(Re._ImgManager.getUidByIndex(Ot[Bt]))}),ze=(ze=Re._scaleDownThreshold<=0?ze:(ze=ze.then(function(Ot){var Bt=Ot&&Ot.metadata?Ot.metadata:{},Ft=(V.D.log("[Wasm]Save Image: scale"),1==(Ze.context.metaData=Bt).bitDepth);return V.I.ImageProcWrapper.resize(Ot.oriData,Bt.width,Bt.height,Re._scaleDownThreshold,5,Ft)})).then(function(Ot){return V.D.log("[Wasm]Save Image: scaled"),{oriData:Ot.imageData,metadata:Ze.context.metaData}})).then(function(Ot){var Bt=V.I.DWT.EnumDWT_ImageType.IT_ALL,Ft=Ze.context.tiffFormat,It=(V.D.log("[Wasm]Save Image: page "+Ze.context.cIndex+" append to tiff"),1==Ot.metadata.bitDepth);return Ze.appendImage(Ot.oriData,Bt,Ft,Re._jpgQuality,It)}),(ze=Qe?ze.then(function(){var Ot=Ze.context.aryIndex.length,Bt=Ze.context.cIndex+1;Re._OnPercentDone([0,100*Bt/+Ot,Bt+"/"+Ot,""])}):ze).then(function(){var Ot=Ze.context.cIndex;return Ze.context.cIndex=Ot+1,Ot+1})},unloadWasm:function(){return Ce&&(Ce.terminate(),Ce=null),V.D.Promise.resolve()},loadCallback:function(Pe){if(Pe&&Pe.customData){var ae,Bt,Ze=Pe.fPdfReader,Ne=Pe.imgCore,Re=(Pe=(Bt=Pe.customData).src,Bt.imgType),ze=Bt.index,Qe=Bt.password,ot=Bt.resolution,Lt=Bt.convertMode,Ot=!1;if(Re==(Bt=V.I.DWT.EnumDWT_ImageType).IT_PDF)return Ze||(Ze=bt(),Ot=!0),ae=function(Kt){Ze.close(),Ot&&Ze.terminate()},Ze.open(Pe,Qe).then(function(It){var Kt,tn,en;return(V.I.navInfoSync.bMobile||V.I.navInfoSync.bPad)&&(Kt=5,tn=85,en=3840),Ze.readPage(ze,ot,Lt,V.I.DWT.EnumDWT_ImageType.IT_JPG,!1,!1,V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad,Kt,tn,en)},ae).then(function(It){return Ze.close(),Ot&&Ze.terminate(),It.imageData},ae);if(Re==Bt.IT_TIF)return Ne||(Ne=we(),Ot=!0),ae=function(Kt){Ot&&Ne.terminate()},Ne.openTiff(Pe).then(function(It){var Kt,tn,en;return(V.I.navInfoSync.bMobile||V.I.navInfoSync.bPad)&&(Kt=5,tn=85,en=3840),Ne.readTiff(ze,V.I.DWT.EnumDWT_ImageType.IT_JPG,!1,V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad,Kt,tn,en)}).then(function(It){return Ot&&Ne.terminate(),It.imageData},ae);if(Re==Bt.IT_PNG||Re==Bt.IT_JPG||Re==Bt.IT_BMP)return Ne=Ne||we(),Ot=!0,Qe=_this._jpgQuality,ae=function(Kt){Ot&&Ne.terminate()},Re=V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad,(V.I.navInfoSync.bMobile||V.I.navInfoSync.bPad)&&(Ot&&Ne.terminate(),r1&&(3840<r1.imageWidth||3840<r1.imageHeight))?V.I.ImageProcWrapper.resizeImageWithMeta(Pe,r1,5,Qe,3840).then(function(It){return It.imageData}):Ne.readImage(Pe,V.I.DWT.EnumDWT_ImageType.IT_JPG,Qe,!1,Re).then(function(It){return Ot&&Ne.terminate(),It.imageData},ae)}return V.D.Promise.resolve()},convertOutputType:function(Pe){return Pe},isBlobUrl:function(Pe){return V.D.isString(Pe)&&-1<H()(Pe).call(Pe,"blob:http://")},revoke:function(Pe){return!V.D.MobileFuns.isBlobUrl(Pe)||(Z()||window.webkitURL).revokeObjectURL(Pe)}},Se._innerSendToMobile=function(Pe,ae,Ze,Ne,Re){var ze=this;return"GetLicenseInfo"==Pe||"SetLTSLicense"==Pe?(V.D.detect.showMask(ze),a(ze,ae).then(function(Qe){V.D.hideMask(),V.D.isFunction(Ne)&&Ne(Qe)},function(Qe){V.D.hideMask(),V.D.Errors.GetLicenseInfoFailed(ze,Qe),Re&&Re(ze._errorCode,ze._errorString)})):V.D.License.checkProductKey(ze,{Core:!0,Wasm:!0},!0)?("SaveImage"==Pe?r(ze,ae).then(function(Qe){Ne&&Ne(Qe.blobData,Qe.type,Qe.MD5)},function(){V.D.isFunction(Re)&&Re(ze._errorCode,ze._errorString)}):ze._innerSendToMobileV2(Pe,ae).then(Ne,function(){V.D.isFunction(Re)&&Re(ze._errorCode,ze._errorString)}),!0):(Re&&Re(ze._errorCode,ze._errorString),!1)},Se._innerSendToMobileV2=function(Pe,ae){var Ze=this;return"GetLicenseInfo"==Pe||"SetLTSLicense"==Pe?a(Ze,ae):V.D.License.checkProductKey(Ze,{Core:!0,Wasm:!0},!0)?"LoadImageFromBinary"==Pe?f(Ze,ae):"RotateEx"==Pe?v(Ze,ae):"Flip"==Pe?I(Ze,ae):"Mirror"==Pe?c(Ze,ae):"Invert"==Pe?_(Ze,ae):"SaveImage"==Pe?r(Ze,ae):"Crop"==Pe?h(Ze,ae):"Erase"==Pe?y(Ze,ae):"ChangeImageSize"==Pe?p(Ze,ae):"GetSkewAngleOnly"==Pe?m(Ze,ae):"GetSkewAngle"==Pe?T(Ze,ae):"ConvertToGrayScale"==Pe?C(Ze,ae):"ConvertToBWScale"==Pe?D(Ze,ae):"SetDPI"==Pe?S(Ze,ae):"SetImageWidth"==Pe?M(Ze,ae):"IsTextBasedPDF"==Pe?G(Ze,ae):"GetMD5"==Pe?o(Ze,ae):"ChangeBrightness"==Pe?s(Ze,ae):"ChangeContrast"==Pe?u(Ze,ae):V.D.Promise.reject({code:-1e3,message:"invalid method: "+Pe}):V.D.Promise.reject(V.I.DWT.licenseException)},function(){var ae=V.I.DWT.ProductKey;return V.D.License.isLTS()&&V.I.WasmEnv?V.I.WasmEnv.productKey:ae});G=function(ae,Qe){var Ne,Re,ze,ot=V.I.DWT.EnumDWT_ImageType;return(Qe=Qe[0])instanceof FileList?Ne=Qe[0]:Qe instanceof Blob||!(Qe instanceof ArrayBuffer||Qe instanceof Uint8Array)?Ne=Qe:(Ne=new Blob([Qe]),Re=(0,De.Ho)(Qe)),V.D.isUndefined(Re)&&(Ne.type?"application/pdf"==Ne.type&&(Re=ot.IT_PDF):Re=V.D.html5.Funs.getImageType(Ne.name)),Re==ot.IT_PDF?(ze=bt(),V.D.detect.showMask(ae),ze.open(Ne,ae._pdfPassword).then(function(Lt){return V.D.hideMask(),ze.close(),ze.terminate(),Lt.isTextBased},function(Lt){throw V.D.hideMask(),V.D.Errors.LoadImageFailed(ae,Lt),ze.close(),ze.terminate(),{code:ae._errorCode,message:ae._errorString}})):(V.D.Errors.LoadImageFailed(ae,"not pdf."),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString}))},f=function(Pe,ae){var Ze,Ne,Re,ze,ot,Lt=ae[0],Ot=ae[1],Bt=!1,Ft=0,It=!1,Kt=V.I.DWT.EnumDWT_ImageType,tn=!1;if(3<ae.length&&(Ze=ae[3]),4<ae.length&&(It=ae[4]),5<ae.length&&(tn=ae[5]),Ze||""==(Ze=Pe.GetCurrentDocumentName())&&(Ze=Pe._ImgManager.getWebViewer().GetDefaultFileName()),Lt instanceof FileList?Ne=Lt[0]:Lt instanceof Blob||!(Lt instanceof ArrayBuffer||Lt instanceof Uint8Array)?Ne=Lt:(Ne=new Blob([Lt]),ze=(0,De.Ho)(Lt)),V.D.isUndefined(Ne))return V.D.Errors.InvalidSourceFile(Pe),V.D.Promise.reject({code:Pe._errorCode,message:Pe._errorString});if(V.D.isUndefined(ze))if(Ne.type){if(-1==(ze="application/pdf"==Ne.type?Kt.IT_PDF:"image/png"==Ne.type?Kt.IT_PNG:"image/jpeg"==Ne.type||"image/jpg"==Ne.type?Kt.IT_JPG:"image/bmp"==Ne.type?Kt.IT_BMP:"image/tiff"==Ne.type||"image/tif"==Ne.type?Kt.IT_TIF:"image/jp2"==Ne.type?Kt.IT_J2K:V.D.html5.Funs.getImageType(Ne.name))&&"application/octet-stream"==Ne.type)return new V.D.Promise(function(en,Ee){var _e=new FileReader;_e.onload=function(Ae){ae[0]=Ae=Ae.target.result,en(ae)},_e.readAsArrayBuffer(Ne)}).then(function(en){return f(Pe,en)})}else ze=V.D.html5.Funs.getImageType(Ne.name);return Re=Ne.name,ze==Kt.IT_JPG||ze==Kt.IT_PNG||ze==Kt.IT_BMP||ze==Kt.IT_J2K?(It||V.D.detect.showMask(Pe),Lt=Pe._jpgQuality,(Bt=we()).readImage(Ne,Kt.IT_JPG,Lt,!1,V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad).then(function(en){return(V.I.navInfoSync.bMobile||V.I.navInfoSync.bPad)&&en&&(3840<en.imageWidth||3840<en.imageHeight)?V.I.ImageProcWrapper.resizeImageWithMeta(Ne,en,5,Pe._jpgQuality,3840):en}).then(function(We){var Ee=0,_e=(Ot?(Ee=fe.zW,tn&&(We.imageBitDepth=1)):1==We.originalFormat?Ee=Kt.IT_BMP:2==We.originalFormat?Ee=Kt.IT_JPG:3==We.originalFormat?Ee=Kt.IT_PNG:14==We.originalFormat&&(Ee=Kt.IT_J2K),Ee={src:We.imageData,imgType:We.imageType,verify:Ee,dataType:"url"},Ne instanceof File||2==We.originalFormat&&Ne instanceof Blob&&(Ee.src=Ne),ae[2]),Ae={};Ae.width=We.imageWidth,Ae.height=We.imageHeight,Ae.bitDepth=We.imageBitDepth,Ae.resolutionX=We.imageXResolution,Ae.resolutionY=We.imageYResolution,_e&&(Ae.oriBlobData=_e),Ee.metadata=Ae,mt++,We=!1;try{Ee.imageId=mt,Pe._OnBitmapChanged(["10",""+mt,1,Pe._ImgManager.getCurrentImageIndex(),Pe._ImgManager.count(),Ee],null,Ze)}catch(pe){We=!0,V.D.Errors.SystemExceptionError(Pe,pe.message)}if(It||V.D.hideMask(),!We&&V.D.isFunction(Pe.__OnPostLoad))try{Pe.__OnPostLoad("",Re,ze)}catch(pe){We=!0,V.D.Errors.SystemExceptionError(Pe,pe.message)}if(Bt&&Bt.terminate(),V.I.DWT.lavrf_(1,V.I.DWT.EnumInstance.dwt_browser),We)throw{code:Pe._errorCode,message:Pe._errorString}},function(en){throw V.D.Errors.LoadImageFailed(Pe,en),It||V.D.hideMask(),Bt&&Bt.terminate(),{code:Pe._errorCode,message:Pe._errorString}})):ze==Kt.IT_PDF?((ot=bt()).context={},V.D.showProgress(Pe),Pe._OnPercentDone([0,-1,V.I.MSG.LoadingPdf,""]),ot.open(Ne,Pe._pdfPassword).then(function(en){var Ee,_e=en.PdfCount;if(en.isTextBased&&2==Pe._pdfRealConvertMode)return V.I.Lib.closeProgress(Pe),2==Pe._pdfConvertMode?V.I.Lib.Errors.LoadTextPDFButSetImageOnly(Pe):V.I.Lib.Errors.LoadTextPDFButNoPdfrLicenseErr(Pe),ot.close(),ot.terminate(),V.D.Promise.reject({code:Pe._errorCode,message:Pe._errorString});for(Pe._OnPercentDone([0,0,"0/"+_e,""]),Ee=V.D.Promise.resolve(0),ot.context.cIndex=0,ot.context.pdfCount=_e,Ft=0;Ft<_e;Ft++)Ee=(Ee=Ee.then(function(){var Ae,We,pe;return(V.I.navInfoSync.bMobile||V.I.navInfoSync.bPad)&&(Ae=5,We=85,pe=3840),ot.readPage(ot.context.cIndex,Pe._pdfResolution,Pe._pdfRealConvertMode,V.I.DWT.EnumDWT_ImageType.IT_JPG,!1,!1,V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad,Ae,We,pe)})).then(function(Ae){var We=ot.context.cIndex,pe=We+1,Ie={},$e=V.I.DWT.EnumDWT_ImageType.IT_PDF,st=(1==Ae.realReadMode&&($e=fe.KX),Pe._OnPercentDone([0,100*pe/+(st=ot.context.pdfCount),pe+"/"+st,""]),V.I.Lib.isArray(Ae.imageInfos)&&0<Ae.imageInfos.length&&(Ie.width=(pe=Ae.imageInfos[0]).imageWidth,Ie.height=pe.imageHeight,Ie.bitDepth=pe.imageBitDepth,Ie.resolutionX=pe.imageXResolution,Ie.resolutionY=pe.imageYResolution),mt++,{src:Ae.imageData,dataType:"url",imgType:V.I.DWT.EnumDWT_ImageType.IT_PDF,verify:$e,index:Ae.pageIndex,metadata:Ie,imageId:mt});try{Pe._OnBitmapChanged(["10",""+mt,1,Pe._ImgManager.getCurrentImageIndex(),Pe._ImgManager.count(),st],null,Ze)}catch(Nt){throw V.I.Lib.Errors.SystemExceptionError(Pe,Nt.message),0}ot.context.cIndex=We+1});return Ee.then(function(){V.I.Lib.closeProgress(Pe),ot.close(),ot.terminate(),V.I.DWT.lavrf_(1,V.I.DWT.EnumInstance.dwt_browser),V.I.Lib.isFunction(Pe.__OnPostLoad)&&Pe.__OnPostLoad("",Re,ze)},function(Ae){throw V.I.Lib.closeProgress(Pe),ot.close(),ot.terminate(),Ae&&V.I.Lib.Errors.LoadImageFailed(Pe,Ae),{code:Pe._errorCode,message:Pe._errorString}})},function(en){throw V.I.Lib.closeProgress(Pe),ot.close(),ot.terminate(),en&&V.I.Lib.Errors.LoadImageFailed(Pe,en),{code:Pe._errorCode,message:Pe._errorString}})):ze==Kt.IT_TIF?(Bt=we(),V.D.showProgress(Pe),Pe._OnPercentDone([0,-1,V.I.MSG.LoadingTiff,""]),Bt.openTiff(Ne).then(function(en){var Ee=en.pageCount,_e=en.imageInfos,Ae=V.D.Promise.resolve(0);Pe._OnPercentDone([0,0,"0/"+Ee,""]);for(var We=0;We<Ee;We++)Ae=Ae.then(function(pe){var Ie,$e,st;return(V.I.navInfoSync.bMobile||V.I.navInfoSync.bPad)&&(Ie=5,$e=85,st=3840),Bt.readTiff(pe,V.I.DWT.EnumDWT_ImageType.IT_JPG,!1,V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad,Ie,$e,st).then(function(Pt){var et=(Pe._OnPercentDone([0,100*(et=pe+1)/+Ee,et+"/"+Ee,""]),mt++,{src:Pt.imageData,dataType:"url",imgType:V.I.DWT.EnumDWT_ImageType.IT_TIF,verify:V.I.DWT.EnumDWT_ImageType.IT_TIF,index:pe,metadata:_e[pe],imageId:mt});try{Pe._OnBitmapChanged(["10",""+mt,1,Pe._ImgManager.getCurrentImageIndex(),Pe._ImgManager.count(),et],null,Ze)}catch(lt){throw V.I.Lib.Errors.SystemExceptionError(Pe,lt.message),0}return pe+1})});return Ae.then(function(){V.I.Lib.closeProgress(Pe),Bt.closeTiff(),Bt.terminate(),V.I.DWT.lavrf_(1,V.I.DWT.EnumInstance.dwt_browser),V.I.Lib.isFunction(Pe.__OnPostLoad)&&Pe.__OnPostLoad("",Re,ze)},function(pe){throw V.I.Lib.closeProgress(Pe),Bt.closeTiff(),Bt.terminate(),pe&&V.I.Lib.Errors.LoadImageFailed(Pe,pe),{code:Pe._errorCode,message:Pe._errorString}})},function(en){throw V.I.Lib.closeProgress(Pe),Bt.closeTiff(),Bt.terminate(),V.I.Lib.Errors.LoadImageFailed(Pe,en),{code:Pe._errorCode,message:Pe._errorString}})):(V.D.Errors.LoadImageFailed(Pe,"invalid image type."),V.D.Promise.reject({code:Pe._errorCode,message:Pe._errorString}))},v=function(ae,Ze){var Ne=Ze[0],Re=Ze[1],ze=Ze[2],Qe=Ze[3],ot=Ze[4],Lt=(V.D.isUndefined(Re)&&(Re=0),V.D.isUndefined(ze)&&(ze=!0),(V.D.isUndefined(Qe)||Qe<1||3<Qe)&&(Qe=3),V.D.isUndefined(ot)&&(ot="FFFFFF"),Re<0?Re=Re%360+360:360<=Re&&(Re%=360),V.D.detect.showMask(ae),Ve()),Ot=ae._ImgManager.convertClientIndexToServerId(Ne);return Lt.context={},ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(Bt){return Lt.context.metadata=Bt&&Bt.metadata?Bt.metadata:{},Lt.initImage(Bt.oriData)}).then(function(){if(0!=Re)return Lt.rotate(Re,ot,ze,Qe)}).then(function(){return Lt.getImage()}).then(function(Bt){return(V.I.navInfoSync.bMobile||V.I.navInfoSync.bPad)&&Bt&&(3840<Bt.imageWidth||3840<Bt.imageHeight)?V.I.ImageProcWrapper.resizeImageWithMeta(Bt.imageData,Bt,5,ae._jpgQuality,3840):Bt}).then(function(Ft){"width"in Ft&&(Ft.imageWidth=Ft.imageWidth),"height"in Ft&&(Ft.imageHeight=Ft.imageHeight),Ft={src:Ft.imageData,imgType:V.D.MobileFuns.convertOutputType(Ft.imageType),dataType:"url",metadata:{width:Ft.imageWidth,height:Ft.imageHeight}};var It=!1;try{ae._OnBitmapChanged(["10",""+Ot,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),Ft])}catch(Kt){It=!0,V.D.Errors.SystemExceptionError(ae,Kt.message)}if(V.D.hideMask(),Lt.terminate(),It)throw{code:ae._errorCode,message:ae._errorString}},function(Bt){throw V.D.Errors.RotateFailed(ae,Bt),V.D.hideMask(),Lt.terminate(),{code:ae._errorCode,message:ae._errorString}})},l=function(ae,Ze,Ne){var Re=Ve(),ze=ae._ImgManager.convertClientIndexToServerId(Ze);return Re.context={},V.D.detect.showMask(ae),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ze)).then(function(Qe){return Re.context.metadata=Qe&&Qe.metadata?Qe.metadata:{},Re.initImage(Qe.oriData)}).then(function(){return Re.flip(Ne)}).then(function(){return Re.getImage()}).then(function(Qe){Qe={src:Qe.imageData,imgType:V.D.MobileFuns.convertOutputType(Qe.imageType),dataType:"url"};try{ae._OnBitmapChanged(["10",""+ze,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),Qe])}catch(ot){throw V.D.Errors.SystemExceptionError(ae,ot.message),0}}).then(function(){V.D.hideMask(),Re.terminate()},function(Qe){throw V.D.hideMask(),Qe&&(-1==Ne?V.D.Errors.MirrorFailed(ae,Qe):V.D.Errors.FlipFailed(ae,Qe)),Re.terminate(),{code:ae._errorCode,message:ae._errorString}})},c=function(ae,Ze){return l(ae,Ze=Ze[0],-1)},I=function(ae,Ze){return l(ae,Ze=Ze[0],1)},_=function(ae,Ne){Ne=Ne[0];var Re=Ve(),ze=ae._ImgManager.convertClientIndexToServerId(Ne);return Re.context={},V.D.detect.showMask(ae),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(Qe){return Re.context.metadata=Qe&&Qe.metadata?Qe.metadata:{},Re.initImage(Qe.oriData)}).then(function(){return Re.invert()}).then(function(){return Re.getImage()}).then(function(Qe){Qe={src:Qe.imageData,imgType:V.D.MobileFuns.convertOutputType(Qe.imageType),dataType:"url"};try{ae._OnBitmapChanged(["10",""+ze,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),Qe])}catch(ot){throw V.D.Errors.SystemExceptionError(ae,ot.message),0}}).then(function(){V.D.hideMask(),Re.terminate()},function(Qe){throw V.D.hideMask(),Qe&&V.D.Errors.InvertFailed(ae,Qe),Re.terminate(),{code:ae._errorCode,message:ae._errorString}})},h=function(ae,Ze){var Ne=Ze[0],Re=Ze[1],ze=Ze[2],Qe=Ze[3],ot=Ze[4];if(!(V.D.isNumber(Re)&&V.D.isNumber(ze)&&V.D.isNumber(Qe)&&V.D.isNumber(ot)))return V.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString});var Lt=Ve(),Ot=ae._ImgManager.convertClientIndexToServerId(Ne);return Lt.context={},V.D.detect.showMask(ae),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(Bt){return Lt.context.metadata=Bt&&Bt.metadata?Bt.metadata:{},Lt.initImage(Bt.oriData)}).then(function(){return Lt.crop(Re,ze,Qe,ot)}).then(function(){return Lt.getImage()}).then(function(Bt){Bt={src:Bt.imageData,imgType:V.D.MobileFuns.convertOutputType(Bt.imageType),dataType:"url",metadata:{imageData:Bt.imageData,width:Bt.imageWidth,height:Bt.imageHeight}};try{ae._OnBitmapChanged(["10",""+Ot,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),Bt])}catch(Ft){throw V.D.Errors.SystemExceptionError(ae,Ft.message),0}}).then(function(){V.D.hideMask(),Lt.terminate()},function(Bt){throw V.D.hideMask(),Bt&&V.D.Errors.CropFailed(ae,Bt),Lt.terminate(),{code:ae._errorCode,message:ae._errorString}})},y=function(ae,Ze){var Ne=Ze[0],Re=Ze[1],ze=Ze[2],Qe=Ze[3],ot=Ze[4],Lt=Ze[5];if(!(V.D.isNumber(Re)&&V.D.isNumber(ze)&&V.D.isNumber(Qe)&&V.D.isNumber(ot)))return V.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString});V.D.isUndefined(Lt)&&(Lt="FFFFFF");var Ot=Ve(),Bt=ae._ImgManager.convertClientIndexToServerId(Ne);return Ot.context={},V.D.detect.showMask(ae),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(Ft){return Ot.context.metadata=Ft&&Ft.metadata?Ft.metadata:{},Ot.initImage(Ft.oriData)}).then(function(){return Ot.erase(Re,ze,Qe,ot,Lt)}).then(function(){return Ot.getImage()}).then(function(Ft){Ft={src:Ft.imageData,imgType:V.D.MobileFuns.convertOutputType(Ft.imageType),dataType:"url",metadata:{imageData:Ft.imageData,width:Ft.imageWidth,height:Ft.imageHeight}};try{ae._OnBitmapChanged(["10",""+Bt,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),Ft])}catch(It){throw V.D.Errors.SystemExceptionError(ae,It.message),0}}).then(function(){V.D.hideMask(),Ot.terminate()},function(Ft){throw V.D.hideMask(),Ft&&V.D.Errors.EraseFailed(ae,Ft),Ot.terminate(),{code:ae._errorCode,message:ae._errorString}})},p=function(ae,Ze){var Ne=Ze[0],Re=Ze[1],ze=Ze[2],Qe=Ze[3];if(!V.D.isNumber(Re))return V.D.Errors.MobileServer_InvalidWidth(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString});if(!V.D.isNumber(ze))return V.D.Errors.MobileServer_InvalidHeight(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString});V.D.isUndefined(Qe)&&(Qe=5);var ot=Ve(),Lt=ae._ImgManager.convertClientIndexToServerId(Ne);return ot.context={},V.D.detect.showMask(ae),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(Ot){return ot.context.metadata=Ot&&Ot.metadata?Ot.metadata:{},ot.initImage(Ot.oriData)}).then(function(){return ot.resize(Re,ze,Qe,5,1==ot.context.metadata.bitDepth)}).then(function(){return ot.getImage()}).then(function(Ot){Ot={src:Ot.imageData,imgType:V.D.MobileFuns.convertOutputType(Ot.imageType),dataType:"url",metadata:{imageData:Ot.imageData,width:Ot.imageWidth,height:Ot.imageHeight}};try{ae._OnBitmapChanged(["10",""+Lt,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),Ot])}catch(Bt){throw V.D.Errors.SystemExceptionError(ae,Bt.message),0}}).then(function(){V.D.hideMask(),ot.terminate()},function(Ot){throw V.D.hideMask(),Ot&&V.D.Errors.ChangeImageSizeFailed(ae,Ot),ot.terminate(),{code:ae._errorCode,message:ae._errorString}})},m=function(ae,Re){Re=Re[0];var Ne=Ve();if(ae._ImgManager.convertClientIndexToServerId(Re),Ne.context={},V.D.detect.showMask(ae),Re=ae._ImgManager.getWebViewer().GetMinPageData())return Ne.initImage(Re.data,!0,Re.width,Re.height).then(function(){return Ne.getSkewAngle()}).then(function(ze){return V.D.hideMask(),delete Ne.context,Ne.terminate(),ze},function(ze){throw V.D.hideMask(),V.D.Errors.SkewAngleFailed(ae,ze),Ne.terminate(),{code:ae._errorCode,message:ae._errorString}})},T=function(ae,Ne){Ne=Ne[0];var Re=Ve();return ae._ImgManager.convertClientIndexToServerId(Ne),Re.context={},V.D.detect.showMask(ae),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(ze){return Re.context.metadata=ze&&ze.metadata?ze.metadata:{},Re.initImage(ze.oriData)}).then(function(){return Re.getSkewAngle()}).then(function(ze){return V.D.hideMask(),delete Re.context,Re.terminate(),ze},function(ze){throw V.D.hideMask(),V.D.Errors.SkewAngleFailed(ae,ze),Re.terminate(),{code:ae._errorCode,message:ae._errorString}})},C=function(ae,Ne){Ne=Ne[0];var Re=Ve(),ze=ae._ImgManager.convertClientIndexToServerId(Ne);return Re.context={},V.D.detect.showMask(ae),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(Qe){return Re.context.metadata=Qe&&Qe.metadata?Qe.metadata:{},Re.initImage(Qe.oriData)}).then(function(){return Re.toGrayscale()}).then(function(){return Re.getImage()}).then(function(Qe){Qe={src:Qe.imageData,imgType:V.D.MobileFuns.convertOutputType(Qe.imageType),dataType:"url",metadata:{imageData:Qe.imageData,width:Qe.imageWidth,height:Qe.imageHeight,bitDepth:8}};try{ae._OnBitmapChanged(["10",""+ze,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),Qe])}catch(ot){throw V.D.Errors.SystemExceptionError(ae,ot.message),0}}).then(function(){V.D.hideMask(),Re.terminate()},function(Qe){throw V.D.hideMask(),Qe&&V.D.Errors.ConvertToGrayScaleFailed(ae,Qe),Re.terminate(),{code:ae._errorCode,message:ae._errorString}})},D=function(ae,Ne){Ne=Ne[0];var Re=Ve(),ze=ae._ImgManager.convertClientIndexToServerId(Ne);return Re.context={},V.D.detect.showMask(ae),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(Qe){return Re.context.metadata=Qe&&Qe.metadata?Qe.metadata:{},Re.initImage(Qe.oriData)}).then(function(){return Re.toBinary(!1,void 0)}).then(function(){return Re.getImage()}).then(function(Qe){Qe={src:Qe.imageData,imgType:V.D.MobileFuns.convertOutputType(Qe.imageType),dataType:"url",metadata:{imageData:Qe.imageData,width:Qe.imageWidth,height:Qe.imageHeight,bitDepth:1}};try{ae._OnBitmapChanged(["10",""+ze,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),Qe])}catch(ot){throw V.D.Errors.SystemExceptionError(ae,ot.message),0}}).then(function(){V.D.hideMask(),Re.terminate()},function(Qe){throw V.D.hideMask(),Qe&&V.D.Errors.ConvertToBWScaleFailed(ae,Qe),Re.terminate(),{code:ae._errorCode,message:ae._errorString}})},S=function(ae,Ze){var Ne=Ze[0],Re=Ze[1],ze=Ze[2],Qe=Ze[3],ot=Ze[4];if(!V.D.isNumber(Re))return V.D.Errors.MobileServer_InvalidXResolution(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString});if(!V.D.isNumber(ze))return V.D.Errors.MobileServer_InvalidYResolution(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString});V.D.isUndefined(ot)&&(ot=V.I.DWT.EnumDWT_InterpolationMethod.IM_BICUBIC);var Lt,Ot,Bt=Ve(),Ft=ae._ImgManager.convertClientIndexToServerId(Ne);return Bt.context={},Ze=ae._ImgManager._UIView.GetMetaDataByIndex(Ne),Lt=Ze.resolutionX,Ot=Ze.resolutionY,V.D.detect.showMask(ae),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(It){return Bt.context.metadata=It&&It.metadata?It.metadata:{},Bt.initImage(It.oriData)}).then(function(){return Bt.setDPI(Lt,Ot,Re,ze,Qe,ot)}).then(function(){return Bt.getImage()}).then(function(It){It={src:It.imageData,imgType:V.D.MobileFuns.convertOutputType(It.imageType),dataType:"url",metadata:{imageData:It.imageData,width:It.imageWidth,height:It.imageHeight,resolutionX:Re,resolutionY:ze}};try{ae._OnBitmapChanged(["10",""+Ft,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),It])}catch(Kt){throw V.D.Errors.SystemExceptionError(ae,Kt.message),0}}).then(function(){V.D.hideMask(),Bt.terminate()},function(It){throw V.D.hideMask(),It&&V.D.Errors.SetDPIFailed(ae,It),Bt.terminate(),{code:ae._errorCode,message:ae._errorString}})},M=function(ae,Ze){var Ne=Ze[0],Re=Ze[1];if(!V.D.isNumber(Re))return V.D.Errors.MobileServer_InvalidWidth(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString});var ze=Ve(),Qe=ae._ImgManager.convertClientIndexToServerId(Ne);return ze.context={},V.D.detect.showMask(ae),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(ot){return ze.context.metadata=ot&&ot.metadata?ot.metadata:{},ze.initImage(ot.oriData)}).then(function(){return ze.setImageWidth(Re)}).then(function(){return ze.getImage()}).then(function(ot){ot={src:ot.imageData,imgType:V.D.MobileFuns.convertOutputType(ot.imageType),dataType:"url",metadata:{imageData:ot.imageData,width:ot.imageWidth,height:ot.imageHeight}};try{ae._OnBitmapChanged(["10",""+Qe,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),ot])}catch(Lt){throw V.D.Errors.SystemExceptionError(ae,Lt.message),0}}).then(function(){V.D.hideMask(),ze.terminate()},function(ot){throw V.D.hideMask(),ot&&V.D.Errors.SetImageWidthFailed(ae,ot),ze.terminate(),{code:ae._errorCode,message:ae._errorString}})},r=function(ae,It){var Ne,Re,ze=It[0],Qe=It[1],ot=It[2],Lt=It[3],Ot=It[4],Bt=!1,Ft=!1;if(It=V.I.DWT.EnumDWT_ImageType,V.D.isUndefined(ze))return V.D.Errors.MobileServer_InvalidImage(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString});if(!V.D.isArray(Qe))return V.D.Errors.MobileServer_InvalidIndex(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString});if(V.D.isUndefined(ot)&&(ot="jpg"),V.D.isString(ze)&&""!=ze||(ze="img."+ot),"png"==ot||"jpg"==ot||"bmp"==ot)return ze=Qe[0],Re=ae._jpgQuality,V.D.log("[Wasm]Save Image: save "+ot),1==Lt&&V.D.detect.showMask(ae),Ne="png"==ot?It.IT_PNG:"bmp"==ot?It.IT_BMP:It.IT_JPG,It=ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(ze)),(Ft=we()).context={},Ft.context.bSaveAsBinary=Ot,(It=ae._scaleDownThreshold<=0?It.then(function(en){return V.D.log("[Wasm]Save Image: get original image data successfully."),Ft.saveImage(en.oriData,Ne,Re,Ft.context.bSaveAsBinary?V.I.Enum_ReturnType.RT_BINARY:V.I.Enum_ReturnType.RT_BASE64,1==en.metadata.bitDepth)}):(It=It.then(function(en){V.D.log("[Wasm]Save Image: save to new type successfully.");var Ee=en&&en.metadata?en.metadata:{};return Ft.context.bOneBit=1==Ee.bitDepth,V.I.ImageProcWrapper.resize(en.oriData,Ee.width,Ee.height,ae._scaleDownThreshold,5,Ft.context.bOneBit)})).then(function(en){return V.D.log("[Wasm]Save Image: image scale successfully."),Ft.saveImage(en.imageData,Ne,Re,Ft.context.bSaveAsBinary?V.I.Enum_ReturnType.RT_BINARY:V.I.Enum_ReturnType.RT_BASE64,Ft.context.bOneBit)})).then(function(en){return 1==Lt&&V.D.hideMask(),Ft&&Ft.terminate(),Bt&&Bt.terminate(),V.D.log("[Wasm]Save Image: save image terminate."),{blobData:en.imageData,type:ot,MD5:en.MD5}},function(en){throw 1==Lt&&V.D.hideMask(),V.D.Errors.SaveImageFailed(ae,en),V.D.log("[Wasm]Save Image: save image failed."),Ft&&Ft.terminate(),Bt&&Bt.terminate(),{code:ae._errorCode,message:ae._errorString}});if("pdf"!=ot){if("tiff"!=ot)return V.D.Errors.InvalidImageType(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString});var Kt=Qe.length,tn=(V.D.log("[Wasm]Save Image: save tiff"),(Ft=we()).context={},Ft.context.bSaveAsBinary=Ot,0<ae._scaleDownThreshold&&((Bt=Ve()).context={}),Lt&&(Ft.context.bShowPercentProgress=!0,V.D.showProgress(ae),ae._OnPercentDone(2==Lt?[0,-1,V.I.MSG.ConvertingToBlob,""]:3==Lt?[0,-1,V.I.MSG.ConvertingToBase64,""]:4==Lt?[0,-1,V.I.MSG.Encoding,""]:[0,-1,V.I.MSG.SavingTiff,""])),Ft.createTiff());for(ze=V.I.DWT.EnumDWT_TIFFCompressionType,Ft.context.cIndex=0,It=0,ae._tiffCompressionType==ze.TIFF_AUTO?It=0:ae._tiffCompressionType==ze.TIFF_FAX3||ae._tiffCompressionType==ze.TIFF_T4?It=1:ae._tiffCompressionType==ze.TIFF_FAX4||ae._tiffCompressionType==ze.TIFF_T6?It=2:ae._tiffCompressionType==ze.TIFF_LZW?It=3:ae._tiffCompressionType==ze.TIFF_JPEG?It=5:ae._tiffCompressionType==ze.TIFF_PACKBITS&&(It=4),Ft.context.tiffFormat=It,Ft.context.aryIndex=Qe,i=0;i<Kt;i++)tn=V.D.MobileFuns.appendTiffPage(ae,tn,Ft,Bt);return(tn=tn.then(function(){return V.D.log("[Wasm]Save Image: generate tiff data."),Ft.getTiff(Ft.context.bSaveAsBinary?V.I.Enum_ReturnType.RT_BINARY:V.I.Enum_ReturnType.RT_AUTO)})).then(function(Ee){return V.D.log("[Wasm]Save Image: save tiff successfully."),Ft.context.bShowPercentProgress&&V.D.closeProgress(ae),Ft.closeTiff(),Ft.terminate(),Bt&&Bt.terminate(),{blobData:Ee.imageData,type:"tiff",MD5:Ee.MD5}},function(Ee){throw Ft.context.bShowPercentProgress&&V.D.closeProgress(ae),V.D.Errors.SaveImageFailed(ae,Ee),V.D.log("[Wasm]Save Image: save tiff failed."),Ft.closeTiff(),Ft.terminate(),Bt&&Bt.terminate(),{code:ae._errorCode,message:ae._errorString}})}return ze=function(){var en,Ee=new V.I.PdfWriter,_e=Qe.length,Ae=(Ee.context={},V.D.log("[Wasm]Save Image: save pdf"),Lt&&(V.D.showProgress(ae),ae._OnPercentDone(2==Lt?[0,-1,V.I.MSG.ConvertingToBlob,""]:3==Lt?[0,-1,V.I.MSG.ConvertingToBase64,""]:4==Lt?[0,-1,V.I.MSG.Encoding,""]:[0,-1,V.I.MSG.SavingPdf,""])),Ee.initPdfSetting(ae._pdfWriteSetting));for(0<ae._scaleDownThreshold&&((Bt=Ve()).context={}),Ee.context.cIndex=0,Ee.context.aryIndex=Qe,Ee.context.bSaveAsBinary=Ot,en=0;en<_e;en++)Ae=Ae.then(function(){var We=Ee.context.cIndex,pe=Ee.context.aryIndex;return V.D.log("[Wasm]Save Image: page "+Ee.context.cIndex+" start process."),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(pe[We]))}),Ae=(Ae=ae._scaleDownThreshold<=0?Ae.then(function(We){return V.D.log("[Wasm]Save Image: page "+Ee.context.cIndex+" get image data successfully. (no scale)"),Ee.appendPage(We.oriData,1==We.metadata.bitDepth)}):(Ae=Ae.then(function(We){V.D.log("[Wasm]Save Image: page "+Ee.context.cIndex+" get image data successfully.");var pe=We&&We.metadata?We.metadata:{},Ie=1==pe.bitDepth;return Ee.context.bOneBit=Ie,V.I.ImageProcWrapper.resize(We.oriData,pe.width,pe.height,ae._scaleDownThreshold,5,Ie)})).then(function(We){return V.D.log("[Wasm]Save Image: page "+Ee.context.cIndex+" scale successfully."),Ee.appendPage(We.imageData,Ee.context.bOneBit)})).then(function(){var We,pe=Ee.context.cIndex,Ie=Ee.context.aryIndex.length;Lt&&ae._OnPercentDone([0,100*(We=pe+1)/+Ie,We+"/"+Ie,""]),V.D.log("[Wasm]Save Image: page "+Ee.context.cIndex+" processed."),Ee.context.cIndex=pe+1});return{v:Ae.then(function(){return Ee.writePdf(Ee.context.bSaveAsBinary?V.I.Enum_ReturnType.RT_BINARY:V.I.Enum_ReturnType.RT_AUTO)}).then(function(We){return V.D.log("[Wasm]Save Image: save pdf successfully."),Lt&&V.D.closeProgress(ae),Ee.terminate(),Bt&&Bt.terminate(),{blobData:We.pdfData,type:"pdf",MD5:We.MD5}},function(We){throw Lt&&V.D.closeProgress(ae),V.D.Errors.SaveImageFailed(ae,We),V.D.log("[Wasm]Save Image: save pdf failed."),Ee.terminate(),Bt&&Bt.terminate(),{code:ae._errorCode,message:ae._errorString}})}}(),"object"===(0,W.Z)(ze)?ze.v:void 0},a=function(ae,ze){return ze=0<ze.length?ze[0]:St(),V.I.WasmEnv?V.I.WasmEnv.getLicenseInfo(ze,V.I.WasmEnv.licMode,V.I.WasmEnv.uuid).then(function(Qe){if(Qe&&Qe.Detail)return Qe;throw V.D.Errors.LicenseEmptyOrInvalid(ae),{code:ae._errorCode,message:ae._errorString}},function(Qe){throw V.D.Errors.GetLicenseInfoFailed(ae,Qe),{code:ae._errorCode,message:ae._errorString}}):(V.D.Errors.GetLicenseInfoFailed(ae,"wasm not load."),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString}))},o=function(ae,Ne){var Re=Ne=Ne[0],ze=(Ne instanceof FileList?Re=Ne[0]:(Ne instanceof Uint8ClampedArray||Ne instanceof ArrayBuffer||Ne instanceof Uint8Array)&&(Re=new Blob([Ne])),we());return ze.getMD5(Re).then(function(Qe){return ze.terminate(),Qe},function(Qe){throw V.D.Errors.GetMD5Failed(ae,Qe),ze.terminate(),{code:ae._errorCode,message:ae._errorString}})},u=function(ae,Ze){var Ne=Ze[0],Re=Ze[1],ze=Ve(),Qe=ae._ImgManager.convertClientIndexToServerId(Ne);return ze.context={},V.D.detect.showMask(ae),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(ot){return ze.context.metadata=ot&&ot.metadata?ot.metadata:{},ze.initImage(ot.oriData)}).then(function(){return ze.changeContrast(Re)}).then(function(){return ze.getImage()}).then(function(ot){ot={src:ot.imageData,imgType:V.D.MobileFuns.convertOutputType(ot.imageType),dataType:"url",metadata:{imageData:ot.imageData,width:ot.imageWidth,height:ot.imageHeight,bitDepth:8}};try{ae._OnBitmapChanged(["10",""+Qe,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),ot])}catch(Lt){throw V.D.Errors.SystemExceptionError(ae,Lt.message),0}}).then(function(){V.D.hideMask(),ze.terminate()},function(ot){throw V.D.hideMask(),ot&&V.D.Errors.ChangeContrastFailed(ae,ot),ze.terminate(),{code:ae._errorCode,message:ae._errorString}})},s=function(ae,Ze){var Ne=Ze[0],Re=Ze[1],ze=Ve(),Qe=ae._ImgManager.convertClientIndexToServerId(Ne);return ze.context={},V.D.detect.showMask(ae),V.D.log("[Wasm]Change Brightness: value "+Re),ae._ImgManager.getWebViewer().GetImageData(ae._ImgManager.getUidByIndex(Ne)).then(function(ot){return V.D.log("[Wasm]Change Brightness: get original image data"),ze.context.metadata=ot&&ot.metadata?ot.metadata:{},ze.initImage(ot.oriData)}).then(function(){return V.D.log("[Wasm]Change Brightness: change brightness"),ze.changeBrightness(Re)}).then(function(){return ze.getImage()}).then(function(ot){V.D.log("[Wasm]Change Brightness: change brightness successfully"),ot={src:ot.imageData,imgType:V.D.MobileFuns.convertOutputType(ot.imageType),dataType:"url",metadata:{imageData:ot.imageData,width:ot.imageWidth,height:ot.imageHeight,bitDepth:8}};try{ae._OnBitmapChanged(["10",""+Qe,4,ae._ImgManager.getCurrentImageIndex(),ae._ImgManager.count(),ot])}catch(Lt){throw V.D.Errors.SystemExceptionError(ae,Lt.message),0}}).then(function(){V.D.hideMask(),ze.terminate()},function(ot){throw V.D.hideMask(),ot&&V.D.Errors.ChangeBrightnessFailed(ae,ot),ze.terminate(),{code:ae._errorCode,message:ae._errorString}})},Se._saveImageCallback=function(Pe){var ae,Ze,Ne,Re=this;if(!V.D.isArray(Pe))return V.D.Errors.InvalidSourceFile(Re),V.D.Promise.reject({code:Re._errorCode,message:Re._errorString});for(V.D.log("[Wasm]camera callback: save image"),ae=V.D.Promise.resolve({aryData:Pe,curIndex:0,count:Ne=Pe.length}),Ze=0;Ze<Ne;Ze++)ae=(ae=ae.then(function(ze){var Qe,ot=ze.aryData[ze.curIndex];if(ze.bOneBit=!1,ot){var Lt=ot.iImageData;if(Lt instanceof Blob||Lt instanceof ArrayBuffer)return ze.captureBlob=Lt,ze;Qe=Lt.imageData,ze.bOneBit=1==Lt.imageBitDepth}return Qe instanceof Blob||Qe instanceof ArrayBuffer?ze.bOneBit&&Re._bLocalService?L(Qe).then(function(Ot){return ze.captureBlob=Ot.blobData,ze}):(ze.captureBlob=Qe,ze):(V.I.Lib.Errors.InvalidSourceFile(Re),V.D.log("[Wasm]camera callback: save image error - page "+ze.curIndex+" source invalid."),V.I.Lib.Promise.reject({code:Re._errorCode,message:Re._errorString}))})).then(function(ze){var Qe,ot=ze.aryData[ze.curIndex];return Pe&&ot&&(Qe=ot.file),V.D.log("[Wasm]camera callback: save image - page "+ze.curIndex+" data ready"),new V.I.Lib.Promise(function(Lt,Ot){var Bt=ze.captureBlob,Ft=-1,It=V.I.DWT.EnumDWT_ImageType;Re._bLocalService?(V.I.Lib.isString(Bt.type)&&("application/pdf"==Bt.type?Ft=It.IT_PDF:"image/png"==Bt.type?Ft=It.IT_PNG:"image/jpeg"==Bt.type||"image/jpg"==Bt.type?Ft=It.IT_JPG:"image/bmp"==Bt.type?Ft=It.IT_BMP:"image/tiff"==Bt.type||"image/tif"==Bt.type?Ft=It.IT_TIF:"image/jp2"==Bt.type&&(Ft=It.IT_J2K)),Re.__captureImage(Bt,Ft,function(){V.D.log("[Wasm]camera callback: save image - page "+ze.curIndex+" data saved from service"),ze.curIndex=ze.curIndex+1,ze.captureBlob=null,Lt(ze)},function(Kt,tn){Ot({code:Kt,message:tn})})):(""==(It=Re.GetCurrentDocumentName())&&(It=Re._ImgManager.getWebViewer().GetDefaultFileName()),Re._innerSendToMobile("LoadImageFromBinary",[Bt,!0,Qe,It,!0,ze.bOneBit],0,function(){V.D.log("[Wasm]camera callback: save image - page "+ze.curIndex+" data saved"),ze.curIndex=ze.curIndex+1,ze.captureBlob=null,Lt(ze)},function(Kt,tn){Ot({code:Kt,message:tn})}))})});return ae},Se._insertImageCallback=function(Pe,ae,Ze){var Ne=this,Re=ae.oriData,ze=!0;if(Re&&(Re instanceof Blob||Re instanceof ArrayBuffer||Re instanceof Uint8Array)&&(ze=!1),!ae||ze)throw V.I.Lib.Errors.InvalidSourceFile(Ne),V.D.log("[Wasm]camera callback: save image error - source invalid."),{code:Ne._errorCode,message:Ne._errorString};(Re=ae.customData)&&(ze=Re.oriBlob),V.D.log("[Wasm]camera callback: save image - data ready"),mt++,Re.imageId=mt,Ne._ImgManager.insertImage(Pe,ae,Ze),ze=Ne._ImgManager.getWebViewer().GetUidByIndex(Ze),Ne._ImgManager.getView().innerInsertModel(mt,ze)},je._areaDetectCallback=function(Pe,ae,Ze,Ne,Re){var ze=Ve();return V.D.log("[Wasm]camera callback: area detect"),ze.initImage(Pe.imageData,Pe.rgba,Pe.imageWidth,Pe.imageHeight,Pe.bgra).then(function(Qe){return V.D.log("[Wasm]camera callback: image is ready"),ze.src=Qe.srcBuffer,ze.detectDocument(Re,ae,Ze,Ne)}).then(function(Qe){return V.D.log("[Wasm]camera callback: area detect successfully"),Qe.src=ze.src,ze.terminate(),ze.src=null,Qe},function(Qe){V.D.closeLoadingMsg(),V.D.log("[Wasm]camera callback: area detect failed"),ze.terminate();var ot={};throw Qe&&Qe.code&&Qe.message?(ot._errorString=Qe.message,ot._errorCode=Qe.code):(ot._errorString=Qe,V.D.Errors.DetectCallbackErr(ot)),{code:ot._errorCode,message:ot._errorString}})},je._perspectiveCallback=function(Pe,ae){var Ze,Ne=Ve();return V.D.log("[Wasm]camera callback: perspective"),V.D.isArray(ae)&&8==ae.length?Ne.initImage(Pe.imageData,Pe.rgba,Pe.imageWidth,Pe.imageHeight,Pe.bgra).then(function(Re){return V.D.log("[Wasm]camera callback: image is ready"),Ne.src=Re.srcBuffer,Ne.perspective(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5],ae[6],ae[7])}).then(function(){V.D.log("[Wasm]camera callback: perspective successfully");var Re=void 0,ot=V.I.Enum_ImageType.IT_JPG,Lt=(Pe.imageBitDepth<=8&&(Re=Pe.imageBitDepth,ot=V.I.Enum_ImageType.IT_PNG),V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad);return Ne.getImage(85,!0,!1,Re,Pe.imageXResolution,Pe.imageYResolution,!0,ot,Lt)}).then(function(Re){V.D.log("[Wasm]camera callback: filter process successfully");var ze=Ne.src;return Ne.terminate(),Ne.src=null,{src:ze,result:Re}},function(Re){V.D.log("[Wasm]camera callback: filter process failed"),V.D.closeLoadingMsg(),Ne.terminate();var ze={};throw Re&&Re.code&&Re.message?(ze._errorString=Re.message,ze._errorCode=Re.code):(ze._errorString=Re,V.D.Errors.PerspectiveCallback(ze)),{code:ze._errorCode,message:ze._errorString}}):(V.D.Errors.InvalidParameterInCallback(Ze={}),V.D.Promise.reject({code:Ze._errorCode,message:Ze._errorString}))},je._convertToGrayScaleFilterCallback=function(Pe,ae){var Ze=Ve();return V.D.log("[Wasm]camera callback: convert to gray scale filter"),Ze.initImage(Pe.imageData,Pe.rgba,Pe.imageWidth,Pe.imageHeight,Pe.bgra).then(function(Ne){var Re;return V.D.log("[Wasm]camera callback: image is ready"),Ze.src=Ne.srcBuffer,ae&&(Re=ae.level),Ze.toGrayscale(Re)}).then(function(){V.D.log("[Wasm]camera callback: gray scale successfully");var Ne=void 0,Qe=V.I.Enum_ImageType.IT_JPG,ot=(Pe.imageBitDepth<=8&&(Ne=Pe.imageBitDepth,Qe=V.I.Enum_ImageType.IT_PNG),V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad);return Ze.getImage(85,!0,!1,Ne,Pe.imageXResolution,Pe.imageYResolution,!0,Qe,ot)}).then(function(Ne){V.D.log("[Wasm]camera callback: filter process successfully");var Re=Ze.src;return Ze.terminate(),Ze.src=null,{src:Re,result:Ne}},function(Ne){V.D.log("[Wasm]camera callback: filter process failed"),V.D.closeLoadingMsg(),Ze.terminate();var Re={};throw V.D.Errors.ConvertToGrayScaleFilterCallbackErr(Re,Ne),{code:Re._errorCode,message:Re._errorString}})},je._saveTonerFilterCallback=function(Pe,ae){return je._convertToBWScaleFilterCallback(Pe,ae,!0)},je._convertToBWScaleFilterCallback=function(Pe,ae,Ze){var Ne=Ve();return V.D.log(Ze?"[Wasm]camera callback: save toner filter":"[Wasm]camera callback: convert to BW scale filter"),Ne.initImage(Pe.imageData,Pe.rgba,Pe.imageWidth,Pe.imageHeight,Pe.bgra).then(function(Re){var ze;return V.D.log("[Wasm]camera callback: image is ready"),Ne.src=Re.srcBuffer,ae&&(ze=ae.level),Ne.toBinary(!!Ze,ze)}).then(function(){return Ne.getImage(85,!0,!1,1,Pe.imageXResolution,Pe.imageYResolution,!0,V.I.Enum_ImageType.IT_PNG,V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad)}).then(function(Re){V.D.log("[Wasm]camera callback: filter process successfully");var ze=Ne.src;return Ne.terminate(),Ne.src=null,{src:ze,result:Re}},function(Re){V.D.log("[Wasm]camera callback: filter process failed"),V.D.closeLoadingMsg(),Ne.terminate();var ze={};throw Ze?V.D.Errors.SaveTonerCallbackErr(ze,Re):V.D.Errors.ConvertToBWScaleFilterCallbackErr(ze,Re),{code:ze._errorCode,message:ze._errorString}})},je._cleanFilterCallback=function(Pe,ae){var Ze=Ve();return V.D.log("[Wasm]camera callback: remove shadow filter"),Ze.initImage(Pe.imageData,Pe.rgba,Pe.imageWidth,Pe.imageHeight,Pe.bgra).then(function(Ne){var Re,ze;return V.D.log("[Wasm]camera callback: image is ready"),ae&&(Re=ae.level,ze=ae.alpha),Ze.src=Ne.srcBuffer,Ze.removeShadow(Re,ze)}).then(function(){var Ne=void 0,Qe=V.I.Enum_ImageType.IT_JPG,ot=(Pe.imageBitDepth<=8&&(Ne=Pe.imageBitDepth,Qe=V.I.Enum_ImageType.IT_PNG),V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad);return Ze.getImage(85,!0,!1,Ne,Pe.imageXResolution,Pe.imageYResolution,!0,Qe,ot)}).then(function(Ne){V.D.log("[Wasm]camera callback: remove shadow successfully");var Re=Ze.src;return Ze.terminate(),Ze.src=null,{src:Re,result:Ne}},function(Ne){V.D.log("[Wasm]camera callback: remove shadow failed"),V.D.closeLoadingMsg(),Ze.terminate();var Re={};throw V.D.Errors.RemoveShadowFilterCallbackErr(Re,Ne),{code:Re._errorCode,message:Re._errorString}})},je._enhanceAndSharpenFilterCallback=function(Pe,ae){var Ze=Ve();return V.D.log("[Wasm]camera callback: enhance and sharpen filter"),Ze.initImage(Pe.imageData,Pe.rgba,Pe.imageWidth,Pe.imageHeight,Pe.bgra).then(function(Ne){var Re;return V.D.log("[Wasm]camera callback: image is ready"),Ze.src=Ne.srcBuffer,ae&&(Re=ae.level),Ze.enhanceAndSharpenImage(Re)}).then(function(){var Ne=void 0,Qe=V.I.Enum_ImageType.IT_JPG,ot=(Pe.imageBitDepth<=8&&(Ne=Pe.imageBitDepth,Qe=V.I.Enum_ImageType.IT_PNG),V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad);return Ze.getImage(85,!0,!1,Ne,Pe.imageXResolution,Pe.imageYResolution,!0,Qe,ot)}).then(function(Ne){V.D.log("[Wasm]camera callback: enhance and sharpen successfully");var Re=Ze.src;return Ze.terminate(),Ze.src=null,{src:Re,result:Ne}},function(Ne){V.D.log("[Wasm]camera callback: enhance and sharpen failed"),V.D.closeLoadingMsg(),Ze.terminate();var Re={};throw V.D.Errors.EnhanceAndSharpenFilterCallbackErr(Re,Ne),{code:Re._errorCode,message:Re._errorString}})},je._brightenFilterCallback=function(Pe,ae){var Ze=Ve();return V.D.log("[Wasm]camera callback: brighten filter"),Ze.initImage(Pe.imageData,Pe.rgba,Pe.imageWidth,Pe.imageHeight,Pe.bgra).then(function(Ne){var Re;return V.D.log("[Wasm]camera callback: image is ready"),Ze.src=Ne.srcBuffer,ae&&(Re=ae.level),Ze.brighten(Re)}).then(function(){var Ne=void 0,Qe=V.I.Enum_ImageType.IT_JPG,ot=(Pe.imageBitDepth<=8&&(Ne=Pe.imageBitDepth,Qe=V.I.Enum_ImageType.IT_PNG),V.I.navInfo.bMac||V.I.navInfo.biPhone||V.I.navInfo.biPad);return Ze.getImage(85,!0,!1,Ne,Pe.imageXResolution,Pe.imageYResolution,!0,Qe,ot)}).then(function(Ne){V.D.log("[Wasm]camera callback: brighten successfully");var Re=Ze.src;return Ze.terminate(),Ze.src=null,{src:Re,result:Ne}},function(Ne){V.D.log("[Wasm]camera callback: brighten failed"),V.D.closeLoadingMsg(),Ze.terminate();var Re={};throw V.D.Errors.BrightenFilterCallbackErr(Re,Ne),{code:Re._errorCode,message:Re._errorString}})},je._getBlurryScore=function(Pe){var ae=Ve();return V.D.log("[Wasm]camera callback: get blurry score filter"),ae.initImage(Pe.imageData,Pe.rgba,Pe.imageWidth,Pe.imageHeight,Pe.bgra).then(function(Ze){return V.D.log("[Wasm]camera callback: image is ready"),ae.src=Ze.srcBuffer,ae.getBlurryScore()}).then(function(Ze){V.D.log("[Wasm]camera callback: get blurry score successfully");var Ne=ae.src;return ae.terminate(),ae.src=null,{src:Ne,result:100<=Ze}},function(Ze){V.D.log("[Wasm]camera callback: get blurry score failed"),V.D.closeLoadingMsg(),ae.terminate();var Ne={};throw V.D.Errors.GetBlurryScoreErr(Ne,Ze),{code:Ne._errorCode,message:Ne._errorString}})},je._imageDataToBlob=function(Pe,ae,Ze,Ne,Re,ze){V.D.log("[Wasm]ImageDataToBlob: init image");var Qe={source:{},output:{}};return V.D.mix(Qe.source,Pe),ae&&(ae<0?ae=ae%360+360:360<=ae&&(ae%=360),0!=ae&&(Qe.source.angle=ae)),Ze&&(Qe.polygon=Ze),Ne&&Ze&&Ze.points&&(Qe.doPerspective=!0),!1!==Re&&(Qe.output.orgImage=V.D.isObject(Re)?Re:{quality:85,returnType:V.I.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==ze&&(Qe.output.previewImage=V.D.isObject(ze)?ze:{quality:85,width:200,height:200,returnType:V.I.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),V.I.ImageProcWrapper.createImage(Qe)},je._freeCallback=function(){Ce&&(Ce.terminate(),Ce=null)},Se._checkWebcamWasmLicense=function(){return V.D.License.checkProductKey(this,{Webcam:!0},!0)&&V.D.License.checkProductKey(this,{Webcam:!0,Wasm:!0},!0)?{errorCode:0}:V.I.DWT.licenseException},Se.GetRawDataAsync=function(Ne){var Ze,ae=this;return ae._resetErr(),ae._isMobileMode()?(Ne=X()(Ne),isNaN(Ne)?(V.D.Errors.InvalidIndex(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString})):Ne<0||Ne>=ae._ImgManager.count()?(V.D.Errors.IndexOutOfRange(ae),V.D.Promise.reject({code:ae._errorCode,message:ae._errorString})):(Ze=ae.Viewer&&ae.Viewer._webViewer?ae.Viewer._webViewer.GetUidByIndex(Ne):Ze)?ae.Viewer._webViewer.GetImageData(Ze).then(function(Re){var ze={displayImage:{},documentData:{polygon:[],originImage:{}}};return Re.oriData&&(ze.displayImage.data=Re.oriData),Re.metadata&&(Re.metadata.bitDepth&&(ze.displayImage.bitDepth=Re.metadata.bitDepth),Re.metadata.height&&(ze.displayImage.height=Re.metadata.height),Re.metadata.width&&(ze.displayImage.width=Re.metadata.width),Re.metadata.resolutionX&&(ze.displayImage.resolutionX=Re.metadata.resolutionX),Re.metadata.resolutionY&&(ze.displayImage.resolutionY=Re.metadata.resolutionY)),Re.customData&&(ze.documentData.angle=V.D.isNumber(Re.customData.angle)?Re.customData.angle:0,Re.customData.detectArea&&(ze.documentData.polygon.push({x:Re.customData.detectArea[0],y:Re.customData.detectArea[1]}),ze.documentData.polygon.push({x:Re.customData.detectArea[2],y:Re.customData.detectArea[3]}),ze.documentData.polygon.push({x:Re.customData.detectArea[4],y:Re.customData.detectArea[5]}),ze.documentData.polygon.push({x:Re.customData.detectArea[6],y:Re.customData.detectArea[7]})),Re.customData.filterValue&&(ze.documentData.filterValue=Re.customData.filterValue),Re.customData.oriBlob&&(Re.customData.oriBlob.imageBitDepth&&(ze.documentData.originImage.bitDepth=Re.customData.oriBlob.imageBitDepth),Re.customData.oriBlob.imageData&&(ze.documentData.originImage.data=Re.customData.oriBlob.imageData),Re.customData.oriBlob.imageHeight&&(ze.documentData.originImage.height=Re.customData.oriBlob.imageHeight),Re.customData.oriBlob.imageWidth&&(ze.documentData.originImage.width=Re.customData.oriBlob.imageWidth),Re.customData.oriBlob.imageXResolution&&(ze.documentData.originImage.resolutionX=Re.customData.oriBlob.imageXResolution),Re.customData.oriBlob.imageYResolution&&(ze.documentData.originImage.resolutionY=Re.customData.oriBlob.imageYResolution))),ze}):$().resolve(null)):ae._serviceNotSupportAsync("GetRawDataAsync")},Se.SetRawDataAsync=function(Ne,ae){return(Ze=this)._resetErr(),Ze._isMobileMode()?(Ne=X()(Ne),isNaN(Ne)?(V.D.Errors.InvalidIndex(Ze),V.D.Promise.reject({code:Ze._errorCode,message:Ze._errorString})):Ne<0||Ne>=Ze._ImgManager.count()?(V.D.Errors.IndexOutOfRange(Ze),V.D.Promise.reject({code:Ze._errorCode,message:Ze._errorString})):Ze.Viewer&&Ze.Viewer._webViewer&&(Ne=Ze.Viewer._webViewer.GetUidByIndex(Ne))&&(Ze=Ze.Viewer._webViewer.mydvs)?(Re=ae.displayImage.data,delete ae.displayImage.data,Re={oriData:Re,metadata:ae.displayImage,customData:{}},ae.documentData&&(Re.customData.angle=V.D.isNumber(ae.documentData.angle)?ae.documentData.angle:0,ae.documentData.polygon&&4==ae.documentData.polygon.length&&(Re.customData.detectArea=[ae.documentData.polygon[0].x,ae.documentData.polygon[0].y,ae.documentData.polygon[1].x,ae.documentData.polygon[1].y,ae.documentData.polygon[2].x,ae.documentData.polygon[2].y,ae.documentData.polygon[3].x,ae.documentData.polygon[3].y]),ae.documentData.filterValue&&(Re.customData.filterValue=ae.documentData.filterValue),ae.documentData.originImage&&(Re.customData.oriBlob={},ae.documentData.originImage.bitDepth&&(Re.customData.oriBlob.imageBitDepth=ae.documentData.originImage.bitDepth),ae.documentData.originImage.data&&(Re.customData.oriBlob.imageData=ae.documentData.originImage.data),ae.documentData.originImage.height&&(Re.customData.oriBlob.imageHeight=ae.documentData.originImage.height),ae.documentData.originImage.width&&(Re.customData.oriBlob.imageWidth=ae.documentData.originImage.width),Re.customData.oriBlob.imageXResolution&&(Re.customData.oriBlob.imageXResolution=ae.documentData.originImage.resolutionX),ae.documentData.originImage.resolutionY&&(Re.customData.oriBlob.imageYResolution=ae.documentData.originImage.resolutionY))),ae=Ze.DataControl.updateSync(Ne,Re,!0),$().resolve(ae)):$().resolve(null)):Ze._serviceNotSupportAsync("GetRawDataAsync");var Re,Ze},Se.GetImageDataAsync=function(Pe){var ae;return(ae=this.Viewer&&this.Viewer._webViewer?this.Viewer._webViewer.GetUidByIndex(Pe):ae)?this.Viewer._webViewer.GetImageData(ae):$().resolve(null)},Se.SetCustomDataAsync=function(Pe,ae){var Ze,Ne=this;return(Ze=Ne.Viewer&&Ne.Viewer._webViewer?Ne.Viewer._webViewer.GetUidByIndex(Pe):Ze)&&ae?Ne.Viewer._webViewer.GetImageData(Ze).then(function(Re){return Re.customData=ae,Ne.Viewer._webViewer.UpdateImageData(Ze,Re)}):$().resolve(!1)},L=function(ae){var Ze=we();return Ze.saveImage(ae,V.I.DWT.EnumDWT_ImageType.IT_PNG,85,V.I.Enum_ReturnType.RT_BINARY,!0).then(function(ze){return Ze&&Ze.terminate(),{blobData:ze.imageData,type:"png",MD5:ze.MD5}},function(ze){throw Ze&&Ze.terminate(),{code:_this._errorCode,message:_this._errorString}})}},5719:function(e,c,t){t.r(c),c=t(5683);var r=t.n(c),a=(c=t(4579),t.n(c)),o=(c=t(7711),t.n(c)),u=(c=t(1006),t.n(c)),s=(c=t(3662),t.n(c)),f=t(1695),v=t(1188),l=t(3887),I=t(9158),_=f.D.html5.Funs;(c=f.D.html5.STwain.prototype).SetCookie=function(h){return this._cookie=h,document.cookie=h,!0},c.LoadImageFromBase64Binary=function(h,y,p,m){var T=this;if(T._resetErr(),!T._isValid())return!1;if(!h)return f.D.Errors.InvalidParameter(T),f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString),!1;var C=!1,D="LoadImageFromBase64Binary",S=y,M=1;if((G=h)instanceof f.I.Lib.html5.Base64Result&&f.D.isFunction(G.getLength)&&f.D.isFunction(G.getData)&&(G=G.getData(0,G.getLength())),(S=f.D.isString(G)?-1!=r()(G).call(G,"data:image/bmp")?0:-1!=r()(G).call(G,"data:image/jpeg")?1:-1!=r()(G).call(G,"data:image/tif")?2:-1!=r()(G).call(G,"data:image/png")?3:-1!=r()(G).call(G,"data:application/pdf")?4:-1!=r()(G).call(G,"data:image/jp2")?14:(h=G.substr(0,64),h=f.I.Lib.base64.decode(h,!0),(0,l.Ho)(h)):S)!=f.I.DWT.EnumDWT_ImageType.IT_BMP&&S!=f.I.DWT.EnumDWT_ImageType.IT_JPG&&S!=f.I.DWT.EnumDWT_ImageType.IT_TIF&&S!=f.I.DWT.EnumDWT_ImageType.IT_PNG&&S!=f.I.DWT.EnumDWT_ImageType.IT_PDF&&S!=f.I.DWT.EnumDWT_ImageType.IT_J2K&&(S=-1),!f.D.License.checkProductKey(T,{Core:!0})||!f.D.License.checkPDFProductKeyWhenNeeds(T,S))return f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString),!1;if(""==(h=T.GetCurrentDocumentName())&&(h=T._ImgManager.getWebViewer().GetDefaultFileName()),T._isMobileMode()){f.D.cancelFrome=2,f.D.showProgress(T,D,!0),T.__bLoadingImage=!0;var G,L,W=G;if(f.D.isString(G)){if(0<=r()(G).call(G,"blob:")||0<=r()(G).call(G,"data:")||(G=[L=S==f.I.DWT.EnumDWT_ImageType.IT_PNG?"data:image/png;base64,":S==f.I.DWT.EnumDWT_ImageType.IT_JPG?"data:image/jpeg;base64,":S==f.I.DWT.EnumDWT_ImageType.IT_TIF?"data:image/tif;base64,":S==f.I.DWT.EnumDWT_ImageType.IT_PDF?"data:application/pdf;base64,":S==f.I.DWT.EnumDWT_ImageType.IT_BMP?"data:image/bmp;base64,":S==f.I.DWT.EnumDWT_ImageType.IT_J2K?"data:image/jp2;base64,":"data:application/octet-stream;base64,",G].join("")),0<=r()(G).call(G,"data:")&&0==(W=f.D.MobileFuns.dataURLtoBlob(G)))return f.I.Lib.closeProgress(T,D),T.__bLoadingImage=!1,f.D.Errors.ConvertFromBase64Failed(T),f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString,G,y),!1}else G instanceof ArrayBuffer&&(L="image/png",S==f.I.DWT.EnumDWT_ImageType.IT_PNG?L="image/png":S==f.I.DWT.EnumDWT_ImageType.IT_JPG?L="image/jpeg":S==f.I.DWT.EnumDWT_ImageType.IT_TIF?L="image/tiff":S==f.I.DWT.EnumDWT_ImageType.IT_PDF?L="application/pdf":S==f.I.DWT.EnumDWT_ImageType.IT_BMP?L="image/bmp":S==f.I.DWT.EnumDWT_ImageType.IT_J2K&&(L="image/jp2"),W=new Blob([G],{type:L}));return L=T._innerSendToMobile("LoadImageFromBinary",(0,v.An)(W,!1,null,h),0,function(){var F;return f.I.Lib.closeProgress(T,D),T.__bLoadingImage=!1,T._isBindViewer()&&0<=(F=T._ImgManager.getCurrentImageIndex())&&T.OnRefreshUI(F),p&&p(G,y),!0},function(){f.I.Lib.closeProgress(T,D),T.__bLoadingImage=!1,f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString,G,y)}),!0}if(f.D.isFunction(p)&&(C=!0),f.D.isString(G)&&-1!=r()(G).call(G,"base64,")&&(G=G.substr(r()(G).call(G,"base64,")+7)),W=T.__GetLoadEventsNum(),C){if(_.isServerInvalid(T))return f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString,G,y),!1;f.D.cancelFrome=2,f.D.showProgress(T,D,!0),T.__bLoadingImage=!0,L=T._innerSend(D,(0,v.dv)(G,S,W,M=0),!0,function(){var F;return f.I.Lib.closeProgress(T,D),T.__bLoadingImage=!1,T._isBindViewer()&&0<=(F=T._ImgManager.getCurrentImageIndex())&&T.OnRefreshUI(F),p&&p(G,y),!0},function(){f.I.Lib.closeProgress(T,D),T.__bLoadingImage=!1,f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString,G,y)})}else L=T.__innerLoadImageFun(D,(0,v.dv)(G,S,W,M),M,h);return L},c.SaveSelectedImagesToBytes=function(h,y){return f.D.Errors.HTML5NotSupport(this),!1},c.LoadImageFromBytes=function(h,y,p){return f.D.Errors.HTML5NotSupport(this),!1},c.UnregisterEvent=function(h,y){return this._resetErr(),!!this._isValid()&&!(this[["__",h].join("")]=null)},c.SetCancel=function(h,y){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCancel",y):this._innerSend("SetCancel",null,!0,h,y))},c._asyncSetImageWidth=function(h,y,p,m){var T=this,S=o()(h);return T._innerSendToMobile("SetImageWidth",(0,v.An)(S,y),0,function(){_.refreshImageAfterInvokeFun(T,h),f.D.isFunction(p)&&a()(p,30)},function(){f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString)})},c.SetImageWidth=function(C,y,p,m){var T=this;return T._resetErr(),!!T._isValid()&&(C=o()(C),isNaN(C)?(f.D.Errors.InvalidIndex(T),f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString),!1):C<0||C>=T._ImgManager.count()?(f.D.Errors.IndexOutOfRange(T),f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString),!1):f.D.isUndefined(y)?(f.D.Errors.InvalidParameter(T),f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString),!1):T._isMobileMode()?T._asyncSetImageWidth(C,y,p,m):-1==(C=T._ImgManager.convertClientIndexToServerId(C))?(f.D.Errors.IndexOutOfRange(T),f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString),!1):((C=1==T._innerFun("SetImageWidth",(0,v.dv)(C,y)))?f.D.isFunction(p)&&p():f.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString),C))},c.HTTPDownloadStreamThroughPost=function(h,y){return f.D.Errors.HTML5NotSupport(this),!1},c.HTTPUploadStreamThroughPost=function(h,y,p,m,T){return f.D.Errors.HTML5NotSupport(this),!1},c.HTTPUploadThroughPutDirectly=function(h,y,p,m,T){return f.D.Errors.HTML5NotSupport(this),!1},c.SetCustomDSDataEx=function(h){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCustomDSDataEx"):this._innerFun("SetCustomDSDataEx",(0,v.dv)(h)))},c.SetCustomDSData=function(h){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCustomDSData"):(h=_.replaceLocalFilename(h),this._innerFun("SetCustomDSData",(0,v.dv)(h))))},c.GetCustomDSDataEx=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetCustomDSDataEx"):this._innerFun("GetCustomDSDataEx"))},c.GetCustomDSData=function(h){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetCustomDSData"):(h=_.replaceLocalFilename(h),this._innerFun("GetCustomDSData",(0,v.dv)(h))))},c._asyncConvertToBW=function(h,y,p){var m=this,D=o()(h);return m._innerSendToMobile("ConvertToBWScale",(0,v.An)(D),0,function(){_.refreshImageAfterInvokeFun(m,h),f.D.isFunction(y)&&y()},function(){f.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString)})},c.ConvertToBW=function(h,y,p){var m=this;if(m._resetErr(),!m._isValid())return!1;if(!f.D.License.checkProductKey(m,{Core:!0}))return f.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1;var T=o()(h);return isNaN(T)?(f.D.Errors.InvalidIndex(m),f.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1):T<0||T>=m._ImgManager.count()?(f.D.Errors.IndexOutOfRange(m),f.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1):m._isMobileMode()?m._asyncConvertToBW(T,y,p):((T=m.ChangeBitDepth(h,1,!0))?f.D.isFunction(y)&&y():f.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),T)},c.LoadImageFromBinary=function(h,y,p){var m,T=this;if(!f.D.License.checkProductKey(T,{Core:!0}))return f.D.isFunction(p)&&p(T.ErrorCode,T.ErrorString),!1;if(!h||""==h)return f.D.Errors.ParameterCannotEmpty(T),f.D.isFunction(p)&&p(T.ErrorCode,T.ErrorString),!1;var C,D,S,M=(M=(M=h.currentFileName)||T.GetCurrentDocumentName())||T._ImgManager.getWebViewer().GetDefaultFileName();if(h instanceof FileList){if(1==h.length)return h[0].currentFileName=M,T.LoadImageFromBinary(h[0],y,p);if(1<h.length){for(var G=0;G<h.length;G++)h[G].currentFileName=M,f.D.asyncQueue.pushToDo(T,"LoadImageFromBinary",[h[G],y,p]);return f.D.asyncQueue.start(),!0}return f.D.Errors.ParameterCannotEmpty(T),f.D.isFunction(p)&&p(T.ErrorCode,T.ErrorString),!1}return window.ReadableStream&&h instanceof ReadableStream?m=new Response(h):window.Response&&h instanceof Response&&(m=h),T._bLocalService?m?m.arrayBuffer().then(function(L){L=new Blob([L]),T.__LoadImageFromBytes(L,-1,"",!0,y,p)}):(((C=h)instanceof ArrayBuffer||C instanceof Uint8Array)&&((C=new Blob([h])).currentFileName=h.currentFileName),D=-1,S=f.I.DWT.EnumDWT_ImageType,f.D.isString(C.type)&&("application/pdf"==C.type?D=S.IT_PDF:"image/png"==C.type?D=S.IT_PNG:"image/jpeg"==C.type||"image/jpg"==C.type?D=S.IT_JPG:"image/bmp"==C.type?D=S.IT_BMP:"image/tiff"==C.type||"image/tif"==C.type?D=S.IT_TIF:"image/jp2"==C.type&&(D=S.IT_J2K)),T.__LoadImageFromBytes(C,D,"",!0,y,p)):m?m.arrayBuffer().then(function(L){T._innerSendToMobile("LoadImageFromBinary",(0,v.An)(L,!1,null,M),0,y,p)}):T._innerSendToMobile("LoadImageFromBinary",(0,v.An)(h,!1,null,M),0,y,p),!0},c.EnableSourceUI=function(h,y){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("EnableSourceUI",y):this._innerSend("EnableSourceUI",null,!0,h,y))},c.getCapabilities=function(h,y){var p=this;return p._bLocalService?p._innerFunRaw("GetCapabilities",null,!0,!1,!1,function(m){var T,C;0<m.length&&(C=m[0]);try{T=f.D.isString(C)?(C=f.D.removeNonPrintableChar(C),C=u()(f.D).call(f.D,C,"\\\\","\\\\"),JSON.parse(C)):{}}catch(D){return p._errorCode=-2302,p._errorString=D,void(f.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString))}0==T.errorCode?f.D.isFunction(h)&&h(T.response):(p._errorCode=T.errorCode,p._errorString=T.errorString,f.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString))},y):p._mobileNotSupport("GetCapabilities",y)},c.setCapabilities=function(h,y,p){return this._bLocalService?f.D.isObject(h)&&!f.D.isArray(h)?(h=["[",f.D.stringify(h),"]"].join(""),this._innerSend("SetCapabilities",h,0,function(T){f.D.isFunction(y)&&y(T)},p)):(f.D.Errors.InvalidParameter(this),f.D.isFunction(p)&&p(this.ErrorCode,this.ErrorString),!1):this._mobileNotSupport("SetCapabilities",p)},c.BindViewer=function(h){var y=h;return f.I.DWT.UseDefaultViewer?(f.D.isString(h)&&(y=f.D.get(h)),this.config.container!=y&&(this.config.container=y,this.config.ifBindViewer=!0,f.D.html5.ui.init(this,this.config)),y=this._ImgManager.BindView(h),this._bBindViewer=!0,this.config.ifBindViewer=!1,y):(f.D.Errors.CannotBindViewerWhenNoViewerJS(this),!1)},c.UnbindViewer=function(){return this.__funResize&&(f.D.removeEventListener(window,"resize",this.__funResize),this.__funResize=!1),this._bBindViewer=!1,this.config.container=null,!!this._ImgManager&&this._ImgManager.UnbindView()},c.GetIfShowVideoContainer=function(){return this._ImgManager.GetIfShowVideoContainer()},c.ShowVideoContainer=function(h){return this._ImgManager.ShowVideoContainer(h)},c.UpdateVideoContainer=function(h){return this._ImgManager.UpdateVideoContainer(h)},c.ChangeBitDepth=function(h,y,p){var m=this;return m._resetErr(),!!m._isValid()&&(m._isMobileMode()?m._mobileNotSupport("ChangeBitDepth"):(h=o()(h),isNaN(h)?(f.D.Errors.InvalidIndex(m),!1):h<0||h>=m._ImgManager.count()||-1==(h=m._ImgManager.convertClientIndexToServerId(h))?(f.D.Errors.IndexOutOfRange(m),!1):m._innerFun("ChangeBitDepth",(0,v.dv)(h,y,p))))},c._asyncConvertToGrayScale=function(h,y,p){var m=this,C=function(){f.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString)};if(!f.D.License.checkProductKey(m,{Core:!0}))return C(),!1;var D=o()(h);return m._innerSendToMobile("ConvertToGrayScale",(0,v.An)(D),0,function(){_.refreshImageAfterInvokeFun(m,h),f.D.isFunction(y)&&a()(y,30)},C)},c.ConvertToGrayScale=function(h,y,p){var m=this;if(m._resetErr(),!m._isValid())return!1;if(h=o()(h),isNaN(h))return f.D.Errors.InvalidIndex(m),f.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1;if(h<0||h>=m._ImgManager.count())return f.D.Errors.IndexOutOfRange(m),f.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1;if(m._isMobileMode())return m._asyncConvertToGrayScale(h,y,p);var T=m._ImgManager.convertClientIndexToServerId(h);return-1==T?(f.D.Errors.IndexOutOfRange(m),f.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1):((T=1==m._innerFun("ConvertToGrayScale",(0,v.dv)(T)))?(_.refreshImageAfterInvokeFun(m,h),f.D.isFunction(y)&&y()):f.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),T)},c.ClearTiffCustomTag=function(){var h;return this._resetErr(),!!this._isValid()&&(s()(h=this._aryTiffTag).call(h,0,this._aryTiffTag.length),!!this._isMobileMode()||this._innerFun("ClearTiffCustomTag"))},c.SetTiffCustomTag=function(h,y,p){var m=this;if(m._resetErr(),!m._isValid())return!1;if(f.D.isUndef(h)||f.D.isUndef(y))return f.D.Errors.InvalidParameter(m),!1;var T=+h,C=f.D.isString(y)?u()(f.D).call(f.D,y,'"','\\"'):y;if(T<=0||2147483647<T)return f.D.Errors.InvalidTiffTagError(m),!1;var D,G=0,S=!1,M=m._aryTiffTag.length;for(G=0;G<M;G++)(D=m._aryTiffTag[G]).tag==T&&(D.Content=y,D.UseBase64Encoding=p,S=!0);return!S&&32<=M?(f.D.Errors.TiffTagCountExceedError(m),!1):m._isMobileMode()?(S||m._aryTiffTag.push({tag:h,content:y,UseBase64Encoding:p}),!0):m._innerFun("SetTiffCustomTag",(0,v.dv)(T,C,p))},c.IsBlankImage=function(h){var y=this;return y._resetErr(),!!y._isValid()&&(y._isMobileMode()?y._mobileNotSupport("IsBlankImage"):(h=o()(h),isNaN(h)?(f.D.Errors.InvalidIndex(y),!1):h<0||h>=y._ImgManager.count()||-1==(h=y._ImgManager.convertClientIndexToServerId(h))?(f.D.Errors.IndexOutOfRange(y),!1):y._innerFun("IsBlankImage",(0,v.dv)(h,!1))))},c.IsBlankImageExpress=function(h){var y=this;return y._resetErr(),!!y._isValid()&&(y._isMobileMode()?y._mobileNotSupport("IsBlankImageExpress"):(h=o()(h),isNaN(h)?(f.D.Errors.InvalidIndex(y),!1):h<0||h>=y._ImgManager.count()||-1==(h=y._ImgManager.convertClientIndexToServerId(h))?(f.D.Errors.IndexOutOfRange(y),!1):y._innerFun("IsBlankImage",(0,v.dv)(h,!0))))},c.SetOpenSourceTimeout=function(h){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetOpenSourceTimeout"):this._innerFun("SetOpenSourceTimeout",(0,v.dv)(h)))},c.GetImageURL=function(h,y,p,M,T){var C=this;if(C._resetErr(),!C._isValid())return!1;if(C._isMobileMode()){if(!f.D.isFunction(y))return C._mobileNotSupport("GetImageURL");C._ImgManager.getWebViewer().GetImageData(C._ImgManager.getWebViewer().GetUidByIndex(h)).then(function(L){y(L.oriData)},function(L){p(L.message)})}var D=o()(y),S=o()(p),G=(M=M?(G="","dwt://"):(G=C.httpUrl,"dwt/"),[G,M,f.D.product.getDWTPrefix(),f.D.product.getServerVersionInfo(),"/img?id=",C.clientId]);if(f.D.isUndefined(h)||null===h)return f.D.Errors.IndexNullOrUndefined(C),"";if(T)G.push("&index=-1&width=-1&height=-1&webcam="),G.push(T);else{if(h=o()(h),isNaN(h))return f.D.Errors.InvalidIndex(C),"";if(h<-1||h>=C._ImgManager.count())return f.D.Errors.IndexOutOfRange(C),"";if(-1==(M=C._ImgManager.convertClientIndexToServerId(h)))return"";G.push("&index="),G.push(M),0<D&&0<S&&(G.push("&width="),G.push(D),G.push("&height="),G.push(S))}return G.push("&t="),G.push((new Date).getTime()),G.join("")},c.GetImagePartURL=function(h,y,p){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetImagePartURL"):(h=o()(h),isNaN(h)?(f.D.Errors.InvalidIndex(this),""):h<0||h>=this._ImgManager.count()?(f.D.Errors.IndexOutOfRange(this),""):this.GetImageURL(h,y,p,!0)))},c.SetLanguage=function(h){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetLanguage"):this._innerFun("SetLanguageForSecurity",(0,v.dv)(h)))},c._wasmGetLicenseInfo=function(h,y){var p=this;return p._innerSendToMobile("GetLicenseInfo",(0,v.An)(),0,function(C){if(C)if(C.exception)y&&y(C.exception);else{if(p.__licenseInfo=(0,I.T)(C),f.D.detect.wasmScriptLoaded&&!f.D.detect.wasmPdfReaderLoaded)try{f.I.WasmEnv.loadPdfReader(),f.D.detect.wasmPdfReaderLoaded=!0}catch{}h&&h(p.__licenseInfo)}else y&&y()},y)},c.GetLicenseInfo=function(h,y){var p=this;if(p.__licenseInfo)f.D.isFunction(h)&&h(p.__licenseInfo);else{if(p._isMobileMode())return p._wasmGetLicenseInfo(h,y);if(_.isHttpServerInvalid(p))return!1;p._innerFunRaw("GetLicenseInfo",null,!0,!1,!0,function(m){if(m)if(m.exception)f.D.isFunction(y)&&y(m.exception);else{if(p.__licenseInfo=(0,I.T)(m),f.D.detect.wasmScriptLoaded&&!f.D.detect.wasmPdfReaderLoaded)try{f.I.WasmEnv.loadPdfReader(),f.D.detect.wasmPdfReaderLoaded=!0}catch{}f.D.isFunction(h)&&h(p.__licenseInfo)}else f.D.isFunction(y)&&y()},y)}return!0},c.IndexToImageID=function(h){return this._resetErr(),!!this._isValid()&&(h=o()(h),isNaN(h)?(f.D.Errors.InvalidIndex(this),-1):h<0||h>=this._ImgManager.count()?(f.D.Errors.IndexOutOfRange(this),-1):(h=this._ImgManager.convertClientIndexToServerId(h),this.objImageIndexManager.convertServerIdToGuid(h)))},c.ImageIDToIndex=function(h){var y=-1;return this._resetErr(),!!this._isValid()&&(-1==(y=0<(h=this.objImageIndexManager.convertGuidToServerId(h))?this._ImgManager.convertServerIdToClientIndex(h):y)&&f.D.Errors.InvalidImageID(this),y)},c._setProductKeyV2=function(h){var y=this;if(y._resetErr(),!y._isValid())return!1;if(_.isHttpServerInvalid(y))return f.D.Promise.reject({code:y._errorCode,message:y._errorString});if(!f.D.isString(h)||"******"==h)return f.D.Errors.LicenseEmptyOrInvalid(y),f.D.Promise.reject({code:y._errorCode,message:y._errorString});var p,m=f.I.DWT.ProductKey;return(p=(p=y._innerFunRawV2("ProductKey",(0,v.dv)(h))).then(function(T){if(T){if(void 0!==T.exception&&void 0!==T.description)throw y._errorCode=T.exception,y._errorString=T.description,f.I.DWT.ProductKey=m,p.context=null,{code:y._errorCode,message:y._errorString};return f.I.DWT.ProductKey=p.context.productKey,p.context=null,y._innerFunRawV2("GetLicenseInfo")}throw f.D.Errors.LicenseEmptyOrInvalid(y),f.I.DWT.ProductKey=m,p.context=null,{code:y._errorCode,message:y._errorString}})).context={productKey:h},p},c.SetProductKeyAsync=function(h){var y=this;return y._resetErr(),y._isValid()?f.D.isUndefined(h)?(f.D.Errors.LicenseEmptyOrInvalid(y),f.D.Promise.reject({code:y._errorCode,message:y._errorString})):(y._isMobileMode()?y._innerSendToMobileV2("GetLicenseInfo",(0,v.An)(h)):y._setProductKeyV2(h)).then(function(p){if(!p||p.message)throw f.D.Errors.LicenseEmptyOrInvalid(y),p&&p.message&&(y._errorString=p.message),{code:y._errorCode,message:y._errorString};if(f.D.License.isLTS()||(f.I.DWT.ProductKey=h),y.__licenseInfo=(0,I.T)(p),f.D.detect.wasmScriptLoaded&&!f.D.detect.wasmPdfReaderLoaded)try{f.I.WasmEnv.loadPdfReader(),f.D.detect.wasmPdfReaderLoaded=!0}catch{}return p}):f.D.Promise.reject({code:y.ErrorCode,message:y.ErrorString})},c.GetVersionInfoAsync=function(){return this._innerFunV2("VersionInfo")},c.isUsingActiveX=function(){return!1},c._setLTSLic=function(h){var y=this;return y._resetErr(),!!y._isValid()&&(_.isHttpServerInvalid(y)?f.D.Promise.reject({code:y._errorCode,message:y._errorString}):f.D.isString(h)?y._innerFunRawV2("LTSLicense",(0,v.dv)(h)).then(function(p){if(p){if(void 0!==p.exception&&void 0!==p.description)throw y._errorCode=p.exception,y._errorString=p.description,{code:y._errorCode,message:y._errorString};return y._innerFunRawV2("GetLicenseInfo")}throw f.D.Errors.LicenseEmptyOrInvalid(y),{code:y._errorCode,message:y._errorString}}):(f.D.Errors.LicenseEmptyOrInvalid(y),f.D.Promise.reject({code:y._errorCode,message:y._errorString})))},c.SetLTSLicenseAsync=function(h){var y=this;return y._resetErr(),y._isValid()?f.D.isString(h)?(y._isMobileMode()?y._innerSendToMobileV2("GetLicenseInfo",(0,v.An)(h)):y._setLTSLic(h)).then(function(p){if(!p||p.message)throw f.D.Errors.LicenseEmptyOrInvalid(y),p&&p.message&&(y._errorString=p.message),{code:y._errorCode,message:y._errorString};if(y.__licenseInfo=(0,I.T)(p),f.D.detect.wasmScriptLoaded&&!f.D.detect.wasmPdfReaderLoaded)try{f.I.WasmEnv.loadPdfReader(),f.D.detect.wasmPdfReaderLoaded=!0}catch{}return y.__licenseInfo&&(y.__licenseInfo.LTS=!0),p}):(f.D.Errors.LicenseEmptyOrInvalid(y),f.D.Promise.reject({code:y._errorCode,message:y._errorString})):f.D.Promise.reject({code:y._errorCode,message:y._errorString})}},2696:function(e,r,t){t.r(r),r=t(9104);var a=t.n(r),o=t(1695),u=t(1188),s=o.I.navInfo,f=o.D.html5.Funs,v=f.DEF,l=f.DEF_NOT_SUPPORT_MOBILE,I=function(m,T,C){2==C&&o.D.each(T,function(D,S){v(m,D,{get:function(){return m._resetErr(),!!m._isValid()},set:function(M){return m._resetErr(),!!m._isValid()}})})},c=function(m,T){o.D.each(T,function(C,D){v(m,C,1,2)})},_=function(m,T){o.D.each(T,function(C,D){v(m,C,1,1)})},h=function(m,T){o.D.each(T,function(C,D){v(m,C,0)})},y=function(m,T){o.D.each(T,function(C,D){v(m,C,1)})};o.D.DynamicLoadAddonFuns=[],o.D.attachAddon=function(p){o.D.each(o.D.DynamicLoadAddonFuns,function(m){o.D.isFunction(m)&&m(p)})},o.D.attachProperty=function(T){var m=T;v(m,"ErrorCode",{get:function(){return m._errorCode}}),v(m,"ErrorString",{get:function(){return-2207==m._errorCode&&m.__bMustUpgradeService&&o.D.Errors.MustUpgradeService(m),0!=m._errorCode?m._errorString:"Successful."}}),v(m,"ProductKey",{get:function(){return o.I.DWT.ProductKey},set:function(C){return o.D.isString(C)?(m._resetErr(),!!m._isValid()&&m._setProductKey(C,!1)):(o.D.Errors.InvalidValue(m),!1)}}),v(m,"ProductName",{get:function(){return m.__strProductName},set:function(C){return m._resetErr(),o.D.isString(C)?(m.__strProductName=C,!0):(o.D.Errors.InvalidValue(m),!1)}}),v(m,"VersionInfo",{get:function(){return m.__versionInfo}}),m._isMobileMode()?l(m,"DefaultSourceName",0):v(m,"DefaultSourceName",{get:function(){if(m._resetErr(),!m._isValid())return!1;o.D.isUndefined(m.__currentImageCaptureDriverType)&&(m.__currentImageCaptureDriverType=0);var C="",D=0,S=m._innerFun("GetDefaultSourceName",(0,u.dv)(m._driverType));return 0<S.length&&(D=(S=JSON.parse(S)).type,C=o.I.Lib.base64.decode(S.ProductName)),4==m._driverType?D==o.I.DWT.EnumDWT_Driver.TWAIN64&&0<C.length?"Twain64-"+C:D==o.I.DWT.EnumDWT_Driver.ICA&&m.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumMac&&0<C.length?"ICA-"+C:C:m.__currentImageCaptureDriverType==o.I.DWT.EnumDWT_Driver.TWAIN64?0<C.length&&D==o.I.DWT.EnumDWT_Driver.TWAIN64?"Twain64-"+C:C:m.__currentImageCaptureDriverType==o.I.DWT.EnumDWT_Driver.ICA&&0<C.length&&m.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumMac?"ICA-"+C:C}}),m._isMobileMode()?l(m,["ImageCaptureDriverType","IfShowCancelDialogWhenImageTransfer"]):(v(m,"IfShowCancelDialogWhenImageTransfer",{get:function(){return m._resetErr(),!!m._isValid()&&m.__IfShowCancelDialogWhenImageTransfer},set:function(C){return o.D.isBoolean(C)?(m._resetErr(),!!m._isValid()&&(m.__IfShowCancelDialogWhenImageTransfer=C)):(o.D.Errors.InvalidValue(m),!1)}}),v(m,"ImageCaptureDriverType",{get:function(){return m._resetErr(),m._isValid()?m._driverType:0},set:function(C){var D=!1,S=!1,M=!1;if(m._bRemoteMode?m.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumWindow?M=!0:m.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumLinux?S=!0:m.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumMac&&(D=!0):(D=s.bMac,S=s.bLinux,M=s.bWin),m._resetErr(),!m._isValid())return!1;if(""===C||(C=+C)<o.I.DWT.EnumDWT_Driver.TWAIN||C>o.I.DWT.EnumDWT_Driver.TWAIN64)return o.D.Errors.ImageCaptureDriverTypeError(m),!1;if(M){if(C===o.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(o.I.dcp.b64bit)return m._driverType=C,m.__icaSourceCount=-1,m._innerFun("SetImageCaptureDriverType",(0,u.dv)(o.I.DWT.EnumDWT_Driver.TWAIN,m._driverType))}else if(C!=o.I.DWT.EnumDWT_Driver.TWAIN&&C!=o.I.DWT.EnumDWT_Driver.TWAIN64)return o.D.Errors.ImageCaptureDriverTypeError(m),!1;o.I.dcp.b64bit||(C=o.I.DWT.EnumDWT_Driver.TWAIN),m._driverType=C,m.__currentImageCaptureDriverType=C}else{if(S)return m._driverType=C=o.I.DWT.EnumDWT_Driver.SANE,(m.__currentImageCaptureDriverType=C)===o.I.DWT.EnumDWT_Driver.SANE||(o.D.Errors.ImageCaptureDriverTypeError(m),!1);if(D){if(C===o.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA)return m._driverType=C,m.__icaSourceCount=-1,!0;if(C!=o.I.DWT.EnumDWT_Driver.ICA&&C!=o.I.DWT.EnumDWT_Driver.TWAIN&&C!=o.I.DWT.EnumDWT_Driver.TWAIN64)return o.D.Errors.ImageCaptureDriverTypeError(m),!1;m._driverType=C,m.__currentImageCaptureDriverType=C}}return m.__icaSourceCount=0,m.CloseSourceManager(),M=m._innerFun("SetImageCaptureDriverType",(0,u.dv)(C,m._driverType)),m.OpenSourceManager(),M}})),m._isMobileMode()?l(m,"SourceCount",0):v(m,"SourceCount",{get:function(){var C,D,S,M,G,L,W,F,U,H=[],Z=!1,X=!1;if(m._bRemoteMode?m.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumWindow?X=!0:m.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumLinux||m.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumMac&&(Z=!0):(Z=s.bMac,X=s.bWin),m._resetErr(),!m._isValid()||!o.D.License.checkProductKey(m,{Core:!0}))return 0;if(m._resetSources(),m.__icaSourceCount=0,Z&&m._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA){for(D=[],W=m._getSourceNamesSyncV2(o.I.DWT.EnumDWT_Driver.ICA),L=0;L<W.length;L++)o.D.isString(M=W[L].ProductName)&&""!==(M=a()(o.D).call(o.D,M))&&(1==W[L].IsDefaultSource&&(S=M),H.push("ICA"===W[L].DriverType?"ICA-"+M:M),D.push(W[L]));for(void 0===S&&0<W.length&&o.D.isString(M=W[0].ProductName)&&""!==(M=a()(o.D).call(o.D,M))&&(S="ICA"===W[0].DriverType?"ICA-"+M:M),U=m._getSourceNamesSyncV2(o.I.DWT.EnumDWT_Driver.TWAIN),L=0;L<U.length;L++)o.D.isString(M=U[L].ProductName)&&""!==(M=a()(o.D).call(o.D,M))&&(1==U[L].IsDefaultSource&&(S=M),H.push("ICA"===U[L].DriverType?"ICA-"+M:M),D.push(U[L]));void 0===S&&0<U.length&&o.D.isString(M=U[0].ProductName)&&""!==(M=a()(o.D).call(o.D,M))&&(S="ICA"===U[0].DriverType?"ICA-"+M:M),C=D.length,m.__defaultSourceName=S,m.__icaSourceCount=W.length,m.__sourceCount=C,m.__sourceName=H,m.__sourceDetails=D}else if(X&&o.I.dcp.b64bit&&m._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){for(D=[],U=m._getSourceNamesSyncV2(o.I.DWT.EnumDWT_Driver.TWAIN),L=0;L<U.length;L++)o.D.isString(M=U[L].ProductName)&&""!==(M=a()(o.D).call(o.D,M))&&(1==U[L].IsDefaultSource&&(S=M),H.push(M),D.push(U[L]));if(void 0===S&&0<U.length&&o.D.isString(M=U[0].ProductName)&&""!==(M=a()(o.D).call(o.D,M))&&(S=M),o.I.dcp.b64bit){for(F=m._getSourceNamesSyncV2(o.I.DWT.EnumDWT_Driver.TWAIN64),L=0;L<F.length;L++)o.D.isString(M=F[L].ProductName)&&""!==(M=a()(o.D).call(o.D,M))&&(1==F[L].IsDefaultSource&&(S=M),H.push("TWAIN(64Bit)"===F[L].DriverType?"Twain64-"+M:M),D.push(F[L]));void 0===S&&0<F.length&&o.D.isString(M=F[0].ProductName)&&""!==(M=a()(o.D).call(o.D,M))&&(S="TWAIN(64Bit)"===F[0].DriverType?"Twain64-"+M:M)}else F=[];C=D.length,m.__defaultSourceName=S,m.__icaSourceCount=U.length,m.__sourceCount=C,m.__sourceName=H,m.__sourceDetails=D}else{if(G=m._getSourceNamesSyncV2(),m.__defaultSourceName="",G&&1<=G.length){for(L=0;L<G.length;L++)o.D.isString(M=G[L].ProductName)&&""!==(M=a()(o.D).call(o.D,M))&&(1==G[L].IsDefaultSource&&(S=M),H.push(M));o.D.isString(S)?m.__defaultSourceName=S:o.D.isString(M=G[0].ProductName)&&""!==(M=a()(o.D).call(o.D,M))&&(m.__defaultSourceName="ICA"===G[0].DriverType?"ICA-"+M:M)}else G=[],H=[];m.__sourceCount=C=G.length,m._driverType===o.I.DWT.EnumDWT_Driver.ICA&&Z&&0<C&&(o.D.each(H,function($,V){o.D.isString($)&&""!==($=a()(o.D).call(o.D,$))&&(H[V]="ICA-"+$)}),""!==m.__defaultSourceName&&(m.__defaultSourceName="ICA-"+m.__defaultSourceName)),m.__sourceName=H,m.__sourceDetails=G}return C<=0?(D=[],H=[],m.__sourceName=[],m.__sourceDetails=[],m.__defaultSourceName="",m.__sourceCount=0):C}}),v(m,"HowManyImagesInBuffer",{get:function(){return m._isValid()?m._ImgManager.count():0}}),v(m,"HTTPPostResponseString",{get:function(){return m._resetErr(),m._isValid()&&m.__HTTPPostResponseString||""}}),v(m,"IfAppendImage",{get:function(){return m._resetErr(),!!m._isValid()&&m.__IfAppendImage},set:function(C){return m._resetErr(),!!m._isValid()&&(o.D.isBoolean(C)?m.__IfAppendImage=C:(o.D.Errors.InvalidValue(m),!1))}}),m._isMobileMode()?l(m,["FTPPort","IfShowProgressBar","IfAppendImage"]):(v(m,"FTPPort",{get:function(){return m._resetErr(),m._isValid()?m._innerFun("FTPPort"):0},set:function(C){return m._resetErr(),!!m._isValid()&&(""!==C?m._innerFun("FTPPort",(0,u.dv)(+C)):void 0)}}),v(m,"IfShowProgressBar",{get:function(){return m._resetErr(),!!m._isValid()&&m.__IfShowProgressBar},set:function(C){return m._resetErr(),!!m._isValid()&&(o.D.isBoolean(C)?m.__IfShowProgressBar=C:(o.D.Errors.InvalidValue(m),!1))}})),m._isMobileMode()?v(m,"JPEGQuality",{get:function(){return m._resetErr(),!!m._isValid()&&m._jpgQuality},set:function(C){return 100<=(C=+C)?C=100:C<0&&(C=0),m._resetErr(),!!m._isValid()&&(m._jpgQuality=C,!0)}}):v(m,"JPEGQuality",{get:function(){return m._resetErr(),m._isValid()?m._innerFun("JPEGQuality"):0},set:function(C){return 100<=(C=+C)?C=100:C<0&&(C=0),m._resetErr(),!!m._isValid()&&m._innerFun("JPEGQuality",(0,u.dv)(C))}}),m._isMobileMode()?v(m,"TIFFCompressionType",{get:function(){return m._resetErr(),m._isValid()?m._tiffCompressionType:0},set:function(C){return m._resetErr(),!!m._isValid()&&(m._tiffCompressionType=C,!0)}}):v(m,"TIFFCompressionType",1,1),m._isMobileMode()?v(m,"BufferMemoryLimit",{get:function(){return m._resetErr(),m._isValid(),0},set:function(C){return m._resetErr(),m._isValid(),!1}}):v(m,"BufferMemoryLimit",1,1),m._isMobileMode()?v(m,"LogLevel",{get:function(){return m._resetErr(),m._isValid()?m._logLevel:0},set:function(C){return m._resetErr(),!!m._isValid()&&(14<=(C=+C)?C=14:C<0&&(C=0),o.I.WasmEnv&&o.I.WasmEnv.setLoglevel(m._logLevel),m._logLevel=C,!0)}}):v(m,"LogLevel",1,1),v(m,"HttpContentTypeFieldValue",{get:function(){return m._resetErr(),m._isValid()?m.__strHttpContentTypeFieldValue:""},set:function(C){return m._resetErr(),!!m._isValid()&&(m.__strHttpContentTypeFieldValue=C)}}),v(m,"BrokerProcessType",{get:function(){return m._resetErr(),m._isValid()?1:0},set:function(C){return m._resetErr(),!!m._isValid()}}),v(m,"BorderStyle",{get:function(){return m._resetErr(),!!m._isValid()&&0},set:function(C){return m._resetErr(),m._isValid(),!1}}),v(m,"HttpFieldNameOfUploadedImage",{get:function(){return m._resetErr(),!!m._isValid()&&m.__remoteFilename},set:function(C){return m._resetErr(),!!m._isValid()&&(m.__remoteFilename=C)}}),v(m,"style",{get:function(){return m._isValid()?m.__style:""}}),v(m,"Addon",{get:function(){return m.__addon}}),v(m,"HTTPRequestswithCredentials",{get:function(){return m._resetErr(),!!m._isValid()&&m.__withCredentials},set:function(C){return m._resetErr(),!!m._isValid()&&(m.__withCredentials=C)}}),v(m,"ScaleDownThreshold",{get:function(){return m._resetErr(),m._isValid()?m._scaleDownThreshold:0},set:function(C){var D=+C;return!o.D.isNumber(D)||isNaN(D)?(o.D.Errors.InvalidValue(self),!1):(m._resetErr(),!!m._isValid()&&(m._scaleDownThreshold=C))}}),v(m,"CurrentImageIndexInBuffer",{get:function(){return m._isValid()?m._ImgManager.getCurrentImageIndex():0},set:function(C){return C=+C,m._resetErr(),!!m._isValid()&&(0<=C&&C<m._ImgManager.count()&&(m._ImgManager.Go(C),m._isBindViewer()&&f.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())),!0)}}),v(m,"SelectedImagesIndices",{get:function(){return m._resetErr(),!m._isValid()||m._ImgManager.count()<=0?[]:m._ImgManager.getSelectedClientIndexArray()}}),v(m,"MaxImagesInBuffer",{get:function(){return m._resetErr(),m._isValid()?m.__maxImagesInBuffer:0},set:function(C){return C=+C,m._resetErr(),!!m._isValid()&&(0<C&&C<32768?m.__maxImagesInBuffer=C:o.D.Errors.OutOfRange(m),m.__maxImagesInBuffer)}}),v(m,"MaxUploadImageSize",{get:function(){return m._resetErr(),!!m._isValid()&&m.__maxUploadImageSize},set:function(C){return C=+C,m._resetErr(),!!m._isValid()&&(m.__maxUploadImageSize=C,m._isMobileMode()||m._innerFun("MaxUploadImageSize",(0,u.dv)(C)),m.__maxUploadImageSize)}}),v(m,"IfSSL",{get:function(){return m._ifSSL},set:function(C){return m._ifSSL=C,m._isMobileMode()||m._innerFun("IfSSL",(0,u.dv)(C)),!0}}),m._isMobileMode()?v(m,"IfAllowLocalCache",{get:function(){return!1},set:function(C){return!1}}):v(m,"IfAllowLocalCache",1,2),v(m,"UseLocalService",{get:function(){return!m._isMobileMode()}}),v(m,"PDFCompressionType",{get:function(){return m._resetErr(),!!m._isValid()&&(m._isMobileMode()?m._mobileNotSupport("PDFCompressionType"):m._innerFun("PDFCompressionType"))},set:function(C){return(C=+C)==o.I.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(C=o.I.DWT.EnumDWT_PDFCompressionType.PDF_FAX4),m._resetErr(),!!m._isValid()&&(m._isMobileMode()?m._mobileNotSupport("PDFCompressionType"):m._innerFun("PDFCompressionType",(0,u.dv)(C)))}}),m._getPdfDllname=function(){var C=!1,D=!1;return m._bRemoteMode?m.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumWindow||(m.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumLinux?D=!0:m.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumMac&&(C=!0)):(C=s.bMac,D=s.bLinux),C?o.I.dcp.b64bit?"libDynamicPdfCorex64_"+o.I.DWT.PdfVersion+".dylib":"libDynamicPdfCore_"+o.I.DWT.PdfVersion+".dylib":D?"libDynamicPdfCore_"+o.I.DWT.PdfVersion+".so":o.I.dcp.b64bit?"DynamicPdfCorex64_"+o.I.DWT.PdfVersion+".dll":"DynamicPdfCore_"+o.I.DWT.PdfVersion+".dll"},m._setConvertModeInner=function(C){return!(!o.D.License.checkProductKey(m,{Core:!0})||(C=+C,m._resetErr(),!m._isValid()||(isNaN(C)?(o.D.Errors.ParameterCannotEmpty(m),1):1!=C&&2!=C&&3!=C&&4!=C?(o.D.Errors.InvalidValue(m),1):(m._pdfRealConvertMode=2==(m._pdfConvertMode=C)||o.D.License.hasPDFRProductKey(m)?C:2,0))))},m._setConvertMode=function(C){return!!m._setConvertModeInner(C)&&(m._isMobileMode()||(C=m._getPdfDllname(),m._innerFun("SetPDFConvertMode",(0,u.dv)(m._pdfRealConvertMode,C))),!(2==m._pdfRealConvertMode&&1==m._pdfConvertMode||2==m._pdfRealConvertMode&&4==m._pdfConvertMode)||(o.D.Errors.LicenseNoPDF(m),!1))},m._setConvertModeAsync=function(C){return m._setConvertModeInner(C)?m._isMobileMode()?2==m._pdfRealConvertMode&&1==m._pdfConvertMode||2==m._pdfRealConvertMode&&4==m._pdfConvertMode?(o.D.Errors.LicenseNoPDF(m),o.D.Promise.reject({code:m._errorCode,message:m._errorString})):o.D.Promise.resolve(!0):(C=m._getPdfDllname(),m._innerFunV2("SetPDFConvertMode",(0,u.dv)(m._pdfRealConvertMode,C)).then(function(){if(2==m._pdfRealConvertMode&&1==m._pdfConvertMode||2==m._pdfRealConvertMode&&4==m._pdfConvertMode)throw o.D.Errors.LicenseNoPDF(m),{code:m._errorCode,message:m._errorString};return!0})):o.D.Promise.reject({code:m._errorCode,message:m._errorString})},m._setProductKey=function(C,D,S,M){var G=!0,L=function(F){return F||(m.__licenseInfo=!1),F=!0,M||(F=o.D.License.checkProductKey(m,{Core:!0})),o.D.isFunction(S)&&S(),F};if(m._resetErr(),!m._isValid())return!1;if(o.D.isString(C)&&"******"!=C||(C=""),""==(o.I.DWT.ProductKey=C))G=!1,L();else{if(m._isMobileMode())return o.D.showProgressMsg(-1,"",o.I.MSG.Init_GetLicenseInfoForDWT),m.GetLicenseInfo(function(W){o.I.WasmEnv&&o.I.WasmEnv.setLoglevel(m._logLevel),m._setConvertMode(m._pdfConvertMode),m._resetErr(),L(!0)},L),!0;m._innerFunRaw("ProductKey",(0,u.dv)(C),D,!1,!1,function(W){var F=o.D.isArray(W)?W[0]:W;o.D.isArray(W)&&3<=W.length&&"1"===W[1]&&o.D.isFunction(o.I.DWT.ShowMessage)&&o.I.DWT.ShowMessage(W[2],{width:510,height:272,headerStyle:1,seconds:10}),D||(G=F),o.D.showProgressMsg(-1,"",o.I.MSG.Init_GetLicenseInfoForDWT),m.GetLicenseInfo(function(){m._setConvertMode(m._pdfConvertMode),L(!0)},L)},function(){D||(G=!1),L()})}return G},y(m,["ProxyServer"]),T=["CapValueString","CapDescription","FTPPassword","FTPUserName","Manufacturer","ProductFamily","PDFAuthor","PDFCreationDate","PDFCreator","PDFKeywords","PDFModifiedDate","PDFProducer","PDFSubject","PDFTitle","PDFVersion"],(m._isMobileMode()?l:y)(m,T),h(m,["ImageBitsPerPixel","ImageLength","ImageWidth","ImageXResolution","ImageYResolution"]),T=["BlankImageCurrentStdDev","CapDefaultIndex","CapDefaultValue","DataSourceStatus","Duplex","PendingXfers","ImageLayoutDocumentNumber","ImageLayoutFrameBottom","ImageLayoutFrameLeft","ImageLayoutFrameNumber","ImageLayoutFrameRight","ImageLayoutFrameTop","ImageLayoutPageNumber","ImagePixelType","MagData","MagType","IfFeederLoaded","IfPaperDetectable","IfUIControllable"],m._isMobileMode()?l(m,T,0):h(m,T),c(m,["AllowPluginAuthentication","IfModalUI","IfScanInNewThread","_AutoCropMethod"]),T=["CurrentSourceName","IfDisableSourceAfterAcquire","IfDuplexEnabled","IfFeederEnabled","IfShowFileDialog","IfShowUI","IfPASVMode","IfAutoBright","IfAutoDiscardBlankpages","IfAutoFeed","IfAutomaticBorderDetection","IfAutomaticDeskew","IfAutoScan","IfShowIndicator","IfUseTwainDSM","IfTiffMultiPage"],(m._isMobileMode()?l:c)(m,T),_(m,["MaxInternetTransferThreads"]),T=["BlankImageMaxStdDev","BlankImageThreshold","BitDepth","Brightness","PageSize","PixelType","Resolution","Capability","CapCurrentIndex","CapCurrentValue","CapMaxValue","CapMinValue","CapNumItems","CapStepSize","CapType","CapValue","CapValueType","Contrast","PixelFlavor","TransferMode","Unit","XferCount"],(m._isMobileMode()?l:_)(m,T),I(m,["AsyncMode","EnableInteractiveZoom","IfThrowException","ImageEditorIfEnableEnumerator","ImageEditorIfReadonly","ImageEditorIfModal","ImageEditorWindowTitle","IfShowPrintUI","VScrollBar"],2),T=["IfOpenImageWithGDIPlus"],(m._isMobileMode()?l:I)(m,T)},o.D.attachPropertyUI||(o.D.attachPropertyUI=function(){})},8975:function(e,f,t){t.r(f),f=t(9104);var r=t.n(f),a=(f=t(7711),t.n(f)),o=t(1695),u=t(1188),s=o.I.navInfoSync,v=o.D.html5.Funs,l=o.D.removeNonPrintableChar,I=["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnPostTransferAsync"],c=((f=o.D.html5.STwain.prototype).LoadDibFromClipboard=function(_,h){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("LoadDibFromClipboard",h);var y=this.__GetLoadEventsNum();return this.__innerLoadImage("LoadDibFromClipboard",(0,u.dv)(y,1),-1,!0,1,_,h)},f.LoadImage=function(D,h,y){var p=this;if(p._resetErr(),!p._isValid())return!1;if(p._isMobileMode())return p._mobileNotSupport("LoadImage",y);D=v.replaceLocalFilename(D);var m,T,C,S=o.D.html5.Funs.getImageType(D);return h&&o.D.isFunction(h)&&(T=function(){h()}),y&&o.D.isFunction(y)&&(C=function(){y(p.ErrorCode,p.ErrorString)}),m=p.__GetLoadEventsNum(),""==D&&(p.__bOpenFileNow=!0),p.__innerLoadImage("LoadImage",(0,u.dv)(D,m,1),S,!0,1,T,C)},f.LoadImageEx=function(_,h,y,p){var m=this;if(m._resetErr(),!m._isValid())return!1;if(m._isMobileMode())return 0==(S=o.D.one(".d-loadImage")).length?((D=document.createElement("input"))._stwain=m,D.setAttribute("type","file"),D.setAttribute("multiple","multiple"),D.style="position:absolute;top:-2px;left:-2px;width:1px;height:1px;",D.className="d-loadImage",D.setAttribute("accept",h==o.I.DWT.EnumDWT_ImageType.IT_BMP?"image/bmp":h==o.I.DWT.EnumDWT_ImageType.IT_JPG?"image/jpeg":h==o.I.DWT.EnumDWT_ImageType.IT_TIF?"image/tiff":h==o.I.DWT.EnumDWT_ImageType.IT_PNG?"image/png":h==o.I.DWT.EnumDWT_ImageType.IT_PDF?".pdf":h==o.I.DWT.EnumDWT_ImageType.IT_J2K?".jp2,.j2k,.j2c":o.D.env.bMobile?"image/jpeg,image/png,image/tiff,image/tif":"image/*,.pdf,.jp2,.j2k,.j2c"),D.ondoubleclick=function(){0<this.files.length&&this._stwain.LoadImageFromBinary(this.files,y,p),this.value="",this._stwain=null},D.onchange=function(){0<this.files.length&&this._stwain.LoadImageFromBinary(this.files,y,p),this.value="",this._stwain=null},document.body.appendChild(D),D.click()):(S[0].setAttribute("accept",h==o.I.DWT.EnumDWT_ImageType.IT_BMP?"image/bmp":h==o.I.DWT.EnumDWT_ImageType.IT_JPG?"image/jpeg":h==o.I.DWT.EnumDWT_ImageType.IT_TIF?"image/tiff":h==o.I.DWT.EnumDWT_ImageType.IT_PNG?"image/png":h==o.I.DWT.EnumDWT_ImageType.IT_PDF?".pdf":h==o.I.DWT.EnumDWT_ImageType.IT_J2K?".jp2,.j2k,.j2c":o.D.env.bMobile?"image/jpeg,image/png,image/tiff,image/tif":"image/*,.pdf,.jp2,.j2k,.j2c"),S[0].value="",S[0]._stwain=m,S[0].click()),!0;var T,C,D=v.replaceLocalFilename(_),S=h;return y&&o.D.isFunction(y)&&(T=function(){y()}),p&&o.D.isFunction(p)&&(C=function(){p(m.ErrorCode,m.ErrorString)}),S==o.I.DWT.EnumDWT_ImageType.IT_ALL&&(S=-1),_=m.__GetLoadEventsNum(),""==D&&(m.__bOpenFileNow=!0),m.__innerLoadImage("LoadImageEx",(0,u.dv)(D,S,_,1),S,!0,1,T,C)},f.EnableSource=function(_,h,y){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("EnableSource",y):this.AcquireImage(_,h,y))},f.AcquireImage=function(_,h,y){var p,m,T=this,C=null,D=null;if(T._resetErr(),!T._isValid())return!1;if(o.D.isUndefined(y)&&(o.D.isFunction(_)&&o.D.isFunction(h)||o.D.isFunction(_)&&o.D.isUndefined(h)||o.D.isFunction(_)&&null==h||null==_&&o.D.isFunction(h))?(m={},o.D.isFunction(_)&&(C=_),o.D.isFunction(h)&&(D=h)):(m=o.D.isUndefined(_)||null==_?{}:o.D.clone(_),o.D.isFunction(h)&&(C=function(){h(m)}),o.D.isFunction(y)&&(D=function(){y(m,T._errorCode,T._errorString)})),!o.D.License.checkProductKey(T,{Core:!0}))return o.D.isFunction(D)&&D(T.ErrorCode,T.ErrorString),!1;if(T._isMobileMode())return T._mobileNotSupport("AcquireImage",D);if(v.isServerInvalid(T))return o.D.isFunction(D)&&D(T.ErrorCode,T.ErrorString),!1;!T._bRemoteMode&&m.RemoteScan&&(m.RemoteScan=!1),T._bRemoteMode&&m.RemoteScan&&(o.D.isFunction(T.__OnRemoteScanStatusAsync)||(T.__OnRemoteScanStatusAsync=function(){}),o.D.isFunction(T.__OnSourceUIClose)||(T.__OnSourceUIClose=function(){}));for(var S,M=0,G=0;G<I.length;G++){var L=["__",I[G]].join("");o.D.isFunction(T[L])&&(M|=1<<G)}return m.EnableEvents=M,T._enableEvents=M,T._bRemoteMode&&m.RemoteScan&&(T._isBindViewer()||m.ShowRemoteScanUI)&&((_=document.createElement("div")).style.position="absolute",_.style.zIndex="510000",_.style.left="0",_.style.top="0",(S=document.createElement("img")).className="ds-img-screen",_.appendChild(S),document.body.appendChild(_),T._acquireDivEL=_),"SelectSourceByIndex"in m?(S=m.SelectSourceByIndex,delete m.SelectSourceByIndex,T.SelectSourceByIndexAsync(S).then(function(){return p=["[",o.D.stringify(m),"]"].join(""),T.__bAcquireImageNow=!0,T.__innerAcquireImage("AcquireImage",p,!1,C,D)},function(W){D(W.code,W.message)})):(T._bRemoteMode||(T.bPageFocus&&o.I.DWT.IfAlwaysFocusOnPopupWindow?T.bServerAlwaysFocusOnPopupWindow||T._OnPageFocus(!0):T.bServerAlwaysFocusOnPopupWindow&&T._OnPageBlur(!0)),p=["[",o.D.stringify(m),"]"].join(""),T.__bAcquireImageNow=!0,T.__innerAcquireImage("AcquireImage",p,!1,C,D))},f._startScan=function(_,h,y){var p=this,m=null,T=null,C=o.D.isUndefined(_)||null==_?{}:_;if(p._resetErr(),!p._isValid())return!1;if(o.D.isFunction(h)&&(m=function(){h(C)}),o.D.isFunction(y)&&(T=function(L,W){y(L,W,C)}),v.isServerInvalid(p)||!o.D.License.checkProductKey(p,{Core:!0}))return o.D.isFunction(T)&&T(p._errorCode,p._errorString),!1;for(var D=0,S=0;S<I.length;S++){var M=["__",I[S]].join("");o.D.isFunction(p[M])&&(D|=1<<S)}return C.EnableEvents=D,_=["[",o.D.stringify(C),"]"].join(""),p.__bAcquireImageNow=!0,p.__innerAcquireImage("StartScan",_,!1,m,T)},f.CancelAllPendingTransfers=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CancelAllPendingTransfers"):this._innerFun("CancelAllPendingTransfers"))},f.CloseSource=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CloseSource"):this._innerFun("CloseSource"))},f.CloseSourceManager=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CloseSourceManager"):this._innerFun("CloseSourceManager"))},f.CloseSourceAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("CloseSource"):this._innerFunV2("CloseSource"):o.D.Promise.reject({code:this._errorCode,message:this._errorString})},f.CloseSourceManagerAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("CloseSourceManager"):this._innerFunV2("CloseSourceManager"):o.D.Promise.reject({code:this._errorCode,message:this._errorString})},f.DisableSource=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("DisableSource"):this._innerFun("DisableSource"))},f.FeedPage=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("FeedPage"):this._innerFun("FeedPage"))},f.GetDeviceType=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetDeviceType"):this._innerFun("GetDeviceType"))},f.GetSourceNameItems=function(_){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetSourceNameItems"):(this.__sourceCount<0&&(this.SourceCount=0),_<this.__sourceCount&&0<=_?this.__sourceName[_]:""))},f.SourceNameItems=function(_){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SourceNameItems"):this.GetSourceNameItems(_))},function(h){return h=JSON.parse(l(h)),o.D.each(h,function(y){y.ProductName&&(y.ProductName=o.D.base64.decode(y.ProductName)),y.ProductFamily&&(y.ProductFamily=o.D.base64.decode(y.ProductFamily)),y.Manufacturer&&(y.Manufacturer=o.D.base64.decode(y.Manufacturer)),y.Version&&y.Version.Info&&(y.Version.Info=o.D.base64.decode(y.Version.Info))}),h});f._getSourceNamesSyncV2=function(y){var h=[];if(y=this._innerFun("GetSourceNames",(0,u.dv)(1,y)),0!=this._errorCode&&-3032!=this._errorCode)return[];if(""!=y)for(var p=c(y),m=0;m<p.length;m++){var T,C="true"==(T=p[m]).IsCurrentSource,D="true"==T.IsDefaultSource;T.IsCurrentSource=C,T.IsDefaultSource=D,h.push(T)}return h},f._getSourceNamesAsyncV2=function(_){var h=this;return h._innerFunV2("GetSourceNames",(0,u.dv)(1,_)).then(function(y){if(0!=h._errorCode&&-3032!=h._errorCode)throw 0;var p=[];if(""!=y)for(var m=c(y),T=0;T<m.length;T++){var C,D="true"==(C=m[T]).IsCurrentSource,S="true"==C.IsDefaultSource;C.IsCurrentSource=D,C.IsDefaultSource=S,p.push(C)}return p})},f.GetSourceNames=function(_){return _?this.__sourceDetails:this.__sourceName},f._resetSources=function(){this.__defaultSourceName="",this.__sourceCount=0,this.__icaSourceCount=-1,this.__sourceName=[],this.__sourceDetails=[]},f.GetSourceCountAsync=function(_){var h=this,y=!1,p=!1;return h._resetErr(),h._isValid()?h._isMobileMode()?o.D.Promise.resolve(0):(h._bRemoteMode?h.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumWindow?p=!0:h.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumLinux||h.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumMac&&(y=!0):(y=s.bMac,p=s.bWin),h._resetSources(),o.D.detect.showMask(h),_&&(h._driverType=_),y&&h._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA?h._getSourceNamesAsyncV2(o.I.DWT.EnumDWT_Driver.ICA).then(function(m){for(var T,C,D=0;D<m.length;D++)T=(C=m[D]).ProductName,o.D.isString(T)&&""!==(T=l(r()(o.D).call(o.D,T)))&&("ICA"===C.DriverType&&(T="ICA-"+T),1==C.IsDefaultSource&&(h.__defaultSourceName=T),h.__sourceName.push(T),h.__sourceDetails.push(C));h.__icaSourceCount=h.__sourceDetails.length}).then(function(){return h._getSourceNamesAsyncV2(o.I.DWT.EnumDWT_Driver.TWAIN)}).then(function(m){for(var T,C,D=0;D<m.length;D++)T=(C=m[D]).ProductName,o.D.isString(T)&&""!==(T=l(r()(o.D).call(o.D,T)))&&("ICA"===C.DriverType&&(T="ICA-"+T),1==C.IsDefaultSource&&(h.__defaultSourceName=T),h.__sourceName.push(T),h.__sourceDetails.push(C))}).then(function(){var m=h.__sourceDetails.length;return h.__sourceCount=m,""===h.__defaultSourceName&&0<h.__sourceName.length&&(h.__defaultSourceName=h.__sourceName[0]),o.D.hideMask(),m},function(){return h._resetSources(),h.__icaSourceCount=0,o.D.hideMask(),0}):p&&o.I.dcp.b64bit&&h._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(_=h._getSourceNamesAsyncV2(o.I.DWT.EnumDWT_Driver.TWAIN).then(function(m){for(var T,C,D=0;D<m.length;D++)T=(C=m[D]).ProductName,o.D.isString(T)&&""!==(T=l(r()(o.D).call(o.D,T)))&&(1==C.IsDefaultSource&&(h.__defaultSourceName=T),h.__sourceName.push(T),h.__sourceDetails.push(C));h.__icaSourceCount=h.__sourceDetails.length}),(_=o.I.dcp.b64bit?_.then(function(){return h._getSourceNamesAsyncV2(o.I.DWT.EnumDWT_Driver.TWAIN64)}).then(function(m){for(var T,C,D=0;D<m.length;D++)T=(C=m[D]).ProductName,o.D.isString(T)&&""!==(T=r()(o.D).call(o.D,T))&&("TWAIN(64Bit)"===C.DriverType&&(T="Twain64-"+T),1==C.IsDefaultSource&&(h.__defaultSourceName=T),h.__sourceName.push(T),h.__sourceDetails.push(C))}):_).then(function(){var m=h.__sourceDetails.length;return h.__sourceCount=m,""===h.__defaultSourceName&&0<h.__sourceName.length&&(h.__defaultSourceName=h.__sourceName[0]),o.D.hideMask(),m},function(){return h._resetSources(),h.__icaSourceCount=0,o.D.hideMask(),0})):h._getSourceNamesAsyncV2().then(function(m){for(var T,C,D=0;D<m.length;D++)T=(C=m[D]).ProductName,o.D.isString(T)&&""!==(T=l(r()(o.D).call(o.D,T)))&&("ICA"===C.DriverType&&(T="ICA-"+T),1==C.IsDefaultSource&&(h.__defaultSourceName=T),h.__sourceName.push(T),h.__sourceDetails.push(C))}).then(function(){var m=h.__sourceDetails.length;return h.__sourceCount=m,""===h.__defaultSourceName&&0<h.__sourceName.length&&(h.__defaultSourceName=h.__sourceName[0]),h.__icaSourceCount=0,o.D.hideMask(),m},function(){return h._resetSources(),h.__icaSourceCount=0,o.D.hideMask(),0})):o.D.Promise.reject({code:h._errorCode,message:h._errorString})},f.getSourceCount=function(_){return this.GetSourceCountAsync(_)},f.GetSourceNamesAsync=function(_){var y=this;return y._resetErr(),y._isValid()?y._isMobileMode()?y._mobileNotSupportAsync("GetSourceNames"):y.getSourceCount().then(_?function(p){return y.__sourceDetails}:function(p){return y.__sourceName}):o.D.Promise.reject({code:y._errorCode,message:y._errorString})},f.GetSourceType=function(_){return _=a()(_),this._resetErr(),isNaN(_)?(o.D.Errors.InvalidParameter(this),!1):(_=this.__SetImageCaptureTypeInner(_),this._innerFun("GetSourceType",(0,u.dv)(_)))},f.OpenSource=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("OpenSource"):this._innerFun("OpenSource"))},f.OpenSourceManager=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("OpenSourceManager"):this._innerFun("OpenSourceManager"))},f.OpenSourceAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("OpenSource"):this._innerFunV2("OpenSource"):o.D.Promise.reject({code:this._errorCode,message:this._errorString})},f.OpenSourceManagerAsync=function(){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupportAsync("OpenSourceManager"):this._innerFunV2("OpenSourceManager"):o.D.Promise.reject({code:this._errorCode,message:this._errorString})},f.ResetImageLayout=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("ResetImageLayout"):this._innerFun("ResetImageLayout"))},f.RewindPage=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("RewindPage"):this._innerFun("RewindPage"))},f.SelectSource=function(_,h){var y=this;return y._resetErr(),!!y._isValid()&&(y._isMobileMode()?y._mobileNotSupport("SelectSource",h):o.D.isUndefined(_)?y._bRemoteMode&&y.IfShowUI?(o.D.Errors.SelectSourceMustAsyncWhenRemote(y),!1):y._driverType==o.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(o.D.Errors.SelectSourceMustAsync(y),!1):y._innerFun("SelectSource"):(y.SelectSourceAsync().then(_,function(){o.D.isFunction(h)&&h(y.ErrorCode,y.ErrorString)}),!0))},f.SelectSourceAsync=function(_){var h=this;return h._resetErr(),h._isValid()?h._isMobileMode()?h._mobileNotSupportAsync("SelectSource"):_?h._innerFunV2("SelectSource",(0,u.dv)(_)):h.getSourceCount().then(function(y){var p,m=document,T=o.I.DWT;if(y<=0)return y=T.CustomizableDisplayInfo.dialogText.selectSource[3],alert(y),o.D.Promise.reject(y);if(o.D.dialog.selectsourcedlg)(y=o.I.Lib.one(".dynamsoft-dialog-selectsource"))&&0<y.length&&(C=y[0]);else{var C,D=-1;for((C=m.createElement("dialog")).className="dynamsoft-dialog-selectsource",C.style.top="20%",s.bIE&&(C.style.width="300px"),C.setAttribute("closed","closed"),(M=[]).push('<ul id="dynamsoft-dialog-selectsource-sourcelist-ul">'),p=0;p<h.__sourceCount;p++){var S="";(""==h.__defaultSourceName&&0==p||h.__defaultSourceName==h.__sourceName[p])&&(S=" dynamsoft-dialog-selectsource-sourcelist-li-selected",D=p),M.push('<li class="dynamsoft-dialog-selectsource-item'+S+'" sourceindex='+p+">"+h.__sourceName[p]+"</li>")}M.push("</ul>");var M=M.join("");y=["<p>",T.CustomizableDisplayInfo.dialogText.selectSource[0],"</p>",'<div id="dynamsoft-dialog-selectsource-sourcelist">',M,"</div>",'<div><input type="button" value="',T.CustomizableDisplayInfo.dialogText.selectSource[1],'" class="dynamsoft-dialog-selectsource-button-select">','<input type="button" value="',T.CustomizableDisplayInfo.dialogText.selectSource[2],'" class="dynamsoft-dialog-selectsource-button-cancel"></div>'].join(""),C.innerHTML=y,o.D.dialog.selectsourcedlg=C,m.body.appendChild(o.D.dialog.selectsourcedlg),o.D.each(o.D.all(".dynamsoft-dialog-selectsource-item"),function(L,W){o.D.addEventListener(L,"click",function(F){for(var U=(F=F.target).attributes.sourceindex.value,H=F.parentElement.children,Z=0;Z<H.length;Z++)H[Z].className="dynamsoft-dialog-selectsource-item";F.className="dynamsoft-dialog-selectsource-item dynamsoft-dialog-selectsource-sourcelist-li-selected",o.D.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",U)})}),o.D.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",D.toString()),o.D.dialog.setup(o.D.dialog.selectsourcedlg)}return o.D.dialog.selectsourcedlg.showModal(),T=0,0<(T=("CSS1Compat"==m.compatMode?m.documentElement:m.body).scrollTop)&&C&&(y=o.D.DOM.getElDimensions(C,!0).offsetTop,C.style.top=(y+=T)+"px"),new o.D.Promise(function(G,L){o.D.removeEventListener(o.D.one(".dynamsoft-dialog-selectsource-button-select")[0],"click"),o.D.removeEventListener(o.D.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click"),o.D.addEventListener(o.D.one(".dynamsoft-dialog-selectsource-button-select")[0],"click",function(){var W=a()(o.I.Lib.get("dynamsoft-dialog-selectsource-sourcelist-ul").attributes.selectedSourceIndex.value);h.SelectSourceByIndexAsync(W).then(function(){o.D.dialog.selectsourcedlg.close(),document.body.removeChild(o.D.dialog.selectsourcedlg),o.D.dialog.selectsourcedlg=!1,G(W)})}),o.D.addEventListener(o.D.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click",function(){o.D.dialog.selectsourcedlg.close(),document.body.removeChild(o.D.dialog.selectsourcedlg),o.D.dialog.selectsourcedlg=!1,L({code:-1032,message:"User cancelled the operation."})})})}):o.D.Promise.reject({code:h._errorCode,message:h._errorString})},f.SelectSourceByIndex=function(_){var h=a()(_);return this._resetErr(),this._isMobileMode()?this._mobileNotSupport("SelectSourceByIndex"):isNaN(h)?(o.D.Errors.InvalidParameter(this),!1):(h=this.__getSourceIndexAndImageCaptureType(_),this._innerFun("SelectSourceByIndex",(0,u.dv)(h[0],h[1],h[2])))},f.__getSourceIndexAndImageCaptureType=function(y){var h=this,m=(y=+y,!1),p=!1;return h._isValid()&&(h._bRemoteMode?h.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumWindow?p=!0:h.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumLinux||h.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumMac&&(m=!0):(m=s.bMac,p=s.bWin),m&&h._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA?y>=h.__icaSourceCount?(y-=h.__icaSourceCount,h.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN):h.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.ICA:p&&o.I.dcp.b64bit&&h._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64&&(y>=h.__icaSourceCount?(y-=h.__icaSourceCount,h.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN64):h.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN)),m=void 0===h._driverType?0:h._driverType,[y,void 0===h.__currentImageCaptureDriverType?m:h.__currentImageCaptureDriverType,m]},f.__SetImageCaptureTypeInner=function(_){return!!this._isValid()&&(_=this.__getSourceIndexAndImageCaptureType(_),this._innerFun("SetImageCaptureDriverType",(0,u.dv)(_[1],_[2])),_[0])},f._resetImageCaptureDriverType=function(_){var h,y=this,p=_,m=!1,T=!1;return y._resetErr(),!!y._isValid()&&(y._bRemoteMode?y.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumWindow?T=!0:y.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumLinux||y.__serverPlatform==o.I.DWT.EnumDWT_PlatformType.enumMac&&(m=!0):(m=s.bMac,T=s.bWin),(h=m&&y._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA?(h=-1==y.__icaSourceCount?y.getSourceCount():o.D.Promise.resolve(y.__sourceCount),_>=y.__icaSourceCount?(p-=y.__icaSourceCount,y.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN,h.then(function(){return y._innerFunV2("SetImageCaptureDriverType",(0,u.dv)(o.I.DWT.EnumDWT_Driver.TWAIN,y._driverType))})):(y.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.ICA,h.then(function(){return y._innerFunV2("SetImageCaptureDriverType",(0,u.dv)(o.I.DWT.EnumDWT_Driver.ICA,y._driverType))}))):T&&o.I.dcp.b64bit&&y._driverType===o.I.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(h=-1==y.__icaSourceCount?y.getSourceCount():o.D.Promise.resolve(y.__sourceCount),_>=y.__icaSourceCount?(p-=y.__icaSourceCount,y.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN64,h.then(function(){return y._innerFunV2("SetImageCaptureDriverType",(0,u.dv)(o.I.DWT.EnumDWT_Driver.TWAIN64,y._driverType))})):(y.__currentImageCaptureDriverType=o.I.DWT.EnumDWT_Driver.TWAIN,h.then(function(){return y._innerFunV2("SetImageCaptureDriverType",(0,u.dv)(o.I.DWT.EnumDWT_Driver.TWAIN,y._driverType))}))):o.D.Promise.resolve(0)).then(function(){return p}))},f.GetSourceTypeAsync=function(y){var h=this;return y=+y,h._resetErr(),h._isValid()?h._isMobileMode()?h._mobileNotSupportAsync("GetSourceType"):h._resetImageCaptureDriverType(y).then(function(p){return h._innerFunV2("GetSourceType",(0,u.dv)(p))}):o.D.Promise.reject({code:h._errorCode,message:h._errorString})},f.SelectSourceByIndexAsync=function(y){var h=this;return y=+y,h._resetErr(),h._isValid()?o.D.isNaN(y)?(o.D.Errors.InvalidIndex(h),o.D.Promise.reject({code:h._errorCode,message:h._errorString})):h._isMobileMode()?h._mobileNotSupportAsync("SelectSourceByIndex"):h._resetImageCaptureDriverType(y).then(function(p){return h._innerFunV2("SelectSourceByIndex",(0,u.dv)(p))}):o.D.Promise.reject({code:h._errorCode,message:h._errorString})},f.SetFileXferInfo=function(_,h){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetFileXferInfo"):(_=o.I.navInfoSync.bFileSystem?_.replace(/<%/g,"<%25"):_,_=v.replaceLocalFilename(_),this._innerFun("SetFileXferInfo",(0,u.dv)(_,h))))},f.SetImageLayout=function(_,h,y,p){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetImageLayout"):this._innerFun("SetImageLayout",(0,u.dv)(_,h,y,p)))},f.CapGet=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGet"):this._innerFun("CapGet"))},f.CapGetCurrent=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetCurrent"):this._innerFun("CapGetCurrent"))},f.CapGetDefault=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetDefault"):this._innerFun("CapGetDefault"))},f.CapGetFrameBottom=function(_){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameBottom"):this._innerFun("CapGetFrameBottom",(0,u.dv)(_)))},f.CapGetFrameLeft=function(_){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameLeft"):this._innerFun("CapGetFrameLeft",(0,u.dv)(_)))},f.CapGetFrameRight=function(_){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameRight"):this._innerFun("CapGetFrameRight",(0,u.dv)(_)))},f.CapGetFrameTop=function(_){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetFrameTop"):this._innerFun("CapGetFrameTop",(0,u.dv)(_)))},f.CapGetHelp=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetHelp"):this._innerFun("CapGetHelp"))},f.CapGetLabel=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetLabel"):this._innerFun("CapGetLabel"))},f.CapGetLabels=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapGetLabels"):this._innerFun("CapGetLabels"))},f.CapIfSupported=function(_){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapIfSupported"):this._innerFun("CapIfSupported",(0,u.dv)(_)))},f.CapReset=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapReset"):this._innerFun("CapReset"))},f.CapSet=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapSet"):this._innerFun("CapSet"))},f.CapSetFrame=function(_,h,y,p,m){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CapSetFrame"):this._innerFun("CapSetFrame",(0,u.dv)(_,h,y,p,m)))},f.GetCapItems=function(_){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetCapItems"):this._innerFun("GetCapItems",(0,u.dv)(_)))},f.GetCapItemsString=function(_){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("GetCapItemsString"):this._innerFun("GetCapItemsString",(0,u.dv)(_)))},f.SetCapItems=function(_,h){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCapItems"):this._innerFun("SetCapItems",(0,u.dv)(_,h)))},f.SetCapItemsString=function(_,h){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetCapItemsString"):this._innerFun("SetCapItemsString",(0,u.dv)(_,h)))},f.GenerateURLForUploadData=function(_,h,y,p,m){var T,C,D=this,S=[];if(h==o.I.DWT.EnumDWT_ImageType.IT_BMP||h==o.I.DWT.EnumDWT_ImageType.IT_JPG||h==o.I.DWT.EnumDWT_ImageType.IT_PNG){if(!o.D.isArray(_))return o.D.Errors.IndicesNotArray(D),o.D.isFunction(p)&&p(D.ErrorCode,D.ErrorString,"",_,h),"";if(1<_.length)return o.D.Errors.UploadIndexMoreThanOne(D),o.D.isFunction(p)&&p(D.ErrorCode,D.ErrorString,"",_,h),"";if(!D._checkIndices(_))return p(D.ErrorCode,D.ErrorString,"",_,h),!1;var M=D._ImgManager.convertClientIndexToServerId(_[0]);-1!=M&&S.push(M)}else{if(h!=o.I.DWT.EnumDWT_ImageType.IT_TIF&&h!=o.I.DWT.EnumDWT_ImageType.IT_PDF)return o.D.isArray(_)?o.D.Errors.InvalidImageType(D):o.D.Errors.IndicesNotArray(D),o.D.isFunction(p)&&p(D.ErrorCode,D.ErrorString,D.__HTTPPostResponseString,_,h),"";if(o.D.isArray(_)){if(!D._checkIndices(_))return p(D.ErrorCode,D.ErrorString,"",_,h),!1;T=_}else{if(-1!=_)return o.D.Errors.IndicesNotArray(D),o.D.isFunction(p)&&p(D.ErrorCode,D.ErrorString,D.__HTTPPostResponseString,_,h),"";for(T=[],C=0;C<D._ImgManager.count();C++)T.push(C)}o.D.each(T,function(G){-1!=(G=D._ImgManager.convertClientIndexToServerId(G))&&S.push(G)})}return o.D.isFunction(y)&&o.D.isFunction(p)?(D._asyncGenerateURLForUploadData(S,h,m,y,function(L){p(D.ErrorCode,D.ErrorString,D.__HTTPPostResponseString,L,h)}),!0):this._syncGenerateURLForUploadData(S,h,m)},f._syncGenerateURLForUploadData=function(_,C,y){var p=this,m=!1,T=o.I.dcp.managerVersion.join(""),D=",",S=(o.D.isString(y)&&""!=y||(D=y=""),C=["[",'"dcp","dwasm_'+T,'",',C,',"',_.join(","),'"',D,y,"]"].join(""),(D=this._innerFunRaw("GenerateURLForUploadData",C,!1,!1,!0))&&o.D.isArray(D.result)&&1<D.result.length&&(C=D.result[1],1==(y=D.result[0])&&(m=["dcp://dwasm_",T,"/file/",C].join(""))),[]);return o.D.isArray(_)&&o.D.each(_,function(M){-1<(M=p._ImgManager.convertServerIdToClientIndex(M))&&S.push(M)}),0==m?(o.D.Errors.GenerateURL_InvalidRetFromServer(p),""):m},f._asyncGenerateURLForUploadData=function(_,h,y,p,m){var T=this,C=function(){var W;return o.D.isFunction(m)&&(W=[],o.D.isArray(_)&&o.D.each(_,function(F){-1<(F=T._ImgManager.convertServerIdToClientIndex(F))&&W.push(F)}),m(W)),""},D=",";if((G=h)==o.I.DWT.EnumDWT_ImageType.IT_BMP||G==o.I.DWT.EnumDWT_ImageType.IT_JPG||G==o.I.DWT.EnumDWT_ImageType.IT_PNG){if(1<_.length)return o.D.Errors.UploadIndexMoreThanOne(T),C(),""}else if(G!=o.I.DWT.EnumDWT_ImageType.IT_TIF&&G!=o.I.DWT.EnumDWT_ImageType.IT_PDF)return o.D.Errors.InvalidImageType(T),C(),"";var S=!1,M=o.I.dcp.managerVersion.join(""),G=(o.D.isString(y)&&""!=y||(D=y=""),["[",'"dcp","dwasm_'+M,'",',G,',"',_.join(","),'"',D,y,"]"].join(""));return this._innerFunRaw("GenerateURLForUploadData",G,!0,!1,!0,function(L){var F;return L&&o.D.isArray(L.result)&&0<L.result.length?1==L.result[0]&&1<L.result.length?S=["dcp://dwasm_",M,"/file/",L.result[1]].join(""):void 0!==L.exception&&void 0!==L.description?(T._errorCode=L.exception,T._errorString=L.description):o.D.Errors.GenerateURL_InvalidRetFromServer(T):o.D.Errors.GenerateURL_InvalidRetFromServer(T),0==S?(C(),""):(o.D.isFunction(p)&&(F=[],o.D.isArray(_)&&o.D.each(_,function(U){-1<(U=T._ImgManager.convertServerIdToClientIndex(U))&&F.push(U)}),p(S,F,h)),S)},C)}},5505:function(e,f,t){t.r(f);var r=t(9623),a=(f=t(4579),t.n(f)),o=(f=t(1614),t.n(f)),u=(f=t(677),t.n(f)),s=t(1695),v=s.D.html5.Funs,_=function h(y,p){if(!s.D.isUndef(y)&&!s.D.isUndef(p)&&null!=y&&null!=p){for(var m in p)y.hasOwnProperty(m)?"object"===(0,r.Z)(y[m])&&h(y[m],p[m]):y[m]=p[m];return y}};(f=s.D.html5.STwain).prototype.checkStartScanParams=function(h,y){var p=this;if(!h)return s.D.Errors.ScanUploader_InvalidScanSetup(p),!1;if(!s.D.isUndefined(y.transferMode)&&0!=h.transferMode&&1!=h.transferMode&&2!=h.transferMode)return s.D.Errors.ScanUploader_InvalidTransferMode(p),!1;if(h.transferMode==s.I.DWT.EnumDWT_TransferMode.TWSX_FILE){if(!h.fileXfer)return s.D.Errors.ScanUploader_InvalidFileXfer(p),!1;if(!s.D.isString(h.fileXfer.fileName)||""==h.fileXfer.fileName)return s.D.Errors.ScanUploader_InvalidFileXferFilename(p),!1;if(!s.D.isNumber(h.fileXfer.fileFormat)||h.fileXfer.fileFormat<0||16<h.fileXfer.fileFormat)return s.D.Errors.ScanUploader_InvalidFileXferFileFormat(p),!1}if(y){if(!s.D.isString(y.type)||""==y.type)return s.D.Errors.ScanUploader_InvalidHttpType(p),!1;if(!y.httpParams)return s.D.Errors.ScanUploader_InvalidHttpParams(p),!1;if(h.transferMode!=s.I.DWT.EnumDWT_TransferMode.TWSX_FILE&&s.D.isUndefined(y.format))return s.D.Errors.ScanUploader_InvalidOutputFormat(p),!1;if(!s.D.isString(y.httpParams.url)||""==y.httpParams.url)return s.D.Errors.ScanUploader_InvalidHttpUrl(p),!1;if(!s.D.isString(y.httpParams.fileName)||""==y.httpParams.fileName)return s.D.Errors.ScanUploader_InvalidHttpFilename(p),!1}return!0},f.prototype.startScan=function(h){var y=this;if(y._resetErr(),!y._isValid())return!1;if(y._isMobileMode())return y._mobileNotSupportAsync("startScan");if(1==y.startScanFlag)return s.D.Errors.StartScanFailed(y),s.D.Promise.reject({code:y.ErrorCode,message:y.ErrorString});y.startScanFlag=!0,s.D.isObject(h)||(h={});var p,m,T=!1,C=!0,D=!0,S=!0,M=!1,G=h.onFinally,L=[],W=[],F=0,U=1,H=[],Z={type:"http",format:s.I.DWT.EnumDWT_ImageType.IT_PDF,reTries:3,useUploader:!1,singlePost:!0,showProgressBar:!0,removeAfterOutput:!0,httpParams:{url:"",headers:{},formFields:{},remoteName:"RemoteFile",fileName:""}},X=s.D.clone(h),$=h,V=X.funcScanStatus;if(delete X.funcScanStatus,X.bfuncScanStatus=!!s.D.isFunction(V),!(X.outputSetup?(h={pdfSetup:{},tiffSetup:{}},_(X.outputSetup,Z),m=X.outputSetup,delete X.outputSetup,!m.pdfSetup||m.format!=s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF&&m.format!=s.I.DWT.EnumDWT_ImageType.IT_PDF||s.D.mix(h.pdfSetup,m.pdfSetup),!m.tiffSetup||m.format!=s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&m.format!=s.I.DWT.EnumDWT_ImageType.IT_TIF||s.D.mix(h.tiffSetup,m.tiffSetup),m.format!=s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF&&m.format!=s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF||(m.singlePost=!0),s.D.isNumber(m.httpParams.threads)&&(U=m.httpParams.threads),T=s.D.stringify(h),y.checkStartScanParams(X,m)):((m=Z).type="",y.checkStartScanParams(X,!1))))return new s.D.Promise(function(Ze,Ne){C&&(Ne({code:y.ErrorCode,message:y.ErrorString,response:""}),C=!1,y.startScanFlag=!1)});m.funcHttpUploadStatus&&(M=m.funcHttpUploadStatus);var De,fe,je,Se,rt,tt=y.HttpFieldNameOfUploadedImage,de=y.MaxUploadImageSize,_t=y.IfShowProgressBar,be=y.__IfShowCancelDialogWhenImageTransfer,it=y.__OnPostTransferAsync,mt=y.__OnPostAllTransfers,Ce=y.__OnHttpUploadStatus,we=y.__insertingIndex,Ve=y.__IfAppendImage,bt=y.httpFormFields,At=y._tiffCompressionType,St=!1,Pe=m.showProgressBar,ae=function(Ze){var Ne=!0;s.D.each(H,function(Re,ze){-1==Re.st&&(Ne=!1)}),Ne?De(Ze):a()(function(){ae(Ze)},200)};return De=function(Ne){Ne.__OnPostTransferAsync=it,Ne.__OnPostAllTransfers=mt,Ne.__OnHttpUploadStatus=Ce,Ne.HttpFieldNameOfUploadedImage=tt,Ne.__maxUploadImageSize=de,Ne.IfShowProgressBar=_t,Ne.__IfShowCancelDialogWhenImageTransfer=be,Ne.__insertingIndex=we,Ne.__IfAppendImage=Ve,Ne.httpFormFields=bt,Ne._tiffCompressionType=At,Ne.__OnCancel=!1,s.I.FileUploader&&(s.I.FileUploader.nextLoopTime=600),Ne.startScanFlag=!1},fe=function(Ze,Ne,Re){D?(Ne(Re),ae(Ze)):a()(function(){fe(Ze,Ne,Re)},200)},je=function(Ne,Re){St=!0,C&&(C=!1,D||y._innerSendCmd("CancelAllPendingTransfers"),fe(y,Ne,Re))},Se=function(Ne,Re,ze,Qe){var ot,Lt;s.D.isFunction(M)&&(ot=0,s.D.isNumber(Qe)&&0<Qe&&(ot=Qe),Lt={fileName:Re,percentage:ze,statusCode:ot,responseString:Ne.__HTTPPostResponseString},a()(function(){M(Lt)},10))},y.__OnCancel=!1,y.__HTTPPostResponseString="",y.IfShowProgressBar=Pe,y.__IfShowCancelDialogWhenImageTransfer=Pe,s.D.isNumber(X.insertingIndex)&&-1<X.insertingIndex&&(y.__insertingIndex=X.insertingIndex,y.__IfAppendImage=!1),y.__OnHttpUploadStatus=!!s.D.isFunction(M)&&M,m.useUploader&&!s.I.FileUploader?new s.D.Promise(function(Ze,Ne){s.D.Errors.Uploader_ModuleError(y),D=!0,je(Ne,{code:y.ErrorCode,message:y.ErrorString,response:""})}):(p=m.reTries,m.useUploader?(h=m.httpParams.url,o()(s.D).call(s.D,h,"http://")||o()(s.D).call(s.D,h,"https://")||(Z=window.location.href,rt=u()(Z).call(Z,"/"),Z=Z.substring(0,rt+1),m.httpParams.url=Z+h)):(s.D.each(m.httpParams.headers,function(Ze,Ne){y.SetHTTPHeader(Ne,Ze)}),s.D.each(m.httpParams.formFields,function(Ze,Ne){y.SetHTTPFormField(Ne,Ze)})),""!==m.httpParams.remoteName&&(y.HttpFieldNameOfUploadedImage=m.httpParams.remoteName),new s.D.Promise(function(Ze,Ne){m.useUploader?s.I.FileUploader.Init(0,function(Re){Ze({uploadManager:Re})},function(Re,ze){Re={code:y._errorCode=Re,message:y._errorString=ze,response:y.__HTTPPostResponseString},D=!0,je(Ne,Re)}):Ze({})}).then(function(Ze){return new s.D.Promise(function(Ne,Re){var ze=function ot(){(X.transferMode==s.I.DWT.EnumDWT_TransferMode.TWSX_FILE?F==W.length:F==L.length)?(s.D.closeProgress(y,"Scan Upload"),St=!0,Ne($),De(y)):a()(ot,100)},Qe=(V&&s.D.isFunction(V)&&(y.__OnPreAllTransfersAsync=function(ot){V(ot)}),y.RegisterEvent("OnPostTransferAsync",function(ot){var Lt,Ot,Bt=m.httpParams.url,Ft=y.objImageIndexManager.convertGuidToServerId(ot.imageId),It=m.singlePost,Kt=X.transferMode==s.I.DWT.EnumDWT_TransferMode.TWSX_FILE,tn=m.removeAfterOutput,en=0;if(S=S&&(D=!1),Kt?(en=W.length,W.push(ot.path)):(en=L.length,L.push(Ft)),V&&s.D.isFunction(V)&&(Ot={event:"postTransfer",bScanCompleted:!1,result:{currentPageNum:en+1}},a()(function(){V(Ot)},10)),St)return!1;if("http"==m.type){var Ee,_e,Ae=v.cformat(m.httpParams.fileName,en+1),We=v.cformat(m.httpParams.remoteName,en+1);if(It||"http"!=m.type);else if(s.D.isNumber(m.httpParams.maxSizeLimit)&&(y.__maxUploadImageSize=m.httpParams.maxSizeLimit),m.useUploader){Pe&&(s.I.FileUploader.nextLoopTime=300,s.D.showProgress(y,"Scan Upload",!0)),Ee=function(lt,Ut){return y.__HTTPPostResponseString=Ut,Se(y,lt._fileName,100,200),y._OnPercentDone([0,100,"","http",lt._fileName]),Pe&&s.D.closeProgress(y,"Scan Upload"),!Kt&&m.removeAfterOutput?a()(function(){-1<y._ImgManager.convertServerIdToClientIndex(Ft)?y._removeImageById(Ft,function(){F++},function(){F++}):F++},100):F++,!0};var pe,Ie,$e,st,Nt=Ze.uploadManager;pe=function(){if(Pe)for(var lt=(Kt?W:L).length,Ut=0;Ut<lt;Ut++)s.D.closeProgress(y,"Scan Upload");return!Kt&&m.removeAfterOutput&&a()(function(){-1<y._ImgManager.convertServerIdToClientIndex(Ft)&&y._removeImageById(Ft)},100),Nt.CancelAllUpload(),je(Re,{code:y.ErrorCode,message:y.ErrorString,response:y.__HTTPPostResponseString}),!1},_e=function(lt,Ut,xt,wn){var Ln=303;12==Ut?Ln=404:13==Ut?Ln=500:14==Ut&&(Ln=503),y._errorCode=Ut,y._errorString=xt,y.__HTTPPostResponseString=wn,Se(y,Ae,100,Ln),pe()},y.__OnCancel=function(){_e(null,-1032,"User cancelled the operation.","")},Ie=function(){y.__HTTPPostResponseString="",Se(y,Ae,100,303),pe()},Kt?($e=Nt.CreateJob(),st=$e.FormField,s.D.each(m.httpParams.headers,function(et,lt){$e.HttpHeader[lt]=et}),s.D.each(m.httpParams.formFields,function(et,lt){st.Add(lt,et)}),$e.ServerUrl=Bt,$e.bDeleteFile=tn,$e.reTries=p,s.D.isNumber(m.httpParams.maxSizeLimit)&&($e.maxSizeLimit=m.httpParams.maxSizeLimit),$e._fileName=Ae,$e.SourceValue.Add(ot.path,Ae,We),$e.ImageType=X.fileXfer.fileFormat,$e.ThreadNum=U,$e.OnRunSuccess=Ee,$e.OnRunFailure=_e,(Pe||s.D.isFunction(M))&&($e.OnUploadTransferPercentage=function(et,lt){0<lt&&lt<=100&&(100==lt&&(lt=99),Pe&&y._OnPercentDone([0,lt,"","http",et._fileName]),s.D.isFunction(M)&&Se(y,et._fileName,lt,0))},s.D.cancelFrome=5,Pe&&y._OnPercentDone([0,-1,s.I.MSG.Uploading,"http",Ae]),Se(y,Ae,0,0)),Nt.Run($e)):((Lt=m.format)==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?Lt=s.I.DWT.EnumDWT_ImageType.IT_PDF:Lt==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(Lt=s.I.DWT.EnumDWT_ImageType.IT_TIF),Pe&&(s.D.cancelFrome=5,y._OnPercentDone([0,-1,s.I.MSG.Encoding,"http",Ae])),y._asyncGenerateURLForUploadData([Ft],Lt,T,function(et){var lt=Nt.CreateJob(),Ut=lt.FormField;s.D.each(m.httpParams.headers,function(xt,wn){lt.HttpHeader[wn]=xt}),s.D.each(m.httpParams.formFields,function(xt,wn){Ut.Add(wn,xt)}),lt.ServerUrl=Bt,lt.bDeleteFile=tn,lt.reTries=p,s.D.isNumber(m.httpParams.maxSizeLimit)&&(lt.maxSizeLimit=m.httpParams.maxSizeLimit),lt._fileName=Ae,lt.SourceValue.Add(et,Ae,We),lt.ImageType=Lt,lt.ThreadNum=U,lt.OnRunSuccess=Ee,lt.OnRunFailure=_e,(Pe||s.D.isFunction(M))&&(lt.OnUploadTransferPercentage=function(xt,wn){0<wn&&wn<=100&&(100==wn&&(wn=99),Pe&&y._OnPercentDone([0,wn,"","http",xt._fileName]),s.D.isFunction(M)&&Se(y,xt._fileName,wn,0))},s.D.cancelFrome=5,Pe&&y._OnPercentDone([0,-1,s.I.MSG.Uploading,"http",Ae]),Se(y,Ae,0,0)),Nt.Run(lt)},Ie))}else{var Pt={id:Ft,st:-1,bCancel:!1};if(H.push(Pt),0==en&&s.D.showProgress(y,"Scan Upload",!0),Kt)Ee=function(lt){return Pt.st=0,!Kt&&m.removeAfterOutput?a()(function(){-1<y._ImgManager.convertServerIdToClientIndex(Ft)?y._removeImageById(Ft,function(){F++},function(){F++}):F++},100):F++,!0},_e=function(){!Kt&&m.removeAfterOutput&&a()(function(){-1<y._ImgManager.convertServerIdToClientIndex(Ft)&&y._removeImageById(Ft)},100);var lt={code:y.ErrorCode,message:y.ErrorString,response:y.__HTTPPostResponseString};return s.D.closeProgress(y,"Scan Upload"),2==Pt.st||(Pt.st=1,s.D.each(H,function(Ut,xt){-1==Ut.st&&(Ut.bCancel=!0)}),je(Re,lt)),!1},y._innerUploadDirectly(Bt,ot.path,Ae,Pe,tn,p,!1,Pt,Ee,_e);else{if(Ee=function(lt,Ut){return Pt.st=0,!Kt&&m.removeAfterOutput?a()(function(){-1<y._ImgManager.convertServerIdToClientIndex(Ft)?y._removeImageById(Ft,function(){F++},function(){F++}):F++},100):F++,!0},_e=function(lt){!Kt&&m.removeAfterOutput&&a()(function(){-1<y._ImgManager.convertServerIdToClientIndex(Ft)&&y._removeImageById(Ft)},100);var Ut={code:y.ErrorCode,message:y.ErrorString,response:y.__HTTPPostResponseString};return s.D.closeProgress(y,"Scan Upload"),2==Pt.st||(Pt.st=1,s.D.each(H,function(xt,wn){-1==xt.st&&(xt.bCancel=!0)}),je(Re,Ut)),!1},s.D.isUndefined(Lt=m.format))return It=y._ImgManager.convertServerIdToClientIndex(Ft),s.D.Errors.InvalidImageType(y),_e([It]),!1;Lt==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?Lt=s.I.DWT.EnumDWT_ImageType.IT_PDF:Lt==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(Lt=s.I.DWT.EnumDWT_ImageType.IT_TIF),s.D._asyncUploadCmd(en={bOnlyUploadForm:!1,method:"startScan",_this:y,url:Bt,serverIds:[Ft],enumImageType:Lt,saveSetup:T,fileName:Ae,dataFormat:s.I.DWT.EnumDWT_UploadDataFormat.Binary,retry:p,bOnlyEmptyIsOK:!1,objUploadFileStatus:Pt,asyncSuccessFunc:Ee,asyncFailureFunc:_e})}}}}),y.__OnPostAllTransfers=function(){var ot,Lt,Ot,Bt,Ft,It,Kt,tn,en,Ee,_e,Ae,We,pe,Ie=-1,$e=s.I.DWT.EnumDWT_UploadDataFormat.Binary,st=m.httpParams.url,Nt=m.singlePost,Pt=X.transferMode==s.I.DWT.EnumDWT_TransferMode.TWSX_FILE,et=m.removeAfterOutput;if(V&&s.D.isFunction(V)&&(ot={event:"postTransfer",bScanCompleted:!0,result:{currentPageNum:Ie=(Pt?W:L).length}},a()(function(){V(ot)},10)),0==Ie)return s.D.Errors.SourceHasNothingToCapture(y),void a()(function(){D=!0,G&&s.D.isFunction(G)&&G(),je(Re,{code:y.ErrorCode,message:y.ErrorString,response:y.__HTTPPostResponseString})},1e3);if(0<Ie&&-1029==y.ErrorCode)y._errorCode=0;else if(0!=y.ErrorCode)return D=!0,G&&s.D.isFunction(G)&&G(),void je(Re,Ie={code:y.ErrorCode,message:y.ErrorString,response:y.__HTTPPostResponseString});"http"==m.type&&Nt&&"http"==m.type&&(Bt=L,s.D.isNumber(m.httpParams.maxSizeLimit)&&(y.__maxUploadImageSize=m.httpParams.maxSizeLimit),m.useUploader?(It=(Ft=Ze.uploadManager).CreateJob(),Kt=It.FormField,Pe&&(s.I.FileUploader.nextLoopTime=300,s.D.showProgress(y,"Scan Upload",!0)),Lt=function(Ut,xt){return Ut=(Ut=Ut._fileName)||"",y._bServerPercentDone=!0,y.__HTTPPostResponseString=xt,Se(y,Ut,100,200),y._OnPercentDone([0,100,"","http"]),Pe&&s.D.closeProgress(y,"Scan Upload"),!Pt&&m.removeAfterOutput?a()(function(){F=0,s.D.each(Bt,function(wn){-1<y._ImgManager.convertServerIdToClientIndex(wn)?y._removeImageById(wn,function(){F++},function(){F++}):F++}),a()(ze,100)},100):(St=!0,Ne($),De(y)),!0},tn=function(){return y._OnPercentDone([0,100,"","http"]),Pe&&s.D.closeProgress(y,"Scan Upload"),y._bServerPercentDone=!0,je(Re,{code:y.ErrorCode,message:y.ErrorString,response:y.__HTTPPostResponseString}),!Pt&&m.removeAfterOutput&&a()(function(){s.D.each(Bt,function(xt){-1<y._ImgManager.convertServerIdToClientIndex(xt)&&y._removeImageById(xt)})},100),!1},Ot=function(Ut,xt,wn,Ln){var Cn=303;12==xt?Cn=404:13==xt?Cn=500:14==xt&&(Cn=503),y._errorCode=xt,y._errorString=wn,y.__HTTPPostResponseString=Ln,Se(y,"",100,Cn),tn()},y.__OnCancel=function(){Ot(null,-1032,"User cancelled the operation.","")},en=function(){y.__HTTPPostResponseString="",Se(y,"",100,303),tn()},Pt?(s.D.each(m.httpParams.headers,function(lt,Ut){It.HttpHeader[Ut]=lt}),s.D.each(m.httpParams.formFields,function(lt,Ut){Kt.Add(Ut,lt)}),It.ServerUrl=st,It.bDeleteFile=et,It.reTries=p,s.D.isNumber(m.httpParams.maxSizeLimit)&&(It.maxSizeLimit=m.httpParams.maxSizeLimit),s.D.each(W,function(lt,wn){var xt=v.cformat(m.httpParams.fileName,wn+1);wn=v.cformat(m.httpParams.remoteName,wn+1),It.SourceValue.Add(lt,xt,wn)}),It.ImageType=X.fileXfer.fileFormat,It.ThreadNum=U,It.OnRunSuccess=Lt,It.OnRunFailure=Ot,(Pe||s.D.isFunction(M))&&(It.OnUploadTransferPercentage=function(lt,Ut){0<Ut&&Ut<=100&&(100==Ut&&(Ut=99),Pe&&y._OnPercentDone([0,Ut,"","http"]),s.D.isFunction(M)&&Se(y,"",Ut=99<Ut?99:Ut,0))},Pe&&y._OnPercentDone([0,-1,s.I.MSG.Uploading,"http"]),Se(y,"",0,0)),Ft.Run(It)):(pe=m.format)==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||pe==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF?(pe==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?pe=s.I.DWT.EnumDWT_ImageType.IT_PDF:pe==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(pe=s.I.DWT.EnumDWT_ImageType.IT_TIF),Pe&&y._OnPercentDone([0,-1,s.I.MSG.Encoding,"http"]),y._asyncGenerateURLForUploadData(Bt,pe,T,function(lt){s.D.each(m.httpParams.headers,function(wn,Ln){It.HttpHeader[Ln]=wn}),s.D.each(m.httpParams.formFields,function(wn,Ln){Kt.Add(Ln,wn)}),It.ServerUrl=st,It.bDeleteFile=et,It.reTries=p,s.D.isNumber(m.httpParams.maxSizeLimit)&&(It.maxSizeLimit=m.httpParams.maxSizeLimit);var Ut=v.cformat(m.httpParams.fileName,1),xt=v.cformat(m.httpParams.remoteName,1);It._fileName=Ut,It.SourceValue.Add(lt,Ut,xt),It.ImageType=pe,It.ThreadNum=U,It.OnRunSuccess=Lt,It.OnRunFailure=Ot,(Pe||s.D.isFunction(M))&&(It.OnUploadTransferPercentage=function(wn,Ln){0<Ln&&Ln<=100&&(100==Ln&&(Ln=99),Pe&&y._OnPercentDone([0,Ln,"","http",Ut]),s.D.isFunction(M)&&Se(y,Ut,Ln,0))},s.D.cancelFrome=5,Pe&&y._OnPercentDone([0,-1,s.I.MSG.Uploading,"http",Ut])),Ft.Run(It)},en)):(Ee=Bt.length,Ae=_e=0,We="",Pe&&(y._bServerPercentDone=!1,y._OnPercentDone([0,-1,s.I.MSG.Encoding,"http"])),s.D.each(Bt,function(lt,Ut){var xt=v.cformat(m.httpParams.fileName,Ut+1),wn=v.cformat(m.httpParams.remoteName,Ut+1);y._asyncGenerateURLForUploadData([lt],pe,T,function(Ln){Ae=(_e+1)/Ee*100,We=[_e+1,"/",Ee].join(""),y._OnPercentDone([0,Ae,We,"http"]),It.SourceValue.Add(Ln,xt,wn),Ee<=++_e&&(Pe&&(y._bServerPercentDone=!0),s.D.each(m.httpParams.headers,function(Cn,In){It.HttpHeader[In]=Cn}),s.D.each(m.httpParams.formFields,function(Cn,In){Kt.Add(In,Cn)}),It.ServerUrl=st,It.bDeleteFile=et,It.reTries=p,s.D.isNumber(m.httpParams.maxSizeLimit)&&(It.maxSizeLimit=m.httpParams.maxSizeLimit),It.ImageType=pe,It.ThreadNum=U,It.OnRunSuccess=Lt,It.OnRunFailure=Ot,(Pe||s.D.isFunction(M))&&(It.OnUploadTransferPercentage=function(Cn,In){0<In&&In<=100&&(100==In&&(In=99),Pe&&y._OnPercentDone([0,In,"","http"]),s.D.isFunction(M)&&Se(y,"",In=99<In?99:In,0))},Pe&&y._OnPercentDone([0,-1,s.I.MSG.Uploading,"http"])),Ft.Run(It))},en)}))):Pt?(Lt=function(Ut){return y._bServerPercentDone=!0,!Pt&&m.removeAfterOutput?a()(function(){F=0,s.D.each(Bt,function(xt){-1<y._ImgManager.convertServerIdToClientIndex(xt)?y._removeImageById(xt,function(){F++},function(){F++}):F++}),a()(ze,100)},100):(St=!0,Ne($),De(y)),!0},Ot=function(Ut){return y._bServerPercentDone=!0,je(Re,{code:y.ErrorCode,message:y.ErrorString,response:y.__HTTPPostResponseString}),!Pt&&m.removeAfterOutput&&a()(function(){s.D.each(Bt,function(wn){-1<y._ImgManager.convertServerIdToClientIndex(wn)&&y._removeImageById(wn)})},100),!1},y._innerUploadFilesDirectly(st,W,m.httpParams.fileName,Pe,et,p,!1,Lt,Ot)):(Lt=function(Ut,xt){return y._bServerPercentDone=!0,!Pt&&m.removeAfterOutput?a()(function(){F=0,s.D.each(Bt,function(wn){-1<y._ImgManager.convertServerIdToClientIndex(wn)?y._removeImageById(wn,function(){F++},function(){F++}):F++}),a()(ze,100)},100):(St=!0,Ne($),De(y)),!0},Ot=function(Ut){return y._bServerPercentDone=!0,je(Re,{code:y.ErrorCode,message:y.ErrorString,response:y.__HTTPPostResponseString}),!Pt&&m.removeAfterOutput&&a()(function(){s.D.each(Bt,function(wn){-1<y._ImgManager.convertServerIdToClientIndex(wn)&&y._removeImageById(wn)})},100),!1},(pe=m.format)==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||pe==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF?(pe==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?pe=s.I.DWT.EnumDWT_ImageType.IT_PDF:pe==s.I.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(pe=s.I.DWT.EnumDWT_ImageType.IT_TIF),Ie=v.cformat(m.httpParams.fileName,1),v.cformat(m.httpParams.remoteName,1),s.D._asyncUploadCmd(Ie={bOnlyUploadForm:!1,method:"startScan",_this:y,url:st,serverIds:Bt,enumImageType:pe,saveSetup:T,fileName:Ie,dataFormat:$e,retry:p,bOnlyEmptyIsOK:!1,objUploadFileStatus:!1,asyncSuccessFunc:Lt,asyncFailureFunc:Ot})):0<Bt.length&&y._asyncUploadFilesCmd(st,Bt,pe,m.httpParams.fileName,T,Pe,p,!1,Lt,Ot))),D=!0,G&&s.D.isFunction(G)&&G()},function(){"http"!=m.type?(St=!0,Ne($),De(y)):m.singlePost||a()(ze,100)});y._startScan(X,Qe,function(ot){if(-1029==y.ErrorCode&&(X.transferMode==s.I.DWT.EnumDWT_TransferMode.TWSX_FILE?0<W.length:0<L.length))return y._errorCode=0,Qe();je(Re,{code:y.ErrorCode,message:y.ErrorString,response:y.__HTTPPostResponseString})})})}))}},9475:function(e,h,t){t.r(h);var r=t(9623),a=(h=t(3662),t.n(h)),o=(h=t(4579),t.n(h)),u=(h=t(5683),t.n(h)),s=t(1695),f=t(1188),v=t(8420),l=t(7344),I=function(){function y(){(0,v.Z)(this,y)}return(0,l.Z)(y,[{key:"convertServerIdToGuid",value:function(p){return+p+239514e3}},{key:"convertGuidToServerId",value:function(p){return+p-239514e3}}]),y}(),c=s.D.html5.Funs,_=s.I.dcp;(s.D.html5.STwain=function(m){var p=this,T=(m=m||{}).bNoViewer,C=m.bLocalService;(p._destroy=!1,p.config=m,p.clientId=s.D.getRandom(),p._id=m.id,m.container?p._containerElement=m.container:m.containerID&&(p._containerElement=s.D.get(m.containerID)),p._bBindViewer=!T,p._customIP=!1,p._ssl=s.D.detect.ssl,m.customIP?(p._customIP=!0,p._host=m.host):p._host=s.D.product.host,""==p._host||s.D.isLocalIP(p._host)?(p._bLocalService=!!C,p._bRemoteMode=!1):(p._bLocalService=!0,p._bRemoteMode=!0),(m.customIP||_.bEnhancedMode)&&(p._port=m.port),p.bReady=!1,p.httpFormFields={},p._objWS=null,p.__wsRetry=0,p.curCommand=[],p.__OnInternetTransferPercentage=m.onInternetTransferPercentage||"",p.__OnInternetTransferPercentageEx=m.onInternetTransferPercentageEx||"",p.__OnReady=m.onReady||null,p.__OnWSReconnect=m.onWSReconnect||null,p.__OnWSClose=m.onWSClose||null,p.__OnWSMessage=m.onWSMessage||null,p.__OnWSError=m.onWSError||null,p.__OnPercentDone=m.onPercentDone||"",p.__OnPrintMsg=m.onPrintMsg||"",p.__OnResult=m.onResult||"",p.HTTPPassword=m.HTTPPassword||"",p.HTTPPort=m.HTTPPort||(s.D.detect.ssl?443:80),p.HTTPUserName=m.HTTPUserName||"",p.__HTTPPostResponseString="",p.__strHttpContentTypeFieldValue="application/octet-stream",p.__IfShowProgressBar=!0,p.__IfShowCancelDialogWhenImageTransfer=!0,p._errorCode=0,p._errorString="",p.__bLoadingImage=!1,p.__bAcquireImageNow=!1,p.__bOpenFileNow=!1,p.__backgroundColor=!1,p.__addon={},p.__remoteFilename="RemoteFile",p.__sourceName=[],p.__defaultSourceName="",p.__sourceCount=0,p.__icaSourceCount=-1,p.__serverId="",p.__bConnecting=!1,p.__bTrial=!1,p.__licenseInfo=!1,p.__httpHeaderMap=!1,p.__bForceClose=!1,p.__strProductName=p._bLocalService?"":s.I.DWT.ProductName,p.__versionInfo=s.I.DWT.JSVersion,p.__bMustUpgradeService=!1,p.__withCredentials=!1,p._moduleSize=1048576,p._segementUploadThreshold=s.I.dcp.b64bit?4294967296:524288e3,p._driverType=s.I.DWT.EnumDWT_Driver.TWAIN,p.__IfAppendImage=!0,p.__maxImagesInBuffer=32767,p.__maxUploadImageSize=-1,p.__insertingIndex=-1,p.objImageIndexManager=new I(p.__maxImagesInBuffer),p._bServerPercentDone=!0,p._aryBitmapCache=[],p._aryTiffTag=[],p._tiffCompressionType=s.I.DWT.EnumDWT_TIFFCompressionType.TIFF_AUTO,p._jpgQuality=80,p._pdfConvertMode=3,p._pdfRealConvertMode=3,p._pdfResolution=200,p._pdfPassword="",p._ifSSL=s.I.navInfoSync.bSSL,p._bRegistedLoad=!1,p._logLevel=0,p._scaleDownThreshold=0,p._pdfWriteSetting={},p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumUnknown,p.bPageFocus=!0,p.bServerAlwaysFocusOnPopupWindow=!0,s.D.License.isLTS()&&(p._blts=!0),T=p).__OnAfterOperate=(C=(C=m)||{}).onAfterOperate||"",T.__OnBeforeOperate=C.onBeforeOperate||"",T.__OnOperateStatus=C.onOperateStatus||"",T.__OnBitmapChanged=C.onBitmapChanged||"",T.__OnGetFilePath=C.onGetFilePath||"",T.__OnPreAllTransfers=C.onPreAllTransfers||"",T.__OnPreTransfer=C.onPreTransfer||"",T.__OnPostLoad=C.onPostLoad||"",T.__OnPostTransfer=C.onPostTransfer||"",T.__OnPostAllTransfers=C.onPostAllTransfers||"",T.__OnSourceUIClose=C.onSourceUIClose||"",T.__OnTransferCancelled=C.onTransferCancelled||"",T.__OnTransferError=C.onTransferError||"",T.__OnInternetTransferPercentage=C.onInternetTransferPercentage||"",T.__OnInternetTransferPercentageEx=C.onInternetTransferPercentageEx||"",T.__OnRemoteScanStatusAsync=C.onRemoteScanStatusAsync||""},h=s.D.html5.STwain.prototype).getInstance=function(){return this},h._getWebTwainId=function(){return this._id},h._isMobileMode=function(){return!(!s.D.isLocalIP(this._host)&&""!=this._host||this._bLocalService)},h._isPC=function(){var y=s.I.navInfo;return y.bWin||y.bMac||y.bLinux},h._resetErr=function(){this._errorCode=0,this._errorString="";var y=s.I.DWT.licenseException;y.code=0,y.message=""},h._isValid=function(){return!this._destroy||(s.D.Errors.Destroyed(this),!1)},h._isBindViewer=function(){return this._bBindViewer},h._isNoViewer=function(){return!this._bBindViewer},h._mobileNotSupport=function(y,p){return s.D.Errors.MobileNotSupport(this,y),s.D.isFunction(p)&&p(this.ErrorCode,this.ErrorString),!1},h._mobileNotSupportAsync=function(y){return s.D.Errors.MobileNotSupport(this,y),s.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString})},h._serviceNotSupportAsync=function(y){return s.D.Errors.ServiceNotSupport(this,y),s.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString})},h._nouiNotSupport=function(y,p){return s.D.Errors.CannotCallUIMethodWhenNotBindDefaultViewer(this,y),s.D.isFunction(p)&&p(this.ErrorCode,this.ErrorString),!1},h._OnRecieveMsg=function(y){var p,m=this;if(y.event)if("OnBitmapChanged"!=y.event)c.handleEvent(m,y,p);else{if(y.cmdId)for(var T=m.curCommand.length-1;0<=T;T--)if(m.curCommand[T].cmdId==y.cmdId)return void c.handleOnBitmapChangedEvent(m,y,p=m.curCommand[T].currentFileName);c.handleOnBitmapChangedEvent(m,y)}else{if(y.cmdId){for(var C=-1,D=m.curCommand.length-1;0<=D;D--)if(m.curCommand[D].cmdId==y.cmdId){C=D;var S,M=a()(S=m.curCommand).call(S,C,1)[0];break}if(C<0)return}else M=m.curCommand.pop()||{};if(void 0!==y.exception&&void 0!==y.description?(m._errorCode=y.exception,m._errorString=y.description):"StartScan"!=y.method&&"GetAddOnVersion"!=y.method&&(m._errorCode=0,m._errorString=""),"ReadBarcode"==y.method||"OCRRecognize"==y.method||y.request&&"OCRProRecognize"==y.request.method)M.sFun&&M.sFun(y);else{if("ActiveUI"==y.method||"VersionInfo"==y.method||"ConvertToBase64"==y.method||"SaveSelectedImagesToBase64Binary"==y.method||"ConvertToBlob"==y.method){if(M.sFun&&0<y.result.length)return void M.sFun(y.result)}else if("ShowFileDialog"==y.method||"SplitTiff"==y.method||"SplitPDF"==y.method||"EncodeAsBase64"==y.method||"ProductKey"==y.method||"GetSourceNames"==y.method||"GetSkewAngle"==y.method||"GetImageInfo"==y.method){if(M.sFun)return void M.sFun(y.result)}else if("GetLicenseInfo"==M.cmd&&s.D.isArray(y.Detail)){if(M.sFun)return void M.sFun(y)}else if("SetCapabilities"==y.method)return"exception"in y&&"0"!=y.exception?(y.result.errorCode&&y.result.errorString?(m._errorCode=y.result.errorCode,m._errorString=y.result.errorString):(m._errorCode=y.exception,m._errorString=y.description),M.fFun&&M.fFun(y.result)):M.sFun&&M.sFun(y.result),void(y=null);if(y.result&&y.result.length&&("1"==y.result[0]||1==y.result[0]))M.sFun&&M.sFun();else if(y.exception){var G=!1;!(G=M.fFun?M.fFun(m._errorString):G)&&y.exception&&y.exception<0&&-2115!=y.exception&&s.D.isFunction(m.__OnPrintMsg)&&m.__OnPrintMsg(m._errorString)}else{if("LoadImage"==y.method||"LoadImageEx"==y.method||"LoadImageFromBytes"==y.method||"LoadImageFromBase64Binary"==y.method||"LoadDibFromClipboard"==y.method||"FTPDownload"==y.method||"FTPDownloadEx"==y.method)return M.sFun&&M.sFun(y.result),void(y=null);M.fFun&&M.fFun((0,f.yN)(["result:"],y.result))}}}},h._OnReady=function(y){var p=this,m=p._getWebTwainId();if(s.D.detect.starting=!1,s.D.detect.bOK=!0,p.bReady=!0,p.__wsRetry=0,!y&&s.I.DWT.ContainerMap[m]){var T=s.I.DWT.ContainerMap[m];if(!T._destroy)return void(p!=T&&(s.D.isFunction(p.__OnReady)&&p.__OnReady(T),p.dispose()));s.I.DWT.ContainerMap[m]=null}if(p._bLocalService&&s.I.DWT.IfUseWSPool){if(null===(D=p._objWS))return;if(D.onopen=null,p.httpUrl=s.D.getHttpUrl({host:p._host,ssl:p._ssl,port:p._port}),D.onmessage=function(S){var M=S.data;if("object"===(0,r.Z)(M)){if(s.I.DWT.ConnectWithSocket){for(var G=p.curCommand.length-1;0<=G;G--)if("ConvertToBlob"==p.curCommand[G].cmd||"GetImageByIndex"==p.curCommand[G].cmd){var L,W=G,F=a()(L=p.curCommand).call(L,W,1)[0];break}F.sFun(M)}S=M=null}else{S=M.replace(/\0/g,"");try{S=s.D.parse(S)}catch{s.D.log(M)}S.id&&s.D._deliverMsg(D.url,S)}},D.onclose=D.onerror=function(S){s.D.page.bUnload||s.D.detect.starting||(o()(s.D._reconnectWSPool,500),s.D.detect.starting=!0),S&&s.D.log("websocket error: "+S),c.hideMask(!0),s.D.detect.bOK=!1,s.I.Lib.each(s.I.DWT.globalWS,function(M,G){if(M==D)return a()(M=s.I.DWT.globalWS).call(M,G,1),!1})},y)return void p._innerActiveUI(function(S){var M,G,L,W=p.__serverId;S&&6<=S.length?(M=S[1],L=S[5],p.__strProductName=G=S[2],s.D.isString(L)&&("win"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumWindow:"linux"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumLinux:"mac"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumMac:"embed"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==L&&(p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumChromeOS))):S&&3<=S.length?(M=S[1],p.__strProductName=G=S[2]):S&&2<=S.length?M=S[1]:s.D.log("ActiveUI return parameters error."),G=G&&G.toLowerCase(),p.__serverId=M,p._blts?s.I.DWT.lglic(s.I.DWT.EnumInstance.dwt_desktop).then(function(F){return s.D.closeProgress(p,"Reconnect"),p.SetLTSLicenseAsync(F.ar)}).then(function(F){s.I.DWT.laddDWTObj(p),s.I.DWT.lcheckLic(s.I.DWT.EnumInstance.dwt_desktop,F)},function(F){F&&(s.I.DWT.lsetException(F.code||F.ltsErrorCode,F.message),s.I.DWT.OnLicenseException()),p.__unload(),s.I.DWT.ContainerMap={},a()(F=s.D.detect.arySTwains).call(F,0),a()(F=s.D.detect.arySTwainsByIP).call(F,0)}):(s.D.closeProgress(p,"Reconnect"),p.SetProductKeyAsync(s.I.DWT.ProductKey)),W!=M?(s.D.Errors.Server_Restarted(p),p._ImgManager&&(p._ImgManager.clear(),p._ImgManager.OnReady())):p._ImgManager&&p._innerFunRawV2("HowManyImagesInBuffer").then(function(F){F&&F.result&&0==F.result[0]&&p._ImgManager.clear(),p._ImgManager.OnReady(),p._resetErr()})});s.D.isLocalIP(p._host)&&(s.D.LS.item("DWT_port",p._port),s.D.LS.item("DWT_ssl",p._ssl?"true":"false"))}else if(p._bLocalService&&!s.I.DWT.IfUseWSPool){var C,D=p._objWS;if(p._customIP?C={host:p._host,ssl:p._ssl,port:p._port}:(C=s.D.detect.urls[s.D.detect.cUrlIndex])?C.host=s.D.product.host:C={host:s.D.product.host,ssl:p._ssl,port:p._port},p.httpUrl=s.D.getHttpUrl(C),null===D)return;if(D.onopen=null,D.onmessage=function(S){var M,G=S.data;if("object"===(0,r.Z)(G)){if(s.I.DWT.ConnectWithSocket){for(var L=p.curCommand.length-1;0<=L;L--)if("ConvertToBlob"==p.curCommand[L].cmd||"GetImageByIndex"==p.curCommand[L].cmd){var W,F=L,U=a()(W=p.curCommand).call(W,F,1)[0];break}U.sFun(G)}S=G=null}else{var H;if(p.__OnWSMessage&&p.__OnWSMessage(G),S=G.replace(/\0/g,""),0<=u()(S).call(S,'"method" : "EnableBuffer"')||0<=u()(S).call(S,'"method" : "GetBuffer"'))s.I.DWT.lwsproc(S);else{if(0<=u()(S).call(S,"Exception:")||0==u()(S).call(S,"Error"))return H=G,U=p.curCommand.pop()||{},M=!1,s.D.log(H+"@"+U.cmd),void(!(M=U.fFun?U.fFun(H):M)&&s.D.isFunction(p.__OnPrintMsg)&&p.__OnPrintMsg(H));try{S=s.D.parse(S)}catch{s.D.log(G)}p._OnRecieveMsg&&p._OnRecieveMsg(S)}}},D.onclose=function(){p.bReady=!1,p.__wsRetry=0,s.D.Errors.Server_Invalid(p),p.__bForceClose||s.D.page.bUnload||s.D.detect.starting||(o()(function(){s.D._checkAndReconnect(p._host,p._port)},500),s.D.detect.starting=!0),p.__OnWSClose&&p.__OnWSClose(),c.hideMask(!0),s.D.detect.bOK=!1,p.__bForceClose=!1,s.I.Lib.each(s.I.DWT.globalWS,function(S,M){if(S==D)return a()(S=s.I.DWT.globalWS).call(S,M,1),!1})},D.onerror=function(S){p.bReady=!1,p.__wsRetry=0,s.D.Errors.Server_Invalid(p),s.D.detect.bOK=!1,s.D.page.bUnload||s.D.detect.starting||(o()(function(){s.D._checkAndReconnect(p._host,p._port)},500),s.D.detect.starting=!0),S&&s.D.log("websocket error: "+S),p.__OnWSError&&p.__OnWSError(),c.hideMask(!0)},y)return void p._innerActiveUI(function(S){var M,G,L,W=p.__serverId;S&&6<=S.length?(M=S[1],L=S[5],p.__strProductName=G=S[2],s.D.isString(L)&&("win"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumWindow:"linux"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumLinux:"mac"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumMac:"embed"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==L&&(p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumChromeOS))):S&&3<=S.length?(M=S[1],p.__strProductName=G=S[2]):S&&2<=S.length?M=S[1]:s.D.log("ActiveUI return parameters error."),G=G&&G.toLowerCase(),p.__serverId=M,p._blts?s.I.DWT.lglic(s.I.DWT.EnumInstance.dwt_desktop).then(function(F){return s.D.closeProgress(p,"Reconnect"),p.SetLTSLicenseAsync(F.ar)}).then(function(F){s.I.DWT.laddDWTObj(p),s.I.DWT.lcheckLic(s.I.DWT.EnumInstance.dwt_desktop,F)},function(F){F&&(s.I.DWT.lsetException(F.code||F.ltsErrorCode,F.message),s.I.DWT.OnLicenseException()),p.__unload(),s.I.DWT.ContainerMap={},a()(F=s.D.detect.arySTwains).call(F,0),a()(F=s.D.detect.arySTwainsByIP).call(F,0)}):(s.D.closeProgress(p,"Reconnect"),p.SetProductKeyAsync(s.I.DWT.ProductKey)),W!=M?(s.D.Errors.Server_Restarted(p),p._ImgManager&&(p._ImgManager.clear(),p._ImgManager.OnReady()),s.D.isFunction(p.__OnWSReconnect)&&(L=s.D.getWSUrl(p._host,p._port,p._ssl),p.__OnWSReconnect(L,p.httpUrl))):p._ImgManager&&p._innerFunRawV2("HowManyImagesInBuffer").then(function(F){F&&F.result&&0==F.result[0]&&p._ImgManager.clear(),p._ImgManager.OnReady(),p._resetErr()})});s.D.isLocalIP(p._host)&&(s.D.LS.item("DWT_port",C.port),s.D.LS.item("DWT_ssl",C.ssl?"true":"false"))}else p._port||(p._port=p._ssl?s.I.DWT.SSLPort:s.I.DWT.Port),p.httpUrl=s.D.getHttpUrl({host:p._host,ssl:p._ssl,port:p._port});s.D.attachProperty(p),s.D.html5.ui.init(p,p.config),s.D.html5.ui.addMethods(p),s.D.attachPropertyUI(p),p._ImgManager.OnReady(),p._bLocalService?p._innerActiveUI(function(S){var M,G,L,W=!1;S&&6<=S.length?(M=S[1],L=S[5],p.__strProductName=G=S[2],s.D.isString(L)&&("win"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumWindow:"linux"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumLinux:"mac"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumMac:"embed"==L?p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==L&&(p.__serverPlatform=s.I.DWT.EnumDWT_PlatformType.enumChromeOS))):S&&3<=S.length?(M=S[1],p.__strProductName=G=S[2]):S&&2<=S.length?(M=S[1],W=!0):(W=!0,s.D.log("ActiveUI return parameters error.")),s.D.attachAddon(p),G=G&&G.toLowerCase(),p.__serverId=M,(p.__bMustUpgradeService=W)?s.D.isFunction(p.__OnReady)&&p.__OnReady(p):(s.D.showLoadingMsg(-1,"",s.I.MSG.Init_SetLicenseForDWT),(p._blts?(L=p._bLocalService,s.D.isUndefined(L),s.I.DWT.lglic(s.I.DWT.EnumInstance.dwt_desktop).then(function(F){return p.SetLTSLicenseAsync(F.ar)}).then(function(F){s.I.DWT.laddDWTObj(p),s.I.DWT.lcheckLic(s.I.DWT.EnumInstance.dwt_desktop,F)})):""==(S=s.I.DWT.ProductKey)||"******"==S?s.D.Promise.resolve(0):p.SetProductKeyAsync(S)).then(function(){s.D.closeLoadingMsg();var F=!1;if(p._blts?0==s.I.DWT.licenseException.code&&(s.D.License.checkProductKey(p,{Core:!0},!0)||s.D.License.checkProductKey(p,{Webcam:!0},!0)?(s.I.DWT.lclex(),F=!0):s.D.License.checkProductKey(p,{Core:!0},!0)):s.D.License.checkProductKey(p,{Core:!0})||s.D.License.checkProductKey(p,{Webcam:!0},!0)?(s.I.DWT.lclex(),F=!0):s.D.License.checkProductKey(p,{Core:!0},!1,!0),s.D.isFunction(p.__OnReady)&&p.__OnReady(p),F)return p._setConvertModeAsync(p._pdfConvertMode).catch(function(){})},function(F){if(s.D.closeLoadingMsg(),p._blts&&F)return s.I.DWT.lsetException(F.code||F.ltsErrorCode,F.message),s.I.DWT.OnLicenseException(),p.__unload(),s.I.DWT.ContainerMap={},a()(F=s.D.detect.arySTwains).call(F,0),void a()(F=s.D.detect.arySTwainsByIP).call(F,0);p._blts?s.D.License.checkProductKey(p,{Core:!0},!0):s.D.License.checkProductKey(p,{Core:!0})||s.D.License.checkProductKey(p,{Webcam:!0},!0)||s.D.License.checkProductKey(p,{Core:!0},!1,!0)}))}):(s.D.attachAddon(p),p.__serverId=1,p.__bMustUpgradeService=!1,s.D.showLoadingMsg(-1,"",s.I.MSG.Init_SetLicenseForDWT),(p._blts?(s.I.DWT.li({instanceMode:s.I.DWT.EnumInstance.dwt_browser}),s.I.DWT.lglic(s.I.DWT.EnumInstance.dwt_browser).then(function(S){return p.SetLTSLicenseAsync(S.ar)}).then(function(S){s.I.DWT.laddDWTObj(p),s.I.DWT.lcheckLic(s.I.DWT.EnumInstance.dwt_browser,S)},function(S){S&&(s.I.DWT.lsetException(S.code||S.ltsErrorCode,S.message),s.I.DWT.OnLicenseException()),p.__unload(),s.I.DWT.ContainerMap={},a()(S=s.D.detect.arySTwains).call(S,0),a()(S=s.D.detect.arySTwainsByIP).call(S,0)})):""==(T=s.I.DWT.ProductKey)||"******"==T?s.D.Promise.resolve(0):p.SetProductKeyAsync(T)).then(function(){var S;s.D.closeLoadingMsg(),p.ErrorCode<0?s.D.License.promptLicenseErr(p):(S=!1,p._blts?0==s.I.DWT.licenseException.code&&(s.D.License.checkProductKey(p,{Core:!0},!0)||s.D.License.checkProductKey(p,{Webcam:!0},!0)?(s.I.DWT.lclex(),S=!0):s.D.License.checkProductKey(p,{Core:!0},!0)):s.D.License.checkProductKey(p,{Core:!0})||s.D.License.checkProductKey(p,{Webcam:!0},!0)?s.D.License.checkProductKey(p,{Core:!0,Wasm:!0},!0,!0)&&(s.I.DWT.lclex(),S=!0):s.D.License.checkProductKey(p,{Core:!0},!1,!0),S&&(s.I.WasmEnv&&s.I.WasmEnv.setLoglevel(p._logLevel),p._setConvertMode(p._pdfConvertMode)),s.D.isFunction(p.__OnReady)&&p.__OnReady(p))},function(S){s.D.closeLoadingMsg(),p.errorCode=S.code,p.errorString=S.message,s.I.OnLicenseError(S.message,S.code)}))},h.__unload=h.dispose=function(){var y,p=this;p._destroy||(p._ImgManager&&p._ImgManager.clear(),(y=p._objWS)&&(p.__bForceClose=!0,s.I.DWT.IfUseWSPool?s.D._removeFromWSPool(p):(y.close(),y.onmessage=null,y.onclose=null),a()(y=p.curCommand).call(y,0),delete p._objWS,p._objWS=null),p.bReady=!1,p.__addon&&p.__addon.Camera&&p.__addon.Camera._viewer&&(""!=p.__addon.Camera.getStatus()&&p.__addon.Camera.closeSource().catch(function(){}),p.__addon.Camera._viewer.dispose(),p.__addon.Camera._viewer=null),p._isBindViewer()&&(p.UnbindViewer(),s.D.html5.ui.unLoad(p)),p._ImgManager&&(p._ImgManager.dispose(),p._ImgManager=null,p.Viewer=null),p.objImageIndexManager&&(p.objImageIndexManager=null),p._OnRecieveMsg=null,s.I.DWT.lremoveDWTObj(p),p._destroy=!0)}},1097:function(e,c,t){t.r(c),c=t(9798);var r=t.n(c),a=(c=t(4579),t.n(c)),o=(c=t(5683),t.n(c)),u=(c=t(7711),t.n(c)),s=t(1695),f=window.SparkMD5,v=t(1188),l=t(4130),I=s.I.navInfoSync,_=s.D.html5.Funs;(c=s.D.html5.STwain.prototype).__innerLoadImage=function(h,y,p,m,T,C,D){var S=this;return s.D.License.checkProductKey(S,{Core:!0})&&s.D.License.checkPDFProductKeyWhenNeeds(S,p)?s.D.isFunction(C)?S.__innerAcquireImage(h,y,m,C,D):(""==(p=S.GetCurrentDocumentName())&&(p=S._ImgManager.getWebViewer().GetDefaultFileName()),S.__innerLoadImageFun(h,y,T,p)):(s.D.isFunction(D)&&D(S._errorCode,S._errorString),!1)},c.__innerLoadImageFun=function(h,y,p,m){var T=!0;if(_.isHttpServerInvalid(this))return!1;if(y=this._innerFunRaw(h,y,!1,!1,!0),this.__bOpenFileNow=!1,s.D.isArray(y.result)&&0<y.result.length){var C="",D=[];if(p?s.D.isObject(p=y.result[0])?(C=p.ids,D=p.metaData):(-1!=p||"LoadImage"!=h&&"FTPDownload"!=h)&&(p||"LoadImageFromBase64Binary"!=h)||(T=!1):C=y.result.join(","),s.D.isArray(D)||(D=[]),this._OnBitmapChanged(["c2",C,1,this._ImgManager.getCurrentImageIndex(),this._ImgManager.count(),D],null,m),T)return s.D.License.isLTS()&&s.I.DWT.lcvrf(this),!0}return s.I.Lib.Errors.bImageOnlyError_NotPurelyPDF(this._errorCode)&&s.I.Lib.Errors.LicenseNoPDF(this),!1},c.__closeRemoteScanUI=function(h){var y;this._acquireDivEL&&(y=s.D.one(".ds-img-screen"),this._acquireDivEL.evtFun?(y&&0<y.length&&s.D.removeEventListener(y[0],"mouseup",this._acquireDivEL.evtFun),this._acquireDivEL.evtFun=null):y&&0<y.length&&s.D.removeEventListener(y[0],"mouseup"),y&&0<y.length&&(y[0].src=""),h&&(document.body.removeChild(this._acquireDivEL),this._acquireDivEL=null))},c.__innerAcquireImage=function(h,y,p,m,T){var C=this,D="LoadImage"==h||"LoadImageEx"==h||"GenerateURLForUploadData"==h,S=D||"LoadDibFromClipboard"==h,M=function(L){C.__bLoadingImage=!1,C.__bAcquireImageNow=!1,C.__bOpenFileNow=!1;var W=C._ImgManager.getCurrentImageIndex();return 0<=W&&C.OnRefreshUI(W),s.I.Lib.Errors.bImageOnlyError_NotPurelyPDF(C._errorCode)&&s.I.Lib.Errors.LicenseNoPDF(C),s.D.isFunction(T)&&T(C.ErrorCode,C.ErrorString),D?s.I.Lib.closeProgress(C,h):_.hideMask(h),L&&s.I.Lib.log(L),C.__closeRemoteScanUI(!0),!1};return _.isServerInvalid(C)?(M(),!1):(D?s.I.Lib.showProgress(C,h,!1):_.showMask(h),C._innerSend(h,y,!0,function(){var G;C.__bLoadingImage=!1,C.__bOpenFileNow=!1,D?(s.I.Lib.closeProgress(C,h),C._isBindViewer()&&0<=(G=C._ImgManager.getCurrentImageIndex())&&C.OnRefreshUI(G)):_.hideMask(h),s.D.isFunction(m)&&m(),C.__closeRemoteScanUI(!0),S&&s.D.License.isLTS()&&s.I.DWT.lcvrf(C)},M),!0)},c.__innerSaveImage=function(h,y,p,m){return this._OnPercentDone([0,-1,s.I.MSG.Encoding]),this.__innerProgressFunction(h,y,!1,p,m)},c.__innerFTPDownloadDirectly=function(h,y,p,m,T){return s.D.License.checkProductKey(this,{Core:!0})&&s.D.License.checkPDFProductKeyWhenNeeds(this,p)?(s.D.cancelFrome=4,this.__innerProgressFunction(h,y,!0,m,T)):(s.D.isFunction(T)&&T(this._errorCode,this._errorString),!1)},c.__innerFTPDownload=function(h,y,p,m,T){var C=this;return s.D.License.checkProductKey(C,{Core:!0})&&s.D.License.checkPDFProductKeyWhenNeeds(C,p)?(s.D.cancelFrome=4,s.D.isFunction(T)?C.__innerProgressFunction(h,y,!0,function(){var D=C._ImgManager.getCurrentImageIndex();0<=D&&C.OnRefreshUI(D),s.D.License.isLTS()&&s.I.DWT.lcvrf(C),s.D.isFunction(m)&&m()},T):(""==(p=C.GetCurrentDocumentName())&&(p=C._ImgManager.getWebViewer().GetDefaultFileName()),(h=C.__innerLoadImageFun(h,y,1,p))&&s.D.License.isLTS()&&s.I.DWT.lcvrf(C),0<=(y=C._ImgManager.getCurrentImageIndex())&&C.OnRefreshUI(y),h)):(s.D.isFunction(T)&&T(C._errorCode,C._errorString),!1)},c.__innerFTPUpload=function(h,y,p,m){return s.I.Lib.cancelFrome=3,this.__innerProgressFunction(h,y,!0,p,m)},c.__innerProgressFunction=function(h,y,p,m,T){var C=this;return s.D.isFunction(T)?(s.I.Lib.showProgress(C,h,p),this._innerSend(h,y,!0,function(){s.I.Lib.closeProgress(C,h),s.D.isFunction(m)&&m()},function(M){return s.D.isFunction(T)&&T(C.ErrorCode,C.ErrorString),s.I.Lib.closeProgress(C,h),M&&s.I.Lib.log(M),!0})):this._innerFun(h,y)},c.__innerGetBarcodeResultAsyncFunction=function(h){var y=s.I.Lib.NewBarcodeResult();return h&&(y._errorCode=h.exception,y._errorString=h.description,y._resultlist=h.result,y._Count=h.result.length),y},c.__innerGetOCRResultAsyncFunction=function(h){var y=s.I.Lib.NewOCRResult(this);return h&&(y._errorCode=h.exception,y._errorString=h.description,y._resultlist=h.result),y},c._innerSendCmd=function(h,y){if(_.isHttpServerInvalid(this))return!1;this._innerFunRaw(h,y,!0,!1,!0)},c._innerFun=function(h,y){return!_.isHttpServerInvalid(this)&&(h=this._innerFunRaw(h,y,!1,!1,!1),s.I.Lib.isArray(h)?h[0]:h)},c._innerFunRawV2=function(h,y,p){var m=this;return m._resetErr(),!m._isValid()||_.isHttpServerInvalid(m)?s.D.Promise.reject({code:m._errorCode,message:m._errorString}):(p={method:"post",body:_.getJson(m,h,y,0),dataType:p},s.I.DWT.ConnectWithSocket?new(r())(function(T,C){m._innerSend(h,y,!1,function(D){var S=!1;try{S=s.D.isString(D)?s.D.parse(D):D}catch{}if(S){if(S instanceof Blob||S instanceof ArrayBuffer)return void T(S);void 0!==S.exception&&void 0!==S.description&&(m._errorCode=S.exception,m._errorString=S.description)}m._resetErr(),T(S)},function(D){var S;s.I.Lib.Errors.NetworkError(m),D&&(S=[m._errorString," ",D.errorString],D.httpCode&&(S.push(" ("),S.push(D.httpCode),S.push(")")),m._errorString=S.join("")),C({code:m._errorCode,message:m._errorString})})}):s.D.fetch([m.httpUrl,"fa/",h].join(""),p).then(function(T){var C=!1;try{C=s.D.isString(T)?s.D.parse(T):T}catch{}if(C){if(C instanceof Blob||C instanceof ArrayBuffer)return C;if(void 0===C.exception||void 0===C.description)return m._resetErr(),C;m._errorCode=C.exception,m._errorString=C.description}else s.I.Lib.Errors.InvalidResultFormat(m);throw{code:m._errorCode,message:m._errorString}},function(T){var C;throw s.I.Lib.Errors.NetworkError(m),T&&(C=[m._errorString," ",T.errorString],T.httpCode&&(C.push(" ("),C.push(T.httpCode),C.push(")")),m._errorString=C.join("")),{code:m._errorCode,message:m._errorString}}))},c._innerFunV2=function(h,y){return _.isHttpServerInvalid(this)?s.D.Promise.reject({code:this._errorCode,message:this._errorString}):this._innerFunRawV2(h,y,"text").then(function(p){return p&&s.I.Lib.isArray(p.result)&&0<p.result.length?p.result[0]:p})},c._innerNewWS=function(h,y){var p=this,m=(0,l.R)(),T=_.getJson(p,h,y,m);return p._resetErr(),!p._isValid()||_.isHttpServerInvalid(p)?s.D.Promise.reject({code:p._errorCode,message:p._errorString}):new s.D.Promise(function(C,D){var S;try{S=s.D.getWS(p._host,p._port,p._ssl)}catch{S&&(S.close(),S=null),s.D.Errors.Server_Invalid(p),D({code:p._errorCode,message:p._errorString})}S.onopen=function(){1==S.readyState?(S.onopen=null,S.send(T)):0==S.readyState&&a()(S.onopen,100)},S.onmessage=function(M){C(M&&M.data?M.data:""),S.close()},S.onerror=function(M){D(M),S.close()},S.onclose=function(M){S&&(S.onclose=null,S.onerror=null,S.onmessage=null,S=null)}})},c._innerFunRaw=function(h,y,p,m,T,C,D){var S,M=this,G="f/",L=!1;if(s.I.DWT.ConnectWithSocket)return this._innerSend(h,y,!1,C,D);if(_.isHttpServerInvalid(M)||(M._resetErr(),!M._isValid()))return!1;if(p&&(L=!0,G="fa/"),h={method:"POST",url:p=[M.httpUrl,G,h].join(""),data:G=_.getJson(M,h,y,0),async:L,onSuccess:function(W,F,U){var H=!1;try{H=s.D.isString(W)&&"text/json"===U.getResponseHeader("content-type")?s.D.parse(W):W}catch{}S=H?(void 0!==H.exception&&void 0!==H.description?(M._errorCode=H.exception,M._errorString=H.description):M._resetErr(),T?H:H.result):(s.I.Lib.Errors.InvalidResultFormat(M),""),s.D.isFunction(C)&&C(S)},onError:function(){s.I.Lib.Errors.NetworkError(M),S="",s.D.isFunction(D)&&D()}},!L&&m)I.bIE?(h.dataType="arraybuffer",h.onSuccess=function(W,F,U){var H,Z,X=!1;if(U.responseHeadersString&&(V=U.responseHeadersString,-1!=o()(V).call(V,"text/json")&&(X=!0)),V=U.responseData,M._resetErr(),S=!1,V&&(H=new Uint8Array(V),X?V=String.fromCharCode.apply(null,H):(S=new Blob([H],{type:M.__strHttpContentTypeFieldValue}),(Z=new f.ArrayBuffer).append(H),S.md5=Z.end())),!V||X){var $=!1,V=X?V:U.responseText;if(0<V.length){if("{"==V.charAt(0))try{$=s.D.parse(V),X=!0}catch{s.I.Lib.log(V)}X?S=void 0===$.exception||void 0===$.description||(M._errorCode=$.exception,M._errorString=$.description,!1):(H=new Uint8Array(V),S=new Blob([H],{type:M.__strHttpContentTypeFieldValue}),(Z=new f.ArrayBuffer).append(H),S.md5=Z.end())}}s.D.isFunction(C)&&C(S)}):(L||(h.dataType="text",h.contentType="text/plain; charset=x-user-defined",h.mimeType="text/plain; charset=x-user-defined"),h.onSuccess=function(W,F,U){var H,Z;if(M._resetErr(),0<(Z=(H=U.responseText).length)){var X;if(U=!1,"{"==H.charAt(0))try{X=s.D.parse(H),U=!0}catch{s.I.Lib.log(H)}if(U)S=void 0===X.exception||void 0===X.description||(M._errorCode=X.exception,M._errorString=X.description,!1);else{for(var $=new Uint8Array(Z),V=0;V<Z;V++)$[V]=H.charCodeAt(V);S=new Blob([$],{type:M.__strHttpContentTypeFieldValue}),(U=new f.ArrayBuffer).append($),S.md5=U.end()}}else S="";s.D.isFunction(C)&&C(S)});else if(L&&m)return h={method:"POST",body:G},I.bIE?h.dataType="arraybuffer":h.fetchRaw=!0,y=s.D.fetch(p,h),(y=I.bIE?y:y.then(function(W){var F=W.headers.get("content-type");return 0<=o()(F).call(F,"image/")||0<=o()(F).call(F,"application/octet-stream")?W.arrayBuffer():W.json()})).then(function(W){var F;M._resetErr(),W instanceof ArrayBuffer?(s.D.isFunction(C)&&C(W),W=null):s.D.isObject(W)?void 0!==W.exception&&void 0!==W.description?(M._errorCode=W.exception,M._errorString=W.description,s.D.isFunction(D)&&D()):(F="",W.result&&(F=W.result),s.D.isFunction(C)&&C(F)):(s.I.Lib.Errors.NetworkError(M),s.D.isFunction(D)&&D())},function(W){s.I.Lib.Errors.NetworkError(M),s.D.isFunction(D)&&D()}),!0;return L||s.D.mix(h,{headers:{"X-Requested-With":!1}}),I.bFileSystem&&(h.crossDomain=!1),s.D.ajax(h),!!L||S},c._innerSend=function(h,y,p,m,T){var C=this._objWS,D=!1,S=!1,M=!1,G=!0;return"ActiveUI"==h?G=!1:M=_.isServerInvalid(this),M?(s.D.isFunction(T)&&T(),!0):(s.D.isFunction(m)&&(S=m),s.D.isFunction(T)&&(D=T),M=(0,l.R)(),m=s.I.DWT.ConnectWithSocket||"SaveSelectedImagesToBytes"!=h&&"ConvertToBlob"!=h?(""==(m=this.GetCurrentDocumentName())&&(m=this._ImgManager.getWebViewer().GetDefaultFileName()),this.curCommand.push({cmd:h,cmdId:M,sFun:S,fFun:D,currentFileName:m}),_.sendData(C,_.getJson(this,h,y,M),!1,G)):(T=_.getJson(this,h,y,M),this._innerFunRaw(h,T,!0,!0,!0,S,D),!0))},c.__innerConvertToBlob=function(h,L,G,m,M,C,D,S){return this._isMobileMode()?this.__innerConvertToBlobByMobile(h,L,G,M,C,D,S):(M=G,G=",",s.D.isString(M)&&""!=M||(G=M=""),L=["[",h,',"',L.join(","),'"',G,M,"]"].join(""),m?this._innerFunRaw("ConvertToBlob",L,!0,!0,!0,function(W){var F,U=_.getBlobTypeByImageType(h);U=new Blob([W],{type:U}),s.I.DWT.IfAddMD5InUploadHeader?((F=new f.ArrayBuffer).append(W),s.D.isFunction(C)&&C(U,F.end(),S)):s.D.isFunction(C)&&C(U,"",S)},D):(G=this._innerFunRaw("ConvertToBlob",L,!1,!0,!1),M="",0==this.ErrorCode?(G&&"md5"in G&&(M=G.md5),C(G,M,S)):(D(),!1)))},c.__innerConvertToBlobByMobile=function(h,y,p,m,T,C,D){var S,M,L=[];if(h==s.I.DWT.EnumDWT_ImageType.IT_BMP)return S="bmp",this._mobileNotSupport("Convert to bmp",C);for(S=h==s.I.DWT.EnumDWT_ImageType.IT_JPG?"jpg":h==s.I.DWT.EnumDWT_ImageType.IT_PNG?"png":h==s.I.DWT.EnumDWT_ImageType.IT_TIF?"tiff":h==s.I.DWT.EnumDWT_ImageType.IT_PDF?"pdf":h==s.I.DWT.EnumDWT_ImageType.IT_J2K?"jp2":"png",M=0;M<y.length;M++)L.push(this._ImgManager.convertServerIdToClientIndex(y[M]));return this._innerSendToMobile("SaveImage",(0,v.An)("",L,S,m,!0),0,function(F,U,H){s.D.isFunction(T)&&T(F,D)},C)},c.__innerConvertToBase64ByMobile=function(h,y,p,m,T,C){var D,S,M=this,L=[];if(p==s.I.DWT.EnumDWT_ImageType.IT_BMP)return D="bmp",M._mobileNotSupport("Convert to bmp",C);if(D=p==s.I.DWT.EnumDWT_ImageType.IT_JPG?"jpg":p==s.I.DWT.EnumDWT_ImageType.IT_PNG?"png":p==s.I.DWT.EnumDWT_ImageType.IT_TIF?"tiff":p==s.I.DWT.EnumDWT_ImageType.IT_PDF?"pdf":p==s.I.DWT.EnumDWT_ImageType.IT_J2K?"jp2":"png",s.D.isArray(y))for(S=0;S<y.length;S++)L.push(M._ImgManager.convertServerIdToClientIndex(y[S]));return M._innerSendToMobile("SaveImage",(0,v.An)(h,L,D,m,!1),0,function(F,U,H){var Z,X;if(F instanceof Uint8ClampedArray||F instanceof ArrayBuffer||F instanceof Uint8Array)return(Z=new FileReader).onload=function(V){var De=s.D.isString(V=V.target.result)?V.split(","):[];2<=De.length&&(V=De[1]),s.D.isFunction(T)&&T({result:[V,V.length,Z.md5]})},X="pdf"==U?"application/pdf":"image/"+U,void M._innerSendToMobile("GetMD5",(0,v.An)(F),0,function($){Z.md5=$,Z.readAsDataURL(new Blob([F],{type:X}))},C);T({result:[F,F.length,H]})},C)},c.__SaveLocalFileToBytes=function(h,y,p,m,T){return y?(this._innerFunRaw("SaveSelectedImagesToBytes",(0,v.dv)(0,0,h,p),y,!0,!0,function(C){s.D.isFunction(m)&&(C=new Blob([C]),m(C))},T),!0):(h=this._innerFunRaw("SaveSelectedImagesToBytes",(0,v.dv)(0,0,h,p),y,!0,!1),0==this.ErrorCode?m(h):(T(),!1))},c.__captureImage=function(h,y,p,m){return this.__LoadImageFromBytesV2(h,y,"",!0,p,m,0,0,"true")},c.__LoadImageFromBytes=function(h,y,p,m,T,C,D,S){return this.__LoadImageFromBytesV2(h,y,p,m,T,C,D,S,"false")},c.__LoadImageFromBytesV2=function(h,y,p,m,T,C,D,S,M){var G=this,L="LoadImageFromBytes",W=y||3,F=h.size||h.length,U=h.name,H=_.isServerInvalid(G),Z=!0,X=0,$=1,V=(!isNaN(D)&&0<=D&&!isNaN(S)&&0<S?$=0:S=D=0,X=G.__GetLoadEventsNum(),W=["[",F,",",0,",",W,',"',p,'",',D,",",S,",",X,",",$,",",M,"]"].join(""),function(){var fe;return s.I.Lib.closeProgress(G,L),G.__bLoadingImage=!1,Z&&0<=(fe=G._ImgManager.getCurrentImageIndex())&&G.OnRefreshUI(fe),s.D.isFunction(C)&&C(G._errorCode,G._errorString,U),!1});return!H&&(s.D.License.checkProductKey(G,{Core:!0})||s.D.License.checkProductKey(G,{Webcam:!0},!0))&&s.D.License.checkPDFProductKeyWhenNeeds(G,y)?0===F?(s.I.Lib.Errors.ImageFileLengthCannotZero(G),Z=!1,V()):(_.setBtnCancelVisibleForProgress(G,!1),this._innerSendBlob(L,W,h,m,$,function(){var De;if((D+F==S||S<=0||isNaN(S))&&s.I.Lib.closeProgress(G,L),G.__bLoadingImage=!1,G._isBindViewer()&&(De=G._ImgManager.getCurrentImageIndex(),m&&0<=De&&G.OnRefreshUI(De)),s.D.isFunction(T))if(m)a()(function(){T(U)},30);else try{T(U)}catch(fe){s.I.Lib.log(fe.message)}return s.D.License.isLTS()&&s.I.DWT.lcvrf(G),!0},V)):(Z=!1,V())},c._innerSendBlob=function(h,y,p,m,T,C,D){var S,M,G,L=this,W=L._objWS,F=!1;return _.isServerInvalid(L)?(s.D.isFunction(D)&&D(),!1):(s.D.isFunction(D)&&(F=D),m?(D=(0,l.R)(),L.curCommand.push({cmd:h,cmdId:D,sFun:function(){s.D.isFunction(C)&&C()},fFun:F,currentFileName:p.currentFileName}),void _.sendData(W,_.getJson(L,h,y,D),p,!0)):(M=[],G="",!_.isHttpServerInvalid(L)&&(L._resetErr(),!!L._isValid()&&(m=[L.httpUrl,"f/",h].join(""),W=_.getJson(L,h,y,0),W=(W+="\r\n\r\n")+s.I.Lib.base64.encodeArray(p),s.D.mix(D={method:"POST",url:m,processData:!1,data:W,async:!1,onSuccess:function(U,H,Z){var X=!1,$=!1;try{X=s.D.isString(U)&&"text/json"===Z.getResponseHeader("content-type")?s.D.parse(U):U}catch{}null!=X&&(void 0!==X.exception&&void 0!==X.description?(L._errorCode=X.exception,L._errorString=X.description):L._resetErr(),(S=X.result)&&s.D.isArray(S)&&1<=S.length&&(T?(Z=S[0])&&s.D.isObject(Z)&&(G=Z.ids,s.D.isArray(Z.metaData)&&(M=Z.metaData),$=!0):(G=S.join(","),M=[],$=!0))),$||(s.I.Lib.Errors.InvalidResultFormat(L),S="",M=[])},onError:function(){s.I.Lib.Errors.NetworkError(L),S="",M=[]}},{headers:{"X-Requested-With":!1}}),I.bFileSystem&&(D.crossDomain=!1),s.D.ajax(D),0==L._errorCode?(0<G.length&&L._OnBitmapChanged(["c2",G,1,L._ImgManager.getCurrentImageIndex(),L._ImgManager.count(),M],null,p.currentFileName),s.D.isFunction(C)&&C()):s.D.isFunction(F)&&F(),S))))},c.GetImageAsync=function(S,y,p,m,T){var D,C=this;return C._resetErr(),C._isValid()?(S=u()(S),isNaN(S)?(s.D.Errors.InvalidIndex(C),s.D.Promise.reject({code:C._errorCode,message:C._errorString})):S<0||S>=C._ImgManager.count()?(s.D.Errors.IndexOutOfRange(C),s.D.Promise.reject({code:C._errorCode,message:C._errorString})):C._isMobileMode()?C._mobileNotSupportAsync("GetImageAsync"):_.isHttpServerInvalid(C)?s.D.Promise.reject({code:C._errorCode,message:C._errorString}):-1==(S=C._ImgManager.convertClientIndexToServerId(S))?(s.D.Errors.IndexOutOfRange(C),s.D.Promise.reject({code:C._errorCode,message:C._errorString})):(s.D.isNumber(y)?D=(0,v.dv)(S,y):s.D.isNumber(p)&&s.D.isNumber(m)?D=(0,v.dv)(S,p,m):s.D.isNumber(T)&&(D=(0,v.dv)(S,-1,-1,T)),C._innerFunRawV2("GetImageByIndex",D,"blob"))):s.D.Promise.reject({code:C._errorCode,message:C._errorString})},c.GetImageInfoAsync=function(h){var y=this;return y._resetErr(),y._isValid()?(h=u()(h),isNaN(h)?(s.D.Errors.InvalidIndex(y),s.D.Promise.reject({code:y._errorCode,message:y._errorString})):h<0||h>=y._ImgManager.count()?(s.D.Errors.IndexOutOfRange(y),s.D.Promise.reject({code:y._errorCode,message:y._errorString})):y._isMobileMode()?y._mobileNotSupportAsync("GetImageAsync"):-1==(h=y._ImgManager.convertClientIndexToServerId(h))?(s.D.Errors.IndexOutOfRange(y),s.D.Promise.reject({code:y._errorCode,message:y._errorString})):y._innerFunV2("GetImageInfo",(0,v.dv)(h)).then(function(p){var m=0,T=0,C=p;return s.I.Lib.isArray(p)&&1==p.length&&(C=p[0]),s.I.Lib.isString(C)&&(p=C.split(","),m=u()(p[0]),T=u()(p[1])),{width:m,height:T}})):s.D.Promise.reject({code:y._errorCode,message:y._errorString})},c._innerActiveUI=function(h,y){var p=s.D.detect.ssl;if(this._blts){var m=this,T=s.I.DWT.li({instanceMode:s.I.DWT.EnumInstance.dwt_desktop});if(!s.I.DWT.lisValidID(T))return void(m=null);m._innerSend("ActiveUI",(0,v.dv)(s.I.Lib.env.WSVersion,s.I.Lib.env.WSSession,1,T,p),!1,h,y),m=null}else this._innerSend("ActiveUI",(0,v.dv)(s.I.Lib.env.WSVersion,s.I.Lib.env.WSSession,1,"",p),!1,h,y);return!0}},2246:function(e,r,t){t.r(r),r=t(7711);var a=t.n(r),o=t(1695),u=o.D.html5.Funs,s=u.DEF;o.D.html5.STwainStyle=function(f){this._parent=f,s(f=this,"width",{get:function(){return this._parent._width},set:function(v){this.SetSize(v,!1)}}),s(f,"height",{get:function(){return this._parent._height},set:function(v){this.SetSize(!1,v)}})},o.D.html5.STwainStyle.prototype.SetSize=function(f,v){var l,I,c,_;_=c=!1,(l=this._parent)._isBindViewer()&&(!(c=o.D.isString(f)&&0<f.length&&"%"===f.charAt(f.length-1)?f:c)&&f&&(I=a()(f))&&(c=I+"px"),!(_=o.D.isString(v)&&0<v.length&&"%"===v.charAt(v.length-1)?v:_)&&v&&(I=a()(v))&&(_=I+"px"),c&&(l._width=c),_&&(l._height=_),u.changeImageUISize(l,c,_))}},4666:function(e,It,t){t.r(It),It=t(5683);var r=t.n(It),a=(It=t(7711),t.n(It)),o=t(1695),u=t(1188),s=t(8420),f=t(7344),v=(It=t(9927),t.n(It)),l=(It=t(7682),t.n(It)),I=(It=t(9356),t.n(It)),c=t(4845),_=function(){function Le(){(0,s.Z)(this,Le),(0,c.Z)(this,"bIsDirty",!1),(0,c.Z)(this,"imageWidth",0),(0,c.Z)(this,"imageHeight",0),(0,c.Z)(this,"iImageControlWidth",0),(0,c.Z)(this,"iImageControlHeight",0),(0,c.Z)(this,"imageUrl",""),(0,c.Z)(this,"minImageUrl",""),(0,c.Z)(this,"uuid",-1),(0,c.Z)(this,"serverId",-1),(0,c.Z)(this,"aryOverlayRectangleData",[]),(0,c.Z)(this,"ticks",l()())}return(0,f.Z)(Le,[{key:"Clear",value:function(){this.imageUrl="",this.minImageUrl="",this.serverId=-1,this.aryOverlayRectangleData=[]}}]),Le}(),h=(0,f.Z)(function Le(g,w,N){(0,s.Z)(this,Le),this.Url=g,this.Width=w,this.Height=N}),y=(It=t(699),t.n(It)),p=(It=t(9798),t.n(It)),m=(It=t(4579),t.n(It)),T=function(){function Le(g,w,N,K){(0,s.Z)(this,Le);var Te=1;this._webViewer=g,this.myViewer=this._webViewer.myViewer,this.element=w,o.D.isUndefined(N)||(Te="left"==N?-1:1),o.D.isUndefined(K)&&(K=!1),this.myCustomElemet=this.myViewer.createCustomElement(w,Te,K),this.myCustomElemet&&(this.hide(),this.bDispose=!1)}return(0,f.Z)(Le,[{key:"show",value:function(){return this.myCustomElemet?(this.myCustomElemet.show(),!0):(this.bDispose?o.D.Errors.CustomElementDispose(this._webViewer._stwain):o.D.Errors.CustomElementNotExist(this._webViewer._stwain),!1)}},{key:"hide",value:function(){return this.myCustomElemet?(this.myCustomElemet.hide(),!0):(this.bDispose?o.D.Errors.CustomElementDispose(this._webViewer._stwain):o.D.Errors.CustomElementNotExist(this._webViewer._stwain),!1)}},{key:"dispose",value:function(){var g=!1;return!!this.bDispose||(this.myCustomElemet?(g=this.myCustomElemet.dispose())&&(this.bDispose=!0,this._webViewer._customElement=void 0,this.myCustomElemet=void 0,this.myViewer=null,this.element=null):g=this.bDispose=!0,g)}}]),Le}();o.D.UI.CustomElement=T,It=t(373),It=t.n(It);var D=o.D.html5.Funs.DEF,S=new(It()),M=function(){function Le(g,w){(0,s.Z)(this,Le),function C(Le,g){if(g.has(Le))throw new TypeError("Cannot initialize the same private elements twice on an object");g.add(Le)}(this,S),this._ImgManager=w,this._stwain=w._stwain,this._webViewer=g,this._elements=[],function(N,K,Te){if(K.has(N))return Te;throw new TypeError("attempted to get private field on non-instance")}(this,S,G).call(this)}return(0,f.Z)(Le,[{key:"dispose",value:function(){this._stwain=null,this._ImgManager=null,this._webViewer&&(this._webViewer=null),this._elements=[]}},{key:"next",value:function(){return this._webViewer.next()}},{key:"previous",value:function(){return this._webViewer.previous()}},{key:"first",value:function(){return this._webViewer.first()}},{key:"last",value:function(){return this._webViewer.last()}},{key:"gotoPage",value:function(g){return this._webViewer.go(g)}},{key:"render",value:function(){return this._webViewer.render()}},{key:"createDocumentEditor",value:function(g){return this._stwain._isMobileMode()?this._webViewer.createDocumentEditor(g):(o.D.Errors.ServiceNotSupport(this._stwain,"createDocumentEditor"),null)}},{key:"createImageEditor",value:function(g){return this._webViewer.createImageEditor(g)}},{key:"createThumbnailViewer",value:function(g){return this._webViewer.createThumbnailViewer(g)}},{key:"getUISettings",value:function(){return this._webViewer.getUISettings()}},{key:"resetUISettings",value:function(){return this._webViewer.resetUISettings()}},{key:"updateUISettings",value:function(g){return this._webViewer.updateUISettings(g)}},{key:"updateCheckboxStyle",value:function(g){return this._webViewer.UpdateCheckboxStyle(g)}},{key:"updatePageNumberStyle",value:function(g){return this._webViewer.UpdatePageNumberStyle(g)}},{key:"clearSelectedAreas",value:function(){return this._webViewer.clearSelectedAreas()}},{key:"setSelectedAreas",value:function(g){return this._webViewer.setSelectedAreas(g)}},{key:"createCustomElement",value:function(g,w,N){return this._webViewer.createCustomElement(g,w,N)}},{key:"fitWindow",value:function(g){return this._webViewer.SetFitType(g)}},{key:"setButtonClass",value:function(g,w){return this._webViewer.setButtonClass(g,w)}},{key:"setViewMode",value:function(g,w){return this._webViewer.SetViewMode(g,w)}},{key:"bind",value:function(g,w){var N,K,Te;return o.D.isShadowRoot(g)&&(N=document.createElement("div"),g.appendChild(N),this._elements.push(N),g=N),o.D.isDOM(g)&&((N=o.D.getShadowRoot(g))?(K=o.I.Lib.timestamp,(Te=document.createElement("style")).innerHTML=['@import url("',o.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",K,'")'].join(""),N.appendChild(Te),this._elements.push(Te)):N=!1,g.id&&""!=g.id||(g.id=["dwt_",o.D.getRandom()].join(""))),w?this._webViewer.BindTemplate(g,w):this._webViewer.BindView(g)}},{key:"createTemplate",value:function(g,w){return this._stwain._isMobileMode()?this._webViewer.CreateTemplate(g,w):(o.D.Errors.ServiceNotSupport(this._stwain,"createTemplate"),null)}},{key:"show",value:function(){return this._webViewer.show()}},{key:"hide",value:function(){return this._webViewer.hide()}},{key:"unbind",value:function(){return this._webViewer._stwain.Template&&this._stwain.Template._documentTemplate.UnbindView(),o.D.each(this._elements,function(g){g.parentNode&&g.parentNode.removeChild(g)}),this._webViewer.UnbindView()}},{key:"on",value:function(g,w){this._webViewer.on(g,w)}},{key:"off",value:function(g,w){this._webViewer.off(g,w)}}]),Le}();function G(){var Le=this;D(Le,"width",{get:function(){return Le._webViewer.GetWidth()},set:function(g){return Le._webViewer.SetWidth(g)}}),D(Le,"height",{get:function(){return Le._webViewer.GetHeight()},set:function(g){return Le._webViewer.SetHeight(g)}}),D(Le,"idPostfix",{get:function(){return Le._webViewer.GetIdPostfix()}}),D(Le,"background",{get:function(){return Le._webViewer.GetBackground()},set:function(g){return Le._webViewer.SetBackground(g)}}),D(Le,"border",{get:function(){return Le._webViewer.GetBorder()},set:function(g){return Le._webViewer.SetBorder(g)}}),D(Le,"innerBorder",{get:function(){return Le._webViewer.GetInnerBorder()},set:function(g){return Le._webViewer.SetInnerBorder(g)}}),D(Le,"selectedPageBorder",{get:function(){return Le._webViewer.GetSelectedPageBorder()},set:function(g){return Le._webViewer.SetSelectedPageBorder(g)}}),D(Le,"selectedPageBackground",{get:function(){return Le._webViewer.GetSelectedPageBackground()},set:function(g){return Le._webViewer.SetSelectedPageBackground(g)}}),D(Le,"showPageNumber",{get:function(){return Le._webViewer.GetShowPageNumber()},set:function(g){return Le._webViewer.SetShowPageNumber(g)}}),D(Le,"selectedAreaBorderColor",{get:function(){return Le._webViewer.GetSelectedAreaBorderColor()},set:function(g){return Le._webViewer.SetSelectedAreaBorderColor(g)}}),D(Le,"selectionRectAspectRatio",{get:function(){return Le._webViewer.GetSelectionRectAspectRatio()},set:function(g){return Le._webViewer.SetSelectionRectAspectRatio(g)}}),D(Le,"cursor",{get:function(){return Le._webViewer.GetCursor()},set:function(g){return Le._webViewer.SetCursor(g)}}),D(Le,"ifAutoScroll",{get:function(){return Le._webViewer.GetIfAutoScroll()},set:function(g){return Le._webViewer.SetIfAutoScroll(g)}}),D(Le,"pageMargin",{get:function(){return Le._webViewer.GetPageMargin()},set:function(g){return Le._webViewer.SetPageMargin(g)}}),D(Le,"zoom",{get:function(){return Le._webViewer.GetZoom()},set:function(g){return Le._webViewer.SetZoom(g)}}),D(Le,"singlePageMode",{get:function(){return Le._webViewer.GetIfSinglePageMode()},set:function(g){return Le._webViewer.SetIfSinglePageMode(g)}}),D(Le,"acceptDrop",{get:function(){return Le._webViewer.GetAcceptDrop()},set:function(g){return Le._webViewer.SetAcceptDrop(g)}}),D(Le,"allowSlide",{get:function(){return Le._webViewer.GetAllowSlide()},set:function(g){return Le._webViewer.SetAllowSlide(g)}}),D(Le,"autoChangeIndex",{get:function(){return Le._webViewer.GetAutoChangeIndex()},set:function(g){return Le._webViewer.SetAutoChangeIndex(g)}}),D(Le,"showCheckbox",{get:function(){return Le._webViewer.GetShowCheckbox()},set:function(g){return Le._webViewer.SetShowCheckbox(g)}}),D(Le,"selectionMode",{get:function(){return Le._webViewer.GetMultiSelectMode()},set:function(g){return Le._webViewer.SetMultiSelectMode(g)}}),D(Le,"allowPageDragging",{get:function(){return Le._webViewer.GetAllowPageDragging()},set:function(g){return Le._webViewer.SetAllowPageDragging(g)}})}o.D.UI.DWTViewer=M;var L="dynamsoft-default-document",W="rgb(255, 255, 255)",F="transparent",U="1px solid rgb(238, 238, 238)",H="rgb(239, 246, 253)",Z="1px solid rgb(238, 238, 238)",X="rgb(251, 236, 136)",$="1px solid rgb(125,162,206)",V="rgb(199, 222, 252)",De={visibility:"hidden",width:"24px",height:"24px",background:"#ffffff",borderWidth:"2px",borderColor:"#000000",checkMarkColor:"#000000",checkMarkLineWidth:"2px",borderRadius:0,opacity:.5,left:0,top:0,right:"",bottom:"",translateX:"",translateY:""},fe={visibility:"hidden",width:"24px",height:"24px",background:"#ffffff",borderWidth:"1px",borderColor:"#a79898",borderRadius:"50%",opacity:.5,color:"#000000",fontFamily:"sans-serif",fontSize:12,left:"",top:"",right:0,bottom:0,translateX:"",translateY:""},je="url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjQuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMDAgMzAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMDAgMzAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0NDQ0NDQzt9Cgkuc3Qxe2ZpbGw6I0YwRUZGNDt9Cjwvc3R5bGU+CjxnIGlkPSJHcm91cF8xMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOS42NjggLTE3OC41ODkpIj4KCTxnIGlkPSJSZWN0YW5nbGVfMTciPgoJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01OTgsMzQ3LjloLTQuMnYtMmgyLjJ2LTEuOGgyVjM0Ny45eiBNNTg3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTU3NS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01NjMuOSwzNDcuOQoJCQloLTZ2LTJoNlYzNDcuOXogTTU1MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01MzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNTI3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTUxNS45LDM0Ny45aC02di0yaDYKCQkJVjM0Ny45eiBNNTAzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQ5MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00NzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDY3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXoKCQkJIE00NTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDQzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQzMS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00MTkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDA3LjksMzQ3LjkKCQkJaC02di0yaDZWMzQ3Ljl6IE0zOTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNMzgzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTM3OC42LDM0MS4xaC0ydi02aDJWMzQxLjF6IE01OTgsMzM4LjFoLTJ2LTZoMlYzMzguMXoKCQkJIE0zNzguNiwzMjkuMWgtMnYtNmgyVjMyOS4xeiBNNTk4LDMyNi4xaC0ydi02aDJWMzI2LjF6IE0zNzguNiwzMTcuMWgtMnYtNmgyVjMxNy4xeiBNNTk4LDMxNC4xaC0ydi02aDJWMzE0LjF6IE0zNzguNiwzMDUuMWgtMgoJCQl2LTZoMlYzMDUuMXogTTU5OCwzMDIuMWgtMnYtNmgyVjMwMi4xeiBNMzc4LjYsMjkzLjFoLTJ2LTZoMlYyOTMuMXogTTU5OCwyOTAuMWgtMnYtNmgyVjI5MC4xeiBNMzc4LjYsMjgxLjFoLTJ2LTZoMlYyODEuMXoKCQkJIE01OTgsMjc4LjFoLTJ2LTZoMlYyNzguMXogTTM3OC42LDI2OS4xaC0ydi02aDJWMjY5LjF6IE01OTgsMjY2LjFoLTJ2LTZoMlYyNjYuMXogTTM3OC42LDI1Ny4xaC0ydi02aDJWMjU3LjF6IE01OTgsMjU0LjFoLTJ2LTYKCQkJaDJWMjU0LjF6IE0zNzguNiwyNDUuMWgtMnYtNmgyVjI0NS4xeiBNNTk4LDI0Mi4xaC0ydi02aDJWMjQyLjF6IE0zNzguNiwyMzMuMWgtMnYtNmgyVjIzMy4xeiBNNTk4LDIzMC4xaC0ydi02aDJWMjMwLjF6CgkJCSBNMzc4LjYsMjIxLjFoLTJ2LTYuN2g3djJoLTVWMjIxLjF6IE01OTgsMjE4LjFoLTJ2LTEuNmgtMi40di0yaDQuNFYyMTguMXogTTU4Ny42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NzUuNiwyMTYuNWgtNnYtMmg2CgkJCVYyMTYuNXogTTU2My42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNTM5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUyNy42LDIxNi41aC02di0yaDZWMjE2LjV6CgkJCSBNNTE1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUwMy42LDIxNi41aC02di0yaDZWMjE2LjV6IE00OTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDc5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ2Ny42LDIxNi41CgkJCWgtNnYtMmg2VjIxNi41eiBNNDU1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ0My42LDIxNi41aC02di0yaDZWMjE2LjV6IE00MzEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDE5LjYsMjE2LjVoLTZ2LTJoNgoJCQlWMjE2LjV6IE00MDcuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNMzk1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXoiLz4KCTwvZz4KCTxnIGlkPSJGaWxlcy1Gb2xkZXJzX0NvbW1vbi1GaWxlc19jb21tb24tZmlsZS10ZXh0LWFkZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4zNjIgMi4xMzkpIj4KCQk8ZyBpZD0iR3JvdXBfNDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Ny44MDYgMjAxLjk1KSI+CgkJCTxnIGlkPSJjb21tb24tZmlsZS10ZXh0LWFkZCI+CgkJCQk8ZyBpZD0iT3ZhbF8xOCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwNy4yLDExOC40TDEwNy4yLDExOC40TDEwNy4yLDExOC40Yy0xMi4zLDAtMjIuMy0xMC0yMi4zLTIyLjNjMC0xMi4zLDEwLTIyLjMsMjIuMy0yMi4zYzAsMCwwLDAsMCwwCgkJCQkJCWMxMi4zLDAsMjIuMywxMCwyMi4zLDIyLjNjMCw1LjktMi4zLDExLjUtNi41LDE1LjdDMTE4LjgsMTE2LjEsMTEzLjIsMTE4LjQsMTA3LjIsMTE4LjR6IE0xMDcuMiw3NS45CgkJCQkJCUMxMDcuMiw3NS45LDEwNy4yLDc1LjksMTA3LjIsNzUuOUM5Ni4xLDc1LjksODcsODUsODcsOTYuMmMwLDExLjIsOS4xLDIwLjMsMjAuMywyMC4zbDAsMXYtMWM1LjQsMCwxMC41LTIuMSwxNC4zLTUuOQoJCQkJCQljMy44LTMuOCw1LjktOC45LDUuOS0xNC4zQzEyNy41LDg1LDExOC40LDc1LjksMTA3LjIsNzUuOXoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzMiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDcuMiwxMDcuOGMtMC42LDAtMS0wLjQtMS0xVjg1LjVjMC0wLjYsMC40LTEsMS0xczEsMC40LDEsMXYyMS4zQzEwOC4yLDEwNy4zLDEwNy44LDEwNy44LDEwNy4yLDEwNy44egoJCQkJCQkiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzQiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMTcuOSw5Ny4ySDk2LjZjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTMTE4LjQsOTcuMiwxMTcuOSw5Ny4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzNSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTk0LjgsNjUuM0g2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDMzLjdjMC42LDAsMSwwLjQsMSwxUzk1LjQsNjUuMyw5NC44LDY1LjN6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCw3NS45SDYxLjFjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTODMsNzUuOSw4Mi40LDc1Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM3Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODYsNTQuNkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xSDg2YzAuNiwwLDEsMC40LDEsMVM4Ni41LDU0LjYsODYsNTQuNnoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzgiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03NS4zLDg2LjVINjEuMWMtMC42LDAtMS0wLjQtMS0xczAuNC0xLDEtMWgxNC4yYzAuNiwwLDEsMC40LDEsMVM3NS45LDg2LjUsNzUuMyw4Ni41eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzOSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTc1LjMsOTcuMkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDE0LjJjMC42LDAsMSwwLjQsMSwxUzc1LjksOTcuMiw3NS4zLDk3LjJ6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTQwIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCwxMTguNEg1MC41Yy0yLjUsMC00LjUtMi00LjUtNC41VjM5LjRjMC0yLjUsMi00LjUsNC41LTQuNWg0Ny4xYzEuMiwwLDIuNCwwLjUsMy4yLDEuM0wxMTQsNDkuNAoJCQkJCQljMC45LDAuOSwxLjMsMiwxLjMsMy4ydjExLjdjMCwwLjYtMC40LDEtMSwxcy0xLTAuNC0xLTFWNTIuNmMwLTAuNy0wLjMtMS4zLTAuNy0xLjhMOTkuNCwzNy42Yy0wLjUtMC41LTEuMS0wLjctMS44LTAuN0g1MC41CgkJCQkJCWMtMS40LDAtMi41LDEuMS0yLjUsMi41djc0LjRjMCwxLjQsMS4xLDIuNSwyLjUsMi41aDMxLjljMC42LDAsMSwwLjQsMSwxUzgzLDExOC40LDgyLjQsMTE4LjR6Ii8+CgkJCQk8L2c+CgkJCTwvZz4KCQk8L2c+Cgk8L2c+Cgk8ZyBpZD0iQXJyb3dzLURpYWdyYW1zX0RpYWdyYW1zX2RpYWdyYW0tZGFzaC1kb3duLWZhc3QiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yIDQpIj4KCQk8ZyBpZD0iR3JvdXBfMTY1Ij4KCQkJPGcgaWQ9IkxpZ2h0XzE2NSI+CgkJCQk8ZyBpZD0iU2hhcGVfNTM5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjEsNDQzbC00LjItNC4ybDEuNC0xLjRsNC4yLDQuMkw0ODQuMSw0NDN6IE00ODkuNyw0NDIuN2wtMS40LTEuNGw0LjItNC4ybDEuNCwxLjRMNDg5LjcsNDQyLjd6CgkJCQkJCSBNNDc1LjYsNDM0LjVsLTQuMi00LjJsMS40LTEuNGw0LjIsNC4yTDQ3NS42LDQzNC41eiBNNDk4LjIsNDM0LjJsLTEuNC0xLjRsMy45LTMuOWwxLjQsMS40TDQ5OC4yLDQzNC4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQwMi43LDM0Ny42djQuMiIvPgoJCQkJCTxyZWN0IHg9IjQwMS43IiB5PSIzNDcuNiIgY2xhc3M9InN0MCIgd2lkdGg9IjIiIGhlaWdodD0iNC4yIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQxIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAyLjcsMzYwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDAxLjciIHk9IjM2MC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQyIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAzLjMsMzc3LjRjMC44LDIuOCwyLjIsNS4zLDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDA1LjEsMzgzLjNjLTEuMy0xLjctMi4yLTMuNi0yLjgtNS43bDEuOS0wLjVjMC41LDEuOCwxLjMsMy41LDIuNSw1TDQwNS4xLDM4My4zeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQxNC44LDM4OWMyLjgsMC42LDUuNywwLjksOC41LDAuNyIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MjAuNywzOTAuN2MtMi4xLDAtNC4xLTAuMy02LjItMC43bDAuNC0xLjljMS45LDAuNCwzLjgsMC43LDUuNywwLjdMNDIwLjcsMzkwLjd6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ0Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDMxLjgsMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDMxLjgiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ1Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDQ4LjksMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDQ4LjkiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDY2LDM4OS42YzIuOS0wLjIsNS43LDAsOC41LDAuNiIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NzEuOCwzOTAuOGMtMS45LTAuMy0zLjgtMC4zLTUuOC0wLjJsLTAuMS0yYzIuMS0wLjEsNC4yLTAuMSw2LjIsMC4yTDQ3MS44LDM5MC44eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0NyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQ4MS43LDM5NC41YzIsMiwzLjUsNC41LDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjIsMzk5LjljLTAuOC0xLjctMS45LTMuMy0zLjItNC42bDEuNC0xLjRjMS41LDEuNSwyLjcsMy4zLDMuNiw1LjJMNDg0LjIsMzk5Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ4Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDEwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQxMC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDI3LjR2NC4yIi8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQyNy40IiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI0LjIiLz4KCQkJCTwvZz4KCQkJPC9nPgoJCTwvZz4KCTwvZz4KPC9nPgo8L3N2Zz4K) center /auto no-repeat,#F0EFF4",Se=["click","onExitFunc","onMultiSelectionFunc","onAddDocumentFunc","onMultiSelectionCencelFunc","onAllSelectionFunc","onCancelAllSelectionFunc","onSaveFunc","onUploadFunc","bufferChanged","onRemoveSelectedFunc"],rt={toolbars:{topMenu:!0,bottomMenu:!0},groups:{viewMenu:!1,global:!1,viewChange:!1,viewerCorner:!1,pager:!1,myMainTopGroup:{visibility:!0,location:"topMenu",sequence:1},myMainBottomGroup:{visibility:!0,location:"bottomMenu",sequence:1},myMultiSelectionTopGroup:{visibility:!0,location:"topMenu",sequence:2},myMultiSelectionBottomGroup:{visibility:!0,location:"bottomMenu",sequence:2},myGroup3:{visibility:!0,location:"header",sequence:1}},cropStyle:{cropMask:!1,cropBar:!1},buttonResize:{ifResize:!0,maxSize:18,minSize:12},buttons:{exit:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left",sequence:1,onButtonClick:"onExitFunc"},fileName:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dvs-ui-pagePre1 ds-dwt-ui-icon-color",sequence:2,text:""},addDocument:{visibility:!0,location:"myMainBottomGroup",iconClass:"ds-dwt-ui-icon-addImageFromCamera  ds-dwt-ui-icon-color",sequence:1,onButtonClick:"onAddDocumentFunc"},multiSelection:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dwt-ui-icon-selectAll ds-dwt-ui-icon-color ds-dwt-ui-icon-right",sequence:3,onButtonClick:"onMultiSelectionFunc"},cancel:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left",sequence:1,onButtonClick:"onMultiSelectionCencelFunc"},selectCount:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dvs-ui-pagePre2 ds-dwt-ui-icon-color",sequence:2,text:"selected count: "},selectAll:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dwt-ui-mobile-icon-unselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right",sequence:2,onButtonClick:"onAllSelectionFunc"},cancelAllSelect:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dwt-ui-mobile-icon-a-allselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right",sequence:3,onButtonClick:"onCancelAllSelectionFunc"},save:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-icon-saveImage ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onSaveFunc"},upload:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-mobile-icon-a-uploadfromserver ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onUploadFunc"},removeSelected:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-mobile-icon-delete ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onRemoveSelectedFunc"}},content:{besides:{visibility:!1,sequence:4},thumbnail:{backgroundColor:"#fff"}},canvasConfig:{columns:2,rows:2,background:W,pageBackground:"rgb(255,255,255)",allowPageDragging:!0,checkbox:{visibility:De.visibility,width:"30px",height:"30px",background:De.background,borderWidth:"3px",borderColor:"#FE8E14",checkMarkColor:"#FE8E14",checkMarkLineWidth:"3px",borderRadius:De.borderRadius,opacity:1,left:De.left,top:De.top,right:De.right,bottom:De.bottom,translateX:De.translateX,translateY:De.translateY},pageNumber:{visibility:"visible",width:"36px",height:"36px",background:fe.background,borderWidth:fe.borderWidth,borderColor:fe.borderColor,borderRadius:fe.borderRadius,opacity:1,color:fe.color,fontFamily:fe.fontFamily,fontSize:18,left:fe.left,top:fe.top,right:fe.right,bottom:fe.bottom,translateX:fe.translateX,translateY:fe.translateY}},thumbnail:{showThumbnailControl:!1,selectedBorderColor:"#7DA2CE",selectedBackgroundColor:"rgb(199, 222, 252)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)"}},tt=function(){function Le(g,w,N,K){(0,s.Z)(this,Le),this._ImgManager=w,this._stwain=w._stwain,this._webViewer=g,this._template=N,this._documentConfiguration=K}return(0,f.Z)(Le,[{key:"BindView",value:function(N){var w=this;N=N&&"DIV"==N.nodeName?N:document.getElementById(N),o.D.isUndefined(N)||o.D.isNull(N)?(w.newContainer=document.createElement("div"),document.body.appendChild(w.newContainer),document.body.insertBefore(w.newContainer,document.body.firstElementChild),w.newContainer.style.width="100%",w.newContainer.style.height="100%",w.newContainer.style.position="fixed",w.newContainer.style.left="0px",w.newContainer.style.top="0px",w.bFullScreen=!0):(w.newContainer=N,w.bFullScreen=!1),w._webViewer.BindView(w.newContainer),w._webViewer.updateUISettings(rt)}},{key:"initView",value:function(){var g=this,N=((N=document.createElement("div")).id="btnCapture"+g._webViewer.myViewer.postfix,N.className="ds-dwt-ui-icon-addImageFromCamera dynamsoft-dwt-btnCapture",N.onclick=function(){g._webViewer.myViewer.emit("onAddDocumentFunc")},0==g._webViewer.GetHowManyImagesInBuffer()&&g._webViewer.SetBackground(je),(w=document.getElementById("WebViewer"+g._webViewer.myViewer.postfix))&&w.appendChild(N),g.setMultiSelectMode(!1),g.__bindButtonEvents(),g._webViewer.SetCursor("pointer"),g.DWTCustomWrapper=document.createElement("div"),o.I.Lib.env.isMobileViewer()),w=o.I.Lib.env.isPadViewer();N||w?g.customElement=g._webViewer.createCustomElement(g.DWTCustomWrapper,"right",!0):(g.DWTCustomWrapper.style.height="100%",g.DWTCustomWrapper.style.width="20%",g.customElement=g._webViewer.createCustomElement(g.DWTCustomWrapper,"right",!1)),(N=document.getElementById("fileName"+g._webViewer.myViewer.postfix))&&(N.style.width="80%",N.style.whiteSpace="nowrap"),(w=document.getElementById("selectCount"+g._webViewer.myViewer.postfix))&&(w.style.width="200px",w.style.whiteSpace="nowrap"),(N=document.getElementById("bottomMenu"+g._webViewer.myViewer.postfix))&&(N.style.border="0",N.style.display="none")}},{key:"UnbindView",value:function(){var g=this,w=(g._unbindButtonEvents(),g._documentEditor&&g._documentEditor.dispose(),document.getElementById("btnCapture"+g._webViewer.myViewer.postfix));return w&&(w.onclick=function(){}),g.newContainer&&1==g.bFullScreen&&this.newContainer.parentNode&&0<g.newContainer.childNodes.length&&g.newContainer.parentNode.removeChild(g.newContainer),g.newContainer="",!(g.DWTCustomWrapper="")}},{key:"setMultiSelectMode",value:function(g){var w=document.getElementById("myMainTopGroup"+this._webViewer.GetIdPostfix()),N=document.getElementById("myMainBottomGroup"+this._webViewer.GetIdPostfix()),K=document.getElementById("myMultiSelectionTopGroup"+this._webViewer.GetIdPostfix()),Te=document.getElementById("myMultiSelectionBottomGroup"+this._webViewer.GetIdPostfix());g?(w.style.display="none",N.style.display="none",K.style.display="",Te.style.display=""):(w.style.display="",N.style.display="",K.style.display="none",Te.style.display="none")}},{key:"__bindButtonEvents",value:function(){var g=this;o.I.Lib.each(Se,function(w){g._webViewer.on(w,function(N,K){g[w](N,K)})})}},{key:"_unbindButtonEvents",value:function(){var g=this;o.D.each(Se,function(w){g._webViewer.off(w)})}},{key:"bufferChanged",value:function(g){var w=this,N=("shift"!=g.action&&"remove"!=g.action&&"add"!=g.action||(N=document.getElementById("selectCount"+w._webViewer.GetIdPostfix()),g.selectedIds&&N&&(N.innerText="selected count: "+g.selectedIds.length),w.setSelectAllButtonEnable(!g.selectedIds||g.selectedIds.length!=w._stwain.HowManyImagesInBuffer||0==w._stwain.HowManyImagesInBuffer)),g.selectedIds&&0==g.selectedIds.length?(w._webViewer.setButtonClass("save","ds-dwt-ui-icon-color-grey"),w._webViewer.setButtonClass("upload","ds-dwt-ui-icon-color-grey"),w._webViewer.setButtonClass("removeSelected","ds-dwt-ui-icon-color-grey")):(w._webViewer.setButtonClass("save","ds-dwt-ui-icon-color"),w._webViewer.setButtonClass("upload","ds-dwt-ui-icon-color"),w._webViewer.setButtonClass("removeSelected","ds-dwt-ui-icon-color")),document.getElementById("btnCapture"+w._webViewer.myViewer.postfix));N&&""==N.style.display&&(o.D.isUndefined(g.imageIds)||g.imageIds&&0==g.imageIds.length)?w._webViewer.SetBackground(je):w._webViewer.SetBackground(W)}},{key:"Dynamsoft_DocumentTemplate_OnVideoClosed",value:function(){this._webViewer.OpenFile(this._webViewer.currentFileName)}},{key:"click",value:function(g){-1!=g.index&&this._webViewer.GetMultiSelectMode()==o.I.DWT.EnumDWT_SelectionMode.Single&&0<this._stwain.HowManyImagesInBuffer&&(g=this._webViewer.createDocumentEditor(this._documentConfiguration))&&g.show()}},{key:"onExitFunc",value:function(){this._template.onExitFunc()}},{key:"ifShowDocumentTemplate",value:function(g){this.newContainer&&(this.newContainer.style.display=g?"":"none")}},{key:"setTemplateTitle",value:function(g){var w=o.I.Lib.env.isMobileViewer(),N=document.getElementById("fileName"+this._webViewer.myViewer.postfix);N&&(N.innerText=w&&26<g.length?g.substring(0,10)+"..."+g.substring(g.length-13,g.length):!w&&100<g.length?g.substring(0,80)+"..."+g.substring(g.length-17,g.length):g)}},{key:"onMultiSelectionFunc",value:function(){this._MultiSelectionInner([])}},{key:"_MultiSelectionInner",value:function(g){var w=this,N=document.getElementById("bottomMenu"+w._webViewer.myViewer.postfix);N&&(N.style.display=""),w._stwain.SelectImages(g),w.setMultiSelectMode(!0),w._webViewer.GetShowCheckbox()||(document.getElementById("selectCount"+w._webViewer.GetIdPostfix()).innerText="selected count: "+w._stwain.SelectedImagesIndices.length,w._webViewer.SetShowCheckbox(!0),w.setSelectAllButtonEnable(w._stwain.SelectedImagesIndices.length!=w._stwain.HowManyImagesInBuffer||0==w._stwain.HowManyImagesInBuffer),(N=document.getElementById("btnCapture"+w._webViewer.myViewer.postfix))&&(N.style.display="none",w._webViewer.SetBackground(W)),w._template&&!o.I.Lib.isFunction(w._template.onSaveFunc)&&(g=document.getElementById("save"+w._webViewer.myViewer.postfix))&&(g.style.display="none"),w._template&&!o.I.Lib.isFunction(w._template.onUploadFunc)&&(N=document.getElementById("upload"+w._webViewer.myViewer.postfix))&&(N.style.display="none"))}},{key:"onAddDocumentFunc",value:function(){this._template.onAddDocumentFunc()}},{key:"onMultiSelectionCencelFunc",value:function(){var g;this.setMultiSelectMode(!1),this._webViewer.SetShowCheckbox(!1),this._stwain.SelectImages([]),(g=document.getElementById("bottomMenu"+this._webViewer.myViewer.postfix))&&(g.style.border="0",g.style.display="none"),(g=document.getElementById("btnCapture"+this._webViewer.myViewer.postfix))&&(g.style.display="",0==this._webViewer.GetHowManyImagesInBuffer()?this._webViewer.SetBackground(je):this._webViewer.SetBackground(W)),this._webViewer.SetViewMode(2,2)}},{key:"onAllSelectionFunc",value:function(){this._stwain.SelectAllImages(),this.setSelectAllButtonEnable(!1)}},{key:"onCancelAllSelectionFunc",value:function(){this._stwain.SelectImages([]),this.setSelectAllButtonEnable(!0)}},{key:"setSelectAllButtonEnable",value:function(g){var w=document.getElementById("cancelAllSelect"+this._webViewer.GetIdPostfix()),N=document.getElementById("selectAll"+this._webViewer.GetIdPostfix());N&&w&&(g?(N.style.display="",w.style.display="none"):(N.style.display="none",w.style.display=""))}},{key:"onSaveFunc",value:function(){0<this._stwain.SelectedImagesIndices.length&&o.I.Lib.isFunction(this._template.onSaveFunc)&&this._template.onSaveFunc()}},{key:"onUploadFunc",value:function(){0<this._stwain.SelectedImagesIndices.length&&o.I.Lib.isFunction(this._template.onUploadFunc)&&this._template.onUploadFunc()}},{key:"onRemoveSelectedFunc",value:function(){0<this._stwain.SelectedImagesIndices.length&&this._template.onRemoveSelectedFunc()}},{key:"getCustomElement",value:function(){return this.customElement}}]),Le}(),de=(o.D.UI.DocumentTemplate=tt,function(){function Le(g,w,N){(0,s.Z)(this,Le),this._webViewer=g,this._ImgManager=w,this._documentTemplate=new tt(g,w,this,N)}return(0,f.Z)(Le,[{key:"getCustomElement",value:function(){return this._documentTemplate.getCustomElement()}},{key:"onExitFunc",value:function(){this._webViewer.hide()}},{key:"onAddDocumentFunc",value:function(){var g=this;g._documentTemplate._documentConfiguration?g._webViewer.showVideoInner(g._documentTemplate._documentConfiguration):""==g._webViewer._documentScanConfiguration?0==g._documentTemplate.bFullScreen?(g._documentTemplate.newContainer.style.width=g._webViewer.GetWidth()+"px",g._documentTemplate.newContainer.style.height=g._webViewer.GetHeight()+"px",g._webViewer.showVideoInner({element:g._documentTemplate.newContainer})):g._webViewer.showVideoInner():g._webViewer.showVideoInner(g._webViewer._documentScanConfiguration)}},{key:"onRemoveSelectedFunc",value:function(){0<this._ImgManager._stwain.SelectedImagesIndices.length&&this._ImgManager._stwain.RemoveAllSelectedImages()}}]),Le}());function _t(Le){if(null!=Le){var g=Le;if(o.D.isString(g)&&(g=g.toLowerCase()),"hidden"===Le||!1===Le)return!1}return!0}o.D.UI.Template=de;var be,it,mt,Ce=function(){function Le(Te,w,N){(0,s.Z)(this,Le),(0,c.Z)(this,"bShowDocumentEdit",!1);var K=this;0==(K._webViewer=Te,K._stwain=Te._stwain,K._webViewer.mydocEditManager||K._webViewer.createDocumentEditManager(),K._mydocEditManager=Te.mydocEditManager,K._webViewer.notBindCameraForDocumentEditManager()&&K._webViewer.bindCameraForDocumentEditManager(),Te=K._webViewer.GetCurrentFileName()).length&&(K._webViewer.CreateFile(L),K._webViewer.OpenFile(L),Te=L),N.fileName=Te,N.viewerUid=K._webViewer.myViewer.uid,K.myDocumentEditor=K._mydocEditManager.createEditPage(w,N),K.bShowDocumentEdit=_t(N.visibility)&&_t(N.documentEditorSettings.visibility),K.myDocumentEditor||o.D.Errors.WebviewerError(K._webViewer._stwain,K._webViewer.mydocEditManager.Error.errorMessage,K._webViewer.mydocEditManager.Error.errorCode),K.bDispose=!1}return(0,f.Z)(Le,[{key:"dispose",value:function(){var g=this,w=!1;return g.bShowDocumentEdit=!1,g.myDocumentEditor&&g.myDocumentEditor.hide(),g._mydocEditManager?g.myDocumentEditor.isDestroyed?(o.D.Errors.DocumentEditorDispose(g._webViewer._stwain),g.myDocumentEditor=void 0,g._webViewer._documentEditor=void 0,g._webViewer._documentEditorInner=void 0,g._mydocEditManager=null,g._stwain=null,!(g.bDispose=!0)):((w=g._mydocEditManager.removeEditPage(g.myDocumentEditor))&&(g.myDocumentEditor=void 0,g._webViewer._documentEditor=void 0,g._webViewer._documentEditorInner=void 0,g._mydocEditManager=null,g._stwain=null,g.bDispose=!0),w):(g.bDispose?o.D.Errors.DocumentEditorDispose(g._webViewer._stwain):o.D.Errors.DocumentEditorNotExist(g._webViewer._stwain),!1)}},{key:"show",value:function(){return this.myDocumentEditor?this.myDocumentEditor.isDestroyed?(o.D.Errors.DocumentEditorDispose(this._webViewer._stwain),!1):(this.bShowDocumentEdit||this.myDocumentEditor.show(),this.bShowDocumentEdit=!0):(this.bDispose?o.D.Errors.DocumentEditorDispose(this._webViewer._stwain):o.D.Errors.DocumentEditorNotExist(this._webViewer._stwain),!1)}},{key:"hide",value:function(){return this.bShowDocumentEdit=!1,this.myDocumentEditor?this.myDocumentEditor.isDestroyed?(o.D.Errors.DocumentEditorDispose(this._webViewer._stwain),!1):(this.myDocumentEditor.hide(),!0):(this.bDispose?o.D.Errors.DocumentEditorDispose(this._webViewer._stwain):o.D.Errors.DocumentEditorNotExist(this._webViewer._stwain),!1)}},{key:"syncFile",value:function(g){this._mydocEditManager.syncFile(g)}}]),Le}(),we=(o.D.UI.DocumentEditorInner=Ce,function(){function Le(g,w,N){(0,s.Z)(this,Le),(0,c.Z)(this,"_documentEditorInner",void 0),(0,c.Z)(this,"myDocumentEditor",void 0),this._documentEditorInner=new Ce(g,w,N),this.myDocumentEditor=this._documentEditorInner.myDocumentEditor}return(0,f.Z)(Le,[{key:"show",value:function(){return this._documentEditorInner.show()}},{key:"hide",value:function(){return this._documentEditorInner.hide()}},{key:"dispose",value:function(){return this._documentEditorInner.dispose()}},{key:"syncFile",value:function(g){return this._documentEditorInner.syncFile(g)}}]),Le}()),Ve=(o.D.UI.DocumentEditor=we,o.I.navInfoSync),bt={getImageUrl:function(Le,g,w,N,K){return Le=[Le],o.D.isNumber(g)&&g<0?"":(null!=g&&(Le.push("&index="),Le.push(g)),Le.push("&width="),Le.push(w),Le.push("&height="),Le.push(N),Le.push("&ticks="),Le.push(K||l()()),Le.join(""))},getUrlByAct:function(Le,g,w){return Le=[Le],null!=g&&(Le.push("&index="),Le.push(g)),w&&(Le.push("&act="),Le.push(w)),Le.push("&ticks="),Le.push(l()()),Le.join("")},output:function(Le,g){o.I.DWT.Debug&&o.D.log(g)},print:function(Le){var g=850,w=1120,N=0,K=0,Te=0,Fe="";for(o.D.product.bHTML5Edition&&(Ve.bIE&&(w=1160),Ve.bFirefox&&(w=1150)),N=0;N<Le.length;N++){var Ke=w,Je=(qt=Le[N]).Width,Ye=qt.Height,qt=qt.Url,xe=g/(Je=Je<=0?g:Je),ut=Ke/(Ye=Ye<=0?Ke:Ye);xe<ut?Ke=a()(Ye*xe):ut<xe&&(g=a()(Je*ut)),K+=Je,Te+=Ye,Fe=Fe+'<div style="width:'+g+"px;height:"+Ke+'px"><img id="D_img'+N+'" src="'+qt+'" style="position:relative;left:0px;top:0px;width: '+g+"px;height: "+Ke+'px" referrerpolicy="strict-origin-when-cross-origin" /></div>'}var ue=["alwaysRaised=yes,z-look=yes,top=0,left=0,toolbar=no,menubar=no,location=no,status=no,width=",K,",height=",Te].join(""),se=window.open("about:blank","_blank",ue);se&&(se.document.write('<html><body id="D_img">'+Fe+"</body></html>"),se.document.close(),se.focus(),(ue=se.document.getElementById("D_img"))?ue.onload=function(){se.print(),o.D.log("print image...ok")}:o.D.log("cannot find image"))}},At=(o.D.html5.Funs2=bt,document),St=window,Pe=o.I.DWT,ae=Pe.CustomizableDisplayInfo.dialogText,Ze=bt,Ne={isFunction:function(Le){return Le&&"function"==typeof Le},addClass:function(Le,g){(Le=o.D.one(Le))&&0<Le.length&&Le.addClass(g)},removeClass:function(Le,g){(Le=o.D.one(Le))&&0<Le.length&&Le.removeClass(g)},output:function(Le,g){o.I.DWT.Debug&&o.D.log(g)},getTop:function(Le){var g=Le.offsetTop;return null!=Le.offsetParent&&(g+=Ne.getTop(Le.offsetParent)),g},getLeft:function(Le){var g=Le.offsetLeft;return null!=Le.offsetParent&&(g+=Ne.getLeft(Le.offsetParent)),g}},Re=(o.D._safePromptCustomMsg(function(){ae=Pe.CustomizableDisplayInfo.dialogText,it={toolbars:{bottomMenu:!1,header:!1,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},myGroup:{visibility:!0,location:"topMenu",sequence:1}},buttonResize:{ifResize:!0,maxSize:22,minSize:16},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},previousImage:{visibility:!0,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-preImage",sequence:1,onButtonClick:"OnPreviousImage"},nextImage:{visibility:!0,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-nextImage",sequence:2,onButtonClick:"OnNextImage"},blank1:{visibility:!0,location:"myGroup",sequence:3},acquire:{visibility:1==(be=Pe.CustomizableDisplayInfo.buttons).visibility.scan,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-acquire",sequence:4,onButtonClick:"OnAcquire"},loadImages:{visibility:1==be.visibility.load,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:5,onButtonClick:"OnLoadImage"},print:{visibility:1==be.visibility.print,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-printImage",sequence:6,onButtonClick:"OnPrint"},blank2:{visibility:!!(be.visibility.scan||be.visibility.load||be.visibility.print),location:"myGroup",sequence:7},removeAll:{visibility:1==be.visibility.removeall,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:8,onButtonClick:"OnRemoveAll"},remove:{visibility:1==be.visibility.removeselected,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:9,onButtonClick:"OnRemove"},blank3:{visibility:!(!be.visibility.removeall&&!be.visibility.removeselected),location:"myGroup",sequence:10},rotateLeft:{visibility:1==be.visibility.rotateleft,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:11,onButtonClick:"OnRotateLeft"},rotate:{visibility:1==be.visibility.rotate,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotate",sequence:12,onButtonClick:"OnRotate"},rotateRight:{visibility:1==be.visibility.rotateright,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:13,onButtonClick:"OnRotateRight"},deskew:{visibility:1==be.visibility.deskew,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-deskew",sequence:14,onButtonClick:"OnDeskew"},blank4:{visibility:!!(be.visibility.rotateleft||be.visibility.rotate||be.visibility.rotateright||be.visibility.deskew),location:"myGroup",sequence:15},crop:{visibility:1==be.visibility.crop,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:16,onButtonClick:"OnCrop"},cut:{visibility:1==be.visibility.cut,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:17,onButtonClick:"OnErase"},changeImageSize:{visibility:1==be.visibility.changeimagesize,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-changeImageSize",sequence:18,onButtonClick:"OnChangeImageSize"},flip:{visibility:1==be.visibility.flip,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:19,onButtonClick:"OnFlip"},mirror:{visibility:1==be.visibility.mirror,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:20,onButtonClick:"OnMirror"},blank5:{visibility:!!(be.visibility.crop||be.visibility.cut||be.visibility.changeimagesize||be.visibility.flip||be.visibility.mirror),location:"myGroup",sequence:21},zoomin:{visibility:1==be.visibility.zoomin,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomin",sequence:22,onButtonClick:"OnZoomin"},originalsize:{visibility:1==be.visibility.originalsize,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-originalsize",sequence:23,onButtonClick:"OnOriginalsize"},zoomout:{visibility:1==be.visibility.zoomout,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomout",sequence:24,onButtonClick:"OnZoomout"},blank6:{visibility:!!(be.visibility.zoomin||be.visibility.originalsize||be.visibility.zoomout||be.visibility.stretch),location:"myGroup",sequence:26},fitPage:{visibility:1==be.visibility.fit,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fullWebType",sequence:27,onButtonClick:"OnFitPage"},fitWidth:{visibility:1==be.visibility.fitw,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitWidthType",sequence:28,onButtonClick:"OnFitWidth"},fitHeight:{visibility:1==be.visibility.fith,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitHeightType",sequence:29,onButtonClick:"OnFitHeight"},blank7:{visibility:!!(be.visibility.fit||be.visibility.fitw||be.visibility.fith),location:"myGroup",sequence:30},hand:{visibility:1==be.visibility.hand,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:31,onButtonClick:"OnHand"},select:{visibility:1==be.visibility.rectselect,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:32,onButtonClick:"OnSelect"},clicktozoomin:{visibility:1==be.visibility.zoom,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-clicktozoomin",sequence:33,onButtonClick:"OnClicktozoomin"},blank8:{visibility:!!(be.visibility.hand||be.visibility.rectselect||be.visibility.zoom),location:"myGroup",sequence:34},restore:{visibility:1==be.visibility.restore,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:35,onButtonClick:"OnRestore"},save:{visibility:1==be.visibility.save,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:36,onButtonClick:"OnSave"},close:{visibility:1==be.visibility.close,location:"topMenuRight",iconClass:"d-icon-font ds-dwt-ui-icon-close",sequence:1,onButtonClick:"OnClose"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)"},tipsConfig:{previousImage:be.titles.previous,nextImage:be.titles.next,acquire:be.titles.scan,loadImages:be.titles.load,print:be.titles.print,removeAll:be.titles.removeall,remove:be.titles.removeselected,rotateLeft:be.titles.rotateleft,rotate:be.titles.rotate,rotateRight:be.titles.rotateright,deskew:be.titles.deskew,crop:be.titles.crop,cut:be.titles.cut,changeImageSize:be.titles.changeimagesize,flip:be.titles.flip,mirror:be.titles.mirror,zoomin:be.titles.zoomin,originalsize:be.titles.originalsize,zoomout:be.titles.zoomout,stretch:be.titles.stretch,fitPage:be.titles.fit,fitWidth:be.titles.fitw,fitHeight:be.titles.fith,hand:be.titles.hand,select:be.titles.rectselect,clicktozoomin:be.titles.zoom,restore:be.titles.restore,save:be.titles.save,close:be.titles.close},canvasConfig:{selectedPageBackground:F,selectedPageBorder:"",hoverPageBackground:F,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""},mt={toolbars:{header:!0,bottomMenu:!0,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},global:{visibility:!1},viewChange:{visibility:!1},viewerCorner:{visibility:!1},pager:{visibility:!1},myGroup:{visibility:!0,location:"topMenu",sequence:1},myGroup2:{visibility:!0,location:"bottomMenu",sequence:1},myGroup3:{visibility:!0,location:"header",sequence:1},myGroup4:{visibility:!0,location:"bottomMenu",sequence:2}},buttonResize:{ifResize:!0,maxSize:32,minSize:26},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},print:{visibility:!1},loadImages:{visibility:1==be.visibility.load,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:1,onButtonClick:"OnLoadImage"},close:{visibility:1==be.visibility.close,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-close ds-dwt-ui-icon-close-right",sequence:2,onButtonClick:"OnClose"},rotateLeft:{visibility:1==be.visibility.rotateleft,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:1,onButtonClick:"OnRotateLeft"},rotateRight:{visibility:1==be.visibility.rotateright,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:2,onButtonClick:"OnRotateRight"},flip:{visibility:1==be.visibility.flip,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:3,onButtonClick:"OnFlip"},mirror:{visibility:1==be.visibility.mirror,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:4,onButtonClick:"OnMirror"},crop:{visibility:1==be.visibility.crop,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:5,onButtonClick:"OnCrop"},cut:{visibility:1==be.visibility.cut,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:6,onButtonClick:"OnErase"},hand:{visibility:1==be.visibility.hand,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:7,onButtonClick:"OnHand"},select:{visibility:1==be.visibility.rectselect,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:8,onButtonClick:"OnSelect"},firstPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageStart",sequence:1,onButtonClick:"OnFirstImage"},previousPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pagePre",sequence:2,onButtonClick:"OnPreviousImage"},pagination:{visibility:!0,location:"myGroup2",sequence:3},nextPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageNext",sequence:4,onButtonClick:"OnNextImage"},lastPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageEnd",sequence:5,onButtonClick:"OnLastImage"},removeAll:{visibility:1==be.visibility.removeall,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:7,onButtonClick:"OnRemoveAll"},remove:{visibility:1==be.visibility.removeselected,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:8,onButtonClick:"OnRemove"},restore:{visibility:1==be.visibility.restore,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:10,onButtonClick:"OnRestore"},save:{visibility:1==be.visibility.save,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:11,onButtonClick:"OnSave"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)",pageBorderColor:"rgb(204, 204, 204)"},tipsConfig:{previousImage:be.titles.previous,nextImage:be.titles.next,acquire:be.titles.scan,loadImages:be.titles.load,print:be.titles.print,removeAll:be.titles.removeall,remove:be.titles.removeselected,rotateLeft:be.titles.rotateleft,rotate:be.titles.rotate,rotateRight:be.titles.rotateright,deskew:be.titles.deskew,crop:be.titles.crop,cut:be.titles.cut,changeImageSize:be.titles.changeimagesize,flip:be.titles.flip,mirror:be.titles.mirror,zoomin:be.titles.zoomin,originalsize:be.titles.originalsize,zoomout:be.titles.zoomout,stretch:be.titles.stretch,fitPage:be.titles.fit,fitWidth:be.titles.fitw,fitHeight:be.titles.fith,hand:be.titles.hand,select:be.titles.rectselect,clicktozoomin:be.titles.zoom,restore:be.titles.restore,save:be.titles.save,close:be.titles.close},canvasConfig:{selectedPageBackground:F,selectedPageBorder:"",hoverPageBackground:F,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""}}),function(){function Le(K,w){(0,s.Z)(this,Le);var N=this,Te=(N._webViewer=K,N.mydvs=K.mydvs,N._stwain=K._stwain,N.bShowImageEditForFullScreen=!1,N.bCouldBeTimeConsuming=!1,N.bShowImageEdit=!1,N.promptToSaveChange=!0,K=it,N.bMobile=!1);N._stwain._isPC()||(N.bPadViewer||(K=mt,Te=!0),N.bMobile=!0),K=N.updateWebviewerConfig(K,w,Te),N.myImageEditor=N.mydvs.ViewControl.createViewer({container:"",displayMode:"single",uiConfig:K,scrollerConfig:{}},N._webViewer.myViewer.uid),N.myImageEditor.maxZoom=50,0!=N._webViewer.mydvs.Error.errorCode&&o.D.Errors.WebviewerError(N._webViewer._stwain,N._webViewer.mydvs.Error.errorMessage,N._webViewer.mydvs.Error.errorCode),N.bDispose=!1,N._BindImageEditorEvents(),N._bindView(),N._currentIndex=N._webViewer.GetCurrentIndex()}return(0,f.Z)(Le,[{key:"updateWebviewerConfig",value:function(g,w,N){return w&&(this.editorSettings=w,o.D.isUndefined(w.buttons)||(o.D.isUndefined(w.buttons.titles)||(o.D.isUndefined(w.buttons.titles.previous)||(g.tipsConfig.previousImage=w.buttons.titles.previous),o.D.isUndefined(w.buttons.titles.next)||(g.tipsConfig.nextImage=w.buttons.titles.next),o.D.isUndefined(w.buttons.titles.print)||(g.tipsConfig.print=w.buttons.titles.print),o.D.isUndefined(w.buttons.titles.scan)||(g.tipsConfig.acquire=w.buttons.titles.scan),o.D.isUndefined(w.buttons.titles.load)||(g.tipsConfig.loadImages=w.buttons.titles.load),o.D.isUndefined(w.buttons.titles.rotateleft)||(g.tipsConfig.rotateLeft=w.buttons.titles.rotateleft),o.D.isUndefined(w.buttons.titles.rotate)||(g.tipsConfig.rotate=w.buttons.titles.rotate),o.D.isUndefined(w.buttons.titles.rotateright)||(g.tipsConfig.rotateRight=w.buttons.titles.rotateright),o.D.isUndefined(w.buttons.titles.deskew)||(g.tipsConfig.deskew=w.buttons.titles.deskew),o.D.isUndefined(w.buttons.titles.crop)||(g.tipsConfig.crop=w.buttons.titles.crop),o.D.isUndefined(w.buttons.titles.cut)||(g.tipsConfig.cut=w.buttons.titles.cut),o.D.isUndefined(w.buttons.titles.changeimagesize)||(g.tipsConfig.changeImageSize=w.buttons.titles.changeimagesize),o.D.isUndefined(w.buttons.titles.flip)||(g.tipsConfig.flip=w.buttons.titles.flip),o.D.isUndefined(w.buttons.titles.mirror)||(g.tipsConfig.mirror=w.buttons.titles.mirror),o.D.isUndefined(w.buttons.titles.zoomin)||(g.tipsConfig.zoomin=w.buttons.titles.zoomin),o.D.isUndefined(w.buttons.titles.originalsize)||(g.tipsConfig.originalsize=w.buttons.titles.originalsize),o.D.isUndefined(w.buttons.titles.zoomout)||(g.tipsConfig.zoomout=w.buttons.titles.zoomout),o.D.isUndefined(w.buttons.titles.stretch)||(g.tipsConfig.stretch=w.buttons.titles.stretch),o.D.isUndefined(w.buttons.titles.fit)||(g.tipsConfig.fitPage=w.buttons.titles.fit),o.D.isUndefined(w.buttons.titles.fitw)||(g.tipsConfig.fitWidth=w.buttons.titles.fitw),o.D.isUndefined(w.buttons.titles.fith)||(g.tipsConfig.fitHeight=w.buttons.titles.fith),o.D.isUndefined(w.buttons.titles.hand)||(g.tipsConfig.hand=w.buttons.titles.hand),o.D.isUndefined(w.buttons.titles.rectselect)||(g.tipsConfig.select=w.buttons.titles.rectselect),o.D.isUndefined(w.buttons.titles.zoom)||(g.tipsConfig.clicktozoomin=w.buttons.titles.zoom),o.D.isUndefined(w.buttons.titles.restore)||(g.tipsConfig.restore=w.buttons.titles.restore),o.D.isUndefined(w.buttons.titles.save)||(g.tipsConfig.save=w.buttons.titles.save),o.D.isUndefined(w.buttons.titles.close)||(g.tipsConfig.close=w.buttons.titles.close),o.D.isUndefined(w.buttons.titles.removeall)||(g.tipsConfig.removeAll=w.buttons.titles.removeall),o.D.isUndefined(w.buttons.titles.removeselected)||(g.tipsConfig.remove=w.buttons.titles.removeselected)),o.D.isUndefined(w.buttons.visibility)||(N?(g.buttons.loadImages.visibility=!!o.D.isUndefined(w.buttons.visibility.load)||1==w.buttons.visibility.load,g.buttons.close.visibility=!!o.D.isUndefined(w.buttons.visibility.close)||1==w.buttons.visibility.close,g.buttons.rotateLeft.visibility=!!o.D.isUndefined(w.buttons.visibility.rotateleft)||1==w.buttons.visibility.rotateleft,g.buttons.rotateRight.visibility=!!o.D.isUndefined(w.buttons.visibility.rotateright)||1==w.buttons.visibility.rotateright,g.buttons.flip.visibility=!!o.D.isUndefined(w.buttons.visibility.flip)||1==w.buttons.visibility.flip,g.buttons.mirror.visibility=!!o.D.isUndefined(w.buttons.visibility.mirror)||1==w.buttons.visibility.mirror,g.buttons.crop.visibility=!!o.D.isUndefined(w.buttons.visibility.crop)||1==w.buttons.visibility.crop,g.buttons.cut.visibility=!!o.D.isUndefined(w.buttons.visibility.cut)||1==w.buttons.visibility.cut,g.buttons.hand.visibility=!!o.D.isUndefined(w.buttons.visibility.hand)||1==w.buttons.visibility.hand,g.buttons.select.visibility=!!o.D.isUndefined(w.buttons.visibility.rectselect)||1==w.buttons.visibility.rectselect,g.buttons.removeAll.visibility=!!o.D.isUndefined(w.buttons.visibility.removeall)||1==w.buttons.visibility.removeall,g.buttons.remove.visibility=!!o.D.isUndefined(w.buttons.visibility.removeselected)||1==w.buttons.visibility.removeselected,g.buttons.restore.visibility=!!o.D.isUndefined(w.buttons.visibility.restore)||1==w.buttons.visibility.restore,g.buttons.save.visibility=!!o.D.isUndefined(w.buttons.visibility.save)||1==w.buttons.visibility.save):(g.buttons.acquire.visibility=!!o.D.isUndefined(w.buttons.visibility.scan)||1==w.buttons.visibility.scan,g.buttons.loadImages.visibility=!!o.D.isUndefined(w.buttons.visibility.load)||1==w.buttons.visibility.load,g.buttons.print.visibility=!!o.D.isUndefined(w.buttons.visibility.print)||1==w.buttons.visibility.print,g.buttons.blank2.visibility=!!(g.buttons.acquire.visibility||g.buttons.loadImages.visibility||g.buttons.print.visibility),g.buttons.removeAll.visibility=!!o.D.isUndefined(w.buttons.visibility.removeall)||1==w.buttons.visibility.removeall,g.buttons.remove.visibility=!!o.D.isUndefined(w.buttons.visibility.removeselected)||1==w.buttons.visibility.removeselected,g.buttons.blank3.visibility=!(!g.buttons.removeAll.visibility&&!g.buttons.remove.visibility),g.buttons.rotateLeft.visibility=!!o.D.isUndefined(w.buttons.visibility.rotateleft)||1==w.buttons.visibility.rotateleft,g.buttons.rotate.visibility=!!o.D.isUndefined(w.buttons.visibility.rotate)||1==w.buttons.visibility.rotate,g.buttons.rotateRight.visibility=!!o.D.isUndefined(w.buttons.visibility.rotateright)||1==w.buttons.visibility.rotateright,g.buttons.deskew.visibility=!!o.D.isUndefined(w.buttons.visibility.deskew)||1==w.buttons.visibility.deskew,g.buttons.blank4.visibility=!!(g.buttons.rotateLeft.visibility||g.buttons.rotate.visibility||g.buttons.rotateRight.visibility||g.buttons.deskew.visibility),g.buttons.crop.visibility=!!o.D.isUndefined(w.buttons.visibility.crop)||1==w.buttons.visibility.crop,g.buttons.cut.visibility=!!o.D.isUndefined(w.buttons.visibility.cut)||1==w.buttons.visibility.cut,g.buttons.changeImageSize.visibility=!!o.D.isUndefined(w.buttons.visibility.changeimagesize)||1==w.buttons.visibility.changeimagesize,g.buttons.flip.visibility=!!o.D.isUndefined(w.buttons.visibility.flip)||1==w.buttons.visibility.flip,g.buttons.mirror.visibility=!!o.D.isUndefined(w.buttons.visibility.mirror)||1==w.buttons.visibility.mirror,g.buttons.blank5.visibility=!!(g.buttons.crop.visibility||g.buttons.cut.visibility||g.buttons.changeImageSize.visibility||g.buttons.flip.visibility||g.buttons.mirror.visibility),g.buttons.zoomin.visibility=!!o.D.isUndefined(w.buttons.visibility.zoomin)||1==w.buttons.visibility.zoomin,g.buttons.originalsize.visibility=!!o.D.isUndefined(w.buttons.visibility.originalsize)||1==w.buttons.visibility.originalsize,g.buttons.zoomout.visibility=!!o.D.isUndefined(w.buttons.visibility.zoomout)||1==w.buttons.visibility.zoomout,g.buttons.blank6.visibility=!!(g.buttons.zoomin.visibility||g.buttons.originalsize.visibility||g.buttons.zoomout.visibility),g.buttons.fitPage.visibility=!!o.D.isUndefined(w.buttons.visibility.fit)||1==w.buttons.visibility.fit,g.buttons.fitWidth.visibility=!!o.D.isUndefined(w.buttons.visibility.fitw)||1==w.buttons.visibility.fitw,g.buttons.fitHeight.visibility=!!o.D.isUndefined(w.buttons.visibility.fith)||1==w.buttons.visibility.fith,g.buttons.blank7.visibility=!!(g.buttons.fitPage.visibility||g.buttons.fitWidth.visibility||g.buttons.fitHeight.visibility),g.buttons.hand.visibility=!!o.D.isUndefined(w.buttons.visibility.hand)||1==w.buttons.visibility.hand,g.buttons.select.visibility=!!o.D.isUndefined(w.buttons.visibility.rectselect)||1==w.buttons.visibility.rectselect,g.buttons.clicktozoomin.visibility=!!o.D.isUndefined(w.buttons.visibility.zoom)||1==w.buttons.visibility.zoom,g.buttons.blank7.visibility=!!(g.buttons.hand.visibility||g.buttons.select.visibility||g.buttons.clicktozoomin.visibility),g.buttons.restore.visibility=!!o.D.isUndefined(w.buttons.visibility.restore)||1==w.buttons.visibility.restore,g.buttons.save.visibility=!!o.D.isUndefined(w.buttons.visibility.save)||1==w.buttons.visibility.save,g.buttons.close.visibility=!!o.D.isUndefined(w.buttons.visibility.close)||1==w.buttons.visibility.close))),o.D.isUndefined(w.dialogText)||(Pe.CustomizableDisplayInfo.dialogText=ae=w.dialogText),o.D.isUndefined(w.promptToSaveChange)||(this.promptToSaveChange=w.promptToSaveChange),o.D.isUndefined(w.border)||(g.outerBorder=w.border),o.D.isUndefined(w.topMenuBorder)||(g.topMenuBorder=w.topMenuBorder),o.D.isUndefined(w.innerBorder)||(g.canvasConfig.canvasBorder=w.innerBorder),o.D.isUndefined(w.background)||(g.canvasConfig.canvasBackground=w.background)),g}},{key:"_bindView",value:function(){var g=this;if(g.bShowImageEdit)return!0;if(!g.myImageEditor)return g.bDispose?o.D.Errors.ImageEditorDispose(g._stwain):o.D.Errors.ImageEditorNotExist(g._stwain),!1;var w,N=o.D.one(".dynamsoft-cvs-container");return N&&N.getEL()?(g.cvsContainer=N,g.cvsParentId=N.parent()[0].id,g._stwain&&g._stwain.Addon&&g._stwain.Addon.Camera&&(g.cvsStatus=g._stwain.Addon.Camera.getStatus())):(g.cvsContainer="",g.cvsParentId="",g.cvsStatus=""),g.bShowImageEdit=!0,g.editorSettings&&g.editorSettings.element&&g.editorSettings.width&&g.editorSettings.height?(g.UIEditor=g.editorSettings.element,g.bFullScreen=!1,g.myImageEditor.width=g.editorSettings.width,g.myImageEditor.height=g.editorSettings.height,g.SetWidthInner(g.editorSettings.width,!0),g.SetHeightInner(g.editorSettings.height,!0),g.myImageEditor.bindView(g.UIEditor),g.hide(),g.cvsParentId&&(N=document.getElementById(g.cvsParentId))&&N.appendChild(g.cvsContainer[0])):(N=At.createElement("div"),At.body.appendChild(N),document.body.insertBefore(N,document.body.firstElementChild),g.UIEditor=N,g.bFullScreen=!0,g.UIEditor.className="D_ImageUIEditor",g.UIEditor.style.width="100%",g.UIEditor.style.height="100%",g.UIEditor.style.position="fixed",g.UIEditor.style.left="0px",g.UIEditor.style.top="0px",g.UIEditor.style.zIndex="9999",g.UIEditor.style.display="none",g.SetWidthInner("100%",!0),g.SetHeightInner("100%",!0),g.myImageEditor.bindView(g.UIEditor),g.hide(),g.bShowImageEditForFullScreen=!0),g.updateMode(),g.SetSelectionRectAspectRatio(g.editorSettings&&g.editorSettings.selectionRectAspectRatio?g.editorSettings.selectionRectAspectRatio:0),g.HideEditorButtonForPad(),g.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],g._stwain._isMobileMode()&&((N=o.D.one(".ds-dwt-ui-icon-acquire"))&&N.getEL()&&(N[0].style.display="none"),g.dwtMobileFileId="dwtmobilefile",g.UIEditor&&"DIV"==g.UIEditor.nodeName?((w=document.createElement("div")).innerHTML=g.bMobile?"<input multiple accept='image/jpeg,image/png,image/tiff' id ='"+g.dwtMobileFileId+"' type='file' style='display:none' />":"<input multiple accept='image/*,.pdf' id ='"+g.dwtMobileFileId+"' type='file' style='display:none' />",g.UIEditor.appendChild(w)):(N=document.getElementById(g.UIEditor),(w=document.createElement("div")).innerHTML=g.bMobile?"<input id ='"+g.dwtMobileFileId+"' type='file' accept='image/jpeg,image/png,image/tiff' style='display:none' />":"<input id ='"+g.dwtMobileFileId+"' type='file' accept='image/*,.pdf' style='display:none' />",N.appendChild(w)),o.D.get(g.dwtMobileFileId).onchange=function(){for(var K=0;K<this.files.length;K++)g._stwain.LoadImageFromBinary(this.files[K]);document.getElementById(g.dwtMobileFileId).value=""}),g.myImageEditor.off("slideSwitch"),g.myImageEditor.on("slideSwitch",function(K){"left"==K?g._webViewer.myViewer.previous():"right"==K&&g._webViewer.myViewer.next()}),!0}},{key:"dispose",value:function(){var g,w=this;return(g=w.mydvs.ViewControl.removeViewer(w.myImageEditor))&&(w.UIEditor&&w.UIEditor.lastChild&&w.UIEditor.removeChild(w.UIEditor.lastChild),w.myImageEditor=void 0,w._webViewer._imageEditor=void 0,w._webViewer._imageEditorInner=void 0,w.mydvs=null,w._stwain=null,w.bDispose=!0),g}},{key:"show",value:function(){return this.myImageEditor?(this.bFullScreen&&(this.UIEditor.style.display="",document.documentElement.scrollLeft=0,document.documentElement.scrollTop=0,document.body.style.overflow="hidden"),this.myImageEditor.showViewer=!0):(this.bDispose?o.D.Errors.ImageEditorDispose(this._webViewer._stwain):o.D.Errors.ImageEditorNotExist(this._webViewer._stwain),!1)}},{key:"hide",value:function(){return this.myImageEditor?(this.myImageEditor.showViewer=!1,this.bFullScreen&&(this.UIEditor.style.display="none"),!0):(this.bDispose?o.D.Errors.ImageEditorDispose(this._webViewer._stwain):o.D.Errors.ImageEditorNotExist(this._webViewer._stwain),!1)}},{key:"_BindImageEditorEvents",value:function(){var g=this;o.D.each(["OnPreviousImage","OnNextImage","OnAcquire","OnLoadImage","OnPrint","OnRemoveAll","OnRemove","OnRotateLeft","OnRotate","OnRotateRight","OnDeskew","OnCrop","OnErase","OnChangeImageSize","OnFlip","OnMirror","OnZoomin","OnOriginalsize","OnZoomout","OnFitPage","OnFitWidth","OnFitHeight","OnHand","OnSelect","OnClicktozoomin","OnRestore","OnSave","OnClose","click","imageClick","pageAreaSelected","pageAreaUnselected","onDrop","OnFirstImage","OnLastImage","pageChange","bufferChanged","pageRendered","wheel"],function(w){g.myImageEditor.on(w,function(N,K){g[w](N,K)})})}},{key:"HideEditorButtonForPad",value:function(){var N,g=this.myImageEditor,w=this.bPadViewer;(N=document.getElementById("rotateBtn"+g.postfix))&&(N.style.display=w?"none":""),(N=document.getElementById("deskewBtn"+g.postfix))&&(N.style.display=w?"none":""),(N=document.getElementById("changeImageSizeBtn"+g.postfix))&&(N.style.display=w?"none":"")}},{key:"BackImageData",value:function(){var g,w=this;w._stwain._isMobileMode()&&w.bShowImageEdit&&0<=(g=w._webViewer.GetCurrentIndex())&&w._webViewer.GetImageData(w._webViewer.GetUidByIndex(g)).then(function(N){w.BackImageBuffer=N.oriData,(N=w._webViewer.GetMetaDataByIndex(g))&&(w.BackModelImageControl={},w.BackModelImageControl.width=N.width,w.BackModelImageControl.height=N.height,w.BackModelImageControl.bitDepth=N.bitDepth,w.BackModelImageControl.resolutionX=N.resolutionX,w.BackModelImageControl.resolutionY=N.resolutionY)})}},{key:"CloseShowImageEditor",value:function(){var g,w=this;return w.myImageEditor?(w.cvsContainer&&""!=w.cvsContainer&&w.cvsParentId&&""!=w.cvsParentId&&((g=document.getElementById(w.cvsParentId))&&g.appendChild(w.cvsContainer[0]),"playing"==w.cvsStatus&&w._stwain&&w._stwain.Addon&&w._stwain.Addon.Camera&&w._stwain.Addon.Camera.resume()),!0):(w.bDispose?o.D.Errors.ImageEditorDispose(w._stwain):o.D.Errors.ImageEditorNotExist(w._stwain),!1)}},{key:"UpdateInfo",value:function(){o.I.Lib.hideMask()}},{key:"clearSelectedAreas",value:function(){var g;return this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0||((g=this.myImageEditor.clearSelectedBoxes())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g)}},{key:"SetSelectionRectAspectRatio",value:function(g){return this.myImageEditor.selectionBoxAspectRatio=g,!0}},{key:"ZoomIn",value:function(){var g;return(g=this.myImageEditor.zoomIn())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"ZoomOut",value:function(){var g;return(g=this.myImageEditor.zoomOut())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"SetZoom",value:function(g,w,N){var K;return(K=w&N?this.myImageEditor.zoomTo(g,w,N):this.myImageEditor.zoomTo(g))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),K}},{key:"GetZoom",value:function(){return this.myImageEditor.zoom}},{key:"SetFitType",value:function(g){var w="window";return o.D.isUndefined(g)||"width"!=g&&"height"!=g||(w=g),this.myImageEditor.fitType=w,!0}},{key:"SetMouseShape",value:function(g){var w;switch(g){case o.I.DWT.EnumDWT_MouseShape.Default:w="default";break;case o.I.DWT.EnumDWT_MouseShape.Hand:w="pointer";break;case o.I.DWT.EnumDWT_MouseShape.Crosshair:w="crosshair";break;case o.I.DWT.EnumDWT_MouseShape.Zoom:w="zoom-in";break;default:w="crosshair"}return this.SetCursor(w),!0}},{key:"SetCursor",value:function(g){if(!this._webViewer._NouiNotSupport("cursor"))return!1;var w="default";switch(g){case"default":w="default",this.SetOperationMode(1);break;case"pointer":w="pointer",this.SetOperationMode(0);break;case"crosshair":w="crosshair",this.SetOperationMode(1);break;case"zoom-in":w="zoom-in",this.SetOperationMode(2);break;default:w="crosshair"}return this.myImageEditor.canvasMouseShape=w,!0}},{key:"SetSelectionImageBorderColor",value:function(g){return this.myImageEditor.selectedPageBorderColor=g,!0}},{key:"SetBackgroundColor",value:function(g){return this.myImageEditor.imageBackgroundColor=g,!0}},{key:"SetWidth",value:function(g){return this.myImageEditor.width=g,!0}},{key:"SetWidthInner",value:function(g,w){return!w&&o.D.isString(g)&&0<=r()(g).call(g,"%")?(w=o.D.one("#"+this._stwain._containerID),this.myImageEditor.width=a()(o.D.css(w,"width")*a()(g)/100)):this.myImageEditor.width=g,!0}},{key:"SetHeight",value:function(g){return this.myImageEditor.height=g,!0}},{key:"SetHeightInner",value:function(g,w){return!w&&o.D.isString(g)&&0<=r()(g).call(g,"%")?(w=o.D.one(this._stwain._containerElement),this.myImageEditor.height=a()(o.D.css(w,"height")*a()(g)/100)):this.myImageEditor.height=g,!0}},{key:"SetIfAutoScroll",value:function(g){return this.myImageEditor.showLatestPage=g,!0}},{key:"ChangeButtonClass",value:function(g,w){return this.myImageEditor?this.myImageEditor.setButtonClass(g,w):undefined}},{key:"SetOperationMode",value:function(g){this.myImageEditor.operationMode=g}},{key:"UnbindContent",value:function(g){this.myImageEditor.unbindContent()}},{key:"SetSelectedPageBackground",value:function(g){this.myImageEditor.selectedPageBackground=g}},{key:"GetRealTimeMetadataByIndex",value:function(g){if(!(g<0||g>=this._webViewer.GetHowManyImagesInBuffer()))return this.myImageEditor.getRealTimeMetadataByIndex(g);o.D.Errors.IndexOutOfRange(this._stwain)}},{key:"DVSRotate",value:function(g){return this.myImageEditor.rotateMode=0,(g=this.myImageEditor.rotate(g))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"DVSFlip",value:function(){var g=this.myImageEditor.flip();return g||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"DVSMirror",value:function(){var g=this.myImageEditor.mirror();return g||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"DVSCrop",value:function(g,w,N,K){return(N=this.myImageEditor.crop(g,w,N-g,K-w))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),N}},{key:"DVSErase",value:function(g,w,N,K){return(N=this.myImageEditor.erase(g,w,N-g,K-w,this._webViewer._UIView.BackgroundFillColor))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),N}},{key:"DVSSaveTransformResult",value:function(g){var w=this;return w.myImageEditor.saveTransformation().then(function(){g(null,-1,null)},function(N){o.D.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode)}),!0}},{key:"DVSRotateEx",value:function(g,w){return this.myImageEditor.rotateMode=w?1:0,(w=this.myImageEditor.rotate(g))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),w}},{key:"DVSChangeImageSize",value:function(g,w,N){return(g=this.myImageEditor.changePageSize(a()(g),a()(w),N))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"DVSSkewAngle",value:function(){var g=this;return g._stwain._asyncGetSkewAngleOnly(g._webViewer.GetCurrentIndex(),function(w){g.DVSRotateEx(w,!0),g.UpdateInfo(),g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()}),!0}},{key:"updateButtons",value:function(){1==this._IfChangedWithinTheEditor?(this.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage"),this.ChangeButtonClass("restore","ds-dwt-ui-icon-restore")):(this.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage-grey"),this.ChangeButtonClass("restore","ds-dwt-ui-icon-restore-grey"))}},{key:"updateMode",value:function(g){var w,N=this;if(N.bShowImageEdit){if(1<(w=N._webViewer.GetHowManyImagesInBuffer())?(N._webViewer.GetCurrentIndex()==w-1||N._webViewer.GetHowManyImagesInBuffer()<=1?N.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"):N.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage"),N._webViewer.GetCurrentIndex()<=0||N._webViewer.GetHowManyImagesInBuffer()<=1?N.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey"):N.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage")):(N.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"),N.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey")),N.updateButtons(),N.__SetCropButtonGrey(!0),N.__SetEraseButtonGrey(!0),N.bMobile)switch(N.cursorStatus){case"rectselect":N.OnSelect();break;case"zoom":N.OnClicktozoomin();break;default:N.OnHand()}else switch(N.cursorStatus){case"hand":N.OnHand();break;case"zoom":N.OnClicktozoomin();break;default:N.OnSelect()}g&&(w=N._webViewer.GetCurrentIndex(),1==N._IfChangedWithinTheEditor&&w!=N.iChangedIndex&&N.ShowDialogForSaveImage(N._webViewer.GetCurrentIndex(),!1))}}},{key:"__SaveImageInner",value:function(g,w){var N=this;if(-1==N.iChangedIndex&&0==N._IfSaveChangesOutSideOfTheEditor)return N._IfChangedWithinTheEditor=!1,w&&w(),!1;if(1!=N._IfChangedWithinTheEditor&&0==N._IfSaveChangesOutSideOfTheEditor)return alert(Pe.CustomizableDisplayInfo.errorMessages.imageNotChanged),N._IfChangedWithinTheEditor=!1,w&&w(),!1;N._IfSaveChangesOutSideOfTheEditor&&(N.iChangedIndex=N._webViewer.GetCurrentIndex());var Te=!0;if(1==N._IfChangedWithinTheEditor||1==N._IfSaveChangesOutSideOfTheEditor){var Fe=N.getImageManager().convertClientIndexToServerId(N.iChangedIndex);if(-1==Fe)return w&&w(),!1;N.OnGetImageFromServerForEdit(N._webViewer._UIView.mapModelImageControl[Fe],N.iChangedIndex,2,function(Je,Ye,qt){if(Je){if(1==g&&(o.D.log("__SaveImageInner: "+[Je.guid].join(",")),N._webViewer.GetCurrentIndex()==Ye&&(N._stwain._isMobileMode()?N._webViewer.MobileUpdateImage(Je,qt):N._webViewer.UpdateImage(Je,qt))),N._IfChangedWithinTheEditor=!1,(N.iChangedIndex=-1)==Je.serverId)return w&&w(),!1}else N._IfChangedWithinTheEditor=!1,N.iChangedIndex=-1;return N.updateButtons(),w&&w(),!0}),Te=!1}return N._IfSaveChangesOutSideOfTheEditor=!1,Te&&(N._IfChangedWithinTheEditor=!1,w&&w()),!0}},{key:"ShowDialogForSaveImage",value:function(g,w,N,K){var Te,Fe=this,Ke=function(){Fe.__SaveImageInner(!0,function(){St.DCP_DWT_OnClickCloseInstall(Fe._stwain._containerID),-(o.D.bChangeImage=1)==g?w&&Fe.OnClose():Fe._webViewer.__goInner(g),w&&(document.body.style.overflow=""),Ne.isFunction(N)&&N()})};Fe.promptToSaveChange?(o.I.DWT.ShowMessage((Te=['<div class="dynamsoft-dwt-dlg-tips">',"<div>",ae.saveChangedImage[0],"</div>",'<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">','<input class="dynamsoft_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="',ae.saveChangedImage[1],'" /><input class="dynamsoft_btnCancel" style="width: 100px; height:30px; margin-top: 10px;"  type="button" value="',ae.saveChangedImage[2],'" /></div>',"</div>"]).join(""),Fe.bMobile?{width:300,headerStyle:1}:{width:420,headerStyle:1}),(Te=o.D.one(".dynamsoft_btnSave").getEL())&&(Te.onclick=function(){Ke()}),(Te=o.D.one(".dynamsoft_btnCancel").getEL())&&(Te.onclick=function(){Fe.__RestoreImageInner(g,function(){St.DCP_DWT_OnClickCloseInstall(Fe._stwain._containerElement),o.D.bChangeImage=0,-1==g?w&&Fe.OnClose():Fe._webViewer.__goInner(g),w&&(document.body.style.overflow=""),Ne.isFunction(K)&&K()})})):Ke()}},{key:"__SetCropButtonGrey",value:function(g){this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),g&&this.clearSelectedAreas()}},{key:"__SetEraseButtonGrey",value:function(g){this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey"),g&&this.clearSelectedAreas()}},{key:"__SetZoomInButtonEnable",value:function(g){this.ChangeButtonClass("zoomin",1==g?"ds-dwt-ui-icon-zoomin":"ds-dwt-ui-icon-zoomin-grey")}},{key:"__SetZoomOutButtonEnable",value:function(g){this.ChangeButtonClass("zoomout",1==g?"ds-dwt-ui-icon-zoomout":"ds-dwt-ui-icon-zoomout-grey")}},{key:"pageChange",value:function(g){var w=this._webViewer.GetHowManyImagesInBuffer();o.D.log("OnPagination"),w<=0?Ne.output(this,"No image in Buffer"):1!=w&&(!/^\d+$/.test(g)||g<=0?alert(Pe.CustomizableDisplayInfo.errorMessages.invalidIndex):((g=a()(g)-1)<0?g=0:w<=g&&(g=w-1),g!=this._webViewer.GetCurrentIndex()&&this.go(g)))}},{key:"bufferChanged",value:function(g){if(this._currentIndex!=this._webViewer.GetCurrentIndex())return this._currentIndex=this._webViewer.GetCurrentIndex(),this.updateMode(),"shift"!=g.action||1!=this._IfChangedWithinTheEditor||(this.ShowDialogForSaveImage(this._currentIndex,!1),!1)}},{key:"pageRendered",value:function(g){}},{key:"OnFirstImage",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this._webViewer.first()}},{key:"OnLastImage",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this._webViewer.last()}},{key:"OnPreviousImage",value:function(){var g=o.D.one(".ds-dwt-ui-icon-preImage-grey");o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),g&&g.getEL()||this._webViewer.previous()}},{key:"OnNextImage",value:function(){var g=o.D.one(".ds-dwt-ui-icon-nextImage-grey");this.hideImgEditorDilag(),o.D.Errors.ClearErrorInfo(this._stwain),g&&g.getEL()||this._webViewer.next()}},{key:"go",value:function(g){if(this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0)return Ne.output(this,"No image in Buffer"),!1;if(1==this._IfChangedWithinTheEditor)return this.ShowDialogForSaveImage(g,!1),!1;if(this.bShowImageEdit&&void 0!==g){if(-1==g)return!1;this.bCouldBeTimeConsuming=!0,this.myImageEditor.gotoPage(g),this.updateMode()}return!0}},{key:"OnAcquire",value:function(){var g=this,w=function(){g._stwain.SelectSource(function(){g._stwain.CloseSource(),g._stwain.OpenSource(),g._stwain.IfShowUI=!0,1==o.I.DWT.IfConfineMaskWithinTheViewer?(o.I.DWT.IfConfineMaskWithinTheViewer=!1,g._stwain.AcquireImage({},function(){o.I.DWT.IfConfineMaskWithinTheViewer=!0,null==window.onresize&&(window.onresize=function(){g._stwain.ShowImageEditorEx(-1,-1,-1,-1)})},function(){null==window.onresize&&(window.onresize=function(){g._stwain.ShowImageEditorEx(-1,-1,-1,-1)})})):g._stwain.AcquireImage()},function(){o.D.log("User did not select a source")})};o.D.Errors.ClearErrorInfo(g._stwain),g.hideImgEditorDilag(),g._IfChangedWithinTheEditor?g.ShowDialogForSaveImage(g._webViewer.GetCurrentIndex(),!1,w,w):w()}},{key:"OnLoadImage",value:function(){var g=this,w=null,N=function(){if(g._stwain._isMobileMode())return(Te=document.getElementById(g.dwtMobileFileId)).value="",void Te.click();var Te,Fe;g._stwain.IfShowFileDialog=!0,g._stwain.Addon&&g._stwain.Addon.PDF&&(Te=!1,(g._stwain._isMobileMode()?o.D.License.checkProductKey(g._stwain,{PDFRasterizer:!0,Wasm:!0},!0):o.D.License.checkProductKey(g._stwain,{PDFRasterizer:!0},!0))&&(w=g._stwain.Addon.PDF.GetConvertMode(),Fe=g._stwain._innerFun("GetAddOnVersion",(0,u.dv)("pdf")),(Te=!!(o.D.env.bMac&&Fe==o.I.DWT.PdfMacVersion||o.D.env.bLinux&&Fe==o.I.DWT.PdfLinuxVersion||Fe==o.I.DWT.PdfVersion)||Te)&&g._stwain.Addon.PDF.SetConvertMode(3))),g._stwain.LoadImageEx("",5,function(){o.D.log("Loaded an image successfully."),null!=w&&g._stwain.Addon.PDF.SetConvertMode(w)},function(qt,xe){o.D.log("Loading failed with the error: "+xe),null!=w&&g._stwain.Addon.PDF.SetConvertMode(w)})};o.D.Errors.ClearErrorInfo(g._stwain),g.hideImgEditorDilag(),g._IfChangedWithinTheEditor?g.ShowDialogForSaveImage(g._webViewer.GetCurrentIndex(),!1,N,N):N()}},{key:"OnPrint",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),this._webViewer.GetCurrentIndex()<0?Ne.output(this,"No image in Buffer"):this._webViewer._UIView.Print()}},{key:"OnRemoveAll",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0?Ne.output(this,"No image in Buffer"):this._stwain.RemoveAllImages()}},{key:"OnRemove",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0?Ne.output(this,"No image in Buffer"):this._stwain.RemoveAllSelectedImages()}},{key:"OnRotateLeft",value:function(){var g=this;o.D.Errors.ClearErrorInfo(g._stwain),g.hideImgEditorDilag(),g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0?Ne.output(g,"No image in Buffer"):(1==g._webViewer._ImgManager.bImageChangedInViewer?(g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){g.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(g._stwain),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._stwain._isMobileMode()?(g.DVSRotate(270),g.UpdateInfo()):g._stwain.RotateLeft(g._webViewer.GetCurrentIndex()),g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()})):(g.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(g._stwain),g._IfSaveChangesOutSideOfTheEditor=!1,g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g._stwain._isMobileMode()?(g.DVSRotate(270),g.UpdateInfo()):g._stwain.RotateLeft(g._webViewer.GetCurrentIndex())),g.updateMode())}},{key:"RotateEx",value:function(g,w,N){var K=this;K._webViewer.GetHowManyImagesInBuffer()<=0||K._webViewer.GetCurrentIndex()<0?Ne.output(K,"No image in Buffer"):(void 0===g||void 0===w||void 0===N?alert(Pe.CustomizableDisplayInfo.errorMessages.insufficientParas):1==K._webViewer._ImgManager.bImageChangedInViewer?(K._IfSaveChangesOutSideOfTheEditor=!0,K._webViewer._ImgManager.bImageChangedInViewer=!1,K.__SaveImageInner(!1,function(){K.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(K._stwain),K._webViewer._ImgManager.bImageJustChangedInEditor=!0,K._stwain._isMobileMode()?(K.DVSRotateEx(g,w,N),K.UpdateInfo()):K._stwain.RotateEx(K._webViewer.GetCurrentIndex(),g,w,N),K._IfChangedWithinTheEditor=!0,K.iChangedIndex=K._webViewer.GetCurrentIndex(),K.updateButtons()})):(K.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(K._stwain),K._IfSaveChangesOutSideOfTheEditor=!1,K._webViewer._ImgManager.bImageJustChangedInEditor=!0,K._IfChangedWithinTheEditor=!0,K.iChangedIndex=K._webViewer.GetCurrentIndex(),K._stwain._isMobileMode()?(K.DVSRotateEx(g,w,N),K.UpdateInfo()):K._stwain.RotateEx(K._webViewer.GetCurrentIndex(),g,w,N)),K.updateMode())}},{key:"OnRotate",value:function(g){var w,N,K,Te,Fe=this;o.D.Errors.ClearErrorInfo(Fe._stwain),Fe._webViewer.GetHowManyImagesInBuffer()<=0||Fe._webViewer.GetCurrentIndex()<0?Ne.output(Fe,"No image in Buffer"):(o.D.hide("dynamsoft_ImgSizeEditor"),o.D.get("dynamsoft_RotateAnyAngle")||(w=['<div id="dynamsoft_RotateAnyAngle" class="dynamsoft-dwt-imgSizeEditor" style="display:none; z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_Angle"><b>',ae.dlgRotateAnyAngle[0],'</b><input type="text" id="dynamsoft_Angle" style="width:50%;" size="10"/></label></li>','<li><label for="dynamsoft_Angle_InterpolationMethod"><b>',ae.dlgRotateAnyAngle[1],'</b>&nbsp;<select size="1" id="dynamsoft_Angle_InterpolationMethod"><option value = ""></option></select></li>','<li><label for="dynamsoft_KeepSize"><b></b>','<input type="checkbox" id="dynamsoft_KeepSize"/>',ae.dlgRotateAnyAngle[2],"</label></li></ul>","<div>",'<input id="dynamsoft_btnRotateAnyAngleOK" type="button" value="',ae.dlgRotateAnyAngle[3],'"/><span><input id= "dynamsoft_btnCancelRotateAnyAngle" type="button" value="',ae.dlgRotateAnyAngle[4],'" /></span></div>',"</div>"],o.D.one("body").append(w.join(""))),(w=o.D.get("dynamsoft_Angle_InterpolationMethod")).options.length=0,w.options.add(new Option("NearestNeighbor",1)),w.options.add(new Option("Bilinear",2)),w.options.add(new Option("Bicubic",3)),w=null,o.D.get("dynamsoft_btnRotateAnyAngleOK").onclick=function(){var Je=o.D.get("dynamsoft_Angle").value;if(o.D.get("dynamsoft_Angle").className="",!/^\d+$/.test(Je)||Je<=0)return o.D.get("dynamsoft_Angle").className+=" invalid",o.D.get("dynamsoft_Angle").focus(),void alert(Pe.CustomizableDisplayInfo.errorMessages.invalidAngle);var Ke=o.D.get("dynamsoft_KeepSize").checked;Fe.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(Fe._stwain),Je=a()(Je),Fe.RotateEx(Je,Ke,o.D.get("dynamsoft_Angle_InterpolationMethod").selectedIndex+1),0==Fe._stwain.ErrorCode&&o.D.hide("dynamsoft_RotateAnyAngle")},o.D.get("dynamsoft_btnCancelRotateAnyAngle").onclick=function(){o.D.hide("dynamsoft_RotateAnyAngle")},w=o.D.get("dynamsoft_RotateAnyAngle"),o.D.toggle("dynamsoft_RotateAnyAngle"),K=(K=(N=g.srcElement||g.target).y)||N.offsetTop+1,Te=(Te=N.x)||N.offsetLeft+1,Fe.UIEditor&&"DIV"==Fe.UIEditor.nodeName?(w.style.top=g.clientY+document.documentElement.scrollTop+"px",w.style.left=g.clientX+document.documentElement.scrollLeft+"px"):(g=At.getElementById(Fe.UIEditor),w.style.top=K+N.offsetHeight+Ne.getTop(g)+"px",w.style.left=Te+Ne.getLeft(g)+"px"),o.D.get("dynamsoft_Angle").value="45")}},{key:"OnRotateRight",value:function(){var g=this;o.D.Errors.ClearErrorInfo(g._stwain),g.hideImgEditorDilag(),g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0?Ne.output(g,"No image in Buffer"):(1==g._webViewer._ImgManager.bImageChangedInViewer?(g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){g.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(g._stwain),g._stwain._isMobileMode()?(g.DVSRotate(90),g.UpdateInfo()):g._stwain.RotateRight(g._webViewer.GetCurrentIndex()),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()})):(g.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(g._stwain),g._IfSaveChangesOutSideOfTheEditor=!1,g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g._stwain._isMobileMode()?(g.DVSRotate(90),g.UpdateInfo()):g._stwain.RotateRight(g._webViewer.GetCurrentIndex())),g.updateMode())}},{key:"OnDeskew",value:function(){var g,w=this;o.D.Errors.ClearErrorInfo(w._stwain),w.hideImgEditorDilag(),w._webViewer.GetHowManyImagesInBuffer()<=0||w._webViewer.GetCurrentIndex()<0?Ne.output(w,"No image in Buffer"):1==w._webViewer._ImgManager.bImageChangedInViewer?(w._IfSaveChangesOutSideOfTheEditor=!0,w._webViewer._ImgManager.bImageChangedInViewer=!1,w.__SaveImageInner(!1,function(){var N;w.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(w._stwain),w._webViewer._ImgManager.bImageJustChangedInEditor=!0,w._stwain._isMobileMode()?w.DVSSkewAngle():(0<=(N=w._webViewer.GetCurrentIndex())&&w._stwain.GetSkewAngleAsync(N).then(function(K){w.RotateEx(K,!0,1)}),w._IfChangedWithinTheEditor=!0,w.iChangedIndex=w._webViewer.GetCurrentIndex(),w.updateButtons())})):(w.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(w._stwain),w._IfSaveChangesOutSideOfTheEditor=!1,w._webViewer._ImgManager.bImageJustChangedInEditor=!0,w._IfChangedWithinTheEditor=!0,w.iChangedIndex=w._webViewer.GetCurrentIndex(),w._stwain._isMobileMode()?w.DVSSkewAngle():0<=(g=w._webViewer.GetCurrentIndex())&&w._stwain.GetSkewAngleAsync(g).then(function(N){w.RotateEx(N,!0,1)}))}},{key:"OnCrop",value:function(){o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag();var g=o.D.one(".ds-dwt-ui-icon-cropImage");g&&g.getEL()&&this.Crop()}},{key:"Crop",value:function(){var g,w,N,K,Te,Fe=this;Fe._webViewer.GetHowManyImagesInBuffer()<=0||Fe._webViewer.GetCurrentIndex()<0?Ne.output(Fe,"No image in Buffer"):2!=(g=Fe.actualSelectedCanvasAreas).length?Ne.output(Fe,"No area selected for cropping"):(w=(g=g[1]).left,N=g.top,K=g.right,Te=g.bottom,a()(w)-a()(K)!=0&&a()(N)-a()(Te)!=0&&(1==Fe._webViewer._ImgManager.bImageChangedInViewer?(Fe._IfSaveChangesOutSideOfTheEditor=!0,Fe._webViewer._ImgManager.bImageChangedInViewer=!1,Fe.__SaveImageInner(!1,function(){Fe.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(Fe._stwain),Fe._stwain._isMobileMode()?(Fe.DVSCrop(a()(w),a()(N),a()(K),a()(Te)),Fe.UpdateInfo()):Fe._stwain.Crop(Fe._webViewer.GetCurrentIndex(),a()(w),a()(N),a()(K),a()(Te)),Fe._webViewer._ImgManager.bImageJustChangedInEditor=!0,Fe.__SetCropButtonGrey(!0),Fe.__SetEraseButtonGrey(!0),Fe._IfChangedWithinTheEditor=!0,Fe.iChangedIndex=Fe._webViewer.GetCurrentIndex(),Fe.updateButtons()})):(Fe.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(Fe._stwain),Fe._IfSaveChangesOutSideOfTheEditor=!1,Fe._webViewer._ImgManager.bImageJustChangedInEditor=!0,Fe._IfChangedWithinTheEditor=!0,Fe.iChangedIndex=Fe._webViewer.GetCurrentIndex(),Fe._stwain._isMobileMode()?(Fe.DVSCrop(a()(w),a()(N),a()(K),a()(Te)),Fe.UpdateInfo()):Fe._stwain.Crop(Fe._webViewer.GetCurrentIndex(),a()(w),a()(N),a()(K),a()(Te)),Fe.__SetCropButtonGrey(!0),Fe.__SetEraseButtonGrey(!0)),Fe.updateMode()))}},{key:"OnErase",value:function(){var g=o.D.one(".ds-dwt-ui-icon-erase");o.D.Errors.ClearErrorInfo(this._stwain),this.hideImgEditorDilag(),g&&g.getEL()&&this.Erase()}},{key:"Erase",value:function(){var g=this,w=!1;if(g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0)Ne.output(g,"No image in Buffer");else{var N=g.actualSelectedCanvasAreas;if(1==N.length)Ne.output(g,"No area selected for erasing");else{if(1==g._webViewer._ImgManager.bImageChangedInViewer)g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){for(var Ye=1;Ye<N.length;Ye++){var qt=(ue=N[Ye]).left,xe=ue.top,ut=ue.right,ue=ue.bottom;a()(qt)-a()(ut)!=0&&a()(xe)-a()(ue)!=0&&(g.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(g._stwain),g._stwain._isMobileMode()?(g.DVSErase(a()(qt),a()(xe),a()(ut),a()(ue)),g.UpdateInfo()):g._stwain.CutFrameToClipboard(g._webViewer.GetCurrentIndex(),a()(qt),a()(xe),a()(ut),a()(ue)),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons(),w=!0)}g.__SetEraseButtonGrey(w),g.__SetCropButtonGrey(w)});else{g._IfSaveChangesOutSideOfTheEditor=!1,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex();for(var K=1;K<N.length;K++){var Te=(Je=N[K]).left,Fe=Je.top,Ke=Je.right,Je=Je.bottom;a()(Te)-a()(Ke)!=0&&a()(Fe)-a()(Je)!=0&&(g.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(g._stwain),g._stwain._isMobileMode()?(g.DVSErase(a()(Te),a()(Fe),a()(Ke),a()(Je)),g.UpdateInfo()):g._stwain.CutFrameToClipboard(g._webViewer.GetCurrentIndex(),a()(Te),a()(Fe),a()(Ke),a()(Je)),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),w=!0)}g.__SetEraseButtonGrey(w),g.__SetCropButtonGrey(w)}g.updateMode()}}}},{key:"ChangeImageSize",value:function(g,w,N){var K=this;K._webViewer.GetHowManyImagesInBuffer()<=0||K._webViewer.GetCurrentIndex()<0?Ne.output(K,"No image in Buffer"):(1==K._webViewer._ImgManager.bImageChangedInViewer?(K._IfSaveChangesOutSideOfTheEditor=!0,K._webViewer._ImgManager.bImageChangedInViewer=!1,K.__SaveImageInner(!1,function(){K.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(K._stwain),K._webViewer._ImgManager.bImageJustChangedInEditor=!0,K._stwain._isMobileMode()?(K.DVSChangeImageSize(g,w,N),K.UpdateInfo()):K._stwain.ChangeImageSize(K._webViewer.GetCurrentIndex(),g,w,N),K._IfChangedWithinTheEditor=!0,K.iChangedIndex=K._webViewer.GetCurrentIndex(),K.updateButtons()})):(K.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(K._stwain),K._IfSaveChangesOutSideOfTheEditor=!1,K._webViewer._ImgManager.bImageJustChangedInEditor=!0,K._IfChangedWithinTheEditor=!0,K.iChangedIndex=K._webViewer.GetCurrentIndex(),K._stwain._isMobileMode()?(K.DVSChangeImageSize(g,w,N),K.UpdateInfo()):K._stwain.ChangeImageSize(K._webViewer.GetCurrentIndex(),g,w,N)),K.updateMode())}},{key:"OnChangeImageSize",value:function(g){var w,N,K,Te,Fe=this;if(o.D.Errors.ClearErrorInfo(Fe._stwain),Fe.hideImgEditorDilag(),!(Fe._webViewer.GetHowManyImagesInBuffer()<=0||Fe._webViewer.GetCurrentIndex()<0))return o.D.hide("dynamsoft_RotateAnyAngle"),o.D.get("dynamsoft_ImgSizeEditor")||(K=['<div id="dynamsoft_ImgSizeEditor" class="dynamsoft-dwt-imgSizeEditor" style="display:none;z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_img_height"><b>',ae.dlgChangeImageSize[0],'</b><input type="text" id="dynamsoft_img_height" style="width:50%;" size="10"/>pixel</label></li>','<li><label for="dynamsoft_img_width"><b>',ae.dlgChangeImageSize[1],'</b>&nbsp;<input type="text" id="dynamsoft_img_width" style="width:50%;" size="10"/>pixel</label></li>',"<li>",ae.dlgChangeImageSize[2],'<select size="1" id="dynamsoft_InterpolationMethod"><option value = ""></option></select></li>',"</ul>","<div>",'<input id="dynamsoft_btnChangeImageSizeOK" type="button" value="',ae.dlgChangeImageSize[3],'"/><span><input id= "dynamsoft_btnCancelChange" type="button" value="',ae.dlgChangeImageSize[4],'"/></span></div>',"</div>"],o.D.one("body").append(K.join(""))),(K=o.D.get("dynamsoft_InterpolationMethod")).options.length=0,K.options.add(new Option("NearestNeighbor",1)),K.options.add(new Option("Bilinear",2)),K.options.add(new Option("Bicubic",3)),K=null,o.D.get("dynamsoft_btnChangeImageSizeOK").onclick=function(){var Ke=o.D.get("dynamsoft_img_width").value,Je=o.D.get("dynamsoft_img_height").value,Ye=(o.D.get("dynamsoft_img_width").className="",o.D.get("dynamsoft_img_height").className="",/^\d+$/);return!Ye.test(Je)||Je<=0?(o.D.get("dynamsoft_img_height").className+=" invalid",o.D.get("dynamsoft_img_height").focus(),void alert(Pe.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):!Ye.test(Ke)||Ke<=0?(o.D.get("dynamsoft_img_width").className+=" invalid",o.D.get("dynamsoft_img_width").focus(),void alert(Pe.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):(Fe.ChangeImageSize(Ke,Je,o.D.get("dynamsoft_InterpolationMethod").selectedIndex+1),void(0==Fe._stwain.ErrorCode&&o.D.hide("dynamsoft_ImgSizeEditor")))},o.D.get("dynamsoft_btnCancelChange").onclick=function(){o.D.hide("dynamsoft_ImgSizeEditor")},K=o.D.get("dynamsoft_ImgSizeEditor"),o.D.toggle("dynamsoft_ImgSizeEditor"),w=(w=(N=g.srcElement||g.target).y)||N.offsetTop+1,Te=(Te=N.x)||N.offsetLeft+1,Fe.UIEditor&&"DIV"==Fe.UIEditor.nodeName?(K.style.top=g.clientY+document.documentElement.scrollTop+"px",K.style.left=g.clientX+document.documentElement.scrollLeft+"px"):(g=At.getElementById(Fe.UIEditor),K.style.top=w+N.offsetHeight+Ne.getTop(g)+"px",K.style.left=Te+Ne.getLeft(g)+"px"),w=Fe._webViewer.GetCurrentIndex(),-1!=(N=Fe.getImageManager().convertClientIndexToServerId(w))&&!!Fe._webViewer._UIView.mapModelImageControl[N]&&(Fe._stwain._isMobileMode()?(Te=K=0,(g=Fe.GetRealTimeMetadataByIndex())&&g.width&&(K=g.width),g&&g.height&&(Te=g.height),o.D.get("dynamsoft_img_width").value=a()(K),o.D.get("dynamsoft_img_height").value=a()(Te)):(o.D.get("dynamsoft_img_width").value=a()(Fe.getImageManager().GetImageWidth(w)),o.D.get("dynamsoft_img_height").value=a()(Fe.getImageManager().GetImageHeight(w))),!0);Ne.output(Fe,"No image in Buffer")}},{key:"OnFlip",value:function(){var g=this;o.D.Errors.ClearErrorInfo(g._stwain),g.hideImgEditorDilag(),g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0?Ne.output(g,"No image in Buffer"):(1==g._webViewer._ImgManager.bImageChangedInViewer?(g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){g.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(g._stwain),g._stwain._isMobileMode()?(g.DVSFlip(),g.UpdateInfo()):g._stwain.Flip(g._webViewer.GetCurrentIndex()),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()})):(g.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(g._stwain),g._IfSaveChangesOutSideOfTheEditor=!1,g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g._stwain._isMobileMode()?(g.DVSFlip(),g.UpdateInfo()):g._stwain.Flip(g._webViewer.GetCurrentIndex())),g.updateMode())}},{key:"OnMirror",value:function(){var g=this;o.D.Errors.ClearErrorInfo(g._stwain),g.hideImgEditorDilag(),g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0?Ne.output(g,"No image in Buffer"):(1==g._webViewer._ImgManager.bImageChangedInViewer?(g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){g.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(g._stwain),g._stwain._isMobileMode()?(g.DVSMirror(),g.UpdateInfo()):g._stwain.Mirror(g._webViewer.GetCurrentIndex()),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()})):(g.bCouldBeTimeConsuming=!0,o.I.Lib.detect.showMask(g._stwain),g._IfSaveChangesOutSideOfTheEditor=!1,g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g._stwain._isMobileMode()?(g.DVSMirror(),g.UpdateInfo()):g._stwain.Mirror(g._webViewer.GetCurrentIndex())),g.updateMode())}},{key:"wheel",value:function(g){this.__SetZoomInButtonEnable(this.myImageEditor.zoom<this.myImageEditor.maxZoom),this.__SetZoomOutButtonEnable(this.myImageEditor.zoom>this.myImageEditor.minZoom)}},{key:"OnZoomin",value:function(){var g=this,w=(g.hideImgEditorDilag(),o.D.one(".ds-dwt-ui-icon-zoomin-grey"));w&&w.getEL()||(o.D.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0?Ne.output(g,"No image in Buffer"):(this.myImageEditor.zoom<this.myImageEditor.maxZoom?(g.ZoomIn(),g.__SetZoomInButtonEnable(!0)):g.__SetZoomInButtonEnable(!1),g.__SetZoomOutButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0)))}},{key:"OnOriginalsize",value:function(){var g=this;o.D.Errors.ClearErrorInfo(g._stwain),g.hideImgEditorDilag(),g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0?Ne.output(g,"No image in Buffer"):(g.SetZoom(1),g.__SetZoomInButtonEnable(!0),g.__SetZoomOutButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0))}},{key:"OnZoomout",value:function(){var g=this,w=(g.hideImgEditorDilag(),o.D.one(".ds-dwt-ui-icon-zoomout-grey"));w&&w.getEL()||(o.D.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0?Ne.output(g,"No image in Buffer"):(this.myImageEditor.zoom>this.myImageEditor.minZoom?(g.ZoomOut(),g.__SetZoomOutButtonEnable(!0)):g.__SetZoomOutButtonEnable(!1),g.__SetZoomInButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0)))}},{key:"OnFitPage",value:function(){var g=this;o.D.Errors.ClearErrorInfo(g._stwain),g.hideImgEditorDilag(),g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0?Ne.output(g,"No image in Buffer"):(g.SetFitType(),g.__SetZoomInButtonEnable(!0),g.__SetZoomOutButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0))}},{key:"OnFitWidth",value:function(){var g=this;o.D.Errors.ClearErrorInfo(g._stwain),g.hideImgEditorDilag(),g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0?Ne.output(g,"No image in Buffer"):(g.SetFitType("width"),g.__SetZoomInButtonEnable(!0),g.__SetZoomOutButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0))}},{key:"OnFitHeight",value:function(){var g=this;o.D.Errors.ClearErrorInfo(g._stwain),g.hideImgEditorDilag(),g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0?Ne.output(g,"No image in Buffer"):(g.SetFitType("height"),g.__SetZoomInButtonEnable(!0),g.__SetZoomOutButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0))}},{key:"OnHand",value:function(){var g=o.I.DWT.EnumDWT_MouseShape.Hand;this.hideImgEditorDilag(),this.clearSelectedAreas(),this.SetMouseSelectInner(g)}},{key:"OnSelect",value:function(){var g=o.I.DWT.EnumDWT_MouseShape.Crosshair;this.hideImgEditorDilag(),this.SetMouseSelectInner(g)}},{key:"OnClicktozoomin",value:function(){var g=o.I.DWT.EnumDWT_MouseShape.Zoom;this.hideImgEditorDilag(),this.clearSelectedAreas(),this.SetMouseSelectInner(g)}},{key:"SetMouseSelectInner",value:function(g){var w=this;if(o.D.Errors.ClearErrorInfo(w._stwain),w._webViewer.GetHowManyImagesInBuffer()<=0||w._webViewer.GetCurrentIndex()<0)Ne.output(w,"No image in Buffer");else if(w.SetMouseShape(g),w.__EnableMouseShapButtons(g),w.bMobile)switch(g){case o.I.DWT.EnumDWT_MouseShape.Crosshair:w.cursorStatus="rectselect";break;case o.I.DWT.EnumDWT_MouseShape.Zoom:w.cursorStatus="zoom";break;default:w.cursorStatus="hand"}else switch(g){case o.I.DWT.EnumDWT_MouseShape.Hand:w.cursorStatus="hand";break;case o.I.DWT.EnumDWT_MouseShape.Zoom:w.cursorStatus="zoom";break;default:w.cursorStatus="rectselect"}}},{key:"OnRestore",value:function(){this.hideImgEditorDilag();var g=o.D.one(".ds-dwt-ui-icon-saveImage-grey");g&&g.getEL()||(o.D.Errors.ClearErrorInfo(this._stwain),this._webViewer.GetHowManyImagesInBuffer()<=0||this._webViewer.GetCurrentIndex()<0?Ne.output(this,"No image in Buffer"):this.__RestoreImageInner(-1))}},{key:"__RestoreImageInner",value:function(g,w){var N,K,Te,Fe=this;if(-1==Fe.iChangedIndex)return Fe._IfChangedWithinTheEditor=!1,void(w&&w());Fe._stwain._isMobileMode()?(Fe.Reset(),Fe._IfChangedWithinTheEditor=!1,Fe.iChangedIndex=-1,Fe.updateButtons(),w&&w()):(N=function(Je,Ye,qt){return Je&&(o.D.log("__RestoreImageInner: "+[Je.guid].join(",")),Fe._stwain._isMobileMode()?Fe._webViewer.MobileUpdateImage(Je,qt):Fe._webViewer.UpdateImage(Je,qt)),Fe._IfChangedWithinTheEditor=!1,(Fe.iChangedIndex=-1)==(Je&&Je.serverId)?(Fe.updateButtons(),w&&w(),!1):(Fe.updateButtons(),-1==g&&-1==Fe.getImageManager().convertClientIndexToServerId(Fe._webViewer.GetCurrentIndex())?(o.D.Errors.IndexOutOfRange(Fe._stwain),w&&w(),!1):void(w&&w()))},K=!0,1==Fe._IfChangedWithinTheEditor&&(-1!=(Te=Fe.getImageManager().convertClientIndexToServerId(Fe.iChangedIndex))&&Fe.OnGetImageFromServerForEdit(Fe._webViewer._UIView.mapModelImageControl[Te],Fe.iChangedIndex,1,N),K=!1),K&&(Fe._IfChangedWithinTheEditor=!1,w&&w()))}},{key:"OnGetImageFromServerForEdit",value:function(g,w,N,K){var Te=this;if(K&&Te._webViewer._UIView.BaseUrl){var Fe,Ke=Te.getImageManager().convertClientIndexToServerId(w);if(-1==Ke)return!1;Te._stwain._isMobileMode()?1==N?((Fe=Te._webViewer.GetMetaDataByIndex(w))&&(Fe.width=Te.BackModelImageControl.width,Fe.height=Te.BackModelImageControl.height,Fe.bitDepth=Te.BackModelImageControl.bitDepth,Fe.resolutionX=Te.BackModelImageControl.resolutionX,Fe.resolutionY=Te.BackModelImageControl.resolutionY),g.ticks=l()(),g.imageUrl=Te.BackImageBuffer,K(g,w,{metaData:Fe})):Te.DVSSaveTransformResult(K):o.I.DWT.ConnectWithSocket?K():(Fe=Ze.getUrlByAct(Te._webViewer._UIView.BaseUrl,Ke,N),o.D.ajax({method:"GET",xhrFields:{withCredentials:!0},url:Fe,onSuccess:function(Je){g.ticks=l()(),g.imageUrl=Ze.getImageUrl(Te._webViewer._UIView.BaseUrl,Ke,-1,-1,g.ticks),g.minImageUrl=Ze.getImageUrl(Te._webViewer._UIView.BaseUrl,Ke,a()(g.iImageControlWidth),a()(g.iImageControlHeight),g.ticks);var Ye,qt=Te._webViewer.GetMetaDataByIndex(w);qt&&(qt.width=(Ye=Te._webViewer._UIView.GetDataImageControl(Ke))&&Ye.width?Ye.width:Te._stwain.GetImageWidth(w),qt.height=Ye&&Ye.height?Ye.height:Te._stwain.GetImageHeight(w)),K(g,w,qt)},onError:function(){}}))}return!0}},{key:"OnSave",value:function(){var g=this,w=(g.hideImgEditorDilag(),o.D.one(".ds-dwt-ui-icon-saveImage-grey"));w&&w.getEL()||(o.D.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0||g._webViewer.GetCurrentIndex()<0?Ne.output(g,"No image in Buffer"):g.__SaveImageInner(!0,function(){if(-1==g.getImageManager().convertClientIndexToServerId(g._webViewer.GetCurrentIndex()))return o.D.Errors.IndexOutOfRange(g._stwain),!1}))}},{key:"OnClose",value:function(){return o.D.Errors.ClearErrorInfo(this._stwain),1==this._IfChangedWithinTheEditor?(this.ShowDialogForSaveImage(-1,!0),!1):this.OnCloseInner()}},{key:"OnCloseInstall",value:function(){0==this._IfChangedWithinTheEditor&&St.DCP_DWT_OnClickCloseInstall(this._stwain._containerElement)}},{key:"Reset",value:function(g){return this.myImageEditor.reset()}},{key:"OnCloseInner",value:function(g){var w=this;if(o.D.Errors.ClearErrorInfo(w._stwain),1==w._IfChangedWithinTheEditor){if(!g)return w.ShowDialogForSaveImage(-1,!0),!1;St.DCP_DWT_OnClickCloseInstall(g=w._stwain._containerElement),o.D.bChangeImage=0,w.__RestoreImageInner(-1)}return w.UIEditor&&1==w.bFullScreen?w.UIEditor&&w.UIEditor.parentNode&&0<w.UIEditor.childNodes.length&&w.UIEditor.parentNode.removeChild(w.UIEditor):w.myImageEditor&&w.myImageEditor.unbindView(w.UIEditor),w.bShowImageEdit=!1,w._webViewer.bShowImageEdit=!1,w.bShowImageEditForFullScreen=!1,w.CloseShowImageEditor(),w.hideImgEditorDilag(),(g=o.D.get("dynamsoft_ImgSizeEditor"))&&g.parentNode.removeChild(g),(g=o.D.get("dynamsoft_RotateAnyAngle"))&&g.parentNode.removeChild(g),o.I.Lib.dialog.selectsourcedlg&&o.I.Lib.dialog.selectsourcedlg.close(),window.onresize=null,document.body.style.overflow="",o.D.isFunction(w._stwain.__CloseImageEditorUI)&&w._stwain.__CloseImageEditorUI(),w.dispose()}},{key:"__EnableMouseShapButtons",value:function(g){this.ChangeButtonClass("hand","ds-dwt-ui-icon-hand"),this.ChangeButtonClass("select","ds-dwt-ui-icon-select"),this.ChangeButtonClass("clicktozoomin","ds-dwt-ui-icon-clicktozoomin"),g==o.I.DWT.EnumDWT_MouseShape.Hand?this.ChangeButtonClass("hand","dynamsoft-dwt-EditorButton-selected"):g==o.I.DWT.EnumDWT_MouseShape.Crosshair?this.ChangeButtonClass("select","dynamsoft-dwt-EditorButton-selected"):g==o.I.DWT.EnumDWT_MouseShape.Zoom&&this.ChangeButtonClass("clicktozoomin","dynamsoft-dwt-EditorButton-selected")}},{key:"click",value:function(g){this.hideImgEditorDilag(),this.__SetZoomInButtonEnable(this.myImageEditor.zoom<this.myImageEditor.maxZoom),this.__SetZoomOutButtonEnable(!0)}},{key:"hideImgEditorDilag",value:function(){o.D.hide("dynamsoft_ImgSizeEditor"),o.D.hide("dynamsoft_RotateAnyAngle")}},{key:"imageClick",value:function(g,w){this.UpdateInfo()}},{key:"pageAreaSelected",value:function(g,w){var N=1;w&&0<w.length&&(0<(N=(w=w[w.length-1]).index?a()(w.index)+1:N)&&N<this.actualSelectedCanvasAreas.length?this.actualSelectedCanvasAreas[N]={left:w.x,top:w.y,right:w.x+w.width,bottom:w.y+w.height}:N==this.actualSelectedCanvasAreas.length&&this.actualSelectedCanvasAreas.push({left:w.x,top:w.y,right:w.x+w.width,bottom:w.y+w.height}),2==this.actualSelectedCanvasAreas.length&&0<w.width&&0<w.height?(this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage"),this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase")):(this.__SetCropButtonGrey(!1),this.__SetEraseButtonGrey(!1)))}},{key:"pageAreaUnselected",value:function(g){this.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey")}},{key:"onDrop",value:function(g){this._webViewer.dropEvent(g)}},{key:"getImageManager",value:function(){return this._webViewer._ImgManager}}]),Le}()),ze=(o.D.UI.ImageEditorInner=Re,function(){function Le(g,w){(0,s.Z)(this,Le),(0,c.Z)(this,"_imageEditorInner",void 0),(0,c.Z)(this,"myImageEditor",void 0),this._imageEditorInner=new Re(g,w),this.myImageEditor=this._imageEditorInner.myImageEditor}return(0,f.Z)(Le,[{key:"show",value:function(){return this._imageEditorInner.show()}},{key:"hide",value:function(){return this._imageEditorInner.hide()}},{key:"dispose",value:function(){return this._imageEditorInner.OnCloseInner(!0)}}]),Le}());o.D.UI.ImageEditor=ze;var ot={showThumbnail:!1,location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,pageBackground:F,pageBorder:U,hoverPageBackground:H,hoverPageBorder:Z,placeholderBackground:X,autoChangeIndex:!1},Lt=new(It()),Ot=function(){function Le(g,w){(0,s.Z)(this,Le),function Qe(Le,g){if(g.has(Le))throw new TypeError("Cannot initialize the same private elements twice on an object");g.add(Le)}(this,Lt);var N=this;if(N._webViewer=g,w){if(w.location)switch(w.location){case"left":default:w.location="horizontal",w.sequence=-1;break;case"right":w.location="horizontal",w.sequence=1;break;case"top":w.location="vertical",w.sequence=-1;break;case"bottom":w.location="vertical",w.sequence=1}else w.location="horizontal",w.sequence=-1;o.D.isUndefined(w.size)&&(w.size=ot.size),o.D.isUndefined(w.columns)&&(w.columns=ot.columns),o.D.isUndefined(w.rows)&&(w.rows=ot.rows),(o.D.isUndefined(w.scrollDirection)||"horizontal"!=w.scrollDirection)&&(w.scrollDirection=ot.scrollDirection),o.D.isUndefined(w.pageMargin)&&(w.pageMargin=ot.pageMargin),o.D.isUndefined(w.allowKeyboardControl)&&(w.allowKeyboardControl=ot.allowKeyboardControl),o.D.isUndefined(w.allowPageDragging)&&(w.allowPageDragging=ot.allowPageDragging),o.D.isUndefined(w.allowResizing)&&(w.allowResizing=ot.allowResizing),o.D.isUndefined(w.border)&&(w.border=ot.border),o.D.isUndefined(w.pageBackground)&&(w.pageBackground=ot.pageBackground),o.D.isUndefined(w.pageBorder)&&(w.pageBorder=ot.pageBorder),o.D.isUndefined(w.hoverPageBackground)&&(w.hoverPageBackground=ot.hoverPageBackground),o.D.isUndefined(w.hoverPageBorder)&&(w.hoverPageBorder=ot.hoverPageBorder),o.D.isUndefined(w.placeholderBackground)&&(w.placeholderBackground=ot.placeholderBackground),o.D.isUndefined(w.autoChangeIndex)&&(w.autoChangeIndex=ot.autoChangeIndex)}else w=o.I.Lib.clone(ot);o.D.isUndefined(w.background)&&(w.background=N._webViewer.GetBackground()),o.D.isUndefined(w.pageNumber)&&(w.pageNumber=N._webViewer.GetPageNumberStyle()),o.D.isUndefined(w.checkbox)&&(w.checkbox=N._webViewer.GetCheckboxStyle()),o.D.isUndefined(w.multiSelectMode)&&(w.multiSelectMode=N._webViewer.GetMultiSelectMode()==o.I.DWT.EnumDWT_SelectionMode.Multiple),o.D.isUndefined(w.selectedPageBorder)&&(g=N._webViewer.GetSelectedPageBorder(),w.selectedPageBorder=o.D.isUndef(g)?ot.selectedPageBorder:g),o.D.isUndefined(w.selectedPageBackground)&&(g=N._webViewer.GetSelectedPageBackground(),w.selectedPageBackground=o.D.isUndef(g)?ot.selectedPageBackground:g),w.showThumbnail=!1,N.myThumbnailViewer=N._webViewer.myViewer.createThumbnailView(w),0!=N._webViewer.mydvs.Error.errorCode&&o.D.Errors.WebviewerError(N._webViewer._stwain,N._webViewer.mydvs.Error.errorMessage,N._webViewer.mydvs.Error.errorCode),function(K,Te,Fe){if(Te.has(K))return Fe;throw new TypeError("attempted to get private field on non-instance")}(this,Lt,Bt).call(this),N.bDispose=!1,N._webViewer.bThumbnailDispose=!1}return(0,f.Z)(Le,[{key:"show",value:function(){return!!this._webViewer._NouiNotSupport("show")&&(this.myThumbnailViewer?(this._webViewer.myViewer.setViewMode(1,1),this._webViewer.SetIfSinglePageMode(!0),this.myThumbnailViewer.showThumbnail=!0):(this.bDispose?o.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):o.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1))}},{key:"hide",value:function(){return!(!this._webViewer._NouiNotSupport("hide")||(this.myThumbnailViewer?this.myThumbnailViewer.showThumbnail=!1:(this.bDispose?o.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):o.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),1)))}},{key:"dispose",value:function(){var g;return!!this.bDispose||((g=this._webViewer.myViewer.removeThumbnailView(this.myThumbnailViewer))&&(this.bDispose=!0,this._webViewer._thumbnailViewer=void 0,this._webViewer.myThumbnailViewer=void 0,this.myThumbnailViewer=void 0,this._webViewer.bThumbnailDispose=!0),g)}},{key:"updateViewMode",value:function(g){if(!this.myThumbnailViewer)return this.bDispose?o.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):o.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1;if(g&&g.columns&&g.rows){if(g.columns<0||g.rows<0)return o.D.Errors.InvalidPropertyValue(this._webViewer._stwain),!1;this.myThumbnailViewer.showThumbnail=!1,this.myThumbnailViewer.setViewMode(g.columns,g.rows),!g.scrollDirection||"horizontal"!=g.scrollDirection&&"vertical"!=g.scrollDirection||(this.myThumbnailViewer.scrollDirection=g.scrollDirection),this.myThumbnailViewer.showThumbnail=!0}return!0}},{key:"updateCheckboxStyle",value:function(g){return this.myThumbnailViewer?(this.myThumbnailViewer.checkbox=g,!0):(this.bDispose?o.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):o.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1)}},{key:"updatePageNumberStyle",value:function(g){return this.myThumbnailViewer?(this.myThumbnailViewer.pageNumber=g,!0):(this.bDispose?o.D.Errors.ThumbnailViewerDispose(this._webViewer._stwain):o.D.Errors.ThumbnailViewerNotExist(this._webViewer._stwain),!1)}},{key:"on",value:function(g,w){g&&(o.D.isFunction(w)?this.myThumbnailViewer.on(g,w):o.D.Errors.CallbackNotAFunction(this._webViewer._stwain))}},{key:"off",value:function(g,w){var N=this;g&&(o.D.isUndefined(w)?(N.myThumbnailViewer.off(g),"click"==g&&N.myThumbnailViewer.on("click",function(K,Te){N._webViewer.UpdateInfo(!0,!1,!0)})):o.D.isFunction(w)?N.myThumbnailViewer.off(g,w):o.D.Errors.CallbackNotAFunction(N._webViewer._stwain))}}]),Le}();function Bt(){var Le=this,g=o.D.html5.Funs.DEF;g(Le,"location",{get:function(){return Le._webViewer.GetThumLocation()},set:function(w){return Le._webViewer.SetThumLocation(w)}}),g(Le,"size",{get:function(){return Le._webViewer.GetThumSize()},set:function(w){return Le._webViewer.SetThumSize(w)}}),g(Le,"scrollDirection",{get:function(){return Le._webViewer.GetThumScrollDirection()},set:function(w){return Le._webViewer.SetThumScrollDirection(w)}}),g(Le,"showPageNumber",{get:function(){return Le._webViewer.GetThumShowPageNumber()},set:function(w){return Le._webViewer.SetThumShowPageNumber(w)}}),g(Le,"showCheckbox",{get:function(){return Le._webViewer.GetThumShowCheckbox()},set:function(w){return Le._webViewer.SetThumShowCheckbox(w)}}),g(Le,"pageMargin",{get:function(){return Le._webViewer.GetThumMargin()},set:function(w){return Le._webViewer.SetThumMargin(w)}}),g(Le,"border",{get:function(){return Le._webViewer.GetThumBorder()},set:function(w){return Le._webViewer.SetThumBorder(w)}}),g(Le,"background",{get:function(){return Le._webViewer.GetThumBackground()},set:function(w){return Le._webViewer.SetThumBackground(w)}}),g(Le,"pageBackground",{get:function(){return Le._webViewer.GetThumPageBackground()},set:function(w){return Le._webViewer.SetThumPageBackground(w)}}),g(Le,"pageBorder",{get:function(){return Le._webViewer.GetThumPageBorder()},set:function(w){return Le._webViewer.SetThumPageBorder(w)}}),g(Le,"hoverPageBackground",{get:function(){return Le._webViewer.GetThumHoverBackground()},set:function(w){return Le._webViewer.SetThumHoverBackground(w)}}),g(Le,"hoverPageBorder",{get:function(){return Le._webViewer.GetThumHoverBorder()},set:function(w){return Le._webViewer.SetThumHoverBorder(w)}}),g(Le,"placeholderBackground",{get:function(){return Le._webViewer.GetThumPlaceholderBackground()},set:function(w){return Le._webViewer.SetThumPlaceholderBackground(w)}}),g(Le,"selectedPageBorder",{get:function(){return Le._webViewer.GetThumSelectedPageBorder()},set:function(w){return Le._webViewer.SetThumSelectedPageBorder(w)}}),g(Le,"selectedPageBackground",{get:function(){return Le._webViewer.GetThumSelectedPageBackground()},set:function(w){return Le._webViewer.SetThumSelectedPageBackground(w)}}),g(Le,"allowKeyboardControl",{get:function(){return Le._webViewer.GetThumAllowKeyboardControl()},set:function(w){return Le._webViewer.SetThumAllowKeyboardControl(w)}}),g(Le,"allowPageDragging",{get:function(){return Le._webViewer.GetThumAllowDrag()},set:function(w){return Le._webViewer.SetThumAllowDrag(w)}}),g(Le,"allowResizing",{get:function(){return Le._webViewer.GetThumAllowResize()},set:function(w){return Le._webViewer.SetThumAllowResize(w)}}),g(Le,"autoChangeIndex",{get:function(){return Le._webViewer.GetThumAutoChangeIndex()},set:function(w){return Le._webViewer.SetThumAutoChangeIndex(w)}})}o.D.UI.ThumbnailViewer=Ot,It=t(5238);var Ft=t.n(It),Kt=(It=t(3662),t.n(It)),tn="dvsDb",en="dvsDoc",Ee=function(){function Le(g,w){(0,s.Z)(this,Le),(0,c.Z)(this,"_db",void 0),(0,c.Z)(this,"syncDb",void 0),this._db=g.DataControl._db,w?this.syncDb={}:((g=this._db.DBMng._d)[tn]||(g[tn]={}),g[tn][en]||(g[tn][en]={}),this.syncDb=g[tn][en])}return(0,f.Z)(Le,[{key:"setCustomDataSync",value:function(g,w){return this.syncDb[g].customData=w,!0}},{key:"getCustomDataSync",value:function(g){return this.syncDb[g]||(this.syncDb[g]={}),this.syncDb[g].customData||(this.syncDb[g].customData={}),this.syncDb[g].customData}},{key:"getOriDataSync",value:function(g){return this.syncDb[g]||(this.syncDb[g]={}),this.syncDb[g].oriData}},{key:"getMetaDataSync",value:function(g){return this._db.getMetadata(g)}},{key:"dispose",value:function(){this._db=null,this.syncDb=null}}]),Le}(),_e=function(){function Le(g){(0,s.Z)(this,Le),(0,c.Z)(this,"_fileTree",void 0),this._fileTree=g._tree}return(0,f.Z)(Le,[{key:"createFile",value:function(g){return this._fileTree.createFile(g)}},{key:"openFile",value:function(w){return(w=this._fileTree.findChild(this._fileTree.dfNode,w))&&"file"===w.type?Ft()(w=w.chs).call(w):[]}},{key:"findFile",value:function(g){return this._fileTree.dfNode&&(g=this._fileTree.findChild(this._fileTree.dfNode,g))&&"file"===g.type?g:null}},{key:"replaceFileContent",value:function(K,w){var N;(K=this.findFile(K))&&(Kt()(N=K.chs).call(N,0),K.chs=w)}},{key:"getFileCount",value:function(g){return(g=this.findFile(g))?g.chs.length:0}},{key:"getIndexByUidInFile",value:function(g,w){var N=this.findFile(g);if(N)for(var K=N.chs.length,Te=0;Te<K;Te++)if(N.chs[Te]==w)return Te;return-1}},{key:"removeByIndexInFile",value:function(g,w){if(g=this.findFile(g)){var N=g.chs.length;if(0<=w&&w<N)return Kt()(N=g.chs).call(N,w,1),!0}return!1}},{key:"dispose",value:function(){this._fileTree=null}}]),Le}(),Ae=document,We=o.I.DWT,pe=["topPageChanged","click","rightclick","dblclick","mousemove","pageAreaSelected","pageAreaUnselected","dragdone","onDrop","bufferChanged","pageChange"],Ie={toolbars:{header:!1,topMenu:!1,asideMenu:!1,bottomMenu:!1},groups:{},buttons:{},thumbnail:{showThumbnailControl:!1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,border:"",background:W,pageBackground:F,pageBorder:U,hoverPageBackground:H,hoverPageBorder:Z,placeholderBackground:X,selectedPageBorder:$,selectedPageBackground:V,autoChangeIndex:!1,checkbox:De,pageNumber:fe},canvasConfig:{canvasMouseShape:"crosshair",canvasBackground:W,canvasBorder:"",selectedPageBorder:$,pageBorder:U,pageMargin:10,pageBackground:F,selectedPageBackground:V,hoverPageBorder:Z,hoverPageBackground:H,placeholderBackground:X,autoChangeIndex:!1,allowPageDragging:!0,columns:1,rows:1,scrollDirection:"vertical",checkbox:De,pageNumber:fe},showSidebar:!1,showMain:!0,showViewer:!0,sidebarWidth:"180",outerBorder:"1px solid rgb(204, 204, 204)",topMenuBorder:"",selectedAreaBorderColor:"rgb(42, 29, 43)",selectionRectAspectRatio:0,ifAutoScroll:!0,useOuterDrop:!0,allowSlide:!0},$e={background:"#434246",topMenuBorder:"",innerBorder:"",promptToSaveChange:!0,buttons:We.CustomizableDisplayInfo.buttons,dialogText:We.CustomizableDisplayInfo.dialogText},st={scannerViewer:{headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},bodyStyle:{background:"#ffffff ",loaderBarSource:""},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},fullScreen:!1,enableBorderDetection:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid "},scanButtonStyle:{background:"#fe8e14",color:"#ffffff"},resolution:{visibility:"visible",valueList:[{label:"720P",value:{width:1280,height:720}},{label:"1080P",value:{width:1920,height:1080}},{label:"2K",value:{width:2560,height:1440}},{label:"4K",value:{width:3840,height:2160}}],defaultValue:{width:1280,height:720}},autoScan:{visibility:"visible",enableAutoScan:!1},autoDetect:{visibility:"visible",enableAutoDetect:!1,acceptedPolygonConfidence:80,fpsLimit:3,acceptedBlurryScore:0,autoCaptureDelay:1e3},continuousScan:!0,switchCamera:{visibility:"visible"},loadLocalFile:{visibility:"visible"},funcConfirmExit:o.I.funcConfirmExit},documentEditorSettings:{visibility:"visible",defaultViewerName:"CropViewer",headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14",disabledColor:"#808080"},bodyStyle:{background:"#ffffff ",loaderBarSource:""},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},insert:{visibility:"visible",position:"before"},remove:{visibility:"visible",funcConfirmRemove:o.I.funcConfirmRemove},rotateLeft:{visibility:"visible"},filter:{visibility:"visible",valueList:[{label:"Original",value:"original",option:{level:1}},{label:"B&W",value:"blackAndWhite",option:{level:1}},{label:"Grayscale",value:"grayscale",option:{level:1}},{label:"Clean",value:"clean",option:{level:1}},{label:"Brightening",value:"brightening",option:{level:1}},{label:"Save Toner",value:"saveToner",option:{level:1}}],defaultValue:"original",applyToAll:{visibility:"visible",enableApplyToAll:!1,label:"Apply to all"}},crop:{visibility:"visible"},cropViewer:{visibility:"visible",polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid "},rotateLeft:{visibility:"visible"},rotateRight:{visibility:"visible"},autoDetectBorder:{visibility:"visible"},funcConfirmExit:o.I.funcConfirmCropViewerExit},funcConfirmExit:o.I.funcConfirmMainViewerExit,funcConfirmExitAfterSave:o.I.funcConfirmExitAfterSave}},Nt={isFunction:function(Le){return Le&&"function"==typeof Le},addClass:function(Le,g){(Le=o.D.one(Le))&&0<Le.length&&Le.addClass(g)},removeClass:function(Le,g){(Le=o.D.one(Le))&&0<Le.length&&Le.removeClass(g)},output:function(Le,g){o.I.DWT.Debug&&o.D.log(g)},getTop:function(Le){var g=Le.offsetTop;return null!=Le.offsetParent&&(g+=Nt.getTop(Le.offsetParent)),g},getLeft:function(Le){var g=Le.offsetLeft;return null!=Le.offsetParent&&(g+=Nt.getLeft(Le.offsetParent)),g}},Pt=(o.D._safePromptCustomMsg(function(){$e.buttons=We.CustomizableDisplayInfo.buttons,$e.dialogText=We.CustomizableDisplayInfo.dialogText}),function(){function Le(g,w,N){(0,s.Z)(this,Le),(0,c.Z)(this,"_dvsWrapper",null),(0,c.Z)(this,"_fileWrapper",null),(0,c.Z)(this,"_bFireSync",!0);var K=this;K._ImgManager=g,K._stwain=g._stwain,K._UIView=N,K._currentTag="",K.bShowImageEdit=!1,K.acceptDrop=!0,K.currentFileName=L,K._documentScanConfiguration="",K.addCSSForShowVideo=!1,K.ifWebviewerInit=!1,K._Init(w),o.I.funcConfirmExit&&o.I.Lib.isFunction(o.I.funcConfirmExit)&&(st.scannerViewer.funcConfirmExit=o.I.funcConfirmExit),o.I.funcConfirmRemove&&o.I.Lib.isFunction(o.I.funcConfirmRemove)&&(st.documentEditorSettings.remove.funcConfirmRemove=o.I.funcConfirmRemove),o.I.funcConfirmMainViewerExit&&o.I.Lib.isFunction(o.I.funcConfirmMainViewerExit)&&(st.documentEditorSettings.funcConfirmExit=o.I.funcConfirmMainViewerExit),o.I.funcConfirmExitAfterSave&&o.I.Lib.isFunction(o.I.funcConfirmExitAfterSave)&&(st.documentEditorSettings.funcConfirmExitAfterSave=o.I.funcConfirmExitAfterSave),o.I.funcConfirmCropViewerExit&&o.I.Lib.isFunction(o.I.funcConfirmCropViewerExit)&&(st.documentEditorSettings.cropViewer.funcConfirmExit=o.I.funcConfirmCropViewerExit),K._globalScanConfiguration_ScannViewer=o.I.Lib.clone(st),K._globalScanConfiguration=o.I.Lib.clone(st),K._globalScanConfiguration.documentEditorSettings.defaultViewerName="mainViewer",M&&o.I.DWT.UseDefaultViewer&&(K._stwain.Viewer=new M(K,g))}return(0,f.Z)(Le,[{key:"dispose",value:function(){var g=this;g.containerElement=null,g.myViewer&&(g.myViewer.off("bufferChanged"),g.mydvs.ViewControl.removeViewer(g.myViewer),g.myViewer=null),g.mydvs&&(g.mydvs.dispose(),g.mydvs=null),g._dvsWrapper&&(g._dvsWrapper.dispose(),g._dvsWrapper=null),g._fileWrapper&&(g._fileWrapper.dispose(),g._fileWrapper=null),g.myccvs&&(g.myccvs.dispose(),g.myccvs=null),g.mydocEditManager&&(g.mydocEditManager.dispose(),g.mydocEditManager=null),g._UIView=null,g._ImgManager=null,g._stwain.Viewer&&(g._stwain.Viewer.dispose(),g._stwain.Viewer=null),g._stwain=null}},{key:"_Init",value:function(g){var w,N,K=this;g.Container&&(o.D.isNodeList(g.Container)||o.D.isArray(g.Container)&&0<g.Container.length)&&(N=g.Container[0])?((w=document.createElement("div")).style.width="100%",w.style.height="100%",N.appendChild(w),K.containerElement=N):K.containerElement="",K.mydvs?""!=K.containerElement&&(K.BindView(K.containerElement),K.show()):(K.initWidth=g.Width,K.initHeight=g.Height,(N=Ie).width=K.initWidth,N.height=K.initHeight,K._stwain._isPC()||(N.canvasConfig.canvasMouseShape="pointer"),K.mydvs=new o.I.ViewModel({uiConfig:N,displayMode:"continuous",fitType:"window",scrollerConfig:{}}),K._dvsWrapper=new Ee(K.mydvs),K._fileWrapper=new _e(K.mydvs.File),K._bindViewUi=!1,K.myViewer=K.mydvs.ViewControl.getViewerByUid(),o.I.DWT.UseDefaultViewer&&K.containerElement&&K.mydvs.ViewControl&&(K.mydvs.ViewControl.bindViewUiConstructor(o.I.ViewUi),K.myViewer.bindView(w),K._bindViewUi=!0),K.myViewer&&(K._stwain._isPC()?K.SetOperationMode(1):K.SetOperationMode(0)),K.containerElement&&K._InitDVS(),K._bindEvent=!1,K._bindViewUi?(K._BindViewerEvents(),K._bindEvent=!0):K.myViewer.on("bufferChanged",function(Te,Fe){K.bufferChanged(Te,Fe)}),K._bRegistedLoad=!1)}},{key:"BindView",value:function(g){var w,N=this;return N.OnCloseImageEditor(),g=g&&"DIV"==g.nodeName?g:Ae.getElementById(g),o.D.isUndefined(g)||o.D.isNull(g)?w=g:((w=document.createElement("div")).style.width="100%",w.style.height="100%",g.appendChild(w)),0==N._bindViewUi&&N.mydvs.ViewControl&&(N.mydvs.ViewControl.bindViewUiConstructor(o.I.ViewUi),o.D.html5.ui.initProgress(N._stwain),N._bindViewUi=!0),o.D.isUndefined(N.myViewer.width)&&(N.initWidth=""!=g.style.width?g.style.width:0<g.clientWidth?g.clientWidth:0<g.offsetWidth?g.offsetWidth:0<g.scrollWidth?g.scrollWidth:100),o.D.isUndefined(N.myViewer.height)&&(N.initHeight=""!=g.style.height?g.style.height:0<g.clientHeight?g.clientHeight:0<g.offsetHeight?g.offsetHeight:0<g.scrollHeight?g.scrollHeight:100),(w=N.myViewer.bindView(w))?(N.myViewer.showViewer=!1,N.containerElement=g,N._stwain._containerElement=g,N._stwain._bBindViewer=!0,N._InitDVS(),N.SetAcceptDrop(!0),N.SetAllowSlide(!0),N.myViewer.off("bufferChanged"),N.resetUISettingsInner(!1,N.GetWidth(),N.GetHeight()),N._bindEvent||N._BindViewerEvents(),N.hide(),w):(o.D.Errors.WebviewerError(N._stwain,N.mydvs.Error.errorMessage,N.mydvs.Error.errorCode),!1)}},{key:"CreateTemplate",value:function(g,w){return this._stwain.Template=new de(this,this._ImgManager,w),this._stwain.Template}},{key:"BindTemplate",value:function(g,w){return!(!w||!w._documentTemplate)&&w._documentTemplate.BindView(g)}},{key:"show",value:function(){var g;return!!this._NouiNotSupport("show")&&(this._stwain.Template&&this._stwain.Template._documentTemplate&&(this._stwain.Template._documentTemplate.ifShowDocumentTemplate(!0),(g=document.getElementById("btnCapture"+this.myViewer.postfix))&&(g.style.display="")),this.myViewer.showViewer=!0)}},{key:"hide",value:function(){var g;return!(!this._NouiNotSupport("hide")||(this._stwain.Template&&this._stwain.Template._documentTemplate&&(this._stwain.Template._documentTemplate.ifShowDocumentTemplate(!1),(g=document.getElementById("btnCapture"+this.myViewer.postfix))&&(g.style.display="none")),this.myViewer.showViewer=!1))}},{key:"UnbindView",value:function(){var g,w=this;if(w._stwain&&w._stwain.Addon&&w._stwain.Addon.Camera&&w._stwain.Addon.Camera._viewer&&""!=w._stwain.Addon.Camera.getStatus()&&w._stwain.Addon.Camera.closeSource(),g=w.myViewer.unbindView()){if(w._bindViewUi=!1,w._UnbindViewerEvents(),w._bindEvent=!1,w._imageEditor&&w._imageEditor.dispose(),w._documentEditor&&w._documentEditor.dispose(),w._thumbnailViewer&&w._thumbnailViewer.dispose(),w._customElement&&w._customElement.dispose(),w.closeVideo(),w.containerElement&&w.containerElement.childNodes&&0<w.containerElement.childNodes.length)if(1==w.containerElement.childNodes.length)w.containerElement&&0==w.containerElement.childNodes[0].childNodes.length&&w.containerElement.removeChild(w.containerElement.childNodes[0]);else for(var N=w.containerElement.childNodes.length-1;0<=N;N--)w.containerElement&&w.containerElement.removeChild(w.containerElement.childNodes[N]);w.containerElement=""}else o.D.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode);return w._stwain._bBindViewer=!1,g}},{key:"SetUIView",value:function(g){this._UIView=g}},{key:"_BindViewerEvents",value:function(){var g=this;g.myViewer&&(g.myViewer.off("bufferChanged"),o.D.each(pe,function(w){g.myViewer.on(w,function(N,K){g[w](N,K)})}))}},{key:"_UnbindViewerEvents",value:function(){var g=this;o.D.each(pe,function(w){"bufferChanged"!=w&&g.myViewer.off(w)})}},{key:"_InitDVS",value:function(){var g=this;g.ifWebviewerInit=!0,g.myViewer.showHeader=!1,g.myViewer.showTopMenu=!1,g.myViewer.showFooter=!1,g.myViewer.showMain=!0,g.myViewer.bOnlyShowThumbnailsView=!1,g.myViewer.showThumbnailControl=!1,g.myViewer.showLatestPage=!0,g.myViewer.minZoom=g._UIView.MIN_ZOOM,g.myViewer.maxZoom=g._UIView.MAX_ZOOM}},{key:"ShowImageEditor",value:function(g,w,N,K){return g&&N&&K?($e.element=g,$e.width=N,$e.height=K):($e.element=void 0,$e.width=void 0,$e.height=void 0),$e.border=this.GetBorder(),$e.selectionRectAspectRatio=this.GetSelectionRectAspectRatio(),this.createImageEditor($e),0!=this._stwain._errorCode&&(this._imageEditor.dispose(),this.createImageEditor($e)),this._imageEditor.show(),!0}},{key:"OnCloseImageEditor",value:function(){return!!this.bShowImageEdit&&(this._imageEditor&&this._imageEditor.dispose(),this.bShowImageEdit=!1,this._imageEditor=void 0,this._imageEditorInner=void 0,!0)}},{key:"GetUidByIndex",value:function(g){return g<0||g>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),-1):this.myViewer.getUidByIndex(g)}},{key:"GetIndexByUid",value:function(g){return g&&""!=g&&-1!=g?this.myViewer.getIndexByUid(g):(o.D.Errors.IndexOutOfRange(this._stwain),-1)}},{key:"SetMetaDataByIndex",value:function(g,w){if(!(g<0||g>=this.GetHowManyImagesInBuffer()))return this.myViewer.setMetadataByIndex(g,w);o.D.Errors.IndexOutOfRange(this._stwain)}},{key:"GetMetaDataByIndex",value:function(g){if(!(g<0||g>=this.GetHowManyImagesInBuffer()))return this.myViewer.getMetadataByIndex(g);o.D.Errors.IndexOutOfRange(this._stwain)}},{key:"GetCustomDataByIndex",value:function(g){if(!(g<0||g>=this.GetHowManyImagesInBuffer()))return g=o.D.isArray(g)?g[0]:g,this.myViewer.getCustomDataByIndex(g);o.D.Errors.IndexOutOfRange(this._stwain)}},{key:"GetHowManyImagesInBuffer",value:function(){return o.D.isUndefined(this.myViewer.currentPageCount)?0:this.myViewer.currentPageCount}},{key:"UpdateInfo",value:function(g,w,N){w&&o.I.Lib.hideMask(),g&&this.bShowImageEdit&&this._imageEditorInner&&this._imageEditorInner.updateMode(N)}},{key:"AppendImage",value:function(g,w){var N,K,Te=g.imageUrl,Fe=g.minImageUrl,Ke=g.serverId,Je=g.bAppendImage,Ye=g.index,qt={},xe=this.currentFileName;if(w&&(o.D.isUndef(w.currentFileName)||(xe=w.currentFileName),o.D.isUndef(w.width)||(qt.width=w.width),o.D.isUndef(w.height)||(qt.height=w.height),o.D.isUndef(w.bitDepth)||(qt.bitDepth=w.bitDepth),o.D.isUndef(w.resolutionX)||(qt.resolutionX=w.resolutionX),o.D.isUndef(w.resolutionY)||(qt.resolutionY=w.resolutionY),o.D.isUndef(w.oriBlobData)||(K=w.oriBlobData)),0==this.ifFileNameExist(xe))return!1;if(o.D.log("AppendImage_oriData:"+Te),Je||0==Je&&0==this.GetHowManyImagesInBuffer()){if(K){var ut,ue={imageId:Ke};for(ut in K)K.hasOwnProperty(ut)&&(ue[ut]=K[ut]);N=this.mydvs.DataControl.appendSync(xe,[{oriData:Te,minData:Fe,metadata:qt,customData:ue}])}else N=this.mydvs.DataControl.appendSync(xe,[{oriData:Te,minData:Fe,metadata:qt,customData:{imageId:Ke}}]);return g.uuid=N[0],this.UpdateInfo(!0),N[0]}return N=this.mydvs.DataControl.insertSync(xe,[{oriData:Te,minData:Fe,metadata:qt,customData:{imageId:Ke}}],Ye),g.uuid=N[0],this.UpdateInfo(!0),N[0]}},{key:"MobileAppendImage",value:function(g,w){var N=g.bAppendImage,K=g.index,Te={},Fe=this.currentFileName;return w.imageId=g.serverId,w&&w.currentFileName&&(Fe=w.currentFileName),0!=this.ifFileNameExist(Fe)&&(w&&w.metadata&&(o.D.isUndef(w.metadata.width)||(Te.width=w.metadata.width),o.D.isUndef(w.metadata.imageWidth)||(Te.width=w.metadata.imageWidth),o.D.isUndef(w.metadata.height)||(Te.height=w.metadata.height),o.D.isUndef(w.metadata.imageHeight)||(Te.height=w.metadata.imageHeight),o.D.isUndef(w.metadata.bitDepth)||(Te.bitDepth=w.metadata.bitDepth),o.D.isUndef(w.metadata.imageBitDepth)||(Te.bitDepth=w.metadata.imageBitDepth),o.D.isUndef(w.metadata.resolutionX)||(Te.resolutionX=w.metadata.resolutionX),o.D.isUndef(w.metadata.imageXResolution)||(Te.resolutionX=w.metadata.imageXResolution),o.D.isUndef(w.metadata.resolutionY)||(Te.resolutionY=w.metadata.resolutionY),o.D.isUndef(w.metadata.imageYResolution)||(Te.resolutionY=w.metadata.imageYResolution),o.D.isUndef(w.metadata.oriBlobData)||(Te.oriBlobData=w.metadata.oriBlobData),delete w.metadata),"url"!=w.dataType&&"srcId"in w?(N=0==N&&0==this.GetHowManyImagesInBuffer()?this.mydvs.DataControl.appendSync(Fe,[{oriData:null,minData:null,metadata:Te,customData:w}]):this.mydvs.DataControl.insertSync(Fe,[{oriData:null,minData:null,metadata:Te,customData:w}],K),g.uuid=N[0],this.UpdateInfo(!0),N[0]):("src"in w&&(g.imageUrl=w.src,delete w.src),"imageUrl"in w&&(g.imageUrl=w.imageUrl,delete w.imageUrl),Te.currentFileName=Fe,this.AppendImage(g,Te)))}},{key:"UpdateImage",value:function(Fe,w){var N=Fe.imageUrl,K=Fe.minImageUrl,Te=Fe.serverId,Ke=(Fe=Fe.uuid,{});return w&&(o.D.isUndef(w.width)||(Ke.width=w.width),o.D.isUndef(w.height)||(Ke.height=w.height),o.D.isUndef(w.bitDepth)||(Ke.bitDepth=w.bitDepth),o.D.isUndef(w.resolutionX)||(Ke.resolutionX=w.resolutionX),o.D.isUndef(w.resolutionY)||(Ke.resolutionY=w.resolutionY)),Fe&&""!=Fe&&-1!=Fe?(this._UpdateImageInner(Fe,{oriData:N,minData:K,customData:{imageId:Te},metadata:Ke}),this.UpdateInfo(!1,!0),Fe):(o.D.Errors.IndexOutOfRange(this._stwain),!1)}},{key:"MobileUpdateImage",value:function(g,w){var N=g.index,K=g.uuid,Te={},Fe={};return K&&""!=K&&-1!=K?((Te=this.GetMetaDataByIndex(N))&&"metadata"in w&&w.metadata&&(o.D.isUndef(w.metadata.width)||(Te.width=w.metadata.width),o.D.isUndef(w.metadata.imageWidth)||(Te.width=w.metadata.imageWidth),o.D.isUndef(w.metadata.height)||(Te.height=w.metadata.height),o.D.isUndef(w.metadata.imageHeight)||(Te.height=w.metadata.imageHeight),o.D.isUndef(w.metadata.bitDepth)||(Te.bitDepth=w.metadata.bitDepth),o.D.isUndef(w.metadata.imageBitDepth)||(Te.bitDepth=w.metadata.imageBitDepth),o.D.isUndef(w.metadata.resolutionX)||(Te.resolutionX=w.metadata.resolutionX),o.D.isUndef(w.metadata.imageXResolution)||(Te.resolutionX=w.metadata.imageXResolution),o.D.isUndef(w.metadata.resolutionY)||(Te.resolutionY=w.metadata.resolutionY),o.D.isUndef(w.metadata.imageYResolution)||(Te.resolutionY=w.metadata.imageYResolution)),"url"!=w.dataType&&"srcId"in w?(w&&w.src&&w.srcId&&((Fe=this.myViewer.getCustomDataByIndex(N))&&(Fe.src=w.src,Fe.srcId=w.srcId,o.D.isUndef(w.imgType)||(Fe.imgType=w.imgType),N={},Fe&&(N.customData=Fe,N.metadata=Te,this._UpdateImageInner(K,N))),this.UpdateInfo(!1,!0)),K):("src"in w&&(g.imageUrl=w.src),"imageUrl"in w&&(g.imageUrl=w.imageUrl),this.UpdateImage(g,Te))):(o.D.Errors.IndexOutOfRange(this._stwain),!1)}},{key:"_UpdateImageInner",value:function(g,w){this.mydvs.DataControl.updateSync(g,w)}},{key:"RemoveByIndex",value:function(g){var w=this;if(g<0||g>=w.GetHowManyImagesInBuffer())return o.D.Errors.IndexOutOfRange(w._stwain),!1;w.bShowImageEdit&&w._imageEditorInner&&1==w._imageEditorInner._IfChangedWithinTheEditor&&(w._imageEditorInner.iChangedIndex!=g?w._imageEditorInner.iChangedIndex>g&&w._imageEditorInner.iChangedIndex--:(w._imageEditorInner._IfChangedWithinTheEditor=!1,w._imageEditorInner.iChangedIndex=-1,w._imageEditorInner.OnCloseInstall())),g==this.GetCurrentIndex()&&w.clearSelectedAreas();var N=[];return N.push(g),(g=w.myViewer.removeSync(N))?w.UpdateInfo(!0):o.D.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),g}},{key:"RemoveAllImages",value:function(){var g,w=this;return w.bShowImageEdit&&w._imageEditorInner&&1==w._imageEditorInner._IfChangedWithinTheEditor&&(w._imageEditorInner._IfChangedWithinTheEditor=!1,w._imageEditorInner.iChangedIndex=-1,w._imageEditorInner.OnCloseInstall()),w.clearSelectedAreas(),(g=w.myViewer.removeAllSync())?(w.UpdateInfo(),w.bShowImageEdit&&w._imageEditorInner&&w._imageEditorInner.updateMode()):o.D.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),g}},{key:"SetCurrentIndex",value:function(g){return g<0||g>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),o.I.Lib.hideMask(),!1):!/^(\d+)$/.test(g)||g<0?(o.D.Errors.MobileServer_InvalidIndex(this._stwain),o.I.Lib.hideMask(),!1):((g=this.myViewer.setCurrentIndex(g))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),this.UpdateInfo(!0,!0),g)}},{key:"OnlySetCurrentIndex",value:function(g){return g<0||g>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),!1):((g=this.myViewer.setCurrentIndex(g))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g)}},{key:"GetCurrentIndex",value:function(){var g=-1;return 0<this.GetHowManyImagesInBuffer()&&(g=this.myViewer.getCurrentIndex(),(o.D.isUndef(g)||g<0)&&o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode)),g}},{key:"SetSelectedindexes",value:function(g){return(g=this.myViewer.setSelectedIndexes(g))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"GetSelectedindexes",value:function(){return this.myViewer.getSelectedIndexes()}},{key:"GoToPage",value:function(g){return g<0||g>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),o.I.Lib.hideMask(),-1):!/^(\d+)$/.test(g)||g<0?(o.D.Errors.MobileServer_InvalidIndex(this._stwain),o.I.Lib.hideMask(),-1):((g=this.myViewer.gotoPage(g))<0&&o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),this.UpdateInfo(!0,!0),g)}},{key:"SetSelectedImageArea",value:function(g,w,N,K){var Te=[];if(!this._NouiNotSupport("setSelectedAreas"))return!1;var Fe={};return Fe.left=g,Fe.top=w,Fe.width=N-g,Fe.height=K-w,Te.push(Fe),(N=this.myViewer.setSelectedBoxes(Te,!1))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),N}},{key:"SetSelectionRectAspectRatio",value:function(g){return!!this._NouiNotSupport("selectionRectAspectRatio")&&(this.myViewer.selectionBoxAspectRatio=g,!0)}},{key:"GetSelectionRectAspectRatio",value:function(){return this._NouiNotSupport("selectionRectAspectRatio")?this.myViewer.selectionBoxAspectRatio:""}},{key:"ZoomIn",value:function(){var g;return(g=this.myViewer.zoomIn())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"ZoomOut",value:function(){var g;return(g=this.myViewer.zoomOut())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"SetZoom",value:function(g,w,N){var K=!1;return!!this._NouiNotSupport("zoom")&&((K=w&N?this.myViewer.zoomTo(g,w,N):this.myViewer.zoom=g)||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),K)}},{key:"GetZoom",value:function(){return this._NouiNotSupport("zoom")?this.myViewer.zoom:""}},{key:"SetFitType",value:function(g){var w="window";if(!this._NouiNotSupport("fitType"))return!1;if(!o.D.isUndefined(g)){if("width"!=g&&"height"!=g&&"window"!=g)return o.D.Errors.InvalidValue(this._stwain),!1;w=g}return this.myViewer.fitType=w,!0}},{key:"GetMouseShape",value:function(){var g;switch(this.GetCursor()){case"default":g=o.I.DWT.EnumDWT_MouseShape.Default;break;case"pointer":g=o.I.DWT.EnumDWT_MouseShape.Hand;break;case"crosshair":default:g=o.I.DWT.EnumDWT_MouseShape.Crosshair;break;case"zoom-in":g=o.I.DWT.EnumDWT_MouseShape.Zoom}return g}},{key:"SetMouseShape",value:function(g){var w;switch(g){case o.I.DWT.EnumDWT_MouseShape.Default:w="default";break;case o.I.DWT.EnumDWT_MouseShape.Hand:w="pointer";break;case o.I.DWT.EnumDWT_MouseShape.Crosshair:w="crosshair";break;case o.I.DWT.EnumDWT_MouseShape.Zoom:w="zoom-in";break;default:w="crosshair"}return this.SetCursor(w),!0}},{key:"SetImageMargin",value:function(g){return this.SetPageMargin(g)}},{key:"GetImageMargin",value:function(){return this.GetPageMargin()}},{key:"SetSelectionImageBorderColor",value:function(g){return o.I.Lib.isNumber(g)&&(g=o.I.Lib.getColor(g)),-1==r()(g).call(g,"1px solid")&&(g="1px solid "+g),this.SetSelectedPageBorder(g)}},{key:"GetSelectedPageBorder",value:function(){return this._NouiNotSupport("selectedPageBorder")?this.myViewer.selectedPageBorder:""}},{key:"SetSelectedPageBorder",value:function(g){return!!this._NouiNotSupport("selectedPageBorder")&&(this.myViewer.selectedPageBorder=g,this._thumbnailViewer&&this.SetThumSelectedPageBorder(g),!0)}},{key:"GetSelectedPageBackground",value:function(){return this._NouiNotSupport("selectedPageBackground")?this.myViewer.selectedPageBackground:""}},{key:"SetSelectedPageBackgroundInner",value:function(g){return this.myViewer.selectedPageBackground=g,!0}},{key:"SetSelectedPageBackground",value:function(g){return!!this._NouiNotSupport("selectedPageBackground")&&(this.SetSelectedPageBackgroundInner(g),this._thumbnailViewer&&this.SetThumSelectedPageBackground(g),!0)}},{key:"GetShowPageNumber",value:function(){return this._NouiNotSupport("showPageNumber")?"visible"==this.myViewer.pageNumber.visibility:""}},{key:"SetShowPageNumberInner",value:function(g){var w={visibility:"hidden"};return g&&(w.visibility="visible"),this.UpdatePageNumberStyle(w),!0}},{key:"SetShowPageNumber",value:function(g){if(!this._NouiNotSupport("showPageNumber"))return!1;if(!o.D.isBoolean(g))return o.D.Errors.InvalidValue(this._stwain),!1;var w={visibility:"hidden"};return g&&(w.visibility="visible"),this.UpdatePageNumberStyle(w),this._thumbnailViewer&&this.UpdateThumPageNumberStyle(w),!0}},{key:"UpdatePageNumberStyle",value:function(g){return!!this._NouiNotSupport("updatePageNumberStyle")&&(this.myViewer.pageNumber=g,this._thumbnailViewer&&this.UpdateThumPageNumberStyle(g),!0)}},{key:"GetPageNumberStyle",value:function(){return!!this._NouiNotSupport("getPageNumberStyle")&&this.myViewer.pageNumber}},{key:"GetAutoChangeIndex",value:function(){return this._NouiNotSupport("autoChangeIndex")?this.myViewer.autoChangeIndex:""}},{key:"SetAutoChangeIndex",value:function(g){return!!this._NouiNotSupport("autoChangeIndex")&&(o.D.isBoolean(g)?(this.myViewer.autoChangeIndex=g,!0):(o.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetShowCheckbox",value:function(){return this._NouiNotSupport("checkbox")?"visible"==this.myViewer.checkbox.visibility:0}},{key:"SetShowCheckbox",value:function(g){if(!this._NouiNotSupport("checkbox"))return!1;var w={visibility:"hidden"};return g&&(w.visibility="visible"),"visible"==(this.myViewer.checkbox=w).visibility?this.SetMultiSelectMode(o.I.DWT.EnumDWT_SelectionMode.Multiple):this.SetMultiSelectMode(o.I.DWT.EnumDWT_SelectionMode.Single),this._thumbnailViewer&&(this.UpdateThumCheckboxStyle(w),this.SetThumMultiSelectMode("visible"==w.visibility?o.I.DWT.EnumDWT_SelectionMode.Multiple:o.I.DWT.EnumDWT_SelectionMode.Single)),!0}},{key:"GetCheckboxStyle",value:function(){return!!this._NouiNotSupport("getCheckboxStyle")&&this.myViewer.checkbox}},{key:"UpdateCheckboxStyle",value:function(g){return!!this._NouiNotSupport("updateCheckboxStyle")&&(this.myViewer.checkbox=g,this._thumbnailViewer&&this.UpdateThumCheckboxStyle(g),!0)}},{key:"GetMultiSelectMode",value:function(){return this._NouiNotSupport("multiSelectMode")?this.myViewer.multiSelectMode?o.I.DWT.EnumDWT_SelectionMode.Multiple:o.I.DWT.EnumDWT_SelectionMode.Single:0}},{key:"SetMultiSelectMode",value:function(g){return!!this._NouiNotSupport("multiSelectMode")&&(o.D.isNumber(g)?(this.myViewer.multiSelectMode=g==o.I.DWT.EnumDWT_SelectionMode.Multiple,this._thumbnailViewer&&this.SetThumMultiSelectMode(g),!0):(o.D.Errors.InvalidValue(this._stwain),!1))}},{key:"SetHoverPageBackground",value:function(g){return this.myViewer.hoverPageBackground=g,!0}},{key:"SetBackground",value:function(g){return!!this._NouiNotSupport("background")&&(o.I.Lib.isNumber(g)&&(g=o.I.Lib.getColor(g)),this.myViewer.canvasBackground=g,this._thumbnailViewer&&this.SetThumBackground(g),!0)}},{key:"GetBackground",value:function(){return this._NouiNotSupport("background")?this.myViewer.canvasBackground:""}},{key:"SetViewerBorder",value:function(g){return this.SetBorder("1px solid"+g)}},{key:"SetWidth",value:function(g){return!!this._NouiNotSupport("width")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(g)||g<=0?(o.D.Errors.MobileServer_InvalidWidth(this._stwain),!1):(this.myViewer.width=g,!0))}},{key:"GetWidth",value:function(){return this._NouiNotSupport("width")?this.myViewer.width:""}},{key:"SetWidthInner",value:function(g,w){return!w&&o.D.isString(g)&&0<=r()(g).call(g,"%")?(w=o.D.one("#"+this._stwain._containerID),this.myViewer.width=a()(o.D.css(w,"width")*a()(g)/100)):this.myViewer.width=g,!0}},{key:"GetHeight",value:function(){return this._NouiNotSupport("height")?this.myViewer.height:""}},{key:"SetHeight",value:function(g){return!!this._NouiNotSupport("height")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(g)||g<=0?(o.D.Errors.MobileServer_InvalidHeight(this._stwain),!1):(this.myViewer.height=g,!0))}},{key:"GetIdPostfix",value:function(){return this._NouiNotSupport("idPostfix")?this.myViewer.postfix:""}},{key:"SetHeightInner",value:function(g,w){return!w&&o.D.isString(g)&&0<=r()(g).call(g,"%")?(w=o.D.one("#"+this._stwain._containerID),this.myViewer.height=a()(o.D.css(w,"height")*a()(g)/100)):this.myViewer.height=g,!0}},{key:"SwitchImage",value:function(g,w){return g<0||g>=this.GetHowManyImagesInBuffer()||w<0||w>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),!1):((g=this.myViewer.switchPage(g,w))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g)}},{key:"MoveImage",value:function(g,w){return g<0||g>=this.GetHowManyImagesInBuffer()||w<0||w>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),!1):((g=this.myViewer.movePage(g,w))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g)}},{key:"SetIfSinglePageMode",value:function(g){return!!this._NouiNotSupport("singlePageMode")&&(this.myViewer.displayMode=g?"single":"continuous",!0)}},{key:"GetIfSinglePageMode",value:function(){return!!this._NouiNotSupport("singlePageMode")&&"continuous"!=this.myViewer.displayMode}},{key:"SetAcceptDrop",value:function(g){return!!this._NouiNotSupport("acceptDrop")&&(o.D.isBoolean(g)?(this.acceptDrop=g,!0):(o.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetAcceptDrop",value:function(){return this._NouiNotSupport("acceptDrop")?this.acceptDrop:""}},{key:"SetAllowSlide",value:function(g){return!!this._NouiNotSupport("allowSlide")&&(o.D.isBoolean(g)?(this.myViewer.allowSlide=g,!0):(o.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetAllowSlide",value:function(){return this._NouiNotSupport("allowSlide")?this.myViewer.allowSlide:""}},{key:"SetViewMode",value:function(g,w){var N=this,K=!1,Te="vertical";return!!N._NouiNotSupport("setViewMode")&&(o.D.isNumber(g)&&o.D.isNumber(w)?(N._thumbnailViewer&&N._thumbnailViewer.hide(),N.clearSelectedAreas(),-1==g&&-1==w?(N.SetIfSinglePageMode(!0),w=0-w,g=0-g,K=!0):(w<0&&(Te="horizontal",w=0-w),g<0&&(g=0-g),N.myViewer.scrollDirection=Te,(K=N.myViewer.setViewMode(g,w))||o.D.Errors.WebviewerError(N._stwain,N.mydvs.Error.errorMessage,N.mydvs.Error.errorCode),N.SetIfSinglePageMode(!1),"zoom-in"==N.GetCursor()&&N.SetCursor("crosshair")),K):(o.D.Errors.InvalidValue(N._stwain),!1))}},{key:"RemoveImageTag",value:function(g){var w=this;return g<0||g>=w.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(w._stwain),!1):(g=w.GetUidByIndex(g))&&""!=g&&-1!=g?((g=w.mydvs.Tag.removePageTag(g))||o.D.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),g):(o.D.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),!1)}},{key:"FilterImagesByTag",value:function(g,w,N){var K,Te=this;return o.D.isUndefined(g)||null==g||0==g.length?(Te._currentTag="",0==(K=Te.GetCurrentFileName()).length&&(K=L),Te.mydvs.File.openFile(K,Te.myViewer.uid)?(Te.mydvs.Tag.setDefaultTag(""),o.D.isFunction(w)&&w()):(o.D.Errors.WebviewerError(Te._stwain,Te.mydvs.Error.errorMessage,Te.mydvs.Error.errorCode),o.D.isFunction(N)&&N(Te.mydvs.Error.errorCode,Te.mydvs.Error.errorMessage))):(Te._currentTag=g,Te.mydvs.Tag.openTag(g,Te.myViewer.uid)?o.D.isFunction(w)&&w():(o.D.Errors.WebviewerError(Te._stwain,Te.mydvs.Error.errorMessage,Te.mydvs.Error.errorCode),o.D.isFunction(N)&&N(Te.mydvs.Error.errorCode,Te.mydvs.Error.errorMessage))),!0}},{key:"ClearFilter",value:function(){this._currentTag="";var g=this.GetCurrentFileName();return 0==g.length&&(g=L),(g=this.mydvs.File.openFile(g,this.myViewer.uid))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"GetServerIdList",value:function(){var g,w,N=[];if(w=this.myViewer.getCurrentPageUids())for(var K=0;K<w.length;K++)(g=w[K])&&(g=this.myViewer.getCustomDataByUid(g))&&N.push(g.imageId);else o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode);return N}},{key:"GetTagContents",value:function(g){var w;return(w=g&&0<g.length?this.mydvs.Tag.getTagContents(g):this.myViewer.getCurrentPageUids())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),w}},{key:"SetDefaultTag",value:function(g){return this._currentTag=g,this.mydvs.Tag.addTag(g),(g=this.mydvs.Tag.setDefaultTag(g))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"AddImageTag",value:function(g,w){var N;this.mydvs.Tag.addTag(w);for(var K=0;K<g.length;K++)0<=(N=g[K])&&(N=this.GetUidByIndex(N))&&""!=N&&-1!=N&&this.mydvs.Tag.addPageTag(N,w);return!0}},{key:"GetCurrentTag",value:function(){return this._currentTag}},{key:"RenameTag",value:function(g,w){return this._currentTag=w,(g=this.mydvs.Tag.renameTag(g,w))?this.mydvs.Tag.setDefaultTag(w):o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"RemoveTag",value:function(g,w){var N=this,K=!1,Te=!1,Fe=N.mydvs.Tag.getCurrentTag();if(Fe&&(Te=Fe.name==g),o.D.isUndefined(w))K=N.mydvs.Tag.removeTag(g),Te&&N.ClearFilter();else{if(!o.D.isArray(w))return o.D.Errors.IndicesNotArray(N),!1;if(!N._stwain._checkIndices(w))return!1;var Ke=[];o.D.each(w,function(Je){-1!=(Je=N.GetUidByIndex(Je))&&Ke.push(Je)}),o.D.each(Ke,function(Je){if(!(K=N.mydvs.Tag.removePageTag(Je,g)))return!1})}return K||o.D.Errors.WebviewerError(N._stwain,N.mydvs.Error.errorMessage,N.mydvs.Error.errorCode),K}},{key:"GetTagList",value:function(){var g,w,N,K=this,Te=[];return(N=K.mydvs.Tag.getTagList())?o.D.each(N,function(Fe){if(g=[],w={},Fe.uids)for(var Ke=0;Ke<Fe.uids.length;Ke++){var Je=Fe.uids[Ke];Je&&(w=K.myViewer.getCustomDataByUid(Je))&&g.push(K._stwain.objImageIndexManager.convertServerIdToGuid(w.imageId))}Fe.imageIds=g,delete Fe.uids,Te.push(Fe)}):Te=[],Te}},{key:"GetTagListByIndex",value:function(g){var w=[],N=this.GetUidByIndex(g);return N&&((g=this.mydvs.Tag.getTagList())?o.D.each(g,function(K){if(K.uids)for(var Te=0;Te<K.uids.length;Te++){var Fe=K.uids[Te];Fe&&Fe==N&&w.push(K.name)}}):w=[]),w}},{key:"CreateFile",value:function(g){var w=!1;return g&&(this.mydvs.File.createFile(g)?80032==this.mydvs.Error.errorCode?o.D.Errors.FileExist(this._stwain):w=!0:o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode)),w}},{key:"OpenFile",value:function(g){var w=this,N=!1;return w.mydvs.File.openFile(g,w.myViewer.uid)?(N=!0,w.currentFileName=g,w._stwain.Template&&w._stwain.Template._documentTemplate&&w._stwain.Template._documentTemplate.setTemplateTitle(w.currentFileName)):80006==w.mydvs.Error.errorCode?o.D.Errors.FileNotExist(w._stwain):o.D.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),N}},{key:"GetCurrentFileName",value:function(){var g,w=this,N="";return(g=w.mydvs.File.getCurrentFileList())&&o.D.each(g,function(K){K.name==w.currentFileName&&(N=w.currentFileName)}),N}},{key:"GetDefaultFileName",value:function(){return L}},{key:"RemoveFile",value:function(g){var w,N=this;return(w=N.mydvs.File.removeFile(g))?N.currentFileName==g&&(N.currentFileName=L,N.OpenFile(N.currentFileName)):80006==N.mydvs.Error.errorCode?o.D.Errors.FileNotExist(N._stwain):o.D.Errors.WebviewerError(N._stwain,N.mydvs.Error.errorMessage,N.mydvs.Error.errorCode),w}},{key:"RenameFile",value:function(g,w){var N,K=this;return(N=K.mydvs.File.renameFile(g,w))?K.currentFileName==g&&(K.currentFileName=w,K._stwain.Template&&K._stwain.Template._documentTemplate&&K._stwain.Template._documentTemplate.setTemplateTitle("")):80006==K.mydvs.Error.errorCode?o.D.Errors.FileNotExist(K._stwain):80032==K.mydvs.Error.errorCode?o.D.Errors.FileExist(K._stwain):o.D.Errors.WebviewerError(K._stwain,K.mydvs.Error.errorMessage,K.mydvs.Error.errorCode),N}},{key:"GetFileInfoList",value:function(){var g,w,N,K,Te=this,Fe=[];return(K=Te.mydvs.File.getCurrentFileList())?o.D.each(K,function(Ke){if(!Te.IsInternalFile(Ke.name)){if(g=[],w={},N={},Ke.chs)for(var Je=0;Je<Ke.chs.length;Je++){var Ye=Ke.chs[Je];Ye&&(w=Te.myViewer.getCustomDataByUid(Ye))&&g.push(Te._stwain.objImageIndexManager.convertServerIdToGuid(w.imageId))}N.imageIds=g,N.name=Ke.name,Fe.push(N)}}):Fe=[],Fe}},{key:"GetImageIdsByFileName",value:function(g){var w,N,K=this,Te=[];return(N=K.mydvs.File.getCurrentFileList())?o.D.each(N,function(Fe){if(g==Fe.name){if(w={},Fe.chs)for(var Ke=0;Ke<Fe.chs.length;Ke++){var Je=Fe.chs[Ke];Je&&(w=K.myViewer.getCustomDataByUid(Je))&&Te.push(w.imageId)}return!1}}):Te=[],Te}},{key:"ifFileNameExist",value:function(g){var w,N=!1;return(w=this.mydvs.File.getCurrentFileList())&&(0==w.length?g==L&&(N=!0):(o.D.each(w,function(K){if(K.name==g)return N=!0}),0==N&&g==L&&(N=!0))),N}},{key:"OverlayRectangle",value:function(g,w,N,K,Te,Fe,Ke){return g<0||g>=this.GetHowManyImagesInBuffer()?(o.D.Errors.IndexOutOfRange(this._stwain),!1):(o.D.isNumber(Fe)&&(Fe=o.D.getColor(Fe)),(g=this.myViewer.overlayRectangle(g,w,N,K-w,Te-N,Fe,Ke))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g)}},{key:"SetOperationMode",value:function(g){this.myViewer.operationMode=g}},{key:"GetIfShowVideoContainer",value:function(){return this.myViewer.showVideoContainer}},{key:"ShowVideoContainer",value:function(g){return this.myViewer.showVideoContainer==g||(this._thumbnailViewer&&(g?(this.OldShowThumbnail=this.myThumbnailViewer.showThumbnail,this.myThumbnailViewer.showThumbnail=!1):this.myThumbnailViewer.showThumbnail=this.OldShowThumbnail),this.myViewer.showVideoContainer=g),!0}},{key:"UpdateVideoContainer",value:function(g){return(g=this.myViewer.updateVideoContainer(g))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g}},{key:"GetImageData",value:function(g){return this.mydvs.DataControl.getData(g)}},{key:"UpdateImageData",value:function(g,w){return this.mydvs.DataControl.updateData(g,w)}},{key:"GetMinPageData",value:function(g){return this._imageEditorInner?this._imageEditorInner.myImageEditor.getMinPageData():NaN}},{key:"SetLogLevel",value:function(g){this.mydvs.Log.setLogLevel(g)}},{key:"SetLogFunc",value:function(g){this.mydvs.Log.setLogFunc(g)}},{key:"SetThumLocation",value:function(g){var w=this;if(!w._NouiNotSupport("ThumbnailViewer.location"))return!1;if(w.myThumbnailViewer){switch(g){case"left":default:w.myThumbnailViewer.location="horizontal",w.myThumbnailViewer.sequence=-1;break;case"right":w.myThumbnailViewer.location="horizontal",w.myThumbnailViewer.sequence=1;break;case"top":w.myThumbnailViewer.location="vertical",w.myThumbnailViewer.sequence=-1;break;case"bottom":w.myThumbnailViewer.location="vertical",w.myThumbnailViewer.sequence=1}return!0}return w.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(w._stwain):o.D.Errors.ThumbnailViewerNotExist(w._stwain),!1}},{key:"GetThumLocation",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.location")&&(this.myThumbnailViewer?"vertical"==this.myThumbnailViewer.location?0<this.myThumbnailViewer.sequence?"bottom":"top":0<this.myThumbnailViewer.sequence?"right":"left":(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumSize",value:function(g){return!(!this._NouiNotSupport("ThumbnailViewer.size")||(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(g)||g<0?(o.D.Errors.InvalidValue(this._stwain),1):this.myThumbnailViewer?(this.myThumbnailViewer.size=g,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1)))}},{key:"GetThumSize",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.size")&&(this.myThumbnailViewer?this.myThumbnailViewer.size:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),0))}},{key:"SetThumScrollDirection",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.scrollDirection")&&("horizontal"!=g&&(g="vertical"),this.myThumbnailViewer?(this.myThumbnailViewer.scrollDirection=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumScrollDirection",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.scrollDirection")&&(this.myThumbnailViewer?this.myThumbnailViewer.scrollDirection:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumShowPageNumber",value:function(g){if(!this._NouiNotSupport("ThumbnailViewer.showPageNumber"))return!1;if(!o.D.isBoolean(g))return o.D.Errors.InvalidValue(this._stwain),!1;var w={visibility:"hidden"};return g&&(w.visibility="visible"),this.myThumbnailViewer?(this.UpdateThumPageNumberStyle(w),!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1)}},{key:"GetThumShowPageNumber",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.showPageNumber")&&(this.myThumbnailViewer?"visible"==this.myThumbnailViewer.pageNumber.visibility:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),-1))}},{key:"UpdateThumPageNumberStyle",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.pageNumber")&&(this.myThumbnailViewer?(this.myThumbnailViewer.pageNumber=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumShowCheckbox",value:function(g){var w;return!(!this._NouiNotSupport("ThumbnailViewer.showCheckbox")||(o.D.isBoolean(g)?this.myThumbnailViewer?(w={visibility:"hidden"},g&&(w.visibility="visible"),this.UpdateThumCheckboxStyle(w),this.SetThumMultiSelectMode("visible"==w.visibility?o.I.DWT.EnumDWT_SelectionMode.Multiple:o.I.DWT.EnumDWT_SelectionMode.Single),0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1):(o.D.Errors.InvalidValue(this._stwain),1)))}},{key:"UpdateThumCheckboxStyle",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.checkbox")&&(this.myThumbnailViewer?(this.myThumbnailViewer.checkbox=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumShowCheckbox",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.showCheckbox")&&(this.myThumbnailViewer?"visible"==this.myThumbnailViewer.checkbox.visibility:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),-1))}},{key:"GetThumMultiSelectMode",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.multiSelectMode")&&(this.myThumbnailViewer?this.myThumbnailViewer.multiSelectMode?o.I.DWT.EnumDWT_SelectionMode.Multiple:o.I.DWT.EnumDWT_SelectionMode.Single:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),-1))}},{key:"SetThumMultiSelectMode",value:function(g){return!(!this._NouiNotSupport("ThumbnailViewer.multiSelectMode")||(o.D.isNumber(g)?this.myThumbnailViewer?(this.myThumbnailViewer.multiSelectMode=g==o.I.DWT.EnumDWT_SelectionMode.Multiple,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1):(o.D.Errors.InvalidValue(this._stwain),1)))}},{key:"SetThumMargin",value:function(g){return!(!this._NouiNotSupport("ThumbnailViewer.margin")||(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(g)||g<0?(o.D.Errors.InvalidValue(this._stwain),1):this.myThumbnailViewer?(this.myThumbnailViewer.pageMargin=g,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1)))}},{key:"GetThumMargin",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.margin")&&(this.myThumbnailViewer?this.myThumbnailViewer.columns==this.myThumbnailViewer.rows&&1==this.myThumbnailViewer.rows?0:this.myThumbnailViewer.pageMargin:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),0))}},{key:"SetThumBorder",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.border")&&(this.myThumbnailViewer?(this.myThumbnailViewer.border=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.border")&&(this.myThumbnailViewer?this.myThumbnailViewer.border:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumBackground",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.background")&&(this.myThumbnailViewer?(this.myThumbnailViewer.background=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.background")&&(this.myThumbnailViewer?this.myThumbnailViewer.background:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumPageBackground",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.pageBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.pageBackground=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumPageBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.pageBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.pageBackground:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumPageBorder",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.pageBorder")&&(this.myThumbnailViewer?(this.myThumbnailViewer.pageBorder=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumPageBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.pageBorder")&&(this.myThumbnailViewer?this.myThumbnailViewer.pageBorder:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumHoverBackground",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.hoverPageBackground=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"GetThumHoverBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.hoverPageBackground:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumHoverBorder",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBorder")&&(this.myThumbnailViewer?(this.myThumbnailViewer.hoverPageBorder=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumHoverBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.hoverPageBorder")&&(this.myThumbnailViewer?this.myThumbnailViewer.hoverPageBorder:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumPlaceholderBackground",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.placeholderBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.placeholderBackground=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumPlaceholderBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.placeholderBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.placeholderBackground:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumSelectedPageBorder",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBorder")&&(this.myThumbnailViewer?(this.myThumbnailViewer.selectedPageBorder=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumSelectedPageBorder",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBorder")&&(this.myThumbnailViewer?this.myThumbnailViewer.selectedPageBorder:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumSelectedPageBackground",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBackground")&&(this.myThumbnailViewer?(this.myThumbnailViewer.selectedPageBackground=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumSelectedPageBackground",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.selectedPageBackground")&&(this.myThumbnailViewer?this.myThumbnailViewer.selectedPageBackground:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"SetThumAllowKeyboardControl",value:function(g){return!(!this._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")||(o.D.isBoolean(g)?this.myThumbnailViewer?(this.myThumbnailViewer.allowKeyboardControl=g,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1):(o.D.Errors.InvalidValue(this._stwain),1)))}},{key:"GetThumAllowKeyboardControl",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")&&(this.myThumbnailViewer?this.myThumbnailViewer.allowKeyboardControl:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumAllowDrag",value:function(g){return!(!this._NouiNotSupport("ThumbnailViewer.allowDrag")||(o.D.isBoolean(g)?this.myThumbnailViewer?(this.myThumbnailViewer.allowPageDragging=g,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1):(o.D.Errors.InvalidValue(this._stwain),1)))}},{key:"GetThumAllowDrag",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.allowPageDragging")&&(this.myThumbnailViewer?this.myThumbnailViewer.allowPageDragging:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumAllowResize",value:function(g){return!(!this._NouiNotSupport("ThumbnailViewer.allowResizing")||(o.D.isBoolean(g)?this.myThumbnailViewer?(this.myThumbnailViewer.allowResizing=g,0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),1):(o.D.Errors.InvalidValue(this._stwain),1)))}},{key:"GetThumAllowResize",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.allowResizing")&&(this.myThumbnailViewer?this.myThumbnailViewer.allowResizing:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"SetThumAutoChangeIndex",value:function(g){return!!this._NouiNotSupport("ThumbnailViewer.autoChangeIndex")&&(this.myThumbnailViewer?(this.myThumbnailViewer.autoChangeIndex=g,!0):(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),!1))}},{key:"GetThumAutoChangeIndex",value:function(){return!!this._NouiNotSupport("ThumbnailViewer.autoChangeIndex")&&(this.myThumbnailViewer?this.myThumbnailViewer.autoChangeIndex:(this.bThumbnailDispose?o.D.Errors.ThumbnailViewerDispose(this._stwain):o.D.Errors.ThumbnailViewerNotExist(this._stwain),""))}},{key:"render",value:function(){return!!this._NouiNotSupport("render")&&this.myViewer.render()}},{key:"getUISettings",value:function(){if(!this._NouiNotSupport("getUISettings"))return!1;var g=o.I.Lib.clone(this.myViewer.uiConfig);return delete g.tag,delete g.tree,delete g.cropStyle,delete g.thumbnail,g}},{key:"resetUISettings",value:function(){return this.resetUISettingsInner(!0)?this.getUISettings():{}}},{key:"resetUISettingsInner",value:function(Fe,w,N){var K=this;if(!K._NouiNotSupport("resetUISetting"))return!1;var Te=Ie;return Fe?(Te.width=K.initWidth,Te.height=K.initHeight):(Te.width=o.D.isUndefined(w)?K.initWidth:w,Te.height=o.D.isUndefined(N)?K.initHeight:N),Fe=K.myViewer.showViewer,(w=K.myViewer.updateUISetting(Te))?(Fe||K.hide(),K.SetFitType("window"),K.SetIfSinglePageMode(!1),K._stwain._isPC()?K.SetOperationMode(1):K.SetOperationMode(0),K.OnlySetCurrentIndex(K.GetCurrentIndex())):o.D.Errors.WebviewerError(K._stwain,K.mydvs.Error.errorMessage,K.mydvs.Error.errorCode),w}},{key:"updateUISettings",value:function(g){var w=this,N={};if(!w._NouiNotSupport("updateUISettings"))return!1;var K=w.myViewer.showViewer;return w.myViewer.updateUISetting(g)?(K||w.hide(),"crosshair"==(N=w.getUISettings()).canvasConfig.canvasMouseShape?w.SetOperationMode(1):w.SetOperationMode(0),w._stwain.Template&&w._stwain.Template._documentTemplate&&(w._stwain.Template._documentTemplate.initView(),0<w.GetFileInfoList().length&&w._stwain.Template._documentTemplate.setTemplateTitle(w.currentFileName))):o.D.Errors.WebviewerError(w._stwain,w.mydvs.Error.errorMessage,w.mydvs.Error.errorCode),N}},{key:"createDocumentCameraManager",value:function(){if(!o.I.CameraModel)return o.D.Errors.CameraRequired(this._stwain),!1;if(!this.myccvs){this.myccvs=new o.I.CameraModel;try{this.myccvs&&this.bindCallback(this,this.myccvs)}catch{}}}},{key:"createDocumentEditManager",value:function(){if(!o.I.DocumentEditManager)return o.D.Errors.CameraRequired(this._stwain),!1;if(!this.mydocEditManager){this.mydocEditManager=new o.I.DocumentEditManager;try{this.mydocEditManager&&this.bindCallback(this,this.mydocEditManager)}catch{}}}},{key:"notBindCameraForCameraManager",value:function(){return!this.myccvs||this.myccvs.notBindCamera()}},{key:"bindCameraForCameraManager",value:function(){var g=!0;return o.I.CameraModel?(this.myccvs||this.createDocumentCameraManager(),(g=this.myccvs.notBindCamera()?this.myccvs.bindCamera(o.I.ViewUi,this.mydvs):g)?g:void o.D.Errors.WebviewerError(this._stwain,this.myccvs.Error.errorMessage,this.myccvs.Error.errorCode)):(o.D.Errors.CameraRequired(this._stwain),!1)}},{key:"notBindCameraForDocumentEditManager",value:function(){return!this.mydocEditManager||this.mydocEditManager.notBindCamera()}},{key:"bindCameraForDocumentEditManager",value:function(){var g=!0;return o.I.DocumentEditManager?(this.mydocEditManager||this.createDocumentEditManager(),(g=this.mydocEditManager.notBindCamera()?this.mydocEditManager.bindCamera(o.I.ViewUi,this.mydvs):g)?g:void o.D.Errors.WebviewerError(this._stwain,this.mydocEditManager.Error.errorMessage,this.mydocEditManager.Error.errorCode)):(o.D.Errors.CameraRequired(this._stwain),!1)}},{key:"bindCallback",value:function(g,w){var N;w&&(N=o.D.html5.STwain,w.bindLicenseCallback&&w.bindLicenseCallback(function(){return g._stwain._checkWebcamWasmLicense()}),w.bindSavePhotoCallback&&w.bindSavePhotoCallback(function(K){return g._stwain._saveImageCallback(K)}),w.bindInsertPhotoCallback&&w.bindInsertPhotoCallback(function(K,Te,Fe){return g._stwain._insertImageCallback(K,Te,Fe)}),w.bindRemovePhotoCallback&&w.bindRemovePhotoCallback(function(K,Te){g._stwain._innerRemoveImage(K,Te)}),w.bindAreaDetectFunction&&w.bindAreaDetectFunction(N._areaDetectCallback),w.bindPerspectiveFunction&&w.bindPerspectiveFunction(N._perspectiveCallback),w.bindFilterHandleList&&w.bindFilterHandleList([{label:"grayscale",handler:N._convertToGrayScaleFilterCallback},{label:"blackAndWhite",handler:N._convertToBWScaleFilterCallback},{label:"saveToner",handler:N._saveTonerFilterCallback},{label:"clean",handler:N._cleanFilterCallback},{label:"brightening",handler:N._brightenFilterCallback}]),w.bindFreeHandle&&w.bindFreeHandle(N._freeCallback))}},{key:"showVideo",value:function(g,w,N,K){return!!this._NouiNotSupport("showVideo")&&(g={scannerViewer:{devicedId:g,fullScreen:K,enableBorderDetection:!0,resolution:{visibility:"hidden"},autoScan:{visibility:"hidden"},autoDetect:{visibility:"visible",enableAutoDetect:!1},continuousScan:!1,switchCamera:{visibility:"hidden"},loadLocalFile:{visibility:"hidden"}},documentEditorSettings:{defaultViewerName:"CropViewer",insert:{visibility:"hidden"},remove:{visibility:"hidden"},rotateLeft:{visibility:"hidden"},filter:{visibility:"hidden",valueList:[]},crop:{visibility:"hidden"},cropViewer:{visibility:"visible",rotateLeft:{visibility:"hidden"},rotateRight:{visibility:"hidden"},autoDetectBorder:{visibility:"hidden"}}}},w&&(g.scannerViewer.resolution.valueList=[],g.scannerViewer.resolution.valueList.push({label:"resolution",value:w}),g.scannerViewer.resolution.defaultValue=w),N&&"document"==N?g.scannerViewer.enableBorderDetection=!0:(g.scannerViewer.enableBorderDetection=!1,g.scannerViewer.autoDetect.visibility="hidden",g.documentEditorSettings.cropViewer.visibility="hidden"),this.myccvs||this.createDocumentCameraManager(),this.notBindCameraForCameraManager()&&this.bindCameraForCameraManager(),(K=this.showVideoEx(g))||o.D.Errors.WebviewerError(this._stwain,this.myccvs.Error.errorMessage,this.myccvs.Error.errorCode),K)}},{key:"getDefaultFilterValueList",value:function(g){return y()(defaultDocumentEditorSettings).valueList}},{key:"setElementForDocumentConfiguration",value:function(g){var w,N,K=o.I.Lib.clone(g);return g&&g.scannerViewer&&g.scannerViewer.element&&((N=g.scannerViewer.element&&"DIV"==g.scannerViewer.element.nodeName?g.scannerViewer.element:document.getElementById(g.scannerViewer.element)).childNodes[0]||(w=document.createElement("div"),N.appendChild(w)),w.style.width=(w=N.childNodes[0])&&N&&""==N.style.width?0<N.clientWidth?N.clientWidth+"px":0<N.offsetWidth?N.offsetWidth+"px":0<N.scrollWidth?N.scrollWidth+"px":this.myViewer.width+"px":"100%",w.style.height=w&&N&&""==N.style.height?0<N.clientHeight?N.clientHeight+"px":0<N.offsetHeight?N.offsetHeight+"px":0<N.scrollHeight?N.scrollHeight+"px":this.myViewer.height+"px":"100%",K.scannerViewer.element=w),g&&g.documentEditorSettings&&g.documentEditorSettings.element&&((N=g.documentEditorSettings.element&&"DIV"==g.documentEditorSettings.element.nodeName?g.documentEditorSettings.element:document.getElementById(g.documentEditorSettings.element)).childNodes[0]||(g=document.createElement("div"),N.appendChild(g)),w.style.width=(w=N.childNodes[0])&&N&&""==N.style.width?0<N.clientWidth?N.clientWidth+"px":0<N.offsetWidth?N.offsetWidth+"px":0<N.scrollWidth?N.scrollWidth+"px":this.myViewer.width+"px":"100%",w.style.height=w&&N&&""==N.style.height?0<N.clientHeight?N.clientHeight+"px":0<N.offsetHeight?N.offsetHeight+"px":0<N.scrollHeight?N.scrollHeight+"px":this.myViewer.height+"px":"100%",K.documentEditorSettings.element=w),K}},{key:"showVideoEx",value:function(g){return g=this.setElementForDocumentConfiguration(g),this.showVideoInner(g)}},{key:"showVideoInner",value:function(g){var w=this;if(!w._NouiNotSupport("scanDocument"))return!1;if(!w._stwain._isMobileMode())return w._stwain._serviceNotSupportAsync("scanDocument");if(o.I.Lib.env.bMobile&&0==w.addCSSForShowVideo){var N=document.createElement("style"),K="*{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select:none;-ms-user-select:none;user-select:none;}";N.type="text/css";try{N.appendChild(document.createTextNode(K))}catch{N.styleSheet.cssText=K}document.body.appendChild(N),w.addCSSForShowVideo=!0}return w._stwain.Template&&w._stwain.Template._documentTemplate&&w._stwain.Template._documentTemplate.setTemplateTitle(w.currentFileName),g=w.getDefaultDocumentConfigurationValue(w._globalScanConfiguration_ScannViewer,g,!1),w._globalScanConfiguration_ScannViewer=g,w._documentScanConfiguration=g,w.notBindCameraForCameraManager()&&w.bindCameraForCameraManager(),0==(K=w.GetCurrentFileName()).length&&(w.CreateFile(L),w.OpenFile(L),K=L),(N=w.myccvs.showVideo(g,K))||o.D.Errors.WebviewerError(w._stwain,w.myccvs.Error.errorMessage,w.myccvs.Error.errorCode),N}},{key:"getDefaultDocumentConfigurationValue",value:function(g,w,N){var K,Te,Fe,Ke=this,Je=o.I.Lib.clone(w);return Je&&(Je.scannerViewer&&w.scannerViewer&&w.scannerViewer.element&&(Je.scannerViewer.element=w.scannerViewer.element),Je.documentEditorSettings&&w.documentEditorSettings&&w.documentEditorSettings.element&&(Je.documentEditorSettings.element=w.documentEditorSettings.element)),o.D.isUndefined(Je)?Je=g:(Je.scannerViewer=Ke.getDefaultScannerViewerValue(Je.scannerViewer,!0),Je.documentEditorSettings=Ke.getDefaultDocumentEditorValue(Je.documentEditorSettings,!0,N)),o.D.isFunction(Je.documentEditorSettings.funcConfirmExitAfterSave)?(K=Je.documentEditorSettings.funcConfirmExitAfterSave,Je.documentEditorSettings.funcConfirmExitAfterSave=function(Ye){var qt=Ke.GetCurrentFileName();0==qt.length&&(qt=L),Ke.OpenFile(qt),K(Ye)}):Je.documentEditorSettings.funcConfirmExitAfterSave=function(Ye){var qt=Ke.GetCurrentFileName();0==qt.length&&(qt=L),Ke.OpenFile(qt)},N&&("cropviewer"==Je.documentEditorSettings.defaultViewerName.toLowerCase()?o.D.isFunction(Je.documentEditorSettings.cropViewer.funcConfirmExit)?(Te=Je.documentEditorSettings.cropViewer.funcConfirmExit,Je.documentEditorSettings.cropViewer.funcConfirmExit=function(Ye,qt){var xe=Ke.GetCurrentFileName();return 0==xe.length&&(xe=L),Ke.OpenFile(xe),Te(Ye,qt)}):Je.documentEditorSettings.cropViewer.funcConfirmExit=function(Ye,qt){var xe=Ke.GetCurrentFileName();return 0==xe.length&&(xe=L),Ke.OpenFile(xe),"documentScanPage"==qt&&Ye?p().resolve(o.I.DWT.EnumDWT_ConfirmExitType.SaveAndExit):p().resolve(o.I.DWT.EnumDWT_ConfirmExitType.Exit)}:o.D.isFunction(Je.documentEditorSettings.funcConfirmExit)?(Fe=Je.documentEditorSettings.funcConfirmExit,Je.documentEditorSettings.funcConfirmExit=function(Ye,qt){var xe=Ke.GetCurrentFileName();return 0==xe.length&&(xe=L),Ke.OpenFile(xe),Fe(Ye,qt)}):Je.documentEditorSettings.funcConfirmExit=function(Ye,qt){var xe=Ke.GetCurrentFileName();return 0==xe.length&&(xe=L),Ke.OpenFile(xe),"cropViewer"==qt&&Ye?p().resolve(o.I.DWT.EnumDWT_ConfirmExitType.SaveAndExit):p().resolve(o.I.DWT.EnumDWT_ConfirmExitType.Exit)}),o.D.isUndefined(Je.scannerViewer.maxDocuments)&&(Je.scannerViewer.maxDocuments=Ke._stwain.MaxImagesInBuffer-Ke.GetHowManyImagesInBuffer()),1==Je.scannerViewer.continuousScan?Je.scannerViewer.continuousScan={visibility:"hidden",enableContinuousScan:!0}:0==Je.scannerViewer.continuousScan?Je.scannerViewer.continuousScan={visibility:"hidden",enableContinuousScan:!1}:o.D.isUndefined(Je.scannerViewer.continuousScan)?Je.scannerViewer.continuousScan={visibility:"hidden",enableContinuousScan:!0}:(Je.scannerViewer.continuousScan.visibility="hidden",o.D.isUndefined(Je.scannerViewer.continuousScan.enableContinuousScan)&&(Je.scannerViewer.continuousScan.enableContinuousScan=!0)),Je}},{key:"getDefaultScannerViewerValue",value:function(g,w){var N,K=st.scannerViewer;return o.D.isUndefined(g)?(N=K,w&&delete N.funcConfirmExit):(o.D.isUndefined((N=g).headerStyle)?N.headerStyle=K.headerStyle:(o.D.isUndefined(N.headerStyle.background)&&(N.headerStyle.background=K.headerStyle.background),o.D.isUndefined(N.headerStyle.color)&&(N.headerStyle.color=K.headerStyle.color),o.D.isUndefined(N.headerStyle.selectedColor)&&(N.headerStyle.selectedColor=K.headerStyle.selectedColor)),o.D.isUndefined(N.bodyStyle)?N.bodyStyle=K.bodyStyle:(o.D.isUndefined(N.bodyStyle.background)&&(N.bodyStyle.background=K.bodyStyle.background),o.D.isUndefined(N.bodyStyle.loaderBarSource)&&(N.bodyStyle.loaderBarSource=K.bodyStyle.loaderBarSource)),o.D.isUndefined(N.footerStyle)?N.footerStyle=K.footerStyle:(o.D.isUndefined(N.footerStyle.background)&&(N.footerStyle.background=K.footerStyle.background),o.D.isUndefined(N.footerStyle.color)&&(N.footerStyle.color=K.footerStyle.color),o.D.isUndefined(N.footerStyle.selectedColor)&&(N.footerStyle.selectedColor=K.footerStyle.selectedColor)),o.D.isUndefined(N.fullScreen)&&(N.fullScreen=K.fullScreen),o.D.isUndefined(N.enableBorderDetection)&&(N.enableBorderDetection=K.enableBorderDetection),o.D.isUndefined(N.polygonStyle)?N.polygonStyle=K.polygonStyle:(o.D.isUndefined(N.polygonStyle.stroke)&&(N.polygonStyle.stroke=K.polygonStyle.stroke),o.D.isUndefined(N.polygonStyle.strokeWidth)&&(N.polygonStyle.strokeWidth=K.polygonStyle.strokeWidth),o.D.isUndefined(N.polygonStyle.dash)&&(N.polygonStyle.dash=K.polygonStyle.dash)),N.scanButtonStyle?(o.D.isUndefined(N.scanButtonStyle.background)&&(N.scanButtonStyle.background=K.scanButtonStyle.background),o.D.isUndefined(N.scanButtonStyle.color)&&(N.scanButtonStyle.color=K.scanButtonStyle.color)):N.scanButtonStyle=K.scanButtonStyle,o.D.isUndefined(N.resolution)?N.resolution=K.resolution:(o.D.isBoolean((w=N.resolution).visibility)&&!w.visibility?w.visibility="hidden":o.D.isString(w.visibility)||(w.visibility=K.resolution.visibility),o.D.isUndefined(w.valueList)&&(w.valueList=K.resolution.valueList),o.D.isUndefined(w.defaultValue)&&w.valueList&&0<w.valueList.length&&(w.defaultValue=w.valueList[0].value)),o.D.isUndefined(N.autoScan)?N.autoScan=K.autoScan:(o.D.isBoolean((g=N.autoScan).visibility)&&!g.visibility?g.visibility="hidden":o.D.isString(g.visibility)||(g.visibility=K.autoScan.visibility),o.D.isUndefined(g.enableAutoScan)&&(g.enableAutoScan=K.autoScan.enableAutoScan)),o.D.isUndefined(N.autoDetect)?N.autoDetect=K.autoDetect:(o.D.isBoolean((w=N.autoDetect).visibility)&&!w.visibility?w.visibility="hidden":o.D.isString(w.visibility)||(w.visibility=K.autoDetect.visibility),o.D.isUndefined(w.enableAutoDetect)&&(w.enableAutoDetect=K.autoDetect.enableAutoDetect),o.D.isUndefined(w.fpsLimit)&&(w.fpsLimit=K.autoDetect.fpsLimit),o.D.isUndefined(w.acceptedPolygonConfidence)?w.acceptedPolygonConfidence=K.autoDetect.acceptedPolygonConfidence:(g=a()(w.acceptedPolygonConfidence),w.acceptedPolygonConfidence=0<=g?g:K.autoDetect.acceptedPolygonConfidence),o.D.isUndefined(w.acceptedBlurryScore)?w.acceptedBlurryScore=K.autoDetect.acceptedBlurryScore:(g=a()(w.acceptedBlurryScore),w.acceptedBlurryScore=0<=g?g:K.autoDetect.acceptedBlurryScore),o.D.isUndefined(w.autoCaptureDelay)?w.autoCaptureDelay=K.autoDetect.autoCaptureDelay:(g=a()(w.autoCaptureDelay),w.autoCaptureDelay=0<=g?g:K.autoDetect.autoCaptureDelay)),o.D.isUndefined(N.switchCamera)?N.switchCamera=K.switchCamera:o.D.isBoolean((w=N.switchCamera).visibility)&&!w.visibility?w.visibility="hidden":o.D.isString(w.visibility)||(w.visibility=K.switchCamera.visibility),o.D.isUndefined(N.loadLocalFile)?N.loadLocalFile=K.loadLocalFile:o.D.isBoolean((g=N.loadLocalFile).visibility)&&!g.visibility?g.visibility="hidden":o.D.isString(g.visibility)||(g.visibility=K.loadLocalFile.visibility)),N}},{key:"getDefaultDocumentEditorValue",value:function(g,w,N){var K,Te=o.I.Lib.clone(st.documentEditorSettings);if(Te&&st.documentEditorSettings&&st.documentEditorSettings.element&&(Te.element=st.documentEditorSettings.element),N&&(Te.defaultViewerName="mainViewer"),o.D.isUndefined(g))K=Te,w&&(delete K.remove.funcConfirmRemove,delete K.funcConfirmExit,delete K.funcConfirmExitAfterSave,delete K.cropViewer.funcConfirmExit);else{if(o.D.isBoolean((K=g).visibility)&&!K.visibility?K.visibility="hidden":o.D.isString(K.visibility)||(K.visibility=Te.visibility),(o.D.isUndefined(K.defaultViewerName)||""==K.defaultViewerName||"cropviewer"!=K.defaultViewerName.toLowerCase()&&"mainviewer"!=K.defaultViewerName.toLowerCase())&&(K.defaultViewerName=Te.defaultViewerName),o.D.isUndefined(K.headerStyle)?K.headerStyle=Te.headerStyle:(o.D.isUndefined(K.headerStyle.background)&&(K.headerStyle.background=Te.headerStyle.background),o.D.isUndefined(K.headerStyle.color)&&(K.headerStyle.color=Te.headerStyle.color),o.D.isUndefined(K.headerStyle.selectedColor)&&(K.headerStyle.selectedColor=Te.headerStyle.selectedColor),o.D.isUndefined(K.headerStyle.disabledColor)&&(K.headerStyle.disabledColor=Te.headerStyle.disabledColor)),o.D.isUndefined(K.bodyStyle)?K.bodyStyle=Te.bodyStyle:(o.D.isUndefined(K.bodyStyle.background)&&(K.bodyStyle.background=Te.bodyStyle.background),o.D.isUndefined(K.bodyStyle.loaderBarSource)&&(K.bodyStyle.loaderBarSource=Te.bodyStyle.loaderBarSource)),o.D.isUndefined(K.footerStyle)?K.footerStyle=Te.footerStyle:(o.D.isUndefined(K.footerStyle.background)&&(K.footerStyle.background=Te.footerStyle.background),o.D.isUndefined(K.footerStyle.color)&&(K.footerStyle.color=Te.footerStyle.color),o.D.isUndefined(K.footerStyle.selectedColor)&&(K.footerStyle.selectedColor=Te.footerStyle.selectedColor)),o.D.isUndefined(K.insert)?K.insert=Te.insert:(o.D.isBoolean(K.insert.visibility)&&!K.insert.visibility?K.insert.visibility="hidden":o.D.isString(K.insert.visibility)||(K.insert.visibility=Te.insert.visibility),o.D.isUndefined(K.insert.position)&&(K.insert.position=Te.insert.position)),o.D.isUndefined(K.remove)?(K.remove=Te.remove,w&&delete K.remove.funcConfirmRemove):o.D.isBoolean(K.remove.visibility)&&!K.remove.visibility?K.remove.visibility="hidden":o.D.isString(K.remove.visibility)||(K.remove.visibility=Te.remove.visibility),o.D.isUndefined(K.rotateLeft)?K.rotateLeft=Te.rotateLeft:o.D.isBoolean(K.rotateLeft.visibility)&&!K.rotateLeft.visibility?K.rotateLeft.visibility="hidden":o.D.isString(K.rotateLeft.visibility)||(K.rotateLeft.visibility=Te.rotateLeft.visibility),o.D.isUndefined(y()(K)))K.filter=y()(Te);else{if(o.D.isBoolean(y()(K).visibility)&&!y()(K).visibility?y()(K).visibility="hidden":o.D.isString(y()(K).visibility)||(y()(K).visibility=y()(Te).visibility),o.D.isUndefined(y()(K).valueList))y()(K).valueList=y()(Te).valueList;else{for(var Fe=[],Ke=0;Ke<y()(K).valueList.length;Ke++){for(var Je=!1,Ye=y()(K).valueList[Ke].value,qt=0;qt<y()(Te).valueList.length;qt++)if(Ye==y()(Te).valueList[qt].value){Je=!0;break}Je&&(o.D.isUndefined(y()(K).valueList[Ke].option)&&(y()(K).valueList[Ke].option=y()(Te).valueList[0].option),Fe.push(y()(K).valueList[Ke]))}y()(K).valueList=Fe}if(o.D.isUndefined(y()(K).defaultValue))y()(K).defaultValue=y()(Te).defaultValue;else{for(var xe=!1,ut=y()(K).defaultValue,ue=0;ue<y()(K).valueList.length;ue++)if(ut==y()(K).valueList[ue].value){xe=!0;break}0==xe&&(y()(K).defaultValue=y()(Te).defaultValue)}o.D.isUndefined(y()(K).applyToAll)?y()(K).applyToAll=y()(Te).applyToAll:(N=y()(K).applyToAll,o.D.isBoolean(N.visibility)&&!N.visibility?N.visibility="hidden":o.D.isString(N.visibility)||(N.visibility=y()(Te).applyToAll.visibility),o.D.isUndefined(N.enableApplyToAll)&&(N.enableApplyToAll=y()(Te).applyToAll.enableApplyToAll),o.D.isUndefined(N.label)&&(N.label=y()(Te).applyToAll.label))}o.D.isUndefined(K.crop)?K.crop=Te.crop:o.D.isBoolean(K.crop.visibility)&&!K.crop.visibility?K.crop.visibility="hidden":o.D.isString(K.crop.visibility)||(K.crop.visibility=Te.crop.visibility),o.D.isUndefined(K.cropViewer)?(K.cropViewer=Te.cropViewer,w&&delete K.cropViewer.funcConfirmExit):(o.D.isBoolean(K.cropViewer.visibility)&&!K.cropViewer.visibility?K.cropViewer.visibility="hidden":o.D.isString(K.cropViewer.visibility)||(K.cropViewer.visibility=Te.cropViewer.visibility),o.D.isUndefined(K.cropViewer.polygonStyle)?K.cropViewer.polygonStyle=Te.cropViewer.polygonStyle:(o.D.isUndefined(K.cropViewer.polygonStyle.stroke)&&(K.cropViewer.polygonStyle.stroke=Te.cropViewer.polygonStyle.stroke),o.D.isUndefined(K.cropViewer.polygonStyle.strokeWidth)&&(K.cropViewer.polygonStyle.strokeWidth=Te.cropViewer.polygonStyle.strokeWidth),o.D.isUndefined(K.cropViewer.polygonStyle.dash)&&(K.cropViewer.polygonStyle.dash=Te.cropViewer.polygonStyle.dash)),o.D.isUndefined(K.cropViewer.rotateLeft)?K.cropViewer.rotateLeft=Te.cropViewer.rotateLeft:o.D.isBoolean((g=K.cropViewer.rotateLeft).visibility)&&!g.visibility?g.visibility="hidden":o.D.isString(g.visibility)||(g.visibility=Te.cropViewer.rotateLeft.visibility),o.D.isUndefined(K.cropViewer.rotateRight)?K.cropViewer.rotateRight=Te.cropViewer.rotateRight:o.D.isBoolean((N=K.cropViewer.rotateRight).visibility)&&!N.visibility?N.visibility="hidden":o.D.isString(N.visibility)||(N.visibility=Te.cropViewer.rotateRight.visibility),o.D.isUndefined(K.cropViewer.autoDetectBorder)?K.cropViewer.autoDetectBorder=Te.cropViewer.autoDetectBorder:o.D.isBoolean((w=K.cropViewer.autoDetectBorder).visibility)&&!w.visibility?w.visibility="hidden":o.D.isString(w.visibility)||(w.visibility=Te.cropViewer.autoDetectBorder.visibility))}return K}},{key:"closeVideo",value:function(){var g;return!!this._NouiNotSupport("closeVideo")&&(!this.myccvs||((g=this.myccvs.closeVideo())||o.D.Errors.WebviewerError(this._stwain,this.myccvs.Error.errorMessage,this.myccvs.Error.errorCode),g))}},{key:"camera_on",value:function(g,w){this.myccvs||this.bindCameraForCameraManager(),this.mydocEditManager||this.bindCameraForDocumentEditManager(),g&&(o.D.isFunction(w)?(this.myccvs.on(g,w),this.mydocEditManager.on(g,w)):o.D.Errors.CallbackNotAFunction(this._stwain))}},{key:"camera_off",value:function(g,w){var N=this;if(N.myccvs&&g)if(o.D.isUndefined(w))N.myccvs.off(g),0<=r()(pe).call(pe,g)&&N.myccvs.on(g,function(K,Te){o.D.isFunction(N[g])&&N[g](K,Te)});else{if(!o.D.isFunction(w))return void o.D.Errors.CallbackNotAFunction(N._stwain);N.myccvs.off(g,w)}N.mydocEditManager&&g&&(o.D.isUndefined(w)?(N.mydocEditManager.off(g),0<=r()(pe).call(pe,g)&&N.mydocEditManager.on(g,function(K,Te){o.D.isFunction(N[g])&&N[g](K,Te)})):o.D.isFunction(w)?N.mydocEditManager.off(g,w):o.D.Errors.CallbackNotAFunction(N._stwain))}},{key:"createEditPage",value:function(g,K){var N=this;if(K=K||{},!N._NouiNotSupport("createEditPage"))return!1;N.mydocEditManager||N.createDocumentEditManager(),N.notBindCameraForDocumentEditManager()&&N.bindCameraForDocumentEditManager();var Te=N.GetCurrentFileName();return 0==Te.length&&(N.CreateFile(L),N.OpenFile(L),Te=L),K.fileName=Te,(Te=N.mydocEditManager.createEditPage(g,K))||o.D.Errors.WebviewerError(N._stwain,N.mydocEditManager.Error.errorMessage,N.mydocEditManager.Error.errorCode),Te}},{key:"removeEditPage",value:function(g){return!!_this.mydocEditManager&&_this.mydocEditManager.removeEditPage(g)}},{key:"GetBorder",value:function(){return this._NouiNotSupport("border")?this.myViewer.outerBorder:""}},{key:"SetBorder",value:function(g){return!!this._NouiNotSupport("border")&&(this.myViewer.outerBorder=g,!0)}},{key:"GetInnerBorder",value:function(){return this._NouiNotSupport("innerBorder")?this.myViewer.canvasBorder:""}},{key:"SetInnerBorder",value:function(g){return!!this._NouiNotSupport("innerBorder")&&(this.myViewer.canvasBorder=g,!0)}},{key:"GetAllowPageDragging",value:function(){return this._NouiNotSupport("allowPageDragging")?this.myViewer.allowPageDragging:""}},{key:"SetAllowPageDragging",value:function(g){return!!this._NouiNotSupport("allowPageDragging")&&(this.myViewer.allowPageDragging=g,!0)}},{key:"GetSelectedAreaBorderColor",value:function(){return this._NouiNotSupport("selectedAreaBorderColor")?this.myViewer.selectedBoxLineColor:""}},{key:"SetSelectedAreaBorderColor",value:function(g){return!!this._NouiNotSupport("selectedAreaBorderColor")&&(this.myViewer.selectedBoxLineColor=g,!0)}},{key:"GetCursor",value:function(){return this._NouiNotSupport("cursor")?this.myViewer.canvasMouseShape:""}},{key:"SetCursor",value:function(g){if(!this._NouiNotSupport("cursor"))return!1;if("zoom-in"==g&&!this.GetIfSinglePageMode())return o.D.Errors.CursorInvalidMode(this._stwain),!1;var w="default";switch(g){case"default":w="default",this.SetOperationMode(0);break;case"pointer":w="pointer",this.SetOperationMode(0);break;case"crosshair":default:w="crosshair",this.SetOperationMode(1);break;case"zoom-in":w="zoom-in",this.SetOperationMode(2)}return this.myViewer.canvasMouseShape=w,!0}},{key:"GetIfAutoScroll",value:function(){return this._NouiNotSupport("ifAutoScroll")?this.myViewer.showLatestPage:""}},{key:"SetIfAutoScroll",value:function(g){return!!this._NouiNotSupport("ifAutoScroll")&&(o.D.isBoolean(g)?(this.myViewer.showLatestPage=g,this._imageEditorInner&&this._imageEditorInner.SetIfAutoScroll(),!0):(o.D.Errors.InvalidValue(this._stwain),!1))}},{key:"GetPageMargin",value:function(){return this._NouiNotSupport("pageMargin")?this.myViewer.pageMargin:0}},{key:"SetPageMargin",value:function(g){return!!this._NouiNotSupport("pageMargin")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(g)||g<0?(o.D.Errors.InvalidValue(this._stwain),!1):(this.myViewer.pageMargin=g,!0))}},{key:"setButtonClass",value:function(g,w){return!!this._NouiNotSupport("setButtonClass")&&((g=this.myViewer.setButtonClass(g,w))||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g)}},{key:"clearSelectedAreas",value:function(){var g;return!!this._NouiNotSupport("clearSelectedAreas")&&(this.GetHowManyImagesInBuffer()<=0||((g=this.myViewer.clearSelectedBoxes())||o.D.Errors.WebviewerError(this._stwain,this.mydvs.Error.errorMessage,this.mydvs.Error.errorCode),g))}},{key:"setSelectedAreas",value:function(g){var w,N,K=this,Te=[];if(K.GetCurrentIndex()<0)return o.D.Errors.NoImage(K._stwain),!1;if(!K._NouiNotSupport("setSelectedAreas"))return!1;if(o.D.isUndefined(g)||0==g.length)return o.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(K._stwain),!1;if(g.length&&0<g.length)for(var Fe=0;Fe<g.length;Fe++)N={},o.D.isUndefined(g[Fe])||o.D.isUndefined(g[Fe].left)||o.D.isUndefined(g[Fe].top)||o.D.isUndefined(g[Fe].right)||o.D.isUndefined(g[Fe].bottom)||g[Fe].left<0||g[Fe].top<0||g[Fe].right<0||g[Fe].bottom<0||(N.left=g[Fe].left,N.top=g[Fe].top,g[Fe].right-g[Fe].left<0||g[Fe].bottom-g[Fe].top<0||(N.width=g[Fe].right-g[Fe].left,N.height=g[Fe].bottom-g[Fe].top,Te.push(N)));else if(N={},!(o.D.isUndefined(g)||o.D.isUndefined(g.left)||o.D.isUndefined(g.top)||o.D.isUndefined(g.right)||o.D.isUndefined(g.bottom))){if(g.left<0||g.top<0||g.right<0||g.bottom<0||(N.left=g.left,N.top=g.top,g.right-g.left<0||g.bottom-g.top<0))return o.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(K._stwain),!1;N.width=g.right-g.left,N.height=g.bottom-g.top,Te.push(N)}return 0==Te.length?(o.D.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(K._stwain),!1):((w=K.myViewer.setSelectedBoxes(Te,!0))||o.D.Errors.WebviewerError(K._stwain,K.mydvs.Error.errorMessage,K.mydvs.Error.errorCode),w)}},{key:"_NouiNotSupport",value:function(g){return this._stwain._resetErr(),!(!this._stwain._isValid()||this._stwain._isNoViewer()&&(this._stwain._nouiNotSupport(g),1))}},{key:"pageChange",value:function(g){var w=this.GetHowManyImagesInBuffer();if(o.D.log("OnPagination"),w<=0)return o.D.Errors.NoImage(this._stwain),void Nt.output(this,"No image in Buffer");1!=w&&(!/^\d+$/.test(g)||g<=0?alert(We.CustomizableDisplayInfo.errorMessages.invalidIndex):((g=a()(g)-1)<0?g=0:w<=g&&(g=w-1),g!=this.GetCurrentIndex()&&this.go(g)))}},{key:"first",value:function(){var g=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("first")?g<=0?(o.D.Errors.NoImage(this._stwain),Nt.output(this,"No image in Buffer"),-1):(1==g||this.go(0),0):-1}},{key:"last",value:function(){var g=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("last")?g<=0?(o.D.Errors.NoImage(this._stwain),Nt.output(this,"No image in Buffer"),-1):1==g?0:(this.go(g-=1),g):-1}},{key:"previous",value:function(){var g=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("previous")?g<=0?(o.D.Errors.NoImage(this._stwain),Nt.output(this,"No image in Buffer"),-1):1==g?0:(g=this.GetCurrentIndex()-1,this.go(g=g<0?0:g),g):-1}},{key:"next",value:function(){var g,w=this.GetHowManyImagesInBuffer();return this._NouiNotSupport("next")?w<=0?(o.D.Errors.NoImage(this._stwain),Nt.output(this,"No image in Buffer"),-1):1==w?0:(g=this.GetCurrentIndex()+1,this.go(g=w<=g?w-1:g),g):-1}},{key:"go",value:function(g){var w=g;return this._NouiNotSupport("go")?this.GetHowManyImagesInBuffer()<=0?(o.D.Errors.NoImage(this._stwain),Nt.output(this,"No image in Buffer"),-1):(this._imageEditorInner?this._imageEditorInner.go(g):w=this.__goInner(g),w):-1}},{key:"__goInner",value:function(g){var w;if(void 0!==g){if(-1==g)return o.D.Errors.IndexOutOfRange(this._stwain),-1;o.I.Lib.detect.showMask(this._stwain),w=this.GoToPage(g)}return w}},{key:"topPageChanged",value:function(g,w){this._UIView.__fireEvent("onTopImageInTheViewChanged",{index:g,bByScrollBar:w})}},{key:"bufferChanged",value:function(g,w){for(var N,K=this,Te=[],Fe=-1,Ke=[],Je=0;Je<K.GetHowManyImagesInBuffer();Je++)(N=K.GetCustomDataByIndex(Je))&&N.imageId&&Te.push(K._stwain.objImageIndexManager.convertServerIdToGuid(N.imageId));if(0<Te.length&&(g.imageIds=Te),!g.currentUid||0<=(xe=K.GetIndexByUid(g.currentUid))&&(N=K.GetCustomDataByIndex(xe))&&N.imageId&&(Fe=K._stwain.objImageIndexManager.convertServerIdToGuid(N.imageId),(xe=K._stwain._ImgManager._UIView.GetDataImageControl(N.imageId))&&-1==xe.uuid&&(xe.uuid=g.currentUid)),g.currentId=Fe,g.selectedUids)for(var Ye,qt=0;qt<g.selectedUids.length;qt++)!g.selectedUids[qt]||0<=(Ye=K.GetIndexByUid(g.selectedUids[qt]))&&(N=K.GetCustomDataByIndex(Ye))&&N.imageId&&(Ke.push(K._stwain.objImageIndexManager.convertServerIdToGuid(N.imageId)),(Ye=K._stwain._ImgManager._UIView.GetDataImageControl(N.imageId))&&-1==Ye.uuid&&(Ye.uuid=g.currentUid));g.selectedIds=Ke;var xe=o.D.mix(g,{});delete g.uids,delete g.currentUid,delete g.selectedUids,K._UIView.__fireEvent("onBufferChanged",g),K._documentEditor&&K._bFireSync&&(xe.file||(xe.file=K.GetCurrentFileName()),void 0===xe.fromViewerBufferChanged&&(xe.fromViewerBufferChanged=!0),K._documentEditor.syncFile(xe))}},{key:"click",value:function(g){this.UpdateInfo(!0,!1,!0),this._UIView.__fireEvent("onMouseClick",{e:g,x:g.imageX,y:g.imageY,index:this.GetCurrentIndex()})}},{key:"rightclick",value:function(g){this._UIView.__fireEvent("onMouseRightClick",{e:g,x:g.imageX,y:g.imageY,index:this.GetCurrentIndex()})}},{key:"dblclick",value:function(g){this._UIView.__fireEvent("onMouseDoubleClick",{e:g,x:g.imageX,y:g.imageY,index:this.GetCurrentIndex()})}},{key:"mousemove",value:function(g){this._UIView.__fireEvent("onMouseMove",{e:g,x:g.imageX,y:g.imageY,index:this.GetCurrentIndex()})}},{key:"pageAreaSelected",value:function(g,w){var N=1;w&&0<w.length&&((w=w[w.length-1]).index&&(N=a()(w.index)+1),this._UIView.__fireEvent("onImageAreaSelected",{index:g,left:a()(w.x),top:a()(w.y),right:a()(w.x+w.width),bottom:a()(w.y+w.height),areaIndex:N}))}},{key:"pageAreaUnselected",value:function(g){this._UIView.__fireEvent("onImageAreaDeSelected",g)}},{key:"dragdone",value:function(g){o.D.isFunction(this._stwain.__OnIndexChangeDragDropDone)&&this._stwain.__OnIndexChangeDragDropDone(g)}},{key:"RegistLoadCallback",value:function(g){return this._bRegistedLoad||(this._bRegistedLoad=!0),!0}},{key:"onDrop",value:function(g){this.acceptDrop&&this.dropEvent(g)}},{key:"dropEvent",value:function(g){var w,N,K=this,Te=null,Fe=function(Ue){Ue&&bt.output(null,Ue+" was loaded successfully!"),null!=Te&&K._stwain.Addon.PDF.SetConvertMode(Te)},Ke=function(Ue,ke,He){He&&bt.output(null,He+" failed to load. Error code: "+Ue+"Error String: "+ke),null!=Te&&K._stwain.Addon.PDF.SetConvertMode(Te)};try{for(var Je,Ye,qt=g.dataTransfer.files,xe=0;xe<qt.length;xe++){if(0==(w=qt[xe]).type.length){var ut,ue=void 0,se=r()(ut=w.name).call(ut,".");switch(ue=0<se?w.name.substring(se+1):ue){case"bmp":N=o.I.DWT.EnumDWT_ImageType.IT_BMP;break;case"jpg":case"jpeg":N=o.I.DWT.EnumDWT_ImageType.IT_JPG;break;case"tif":case"tiff":N=o.I.DWT.EnumDWT_ImageType.IT_TIF;break;case"png":N=o.I.DWT.EnumDWT_ImageType.IT_PNG;break;case"pdf":N=o.I.DWT.EnumDWT_ImageType.IT_PDF;break;case"jp2":case"j2k":case"j2c":N=o.I.DWT.EnumDWT_ImageType.IT_J2K;break;default:bt.output(null,w.name+" failed to load because the file type is not supported!"),N=-1,o.D.Errors.UnrecognizedExt(K._stwain)}}else switch(w.type){case"image/bmp":N=o.I.DWT.EnumDWT_ImageType.IT_BMP;break;case"image/jpg":case"image/jpeg":N=o.I.DWT.EnumDWT_ImageType.IT_JPG;break;case"image/tif":case"image/tiff":N=o.I.DWT.EnumDWT_ImageType.IT_TIF;break;case"image/png":N=o.I.DWT.EnumDWT_ImageType.IT_PNG;break;case"application/pdf":N=o.I.DWT.EnumDWT_ImageType.IT_PDF;break;case"image/jp2":N=o.I.DWT.EnumDWT_ImageType.IT_J2K;break;default:bt.output(null,w.name+" failed to load because the file type is not supported!"),N=-1,o.D.Errors.UnrecognizedExt(K._stwain)}-1!=N&&(o.D.showProgress(K._stwain,"DropLoading",!0),K._stwain._OnPercentDone([0,-1,o.I.MSG.Loading]),K._stwain.Addon&&K._stwain.Addon.PDF&&(Je=!1,Ye=void 0,(K._stwain._isMobileMode()?o.D.License.checkProductKey(K._stwain,{PDFRasterizer:!0,Wasm:!0},!0):o.D.License.checkProductKey(K._stwain,{PDFRasterizer:!0},!0))&&(K._stwain._isMobileMode()?Je=!0:(Te=K._stwain.Addon.PDF.GetConvertMode(),Ye=K._stwain._innerFun("GetAddOnVersion",(0,u.dv)("pdf")),(o.D.env.bMac&&Ye==o.I.DWT.PdfMacVersion||o.D.env.bLinux&&Ye==o.I.DWT.PdfLinuxVersion||Ye==o.I.DWT.PdfVersion)&&(Je=!0)),Je&&K._stwain.Addon.PDF.SetConvertMode(3))),K._stwain._isMobileMode()?K._stwain.LoadImageFromBinary(w,function(){o.I.Lib.closeProgress(K._stwain)},function(){o.I.Lib.closeProgress(K._stwain)}):function(le){var Ue=new FileReader;Ue.readAsDataURL(le),Ue.onload=function(){K._stwain.__LoadImageFromBytes(le,N,"",!0,Fe,Ke,0,le.size)},Ue.onerror=function(ke){o.I.Lib.closeProgress(K._stwain),o.I.Lib.Errors.InvalidFile(K._stwain),K._stwain._errorString=this.error,Ke({code:K._stwain._errorCode,message:K._stwain._errorString})}}(qt[xe]))}}catch(le){o.D.log(le.stack||le,"error"),m()(function(){throw le},0)}}},{key:"getImageManager",value:function(){return this._ImgManager}},{key:"on",value:function(g,w){g&&(o.D.isFunction(w)?this.myViewer.on(g,w):o.D.Errors.CallbackNotAFunction(this._stwain))}},{key:"off",value:function(g,w){var N=this;g&&(o.D.isUndefined(w)?(N.myViewer.off(g),0<=r()(pe).call(pe,g)&&N.myViewer.on(g,function(K,Te){o.D.isFunction(N[g])&&N[g](K,Te)})):o.D.isFunction(w)?N.myViewer.off(g,w):o.D.Errors.CallbackNotAFunction(N._stwain))}},{key:"initDialogText",value:function(g,w){return o.D.isUndefined(g)?g=w:(o.D.isUndefined(g.dlgChangeImageSize)?g.dlgChangeImageSize=w.dlgChangeImageSize:(0==g.dlgChangeImageSize[0].length&&(g.dlgChangeImageSize[0]=w.dlgChangeImageSize[0]),0==g.dlgChangeImageSize[1].length&&(g.dlgChangeImageSize[1]=w.dlgChangeImageSize[1]),0==g.dlgChangeImageSize[2].length&&(g.dlgChangeImageSize[2]=w.dlgChangeImageSize[2]),0==g.dlgChangeImageSize[3].length&&(g.dlgChangeImageSize[3]=w.dlgChangeImageSize[3]),0==g.dlgChangeImageSize[4].length&&(g.dlgChangeImageSize[4]=w.dlgChangeImageSize[4])),o.D.isUndefined(g.dlgRotateAnyAngle)?g.dlgRotateAnyAngle=w.dlgRotateAnyAngle:(0==g.dlgRotateAnyAngle[0].length&&(g.dlgRotateAnyAngle[0]=w.dlgRotateAnyAngle[0]),0==g.dlgRotateAnyAngle[1].length&&(g.dlgRotateAnyAngle[1]=w.dlgRotateAnyAngle[1]),0==g.dlgRotateAnyAngle[2].length&&(g.dlgRotateAnyAngle[2]=w.dlgRotateAnyAngle[2]),0==g.dlgRotateAnyAngle[3].length&&(g.dlgRotateAnyAngle[3]=w.dlgRotateAnyAngle[3]),0==g.dlgRotateAnyAngle[4].length&&(g.dlgRotateAnyAngle[4]=w.dlgRotateAnyAngle[4])),o.D.isUndefined(g.saveChangedImage)?g.saveChangedImage=w.saveChangedImage:(0==g.saveChangedImage[0].length&&(g.saveChangedImage[0]=w.saveChangedImage[0]),0==g.saveChangedImage[1].length&&(g.saveChangedImage[1]=w.saveChangedImage[1]),0==g.saveChangedImage[2].length&&(g.saveChangedImage[2]=w.saveChangedImage[2])),o.D.isUndefined(g.selectSource)?g.selectSource=w.selectSource:(0==g.selectSource[0].length&&(g.selectSource[0]=w.selectSource[0]),0==g.selectSource[1].length&&(g.selectSource[1]=w.selectSource[1]),0==g.selectSource[2].length&&(g.selectSource[2]=w.selectSource[2]),0==g.selectSource[3].length&&(g.selectSource[3]=w.selectSource[3]))),g}},{key:"createDocumentEditor",value:function(g){var w=this;if(!w._NouiNotSupport("createImageEditor"))return NaN;if(o.I.Lib.env.bMobile&&0==w.addCSSForShowVideo){var N=document.createElement("style"),K="*{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select:none;-ms-user-select:none;user-select:none;}";N.type="text/css";try{N.appendChild(document.createTextNode(K))}catch{N.styleSheet.cssText=K}document.body.appendChild(N),w.addCSSForShowVideo=!0}return!w._documentEditor||w._documentEditor.myDocumentEditor.isDestroyed?(K=w.setElementForDocumentConfiguration(g),N=w.getDefaultDocumentConfigurationValue(w._globalScanConfiguration,K,!0),w._globalScanConfiguration=N,w._documentEditor=new we(w,w.GetCurrentIndex(),N)):o.D.Errors.DocumentEditorExist(w._stwain),w._documentEditorInner=w._documentEditor._documentEditorInner,w.bShowDocumentEdit=w._documentEditorInner.bShowDocumentEdit,w._documentEditor}},{key:"createImageEditor",value:function(g){var w=this;return w._NouiNotSupport("createImageEditor")?(w._imageEditor?o.D.Errors.ImageEditorExist(w._stwain):(g?(o.D.isUndefined(g.border)&&(g.border=w.GetBorder()),o.D.isUndefined(g.selectionRectAspectRatio)&&(g.selectionRectAspectRatio=w.GetSelectionRectAspectRatio()),o.D.isUndefined(g.background)&&(g.background=$e.background),o.D.isUndefined(g.topMenuBorder)&&(g.topMenuBorder=$e.topMenuBorder),o.D.isUndefined(g.innerBorder)&&(g.innerBorder=$e.innerBorder),o.D.isUndefined(g.promptToSaveChange)&&(g.promptToSaveChange=$e.promptToSaveChange),o.D.isUndefined(g.buttons)&&(g.buttons=$e.buttons),g.dialogText=w.initDialogText(g.dialogText,$e.dialogText)):((g=$e).border=w.GetBorder(),g.selectionRectAspectRatio=w.GetSelectionRectAspectRatio()),w._imageEditor=new ze(w,g)),w._imageEditorInner=w._imageEditor._imageEditorInner,w.bShowImageEdit=w._imageEditorInner.bShowImageEdit,w._imageEditor):NaN}},{key:"createThumbnailViewer",value:function(g){var w=this;return w._NouiNotSupport("createThumbnailViewer")?(g&&!o.D.isUndefined(g.showCheckbox)&&(o.D.isUndefined(g.checkbox)&&(g.checkbox={}),g.checkbox.visibility=g.showCheckbox?"visible":"hidden"),w._thumbnailViewer?o.D.Errors.ThumbnailViewerExist(w._stwain):w._thumbnailViewer=new Ot(w,g),w.myThumbnailViewer=w._thumbnailViewer.myThumbnailViewer,w.myThumbnailViewer.on("click",function(N,K){w.UpdateInfo(!0,!1,!0)}),w._thumbnailViewer):NaN}},{key:"createCustomElement",value:function(g,w,N){var K=this,Te="right",Fe=!1;return K._NouiNotSupport("createCustomElement")?o.D.isUndefined(g)?(o.D.Errors.ElementRequired(K._stwain),NaN):g?(o.D.isUndefined(w)||(Te=w),!o.D.isUndefined(N)&&o.D.isBoolean(N)&&(Fe=N),K._customElement?o.D.Errors.CustomElementExist(K._stwain):(K._customElement=new T(K,g,Te,Fe),K._customElement.myCustomElemet||(K._customElement=void 0)),K._customElement):(o.D.Errors.ElementNotExist(K._stwain),NaN):NaN}},{key:"ConvertClientIndexToServerIdInFile",value:function(g,w){return g=this._fileWrapper.openFile(g),0<=w&&w<g.length&&(w=g[w])?this._dvsWrapper.getCustomDataSync(w).imageId:null}},{key:"ConvertServerIdToIndexInFile",value:function(g,w){for(var N=-1,K=this._fileWrapper.openFile(g),Te=0;Te<K.length;Te++){var Fe=K[Te];if(Fe&&(Fe=this._dvsWrapper.getCustomDataSync(Fe))&&Fe.imageId==w){N=Te;break}}return N}},{key:"FireBufferChanged",value:function(g,w,N){var K,Te=this._fileWrapper.openFile(g),Fe=null,Ke=(this.currentFileName==g&&(Ke=this.GetCurrentIndex(),(K=this.myViewer.getCurrentPageUids())&&0<=Ke&&Ke<K.length&&(Fe=K[Ke])),{action:w,actionData:N,uids:Te,currentUid:Fe,selectedUids:[],fromViewerBufferChanged:!1,file:g});this.IsInternalFile(g)||"add"==w?this._documentEditor&&this._documentEditor.syncFile(Ke):this.bufferChanged(Ke)}},{key:"RemoveByServerId",value:function(g,w){0<=(w=this.ConvertServerIdToIndexInFile(g,w))&&(this._fileWrapper.removeByIndexInFile(g,w),this.FireBufferChanged(g,"remove"))}},{key:"IsInternalFile",value:function(g){return 0==r()(g).call(g,"__dynamsoft_camera_files")||0==r()(g).call(g,"__dynamsoft_crop_files")||0==r()(g).call(g,"__dynamsoft_edit_files")||!1}},{key:"InsertImage",value:function(g,w,N){var K;this._bFireSync=!1,N=0<=N?this.mydvs.DataControl.insertSync(g,[w],N):this.mydvs.DataControl.appendSync(g,[w]),this._bFireSync=!0,N&&1<=N.length&&(K=N[0]),this.FireBufferChanged(g,"add",K)}}]),Le}()),et=(o.D.UI.WebViewer=Pt,bt),lt=o.I.DWT,Ut=function(){function Le(g,w){(0,s.Z)(this,Le);var N=this;N._ImgManager=g,N._stwain=g._stwain,N.zoomInStep=1.2,N.zoomOutStep=.8,N.MIN_ZOOM=.02,N.MAX_ZOOM=65,N.BaseUrl=!1,N.MAX_ROWS=128,N.MAX_COLUMNS=128,N.AllowMultiSelect=!0,N.__MousewheelValue=0,this._Init(w)}return(0,f.Z)(Le,[{key:"_Init",value:function(g){var w=this;w.borderWidth=o.D.isUndefined(g.borderWidth)?1:g.borderWidth,w.BackgroundColorByDefault=g.BackgroundColor?g.BackgroundColor:"#FFFFFF",g.BackgroundColor=w.BackgroundColorByDefault,w.BackgroundFillColor=w.BackgroundColorByDefault,w._webViewer?w._webViewer._Init(g):w._webViewer=new Pt(w._ImgManager,g,w),w.mapModelImageControl=g.mapModelImageControl,w.__InitEvents(g)}},{key:"dispose",value:function(){this._webViewer&&(this._webViewer.dispose(),this._webViewer=null)}},{key:"__InitEvents",value:function(g){var w=this;o.D.isFunction(g.onTopImageInTheViewChanged)&&(w.onTopImageInTheViewChanged=g.onTopImageInTheViewChanged),o.D.isFunction(g.onGetImageInfo)&&(w.onGetImageInfo=g.onGetImageInfo),o.D.isFunction(g.onZoomChanged)&&(w.onZoomChanged=g.onZoomChanged),o.D.isFunction(g.onMouseMove)&&(w.onMouseMove=g.onMouseMove),o.D.isFunction(g.onMouseClick)&&(w.onMouseClick=g.onMouseClick),o.D.isFunction(g.onMouseRightClick)&&(w.onMouseRightClick=g.onMouseRightClick),o.D.isFunction(g.onMouseDoubleClick)&&(w.onMouseDoubleClick=g.onMouseDoubleClick),o.D.isFunction(g.onImageAreaDeSelected)&&(w.onImageAreaDeSelected=g.onImageAreaDeSelected),o.D.isFunction(g.onImageAreaSelected)&&(w.onImageAreaSelected=g.onImageAreaSelected),o.D.isFunction(g.onBufferChanged)&&(w.onBufferChanged=g.onBufferChanged),o.D.isFunction(g.onSelected)&&(w.onSelected=g.onSelected),o.D.isFunction(g.onRefreshUI)&&(w.onRefreshUI=g.onRefreshUI),o.D.isFunction(g.onResetCurrentIndex)&&(w.onResetCurrentIndex=g.onResetCurrentIndex)}},{key:"SetMetaDataByIndex",value:function(g,w){return this.GetWebViewer().SetMetaDataByIndex(g,w)}},{key:"GetMetaDataByIndex",value:function(g){return this.GetWebViewer().GetMetaDataByIndex(g)}},{key:"GetDataImageControl",value:function(g){return this.mapModelImageControl[g]}},{key:"SetDataImageControl",value:function(g,w,N){var K;return-1!=w&&((K=this.mapModelImageControl[w])||((K=new _).serverId=w,this.mapModelImageControl[w]=K),null!=K&&(K.bIsDirty=!0),this.__GetImageAndAttach(K,w,!0,!1,!1,g,N),!0)}},{key:"AttachImagesForControl",value:function(g,w){var N=this.GetWebViewer();return g.bAddImage?N.AppendImage(g,w):N.UpdateImage(g,w),N._ImageEditorInner&&N._ImageEditorInner.bCouldBeTimeConsuming&&(N._ImageEditorInner.bCouldBeTimeConsuming=!1,o.I.Lib.hideMask()),!0}},{key:"MobileAttachImagesForControl",value:function(g,w){var N=this.GetWebViewer();return g.bAddImage?N.MobileAppendImage(g,w):N.MobileUpdateImage(g,w),N._ImageEditorInner&&N._ImageEditorInner.bCouldBeTimeConsuming&&(N._ImageEditorInner.bCouldBeTimeConsuming=!1,o.I.Lib.hideMask()),!0}},{key:"GetWebViewer",value:function(){return this._webViewer}},{key:"__GetWebViewerUuid",value:function(g){return this.mapModelImageControl[g].uuid}},{key:"SetSelectedImageArea",value:function(g,w,N,K){var Te=this.GetWebViewer();return null!=Te&&Te.SetSelectedImageArea(g,w,N,K)}},{key:"OverlayRectangle",value:function(g,w,N,K,Te,Fe,Ke){var Je=this.GetWebViewer();return null!=Je&&Je.OverlayRectangle(g,w,N,K,Te,Fe,Ke)}},{key:"ChangeImageViewSize",value:function(g,w){var N=this.GetWebViewer();return 0<=g&&(N.GetWidth(),N.SetWidth(g)),0<=w&&(N.GetHeight(),this.GetWebViewer().SetHeight(w)),!0}},{key:"GetWidth",value:function(){return this.GetWebViewer().GetWidth()}},{key:"SetWidth",value:function(g){return this.GetWebViewer().SetWidth(g),!0}},{key:"GetHeight",value:function(){return this.GetWebViewer().GetHeight()}},{key:"SetHeight",value:function(g){return this.GetWebViewer().SetHeight(g),!0}},{key:"RefreshAllImages",value:function(g,w){var N=this.GetWebViewer();if(!this._stwain._isMobileMode()&&this.mapModelImageControl)for(var K=0;K<N.GetHowManyImagesInBuffer();K++){var Te=this.getImageManager().convertClientIndexToServerId(K),Fe=this.mapModelImageControl[Te];Fe&&(Te=et.getImageUrl(this.BaseUrl,Te,g,w,l()()),Fe.minImageUrl=Te,Te=N.GetMetaDataByIndex(K),N.UpdateImage(Fe,Te))}}},{key:"SetViewMode",value:function(g,w){return this.GetWebViewer().SetViewMode(g,w)}},{key:"RemoveAllImages",value:function(){for(var g,w=this._ImgManager.count(),N=I()(this.mapModelImageControl).length,K=0;K<w;K++)-1!=(g=this.getImageManager().convertClientIndexToServerId(K))&&this.mapModelImageControl[g]&&(this.mapModelImageControl[g].Clear(),delete this.mapModelImageControl[g]);return w==N&&(this.mapModelImageControl={}),this.GetWebViewer().RemoveAllImages(),!0}},{key:"__GetImageAndAttach",value:function(g,w,xe,K,Te,Fe,Ke){var Je=this.GetWebViewer().GetWidth(),Ye=this.GetWebViewer().GetHeight(),qt=!!xe||1==g.bIsDirty;(xe=this.__GetWebViewerUuid(w))&&g.iImageControlWidth==Je&&g.iImageControlHeight==Ye&&0==g.bIsDirty||this.__SetArrayControlLoadImage(xe,w,g,Je,Ye,this.AttachImagesForControl,qt,K,Te,Fe,Ke)}},{key:"__SetArrayControlLoadImage",value:function(g,w,N,K,Te,Fe,Ke,Je,Ye,qt,xe){this._stwain._isMobileMode()?this.OnGetImageFromMobileServer(w,N,K,Te,Je,Ye,qt,xe):Ke?this.OnGetImageFromServer(w,N,K,Te,Je,Ye,qt,xe):this.OnGetImageByURL(w,N,K,Te,Je,Ye,qt,xe)}},{key:"OnGetImageByURL",value:function(g,w,N,K,Te,Fe,Ke,Je){return w.imageUrl&&""!=w.imageUrl?(w.iImageControlWidth=N,w.iImageControlHeight=K,w.bAddImage=Te,w.bAppendImage=Fe,w.index=Ke,this._stwain._isMobileMode()?this.MobileAttachImagesForControl(w,Je):this.AttachImagesForControl(w,Je),!0):this.OnGetImageFromServer(g,w,N,K,Te,Fe,Ke,Je)}},{key:"OnGetImageFromMobileServer",value:function(g,w,N,K,Te,Fe,Ke,Je){w.iImageControlWidth=N,w.iImageControlHeight=K,w.bAddImage=Te,w.bAppendImage=Fe,w.index=Ke,this.MobileAttachImagesForControl(w,Je)}},{key:"OnGetImageFromServer",value:function(g,w,N,K,Te,Fe,Ke,Je){var Ye=this,qt=Ye.BaseUrl;if(qt){if(-1==g)return!1;w.bIsDirty&&(w.ticks=l()()),o.D.isUndefined(N)&&(N=-1),o.D.isUndefined(K)&&(K=-1),w.iImageControlWidth=N,w.iImageControlHeight=K,w.bAddImage=Te,w.bAppendImage=Fe,w.index=Ke,o.I.DWT.ConnectWithSocket&&Ye._stwain._bBindViewer?Ye._stwain.__innerConvertToBlob(o.I.DWT.EnumDWT_ImageType.IT_PNG,[g],!1,!0,4,function(xe){w.imageUrl=v().createObjectURL(xe),w.minImageUrl=v().createObjectURL(xe),Ye.AttachImagesForControl(w,Je)},function(xe){}):(Te=et.getImageUrl(qt,g,-1,-1,w.ticks),Fe=et.getImageUrl(qt,g,N,K,w.ticks),w.imageUrl=Te,w.minImageUrl=Fe,Ye.AttachImagesForControl(w,Je))}return!0}},{key:"SetIfFitWindowAndType",value:function(g){var w,N=this.GetWebViewer();if(null!=N){switch(g){case 1:w="height";break;case 2:w="width";break;default:w="window"}N.SetFitType(w)}return!0}},{key:"GetAllowMultiSelect",value:function(){return this.AllowMultiSelect}},{key:"SetAllowMultiSelect",value:function(g){return this.AllowMultiSelect=g,!0}},{key:"GetFitWindowType",value:function(){return 0}},{key:"SetSelectionRectAspectRatio",value:function(g){return this.GetWebViewer().SetSelectionRectAspectRatio(g),!0}},{key:"GetSelectionRectAspectRatio",value:function(g){return this.GetWebViewer().GetSelectionRectAspectRatio()}},{key:"SetFitWindowType",value:function(g){return this.SetIfFitWindowAndType(g),!0}},{key:"GetIfFitWindow",value:function(){return!0}},{key:"SetIfFitWindow",value:function(g){return g?this.GetWebViewer().SetFitType():this.GetWebViewer().SetZoom(1),!0}},{key:"GetImageMargin",value:function(){return this.GetWebViewer().GetImageMargin()}},{key:"SetImageMargin",value:function(g){return this.GetWebViewer().SetImageMargin(g),!0}},{key:"GetSelectionImageBorderColor",value:function(){return this.GetWebViewer().GetSelectedPageBorder()}},{key:"SetSelectionImageBorderColor",value:function(g){return this.GetWebViewer().SetSelectionImageBorderColor(g),!0}},{key:"GetZoom",value:function(){return this.GetWebViewer().GetZoom()}},{key:"SetZoom",value:function(g){return(g=g<this.MIN_ZOOM?this.MIN_ZOOM:g)>this.MAX_ZOOM&&(g=this.MAX_ZOOM),this.GetWebViewer()?.SetZoom(g),!0}},{key:"ZoomIn",value:function(g,w){var N=this.mapModelImageControl[this.getImageManager().convertClientIndexToServerId(this._webViewer.GetCurrentIndex())],K=this.GetWebViewer().GetZoom(),Te=Math.floor(100*K*this.zoomInStep)+1;return!(1<Te&&Te<2501)||15e3<a()(N.imageWidth*K)||15e3<a()(N.imageHeight*K)?(et.output(this,lt.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),alert(lt.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),!1):(this.SetZoom(Te/100,g,w),!0)}},{key:"ZoomOut",value:function(){var g=this.GetWebViewer().GetZoom();return 1<(g=Math.floor(100*g*this.zoomOutStep)-1)&&g<6501?(this.SetZoom(g/100),!0):(et.output(this,lt.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),alert(lt.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),!1)}},{key:"GetMouseShape",value:function(){return this.GetWebViewer().GetMouseShape()}},{key:"SetMouseShape",value:function(g){return this.GetWebViewer().SetMouseShape(g),!0}},{key:"GetShowPageNumber",value:function(){return this.GetWebViewer().GetShowPageNumber()}},{key:"SetShowPageNumber",value:function(g){return this.GetWebViewer().SetShowPageNumber(g),!0}},{key:"SetBackgroundFillColor",value:function(g){return this.BackgroundFillColor=g,!0}},{key:"GetBackgroundColor",value:function(){return this.GetWebViewer().GetBackground()}},{key:"SetBackgroundColor",value:function(g){return this.GetWebViewer().SetBackground(g),!0}},{key:"Go",value:function(g){return this.GetWebViewer().go(g)}},{key:"SetSelectedindexes",value:function(g){return this.GetWebViewer().SetSelectedindexes(g)}},{key:"GetSelectedindexes",value:function(g){return this.GetWebViewer().GetSelectedindexes()}},{key:"__Previous",value:function(){return this.Go(this.GetWebViewer().GetCurrentIndex()-1),!0}},{key:"__Next",value:function(){return this.Go(this.GetWebViewer().GetCurrentIndex()+1),!0}},{key:"__fireEvent",value:function(g,w){return!o.D.isFunction(this[g])||this[g](w)}},{key:"AddImage",value:function(Fe,w,N,K){var Te;return Fe=+Fe,-1!=w&&((Te=new _).bIsDirty=!0,Te.serverId=w,this.mapModelImageControl[w]=Te,0<=w&&this.__GetImageAndAttach(Te,w,!1,!0,K,Fe,N),!0)}},{key:"RemoveImage",value:function(g,w){return g=a()(g),isNaN(g)?(o.D.Errors.InvalidIndex(this),!1):g<0||g>=this._ImgManager.count()?(o.D.Errors.IndexOutOfRange(this),!1):(this._ImgManager.count(),-1!=w&&this.mapModelImageControl[w]&&(this.mapModelImageControl[w].Clear(),delete this.mapModelImageControl[w]),this.GetWebViewer().RemoveByIndex(g))}},{key:"MoveImage",value:function(g,w,N){return this.GetWebViewer().MoveImage(g,w)}},{key:"SwitchImage",value:function(g,w){return this.GetWebViewer().SwitchImage(g,w)}},{key:"GetIfAutoScroll",value:function(){return this._webViewer.GetIfAutoScroll()}},{key:"SetIfAutoScroll",value:function(g){return this._webViewer.SetIfAutoScroll(g),!0}},{key:"Print",value:function(){var g=this,w=g.GetWebViewer().GetCurrentIndex();if(!(w<0)){var N=g.getImageManager().convertClientIndexToServerId(w);if(-1==N)return o.D.Errors.IndexOutOfRange(g),!1;if(!g._stwain._isMobileMode())return K=et.getImageUrl(g.BaseUrl,N,-1,-1),g.__PrintInner(K,N,w);var K=g.GetWebViewer().GetUidByIndex(w);return g.GetWebViewer().GetImageData(K).then(function(Te){return Te.oriData instanceof ArrayBuffer?g.__PrintInner(v().createObjectURL(new Blob([Te.oriData])),N,w):Te.oriData instanceof Blob?g.__PrintInner(v().createObjectURL(Te.oriData),N,w):g.__PrintInner(Te.oriData,N,w)}),!0}}},{key:"__PrintInner",value:function(g,K,Je){var Te=[];if(!(K=this.mapModelImageControl[K]))return!1;var Fe=K.width,Ke=((o.D.isUndefined(K.width)||K.width<=0)&&(K.width=this.getImageManager().GetImageWidth(Je)),K.height);return(o.D.isUndefined(K.height)||K.height<=0)&&(K.height=this.getImageManager().GetImageHeight(Je)),Je=new h(g,K.width,K.height),Te.push(Je),K.width=Fe,K.height=Ke,et.print(Te),!0}},{key:"GetHowManyImagesInBuffer",value:function(){return this.GetWebViewer().GetHowManyImagesInBuffer()}},{key:"RemoveImageTag",value:function(g){return this.GetWebViewer().RemoveImageTag(g)}},{key:"FilterImagesByTag",value:function(g,w,N){return this.GetWebViewer().FilterImagesByTag(g,w,N)}},{key:"ClearFilter",value:function(){return this.GetWebViewer().ClearFilter()}},{key:"GetServerIdList",value:function(){return this.GetWebViewer().GetServerIdList()}},{key:"GetServerIdListByTag",value:function(g){var w,N,K,Te,Fe=[];if(g&&0==g.length)for(N=0;N<this.GetHowManyImagesInBuffer();N++)(Te=this.GetWebViewer().GetCustomDataByIndex(N))&&Fe.push(Te.imageId);else if(w=this.GetWebViewer().GetTagContents(g))for(N=0;N<w.length;N++)0<=(K=this.GetWebViewer().GetIndexByUid(w[N]))&&(Te=this.GetWebViewer().GetCustomDataByIndex(K))&&Fe.push(Te.imageId);return Fe}},{key:"SetDefaultTag",value:function(g){return this.GetWebViewer().SetDefaultTag(g)}},{key:"AddImageTag",value:function(g,w){return this.GetWebViewer().AddImageTag(g,w)}},{key:"GetCurrentTag",value:function(){var g=this.GetWebViewer().GetCurrentTag();return 0==g?"":g}},{key:"RenameTag",value:function(g,w){return this.GetWebViewer().RenameTag(g,w)}},{key:"RemoveTag",value:function(g,w){return this.GetWebViewer().RemoveTag(g,w)}},{key:"GetTagList",value:function(){return this.GetWebViewer().GetTagList()}},{key:"GetTagListByIndex",value:function(g){return this.GetWebViewer().GetTagListByIndex(g)}},{key:"CreateFile",value:function(g){return this.GetWebViewer().CreateFile(g)}},{key:"OpenFile",value:function(g){return this.GetWebViewer().OpenFile(g)}},{key:"GetCurrentFileName",value:function(){return this.GetWebViewer().GetCurrentFileName()}},{key:"RemoveFile",value:function(g){return this.GetWebViewer().RemoveFile(g)}},{key:"RenameFile",value:function(g,w){return this.GetWebViewer().RenameFile(g,w)}},{key:"GetFileInfoList",value:function(){return this.GetWebViewer().GetFileInfoList()}},{key:"GetImageIdsByFileName",value:function(g){return this.GetWebViewer().GetImageIdsByFileName(g)}},{key:"BindView",value:function(g){var w=this.GetWebViewer();return(g=w.BindView(g))&&w.show(),g}},{key:"UnbindView",value:function(){return this.GetWebViewer().UnbindView()}},{key:"GetIfShowVideoContainer",value:function(){return this.GetWebViewer().GetIfShowVideoContainer()}},{key:"ShowVideoContainer",value:function(g){return this.GetWebViewer().ShowVideoContainer(g)}},{key:"UpdateVideoContainer",value:function(g){return this.GetWebViewer().UpdateVideoContainer(g)}},{key:"__AttachImages",value:function(){for(var g,N=this.GetWebViewer().GetHowManyImagesInBuffer(),K=0;K<N;K++)0<=(g=this._ImgManager.convertClientIndexToServerId(K))&&this.__GetImageAndAttach(this.mapModelImageControl[g],g,!0,!1,!1,0)}},{key:"exists",value:function(g){return!o.D.isUndefined(this.mapModelImageControl[g])}},{key:"getImageManager",value:function(){return this._ImgManager}},{key:"GetImageData",value:function(g){this.GetWebViewer().GetImageData(g)}},{key:"RegistLoadCallback",value:function(g){return this.GetWebViewer().RegistLoadCallback(g)}},{key:"UpdateData",value:function(K,w){var N=this.GetWebViewer();return(K=this.GetDataImageControl(K))&&N.UpdateImage(K,w),!0}},{key:"RemoveByServerId",value:function(g,w){return this.GetWebViewer().RemoveByServerId(g,w)}},{key:"innerInsertModel",value:function(g,w){var N=new _;N.serverId=g,N.uuid=w,this.mapModelImageControl[g]=N}}]),Le}();o.D.UI.ImageUIView=Ut;var wn=function(Le){o.I.DWT.Debug&&o.D.log(Le)},Ln=function(){function Le(g,w){(0,s.Z)(this,Le),this._stwain=g,this.__BackgroundFillColor=16777215,this.bImageJustChangedInEditor=!1,this.bImageChangedInViewer=!1,this._Init(g,w)}return(0,f.Z)(Le,[{key:"_Init",value:function(g,w){var N=this;w.mapModelImageControl=g._ifBindViewer?N.getView().mapModelImageControl:{},w.onTopImageInTheViewChanged=function(K){o.I.Lib.isFunction(g.__OnTopImageInTheViewChanged)&&g.__OnTopImageInTheViewChanged(K.index,K.bByScrollBar)},w.onGetImageInfo=function(K){return{width:N.GetImageWidth(K),height:-1}},N._UIView?N._UIView._Init(w):N._UIView=new Ut(N,w)}},{key:"getUidByIndex",value:function(g){return this.getWebViewer().GetUidByIndex(g)}},{key:"getIndexByUid",value:function(g){return this.getWebViewer().GetIndexByUid(g)}},{key:"getCurrentImageIndex",value:function(){return this.getWebViewer().GetCurrentIndex()}},{key:"convertServerIdToClientIndex",value:function(K){var w,N=-1;return(w=(K=this._UIView.GetDataImageControl(K))?K.uuid:w)&&(N=this.getWebViewer().GetIndexByUid(w)),o.D.isNumber(N)?N:-1}},{key:"convertClientIndexToServerId",value:function(g){return(g=this.getWebViewer().GetCustomDataByIndex(g))?g.imageId:-1}},{key:"convertClientIndexToServerIdInFile",value:function(g,w){return this.getWebViewer().ConvertClientIndexToServerIdInFile(g,w)}},{key:"getWebViewer",value:function(){return this.getView()._webViewer}},{key:"getTwain",value:function(){return this._stwain}},{key:"getView",value:function(){return this._UIView}},{key:"OnReady",value:function(){return this.getView().BaseUrl=function(Le){return[Le.httpUrl,"dwt/",o.D.product.getDWTPrefix(),o.D.product.getServerVersionInfo(),"/img?id=",Le.clientId].join("")}(this._stwain),!0}},{key:"count",value:function(){return this.getView().GetWebViewer().GetHowManyImagesInBuffer()}},{key:"clear",value:function(){return this.getView().RemoveAllImages(),!0}},{key:"dispose",value:function(){return this._UIView&&(this._UIView.dispose(),this._UIView=null),!0}},{key:"unshift",value:function(g,w,N){return this.getView(),this._updateUIAfterAdd(0,w,N)}},{key:"append",value:function(g,w,N){for(var K,Te,Fe=this.getView(),Ke=Fe.GetWebViewer().GetHowManyImagesInBuffer(),Je=Fe.GetWebViewer().GetCurrentIndex(),Ye=Ke-1;g<=Ye;Ye--)Te=this.convertClientIndexToServerId(Ye),Fe.RemoveImage(Ye,Te);return Ke<g?this._updateUIAfterAdd(K=Ke,w,N,!0):(Te=this.convertClientIndexToServerId(K=Ke-1<=Je?0:Je+1),Fe.RemoveImage(K,Te),this._updateUIAfterAdd(K,w,N,K==g-1))}},{key:"exists",value:function(g){return this.getView().exists(g)}},{key:"insertBefore",value:function(g,w,N,K){return((g=+g)<0||w<g)&&(g=-1),w=this.getView().GetWebViewer().GetHowManyImagesInBuffer(),this._updateUIAfterAdd(g=w<=g?w:g,N,K,!1)}},{key:"insert",value:function(g,w,N,K){return((g=+g)<0||w<g)&&(g=-1),w=this.getView().GetWebViewer().GetHowManyImagesInBuffer(),this._updateUIAfterAdd(g=w<=g?w:g,N,K,!1)}},{key:"_updateUIAfterAdd",value:function(g,w,N,K){var Te=this.getView();return!(w<0)&&Te.AddImage(g,w,N,K)}},{key:"removeByServerId",value:function(g,w){var N=g,K=this.GetCurrentFileName();return(!N||N==K)&&((K=this.convertServerIdToClientIndex(w))<0&&0<=(K=this.getWebViewer().ConvertServerIdToIndexInFile(N,w))&&(N=this.getUidByIndex(K),this.getView().innerInsertModel(w,N)),0<=K)?this.remove(w):this.getView().RemoveByServerId(g,w)}},{key:"remove",value:function(g){var w=this.getView(),N=this.convertServerIdToClientIndex(g);return w.RemoveImage(N,g)}},{key:"MoveImage",value:function(g,w){return this.getView().MoveImage(g,w)}},{key:"SwitchImage",value:function(g,w){return this.getView().SwitchImage(g,w)}},{key:"GetImageHeight",value:function(w){w=+w;var N=this.getView(),K=this.count();return w<0||K<w?0:this._stwain._isMobileMode()?(K=N._webViewer.GetMetaDataByIndex(w))&&K.height?K.height:0:(K=this.convertClientIndexToServerId(w),(K=N.GetDataImageControl(K))&&K.imageHeight?K.imageHeight:this._stwain.GetImageHeight(w))}},{key:"GetImageWidth",value:function(w){w=+w;var N=this.getView(),K=this.count();return w<0||K<w?0:this._stwain._isMobileMode()?(K=N._webViewer.GetMetaDataByIndex(w))&&K.width?K.width:0:(K=this.convertClientIndexToServerId(w),(K=N.GetDataImageControl(K))&&K.imageWidth?K.imageWidth:this._stwain.GetImageWidth(w))}},{key:"get",value:function(w){w=a()(w);var N=this.getView(),K=this.count();return!(w<0||K<w)&&(K=this.convertClientIndexToServerId(w),N.GetDataImageControl(K))}},{key:"refresh",value:function(g,w,N,K){if(g=+g,N){N=this.getView();var Te=this.count();if(g<0||Te<g)return!1;Te=this.convertClientIndexToServerId(g),N.SetDataImageControl(g,Te,K)}return!0}},{key:"Go",value:function(g){return this.getView().Go(g)}},{key:"__Next",value:function(){return this.getView().__Next()}},{key:"__Previous",value:function(){return this.getView().__Previous()}},{key:"SetSelectedClientIndexArray",value:function(g){return this.getView().SetSelectedindexes(g)}},{key:"getSelectedClientIndexArray",value:function(){return this.getView().GetSelectedindexes()}},{key:"GetZoom",value:function(){return this.getView().GetZoom()}},{key:"SetZoom",value:function(g){return this.getView().SetZoom(g)}},{key:"__GetPrintUrl",value:function(g,Ke,N){var K,Te=0,Fe=0;return(Ke=this.getView().GetDataImageControl(Ke))&&(!Ke.width||Ke.width<=0?Ke.width=this.GetImageWidth(N):Te=Ke.width,!Ke.height||Ke.height<=0?Ke.height=this.GetImageHeight(N):Fe=Ke.height,K=new h(g,Ke.width,Ke.height),Ke.width=Te,Ke.height=Fe),K}},{key:"__GetPrintUrlforHttp",value:function(g,w){var N=this,K=N.getView();o.D.each(g,function(Te){var Fe,Ke=N.convertClientIndexToServerId(Te);-1!=Ke&&(Fe=bt.getImageUrl(K.BaseUrl,Ke,-1,-1),Fe=N.__GetPrintUrl(Fe,Ke,Te),w.push(Fe))}),bt.print(w)}},{key:"__GetPrintUrlforSocket",value:function(g,w){var N,K=this,Te=o.D.Promise.resolve(0),Fe=0;return o.D.each(g,function(Ke){Te=Te.then(function(){var Je,Ye=K.convertClientIndexToServerId(Ke);-1!=Ye&&(Je=K.getWebViewer().GetUidByIndex(Ke),K.getWebViewer().GetImageData(Je).then(function(qt){Fe++,N=qt.oriData instanceof ArrayBuffer?v().createObjectURL(new Blob([qt.oriData])):qt.oriData instanceof Blob?v().createObjectURL(qt.oriData):qt.oriData,qt=K.__GetPrintUrl(N,Ye,Ke),w.push(qt),g.length==Fe&&bt.print(w)}))})}),!0}},{key:"__GetPrintUrlforMobileEx",value:function(g,w){var N,K=this,Te=o.D.Promise.resolve(0),Fe=0;return o.D.each(g,function(Ke){Te=Te.then(function(){var Je,Ye=K.convertClientIndexToServerId(Ke);-1!=Ye&&(Je=K.getWebViewer().GetUidByIndex(Ke),K.getWebViewer().GetImageData(Je).then(function(qt){Fe++,N=qt.oriData instanceof ArrayBuffer?v().createObjectURL(new Blob([qt.oriData])):qt.oriData instanceof Blob?v().createObjectURL(qt.oriData):qt.oriData,qt=K.__GetPrintUrl(N,Ye,Ke),w.push(qt),g.length==Fe&&bt.print(w)}))})}),!0}},{key:"PrintEx",value:function(g){var w;if(!(this.count()<=0))return w=[],this._stwain._isMobileMode()?this.__GetPrintUrlforMobileEx(g,w):o.I.DWT.ConnectWithSocket?this.__GetPrintUrlforSocket(g,w):this.__GetPrintUrlforHttp(g,w),!0}},{key:"Print",value:function(){if(this.count()<=0)return!1;for(var g=[],w=0;w<this.count();w++)g.push(w);return this.PrintEx(g)}},{key:"_isNoViewer",value:function(){return!this._stwain._bBindViewer}},{key:"ChangeSize",value:function(g,w){return this.getView().ChangeImageViewSize(g,w)}},{key:"GetWidth",value:function(){return this.getView().GetWidth()}},{key:"SetWidth",value:function(g,w){return!!this._isNoViewer()||this.getView().SetWidth(g)}},{key:"GetHeight",value:function(){return this.getView().GetHeight()}},{key:"SetHeight",value:function(g,w){return!!this._isNoViewer()||this.getView().SetHeight(g)}},{key:"SetViewMode",value:function(g,w){return this._isNoViewer()?this._nouiNotSupport("SetViewMode"):this.getView().SetViewMode(g,w)}},{key:"ShowImageEditorEx",value:function(g,w,N,K,qt,Fe,Ke,Je){if(this._isNoViewer())return this._nouiNotSupport("ShowImageEditorEx");switch(qt){case 0:case 1:case 2:break;case 3:if(this.getWebViewer().OnCloseImageEditor())return!0}qt=document;var Ye,xe=this.getView();this.getTwain()._containerElement==Ke&&(Fe=!1,wn("warning: cannot use the same DIV for the main viewer and the editor viewer."));for(var ut=0;ut<o.I.DWT.DynamicContainers.length;ut++)if(o.I.DWT.DynamicContainers[ut].ContainerId==Ke){Fe=!1,wn("warning: cannot use an DIV which is already consumed by the method CreateDWTObject.");break}if(Fe&&Ke&&(o.D.isDOM(Ke)?Ye=Ke:o.D.isShadowRoot(Ke)?(Ye=document.createElement("div"),Ke.appendChild(Ye)):(Ye=qt.getElementById(Ke))&&"DIV"!=Ye.nodeName&&(wn("warning: cannot create the editor viewer in a non-DIV element."),Fe=!1)),Fe&&Ke&&o.D.isDOM(Ke)){var ue,se,le,Ue=o.D.getShadowRoot(Ke);if(Ue)return ue=o.I.Lib.timestamp,(le=qt.createElement("link")).href=[o.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",ue].join(""),le.rel="stylesheet",le.async=!0,(se=qt.createElement("link")).href=[o.I.DWT.ResourcesPath,"/src/dynamsoft.webtwain.css",ue].join(""),se.rel="stylesheet",se.async=!0,o.D.scriptOnload(le,function(){o.D.scriptOnload(se,function(){return xe.GetWebViewer().ShowImageEditor(Ye,Fe,N,K)}),Ue.appendChild(se)}),Ue.appendChild(le),!0}return xe.GetWebViewer().ShowImageEditor(Ye,Fe,N,K)}},{key:"SetSelectionRectAspectRatio",value:function(g){return this.getView().SetSelectionRectAspectRatio(g)}},{key:"GetSelectionRectAspectRatio",value:function(){return this.getView().GetSelectionRectAspectRatio()}},{key:"GetSelectionImageBorderColor",value:function(){return this.getView().GetSelectionImageBorderColor()}},{key:"SetSelectionImageBorderColor",value:function(g){return this.getView().SetSelectionImageBorderColor(g)}},{key:"GetBackgroundColor",value:function(){return this.getView().GetBackgroundColor()}},{key:"SetBackgroundColor",value:function(g,w){var N;return!!this._isNoViewer()||(N=this.getView(),w?N.SetBackgroundColor(g,!0):N.SetBackgroundColor(g))}},{key:"GetAllowMultiSelect",value:function(){var g=this.getView();return!this._isNoViewer()&&g.GetAllowMultiSelect()}},{key:"SetAllowMultiSelect",value:function(g){var w=this.getView();return!!this._isNoViewer()||w.SetAllowMultiSelect(g)}},{key:"GetFitWindowType",value:function(){var g=this.getView();return this._isNoViewer()?0:g.GetFitWindowType()}},{key:"SetFitWindowType",value:function(g){var w=this.getView();return!!this._isNoViewer()||w.SetFitWindowType(g)}},{key:"GetIfFitWindow",value:function(){var g=this.getView();return!!this._isNoViewer()||g.GetIfFitWindow()}},{key:"SetIfFitWindow",value:function(g){var w=this.getView();return!!this._isNoViewer()||w.SetIfFitWindow(g)}},{key:"GetImageMargin",value:function(){var g=this.getView();return this._isNoViewer()?0:g.GetImageMargin()}},{key:"SetImageMargin",value:function(g){var w=this.getView();return!!this._isNoViewer()||w.SetImageMargin(g)}},{key:"GetMouseShape",value:function(){var g=this.getView();return this._isNoViewer()?0:g.GetMouseShape()}},{key:"SetMouseShape",value:function(g){var w=this.getView();return!!this._isNoViewer()||w.SetMouseShape(g)}},{key:"GetShowPageNumber",value:function(){var g=this.getView();return!this._isNoViewer()&&g.GetShowPageNumber()}},{key:"SetShowPageNumber",value:function(g){var w=this.getView();return!!this._isNoViewer()||w.SetShowPageNumber(g)}},{key:"GetIfAutoScroll",value:function(){return this.getView().GetIfAutoScroll()}},{key:"SetIfAutoScroll",value:function(g){return this.getView().SetIfAutoScroll(g)}},{key:"OverlayRectangle",value:function(g,w,N,K,Te,Fe,Ke){return!!this._isNoViewer()||this.getView().OverlayRectangle(g,w,N,K,Te,Fe,Ke)}},{key:"SetSelectedImageArea",value:function(g,w,N,K,Te){var Fe=this.getView();return g==Fe.GetWebViewer().GetCurrentIndex()&&(!!this._isNoViewer()||Fe.SetSelectedImageArea(w,N,K,Te))}},{key:"ShowImagesByFilter",value:function(g,w,N){return this.getView().FilterImagesByTag(g,w,N)}},{key:"ClearFilter",value:function(){return this.getView().ClearFilter()}},{key:"GetServerIdListByTag",value:function(g){return this.getView().GetServerIdListByTag(g)}},{key:"GetAllServerIdList",value:function(){return this.getView().GetServerIdList()}},{key:"RemoveImageTag",value:function(g){return this.getView().RemoveImageTag(g)}},{key:"SetDefaultTag",value:function(g){return this.getView().SetDefaultTag(g)}},{key:"AddImageTag",value:function(g,w){return this.getView().AddImageTag(g,w)}},{key:"GetCurrentTag",value:function(){return this.getView().GetCurrentTag()}},{key:"RenameTag",value:function(g,w){return this.getView().RenameTag(g,w)}},{key:"RemoveTag",value:function(g,w){return this.getView().RemoveTag(g,w)}},{key:"GetTagList",value:function(){return this.getView().GetTagList()}},{key:"GetTagListByIndex",value:function(g){return this.getView().GetTagListByIndex(g)}},{key:"OpenFile",value:function(g){return this.getView().OpenFile(g)}},{key:"CreateFile",value:function(g){return this.getView().CreateFile(g)}},{key:"GetCurrentFileName",value:function(){return this.getView().GetCurrentFileName()}},{key:"RemoveFile",value:function(g){return this.getView().RemoveFile(g)}},{key:"RenameFile",value:function(g,w){return this.getView().RenameFile(g,w)}},{key:"GetFileInfoList",value:function(){return this.getView().GetFileInfoList()}},{key:"GetImageIdsByFileName",value:function(g){return this.getView().GetImageIdsByFileName(g)}},{key:"BindView",value:function(g){var w=this.getView(),N=g;return o.D.isString(g)?N=o.D.get(g):!o.D.isDOM(N)||N.id&&""!=N.id||(N.id=["dwt_",o.D.getRandom()].join("")),w.BindView(N)}},{key:"UnbindView",value:function(){return this.getView().UnbindView()}},{key:"GetIfShowVideoContainer",value:function(){return this.getView().GetIfShowVideoContainer()}},{key:"ShowVideoContainer",value:function(g){return this.getView().ShowVideoContainer(g)}},{key:"UpdateVideoContainer",value:function(g){return this.getView().UpdateVideoContainer(g)}},{key:"GetImageData",value:function(N){var w=this.getView();return 0<=(N=this.convertServerIdToClientIndex(N))?w.GetImageData(this.getUidByIndex(N)):NaN}},{key:"RegistLoadCallback",value:function(g){return this.getView().RegistLoadCallback(g)}},{key:"insertImage",value:function(g,w,N){this.getWebViewer().InsertImage(g,w,N)}}]),Le}(),Cn=(o.D.UI.ImageManager=Ln,o.D.html5.Funs),In=function(g){o.D.dlgProgress||o.D.initProgress();var w=o.D.one(".dynamsoft-btnCancel");w&&w.getEL()&&o.D.addEventListener(w[0],"mousedown",function(){var K=o.D.cancelFrome;o.D.closeProgress(g,0),1==K||2==K?o.D.bio&&(o.D.bio.abort(),o.D.bio=!1):3==K||4==K?g.SetCancel():5==K&&o.D.isFunction(g.__OnCancel)&&g.__OnCancel()})};o.D.mix(Cn,{changeImageUISize:function(Le,g,Ye){var N,K,Te=g,Fe=Ye,Ke=!1,Je=o.D.one(Le._containerElement);return o.D.isString(g)&&0<=r()(g).call(g,"%")?(0==(N=o.D.css(Je,"width"))&&(Je[0].style.width="100%"),N=o.D.css(Je,"width")*a()(g)/100,Ke=!0):Te=[(N=a()(g))+2,"px"].join(""),o.D.isString(Ye)&&0<=r()(Ye).call(Ye,"%")?(0==(K=o.D.css(Je,"height"))&&(Je[0].style.height="100%"),K=o.D.css(Je,"height")*a()(Ye)/100,Ke=!0):Fe=[(K=a()(Ye))+2,"px"].join(""),Je&&(g=o.D.one(".dynamsoft-dwt-container-box",Je))&&g.getEL()&&(g.style("width",Te),g.style("height",Fe)),Ke?(Le.__funResize||(Le.__funResize=function(){var qt;return!Le._ImgManager||!Le._containerElement||(qt=Cn.__innerGetUIViewRealSize(Le._containerElement,Le._width,Le._height),Le._ImgManager.ChangeSize(qt.width,qt.height))}),o.D.removeEventListener(window,"resize",Le.__funResize),o.D.addEventListener(window,"resize",Le.__funResize)):Le.__funResize&&(o.D.removeEventListener(window,"resize",Le.__funResize),Le.__funResize=!1),Ye=Cn.__innerGetUIViewRealSize(Le._containerElement,N,K),!Le._ImgManager||Le._ImgManager.ChangeSize(Ye.width,Ye.height)},__innerGetUIViewRealSize:function(Te,g,w){var N=-1,K=-1;return Te=o.D.one(Te),{width:N=(N=o.D.isString(g)&&0<=r()(g).call(g,"%")?o.D.css(Te,"width")*a()(g)/100:N)<0&&g?a()(g):N,height:K=(K=o.D.isString(w)&&0<=r()(w).call(w,"%")?o.D.css(Te,"height")*a()(w)/100:K)<0&&w?a()(w):K}},bindUIViewEvents:function(Le,g){var w=Le;g.onSelected=function(N){var K;w._isNoViewer()||0<(K=N.length)&&(w._ImgManager.SetSelectedImageCount(K),K=N[K-1],o.D.isFunction(w.__OnRefreshUI)&&w.__OnRefreshUI(K))},g.onRefreshUI=function(N){w._isNoViewer()||Cn.__innerRefreshFromUIView(w,N)},g.onResetCurrentIndex=function(N){var K;w._isNoViewer()||(K=w._ImgManager.getCurrentImageIndex(),0<=N&&N<w._ImgManager.count()&&K!=N&&o.D.isFunction(w.__OnIndexChangeDuringDragDrop)&&w.__OnIndexChangeDuringDragDrop(K,N))},g.onMouseMove=function(N){var K,Te;w._isNoViewer()||(K=N.index,N&&(Te=N.x,N=N.y,w.__MouseX=Te,w.__MouseY=N),o.D.isFunction(w.__OnMouseMove)&&w.__OnMouseMove(K))},g.onMouseClick=function(N){var K,Te;w._isNoViewer()||(K=N.index,N&&(Te=N.x,N=N.y,w.__MouseX=Te,w.__MouseY=N),o.D.isFunction(w.__OnMouseClick)&&w.__OnMouseClick(K))},g.onMouseDoubleClick=function(N){w._isNoViewer()||(N=N.index,o.D.isFunction(w.__OnMouseDoubleClick)&&w.__OnMouseDoubleClick(N))},g.onMouseRightClick=function(N){var K,Te;if(!w._isNoViewer())return K=N.index,N&&(Te=N.x,N=N.y,w.__MouseX=Te,w.__MouseY=N),!o.D.isFunction(w.__OnMouseRightClick)||w.__OnMouseRightClick(K)},g.onImageAreaSelected=function(N){w._isNoViewer()||o.D.isFunction(w.__OnImageAreaSelected)&&w.__OnImageAreaSelected(N.index,N.left,N.top,N.right,N.bottom,N.areaIndex)},g.onImageAreaDeSelected=function(N){w._isNoViewer()||o.D.isFunction(w.__OnImageAreaDeSelected)&&w.__OnImageAreaDeSelected(N)},g.onBufferChanged=function(N){o.D.isFunction(w.__OnBufferChanged)&&w.__OnBufferChanged(N)}},__innerRefreshFromUIView:function(Le,g){o.D.isFunction(Le.__OnRefreshUI)&&Le.__OnRefreshUI(g)}}),o.D.html5.ui={init:function(Le,g){var w,N,K,Te,Fe,Ke,Je;Le._isBindViewer()?(g.container?Le._containerElement=g.container:g.containerID&&(Le._containerElement=o.D.get(g.containerID)),Le._width=g.width,Le._height=g.height,In(Le),N=o.D.one(Le._containerElement)):Le._containerElement=null,Le._ifBindViewer=g.ifBindViewer,Fe=!(Te={Stwain:w=Le}),w._isBindViewer()&&(Je=w._width,K=w._height,Ke=o.D.one(w._containerElement),o.D.isString(Je)&&0<=r()(Je).call(Je,"%")?(Je=o.D.css(Ke,"width")*a()(Je)/100,Fe=!0):Je=a()(Je),o.D.isString(K)&&0<=r()(K).call(K,"%")?(K=o.D.css(Ke,"height")*a()(K)/100,Fe=!0):K=a()(K),Te={Stwain:w,Container:N,Width:Je,Height:K}),Cn.bindUIViewEvents(w,Te),w._ImgManager?(w._ImgManager&&w._ImgManager._UIView&&w._ImgManager._UIView.BackgroundColor&&(Te.BackgroundColor=w._ImgManager._UIView.BackgroundColor),w._ImgManager._Init(w,Te)):w._ImgManager=new Ln(w,Te),Fe&&Cn.changeImageUISize(w,w._width,w._height),Le._ifBindViewer||(Je=(Je=(Ke=Le).config)||{},Ke.__OnImageAreaDeSelected=Je.onImageAreaDeSelected||"",Ke.__OnImageAreaSelected=Je.onImageAreaSelected||"",Ke.__OnMouseClick=Je.onMouseClick||"",Ke.__OnMouseDoubleClick=Je.onMouseDoubleClick||"",Ke.__OnMouseMove=Je.onMouseMove||"",Ke.__OnMouseRightClick=Je.onMouseRightClick||"",Ke.__OnTopImageInTheViewChanged=Je.onTopImageInTheViewChanged||"",Ke.__OnBufferChanged=Je.onBufferChanged||"",Le.__OnMouseClick=g.onMouseClick||"",Le.__OnThumbnailMouseClick="",Le.__OnKeyDown=g.onKeyDown||"",Le.__OnMouseWheel=g.onMouseWheel||"",Le.__OnMouseDoubleClick=g.onMouseDoubleClick||"",Le.__OnMouseRightClick=g.onMouseRightClick||"",Le.__OnMouseMove=g.onMouseMove||"",Le.__OnImageAreaSelected=g.onImageAreaSelected||"",Le.__OnImageAreaDeSelected=g.onImageAreaDeSelected||"",Le.__OnRefreshUI=g.onRefreshUI||"",Le.__OnBufferChanged=g.onBufferChanged||"",Le.__MouseX=0,Le.__MouseY=0,Le.__style=new o.D.html5.STwainStyle(Le),Le.__fSelectionRectAspectRatio=0)},unLoad:function(Le){(Le=Le._containerElement)&&(Le.innerHTML="")},initProgress:function(Le){In(Le)},addMethods:function(Le){o.D.mix(Le,{OverlayRectangle:function(g,w,N,K,Te,Fe,Ke){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("OverlayRectangle"):K<w||Te<N||w==K&&N==Te?(o.D.Errors.Overlay_InvalidLeftOrTopOrRightOrBottom(this),!1):(Fe=o.D.isNumber(Fe)?o.D.getColor(Fe):Fe,this._ImgManager.OverlayRectangle(g,w,N,K,Te,Fe,Ke)))},SetViewMode:function(g,w){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("SetViewMode"):o.D.isString(g)||o.D.isString(w)||g<-1&&w<-1?(o.D.Errors.InvalidValue(this),!1):(g=Math.floor(g),w=Math.floor(w),this._ImgManager.SetViewMode(g,w),!0))},Print:function(g){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("Print"):!this._isMobileMode()&&g?this._innerSend("PrintEx",(0,u.dv)(!0),!0,function(){},function(){}):(this._ImgManager.Print(),!0))},PrintEx:function(g){return this._resetErr(),!!this._isValid()&&(o.D.isArray(g)?this._isNoViewer()?this._nouiNotSupport("Print"):!!this._checkIndices(g)&&(this._ImgManager.PrintEx(g),!0):(o.D.Errors.IndicesNotArray(this),!1))},ShowImageEditor:function(g,w,N,K){var Te=this;return Te._resetErr(),!!Te._isValid()&&(Te._isNoViewer()?Te._nouiNotSupport("ShowImageEditor"):!(!Te._isMobileMode()&&Cn.isServerInvalid(Te))&&(Te._ImgManager.getWebViewer().bShowImageEdit?Te.ShowImageEditorEx(-1,-1,-1,-1,3):g&&w&&N?Te.ShowImageEditorEx(-1,-1,w,N,0,!0,g,K):Te.ShowImageEditorEx(-1,-1,-1,-1,0,!1)))},ShowImageEditorEx:function(g,w,N,K,Te,Fe,Ke,Je){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("ShowImageEditorEx"):this._ImgManager.ShowImageEditorEx(g,w,N,K,Te,Fe,Ke,Je))},SetSelectedImageArea:function(g,w,N,K,Te){return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("SetSelectedImageArea"):(g=a()(g),isNaN(g)||g<0||g>=this._ImgManager.count()?(o.D.Errors.IndexOutOfRange(this),!1):!(!this._isMobileMode()&&Cn.isServerInvalid(this))&&this._ImgManager.SetSelectedImageArea(g,w,N,K,Te)))},first:function(){var g=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("first"):(0<g&&(this._ImgManager.Go(0),Cn.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))},previous:function(){var g=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("previous"):(0<g&&(this._ImgManager.__Previous(),Cn.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))},next:function(){var g=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("next"):(0<g&&(this._ImgManager.__Next(),Cn.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))},last:function(){var g=this._ImgManager.count();return this._resetErr(),!!this._isValid()&&(this._isNoViewer()?this._nouiNotSupport("last"):(0<g&&(this._ImgManager.Go(g-1),Cn.__innerRefreshFromUIView(this,this._ImgManager.getCurrentImageIndex())),!0))}})}}},2766:function(e,f,t){t.r(f),f=t(7711);var r=t.n(f),a=(f=t(5238),t.n(f)),o=(f=t(5005),t.n(f)),u=t(1695),s=t(1188),v=(f=u.D.html5.Funs).DEF;u.D.attachPropertyUI=function(l){v(l,"Width",{get:function(){return l._resetErr(),l._isValid()?l._isNoViewer()?(l._nouiNotSupport("Width"),""):l._ImgManager.GetWidth():""},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("Width"):l._ImgManager.SetWidth(I))}}),v(l,"Height",{get:function(){return l._resetErr(),l._isValid()?l._isNoViewer()?(l._nouiNotSupport("Height"),""):l._ImgManager.GetHeight():""},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("Height"):l._ImgManager.SetHeight(I))}}),v(l,"AllowMultiSelect",{get:function(){return l._resetErr(),l._isValid()?l._isNoViewer()?l._nouiNotSupport("AllowMultiSelect"):l._ImgManager.GetAllowMultiSelect():""},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("AllowMultiSelect"):void l._ImgManager.SetAllowMultiSelect(I))}}),v(l,"BackgroundColor",{get:function(){return l._resetErr(),l._isValid()?l._isNoViewer()?(l._nouiNotSupport("BackgroundColor"),""):l._ImgManager.GetBackgroundColor():""},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("BackgroundColor"):l._ImgManager.SetBackgroundColor(I))}}),v(l,"BackgroundFillColor",{get:function(){if(l._resetErr(),!l._isValid())return"";if(l._isNoViewer())return l._nouiNotSupport("BackgroundFillColor"),"";if(l._isMobileMode())return u.D.isUndefined(I=l.__BackgroundFillColor)&&(I=l._ImgManager._UIView.BackgroundFillColor),u.D.isNumber(I)?u.D.getColor(I):r()(a()(I).call(I,1),16);var I=l._innerFun("BackgroundFillColor");return u.D.BGR2RGB(I)},set:function(c){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("BackgroundFillColor"):!u.D.isNumber(c=+c)||isNaN(c)?(u.D.Errors.InvalidValue(l),!1):l._isMobileMode()?(l._ImgManager._UIView.SetBackgroundFillColor(u.D.getColor(c)),l.__BackgroundFillColor=u.D.getColor(c),!0):(c=u.D.RGB2BGR(c),l._innerFun("BackgroundFillColor",(0,s.dv)(c))))}}),v(l,"FitWindowType",{get:function(){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?(l._nouiNotSupport("FitWindowType"),0):l._ImgManager.GetFitWindowType())},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("FitWindowType"):l._ImgManager.SetFitWindowType(+I))}}),v(l,"IfFitWindow",{get:function(){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("IfFitWindow"):l._ImgManager.GetIfFitWindow())},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("IfFitWindow"):l._ImgManager.SetIfFitWindow(!!I))}}),v(l,"ImageMargin",{get:function(){return l._resetErr(),l._isValid()?l._isNoViewer()?(l._nouiNotSupport("ImageMargin"),0):l._ImgManager.GetImageMargin():0},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("ImageMargin"):(I=r()(I),!isNaN(I)&&l._ImgManager.SetImageMargin(I)))}}),v(l,"MouseX",{get:function(){return l._resetErr(),l._isValid()?l._isNoViewer()?(l._nouiNotSupport("MouseX"),0):l.__MouseX:0}}),v(l,"MouseY",{get:function(){return l._resetErr(),l._isValid()?l._isNoViewer()?(l._nouiNotSupport("MouseY"),0):l.__MouseY:0}}),v(l,"SelectionImageBorderColor",{get:function(){return l._resetErr(),l._isValid()?l._isNoViewer()?(l._nouiNotSupport("SelectionImageBorderColor"),""):l._ImgManager.GetSelectionImageBorderColor():""},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("SelectionImageBorderColor"):l._ImgManager.SetSelectionImageBorderColor(I))}}),v(l,"Zoom",{get:function(){return l._resetErr(),l._isValid()?l._isNoViewer()?(l._nouiNotSupport("Zoom"),0):l._ImgManager.GetZoom():0},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("Zoom"):l._ImgManager.SetZoom(I))}}),v(l,"MouseShape",{get:function(){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("MouseShape"):l._ImgManager.GetMouseShape()==u.I.DWT.EnumDWT_MouseShape.Hand)},set:function(I){if(l._resetErr(),!l._isValid())return!1;if(l._isNoViewer())return l._nouiNotSupport("MouseShape");var c=u.I.DWT.EnumDWT_MouseShape.Crosshair;return I&&(c=u.I.DWT.EnumDWT_MouseShape.Hand),l._ImgManager.SetMouseShape(c)}}),v(l,"SelectionRectAspectRatio",{get:function(){return l._resetErr(),l._isValid()?l._isNoViewer()?(l._nouiNotSupport("SelectionRectAspectRatio"),0):l._ImgManager.GetSelectionRectAspectRatio():0},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("SelectionRectAspectRatio"):0<=(I=o()(I))&&(l._ImgManager.SetSelectionRectAspectRatio(I),!0))}}),v(l,"ShowPageNumber",{get:function(){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("ShowPageNumber"):l._ImgManager.GetShowPageNumber())},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("ShowPageNumber"):l._ImgManager.SetShowPageNumber(I))}}),v(l,"IfAutoScroll",{get:function(){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("IfAutoScroll"):l._ImgManager.GetIfAutoScroll())},set:function(I){return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("IfAutoScroll"):l._ImgManager.SetIfAutoScroll(I))}})},u.D.detect.viewerScriptLoaded=!0},7821:function(e,c,_){_.r(c),c=_(1006);var r,a=_.n(c),o=(c=_(4579),_.n(c)),u=(c=_(5005),_.n(c)),s=(c=_(5683),_.n(c)),f=(c=_(7711),_.n(c)),v=(c=_(5238),_.n(c)),l=_(1695),I=_(1188),h=l.D.html5.Funs,y=function(W,F){return 0!=W._ImgManager.count()||(l.D.Errors.NoImage(W),l.D.isFunction(F)&&F(W.ErrorCode,W.ErrorString),!1)},p=function(W,F,U){return!(!y(W,U)||(isNaN(F)||!l.D.isNumber(F)||F<0||F>=W._ImgManager.count())&&(l.D.Errors.IndexOutOfRange(W),l.D.isFunction(U)&&U(W.ErrorCode,W.ErrorString),1))},m=function(W,F,U,H){if(0==W._ImgManager.count())return l.D.Errors.NoImage(W),l.D.isFunction(H)&&H(F),!1;if(l.D.isNumber(F)){if(isNaN(F)||F<-2||F>=W._ImgManager.count())return l.D.Errors.IndexOutOfRange(W),l.D.isFunction(H)&&H(F),!1}else{if(!l.D.isArray(F))return l.D.Errors.IndexOutOfRange(W),l.D.isFunction(H)&&H(F),!1;for(var Z=0;Z<F.length;Z++){var X=F[Z];if(isNaN(X)||!l.D.isNumber(X)||X<0||X>=W._ImgManager.count())return l.D.Errors.IndicesOutOfRange(W),l.D.isFunction(H)&&H(F),!1}}if(U==l.I.DWT.EnumDWT_ImageType.IT_BMP||U==l.I.DWT.EnumDWT_ImageType.IT_JPG||U==l.I.DWT.EnumDWT_ImageType.IT_PNG||U==l.I.DWT.EnumDWT_ImageType.IT_J2K)(-1==F&&1<W._ImgManager.count()||l.D.isArray(F)&&1<F.length)&&(l.D.Errors.UploadIndexMoreThanOne(W),l.D.isFunction(H)&&H(F));else if(U!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&U!=l.I.DWT.EnumDWT_ImageType.IT_PDF)return l.D.Errors.InvalidImageType(W),l.D.isFunction(H)&&H(F),!1;return!0},T=function(W){var F,U,H=[];return W._ImgManager.count()<=0||(0<=(U=W._ImgManager.getCurrentImageIndex())&&(F=W._ImgManager.convertClientIndexToServerId(U)),U=W._ImgManager.getSelectedClientIndexArray(),l.D.isArray(U)&&l.D.each(U,function(Z){-1!=(Z=W._ImgManager.convertClientIndexToServerId(Z))&&H.push(Z)}),-1!=F&&0==H.length&&H.push(F)),H},C=function(W){if(W._ImgManager.count()<=0)return[];var F=W._ImgManager.getSelectedClientIndexArray();return l.D.isArray(F)?(0==F.length&&0<=(W=W._ImgManager.getCurrentImageIndex())&&F.push(W),F):[]},D=function(W,F){for(var U=W._ImgManager.GetAllServerIdList(),H=0;H<U.length;H++)F.push(U[H])},S=function(W,F,U,H,Z){try{W(F,U,H,Z)}catch{}},M=function(W,F,U){try{W(F.ErrorCode,F.ErrorString,U)}catch{}},G=function(W,F,U,H,Z,X){try{W(F.ErrorCode,F.ErrorString,U,H,Z,X)}catch{}};(_=(c=l.D.html5.STwain).prototype)._asyncSaveImage=function(L,W,rt,U,H){var Z,X,$=this,V=!0,De=l.D.isString(rt)?rt.toLowerCase():"",fe=function(de,_t,be){var it=l.D.isString(it=L)&&""!=it?(it=a()(l.D).call(l.D,it,"\\\\","_"),a()(l.D).call(l.D,it,":","_")):"img"+l.D.getRandom()+"."+De;!V&&l.D.isString(de)?(_t=["png"==_t?"data:image/png;base64,":"jpg"==_t?"data:image/jpeg;base64,":"tiff"==_t||"tif"==_t?"data:image/tif;base64,":"pdf"==_t?"data:application/pdf;base64,":"bmp"==_t?"data:image/bmp;base64,":"jp2"==_t?"data:image/jp2;base64,":"data:application/octet-stream;base64,",de].join(""),l.D.MobileFuns.saveLocal(_t,it,De)):l.D.MobileFuns.saveLocal(de,it,De),h.refreshImageAfterInvokeFun($,W),l.D.isFunction(U)&&o()(U,30)},je=function(){l.D.isFunction(H)&&H($.ErrorCode,$.ErrorString)},Se=(rt=window,l.I.navInfo);return rt=rt.requestFileSystem||rt.webkitRequestFileSystem||rt.mozRequestFileSystem,!Se.biPad&&!Se.biPhone||rt||!(Se.bSafari&&u()(Se.strBrowserVersion)<13)&&Se.bSafari?$._innerSendToMobile("SaveImage",(0,I.An)(L,W,De,1,V),0,fe,je):(V=!1,rt=-1,rt="png"==De?l.I.DWT.EnumDWT_ImageType.IT_PNG:"jpg"==De?l.I.DWT.EnumDWT_ImageType.IT_JPG:"tiff"==De||"tif"==De?l.I.DWT.EnumDWT_ImageType.IT_TIF:"pdf"==De?l.I.DWT.EnumDWT_ImageType.IT_PDF:"bmp"==De?l.I.DWT.EnumDWT_ImageType.IT_BMP:"jp2"==De?l.I.DWT.EnumDWT_ImageType.IT_J2K:l.I.DWT.EnumDWT_ImageType.IT_PNG,Z=[],X=function(de){if(l.D.isArray(de=de&&de.result)&&3==de.length)return fe(de[0],de[1])},l.D.isArray(W)&&l.D.each(W,function(tt){-1!=(tt=$._ImgManager.convertClientIndexToServerId(tt))&&Z.push(tt)}),$.__innerConvertToBase64ByMobile(L,Z,rt,1,X,je))},_.SaveAllAsMultiPageTIFF=function(L,W,F){var U=this;if(U._resetErr(),!U._isValid())return!1;if(!l.D.License.checkProductKey(U,{Core:!0})&&!l.D.License.checkProductKey(U,{Webcam:!0},!0))return l.D.isFunction(F)&&F(U.ErrorCode,U.ErrorString),!1;if(!y(U,F))return!1;var H=[],Z=h.replaceLocalFilename(L);if(U._isMobileMode()){if(!Z||""==Z)return l.D.Errors.InvalidFile(U),l.D.isFunction(F)&&M(F,U),!1;for(var X=[],$=0;$<U.HowManyImagesInBuffer;$++)X.push($);return U._asyncSaveImage(L,X,"tiff",W,F)}return D(U,H),U.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",(0,I.dv)(Z,H.join(",")),W,F)},_.SaveAllAsPDF=function(L,W,F){var U=this;if(U._resetErr(),!U._isValid())return!1;if(!l.D.License.checkProductKey(U,{Core:!0})&&!l.D.License.checkProductKey(U,{Webcam:!0},!0))return l.D.isFunction(F)&&F(U.ErrorCode,U.ErrorString),!1;if(!y(U,F))return!1;var H=[],Z=h.replaceLocalFilename(L);if(U._isMobileMode()){if(!Z||""==Z)return l.D.Errors.InvalidFile(U),l.D.isFunction(F)&&M(F,U),!1;for(var X=[],$=0;$<U.HowManyImagesInBuffer;$++)X.push($);return U._asyncSaveImage(L,X,"pdf",W,F)}return D(U,H),U.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",(0,I.dv)(Z,H.join(",")),W,F)},_.SaveAsBMP=function(L,W,F,U){var H=this;return H._resetErr(),!!H._isValid()&&(H._isMobileMode()?H._mobileNotSupport("SaveAsBMP",U):l.D.License.checkProductKey(H,{Core:!0})||l.D.License.checkProductKey(H,{Webcam:!0},!0)?(L=h.replaceLocalFilename(L),!!p(H,W,U)&&(-1==(W=H._ImgManager.convertClientIndexToServerId(W))?(l.D.Errors.IndexOutOfRange(H),l.D.isFunction(U)&&M(U,H),!1):H.__innerSaveImage("SaveAsBMP",(0,I.dv)(L,W),F,U))):(l.D.isFunction(U)&&U(H.ErrorCode,H.ErrorString),!1))},_.SaveAsJPEG=function(L,W,F,U){var H=this;if(H._resetErr(),!H._isValid())return!1;if(!l.D.License.checkProductKey(H,{Core:!0})&&!l.D.License.checkProductKey(H,{Webcam:!0},!0))return l.D.isFunction(U)&&U(H.ErrorCode,H.ErrorString),!1;if(!p(H,W,U))return!1;var Z=h.replaceLocalFilename(L);return H._isMobileMode()?Z&&""!=Z?H._asyncSaveImage(L,[W],"jpg",F,U):(l.D.Errors.InvalidFile(H),l.D.isFunction(U)&&M(U,H),!1):-1==(L=H._ImgManager.convertClientIndexToServerId(W))?(l.D.Errors.IndexOutOfRange(H),l.D.isFunction(U)&&M(U,H),!1):H.__innerSaveImage("SaveAsJPEG",(0,I.dv)(Z,L),F,U)},_.SaveAsPDF=function(L,W,F,U){var H=this;if(H._resetErr(),!H._isValid())return!1;if(!l.D.License.checkProductKey(H,{Core:!0})&&!l.D.License.checkProductKey(H,{Webcam:!0},!0))return l.D.isFunction(U)&&U(H.ErrorCode,H.ErrorString),!1;if(!p(H,W,U))return!1;var Z=h.replaceLocalFilename(L);return H._isMobileMode()?Z&&""!=Z?H._asyncSaveImage(L,[W],"pdf",F,U):(l.D.Errors.InvalidFile(H),l.D.isFunction(U)&&M(U,H),!1):-1==(L=H._ImgManager.convertClientIndexToServerId(W))?(l.D.Errors.IndexOutOfRange(H),l.D.isFunction(U)&&M(U,H),!1):H.__innerSaveImage("SaveAsPDF",(0,I.dv)(Z,L),F,U)},_.SaveAsPNG=function(L,W,F,U){var H=this;if(H._resetErr(),!H._isValid())return!1;if(!l.D.License.checkProductKey(H,{Core:!0})&&!l.D.License.checkProductKey(H,{Webcam:!0},!0))return l.D.isFunction(U)&&U(H.ErrorCode,H.ErrorString),!1;if(!p(H,W,U))return!1;var Z=h.replaceLocalFilename(L);return H._isMobileMode()?Z&&""!=Z?H._asyncSaveImage(L,[W],"png",F,U):(l.D.Errors.InvalidFile(H),l.D.isFunction(U)&&M(U,H),!1):-1==(L=H._ImgManager.convertClientIndexToServerId(W))?(l.D.Errors.IndexOutOfRange(H),l.D.isFunction(U)&&M(U,H),!1):H.__innerSaveImage("SaveAsPNG",(0,I.dv)(Z,L),F,U)},_.SaveAsTIFF=function(L,W,F,U){var H=this;if(H._resetErr(),!H._isValid())return!1;if(!l.D.License.checkProductKey(H,{Core:!0})&&!l.D.License.checkProductKey(H,{Webcam:!0},!0))return l.D.isFunction(U)&&U(H.ErrorCode,H.ErrorString),!1;if(!p(H,W,U))return!1;var Z=h.replaceLocalFilename(L);return H._isMobileMode()?Z&&""!=Z?H._asyncSaveImage(L,[W],"tiff",F,U):(l.D.Errors.InvalidFile(H),l.D.isFunction(U)&&M(U,H),!1):-1==(L=H._ImgManager.convertClientIndexToServerId(W))?(l.D.Errors.IndexOutOfRange(H),l.D.isFunction(U)&&M(U,H),!1):H.__innerSaveImage("SaveAsTIFF",(0,I.dv)(Z,L),F,U)},_.SaveAsGIF=function(L,W,F,U){var H=this;return H._resetErr(),!!H._isValid()&&(H._isMobileMode()?(l.D.Errors.HTML5NotSupport(H),l.D.isFunction(U)&&M(U,H),!1):l.D.License.checkProductKey(H,{Core:!0})||l.D.License.checkProductKey(H,{Webcam:!0},!0)?(L=h.replaceLocalFilename(L),!!p(H,W,U)&&(-1==(W=H._ImgManager.convertClientIndexToServerId(W))?(l.D.Errors.IndexOutOfRange(H),l.D.isFunction(U)&&M(U,H),!1):H.__innerSaveImage("SaveAsGIF",(0,I.dv)(L,W),F,U))):(l.D.isFunction(U)&&U(H.ErrorCode,H.ErrorString),!1))},_.SaveSelectedImagesAsMultiPagePDF=function(L,W,F){var U=this;if(U._resetErr(),!U._isValid())return!1;if(!l.D.License.checkProductKey(U,{Core:!0})&&!l.D.License.checkProductKey(U,{Webcam:!0},!0))return l.D.isFunction(F)&&F(U.ErrorCode,U.ErrorString),!1;var H=h.replaceLocalFilename(L);if(U._isMobileMode()){if(!H||""==H)return l.D.Errors.InvalidFile(U),l.D.isFunction(F)&&M(F,U),!1;var Z=C(U);return U._asyncSaveImage(L,Z,"pdf",W,F)}return L=T(U),U.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",(0,I.dv)(H,L.join(",")),W,F)},_.SaveSelectedImagesAsMultiPageTIFF=function(L,W,F){var U=this;if(U._resetErr(),!U._isValid())return!1;if(!l.D.License.checkProductKey(U,{Core:!0})&&!l.D.License.checkProductKey(U,{Webcam:!0},!0))return l.D.isFunction(F)&&F(U.ErrorCode,U.ErrorString),!1;var H=h.replaceLocalFilename(L);if(U._isMobileMode()){if(!H||""==H)return l.D.Errors.InvalidFile(U),l.D.isFunction(F)&&M(F,U),!1;var Z=C(U);return U._asyncSaveImage(L,Z,"tiff",W,F)}return L=T(U),U.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",(0,I.dv)(H,L.join(",")),W,F)},_.SaveSelectedImagesToBase64Binary=function(L,W){var F=this;if(F._resetErr(),!F._isValid())return!1;if(!l.D.License.checkProductKey(F,{Core:!0})&&!l.D.License.checkProductKey(F,{Webcam:!0},!0))return l.D.isFunction(W)&&W(F.ErrorCode,F.ErrorString),!1;if(F._isMobileMode())return F._mobileNotSupport("SaveSelectedImagesToBase64Binary",W);var U=T(F);return l.D.isFunction(L)?F._innerSend("SaveSelectedImagesToBase64Binary",(0,I.dv)(U.join(",")),!0,L,W):F._innerFun("SaveSelectedImagesToBase64Binary",(0,I.dv)(U.join(",")))},_.ShowFileDialog=function(L,W,F,U,V,Z,X,$){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("ShowFileDialog");V=h.replaceLocalFilename(V);var De=this.__GetLoadEventsNum();return this._innerSend("ShowFileDialog",(0,I.dv)(L,W,F,U,V,Z,X,$,De),!0)},_.FTPDownload=function(L,W,F,U){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPDownload",U);if(!L)return l.D.Errors.InvalidParameter(this),l.D.isFunction(U)&&U(this.ErrorCode,this.ErrorString),!1;var H=l.D.html5.Funs.getImageType(W);return this.__innerFTPDownload("FTPDownload",(0,I.dv)(L,W),H,F,U)},_.FTPDownloadEx=function(L,W,F,U,H){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("FTPDownloadEx",H):L?this.__innerFTPDownload("FTPDownloadEx",(0,I.dv)(L,W,F),F,U,H):(l.D.Errors.InvalidParameter(this),l.D.isFunction(H)&&H(this.ErrorCode,this.ErrorString),!1))},_.FTPUpload=function(L,W,F,U,H){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUpload",H);var Z=this._ImgManager.convertClientIndexToServerId(W);return!!p(this,W,H)&&(-1==Z?(l.D.Errors.IndexOutOfRange(this),l.D.isFunction(H)&&M(H,this),!1):this.__innerFTPUpload("FTPUpload",(0,I.dv)(L,Z,F),U,H))},_.FTPUploadEx=function(L,W,F,U,H,Z){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("FTPUploadEx",Z):!!p(this,W,Z)&&(-1==(W=this._ImgManager.convertClientIndexToServerId(W))?(l.D.Errors.IndexOutOfRange(this),l.D.isFunction(Z)&&M(Z,this),!1):this.__innerFTPUpload("FTPUploadEx",(0,I.dv)(L,W,F,U),H,Z)))},_.FTPUploadAllAsMultiPageTIFF=function(L,W,F,U){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAllAsMultiPageTIFF",U);var H=[];return D(this,H),this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",(0,I.dv)(L,W,H.join(",")),F,U)},_.FTPUploadAllAsPDF=function(L,W,F,U){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAllAsPDF",U);var H=[];return D(this,H),this.__innerFTPUpload("FTPUploadAsMultiPagePDF",(0,I.dv)(L,W,H.join(",")),F,U)},_.FTPUploadAsMultiPagePDF=function(L,W,F,U){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAsMultiPagePDF",U);var H=T(this);return this.__innerFTPUpload("FTPUploadAsMultiPagePDF",(0,I.dv)(L,W,H.join(",")),F,U)},_.FTPUploadAsMultiPageTIFF=function(L,W,F,U){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("FTPUploadAsMultiPageTIFF",U);var H=T(this);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",(0,I.dv)(L,W,H.join(",")),F,U)},_.HTTPDownload=function(L,W,F,U){if(this._resetErr(),!this._isValid())return l.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString});var H=h.getImageType(W);return this.HTTPDownloadThroughGet(L,W,H,F,U)},c.prototype.HTTPDownloadEx=function(L,W,F,U,H){return this._resetErr(),this._isValid()?this._isMobileMode()?this._mobileNotSupport("HTTPDownloadEx",H):this.HTTPDownloadThroughGet(L,W,F,U,H):l.D.Promise.reject({code:this.ErrorCode,message:this.ErrorString})},_.HTTPDownloadDirectly=function(V,W,F,U,H){var Z=this;if(Z._resetErr(),!Z._isValid())return!1;if(!l.D.License.checkProductKey(Z,{Core:!0}))return l.D.isFunction(H)&&H(Z.ErrorCode,Z.ErrorString),!1;if(Z._isMobileMode())return Z._mobileNotSupport("HTTPDownloadDirectly",H);var X,$=r.GetHttpHeadersAndClear(Z);if(!1===(V=h.combineUrl(Z,V,W)))return l.D.Errors.ParameterCannotEmpty(Z),!1;if(!F||""==F)return l.D.Errors.InvalidLocalFilename(Z,"HTTPDownloadDirectly"),l.D.isFunction(H)&&M(H,Z),!1;if(W=l.D.html5.Funs.getImageType(F),h.isServerInvalid(Z))return l.D.isFunction(H)&&M(H,Z),!1;if(!l.D.License.checkPDFProductKeyWhenNeeds(Z,W))return l.D.isFunction(H)&&H(Z._errorCode,Z._errorString),!1;l.D.cancelFrome=2,X=h.replaceLocalFilename(F),l.D.showProgress(Z,"HTTPDownloadDirectly",!0);var fe=!0;return Z._OnPercentDone([0,-1,l.I.MSG.Downloading,"http"]),l.D.isFunction(U)||(fe=!1),h.loadHttpBlob(Z,"get",V,fe,function(je){return Z._OnPercentDone([0,-1,l.I.MSG.Loading]),Z.__LoadImageFromBytes(je,3,X,fe,U,H)},function(){return l.D.closeProgress(Z,"HTTPDownloadDirectly"),l.D.isFunction(H)&&M(H,Z),!1},function(Se){var rt=0===Se.total?100:Math.round(100*Se.loaded/Se.total);[Se.loaded," / ",Se.total].join(""),Z._OnPercentDone([0,rt,"","http"])},$)},_.HTTPUploadThroughPostDirectly=function(L,W,$,U,H,Z){var X=this;if(X._resetErr(),!X._isValid())return!1;if(X._isMobileMode())return X._mobileNotSupport("HTTPUploadThroughPostDirectly",Z);$=h.combineUrl(X,L,$);var V=function(){l.D.isFunction(Z)&&M(Z,X,X.__HTTPPostResponseString)};return(X.__HTTPPostResponseString="")===L?(l.D.Errors.HttpServerCannotEmpty(X),V(),!1):X._innerUploadDirectly($,W,U,!0,!1,0,!0,!1,H,V)},_._innerUploadDirectly=function(L,W,F,U,H,Z,X,$,V,De){var fe=this,je=r.GetHttpHeadersAndClear(fe),Se="HTTPUploadThroughPostDirectly",rt=!0;if(!1===L||""===L)return l.D.Errors.ParameterCannotEmpty(fe),l.D.isFunction(De)&&De(fe.ErrorCode,fe.ErrorString),!1;if(l.D.isFunction(V)||(rt=!1),!l.D.License.checkProductKey(fe,{Core:!0}))return l.D.isFunction(De)&&De(fe.ErrorCode,fe.ErrorString),!1;l.D.cancelFrome=1;var tt=function(){return l.D.needShowTwiceShowDialog=!1,U&&l.D.closeProgress(fe,Se),l.D.isFunction(De)&&De(fe.ErrorCode,fe.ErrorString),!1};return l.D.needShowTwiceShowDialog=!0,U&&l.D.showProgress(fe,Se,!1),(W=h.replaceLocalFilename(W))&&""!=W?$&&$.bCancel?($.st=2,tt()):fe.__SaveLocalFileToBytes(W,rt,H,function(de){return l.D.needShowTwiceShowDialog=!1,$&&$.bCancel?($.st=2,tt()):de&&(0<l.D.dlgRef||0==fe.__IfShowCancelDialogWhenImageTransfer||0==rt||!1===U)?(de instanceof File?de.fileName=F:de.name=F,h.setBtnCancelVisibleForProgress(fe,!0),h.httpPostUpload(fe,L,de,rt,0,je,!0,Z,X,$,function(_t){U&&l.D.closeProgress(fe,Se),l.D.isFunction(V)&&S(V,_t)},tt)):(tt(),!1)},tt):(l.D.Errors.InvalidFile(fe),tt(),!1)},_._innerUploadFilesDirectly=function(L,W,F,U,H,Z,X,$,V){var De,fe=this,je=r.GetHttpHeadersAndClear(fe),Se="HTTPUploadThroughPostDirectly",rt=!0,tt=[];if(!1===L||""===L)return l.D.Errors.ParameterCannotEmpty(fe),l.D.isFunction(V)&&V(fe.ErrorCode,fe.ErrorString,W),!1;if(l.D.isFunction($)||(rt=!1),!l.D.License.checkProductKey(fe,{Core:!0}))return l.D.isFunction(V)&&V(fe.ErrorCode,fe.ErrorString,W),!1;l.D.cancelFrome=1;var de=function(){return l.D.needShowTwiceShowDialog=!1,U&&l.D.closeProgress(fe,Se),l.D.isFunction(V)&&V(W),!1},_t=(l.D.needShowTwiceShowDialog=!0,U&&l.D.showProgress(fe,Se,!1),l.D.each(W,function(mt){if(!(mt=h.replaceLocalFilename(mt))||""==mt)return l.D.Errors.InvalidFile(fe),de(),!1;tt.push(mt)}),[]),be=tt.length,it=0;return l.D.each(tt,function(mt,Ce){De=fe.__SaveLocalFileToBytes(mt,rt,H,function(we){if(l.D.needShowTwiceShowDialog=!1,!we||!(0<l.D.dlgRef||0==fe.__IfShowCancelDialogWhenImageTransfer||0==rt||!1===U))return U&&l.D.closeProgress(fe,Se),l.D.isFunction(de)&&de(),!1;var Ve=h.cformat(F,Ce+1);return we instanceof File?we.fileName=Ve:we.name=Ve,_t[Ce]=we,++it==be?(h.setBtnCancelVisibleForProgress(fe,!0),h.httpPostUploadFiles(fe,L,_t,rt,0,je,U,Z,X,function(bt){U&&l.D.closeProgress(fe,Se),l.D.isFunction($)&&S($,bt)},function(){U&&l.D.closeProgress(fe,Se),l.D.isFunction(de)&&de()})):void 0},function(){U&&l.D.closeProgress(fe,Se),l.D.isFunction(de)&&de()})}),De},_.HTTPUploadThroughPost=function(L,W,F,U,H,Z,X){var $=this;if($._resetErr(),!$._isValid())return!1;if($._isMobileMode())return $._mobileNotSupport("HTTPUploadThroughPost",Z);var V=h.getImageType(U),De=arguments,fe=!1,je=function(rt){return l.D.isFunction(Z)&&G(Z,$,$.__HTTPPostResponseString,rt,De),!1};return l.D.isString(U)&&""!=U?(H&&l.D.isFunction(H)&&(fe=function(rt,tt){return S(H,$.__HTTPPostResponseString,tt,De),!0}),!!m($,W,V,je)&&$.innerHTTPUploadPost(L,W,F,U,V,fe,je,X)):(l.D.Errors.UploadFileCannotEmpty($),je())},_.HTTPUploadThroughPostEx=function(L,W,F,U,H,Z,X,$){var V=this;if(V._resetErr(),!V._isValid())return!1;if(V._isMobileMode())return V._mobileNotSupport("HTTPUploadThroughPostEx",X);var De=arguments,fe=!1,je=function(rt){return l.D.isFunction(X)&&G(X,V,V.__HTTPPostResponseString,rt,De),!1};return l.D.isString(U)&&""!=U?(Z&&l.D.isFunction(Z)&&(fe=function(rt,tt){return S(Z,V.__HTTPPostResponseString,tt,De),!0}),!!m(V,W,H,je)&&V.innerHTTPUploadPost(L,W,F,U,H,fe,je,$)):(l.D.Errors.UploadFileCannotEmpty(V),je())},_.innerHTTPUploadPost=function(L,W,F,U,H,Z,X,$){var V,De=this,fe="HTTPUploadThroughPostEx",je=h.combineUrl(De,L,F),Se=!0,rt=!1,tt=[],de=function(Ce){return l.D.isFunction(X)&&X(Ce),!1};if(De.__HTTPPostResponseString="",l.D.isNumber(W)){if(W<-2)return l.D.Errors.IndexOutOfRange(De),de(W)}else if(!l.D.isArray(W))return l.D.Errors.IndexOutOfRange(De),de(W);if(!l.D.isString(U)||""==U)return l.D.Errors.UploadFileCannotEmpty(De),de();if(l.D.isUndefined(H))return l.D.Errors.InvalidImageType(De),de(W);if(H==l.I.DWT.EnumDWT_ImageType.IT_BMP||H==l.I.DWT.EnumDWT_ImageType.IT_JPG||H==l.I.DWT.EnumDWT_ImageType.IT_PNG||H==l.I.DWT.EnumDWT_ImageType.IT_J2K){if(-1==W&&1<De._ImgManager.count()||l.D.isArray(W)&&1<W.length)return l.D.Errors.UploadIndexMoreThanOne(De),de(W);l.D.isArray(W)?tt.push(W[0]):tt.push(-1==W?0:W)}else{if(H!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&H!=l.I.DWT.EnumDWT_ImageType.IT_PDF)return l.D.Errors.InvalidImageType(De),de(W);if(-1==W){if(0==De._ImgManager.count())return l.D.Errors.NoImage(De),de();for(V=0;V<De._ImgManager.count();V++)tt.push(V)}else if(-2==W)tt=De._ImgManager.getSelectedClientIndexArray();else if(l.D.isArray(W))for(V=0;V<W.length;V++)tt.push(W[V]);else tt.push(W)}if(De._isMobileMode()?Se=!0:l.D.isFunction(Z)||(Se=!1),""===L)return l.D.Errors.HttpServerCannotEmpty(De),de(tt);if(l.D.isUndefined(je)||""===je)return l.D.Errors.ParameterCannotEmpty(De),de(tt);if(!l.D.isString(je))return l.D.Errors.InvalidUrl(De),de(tt);if(0!=s()(je).call(je,"http://")&&0!=s()(je).call(je,"https://")&&(je=l.D.detect.ssl?"https://"+je:"http://"+je),!De._isMobileMode()&&h.isServerInvalid(De)||!De._checkIndices(tt)&&-1!=tt)return de(tt);var _t,be,it=[];return l.D.isArray(tt)&&l.D.each(tt,function(mt){-1!=(mt=De._ImgManager.convertClientIndexToServerId(mt))&&it.push(mt)}),De._resetErr(),!!De._isValid()&&(Se?(l.D._asyncUploadCmd(F={bOnlyUploadForm:!1,method:"HTTPUploadThroughPostEx",_this:De,url:je,serverIds:it,enumImageType:H,saveSetup:!1,fileName:U,retry:0,bOnlyEmptyIsOK:!0,objUploadFileStatus:!1,dataFormat:l.I.DWT.EnumDWT_UploadDataFormat.Binary,asyncSuccessFunc:Z,asyncFailureFunc:de}),!0):(l.D.cancelFrome=1,_t=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(De,fe),de(tt),!1},l.D.needShowTwiceShowDialog=!0,l.D.showProgress(De,fe,!1),be=r.GetHttpHeadersAndClear(De),De._OnPercentDone([0,-1,l.I.MSG.Encoding,"http"]),De.__innerConvertToBlob(H,it,!1,Se,4,function(mt,Ce,we){if(l.D.needShowTwiceShowDialog=!1,mt&&(0<l.D.dlgRef||0==De.__IfShowCancelDialogWhenImageTransfer||0==Se)){var Ve=De.MaxUploadImageSize;return Ve<mt.size&&-1!=Ve?(l.D.Errors.UploadExceededMaxSize(De),_t()):(l.I.DWT.IfAddMD5InUploadHeader&&Ce&&""!=Ce&&(be["dwt-md5"]=Ce),mt instanceof File?mt.fileName=U:mt.name=U,h.setBtnCancelVisibleForProgress(De,!0),h.httpPostUpload(De,je,mt,Se,0,be,!0,0,!0,!1,function(bt){return l.D.closeProgress(De,fe),rt=!0},_t))}return _t()},_t),rt))},_._checkIndices=function(L){var W,F;if(!l.D.isArray(L))return l.D.Errors.IndicesNotArray(this),!1;if(0==L.length)return l.D.Errors.IndicesCannotEmpty(this),!1;if(l.I.DWT.ConnectWithSocket)return!0;for(W=this._ImgManager.count(),F=0;F<L.length;F++){var U=L[F];if(l.D.isUndefined(U)||null===U)return l.D.Errors.IndexNullOrUndefined(this),!1;if(U=f()(U),isNaN(U))return l.D.Errors.InvalidIndex(this),!1;if(U<0||W<=U)return l.D.Errors.IndicesOutOfRange(this),!1}return!0},_.SetUploadSegment=function(L,W){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("SetUploadSegment"):!l.D.isNumber(L)||L<0?(l.D.Errors.InvalidSegmentUploadThreshold(this),!1):!l.D.isNumber(W)||W<=0?(l.D.Errors.InvalidModuleSize(this),!1):(this._segementUploadThreshold=1024*L*1024,this._moduleSize=1024*W,!0))},_.HTTPUpload=function(L,W,F,U,H,Z,X){var $=this;if($._resetErr(),!$._isValid())return!1;if(l.D.isUndefined(L))return l.D.Errors.InvalidParameter($),l.D.isFunction(X)&&X($.ErrorCode,$.ErrorString),!1;var V,De,fe,je=arguments;if(arguments.length<=3)De=!!l.D.isFunction(W)&&function(){W($.__HTTPPostResponseString,L,je)},V={bOnlyUploadForm:!0,_this:$,url:L,asyncSuccessFunc:De,asyncFailureFunc:fe=function(){l.D.isFunction(F)&&G(F,$,$.__HTTPPostResponseString,L,je)}};else{var Se,rt=[];if(fe=l.D.isFunction(H)?(Se="RemoteFile",De=function(de,_t){H($.__HTTPPostResponseString,_t,je)},function(de){l.D.isFunction(Z)&&G(Z,$,$.__HTTPPostResponseString,de,je)}):(Se=l.D.isString(H)?H:"RemoteFile",De=!!l.D.isFunction(Z)&&function(de,_t){S(Z,$.__HTTPPostResponseString,_t,je)},function(de){l.D.isFunction(X)&&G(X,$,$.__HTTPPostResponseString,de,je)}),!$._checkIndices(W))return fe(W),!1;if(l.D.isArray(W)&&l.D.each(W,function(tt){-1!=(tt=$._ImgManager.convertClientIndexToServerId(tt))&&rt.push(tt)}),0==rt.length)return l.D.Errors.InvalidIndex($),fe(W),!1;if(l.D.isUndefined(F))return l.D.Errors.InvalidImageType($),fe(W),!1;if(F==l.I.DWT.EnumDWT_ImageType.IT_BMP||F==l.I.DWT.EnumDWT_ImageType.IT_JPG||F==l.I.DWT.EnumDWT_ImageType.IT_PNG){if(1<rt.length)return l.D.Errors.UploadIndexMoreThanOne($),fe(W),!1}else if(F!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&F!=l.I.DWT.EnumDWT_ImageType.IT_PDF)return l.D.Errors.InvalidImageType($),fe(W),!1;if(l.D.isUndefined(U)||U!=l.I.DWT.EnumDWT_UploadDataFormat.Binary&&U!=l.I.DWT.EnumDWT_UploadDataFormat.Base64)return l.D.Errors.InvalidDataFormat($),fe(W),!1;V={bOnlyUploadForm:!1,method:"HTTPUpload",_this:$,url:L,serverIds:rt,enumImageType:F,saveSetup:!1,dataFormat:U,fileName:Se,retry:0,bOnlyEmptyIsOK:!0,objUploadFileStatus:!1,asyncSuccessFunc:De,asyncFailureFunc:fe}}return l.D._asyncUploadCmd(V),!0},_._innerHTTPUpload=function(L,W,F,tt,H,Z,X,$,V,De,fe){var je,Se=this,rt=f()(F),de=(tt=f()(tt),H),_t="HTTPUpload",be=L,it=!1,mt=Se._moduleSize,Ce=Se._segementUploadThreshold;if(Se.__HTTPPostResponseString="",l.D.isUndefined(F))return l.D.Errors.InvalidImageType(Se),l.D.isFunction(fe)&&fe(),!1;l.D.cancelFrome=1;var we,Ve,bt=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(Se,_t),l.D.isFunction(fe)&&fe(),!1};if(je=function(St){var Pe=0===St.total?100:Math.round(100*St.loaded/St.total);[St.loaded," / ",St.total].join(""),Se._OnPercentDone([0,Pe,"","http",de])},de=h.addImageFileExt(de,rt),l.D.needShowTwiceShowDialog=!0,l.D.showProgress(Se,_t,!1),!Se._isMobileMode()&&h.isServerInvalid(Se))return bt();if(tt==l.I.DWT.EnumDWT_UploadDataFormat.Binary){if(V&&V.bCancel)return V.st=2,bt();Se._OnPercentDone([0,-1,l.I.MSG.Encoding,"http"]),it=Se.__innerConvertToBlob(rt,W,Z,!0,4,function(At,St,Pe){if(we=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(Se,_t),l.D.isFunction(De)&&S(De,At),!0},V&&V.bCancel)return V.st=2,bt();if(!At||At.size<=0)return l.D.Errors.UploadFileCannotEmpty(Se),bt();var ae=Se.MaxUploadImageSize;return ae<At.size&&-1!=ae?(l.D.Errors.UploadExceededMaxSize(Se),bt()):0!=Se._errorCode?bt():void(it=0<Ce&&At.size>Ce?(ae=r.GetHttpHeadersAndClear(Se),l.I.DWT.IfAddMD5InUploadHeader&&St&&""!=St&&(ae["dwt-md5"]=St),Se._OnPercentDone([0,-1,l.I.MSG.Uploading,"http",de]),r.UploadBinary(Se,be,rt,At,de,ae,0,mt,je,X,$,V,we,bt)):Se.__innnerHTTPUploadBinaryFull(be,St,At,rt,de,X,$,V,we,bt))},bt)}else tt==l.I.DWT.EnumDWT_UploadDataFormat.Base64&&(it=Se._convertToBase64ByServerIds(W,rt,Z,4,function(At){if(!At||At.getLength()<=0)return l.D.Errors.UploadFileCannotEmpty(Se),bt();if(we=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(Se,_t),l.D.isFunction(De)&&S(De,At),!0},0<Ce&&At.getLength()>Ce){var St=r.GetHttpHeadersAndClear(Se);Ve=At.getMD5(),l.I.DWT.IfAddMD5InUploadHeader&&(St["dwt-md5"]=Ve),Se._OnPercentDone([0,-1,l.I.MSG.Uploading,"http"]),r.UploadBase64(Se,be,rt,At,de,St,0,mt,je,we,bt)}else{if(Ve=At.getMD5(),!(St=At.getData(0,At.getLength()))||""==St)return l.D.Errors.UploadFileCannotEmpty(Se),bt();Se.__innnerHTTPUploadBase64Full(be,Ve,St,rt,de,X,$,we,bt)}},bt));return it},_._innerFormFieldHTTPUpload=function(L,W,F){var U,H=this,Z="HTTPUpload";if(H.__HTTPPostResponseString="",U=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(H,Z),l.D.isFunction(F)&&M(F,H,H.__HTTPPostResponseString),!1},l.D.isUndefined(L)||""===L)return l.D.Errors.ParameterCannotEmpty(H),U();if(!l.D.isString(L))return l.D.Errors.InvalidUrl(H),U();0!=s()(L).call(L,"http://")&&0!=s()(L).call(L,"https://")&&(L=l.D.detect.ssl?"https://"+L:"http://"+L),H.__HTTPPostResponseString="",l.D.cancelFrome=1,l.D.showProgress(H,Z,!1),l.D.needShowTwiceShowDialog=!0;var X=r.GetHttpHeadersAndClear(H);return H._OnPercentDone([0,-1,l.I.MSG.Uploading,"http"]),h.httpUploadByBIO(H,L,!1,0,!0,X,!0,0,!0,!1,function($){l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(H,Z),l.D.isFunction(W)&&S(W,$)},U)},r={UploadBinary:function(L,W,F,U,H,Z,X,$,V,De,fe,je,Se,rt){var tt,de,_t=U.size,be=_t-X;return 0<be?($<=be?(be-=$,tt=$):(tt=be,be=0),(de=0==X&&tt==_t?U:v()(U).call(U,X,X+tt))?0<l.D.dlgRef||0==L.__IfShowCancelDialogWhenImageTransfer?(de.name=H,h.setBtnCancelVisibleForProgress(L,!0),Z["Content-Range"]=["bytes ",X,"-",X+de.size-1,"/",_t].join(""),V({total:_t,loaded:X}),h.httpPostUpload(L,W,de,!0,0,Z,!1,De,fe,je,function(it){0==be?(l.D.needShowTwiceShowDialog=!1,V({total:_t,loaded:_t}),l.D.isFunction(Se)&&S(Se,it)):(X+=tt,o()(function(){l.D.cancelFrome=1,r.UploadBinary(L,W,F,U,H,Z,X,$,V,De,fe,je,Se,rt)},100))},rt),!0):(l.D.Errors.UploadError(L,!0),rt()):(l.D.Errors.UploadFileCannotEmpty(L),rt())):(l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(L,"HttpUpload"),l.D.isFunction(Se)&&Se(""),!0)},UploadBase64:function(L,W,F,U,H,Z,X,$,V,De,fe){var je,Se,rt=U.getLength(),tt=rt-X;return 0<tt?($<=tt?(tt-=$,je=$):(je=tt,tt=0),(Se=U.getData(X,$))&&""!=Se?0<l.D.dlgRef||0==L.__IfShowCancelDialogWhenImageTransfer?(h.setBtnCancelVisibleForProgress(L,!0),Z["Content-Range"]=["bytes ",X,"-",X+je-1,"/",rt].join(""),V({total:rt,loaded:X}),h.httpPostUploadString(L,W,Se,H,0,Z,!1,0,!0,function(de){0==tt?(l.D.needShowTwiceShowDialog=!1,V({total:rt,loaded:rt}),l.D.isFunction(De)&&S(De,de)):(X+=je,o()(function(){l.D.cancelFrome=1,r.UploadBase64(L,W,F,U,H,Z,X,$,V,De,fe)},100))},fe),!0):(l.D.Errors.UploadError(L,!0),fe()):(l.D.Errors.UploadFileCannotEmpty(L),fe())):(l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(L,"HttpUpload"),l.D.isFunction(De)&&De(""),!0)},GetHttpHeadersAndClear:function(L){var W=L.__httpHeaderMap;return L.__httpHeaderMap={},W||L.__httpHeaderMap}},_.__innnerHTTPUploadBinaryFull=function(L,W,F,U,H,Z,X,$,V,De){var fe=r.GetHttpHeadersAndClear(this);return l.I.DWT.IfAddMD5InUploadHeader&&W&&""!=W&&(fe["dwt-md5"]=W),0<l.D.dlgRef||0==this.__IfShowCancelDialogWhenImageTransfer?(F instanceof File?F.fileName=H:F.name=H,h.setBtnCancelVisibleForProgress(this,!0),h.httpPostUpload(this,L,F,!0,0,fe,!0,Z,X,$,function(je){l.D.isFunction(V)&&S(V,je)},De)):(l.D.Errors.UploadError(this,!0),De())},_.__innnerHTTPUploadBase64Full=function(L,W,F,U,H,Z,X,$,V){var De=r.GetHttpHeadersAndClear(this);return 0<l.D.dlgRef||0==this.__IfShowCancelDialogWhenImageTransfer?(l.I.DWT.IfAddMD5InUploadHeader&&De&&W&&""!=W&&(De["dwt-md5"]=W),h.setBtnCancelVisibleForProgress(this,!0),h.httpPostUploadString(this,L,F,H,0,De,!0,Z,X,function(fe){l.D.isFunction($)&&S($,fe)},V)):(l.D.Errors.UploadError(this,!0),V())},_.ConvertToBase64=function(L,W,F,U){var H=this;if(H._resetErr(),!H._isValid())return!1;var Z=[],X=arguments,$=f()(W);if(!l.D.License.checkProductKey(H,{Core:!0}))return l.D.isFunction(U)&&U(H.ErrorCode,H.ErrorString),!1;if(!H._isMobileMode()&&h.isServerInvalid(H)||!H._checkIndices(L))return l.D.isFunction(U)&&G(U,H,L,W,X),!1;if($==l.I.DWT.EnumDWT_ImageType.IT_BMP||$==l.I.DWT.EnumDWT_ImageType.IT_JPG||$==l.I.DWT.EnumDWT_ImageType.IT_PNG){if(1<L.length)return l.D.Errors.ConvertBase64IndexMoreThanOne(H),l.D.isFunction(U)&&G(U,H,L,W,X),!1}else if($!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&$!=l.I.DWT.EnumDWT_ImageType.IT_PDF)return l.D.Errors.InvalidImageType(H),l.D.isFunction(U)&&G(U,H,L,W,X),!1;l.D.isArray(L)&&l.D.each(L,function(fe){-1!=(fe=H._ImgManager.convertClientIndexToServerId(fe))&&Z.push(fe)});var V=function(je){var Se=[];return l.D.isArray(Z)&&l.D.each(Z,function(rt){-1<(rt=H._ImgManager.convertServerIdToClientIndex(rt))&&Se.push(rt)}),l.D.isFunction(F)&&S(F,je,Se,W,X),!1},De=function(){var je=[];return l.D.isArray(Z)&&l.D.each(Z,function(Se){-1<(Se=H._ImgManager.convertServerIdToClientIndex(Se))&&je.push(Se)}),l.D.isFunction(U)&&G(U,H,je,W,X),!1};return H._convertToBase64ByServerIds(Z,$,!1,3,V,De)},_._convertToBase64ByServerIds=function(L,W,F,U,H,Z){var X=this,$="ConvertToBase64",V=(l.D.showProgress(X,$,!1),function(){return l.D.closeProgress(X,$),l.D.isFunction(Z)&&Z(),!1}),De=function(tt){tt=tt&&tt.result;var Se,rt,de=[];l.D.isArray(L)&&l.D.each(L,function(_t){-1<(_t=X._ImgManager.convertServerIdToClientIndex(_t))&&de.push(_t)}),0!=X.ErrorCode?V():tt&&l.D.isArray(tt)&&3==tt.length?(Se=tt[0],rt=new l.D.html5.Base64Result(X,rt=tt[1],tt=tt[2],Se),l.D.closeProgress(X,$),l.D.isFunction(H)&&S(H,rt)):(l.D.Errors.ConvertBase64Failed(X),V())};return X._isMobileMode()?W==l.I.DWT.EnumDWT_ImageType.IT_BMP?(l.D.closeProgress(X,$),X._mobileNotSupport("Convert to bmp",Z)):X.__innerConvertToBase64ByMobile("",L,W,U,De,V):(l.D.isString(F)&&""!=F||(F="{}"),U=["[",W,',"',L.join(","),'",',F,",1]"].join(""),X._innerFunRaw($,U,!0,!1,!0,De,V))},_.ClearAllHTTPFormField=function(){return this._resetErr(),!!this._isValid()&&(this.httpFormFields={},!0)},_.SetHTTPFormField=function(L,W,F){return this._resetErr(),!!this._isValid()&&(l.D.isString(L)||(L=""+L),W instanceof Blob&&(W.name=F),this.httpFormFields[L]=W,!0)},_.HTTPUploadAllThroughPostAsMultiPageTIFF=function(L,W,F,U,H,Z){var X=this;if(X._resetErr(),!X._isValid())return!1;if(X._isMobileMode())return X._mobileNotSupport("HTTPUploadAllThroughPostAsMultiPageTIFF",H);var $=arguments,V=!1,De=function(je){return l.D.isFunction(H)&&G(H,X,X.__HTTPPostResponseString,je,$),!1};return l.D.isString(F)&&""!=F?(U&&l.D.isFunction(U)&&(V=function(je,Se){return S(U,X.__HTTPPostResponseString,Se,$),!0}),X.innerHTTPUploadPost(L,-1,W,F,2,V,De,Z)):(l.D.Errors.UploadFileCannotEmpty(X),De())},_.HTTPUploadThroughPostAsMultiPageTIFF=function(L,W,F,U,H,Z){var X=this;if(X._resetErr(),!X._isValid())return!1;if(X._isMobileMode())return X._mobileNotSupport("HTTPUploadThroughPostAsMultiPageTIFF",H);var $=arguments,V=!1,De=function(je){return l.D.isFunction(H)&&G(H,X,X.__HTTPPostResponseString,je,$),!1};return l.D.isString(F)&&""!=F?(U&&l.D.isFunction(U)&&(V=function(je,Se){return S(U,X.__HTTPPostResponseString,Se,$),!0}),X.innerHTTPUploadPost(L,-2,W,F,2,V,De,Z)):(l.D.Errors.UploadFileCannotEmpty(X),De())},_.HTTPUploadAllThroughPostAsPDF=function(L,W,F,U,H,Z){var X=this;if(X._resetErr(),!X._isValid())return!1;if(X._isMobileMode())return X._mobileNotSupport("HTTPUploadAllThroughPostAsPDF",H);var $=arguments,V=!1,De=function(je){return l.D.isFunction(H)&&G(H,X,X.__HTTPPostResponseString,je,$),!1};return l.D.isString(F)&&""!=F?(U&&l.D.isFunction(U)&&(V=function(je,Se){return S(U,X.__HTTPPostResponseString,Se,$),!0}),X.innerHTTPUploadPost(L,-1,W,F,4,V,De,Z)):(l.D.Errors.UploadFileCannotEmpty(X),De())},_.HTTPUploadThroughPostAsMultiPagePDF=function(L,W,F,U,H,Z){var X=this;if(X._resetErr(),!X._isValid())return!1;if(X._isMobileMode())return X._mobileNotSupport("HTTPUploadThroughPostAsMultiPagePDF",H);var $=arguments,V=!1,De=function(je){return l.D.isFunction(H)&&G(H,X,X.__HTTPPostResponseString,je,$),!1};return l.D.isString(F)&&""!=F?(U&&l.D.isFunction(U)&&(V=function(je,Se){return S(U,X.__HTTPPostResponseString,Se,$),!0}),X.innerHTTPUploadPost(L,-2,W,F,4,V,De,Z)):(l.D.Errors.UploadFileCannotEmpty(X),De())},_.HTTPDownloadThroughPost=function(De,W,F,U,H,Z){var X=this,$=r.GetHttpHeadersAndClear(X),V=arguments;if(!1===(De=h.combineUrl(X,De,W)))return l.D.Errors.ParameterCannotEmpty(X),!1;if(h.isServerInvalid(X)||!l.D.License.checkProductKey(X,{Core:!0})||!l.D.License.checkPDFProductKeyWhenNeeds(X,F))return l.D.isFunction(H)&&M(H,X,V),!1;l.D.cancelFrome=2,l.D.showProgress(X,"HttpDownloadThroughPost",!0);var fe=function(rt){var tt=0===rt.total?100:Math.round(100*rt.loaded/rt.total);[rt.loaded," / ",rt.total].join(""),X._OnPercentDone([0,tt,"","http"])},je=!0;return X._OnPercentDone([0,-1,l.I.MSG.Downloading,"http"]),l.D.isFunction(U)||(je=!1),h.loadHttpBlob(X,"post",De,je,function(Se){X._OnPercentDone([0,-1,l.I.MSG.Loading]);var rt=F;rt!=l.I.DWT.EnumDWT_ImageType.IT_BMP&&rt!=l.I.DWT.EnumDWT_ImageType.IT_JPG&&rt!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&rt!=l.I.DWT.EnumDWT_ImageType.IT_PNG&&rt!=l.I.DWT.EnumDWT_ImageType.IT_PDF&&rt!=l.I.DWT.EnumDWT_ImageType.IT_J2K&&(rt=-1),X.__LoadImageFromBytes(Se,rt,"",je,U,H)},function(){l.D.closeProgress(X,"HttpDownloadThroughPost"),l.D.isFunction(H)&&M(H,X,V)},fe,$)},_.HTTPDownloadThroughGet=function($,W,F,U,H){var Z=this,X=r.GetHttpHeadersAndClear(Z);if(!1===($=h.combineUrl(Z,$,W)))return l.D.Errors.ParameterCannotEmpty(Z),l.D.isFunction(H)&&M(H,Z),!1;if(Z._isMobileMode()){if(!l.D.License.checkProductKey(Z,{Core:!0}))return l.D.isFunction(H)&&M(H,Z),!1}else if(h.isServerInvalid(Z)||!l.D.License.checkProductKey(Z,{Core:!0})||!l.D.License.checkPDFProductKeyWhenNeeds(Z,F))return l.D.isFunction(H)&&M(H,Z),!1;l.D.cancelFrome=2,l.D.showProgress(Z,"HTTPDownloadThroughGet",!0);var V=function(Se){var rt=0===Se.total?100:Math.round(100*Se.loaded/Se.total);[Se.loaded," / ",Se.total].join(""),Z._OnPercentDone([0,rt,"","http"])},De=!0,fe=(Z._OnPercentDone([0,-1,l.I.MSG.Downloading,"http"]),l.D.isFunction(U)||(De=!1),Z.GetCurrentDocumentName());return""==fe&&(fe=Z._ImgManager.getWebViewer().GetDefaultFileName()),Z._isMobileMode()?h.loadHttpBlob(Z,"get",$,De,function(je){Z._OnPercentDone([0,-1,l.I.MSG.Loading]),je.currentFileName=fe,Z.LoadImageFromBinary(je,function(){l.I.Lib.closeProgress(Z,""),l.D.isFunction(U)&&U()},function(){l.D.closeProgress(Z,"HTTPDownloadThroughGet"),l.D.isFunction(H)&&M(H,Z)})},function(){l.D.closeProgress(Z,"HTTPDownloadThroughGet"),l.D.isFunction(H)&&M(H,Z)},V,X):h.loadHttpBlob(Z,"get",$,De,function(je){Z._OnPercentDone([0,-1,l.I.MSG.Loading]);var Se=F;Se!=l.I.DWT.EnumDWT_ImageType.IT_BMP&&Se!=l.I.DWT.EnumDWT_ImageType.IT_JPG&&Se!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&Se!=l.I.DWT.EnumDWT_ImageType.IT_PNG&&Se!=l.I.DWT.EnumDWT_ImageType.IT_PDF&&Se!=l.I.DWT.EnumDWT_ImageType.IT_J2K&&(Se=-1),je.currentFileName=fe,Z.__LoadImageFromBytes(je,Se,"",De,function(){l.I.Lib.closeProgress(Z,""),l.D.isFunction(U)&&U()},function(){l.D.closeProgress(Z,"HTTPDownloadThroughGet"),l.D.isFunction(H)&&M(H,Z)})},function(){l.D.closeProgress(Z,"HTTPDownloadThroughGet"),l.D.isFunction(H)&&M(H,Z)},V,X)},_.HTTPUploadThroughPut=function(L,W,F,U,H){var Z=h.getImageType(F);return this.HTTPUploadThroughPutEx(L,W,F,Z,U,H)},_.HTTPUploadThroughPutEx=function(L,W,F,U,H,Z){var X=this,$=r.GetHttpHeadersAndClear(X),V="HTTPUploadThroughPutEx",De=h.combineUrl(X,L,F),fe=!0,je=[];if(!1===De)return l.D.Errors.ParameterCannotEmpty(X),l.D.isFunction(Z)&&G(Z,X,"",[W],F,U),!1;l.D.isFunction(H)||(fe=!1),l.D.cancelFrome=1;var Se,rt=function(){return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(X,V),l.D.isFunction(Z)&&G(Z,X,X.__HTTPPostResponseString,je,F,U),!1};switch(l.D.needShowTwiceShowDialog=!0,l.D.showProgress(X,V,!1),W){case-1:for(var tt=0;tt<X._ImgManager.count();tt++)je.push(tt);break;case-2:je=X._ImgManager.getSelectedClientIndexArray();break;default:if(je.push(W),0<=W)break;return l.D.Errors.IndexOutOfRange(X),rt()}if(""===L)return l.D.Errors.HttpServerCannotEmpty(X),rt();var de=[];return l.D.isArray(je)&&l.D.each(je,function(_t){-1!=(_t=X._ImgManager.convertClientIndexToServerId(_t))&&de.push(_t)}),X._OnPercentDone([0,-1,l.I.MSG.Encoding,"http"]),X.__innerConvertToBlob(U,de,!1,fe,4,function(_t,be,it){return l.I.DWT.IfAddMD5InUploadHeader&&be&&""!=be&&($["dwt-md5"]=be),l.D.needShowTwiceShowDialog=!1,_t&&(0<l.D.dlgRef||0==X.__IfShowCancelDialogWhenImageTransfer||0==fe)?(be=X.MaxUploadImageSize)<_t.size&&-1!=be?(l.D.Errors.UploadExceededMaxSize(X),rt()):(Se=function(Ce){var we=0===Ce.total?100:Math.round(100*Ce.loaded/Ce.total);[Ce.loaded," / ",Ce.total].join(""),X._OnPercentDone([0,we,"","http"])},X._OnPercentDone([0,-1,l.I.MSG.Uploading,"http"]),h.setBtnCancelVisibleForProgress(X,!0),h.httpPutImage(X,De,_t,fe,function(mt){var Ce;return X.__HTTPPostResponseString=mt,l.D.closeProgress(X,V),l.D.isFunction(H)&&(Ce=[],l.D.isArray(de)&&l.D.each(de,function(we){-1<(we=X._ImgManager.convertServerIdToClientIndex(we))&&Ce.push(we)}),S(H,X.__HTTPPostResponseString,Ce,F,U)),!0},rt,Se)):(l.D.closeProgress(X,V),!1)},rt)},_.HTTPUploadAllThroughPutAsMultiPageTIFF=function(L,W,F,U){return this.HTTPUploadThroughPutEx(L,-1,W,2,F,U)},_.HTTPUploadThroughPutAsMultiPageTIFF=function(L,W,F,U){return this.HTTPUploadThroughPutEx(L,-2,W,2,F,U)},_.HTTPUploadAllThroughPutAsPDF=function(L,W,F,U){return this.HTTPUploadThroughPutEx(L,-1,W,4,F,U)},_.HTTPUploadThroughPutAsMultiPagePDF=function(L,W,F,U){return this.HTTPUploadThroughPutEx(L,-2,W,4,F,U)},_.GetSelectedImagesSize=function(L){if(this._resetErr(),!this._isValid())return!1;if(this._isMobileMode())return this._mobileNotSupport("GetSelectedImagesSize");var W=T(this);return this._innerFun("GetSelectedImagesSize",(0,I.dv)(L,W.join(",")))},_.SetHTTPHeader=function(L,W){var F=this;if(F._resetErr(),!F._isValid())return!1;var U,H,Z=L;if(F.__httpHeaderMap||(F.__httpHeaderMap={}),!Z||!l.D.isString(Z))return l.D.isUndefined(Z)?l.D.Errors.HttpHeaderIsUndefined(F):""===Z?l.D.Errors.HttpHeaderIsEmpty(F):null===Z?l.D.Errors.HttpHeaderIsNull(F):l.D.Errors.HttpHeaderIsInvalid(F),!1;for(U=["if-modified-since","if-none-match","if-range","range","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],Z=Z.toLowerCase(),H=0;H<U.length;H++)if(U[H]==Z)return l.D.Errors.HttpHeaderNotAllowed(F),!1;return l.D.isUndefined(W)||null===W||""===W?L in F.__httpHeaderMap&&delete F.__httpHeaderMap[L]:(l.D.isNumber(W)&&(W=""+W),F.__httpHeaderMap[L]=W),!0},l.D.html5.Base64Result=function(L,W,F,U){this._stwain=L,this._md5=F,this._length=W,this._content=U},l.D.html5.Base64Result.prototype.getLength=function(){return this._length},l.D.html5.Base64Result.prototype.getMD5=function(){return this._md5},l.D.html5.Base64Result.prototype.getData=function(L,W){var F=W;return!l.D.isNumber(L)||!l.D.isNumber(W)||L<0||W<=0?"":0==L&&F==this._length?this._content:(L+F>this._length&&(F=this._length-L),this._content.substr(L,F))},_._ConvertToBlob=function(L,W,F,U,H){var Z=this,X="ConvertToBlob",$=!0,V=arguments,De=(l.D.isFunction(U)||($=!1),l.D.cancelFrome=0,l.D.showProgress(Z,X,!1),function(){var je;return l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(Z,X),l.D.isFunction(H)&&(je=[],l.D.isArray(L)&&l.D.each(L,function(Se){-1<(Se=Z._ImgManager.convertServerIdToClientIndex(Se))&&je.push(Se)}),G(H,Z,je,W,V)),!1});return Z._OnPercentDone([0,-1,l.I.MSG.Encoding]),Z.__innerConvertToBlob(W,L,F,$,2,function(fe,je,Se){if(!fe||fe.size<=0)return l.D.Errors.ConvertBlobIsEmpty(Z),De();var rt=Z.MaxUploadImageSize;if(rt<fe.size&&-1!=rt)return l.D.Errors.UploadExceededMaxSize(Z),De();if(l.D.needShowTwiceShowDialog=!1,l.D.closeProgress(Z,X),l.D.isFunction(U)){var tt=[];l.D.isArray(L)&&l.D.each(L,function(de){-1<(de=Z._ImgManager.convertServerIdToClientIndex(de))&&tt.push(de)});try{U(fe,tt,V)}catch{}fe=null}return!!$||fe},De)},_.ConvertToBlob=function(L,W,F,U,H){var Z=this;if(Z._resetErr(),!Z._isValid())return!1;var X=f()(W),$=arguments,V=function(Se,rt){return l.D.isFunction(F)&&S(F,Se,rt,W,$),!(Se=rt=null)},De=function(Se){return l.D.isFunction(U)&&G(U,Z,Se,W,$),Se=null,!1};if(!l.D.License.checkProductKey(Z,{Core:!0}))return l.D.isFunction(U)&&U(Z.ErrorCode,Z.ErrorString),!1;if(!Z._isMobileMode()&&h.isServerInvalid(Z)||!Z._checkIndices(L))return De(L);if(X==l.I.DWT.EnumDWT_ImageType.IT_BMP||X==l.I.DWT.EnumDWT_ImageType.IT_JPG||X==l.I.DWT.EnumDWT_ImageType.IT_PNG||X==l.I.DWT.EnumDWT_ImageType.IT_J2K){if(1<L.length)return l.D.Errors.ConvertBinaryIndexMoreThanOne(Z),De(L)}else if(X!=l.I.DWT.EnumDWT_ImageType.IT_TIF&&X!=l.I.DWT.EnumDWT_ImageType.IT_PDF)return l.D.Errors.InvalidImageType(Z),De(L);var fe=[];return l.D.isArray(L)&&l.D.each(L,function(je){-1!=(je=Z._ImgManager.convertClientIndexToServerId(je))&&fe.push(je)}),l.D.isFunction(F)?(Z._ConvertToBlob(fe,X,!1,V,De),!0):Z._ConvertToBlob(fe,X,!1)},l.D._asyncUploadCmd=function(L){var W,F,U,H,Z,X,$,V=L._this,De=L.bOnlyUploadForm,fe=L.url,je=L.asyncSuccessFunc,Se=L.asyncFailureFunc;if(!De)return W=L.serverIds,De=L.enumImageType,F=L.dataFormat,U=L.fileName,H=L.saveSetup,Z=L.retry,X=L.bOnlyEmptyIsOK,L=L.objUploadFileStatus,$=function(){if(l.D.isFunction(Se)){var tt=[];l.D.isArray(W)&&l.D.each(W,function(de){-1<(de=V._ImgManager.convertServerIdToClientIndex(de))&&tt.push(de)});try{Se(tt)}catch{}}return!1},l.D.isNumber(Z)&&0<Z||(Z=0),0!=V._errorCode?$():V._innerHTTPUpload(fe,W,De,F,U,H,Z,X,L,function(rt){if(l.D.isFunction(je)){var tt=[];l.D.isArray(W)&&l.D.each(W,function(de){-1<(de=V._ImgManager.convertServerIdToClientIndex(de))&&tt.push(de)});try{S(je,rt,tt)}catch{}}return!0},$);V._innerFormFieldHTTPUpload(fe,function(){if(l.D.isFunction(je))try{je()}catch{}},function(){if(l.D.isFunction(Se))try{Se()}catch{}})},_._asyncUploadFilesCmd=function(L,W,F,U,H,Z,X,$,V,De){var fe=this,je=f()(F),Se="HTTPUpload",rt=L,tt=!1,de=[],_t=(fe.__HTTPPostResponseString="",l.D.cancelFrome=1,function(){if(fe._bServerPercentDone=!0,l.D.needShowTwiceShowDialog=!1,Z&&l.D.closeProgress(fe,Se),de=null,l.D.isFunction(De)){var bt=[];l.D.isArray(W)&&l.D.each(W,function(At){-1<(At=fe._ImgManager.convertServerIdToClientIndex(At))&&bt.push(At)});try{De(bt)}catch{}}return!1});if(l.D.needShowTwiceShowDialog=!0,Z&&l.D.showProgress(fe,Se,!1),h.isServerInvalid(fe))return _t();var be,it,Ce=W.length,we=0;return fe._bServerPercentDone=!1,fe._OnPercentDone([0,-1,l.I.MSG.Encoding,"http"]),l.D.each(W,function(Ve,bt){tt=fe.__innerConvertToBlob(je,[Ve],H,!0,4,function(At,St,Pe){if(!At||At.size<=0)return l.D.Errors.UploadFileCannotEmpty(fe),_t();var ae=fe.MaxUploadImageSize;if(ae<At.size&&-1!=ae)return l.D.Errors.UploadExceededMaxSize(fe),_t();ae=h.cformat(U,bt+1),be=(we+1)/Ce*100,it=[we+1,"/",Ce].join(""),fe._OnPercentDone([0,be,it,"http",ae]),At.name=ae,de.push(At),Ce<=++we&&(Pe=r.GetHttpHeadersAndClear(fe),l.I.DWT.IfAddMD5InUploadHeader&&St&&""!=St&&(Pe["dwt-md5"]=St),tt=h.httpPostUploadFiles(fe,rt,de,!0,0,Pe,Z,X,$,function(Ze){!function(bt){var At;fe._bServerPercentDone=!0,l.D.needShowTwiceShowDialog=!1,Z&&l.D.closeProgress(fe,Se),de=null,l.D.isFunction(V)&&(At=[],l.D.isArray(W)&&l.D.each(W,function(St){-1<(St=fe._ImgManager.convertServerIdToClientIndex(St))&&At.push(St)}),S(V,bt,At))}(Ze)},_t))},_t,[Ve,bt])}),tt}},398:function(e,f,t){t.r(f);var r=t(9623),a=(f=t(7711),t.n(f)),o=(f=t(4579),t.n(f)),u=t(1695),s=t(1188),v=u.D.html5.Funs;(f=u.D.html5.STwain.prototype).AddText=function(l,I,c,_,h,y,p,m){var T=this;return T._resetErr(),!!T._isValid()&&(T._isMobileMode()?T._mobileNotSupport("AddText"):(l=a()(l),isNaN(l)?(u.D.Errors.InvalidIndex(T),!1):l<0||l>=T._ImgManager.count()?(u.D.Errors.IndexOutOfRange(T),!1):(h=u.D.RGB2BGR(h),y=u.D.RGB2BGR(y),-1==(l=T._ImgManager.convertClientIndexToServerId(l))?(u.D.Errors.IndexOutOfRange(T),!1):T._innerFun("AddText",(0,s.dv)(l,I,c,_,h,y,p,m)))))},f.CreateTextFont=function(l,I,c,_,h,y,p,m,T,C,D,S,M,G){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CreateTextFont"):this._innerFun("CreateTextFont",(0,s.dv)(l,I,c,_,h,y,p,m,T,C,D,S,M,G)))},f.CopyToClipboard=function(l){var I=this;return I._resetErr(),!!I._isValid()&&(I._isMobileMode()?I._mobileNotSupport("CopyToClipboard"):(l=a()(l),isNaN(l)?(u.D.Errors.InvalidIndex(I),!1):l<0||l>=I._ImgManager.count()||-1==(l=I._ImgManager.convertClientIndexToServerId(l))?(u.D.Errors.IndexOutOfRange(I),!1):I._innerFun("CopyToClipboard",(0,s.dv)(l))))},f.CopyToClipboardAsync=function(l){var I=this;return I._resetErr(),I._isValid()?I._isMobileMode()?I._mobileNotSupportAsync("CopyToClipboardAsync"):(l=a()(l),isNaN(l)?(u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):l<0||l>=I._ImgManager.count()||-1==(l=I._ImgManager.convertClientIndexToServerId(l))?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("CopyToClipboard",(0,s.dv)(l))):u.D.Promise.reject({code:I._errorCode,message:I._errorString})},f._asyncErase=function(l,I,c,_,h,y,p){var m=this,D=a()(l),S=m.__BackgroundFillColor;return u.D.isUndef(S)?S="FFFFFF":u.D.isNumber(S)?S=S.toString(16):u.D.isString(S)&&(S=S.replace("#","")),m._innerSendToMobile("Erase",(0,s.An)(D,I,c,_,h,S),0,function(){v.refreshImageAfterInvokeFun(m,l),u.D.isFunction(y)&&o()(y,30)},function(){u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString)})},f.Erase=function(T,I,c,_,h,y,p){var m=this;return m._resetErr(),!!m._isValid()&&(T=a()(T),isNaN(T)?(u.D.Errors.InvalidIndex(m),u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1):T<0||T>=m._ImgManager.count()?(u.D.Errors.IndexOutOfRange(m),u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1):m._isMobileMode()?(m._ImgManager.getView().GetWebViewer().clearSelectedAreas(),m._asyncErase(T,I,c,_,h,y,p)):-1==(T=m._ImgManager.convertClientIndexToServerId(T))?(u.D.Errors.IndexOutOfRange(m),u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1):(m._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(T=1==m._innerFun("Erase",(0,s.dv)(T,I,c,_,h)))?u.D.isFunction(y)&&y():u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),T))},f.GetImageBitDepth=function(l){var I=this;if(I._resetErr(),!I._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),!1;if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),!1;if(I._isMobileMode())return c=I._ImgManager._UIView.GetMetaDataByIndex(l),a()(c.bitDepth);var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),!1):I._innerFun("GetImageBitDepth",(0,s.dv)(c))},f.GetImageWidth=function(l){var I=this;if(I._resetErr(),!I._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),-1;if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),-1;if(I._isMobileMode())return c=I._ImgManager._UIView.GetMetaDataByIndex(l),a()(c.width);var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),-1):I._innerFun("GetImageWidth",(0,s.dv)(c))},f.GetImageHeight=function(l){var I=this;if(I._resetErr(),!I._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),-1;if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),-1;if(I._isMobileMode())return c=I._ImgManager._UIView.GetMetaDataByIndex(l),a()(c.height);var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),-1):I._innerFun("GetImageHeight",(0,s.dv)(c))},f.GetImageSize=function(l,I,c){var _=this;return _._resetErr(),!!_._isValid()&&(_._isMobileMode()?_._mobileNotSupport("GetImageSize"):(l=a()(l),isNaN(l)?(u.D.Errors.InvalidIndex(_),-1):l<0||l>=_._ImgManager.count()||-1==(l=_._ImgManager.convertClientIndexToServerId(l))?(u.D.Errors.IndexOutOfRange(_),-1):_._innerFun("GetImageSize",(0,s.dv)(l,I,c))))},f.GetImageSizeWithSpecifiedType=function(l,I){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("GetImageSizeWithSpecifiedType"):(l=a()(l),isNaN(l)?(u.D.Errors.InvalidIndex(c),-1):l<0||l>=c._ImgManager.count()||-1==(l=c._ImgManager.convertClientIndexToServerId(l))?(u.D.Errors.IndexOutOfRange(c),-1):c._innerFun("GetImageSizeWithSpecifiedType",(0,s.dv)(l,I))))},f.GetImageXResolution=function(l){var I=this;if(I._resetErr(),!I._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),!1;if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),!1;if(I._isMobileMode())return c=I._ImgManager._UIView.GetMetaDataByIndex(l),a()(c.resolutionX);var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),!1):I._innerFun("GetImageXResolution",(0,s.dv)(c))},f.GetImageYResolution=function(l){var I=this;if(I._resetErr(),!I._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),!1;if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),!1;if(I._isMobileMode())return c=I._ImgManager._UIView.GetMetaDataByIndex(l),a()(c.resolutionY);var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),!1):I._innerFun("GetImageYResolution",(0,s.dv)(c))},f.SelectAllImages=function(){var l,I=this.HowManyImagesInBuffer,c=[];if(this._resetErr(),!this._isValid())return!1;for(l=0;l<I;l++)c.push(l);return this._ImgManager.SetSelectedClientIndexArray(c),c},f.SelectImages=function(l){return this._resetErr(),!!this._isValid()&&this._ImgManager.SetSelectedClientIndexArray(l)},f._asyncGetSkewAngleOnly=function(l,I,c){var _=this,p=a()(l);return _._innerSendToMobile("GetSkewAngleOnly",(0,s.An)(p),0,function(T){v.refreshImageAfterInvokeFun(_,l),u.D.isFunction(I)&&o()(function(){I(T)},30)},function(){u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString)})},f._asyncGetSkewAngle=function(l,I,c){var _=this,p=a()(l);return _._innerSendToMobile("GetSkewAngle",(0,s.An)(p),0,function(T){v.refreshImageAfterInvokeFun(_,l),u.D.isFunction(I)&&o()(function(){I(T)},30)},function(){u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString)})},f.GetSkewAngle=function(l,I,c){var _=this;if(_._resetErr(),!_._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1;if(l<0||l>=_._ImgManager.count())return u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1;if(_._isMobileMode())return _._asyncGetSkewAngle(l,I,c);var h=_._ImgManager.convertClientIndexToServerId(l);if(-1==h)return u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1;if(h=_._innerFun("GetSkewAngle",(0,s.dv)(h)),0==_.ErrorCode){if(v.refreshImageAfterInvokeFun(_,l),!u.D.isFunction(I))return h;I(h)}else u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString);return!0},f.GetSkewAngleAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});var c=a()(l);return isNaN(c)?(u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):c<0||c>=I._ImgManager.count()?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._isMobileMode()?I._innerSendToMobileV2("GetSkewAngle",(0,s.An)(c)).then(function(_){v.refreshImageAfterInvokeFun(I,c)}):-1==(l=I._ImgManager.convertClientIndexToServerId(c))?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("GetSkewAngle",(0,s.dv)(l)).then(function(_){var h=_;return u.D.isArray(_)&&(h=0<_.length?_[0]:0),v.refreshImageAfterInvokeFun(I,c),h})},f.GetSkewAngleEx=function(l,I,c,_,h){var y=this;return y._resetErr(),!!y._isValid()&&(y._isMobileMode()?y._mobileNotSupport("GetSkewAngleEx"):(l=a()(l),isNaN(l)?(u.D.Errors.InvalidIndex(y),!1):l<0||l>=y._ImgManager.count()||-1==(l=y._ImgManager.convertClientIndexToServerId(l))?(u.D.Errors.IndexOutOfRange(y),!1):y._innerFun("GetSkewAngleEx",(0,s.dv)(l,I,c,_,h))))},f.IsBlankImageEx=function(l,I,c,_,h,y){var p=this;return p._resetErr(),!!p._isValid()&&(p._isMobileMode()?p._mobileNotSupport("IsBlankImageEx"):(l=a()(l),isNaN(l)?(u.D.Errors.InvalidIndex(p),!1):l<0||l>=p._ImgManager.count()||-1==(l=p._ImgManager.convertClientIndexToServerId(l))?(u.D.Errors.IndexOutOfRange(p),!1):p._innerFun("IsBlankImageEx",(0,s.dv)(l,I,c,_,h,y))))},f.MirrorAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});var c=a()(l);return isNaN(c)?(u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):c<0||c>=I._ImgManager.count()?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._isMobileMode()?I._innerSendToMobileV2("Mirror",(0,s.An)(c)).then(function(){v.refreshImageAfterInvokeFun(I,c),I._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}):-1==(l=I._ImgManager.convertClientIndexToServerId(c))?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("Mirror",(0,s.dv)(l)).then(function(_){if(1!=_)throw{code:I._errorCode,message:I._errorString};v.refreshImageAfterInvokeFun(I,c),I._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},f.Mirror=function(l,I,c){var _=this;if(_._resetErr(),!_._isValid())return!1;var h=a()(l);return isNaN(h)?(u.D.Errors.InvalidIndex(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1):h<0||h>=_._ImgManager.count()?(u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1):_._isMobileMode()?(_._innerSendToMobileV2("Mirror",(0,s.An)(h)).then(function(){v.refreshImageAfterInvokeFun(_,h),_._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),I&&I()},function(){u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString)}),!0):-1==(l=_._ImgManager.convertClientIndexToServerId(h))?(u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1):((l=1==_._innerFun("Mirror",(0,s.dv)(l)))?(v.refreshImageAfterInvokeFun(_,h),_._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),u.D.isFunction(I)&&I()):u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),l)},f.RemoveAllImages=function(){var l=this,I=!0,c=l._isMobileMode();if(l._resetErr(),!l._isValid())return!1;if(""==(_=l._ImgManager.GetCurrentTag())||"All"==_)c?l._OnBitmapChanged(["10","-1",3,-1,0]):!(I=l._innerFun("RemoveAllImages"))&&-1033!=l._errorCode||l._OnBitmapChanged(["0","-1",3,-1,0]);else{var h=function(){},y=function(){},p=[],_="0";c&&(_="10");for(var m=l.HowManyImagesInBuffer-1;0<=m;m--){var T=l._ImgManager.convertClientIndexToServerId(m);-1<T&&(c||(I=l._innerFunRaw("RemoveImage",(0,s.dv)(T),!0,!1,!0,h,y))||-1033==l._errorCode)&&p.push(T)}l._OnBitmapChanged([_,p.join(","),3,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()])}return I},f._innerRemoveImage=function(l,I){I=this._ImgManager.convertClientIndexToServerIdInFile(l,I),this._OnBitmapChanged(["10",""+I,3,this._ImgManager.getCurrentImageIndex(),this._ImgManager.count()],null,l)},f.RemoveImage=function(c){var I=this;if(I._resetErr(),!I._isValid())return!1;c=a()(c);var _=!0;return isNaN(c)?(u.D.Errors.InvalidIndex(I),!1):c<0||c>=I._ImgManager.count()||-1==(c=I._ImgManager.convertClientIndexToServerId(c))?(u.D.Errors.IndexOutOfRange(I),!1):(I._isMobileMode()?I._OnBitmapChanged(["10",""+c,3,I._ImgManager.getCurrentImageIndex(),I._ImgManager.count()]):!(_=I._innerFun("RemoveImage",(0,s.dv)(c)))&&-1033!=I._errorCode||I._OnBitmapChanged(["0",""+c,3,I._ImgManager.getCurrentImageIndex(),I._ImgManager.count()]),_)},f.RemoveAllImagesAsync=function(){var l=this;if(l._resetErr(),!l._isValid())return u.D.Promise.reject({code:l._errorCode,message:l._errorString});var I=l._ImgManager.GetCurrentTag();return""==I||"All"==I?l._isMobileMode()?(l._OnBitmapChanged(["10","-1",3,-1,0]),u.D.Promise.resolve(!0)):l._innerFunV2("RemoveAllImages").then(function(c){return!(!c&&-1033!=l._errorCode||(l._OnBitmapChanged(["0","-1",3,-1,0]),0))}):(I=function(){for(var c,_=[],h=l.HowManyImagesInBuffer,y=0;y<h;y++){var p=l._ImgManager.convertClientIndexToServerId(y);-1<p&&_.push(p)}if(l._isMobileMode())c=u.D.Promise.resolve(_.join(","));else{var m=[];for(c=u.D.Promise.resolve(0),y=0;y<_.length;y++)c=c.then(function(T){return l._innerFunRawV2("RemoveImage",(0,s.dv)(_[T])).then(function(C){return!C&&-1033!=l._errorCode||m.push(_[T]),T++})});c=c.then(function(){return m.join(",")})}return{v:c.then(function(T){var C="0";l._isMobileMode()&&(C="10"),""!=T&&l._OnBitmapChanged([C,T,3,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()])})}}(),"object"===(0,r.Z)(I)?I.v:void 0)},f.RemoveImageAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._isMobileMode()?(I._OnBitmapChanged(["10",""+c,3,I._ImgManager.getCurrentImageIndex(),I._ImgManager.count()]),u.D.Promise.resolve(!0)):I._innerFunV2("RemoveImage",(0,s.dv)(c)).then(function(_){return!(!_&&-1033!=I._errorCode||(I._OnBitmapChanged(["0",""+c,3,I._ImgManager.getCurrentImageIndex(),I._ImgManager.count()]),0))})},f._removeImageById=function(l,I,c){var _=this;return _._innerFunRaw("RemoveImage",(0,s.dv)(l),!0,!1,!0,function(){_._OnBitmapChanged(["0",""+l,3,_._ImgManager.getCurrentImageIndex(),_._ImgManager.count()]),u.D.isFunction(I)&&I()},c)},f._asyncRotateEx=function(l,I,c,_){var h=this,y=a()(l),p=h.__BackgroundFillColor;return u.D.isUndef(p)?p="FFFFFF":u.D.isNumber(p)?p="0x"+p.toString(16):u.D.isString(p)&&(p=p.replace("#","")),h._innerSendToMobileV2("RotateEx",(0,s.An)(y,I,c,_,p)).then(function(){v.refreshImageAfterInvokeFun(h,l),h._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},f.Rotate=function(l,I,c,_,h){var y=this;if(y._resetErr(),!y._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(y),u.D.isFunction(h)&&h(y.ErrorCode,y.ErrorString),!1;if(l<0||l>=y._ImgManager.count())return u.D.Errors.IndexOutOfRange(y),u.D.isFunction(h)&&h(y.ErrorCode,y.ErrorString),!1;if(y._isMobileMode())return y._asyncRotateEx(l,I,c,-1).then(_,function(){u.D.isFunction(h)&&h(y.ErrorCode,y.ErrorString)}),!0;var p=y._ImgManager.convertClientIndexToServerId(l);return-1==p?(u.D.Errors.IndexOutOfRange(y),u.D.isFunction(h)&&h(y.ErrorCode,y.ErrorString),!1):((p=1==y._innerFun("Rotate",(0,s.dv)(p,I,c)))?(v.refreshImageAfterInvokeFun(y,l),y._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),u.D.isFunction(_)&&_()):u.D.isFunction(h)&&h(y.ErrorCode,y.ErrorString),p)},f.RotateEx=function(l,I,c,_,h,y){var p=this;if(p._resetErr(),!p._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(p),u.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString),!1;if(l<0||l>=p._ImgManager.count())return u.D.Errors.IndexOutOfRange(p),u.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString),!1;if(p._isMobileMode())return p._asyncRotateEx(l,I,c,_).then(h,function(){u.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString)}),!0;var m=p._ImgManager.convertClientIndexToServerId(l);return-1==m?(u.D.Errors.IndexOutOfRange(p),u.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString),!1):((m=1==p._innerFun("RotateEx",(0,s.dv)(m,I,c,_)))?(v.refreshImageAfterInvokeFun(p,l),p._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),u.D.isFunction(h)&&h()):u.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString),m)},f.RotateLeft=function(l,I,c){var _=this;if(_._resetErr(),!_._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1;if(l<0||l>=_._ImgManager.count())return u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1;if(_._isMobileMode())return _._asyncRotateEx(l,-90,!0,-1).then(I,function(){u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString)}),!0;var h=_._ImgManager.convertClientIndexToServerId(l);return-1==h?(u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1):((h=1==_._innerFun("RotateLeft",(0,s.dv)(h)))?(v.refreshImageAfterInvokeFun(_,l),_._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),u.D.isFunction(I)&&I()):u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),h)},f.RotateRight=function(l,I,c){var _=this;if(_._resetErr(),!_._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1;if(l<0||l>=_._ImgManager.count())return u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1;if(_._isMobileMode())return _._asyncRotateEx(l,90,!0,-1).then(I,function(){u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString)}),!0;var h=_._ImgManager.convertClientIndexToServerId(l);return-1==h?(u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1):((h=1==_._innerFun("RotateRight",(0,s.dv)(h)))?(v.refreshImageAfterInvokeFun(_,l),_._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),u.D.isFunction(I)&&I()):u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),h)},f.RotateAsync=function(l,I,c){var _=this;if(_._resetErr(),!_._isValid())return u.D.Promise.reject({code:_._errorCode,message:_._errorString});var h=a()(l);return isNaN(h)?(u.D.Errors.InvalidIndex(_),u.D.Promise.reject({code:_._errorCode,message:_._errorString})):h<0||h>=_._ImgManager.count()?(u.D.Errors.IndexOutOfRange(_),u.D.Promise.reject({code:_._errorCode,message:_._errorString})):_._isMobileMode()?_._asyncRotateEx(h,I,c,-1):-1==(l=_._ImgManager.convertClientIndexToServerId(h))?(u.D.Errors.IndexOutOfRange(_),u.D.Promise.reject({code:_._errorCode,message:_._errorString})):_._innerFunV2("Rotate",(0,s.dv)(l,I,c)).then(function(y){if(1!=y)throw{code:_._errorCode,message:_._errorString};v.refreshImageAfterInvokeFun(_,h),_._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},f.RotateExAsync=function(l,I,c,_){var h=this;if(h._resetErr(),!h._isValid())return u.D.Promise.reject({code:h._errorCode,message:h._errorString});var y=a()(l);return isNaN(y)?(u.D.Errors.InvalidIndex(h),u.D.Promise.reject({code:h._errorCode,message:h._errorString})):y<0||y>=h._ImgManager.count()?(u.D.Errors.IndexOutOfRange(h),u.D.Promise.reject({code:h._errorCode,message:h._errorString})):h._isMobileMode()?h._asyncRotateEx(y,I,c,_):-1==(l=h._ImgManager.convertClientIndexToServerId(y))?(u.D.Errors.IndexOutOfRange(h),u.D.Promise.reject({code:h._errorCode,message:h._errorString})):h._innerFunV2("RotateEx",(0,s.dv)(l,I,c,_)).then(function(p){if(1!=p)throw{code:h._errorCode,message:h._errorString};v.refreshImageAfterInvokeFun(h,y),h._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},f.RotateLeftAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});var c=a()(l);return isNaN(c)?(u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):c<0||c>=I._ImgManager.count()?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._isMobileMode()?I._asyncRotateEx(c,-90,!0,-1):-1==(l=I._ImgManager.convertClientIndexToServerId(c))?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("RotateLeft",(0,s.dv)(l)).then(function(_){if(1!=_)throw{code:I._errorCode,message:I._errorString};v.refreshImageAfterInvokeFun(I,c),I._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},f.RotateRightAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});var c=a()(l);return isNaN(c)?(u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):c<0||c>=I._ImgManager.count()?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._isMobileMode()?I._asyncRotateEx(c,90,!0,-1):-1==(l=I._ImgManager.convertClientIndexToServerId(c))?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("RotateRight",(0,s.dv)(l)).then(function(_){if(1!=_)throw{code:I._errorCode,message:I._errorString};v.refreshImageAfterInvokeFun(I,c),I._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},f._asyncChangeImageSize=function(l,p,m,_){var h=this,y=a()(l);return p=a()(p),m=a()(m),h._innerSendToMobileV2("ChangeImageSize",(0,s.An)(y,p,m,_)).then(function(){v.refreshImageAfterInvokeFun(h,l)})},f.ChangeImageSize=function(m,I,c,_,h,y){var p=this,T=(m=a()(m),+I),C=+c;return p._resetErr(),!!p._isValid()&&(isNaN(m)?(u.D.Errors.InvalidIndex(p),u.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString),!1):m<0||m>=p._ImgManager.count()?(u.D.Errors.IndexOutOfRange(p),u.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString),!1):T<=0||C<=0?(u.D.Errors.InvalidWidthOrHeight(p),u.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString),!1):p._isMobileMode()?(p._asyncChangeImageSize(m,I,c,_).then(h,function(){u.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString)}),!0):-1==(I=p._ImgManager.convertClientIndexToServerId(m))?(u.D.Errors.IndexOutOfRange(p),u.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString),!1):((c=1==p._innerFun("ChangeImageSize",(0,s.dv)(I,T,C,_)))?(v.refreshImageAfterInvokeFun(p,m),u.D.isFunction(h)&&h()):u.D.isFunction(y)&&y(p.ErrorCode,p.ErrorString),c))},f.ChangeImageSizeAsync=function(p,I,c,_){var h=this,y=a()(p),m=(p=+I,+c);return h._resetErr(),h._isValid()?isNaN(y)?(u.D.Errors.InvalidIndex(h),u.D.Promise.reject({code:h._errorCode,message:h._errorString})):y<0||y>=h._ImgManager.count()?(u.D.Errors.IndexOutOfRange(h),u.D.Promise.reject({code:h._errorCode,message:h._errorString})):p<=0||m<=0?(u.D.Errors.InvalidWidthOrHeight(h),u.D.Promise.reject({code:h._errorCode,message:h._errorString})):h._isMobileMode()?h._asyncChangeImageSize(y,I,c,_):-1==(I=h._ImgManager.convertClientIndexToServerId(y))?(u.D.Errors.IndexOutOfRange(h),u.D.Promise.reject({code:h._errorCode,message:h._errorString})):h._innerFunV2("ChangeImageSize",(0,s.dv)(I,p,m,_)).then(function(T){if(1!=T)throw{code:h._errorCode,message:h._errorString};v.refreshImageAfterInvokeFun(h,y)}):u.D.Promise.reject({code:h._errorCode,message:h._errorString})},f._asyncFlip=function(l){var I=this,c=a()(l);return I._innerSendToMobileV2("Flip",(0,s.An)(c)).then(function(){v.refreshImageAfterInvokeFun(I,l),I._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},f.Flip=function(l,I,c){var _=this;if(_._resetErr(),!_._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1;if(l<0||l>=_._ImgManager.count())return u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1;if(_._isMobileMode())return _._asyncFlip(l).then(I,function(){u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString)}),!0;var h=_._ImgManager.convertClientIndexToServerId(l);return-1==h?(u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1):((h=1==_._innerFun("Flip",(0,s.dv)(h)))?(v.refreshImageAfterInvokeFun(_,l),_._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),u.D.isFunction(I)&&I()):u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),h)},f.FlipAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});var c=a()(l);return isNaN(c)?(u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):c<0||c>=I._ImgManager.count()?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._isMobileMode()?I._asyncFlip(c):-1==(l=I._ImgManager.convertClientIndexToServerId(c))?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("Flip",(0,s.dv)(l)).then(function(_){if(1!=_)throw{code:I._errorCode,message:I._errorString};v.refreshImageAfterInvokeFun(I,c),I._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},f._asyncCrop=function(l,I,c,_,h){var y=this,p=a()(l);return y._innerSendToMobileV2("Crop",(0,s.An)(p,I,c,_,h)).then(function(){var m,T;v.refreshImageAfterInvokeFun(y,l),m=y.ErrorCode,T=y.ErrorString,y._ImgManager.getView().GetWebViewer().clearSelectedAreas(),y._errorCode=m,y._errorString=T})},f.Crop=function(l,I,c,_,h,y,p){var m=this;if(m._resetErr(),!m._isValid())return!1;if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(m),u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1;if(l<0||l>=m._ImgManager.count())return u.D.Errors.IndexOutOfRange(m),u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1;if(m._isMobileMode())return m._asyncCrop(l,I,c,_,h).then(y,function(){u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString)}),!0;var T=m._ImgManager.convertClientIndexToServerId(l);return-1==T?(u.D.Errors.IndexOutOfRange(m),u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1):(T=1==m._innerFun("Crop",(0,s.dv)(T,I,c,_,h)),I=m.ErrorCode,c=m.ErrorString,m._ImgManager.getView().GetWebViewer().clearSelectedAreas(),m._errorCode=I,m._errorString=c,T?(v.refreshImageAfterInvokeFun(m,l),u.D.isFunction(y)&&y()):u.D.isFunction(p)&&p(I,c),T)},f.CropAsync=function(l,I,c,_,h){var y=this;if(y._resetErr(),!y._isValid())return u.D.Promise.reject({code:y._errorCode,message:y._errorString});var p=a()(l);return isNaN(p)?(u.D.Errors.InvalidIndex(y),u.D.Promise.reject({code:y._errorCode,message:y._errorString})):p<0||p>=y._ImgManager.count()?(u.D.Errors.IndexOutOfRange(y),u.D.Promise.reject({code:y._errorCode,message:y._errorString})):y._isMobileMode()?y._asyncCrop(p,I,c,_,h):-1==(l=y._ImgManager.convertClientIndexToServerId(p))?(u.D.Errors.IndexOutOfRange(y),u.D.Promise.reject({code:y._errorCode,message:y._errorString})):y._innerFunV2("Crop",(0,s.dv)(l,I,c,_,h)).then(function(m){var T=y.ErrorCode,C=y.ErrorString;if(y._ImgManager.getView().GetWebViewer().clearSelectedAreas(),y._errorCode=T,y._errorString=C,1!=m)throw{code:y._errorCode,message:y._errorString};return v.refreshImageAfterInvokeFun(y,p),!0})},f.CropToClipboard=function(l,I,c,_,h){var y=this;if(y._resetErr(),!y._isValid())return!1;if(y._isMobileMode())return y._mobileNotSupport("CropToClipboard");if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(y),!1;if(l<0||l>=y._ImgManager.count())return u.D.Errors.IndexOutOfRange(y),!1;var p=y._ImgManager.convertClientIndexToServerId(l);return-1==p?(u.D.Errors.IndexOutOfRange(y),!1):(y._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(p=1==y._innerFun("CropToClipboard",(0,s.dv)(p,I,c,_,h)))&&v.refreshImageAfterInvokeFun(y,l),p)},f.CutFrameToClipboard=function(l,I,c,_,h){var y=this;if(y._resetErr(),!y._isValid())return!1;if(y._isMobileMode())return y._mobileNotSupport("CutFrameToClipboard");if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(y),!1;if(l<0||l>=y._ImgManager.count())return u.D.Errors.IndexOutOfRange(y),!1;var p=y._ImgManager.convertClientIndexToServerId(l);return-1==p?(u.D.Errors.IndexOutOfRange(y),!1):(y._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(p=1==y._innerFun("CutFrameToClipboard",(0,s.dv)(p,I,c,_,h)))&&v.refreshImageAfterInvokeFun(y,l),p)},f.CutToClipboard=function(_){var c,I=this;return I._resetErr(),!!I._isValid()&&(I._isMobileMode()?I._mobileNotSupport("CutToClipboard"):(_=a()(_),isNaN(_)?(u.D.Errors.InvalidIndex(I),!1):_<0||_>=I._ImgManager.count()||-1==(_=I._ImgManager.convertClientIndexToServerId(_))?(u.D.Errors.IndexOutOfRange(I),!1):((c=1==I._innerFun("CutToClipboard",(0,s.dv)(_)))&&I._OnBitmapChanged(["0",""+_,3,I._ImgManager.getCurrentImageIndex(),I._ImgManager.count()]),c)))},f.CutFrameToClipboardAsync=function(l,I,c,_,h){var y=this;if(y._resetErr(),!y._isValid())return u.D.Promise.reject({code:y._errorCode,message:y._errorString});if(y._isMobileMode())return y._mobileNotSupportAsync("CutFrameToClipboardAsync");var p=a()(l);return isNaN(p)?(u.D.Errors.InvalidIndex(y),u.D.Promise.reject({code:y._errorCode,message:y._errorString})):p<0||p>=y._ImgManager.count()||-1==(l=y._ImgManager.convertClientIndexToServerId(p))?(u.D.Errors.IndexOutOfRange(y),u.D.Promise.reject({code:y._errorCode,message:y._errorString})):y._innerFunV2("CutFrameToClipboard",(0,s.dv)(l,I,c,_,h)).then(function(m){if(m=1==m)return v.refreshImageAfterInvokeFun(y,p),m;throw{code:y._errorCode,message:y._errorString}})},f.CropToClipboardAsync=function(l,I,c,_,h){var y=this;if(y._resetErr(),!y._isValid())return u.D.Promise.reject({code:y._errorCode,message:y._errorString});if(y._isMobileMode())return y._mobileNotSupportAsync("CropToClipboardAsync");var p=a()(l);return isNaN(p)?(u.D.Errors.InvalidIndex(y),u.D.Promise.reject({code:y._errorCode,message:y._errorString})):p<0||p>=y._ImgManager.count()||-1==(l=y._ImgManager.convertClientIndexToServerId(p))?(u.D.Errors.IndexOutOfRange(y),u.D.Promise.reject({code:y._errorCode,message:y._errorString})):y._innerFunV2("CropToClipboard",(0,s.dv)(l,I,c,_,h)).then(function(m){if(m=1==m)return v.refreshImageAfterInvokeFun(y,p),m;throw{code:y._errorCode,message:y._errorString}})},f.CutToClipboardAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(I._isMobileMode())return I._mobileNotSupportAsync("CutToClipboardAsync");if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("CutToClipboard",(0,s.dv)(c)).then(function(_){if(_=1==_)return I._OnBitmapChanged(["0",""+c,3,I._ImgManager.getCurrentImageIndex(),I._ImgManager.count()]),_;throw{code:I._errorCode,message:I._errorString}})},f._asyncSetDPI=function(l,I,M,G,h,L,p,m){var T=this,S=a()(l);return M=a()(M),G=a()(G),L=a()(L),isNaN(M)||M<=0||isNaN(G)||G<=0||isNaN(L)||L<0?(u.D.Errors.InvalidParameter(T),u.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString),!1):T._innerSendToMobile("SetDPI",(0,s.An)(S,M,G,h,L),0,function(){v.refreshImageAfterInvokeFun(T,l),u.D.isFunction(p)&&o()(p,30)},function(){u.D.isFunction(m)&&m(T.ErrorCode,T.ErrorString)})},f.SetDPI=function(T,I,c,_,h,y,p){var m=this;if(m._resetErr(),!m._isValid())return!1;if(T=a()(T),isNaN(T))return u.D.Errors.InvalidIndex(m),u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1;if(T<0||T>=m._ImgManager.count())return u.D.Errors.IndexOutOfRange(m),u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1;var C=m._ImgManager.convertClientIndexToServerId(T);return-1==C?(u.D.Errors.IndexOutOfRange(m),u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1):m._isMobileMode()?m._asyncSetDPI(T,C,I,c,_,h,y,p):((T=1==m._innerFun("SetDPI",(0,s.dv)(C,I,c,_,h)))?u.D.isFunction(y)&&y():u.D.isFunction(p)&&p(m.ErrorCode,m.ErrorString),T)},f.MoveImage=function(l,I){return this._resetErr(),!!this._isValid()&&(l=a()(l),I=a()(I),isNaN(l)||isNaN(I)?(u.D.Errors.InvalidIndex(this),!1):l<0||l>=this._ImgManager.count()||I<0||I>=this._ImgManager.count()?(u.D.Errors.IndexOutOfRange(this),!1):this._ImgManager.MoveImage(l,I))},f.SwitchImage=function(l,I){return this._resetErr(),!!this._isValid()&&(l=a()(l),I=a()(I),isNaN(l)||isNaN(I)?(u.D.Errors.InvalidIndex(this),!1):l<0||l>=this._ImgManager.count()||I<0||I>=this._ImgManager.count()?(u.D.Errors.IndexOutOfRange(this),!1):this._ImgManager.SwitchImage(l,I))},f.CloseWorkingProcess=function(){return this._resetErr(),!!this._isValid()&&(this._isMobileMode()?this._mobileNotSupport("CloseWorkerProcess"):this._innerFun("CloseWorkerProcess"))},f.RemoveAllSelectedImages=function(){var l=this,I=l._isMobileMode();if(l._resetErr(),!l._isValid())return!1;var c=!0,_=l._ImgManager.getCurrentImageIndex(),h=l._ImgManager.getSelectedClientIndexArray(),y=[];return u.D.isArray(h)&&u.D.each(h,function(p){-1!=(p=l._ImgManager.convertClientIndexToServerId(p))&&y.push(p)}),0==y.length&&0<=_&&(h=l._ImgManager.convertClientIndexToServerId(_),y.push(h)),(c=I?c:l._innerFun("RemoveAllSelectedImages",(0,s.dv)(y.join(","))))&&(I||(l._HowManyImagesInBuffer=l._innerFun("HowManyImagesInBuffer")),u.D.each(y,function(p){var m="0";l._isMobileMode()&&(m="10"),l._OnBitmapChanged([m,""+p,3,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()])})),c},f.RemoveAllSelectedImagesAsync=function(){var l=this,I=l._isMobileMode();if(l._resetErr(),!l._isValid())return u.D.Promise.reject({code:l._errorCode,message:l._errorString});var c=l._ImgManager.getCurrentImageIndex(),_=l._ImgManager.getSelectedClientIndexArray(),h=[];return u.D.isArray(_)&&u.D.each(_,function(y){-1!=(y=l._ImgManager.convertClientIndexToServerId(y))&&h.push(y)}),0==h.length&&0<=c&&(_=l._ImgManager.convertClientIndexToServerId(c),h.push(_)),(I?u.D.Promise.resolve(!0):l._innerFunV2("RemoveAllSelectedImages",(0,s.dv)(h.join(","))).then(function(y){return y&&l._innerFunV2("HowManyImagesInBuffer").then(function(p){return l._HowManyImagesInBuffer=p,!0})})).then(function(y){y&&u.D.each(h,function(p){var m="0";l._isMobileMode()&&(m="10"),l._OnBitmapChanged([m,""+p,3,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()])})})},f.TagImages=function(l,I){var c=this;if(c._resetErr(),!c._isValid())return!1;var _=!0,h=c._ImgManager.getView().GetWebViewer().GetHowManyImagesInBuffer();return u.D.isArray(l)?u.D.isString(I)&&""!=I?(u.D.each(l,function(y){if(isNaN(y)||y<0||h<=y)return u.D.Errors.IndexOutOfRange(c),_=!1}),_&&c._ImgManager.AddImageTag(l,I)):(u.D.Errors.InvalidTagName(c),!1):(u.D.Errors.IndicesNotArray(c),!1)},f.ClearImageTags=function(l){return this._resetErr(),!!this._isValid()&&(-1==l||l>=this.HowManyImagesInBuffer?(u.D.Errors.IndexOutOfRange(this),!1):this._ImgManager.RemoveImageTag(l))},f.SetDefaultTag=function(l){return this._resetErr(),!!this._isValid()&&this._ImgManager.SetDefaultTag(l)},f.FilterImagesByTag=function(l,I,c){return this._resetErr(),!!this._isValid()&&this._ImgManager.ShowImagesByFilter(l,I,c)},f.ClearFilter=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.ClearFilter()},f.CreateDocument=function(l){return this._resetErr(),!!this._isValid()&&(l&&""!=l?u.D.isString(l)?this._ImgManager.CreateFile(l):(u.D.Errors.FileNameNotString(this),!1):(u.D.isNumber(l)?u.D.Errors.FileNameNotString(this):u.D.Errors.FileNameCannotEmpty(this),!1))},f.OpenDocument=function(l){return this._resetErr(),!!this._isValid()&&(l&&""!=l?u.D.isString(l)?this._ImgManager.OpenFile(l):(u.D.Errors.FileNameNotString(this),!1):(u.D.isNumber(l)?u.D.Errors.FileNameNotString(this):u.D.Errors.FileNameCannotEmpty(this),!1))},f.GetCurrentDocumentName=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetCurrentFileName()},f.RemoveDocument=function(l){var I=this._isMobileMode();return this._resetErr(),!!this._isValid()&&(I||(I=this._ImgManager.GetImageIdsByFileName(l),this._innerFun("RemoveAllSelectedImages",(0,s.dv)(I.join(",")))),this._ImgManager.RemoveFile(l))},f.RenameDocument=function(l,I){return this._resetErr(),!!this._isValid()&&(u.D.isString(l)&&u.D.isString(I)?l&&""!=l&&I&&""!=I?this._ImgManager.RenameFile(l,I):(u.D.Errors.FileNameCannotEmpty(this),!1):(u.D.Errors.FileNameNotString(this),!1))},f.GetDocumentInfoList=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetFileInfoList()},f._asyncInvert=function(l){var I=this,c=a()(l);return I._innerSendToMobileV2("Invert",(0,s.An)(c)).then(function(){v.refreshImageAfterInvokeFun(I,l)})},f.Invert=function(h,I,c){var _=this;if(h=a()(h),_._resetErr(),!_._isValid())return!1;if(isNaN(h))return u.D.Errors.InvalidIndex(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1;if(h<0||h>=_._ImgManager.count())return u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1;if(_._isMobileMode())return _._asyncInvert(h).then(I,function(){u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString)}),!0;var y=_._ImgManager.convertClientIndexToServerId(h);return-1==y?(u.D.Errors.IndexOutOfRange(_),u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1):((y=1==_._innerFun("Invert",(0,s.dv)(y)))?(v.refreshImageAfterInvokeFun(_,h),u.D.isFunction(I)&&I()):u.D.isFunction(c)&&c(_.ErrorCode,_.ErrorString),y)},f.InvertAsync=function(l){var I=this,c=a()(l);return I._resetErr(),I._isValid()?isNaN(c)?(u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):c<0||c>=I._ImgManager.count()?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._isMobileMode()?I._asyncInvert(c):-1==(l=I._ImgManager.convertClientIndexToServerId(c))?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("Invert",(0,s.dv)(l)).then(function(_){if(_=1==_)return v.refreshImageAfterInvokeFun(I,c),_;throw{code:I._errorCode,message:I._errorString}}):u.D.Promise.reject({code:I._errorCode,message:I._errorString})},f.RenameTag=function(l,I){return this._resetErr(),!!this._isValid()&&(u.D.isUndefined(l)?(u.D.Errors.ParameterCannotEmpty(this),!1):0==l.length?(u.D.Errors.OldTagNameRequired(this),!1):u.D.isUndefined(I)||0==I.length?(u.D.Errors.NewTagNameRequired(this),!1):this._ImgManager.RenameTag(l,I))},f.RemoveTag=function(l,I){return this._resetErr(),!!this._isValid()&&(u.D.isUndefined(l)||0==l.length?(u.D.Errors.ParameterCannotEmpty(this),!1):u.D.isUndefined(I)||u.D.isArray(I)?this._ImgManager.RemoveTag(l,I):(u.D.Errors.IndicesNotArray(this),!1))},f.GetTagList=function(){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetTagList()},f.GetTagListByIndex=function(l){return this._resetErr(),!!this._isValid()&&this._ImgManager.GetTagListByIndex(l)},f._registLoadCallback=function(l){return this._resetErr(),!!this._isValid()&&this._ImgManager.RegistLoadCallback(l)},f.GetImageBitDepthAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(I._isMobileMode())return c=I._ImgManager._UIView.GetMetaDataByIndex(l),u.D.Promise.resolve(a()(c.bitDepth));var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("GetImageBitDepth",(0,s.dv)(c))},f.GetImageWidthAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(I._isMobileMode())return c=I._ImgManager._UIView.GetMetaDataByIndex(l),u.D.Promise.resolve(a()(c.width));var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("GetImageWidth",(0,s.dv)(c))},f.GetImageHeightAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(I._isMobileMode())return c=I._ImgManager._UIView.GetMetaDataByIndex(l),u.D.Promise.resolve(a()(c.height));var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("GetImageHeight",(0,s.dv)(c))},f.GetImageSizeAsync=function(l,I,c){var _=this;return _._resetErr(),_._isValid()?_._isMobileMode()?_._mobileNotSupportAsync("GetImageSizeAsync"):(l=a()(l),isNaN(l)?(u.D.Errors.InvalidIndex(_),u.D.Promise.reject({code:_._errorCode,message:_._errorString})):l<0||l>=_._ImgManager.count()||-1==(l=_._ImgManager.convertClientIndexToServerId(l))?(u.D.Errors.IndexOutOfRange(_),u.D.Promise.reject({code:_._errorCode,message:_._errorString})):_._innerFunV2("GetImageSize",(0,s.dv)(l,I,c))):u.D.Promise.reject({code:_._errorCode,message:_._errorString})},f.GetImageSizeWithSpecifiedTypeAsync=function(l,I){var c=this;return c._resetErr(),c._isValid()?c._isMobileMode()?c._mobileNotSupportAsync("GetImageSizeWithSpecifiedTypeAsync"):(l=a()(l),isNaN(l)?(u.D.Errors.InvalidIndex(c),u.D.Promise.reject({code:c._errorCode,message:c._errorString})):l<0||l>=c._ImgManager.count()||-1==(l=c._ImgManager.convertClientIndexToServerId(l))?(u.D.Errors.IndexOutOfRange(c),u.D.Promise.reject({code:c._errorCode,message:c._errorString})):c._innerFunV2("GetImageSizeWithSpecifiedType",(0,s.dv)(l,I))):u.D.Promise.reject({code:c._errorCode,message:c._errorString})},f.GetImageXResolutionAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(I._isMobileMode())return c=I._ImgManager._UIView.GetMetaDataByIndex(l),u.D.Promise.resolve(a()(c.resolutionX));var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("GetImageXResolution",(0,s.dv)(c))},f.GetImageYResolutionAsync=function(l){var I=this;if(I._resetErr(),!I._isValid())return u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l=a()(l),isNaN(l))return u.D.Errors.InvalidIndex(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(l<0||l>=I._ImgManager.count())return u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString});if(I._isMobileMode())return c=I._ImgManager._UIView.GetMetaDataByIndex(l),u.D.Promise.resolve(a()(c.resolutionY));var c=I._ImgManager.convertClientIndexToServerId(l);return-1==c?(u.D.Errors.IndexOutOfRange(I),u.D.Promise.reject({code:I._errorCode,message:I._errorString})):I._innerFunV2("GetImageYResolution",(0,s.dv)(c))},f.ChangeBrightnessAsync=function(l,I){var c=this,_=a()(l);return c._isValid()?I<-1e3||1e3<I?(u.D.Errors.InvalidValue(c),u.D.Promise.reject({code:c._errorCode,message:c._errorString})):c._isMobileMode()?c._innerSendToMobileV2("ChangeBrightness",(0,s.An)(_,I)).then(function(){v.refreshImageAfterInvokeFun(c,l),c._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}):-1==(_=c._ImgManager.convertClientIndexToServerId(_))?(u.D.Errors.IndexOutOfRange(c),u.D.Promise.reject({code:c._errorCode,message:c._errorString})):c._innerFunV2("ChangeBrightness",(0,s.dv)(_,I)):u.D.Promise.reject({code:c._errorCode,message:c._errorString})},f.ChangeContrastAsnyc=function(l,I){var c=this,_=a()(l);return c._isValid()?I<-1e3||1e3<I?(u.D.Errors.InvalidValue(c),u.D.Promise.reject({code:c._errorCode,message:c._errorString})):c._isMobileMode()?c._innerSendToMobileV2("ChangeContrast",(0,s.An)(_,I)).then(function(){v.refreshImageAfterInvokeFun(c,l),c._ImgManager._UIView.GetWebViewer().clearSelectedAreas()}):-1==(_=c._ImgManager.convertClientIndexToServerId(_))?(u.D.Errors.IndexOutOfRange(c),u.D.Promise.reject({code:c._errorCode,message:c._errorString})):c._innerFunV2("ChangeContrast",(0,s.dv)(_,I)):u.D.Promise.reject({code:c._errorCode,message:c._errorString})}},4571:function(e,_,t){t.r(_);var r,a=t(9623),o=(_=t(4579),t.n(_)),u=(_=t(1006),t.n(_)),s=(_=t(7711),t.n(_)),f=(_=t(3662),t.n(_)),v=(_=t(6019),t.n(_)),l=(_=t(9104),t.n(_)),I=(_=t(9798),t.n(_)),c=t(1695),h=(_=t(5683),t.n(_));function y(){try{if("object"===(typeof WebAssembly>"u"?"undefined":(0,a.Z)(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var Ee=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(Ee instanceof WebAssembly.Module)return new WebAssembly.Instance(Ee)instanceof WebAssembly.Instance}}catch{}}function p(){c.I.WasmEnv&&(c.I.WasmEnv.useFastcompEdition=c.I.Lib.env.isWasmUseFastcomp(),c.I.DWT.WasmConfig&&(c.I.DWT.WasmConfig.fetchOptions&&(c.I.WasmEnv.fetchOptions=c.I.DWT.WasmConfig.fetchOptions),c.I.DWT.WasmConfig.maxHeapSize&&(c.I.WasmEnv.maxHeapSize=c.I.DWT.WasmConfig.maxHeapSize)))}function m(Ee,_e){var Ae,We=[c.I.DWT.ResourcesPath,"/src/dynamsoft.imageio.js",c.I.Lib.timestamp].join("");if(c.D.IsNeedLoadWasm()){if(!y())return void Ee();if(!c.D.detect.wasmScriptLoaded)return c.D.showLoadingMsg(-1,"",c.I.MSG.Init_DownloadingWasm),Ae=function($e){if(c.D.detect.wasmScriptLoaded=!0,p(),c.D.showLoadingMsg(-1,"",c.I.MSG.Init_CompilingWasm),c.D.License.isLTS())c.I.DWT.lglic(c.I.DWT.EnumInstance.dwt_browser).then(function(st){try{c.I.WasmEnv.load(st.ar,!0,st.cu),c.I.WasmEnv.wasmLoad=!0}catch{}Ee()},function(st){st&&(c.I.DWT.lsetException(st.code||st.ltsErrorCode,st.message),c.D.closeLoadingMsg(),c.I.DWT.OnLicenseException()),_e(st)});else{try{c.I.WasmEnv.load(c.I.DWT.ProductKey),c.I.WasmEnv.wasmLoad=!0}catch{}Ee()}},void(c.I.DWT.bNpm?Ae():c.D.getScript(We,!0,Ae))}else if(c.D.showLoadingMsg(-1,"",c.I.MSG.Init_InitDynamsoftService),!c.D.detect.wasmScriptLoaded&&!c.I.navInfoSync.bFileSystem&&c.I.DWT.UseCameraAddonWasm){if(!y())return void Ee();var pe=function($e){if(c.D.detect.wasmScriptLoaded=!0,p(),c.D.License.isLTS())c.I.DWT.lglic(c.I.DWT.EnumInstance.dwt_browser).then(function(st){try{c.I.WasmEnv.load(st.ar,!0,st.cu),c.I.WasmEnv.wasmLoad=!0}catch{}Ee()},function(st){st&&(c.I.DWT.lsetException(st.code||st.ltsErrorCode,st.message),c.D.closeLoadingMsg(),c.I.DWT.OnLicenseException()),_e(st)});else{try{c.I.WasmEnv.load(c.I.DWT.ProductKey),c.I.WasmEnv.wasmLoad=!0}catch{}Ee()}};return void(c.I.DWT.bNpm?pe():c.D.getScript(We,!0,pe))}Ee()}function T(){c.D.detect.scriptLoaded?new c.D.Promise(m).then(function(){r()}):o()(T,60)}function C(){return new c.D.Promise(function(Ee){r=Ee,o()(T,60)})}c.I.DWT.NeedCheckWebTwainBySocket=function(){return"localhost"!=(Ee=location.hostname)&&"127.0.0.1"!=Ee&&0!=h()(Ee).call(Ee,"192.168.")&&0!=h()(Ee).call(Ee,"172.16.")&&0!=h()(Ee).call(Ee,"10.")&&!c.I.navInfoSync.bSSL&&!!((c.I.navInfoSync.bChrome||c.I.navInfoSync.bEdge)&&94<=s()(c.I.navInfoSync.strBrowserVersion));var Ee},c.I.DWT.CheckWebTwainBySocket=function(Ee,_e,Ae){var We,pe,Ie=c.I.Lib.detect.urls;(We=Ie&&0<Ie.length?(Ie=Ie[0],c.I.Lib.getWS(Ie.host,Ie.port,Ie.ssl)):(pe=(Ie=c.I.navInfoSync.bSSL)?c.I.DWT.SSLPort:c.I.DWT.Port,c.I.Lib.getWS(c.I.Lib.product.host,pe,Ie))).onopen=function(){var $e;1==We.readyState?(We.onopen=null,$e=['{"id":"',(new Date).getTime(),'","method":"VersionInfo","version":"',c.I.Lib.product.getDWTPrefix(),c.I.Lib.product.getServerVersionInfo(),'"}'].join(""),We.send($e)):0==We.readyState&&o()(We.onopen,100)},We.onmessage=function($e){try{var st;We.close(),(0<=h()(st=$e.data).call(st,"Version not found")?_e:Ee)()}catch{Ae(),We.close()}},We.onerror=function(){Ae()}},c.I.DWT.IsLocalServiceConnected=function(){return new c.D.Promise(function(Ee,_e){var Ae,We=c.I.dcp.host;c.D.each(c.D.detect.ports,function(pe){c.I.navInfoSync.bSSL?pe.ssl&&(Ae=pe.port):pe.ssl||(Ae=pe.port)}),c.I.DWT.CheckConnectToTheService(We,Ae,function(pe,Ie,$e){Ee(!0)},function(){_e(!1)})})};var D=t(1255),S=c.I.navInfoSync,M=window,G=M.document,L=c.I.Lib.timestamp;function W(Ee){var _e,Ae,We,pe,Ie,$e,st;c.D.product.loadResourcePath||c.D.product.loadingResourcePath||((0<c.I.DWT.Port||0<c.I.DWT.SSLPort)&&(c.D.detect.ports=[{port:c.I.DWT.Port,ssl:!1},{port:c.I.DWT.SSLPort,ssl:!0}],c.D.LS.removeItem("DWT_port"),c.D.LS.removeItem("DWT_ssl")),c.D.isArray(c.I.DWT.licenseServer)?0<c.I.DWT.licenseServer.length&&(""!=(Ae=c.I.DWT.licenseServer[0])&&0!=h()(Ae).call(Ae,"https://mlts.dynamsoft.com")||(c.I.DWT.licenseServer=void 0)):c.I.DWT.licenseServer=void 0,c.D.isString(c.I.DWT.organizationID)&&""!=c.I.DWT.organizationID&&"undefined"!=c.I.DWT.organizationID||(c.I.DWT.organizationID=c.D.isNumber(c.I.DWT.organizationID)?""+c.I.DWT.organizationID:void 0),c.D.isString(c.I.DWT.handshakeCode)&&""!=c.I.DWT.handshakeCode&&"undefined"!=c.I.DWT.handshakeCode||(c.I.DWT.handshakeCode=c.D.isNumber(c.I.DWT.handshakeCode)?""+c.I.DWT.handshakeCode:void 0),c.D.isString(c.I.DWT.ProductKey)?""!=c.I.DWT.ProductKey&&"f"!=(Ae=c.I.DWT.ProductKey.charAt(0))&&"t"!=Ae&&(c.I.DWT.organizationID=c.I.DWT.ProductKey,c.I.DWT.ProductKey=void 0):c.I.DWT.ProductKey=void 0,Ae=D.LX,c.I.DWT.CertificateConfig?(c.D.isString((_e=c.I.DWT.CertificateConfig).URL)||(_e.URL=Ae.URL),(!c.D.isNumber(_e.UpdateDaysBeforeExpired)||_e.UpdateDaysBeforeExpired<=0)&&(_e.UpdateDaysBeforeExpired=Ae.UpdateDaysBeforeExpired)):c.I.DWT.CertificateConfig=Ae,_e=D.Vn,c.D.isString((Ae=c.I.DWT.CustomizableDisplayInfo).loaderBarSource)&&""!=Ae.loaderBarSource?c.D.loaderBarSource=Ae.loaderBarSource:S.bIE?c.D.loaderBarSourceIE=_e.loaderBarSource:c.D.loaderBarSource=_e.loaderBarSource,c.D.loaderBarClassName=c.D.isString(Ae.loaderBarClassName)&&""!=Ae.loaderBarClassName?Ae.loaderBarClassName:_e.loaderBarClassName,c.D.loaderBarBackgroundColor=c.D.isString(Ae.loaderBarBackgroundColor)?Ae.loaderBarBackgroundColor:_e.loaderBarBackgroundColor,c.D._safePromptCustomMsg(),c.D.each(c.D._funsAfterConfigLoaded,function(Nt){try{c.D.isFunction(Nt)&&Nt()}catch{}}),c.D.showLoadingMsg(-1,"",c.I.MSG.Init_LookingLicense),(pe=c.D.one(".dynamsoft_waiting").getEL())&&pe.parentNode&&pe.parentNode.removeChild(pe),pe=S.bFileSystem,Ie=c.D.env.basePath,We=c.I.DWT.ResourcesPath,c.D.product.loadResourcePath||c.D.product.loadingResourcePath||(c.D.product.loadingResourcePath=!0,pe||(0<(We=void 0!==We&&""!=We?We:Ie).length&&"/"==We.charAt(We.length-1)&&(We=We.substr(0,We.length-1)),c.I.DWT.ResourcesPath=We),pe=!0,Ie=[],st=[[c.I.managerEnv.resourcesPath=We,"/src/dynamsoft.webtwain.css",L].join("")],$e=function(){c.D.detect.cssLoaded=!0},c.D.product.bHTML5Edition&&c.I.DWT.UseDefaultViewer&&st.push([We,"/src/dynamsoft.viewer.css",L].join("")),S.bSafari?(c.D.getAllCss(st,$e),$e()):c.D.getAllCss(st,$e),S.bSafari&&(pe=!1),Ie.push([We,"/dynamsoft.webtwain.install.js",L].join("")),c.I.DWT.bNpm&&(Ie=[]),c.D.product.bHTML5Edition&&c.I.DWT.UseDefaultViewer&&Ie.push([We,"/src/dynamsoft.viewer.js",L].join("")),st=!1,!(st=c.I.navInfoSync.bIE?c.I.navInfoSync.strBrowserVersion<=7:st)&&c.D.License.isLTS()&&Ie.push([We,"/src/dynamsoft.lts.js",L].join("")),0<Ie.length&&c.D.showLoadingMsg(-1,"",c.I.MSG.Init_LoadingViewerJs),c.D.getScripts(Ie,pe,function(Nt){if(!Nt)return c.D.log("error: load js failed."),void(c.D.product.loadingResourcePath=!1);if(c.D.showLoadingMsg(-1,"",c.I.MSG.Init_AllJsLoaded),c.D.detect.scriptLoaded=!0,c.D.isString(c.I.DWT.Host)&&(c.I.dcp.host=c.I.DWT.Host,c.D.product.host=c.I.DWT.Host),c.D.product.bHTML5Edition?c.D.closeAll=c.D.html5.closeAll:c.D.product.bActiveXEdition&&(c.D.closeAll=c.D.ie.closeAll),c.D.isUndefined(c.I.DWT.UseLocalService)&&(c.I.DWT.UseLocalService=!c.D.env.bMobile),c.I.DWT._srcUseLocalService=c.I.DWT.UseLocalService,c.D.isArray(c.I.aryAddonReadyFun)){for(var Pt=0;Pt<c.I.aryAddonReadyFun.length;Pt++){var et=c.I.aryAddonReadyFun[Pt];if(c.D.isFunction(et))try{et(c.D)}catch(lt){c.D.log(lt.stack||lt,"error"),o()(function(){throw lt},0)}}c.I.aryAddonReadyFun=[]}c.D.product.loadResourcePath=!0,c.D.product.loadingResourcePath=!1,Ee||(c.I.Lib.detect.bAutoLoadDone=!0)})))}var F=[];function U(){if(c.D.isArray(c.I.DWT.Containers)){for(var Ee=F.length,_e=0;_e<Ee;_e++)F[_e]();f()(F).call(F,0)}else o()(U,60)}function H(){return new c.D.Promise(function(Ee){F.push(Ee),c.D.domReady(function(){o()(U,60)})})}c.D.domReady(function(){H().then(function(){0<c.I.DWT.Containers.length&&c.I.DWT.AutoLoad&&(W(!0),c.D.showLoadingMsg(-1,"",c.I.MSG.Init_FireBeforeInitEvt),c.I.DWT.OnWebTwainWillInit&&c.I.DWT.OnWebTwainWillInit(),o()(c.I.DWT._innerLoad,10))}),S.bIE&&M.addEventListener&&M.addEventListener("unload",c.I.DWT.Unload,!1),M&&(c.D.addEventListener(M,"focus",function(){var Ee=c.I.DWT.ContainerMap;Ee&&c.D.each(Ee,function(_e,Ae){_e&&_e._OnPageFocus&&_e._OnPageFocus()})}),c.D.addEventListener(M,"blur",function(){var Ee;c.I.navInfoSync.bWin&&(Ee=c.I.DWT.ContainerMap)&&c.D.each(Ee,function(_e,Ae){_e&&_e._OnPageBlur&&_e._OnPageBlur()})}),c.D.addEventListener(G,"visibilitychange",function(){var Ee;c.I.navInfoSync.bWin&&"hidden"==G.visibilityState&&(Ee=c.I.DWT.ContainerMap)&&c.D.each(Ee,function(_e,Ae){_e&&_e._OnPageBlur&&_e._OnPageBlur()})}))}),window.onbeforeunload=function(){c.I.DWT.Unload(),c.D.each(c.I.DWT.globalWS,function(Ee){try{Ee.close()}catch{}})};var Z=c.I.navInfoSync,X=c.I.dcp,$=c.D.win,fe=c.I.Lib.timestamp,je=function(_e,Ae,We,pe){c.D.isFunction(_e)&&o()(function(){_e(Ae,We,pe)},10)},Se={bConnected:!1,_dwtVersionInfoSuccessCallback:function(Ee,_e,Ae,We){var pe,Ie,$e,st;c.D.isFunction(We)&&(pe=Ae[0],st=1<Ae.length?Ae[1]:"",Ie=2<Ae.length?Ae[2]:0,$e=3<Ae.length?Ae[3]:"",Ae=4<Ae.length?Ae[4]:"",""!==st?(c.I.DWT.OnWebTwainInitMessage&&c.I.DWT.OnWebTwainInitMessage(st,c.I.DWT.EnumDWT_InitMsg.Error),je(We,2,c.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)):(c.I.DWT.OnWebTwainInitMessage&&c.I.DWT.OnWebTwainInitMessage("The WebTwain version is: "+pe,c.I.DWT.EnumDWT_InitMsg.Info),"64"==Ie&&(c.I.dcp.b64bit=!0),""!=$e&&c.I.DWT.lsmid($e),Se.bConnected=!0,We(0,Ee,_e,pe)),c.D.isFunction(c.I.OnSSLCertInfo)&&(st=null,""!=Ae&&(st=Date.parse(Ae+"T00:00:00"),st=isNaN(st)?null:new Date(st)),c.I.OnSSLCertInfo(st)))},versionInfo:function(Ee,_e,Ae){var We,Ie=['{"id":"',(new Date).getTime(),'","method":"VersionInfo","version":"',c.D.product.getDWTPrefix(),c.D.product.getServerVersionInfo(),'","parameter":[]}'].join(""),$e=function(){Se.bConnected=!1,c.I.DWT.OnWebTwainInitMessage&&c.I.DWT.OnWebTwainInitMessage(c.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED,c.I.DWT.EnumDWT_InitMsg.NotInstalledError),Ae&&je(Ae,2,c.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)};c.I.DWT.OnWebTwainInitMessage&&c.I.DWT.OnWebTwainInitMessage(c.I.DWT.CustomizableDisplayInfo.generalMessages.checkingDWTVersion,c.I.DWT.EnumDWT_InitMsg.Info),We=function(Nt){var Pt=X._getJSON(Nt);Pt&&"result"in Pt&&c.D.isArray(Pt=Pt.result)&&0<Pt.length?o()(function(){Se._dwtVersionInfoSuccessCallback(Ee,_e,Pt,Ae)},0):o()($e,1e3)},c.I.DWT.ConnectWithSocket&&c.I.navInfoSync.bHTML5Edition?X.postStringDataByWS(X.getWsUrl(Ee,_e),Ie,We,$e):c.D.ajax({method:"POST",url:[Se._getPreUrl(Ee,_e),"fa/VersionInfo?ts=",c.D.now()].join(""),data:Ie,onSuccess:We,onError:$e})},_getPreUrl:function(Ee,_e){return[c.I.navInfoSync.bSSL?"https://":"http://",Ee,":",_e,"/"].join("")}};function rt(){try{if("object"===(typeof WebAssembly>"u"?"undefined":(0,a.Z)(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var Ee=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(Ee instanceof WebAssembly.Module)return new WebAssembly.Instance(Ee)instanceof WebAssembly.Instance}}catch{}}function tt(Ee,_e,Ae,We,pe,Ie){var $e,st,Nt,Pt,et,lt,Ut=c.D.product,xt=c.I.navInfo;xt.bMac?(Ee&&(c.D.one(Ee).before(c.D.install._strNonInstallDIV),($e=c.D.get(c.D.install._divDWTNonInstallContainerID))&&($e.style.width=_e,$e.style.height=Ae),c.D.show(c.D.install._divDWTNonInstallContainerID),c.D.hide(Ee)),""!=c.D.install._divDWTemessageContainer&&c.D.hide(c.D.install._divDWTemessageContainer),st=Ut.bHTML5Edition?c.I.dcp.getDSPath():c.D.product.getPKGPath(),pe?c.D.isFunction(c.I.OnWebTwainNeedUpgradeCallback)&&c.I.OnWebTwainNeedUpgradeCallback(Ut.name,{default:st},Ut.bHTML5Edition,c.I.DWT.EnumDWT_PlatformType.enumMac,xt.bIE,xt.bSafari,c.D.detect.ssl,c.D.env.strIEVersion):c.D.isFunction(c.I.OnWebTwainNotFoundOnMacCallback)&&c.I.OnWebTwainNotFoundOnMacCallback(Ut.name,st,Ut.bHTML5Edition,xt.bIE,xt.bSafari,c.D.detect.ssl,c.D.env.strIEVersion,Ie)):xt.bLinux||xt.bArm64||xt.bMips64||xt.bChromeOS||xt.bHarmonyOS?(Ee&&(c.D.one(Ee).before(c.D.install._strNonInstallDIV),($e=c.D.get(c.D.install._divDWTNonInstallContainerID))&&($e.style.width=_e,$e.style.height=Ae),c.D.show(c.D.install._divDWTNonInstallContainerID),c.D.hide(Ee)),""!=c.D.install._divDWTemessageContainer&&c.D.hide(c.D.install._divDWTemessageContainer),et=xt.bArm64||xt.bMips64||xt.bChromeOS||xt.bHarmonyOS?(Nt=c.I.dcp.getDSPath(),xt.bChromeOS?c.I.DWT.EnumDWT_PlatformType.enumChromeOS:xt.bHarmonyOS?c.I.DWT.EnumDWT_PlatformType.enumHarmonyOS:c.I.DWT.EnumDWT_PlatformType.enumEmbed):(Nt=c.I.dcp.getLinuxHTML5DebPath(),Pt=c.I.dcp.getLinuxHTML5RpmPath(),c.I.DWT.EnumDWT_PlatformType.enumLinux),pe?c.D.isFunction(c.I.OnWebTwainNeedUpgradeCallback)&&(lt={default:Nt},xt.bLinux&&(lt.deb=Nt,lt.rpm=Pt),c.I.OnWebTwainNeedUpgradeCallback(Ut.name,lt,Ut.bHTML5Edition,et,xt.bIE,xt.bSafari,c.D.detect.ssl,c.D.env.strIEVersion)):c.D.isFunction(c.I.OnWebTwainNotFoundOnLinuxCallback)&&c.I.OnWebTwainNotFoundOnLinuxCallback(Ut.name,Nt,Pt,Ut.bHTML5Edition,xt.bIE,xt.bSafari,c.D.detect.ssl,c.D.env.strIEVersion,et,Ie)):(xt.bChrome||xt.bSafari||xt.bFirefox||xt.bOpera||0==c.I.DWT.IfUseActiveXForIE10Plus||!c.I.DWT.ActiveXInstallWithCAB&&xt.bIE)&&(Ee&&(c.D.one(Ee).before(c.D.install._strNonInstallDIV),($e=c.D.get(c.D.install._divDWTNonInstallContainerID))&&($e.style.width=_e,$e.style.height=Ae),c.D.show(c.D.install._divDWTNonInstallContainerID),c.D.hide(Ee)),""!=c.D.install._divDWTemessageContainer&&c.D.hide(c.D.install._divDWTemessageContainer),st="",st=xt.bIE||Ut.bHTML5Edition?c.I.dcp.getDSPath():Ut.getMSIPath(),pe?c.D.isFunction(c.I.OnWebTwainNeedUpgradeCallback)&&c.I.OnWebTwainNeedUpgradeCallback(Ut.name,{default:st},Ut.bHTML5Edition,c.I.DWT.EnumDWT_PlatformType.enumWindow,xt.bIE,xt.bSafari,c.D.detect.ssl,c.D.env.strIEVersion):c.D.isFunction(c.I.OnWebTwainNotFoundOnWindowsCallback)&&c.I.OnWebTwainNotFoundOnWindowsCallback(Ut.name,st,Ut.bHTML5Edition,xt.bIE,xt.bSafari,c.D.detect.ssl,c.D.env.strIEVersion,Ie))}c.D.replaceControl=function(Ee,_e){c.I.DWT.ContainerMap[Ee]=_e},c.D.detect.onNoControl=function(Ee,_e,Ae,We){We&&We._customIP&&!c.D.isLocalIP(We._host)?c.D.isFunction(c.I.OnRemoteWebTwainNotFoundCallback)&&c.I.OnRemoteWebTwainNotFoundCallback(c.D.product.name,We._host,We._port,We._ssl,c.D.env.bMobile):c.I.DWT.CheckWebTwainBySocket(function(){c.I.DWT.NeedCheckWebTwainBySocket()?c.D.isFunction(c.I.OnHTTPCorsError)&&c.I.OnHTTPCorsError():tt(Ee,_e,Ae,0,!1,!0)},function(){tt(Ee,_e,Ae,0,!0,!0)},function(){tt(Ee,_e,Ae,0,!1,!1)})},c.D.detect.getVersionArray=function(Ee){return Ee=Ee.toLowerCase().replace(c.D.product.name.toLowerCase()+" ",""),(Ee=u()(c.D).call(c.D,Ee,"[.]",",")).split(",")},c.D.detect.isDWTVersionLatest=function(Ee){if(c.D.isUndefined(Ee))return!1;Ee=Ee.toString().toLowerCase();for(var _e=c.D.detect.getVersionArray(Ee),Ae=(Ee=c.I.navInfoSync.bIE&&c.D.product.bActiveXEdition?c.I.DWT.ActiveXVersion:c.D.product.getServerVersionInfo(!0),(Ee=u()(c.D).call(c.D,String(Ee),"[.]",",")).split(",")),We=(_e.length>Ae.length?_e:Ae).length,pe=0;pe<We;pe++){if(null==_e[pe]&&(_e[pe]=0),null==Ae[pe]&&(Ae[pe]=0),s()(_e[pe])<s()(Ae[pe]))return!1;if(s()(_e[pe])>s()(Ae[pe]))return!0}return!0};var de,be=function(_e){var We;c.D.detect.bNeedUpgradeEvent||c.D.detect.isDWTVersionLatest(_e.VersionInfo)||(c.D.detect.bNeedUpgradeEvent=!0,c.D.isFunction(c.I.DWT.OnWebTwainNeedUpgrade)&&c.I.DWT.OnWebTwainNeedUpgrade()||(_e&&_e._customIP&&!c.D.isLocalIP(_e._host)?c.D.isFunction(c.I.OnRemoteWebTwainNeedUpgradeCallback)&&c.I.OnRemoteWebTwainNeedUpgradeCallback(c.D.product.name,_e._host,_e._port,_e._ssl):(c.D.product.bHTML5Edition&&_e._isBindViewer()||!c.D.product.bHTML5Edition)&&(c.D.product.bHTML5Edition?c.D.isString(We=_e._containerElement)&&(We=c.D.get(We)):We=c.D.get(_e._containerID),We&&(c.D.one(We).before(c.D.install._strNonInstallDIV),c.D.show(c.D.install._divDWTNonInstallContainerID),c.D.hide(We)),""!=c.D.install._divDWTemessageContainer&&c.D.hide(c.D.install._divDWTemessageContainer),function(_e,Ae){var We,pe,Ie,$e,st=c.I.navInfo;c.D.isFunction(c.I.OnWebTwainNeedUpgradeCallback)&&(We={},Ie=st.bWin?(pe=st.bIE||(pe=c.D.product).bHTML5Edition?c.I.dcp.getDSPath():pe.getMSIPath(),c.I.DWT.EnumDWT_PlatformType.enumWindow):st.bArm64||st.bMips64||st.bChromeOS||st.bHarmonyOS?(pe=Ie=c.I.dcp.getDSPath(),We.deb=Ie,st.bChromeOS?c.I.DWT.EnumDWT_PlatformType.enumChromeOS:st.bHarmonyOS?c.I.DWT.EnumDWT_PlatformType.enumHarmonyOS:c.I.DWT.EnumDWT_PlatformType.enumEmbed):st.bLinux?(Ie=c.I.dcp.getLinuxHTML5DebPath(),$e=c.I.dcp.getLinuxHTML5RpmPath(),pe=Ie,We.deb=Ie,We.rpm=$e,c.I.DWT.EnumDWT_PlatformType.enumLinux):(pe=c.D.product.bHTML5Edition?c.I.dcp.getDSPath():c.D.product.getPKGPath(),c.I.DWT.EnumDWT_PlatformType.enumMac),We.default=pe,($e=c.D.one(".dynamsoft-dialog-license"))&&$e.getEL()&&($e.getEL().style.display="none"),c.D.detect.needUpgrade=!0,c.I.OnWebTwainNeedUpgradeCallback(c.D.product.name,We,c.D.product.bHTML5Edition,Ie,st.bIE,st.bSafari,c.D.detect.ssl,c.D.env.strIEVersion,c.D.detect.bPromptJSOrServerOutdated,void 0,void 0))}())))},mt=function(_e){return!(""==_e||!c.D.isString(_e)&&!c.D.isNumber(_e))},Ce=function(_e){return!(!_e||c.D.isString(_e))},we=function(xt){var Ae,We,pe,Ie,$e,Ut=c.I.DWT.Containers,st=c.I.navInfo,Nt=c.D.Promise.resolve(0),Pt=c.I.DWT.licenseException;if(0<Ut.length){if(0==Pt.code&&$.DCP_DWT_OnClickCloseInstall(!1,!0),c.D.isUndefined(xt)){for(We=0;We<Ut.length;We++)if(c.D.product.bHTML5Edition){if(mt(pe=Ut[We].WebTwainId)&&($e=c.I.DWT.ContainerMap[pe]))break}else if(Ut[We].Container?Ie=Ut[We].Container:Ut[We].ContainerId&&(Ie=c.D.get(Ut[We].ContainerId)),Ce(Ie)&&Ie.id&&(($e=c.I.DWT.ContainerMap[Ie.id])||($e=c.I.DWT.ContainerMap[pe=Ut[We].WebTwainId])))break}else $e=xt;$e&&(c.D.product.bHTML5Edition?$e._bLocalService&&(Nt=$e._innerFunRawV2("LogLevel").then(function(){be($e)},function(){-2207==$e.ErrorCode&&(c.D.isFunction(c.I.DWT.OnWebTwainNeedUpgradeWebJavascript)?c.I.DWT.OnWebTwainNeedUpgradeWebJavascript($e.ErrorString):c.D.detect.bPromptJSOrServerOutdated||(c.D.detect.bPromptJSOrServerOutdated=!0)),be($e)})):be($e))}var et=[],lt=!1;for(c.D.License.isLTS()&&c.D.isNumber(Pt.code)&&0!==Pt.code&&!0===Pt.fromLTS&&(lt=!0),We=0;We<Ut.length;We++)c.D.product.bHTML5Edition?pe=Ut[We].WebTwainId:(Ae=c.I.DWT.ContainerMap[pe=Ut[We].ContainerId])||(pe=Ut[We].WebTwainId),(Ae=c.I.DWT.ContainerMap[pe])&&(lt?c.D.hide(c.D.product.bHTML5Edition?Ae._containerElement:Ae._containerID):c.D.product.bHTML5Edition?(Ae._isBindViewer()&&(Ae.Width<=0||Ae.Height<=0)&&(Ae.Width<=0&&(Ae.Width=270),Ae.Height<=0&&(Ae.Height=350)),Ae._bLocalService?et.push(de(Ae)):c.D.License.checkProductKey(Ae,{Core:!0})):(Ae.IfAllowLocalCache=!0,Ae.IfShowFileDialog=!0,Ae.IfDisableSourceAfterAcquire=!0,Ae.BrokerProcessType=c.D.product._iBrokerProcessType,0!=We||c.D.License.checkProductKey(Ae,{Core:!0})||c.D.License.checkProductKey(Ae,{Webcam:!0},!0)||c.D.License.checkProductKey(Ae,{Core:!0},!1,!0),st.bWin||(Ae.ImageCaptureDriverType=c.D.product._iImageCaptureDriverType))),Ae=null;0<et.length&&(Nt=Nt.then(function(){return c.I.Lib.Promise.all(et)})),Ut=null,"dwt"==(xt=c.I.initOrder)[0]&&f()(xt).call(xt,0,1),lt?(c.I.DWT.ContainerMap={},f()(Pt=c.D.detect.arySTwains).call(Pt,0),f()(xt=c.D.detect.arySTwainsByIP).call(xt,0)):Nt.then(function(){c.I.Lib.detect.bAutoLoadDone=!0,c.D.isFunction(c.I.DWT.OnWebTwainReady)?c.I.DWT.OnWebTwainReady():c.D.isFunction($.Dynamsoft_OnReady)&&$.Dynamsoft_OnReady()},function(wn){})},Ve=function(_e){var Ae;return _e.Container?Ae=_e.Container.id:_e.ContainerId&&(Ae=_e.ContainerId),!!Ce(c.D.get(Ae))&&!(c.D.isString(_e.WebTwainId)?c.I.DWT.ContainerMap[_e.WebTwainId]:c.I.DWT.ContainerMap[Ae])},bt=function(){c.D.detect.StartWSTimeoutId||0!=c.D.detect.arySTwains.length||(c.D.detect.StartWSTimeoutId=o()(function(){c.D.detect.StartWSTimeoutId=!1,c.D.startWS()},100))},At=function(){c.D.detect.StartWSByIPTimeoutId||0!=c.D.detect.arySTwainsByIP.length||(c.D.detect.StartWSByIPTimeoutId=o()(function(){c.D.detect.StartWSByIPTimeoutId=!1,c.D.startWSByIP()},100))};function St(){var Ee,_e,Ae,We,pe,Ie,$e,st=[c.I.DWT.Containers,c.I.DWT.DynamicContainers];for(c.I.DWT.lunload(),c.D.closeAll&&c.D.closeAll(),$e=c.I.DWT.ContainerMap,Ae=0;Ae<2;Ae++)if(_e=st[Ae])if(c.D.product.bHTML5Edition)for(We=0;We<_e.length;We++)(Ie=_e[We].WebTwainId)&&Ie in $e&&(pe=$e[Ie])&&(pe.__unload(),delete $e[Ie]);else for(We=_e.length-1;0<=We;We--)_e[We].Container?Ie=(pe=_e[We].Container).id:(Ie=_e[We].ContainerId)&&(pe=c.D.get(Ie)),pe&&(Ie in $e&&$e[Ie]&&delete $e[Ie],pe.innerHTML="");for(c.D.page.bUnload=!0,c.D.page.OnUnload&&c.D.page.OnUnload(),f()(Ee=c.I.DWT.initQueue).call(Ee,0),We=0;We<c.I.unloadQueue.length;We++){var Nt=c.I.unloadQueue[We];c.D.isFunction(Nt)&&Nt()}return f()(Ee=c.I.unloadQueue).call(Ee,0),f()(Ee=c.I.DWT.DynamicContainers).call(Ee,0),f()(Ee=c.D.detect.arySTwains).call(Ee,0),f()(Ee=c.D.detect.arySTwainsByIP).call(Ee,0),c.D.MobileFuns?c.D.MobileFuns.unloadWasm():c.D.Promise.resolve()}c.D.detect.__WebTwainMain=function(Ee,_e,Ae){var We,pe,Ie,$e,st,Nt,Pt={id:Ee.WebTwainId,width:Ee.Width,height:Ee.Height};if(Ee.Container?(Pt.container=Ee.Container,Pt.containerID=Ee.Container.id):Ee.ContainerId&&(Pt.container=c.D.get(Ee.ContainerId),Pt.containerID=Ee.ContainerId),mt(Pt.id)||(Pt.id=Ce(c.D.get(Pt.containerID))?Pt.containerID:Pt.containerID="dwtcontrolContainer"),function(_e){(_e=_e||{}).basePath&&(c.D.env.basePath=_e.basePath),_e.pathType&&(c.D.env.pathType=_e.pathType),c.D.isUndefined(_e.bDiscardBlankImage)||(c.D.config.bDiscardBlankImage=_e.bDiscardBlankImage),_e.msgPrefix&&(c.D.config.msgPrefix=_e.msgPrefix),_e.msgSuffix&&(c.D.config.msgSuffix=_e.msgSuffix),_e.detectType&&(c.D.detect.detectType=_e.detectType),_e.tryTimes&&(c.D.detect.tryTimes=_e.tryTimes),_e.onReady&&(c.I.DWT.OnWebTwainReady=_e.onReady)}(Pt),c.D.product.bHTML5Edition){for(c.D.mix(Pt,Ee.bLocalService?{port:Ee.port,HTTPPort:c.D.detect.ssl?443:80,bLocalService:!0}:{bLocalService:!1}),Pt.onReady=function(lt){c.D.replaceControl(Pt.id,lt),c.D.isFunction(_e)&&(lt={stwain:lt},Ae&&c.D.mix(lt,Ae),_e(lt))},We=0;We<c.D.detect.arySTwains.length;We++)Pt.id==(pe=c.D.detect.arySTwains[We])._id&&(Pt.id=Pt.id+"_"+c.D.getRandom()),!pe._containerElement||Pt.container!=pe._containerElement&&Pt.containerID!=pe._containerElement.id||(Pt.containerID="");return Pt.bNoViewer=!Ce(c.D.get(Pt.containerID)),Ee=new c.D.html5.STwain(Pt),c.D.detect.arySTwains.push(Ee),c.D.detect.bFirst&&c.D._init(Pt),c.D.detect.bFirst=!1,Ee}for(Pt.onPluginReady=function(){c.D.replaceControl(Pt.id,Ie.getInstance())},Pt.onPluginNotReady=function(){c.D.isFunction($.Dynamsoft_OnNotReady)&&$.Dynamsoft_OnNotReady()},Ie=new c.D.ie.DynamicWebTwain(Pt),st=0,$e=(Nt=c.I.DWT.Containers).length-1;0<=$e;$e--){var et=Nt[$e];et.Container?Ce(et.Container)&&st++:et.ContainerId&&Ce(c.D.get(et.ContainerId))&&st++}return c.D.detect.arySTwains.length==st&&(c.D.detect._varSeed=v()(c.D.detect._controlDetect,200)),Ie},c.I.DWT.Unload=function(){St();try{c.D.closeLoadingMsg(),c.I.DWT.CloseDialog(),c.D._zdgb_xkz_dhk(),c.D.closeProgress(null,""),c.D.hideMask()}catch{}};var Pe,ae=function Ee(){for(var _e=c.I.DWT.Containers,Ae=0;Ae<_e.length;Ae++){var We=void 0;if(Ce(c.D.get(_e[Ae].ContainerId))&&(We=_e[Ae].ContainerId,mt(_e[Ae].WebTwainId)&&(We=_e[Ae].WebTwainId)),We&&!c.I.DWT.ContainerMap[We])return void o()(Ee,200)}c.D.closeLoadingMsg(),_e=null,we()},Ze=function(_e){if(_e&&"readyObj"in _e){var Ae,We,pe=_e.readyObj;if(pe)return Ae=_e.stwain,We=pe.totalCount,pe.readyCount=pe.readyCount+1,void(pe.readyCount>=We&&we(Ae))}we(_e)},Ne=function(_e){var Ae;f()(Ae=c.D.detect.urls).call(Ae,0),c.D.detect.urls.push({port:_e,ssl:Z.bSSL}),c.D.detect.ports=[{port:_e,ssl:Z.bSSL}],c.D.detect.cUrlIndex=0,Z.bSSL?c.I.DWT.SSLPort=_e:c.I.DWT.Port=_e},Re=function(_e,Ae,We){var pe,Ie=c.I.DWT.Containers;if(c.D.config.usingMainMode)c.D.closeLoadingMsg();else{if(!Ie||0===Ie.length)return c.D.closeLoadingMsg(),void c.D.log("Dynamsoft.DWT.Containers was not set.");c.D.isString(_e)&&""!=_e&&(c.D.product.host=_e),X.bEnhancedMode&&Ne(Ae),bt();for(var $e={totalCount:Ie.length,readyCount:0},st=0;st<Ie.length;st++)Ce(c.D.get((pe=Ie[st]).ContainerId))||(pe.bNoViewer=!0),We?(pe.bLocalService=!1,pe.ip="",pe.port=0):(pe.bLocalService=!0,X.bEnhancedMode&&(pe.port=Ae)),c.D.detect.__WebTwainMain(pe,Ze,{readyObj:$e})}},Qe=function(_e){var Ae=_e.bNoViewer,We=_e.id,pe=_e.container,Ie=_e.containerID,$e=_e.port,st=!!((st=_e.host)&&$e&&0<$e)&&{host:st,port:$e},Nt=_e.asyncSuccessFunc,Pt=_e.asyncFailureFunc;if(_e.bNoViewer||c.D.isString(Ie)&&""!=Ie&&(pe||c.D.get(Ie))){if(c.I.DWT.Containers&&!Ae)for(var et=c.I.DWT.Containers,lt=0;lt<et.length;lt++)if(et[lt].ContainerId==Ie)return c.D.closeLoadingMsg(),c.D.isFunction(Pt)&&c.D._safePromptCustomMsg(function(){Pt(c.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_MustNotInContainers)}),!1;pe=pe||c.D.get(Ie)}else Ae=!0,Ie=0;return c.I.DWT.ContainerMap[We]?(c.D.closeLoadingMsg(),c.D.isFunction(Pt)&&Pt(c.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated),!1):_e.bLocalService||c.I.WasmEnv?((st?At:bt)(),$e={id:We,container:pe,customIP:!1,width:Ae?0:300,height:Ae?0:300,bNoViewer:Ae,bLocalService:_e.bLocalService},Ae||(pe.style.width&&($e.width=pe.style.width),pe.style.height&&($e.height=pe.style.height)),st&&($e.customIP=!0,$e.host=st.host,$e.port=st.port),$e.onReady=function(Ut){if($.DCP_DWT_OnClickCloseInstall(!1,!0),!Ut)return c.D.closeLoadingMsg(),c.D.isFunction(Pt)&&Pt(c.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_NotContainer),!1;if(c.I.DWT.ContainerMap[Ut._id])return c.D.closeLoadingMsg(),Ut.dispose(),c.D.isFunction(Pt)&&Pt(c.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated),!1;c.D.showLoadingMsg(-1,"",c.I.MSG.Init_ConfiguringDWT);var xt={};return xt.WebTwainId=Ut._id,Ut._containerElement&&Ut._containerElement.id&&(xt.ContainerId=Ut._containerElement.id),c.I.DWT.DynamicContainers.push(xt),c.I.DWT.ContainerMap[Ut._id]=Ut,!c.I.DWT.IfDisableDefaultSettings&&Ut._bLocalService?de(Ut).then(function(){c.D.closeLoadingMsg(),c.D.isFunction(Nt)&&Nt(Ut),be(Ut)},function(){c.D.closeLoadingMsg(),-2207!=Ut.ErrorCode||c.D.detect.bPromptJSOrServerOutdated||(c.D.detect.bPromptJSOrServerOutdated=!0),be(Ut)}):(c.D.closeLoadingMsg(),c.D.isFunction(Nt)&&Nt(Ut)),!0},new c.D.html5.CreateDWTObject($e)):(c.D.closeLoadingMsg(),c.D._safePromptCustomMsg(function(){Pt(c.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WasmEnvNotLoaded)}),!1)},ot=!(de=function(_e){return c.D.showLoadingMsg(-1,"",c.I.MSG.Init_ConfiguringDWT),_e._innerFunV2("IfDisableSourceAfterAcquire","[1]").then(function(){var Ae=c.I.navInfo,We=c.I.DWT.EnumDWT_Driver.TWAIN,pe=!1,Ie=!1;_e._bRemoteMode?_e.__serverPlatform!=c.I.DWT.EnumDWT_PlatformType.enumWindow&&(_e.__serverPlatform==c.I.DWT.EnumDWT_PlatformType.enumLinux?Ie=!0:_e.__serverPlatform==c.I.DWT.EnumDWT_PlatformType.enumMac&&(pe=!0)):(pe=Ae.bMac,Ie=Ae.bLinux),pe?We=c.I.DWT.EnumDWT_Driver.TWAIN_AND_ICA:Ie&&(We=c.I.DWT.EnumDWT_Driver.SANE),_e._driverType=We}).then(function(){(c.D.License.checkProductKey(_e,{Core:!0})||c.D.License.checkProductKey(_e,{Webcam:!0}))&&(c.I.DWT.lclex(),c.D.Errors.ClearErrorInfo(_e))})}),Lt=function(_e,Ae){return _e=_e.split(","),Ae=Ae.split(","),3<_e.length&&l()(c.D).call(c.D,_e[0])==Ae[0]&&(l()(c.D).call(c.D,_e[1])>Ae[1]||l()(c.D).call(c.D,_e[1])==Ae[1]&&l()(c.D).call(c.D,_e[2])>Ae[2]||l()(c.D).call(c.D,_e[1])==Ae[1]&&l()(c.D).call(c.D,_e[2])==Ae[2]&&s()(l()(c.D).call(c.D,_e[3]))>=s()(Ae[3]))};function Ot(){c.I.DWT.ShowMessage(c.I.MSG.Err_BrowserNotSupportWasm,{width:510,headerStyle:2})}function Bt(Ee,_e,Ae){if(!c.D.product.bHTML5Edition)return c.D._safePromptCustomMsg(function(){Ae&&Ae(c.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)}),!1;if(!1===Ee.UseLocalService&&!rt())return c.D.closeLoadingMsg(),Ot(),Ae&&Ae(c.I.MSG.Err_BrowserNotSupportWasm),!1;Pe();var We,pe,Ie={},$e=Ee.WebTwainId,st=Ee.Host,Nt=Ee.Port,Pt=Ee.PortSSL;if(!c.I.DWT._srcUseLocalService&&Ee.UseLocalService&&(c.D.detect.dcpStatus=0,c.I.DWT._srcUseLocalService=!0),Ee.Container?(Ie.container=Ee.Container,Ie.bNoViewer=!1,null!=(We=Ie.container.id)&&""!==We||(Ie.container.id=["dwt_",c.D.getRandom()].join("")),Ie.containerID=Ie.container.id,null!=$e&&""!==$e||(Ie.id=Ie.container.id)):null==$e||""===$e?(Ie.id=["dwt_",c.D.getRandom()].join(""),Ie.bNoViewer=!0):c.D.get($e)?(Ie.id=$e,Ie.containerID=$e,Ie.bNoViewer=!1):(Ie.id=$e,Ie.bNoViewer=!0),Ie.UseLocalService=Ee.UseLocalService,0==Ie.UseLocalService?(c.D.detect.bNeedWasm=!0,Ie.host="",Ie.port=0):(c.D.isString(st)&&""!=st||(st=c.I.dcp.host),Ie.host=st,Ie.port=Z.bSSL?Pt=Pt||c.I.DWT.SSLPort:Nt=Nt||c.I.DWT.Port),_e&&(Ie.asyncSuccessFunc=_e),Ae&&(Ie.asyncFailureFunc=Ae),c.D.detect.wasmScriptLoaded&&c.I.WasmEnv&&!c.I.WasmEnv.wasmLoad)if(p(),c.D.License.isLTS())pe=c.I.DWT.lglic(c.I.DWT.EnumInstance.dwt_browser).then(function(et){try{c.I.WasmEnv.load(et.ar,!0,et.cu),c.I.WasmEnv.wasmLoad=!0}catch{}},function(et){et&&(c.I.DWT.lsetException(et.code||et.ltsErrorCode,et.message),c.D.closeLoadingMsg(),c.I.DWT.OnLicenseException())});else{try{c.I.WasmEnv.load(c.I.DWT.ProductKey),c.I.WasmEnv.wasmLoad=!0}catch{}pe=I().resolve()}else pe=I().resolve();return pe.then(C).then(function(){en({callback:function(){Ie.bLocalService=!0,Qe(Ie)},docViewCallback:function(){Ie.bLocalService=!1,Qe(Ie)},host:Ie.host,port:Ie.port,UseLocalService:Ie.UseLocalService,dcpFailedCallback:function(et){Ie.asyncFailureFunc&&Ie.asyncFailureFunc(et),c.D.closeLoadingMsg()}})},function(){c.D.closeLoadingMsg()}),!0}c.I.DWT.Load=function(){ot||(ot=!0,c.D.openLoadingMsg(),c.I.Lib.detect.bAutoLoadDone?(W(),C().then(St).then(function(){if(c.I.DWT.CloseDialog(),c.I.Lib.detect.bNeedWasm=!1,c.I.Lib.detect.wasmScriptLoaded&&c.I.WasmEnv&&!c.I.WasmEnv.wasmLoad){if(c.I.Lib.License.isLTS())return void c.I.DWT.lglic(c.I.DWT.EnumInstance.dwt_browser).then(function(Ee){try{c.I.WasmEnv.load(Ee.ar,!0,Ee.cu),c.I.WasmEnv.wasmLoad=!0}catch{}je(c.I.DWT._innerLoad)},function(Ee){Ee&&(c.I.DWT.lsetException(Ee.code||Ee.ltsErrorCode,Ee.message),c.I.Lib.closeLoadingMsg(),c.I.DWT.OnLicenseException())});try{c.I.WasmEnv.load(c.I.DWT.ProductKey),c.I.WasmEnv.wasmLoad=!0}catch{}}je(c.I.DWT._innerLoad)},function(){c.D.closeLoadingMsg()})):c.I.Lib.product.bActiveXEdition||c.I.navInfoSync.bIE&&10==c.I.navInfoSync.strBrowserVersion?(W(),ot=!1,c.I.Lib.detect.bAutoLoadDone=!0,o()(c.I.DWT.Load,100)):H().then(function(){W(),ot=!1,c.I.Lib.detect.bAutoLoadDone=!0,o()(c.I.DWT.Load,100)}))},c.I.DWT.CheckConnectToTheService=function(Ee,_e,Ae,We){if(c.D.detect.scriptLoaded)if(c.D.product.bHTML5Edition){var pe=0,Ie=Ee,$e=_e,st=Ae,Nt=We;if(c.D.isFunction(Ie)&&c.D.isFunction($e)&&(st=Ie,Nt=$e,$e=Ie=null),Ie=Ie||c.I.dcp.host,!$e)for(pe=0;pe<c.I.Lib.detect.ports.length;pe++)if(c.I.navInfoSync.bSSL&&c.I.Lib.detect.ports[pe].ssl||!c.I.navInfoSync.bSSL&&!c.I.Lib.detect.ports[pe].ssl){$e=c.I.Lib.detect.ports[pe].port;break}Se.versionInfo(Ie,$e,function(Pt,et,lt,Ut){if(0===Pt&&Ut&&0<Ut.length&&Lt(Ut,c.D.product.getServerVersionInfo(!0)))return c.I.DWT.CloseDialog(),void(c.D.isFunction(st)&&st(et,lt));c.D.isFunction(Nt)&&Nt()},Nt)}else c.D.isFunction(We)&&We();else o()(function(){c.I.DWT.CheckConnectToTheService(Ee,_e,Ae,We)},500)},c.I.DWT.ConnectToTheService=c.I.DWT.Load,c.I.DWT.CreateDWTObject=function(Ee,_e,Ae,We,pe,Ie){var $e,st=pe,Nt=Ie;if(c.D.openLoadingMsg(),c.I.Lib.detect.bAutoLoadDone){if(W(),$e=c.D.isFunction(_e)&&c.D.isFunction(Ae)&&c.D.isUndefined(We)&&c.D.isUndefined(pe)&&c.D.isUndefined(Ie)?(st=_e,Nt=Ae,{WebTwainId:Ee}):{WebTwainId:Ee,Host:_e,Port:Ae,PortSSL:We},!c.D.product.bHTML5Edition)return c.D.isFunction(Nt)&&c.D._safePromptCustomMsg(function(){Nt(c.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)}),!1;var Pt=Ee;if(c.D.isShadowRoot(Pt)&&(lt=document.createElement("div"),Pt.appendChild(lt),Pt=lt),c.D.isDOM(Pt)){var et,lt=c.D.getShadowRoot(Pt);lt&&((et=document.createElement("style")).innerHTML=['@import url("',c.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",fe,'")'].join(""),lt.appendChild(et)),($e.Container=Pt).id&&""!=Pt.id||(Pt.id=["dwt_",c.D.getRandom()].join("")),$e.WebTwainId=Pt.id}else{if(!c.D.isString(Ee))return c.D.isFunction(Nt)&&Nt(c.D.Errors.container_id_not_string()),!1;if(!c.D.get(Ee))return c.D.isFunction(Nt)&&Nt(c.D.Errors.container_id_not_exist(Ee)),!1}return c.D.isUndefined($e.UseLocalService)&&($e.UseLocalService=c.D.isUndefined(c.I.DWT.UseLocalService)?!c.D.env.bMobile:c.I.DWT.UseLocalService),Bt($e,st,Nt)}c.I.Lib.domReady(function(){var Ut=c.I.DWT.Containers;c.D.isArray(Ut)&&0<Ut.length&&c.I.DWT.AutoLoad||W(),o()(function(){c.I.DWT.CreateDWTObject(Ee,_e,Ae,We,pe,Ie)},100)})},c.I.DWT.CreateDWTObjectEx=function(Ee,_e,Ae){var We=Ee.Container;if(c.D.openLoadingMsg(),c.I.Lib.detect.bAutoLoadDone){if(W(),c.D.isShadowRoot(We)&&(Ie=document.createElement("div"),We.appendChild(Ie),We=Ie),c.D.isDOM(We)){var pe,Ie=c.D.getShadowRoot(We);Ie&&((pe=document.createElement("style")).innerHTML=['@import url("',c.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",fe,'")'].join(""),Ie.appendChild(pe)),Ie==We&&(We=document.createElement("div"),Ie.appendChild(We),Ee.Container=We),We.id&&""!=We.id||(We.id=["dwt_",c.D.getRandom()].join("")),c.D.isString(Ee.WebTwainId)||(Ee.WebTwainId=We.id)}else if(!c.D.isString(Ee.WebTwainId))return Ae&&Ae(c.D.Errors.webtwain_id_not_string()),!1;return c.D.isUndefined(Ee.UseLocalService)&&(Ee.UseLocalService=c.D.isUndefined(c.I.DWT.UseLocalService)?!c.D.env.bMobile:c.I.DWT.UseLocalService),Bt(Ee,_e,Ae)}c.I.Lib.domReady(function(){var $e=c.I.DWT.Containers;c.D.isArray($e)&&0<$e.length&&c.I.DWT.AutoLoad||W(),o()(function(){c.I.DWT.CreateDWTObjectEx(Ee,_e,Ae)},100)})},Pe=function(){var _e=c.I.initOrder,Ae=!1;if(_e){for(var We=0;We<_e.length;We++)if("dwt"==_e[We]){Ae=!0;break}Ae||_e.push("dwt")}};var Ft=function(_e,Ae){c.D.isLocalIP(_e)&&(c.D.LS.item("DWT_port",Ae),c.D.LS.item("DWT_ssl",Z.bSSL?"true":"false"))},Kt=function(_e,Ae,We){var pe,Ie,st=function(_e){var Ae="",We="",pe=c.I.navInfo,Ie=pe.bMac?"mac/MacDWT_":pe.bLinux?"linux/LinuxDWT_":"win/WinDWT_";return Z.bFileSystem||(Ae="?t="+c.D.getRandom()),0<_e.length&&"/"!=_e[_e.length-1]&&(_e+="/"),pe.bWin&&X.b64bit&&(We="_x64"),[_e,"dist/",Ie,c.D.product.getServerVersionInfo(),We,".zip",Ae].join("")}(c.I.DWT.ResourcesPath);pe=function(Pt){X.loadZip(Pt,0,function(){var lt=c.I.navInfo;if(c.D.closeLoadingMsg(),c.D.isFunction(c.I.OnWebTWAINDllDownloadSuccessful)&&c.I.OnWebTWAINDllDownloadSuccessful(),c.I.DWT.OnWebTwainInitMessage){if(Z.bSSL&&lt.bFirefox)return void c.I.DWT.OnWebTwainInitMessage(c.I.DWT.CustomizableDisplayInfo.generalMessages.refreshNeeded,c.I.DWT.EnumDWT_InitMsg.DownloadNotRestartError);c.I.DWT.OnWebTwainInitMessage(c.I.DWT.CustomizableDisplayInfo.generalMessages.DWTmoduleLoaded,c.I.DWT.EnumDWT_InitMsg.Info)}o()(Ae,3e3)},Ie)},Ie=function(Pt){var et;c.D.closeLoadingMsg(),c.I.DWT.OnWebTwainInitMessage&&c.I.DWT.OnWebTwainInitMessage(et=c.I.DWT.CustomizableDisplayInfo.errorMessages.ERR_DWT_NOT_DOWNLOADED,c.I.DWT.EnumDWT_InitMsg.DownloadError),c.D.isFunction(c.I.OnWebTWAINDllDownloadFailure)&&(et={},404==Pt.httpCode?c.D.Errors.WebTwainModuleNotExist(et):c.D.Errors.WebTwainModuleDownloadFailure(et),c.I.OnWebTWAINDllDownloadFailure(c.D.product.name,et._errorCode,et._errorString)),c.D.detect.dcpStatus=3,c.D.isFunction(_e.dwtFailedCallback)&&_e.dwtFailedCallback()},c.I.DWT.OnWebTwainInitMessage&&c.I.DWT.OnWebTwainInitMessage(c.I.DWT.CustomizableDisplayInfo.generalMessages.downloadingDWTModule,c.I.DWT.EnumDWT_InitMsg.Info),c.D.fetch(st,{mode:"cors",dataType:"arraybuffer"}).then(pe,Ie)},tn=function Ee(_e,Ae,We){var pe,Ie=_e.host,$e=_e.port;if(!1===_e.UseLocalService)return c.D.showLoadingMsg(-1,"",c.I.MSG.Init_CreatingDWT),c.D.detect.dcpStatus=2,Ft("",0),void je(_e.docViewCallback);c.D.showLoadingMsg(-1,"",c.I.MSG.Init_CheckDWT),pe=0<We?We+1:1,$e||c.D.each(c.D.detect.ports,function(st){Z.bSSL?st.ssl&&($e=st.port):st.ssl||($e=st.port)}),c.D.showLoadingMsg(-1,"",c.I.MSG.Init_CheckDWTVersion),Se.versionInfo(Ie,$e,function(st,Nt,Pt,et){if(0===st&&et&&0<et.length&&Lt(et,c.D.product.getServerVersionInfo(!0)))return c.D.detect.dcpStatus=2,Ft(Nt,Pt),c.D.showLoadingMsg(-1,"",c.I.MSG.Init_CreatingDWT),void(c.D.isFunction(_e.callback)&&_e.callback(Nt,Pt));Ae?3<pe?(c.D.closeLoadingMsg(),c.D.detect.dcpStatus=3,c.D.isFunction(_e.dwtFailedCallback)&&_e.dwtFailedCallback({code:st,message:Nt})):o()(function(){Ee(_e,!0,pe)},1e3):c.I.DWT.IfInstallDWTModuleWithZIP?Kt(_e,function(){Ee(_e,!0,pe)}):(c.D.closeLoadingMsg(),c.D.detect.dcpStatus=3,c.D.isFunction(_e.dwtFailedCallback)&&_e.dwtFailedCallback({code:st,message:Nt}))})},en=function(Ee){var _e=c.I.initOrder,Ae=!1;if(0<_e.length&&"dwt"===_e[0]){var We=function($e){c.I.DWT.OnWebTwainInitMessage&&c.I.DWT.OnWebTwainInitMessage(c.I.DWT.CustomizableDisplayInfo.generalMessages.downloadNeeded,c.I.DWT.EnumDWT_InitMsg.Info),c.D.isLocalIP(Ee.host)?c.D.isFunction(c.D.detect.onNoControl)&&c.D.detect.onNoControl():c.D.isFunction(c.I.OnRemoteWebTwainNotFoundCallback)&&c.I.OnRemoteWebTwainNotFoundCallback(c.D.product.name,Ee.host,Ee.port,Z.bSSL,c.D.env.bMobile),c.D.isFunction(Ee.dcpFailedCallback)&&(Ee.dcpFailedCallback($e),c.I.DWT.ConnectToTheService=function(){en(Ee)})};if(!c.I.DWT.IfCheckDCP||0==Ee.UseLocalService)return Ee.dwtFailedCallback||(Ee.dwtFailedCallback=We),void tn(Ee,!1,0);var pe=function(lt){var $e,st,Nt,Pt=1,et=c.I.navInfoSync;if(c.I.navInfoSync.bWin&&3<(Pt=0<lt?lt+1:1))return pe=null,c.D.closeLoadingMsg(),c.D.detect.dcpStatus=3,void(c.D.isFunction(Ee.dwtFailedCallback)&&Ee.dwtFailedCallback());if(!Ae)return Ee.dwtFailedCallback||(Ee.dwtFailedCallback=function(){var xt,wn,Ln=c.I.navInfoSync;c.D.closeLoadingMsg(),c.D.isFunction(c.I.OnWebTWAINModuleDownloadManually)&&(wn=Ln.bLinux?(xt=c.I.DWT.EnumDWT_PlatformType.enumLinux,{default:c.I.dcp.getLinuxHTML5DebPath(),deb:c.I.dcp.getLinuxHTML5DebPath(),rpm:c.I.dcp.getLinuxHTML5RpmPath()}):(xt=Ln.bMac?c.I.DWT.EnumDWT_PlatformType.enumMac:c.I.DWT.EnumDWT_PlatformType.enumWindow,{default:c.I.dcp.getDSPath()}),c.I.OnWebTWAINModuleDownloadManually(wn,xt,Ln.bIE,Ln.bSafari,c.D.detect.ssl,c.D.env.strIEVersion))}),X.bEnhancedMode?($e=0,X.getPorts(X.strSID,Nt=function(xt){var wn;return c.D.isArray(xt)&&1<xt.length&&(c.D.closeLoadingMsg(),(xt=xt[1])&&(X.currentUserPorts=xt).dwt)?(wn=xt.dwt.port,xt=xt.dwt.sslPort,0==wn||0==xt?c.I.dcp.bEnhancedMode?(o()(function(){X.getPorts(X.strSID,Nt,st)},800),!0):5<++$e?(pe(Pt),!1):(o()(function(){X.getPorts(X.strSID,Nt,st)},300),!0):(Ee.port=et.bSSL?xt:wn,Ne(Ee.port),tn(Ee,!1,0),!0)):c.I.DWT.IfInstallDWTModuleWithZIP?(Kt(Ee,function(){pe(Pt)}),!0):(c.D.detect.dcpStatus=3,void(c.D.isFunction(Ee.dwtFailedCallback)&&Ee.dwtFailedCallback()))},st=function(){if(c.D.closeLoadingMsg(),c.I.DWT.IfInstallDWTModuleWithZIP)return Kt(Ee,function(){pe(Pt)}),!0;c.D.detect.dcpStatus=3,c.D.isFunction(Ee.dwtFailedCallback)&&Ee.dwtFailedCallback()})):(pe=null,tn(Ee,!1,0)),!0;var Ut=500;(lt=c.D.install._dlgInstall)&&lt.open||(Ae=!1,Ut=0),o()(pe,Ut)};c.I.managerEnv.IfUpdateService=c.I.DWT.IfUpdateService,X.host=Ee.host,X.checkDcpV3(c.I.DWT.ProductKey,We,pe)}else c.D.env.stopCheckingForService||o()(function(){en(Ee)},1e3)};c.I.DWT._innerLoad=function(){var Ee,_e;if(c.D.page.bUnload=!1,c.D.License.isLTS()&&c.D.isString(c.I.DWT.ProductKey))return _e=c.I.DWT.licenseException,c.D.Errors.LongKeyShortKeyMixed(Ee={}),_e.code=Ee._errorCode,_e.message=Ee._errorString,_e.fromLTS=!1,c.D.closeLoadingMsg(),void c.I.DWT.ShowMessage(_e=Ee._errorString,{width:510,headerStyle:2});for(var Ae,We,pe=c.I.DWT.Containers,Ie=[],$e=0;$e<pe.length;$e++)if(We=pe[$e],c.D.product.bHTML5Edition){var st,Nt,Pt=We.Container;for(c.D.isShadowRoot(Pt)&&(st=document.createElement("div"),Pt.appendChild(st),Pt=st),c.D.isDOM(Pt)&&((st=c.D.getShadowRoot(Pt))&&((Nt=document.createElement("style")).innerHTML=['@import url("',c.I.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",fe,'")'].join(""),st.appendChild(Nt)),Pt.id&&""!=Pt.id||(Pt.id=["dwt_",c.D.getRandom()].join("")),We.ContainerId=Pt.id),(c.D.isString(We.WebTwainId)||c.D.isNumber(We.WebTwainId))&&""!=We.WebTwainId||(We.WebTwainId=c.D.isString(We.ContainerId)&&""!=We.ContainerId?We.ContainerId:["dwt_",c.D.getRandom()].join("")),Ae=0;Ae<Ie.length;Ae++)if(We.WebTwainId==Ie[Ae]){We.WebTwainId=We.WebTwainId+"_"+c.D.getRandom();break}Ie.push(We.WebTwainId)}else!c.D.isString(We.WebTwainId)||c.D.isString(We.ContainerId)&&""!=We.ContainerId||(We.ContainerId=We.WebTwainId);if(c.D.product.bHTML5Edition){if(c.D.IsNeedLoadWasm()){if(!rt())return c.D.closeLoadingMsg(),void Ot();c.D.detect.bNeedWasm=!0,c.D.showLoadingMsg(-1,"",c.I.MSG.Init_InitWasm)}else c.D.showLoadingMsg(-1,"",c.I.MSG.Init_InitH5);Pe(),C().then(function(){var et=!0;c.D.isString(c.I.DWT.Host)&&(X.host=c.I.DWT.Host),c.D.IsNeedLoadWasm()&&(et=!1),en({callback:Re,docViewCallback:function(){Re("",0,!0)},host:X.host,UseLocalService:et}),ot=!1},function(){c.D.closeLoadingMsg(),ot=!1})}else c.D.showLoadingMsg(-1,"",c.I.MSG.Init_InitActiveX),function(){if(c.D.config.usingMainMode)c.D.closeLoadingMsg();else{var _e,Ae=c.I.DWT.Containers;if(!1===Ae||0===Ae.length)return c.D.log("Dynamsoft.DWT.Containers was not set."),void c.D.closeLoadingMsg();for(_e=0;_e<Ae.length;_e++){var We=Ae[_e];Ve(We)&&c.D.detect.__WebTwainMain(We)}o()(ae,100)}}(),ot=!1},c.I.DWT.DeleteDWTObject=function(Ee){var _e,Ae,We,pe=c.I.DWT.ContainerMap;if(!c.D.product.bHTML5Edition)return!1;for((pe&&Ee in pe&&(Ae=pe[Ee])&&(delete pe[Ee],Ae.__unload()),_e=0);_e<c.I.DWT.DynamicContainers.length;_e++)if(c.I.DWT.DynamicContainers[_e].WebTwainId==Ee){f()(We=c.I.DWT.DynamicContainers).call(We,_e,1);break}return c.D.closeLoadingMsg(),!0},c.I.DWT.GetWebTwain=function(Ee){var _e,Ae,We,pe=Ee,Ie=c.I.DWT.Containers;if(c.D.isString(pe))pe=c.D.get(pe);else if(!c.D.isDOM(pe)&&!pe&&Ie&&0<Ie.length)for(Ae=0;Ae<Ie.length;Ae++){if(Ie[Ae].Container){pe=Ie[Ae].Container;break}if(Ie[Ae].ContainerId&&Ce(c.D.get(Ie[Ae].ContainerId))){pe=c.D.get(Ie[Ae].ContainerId);break}}var $e=c.I.DWT.ContainerMap;if(pe&&$e&&Ie&&0<Ie.length)for(Ae=0;Ae<Ie.length;Ae++)if(We=!1,(_e=Ie[Ae]).Container){if(_e.Container==pe&&(We=mt(_e.WebTwainId)?_e.WebTwainId:_e.Container.id)&&We in $e)return $e[We]}else if(_e.ContainerId&&_e.ContainerId==pe.id&&(We=mt(_e.WebTwainId)?_e.WebTwainId:_e.ContainerId)&&We in $e)return $e[We];return c.I.DWT.GetWebTwainEx(Ee)},c.I.DWT.GetWebTwainEx=function(Ee){var _e,Ae=Ee,We=c.I.DWT.DynamicContainers;if(c.D.isDOM(Ae))Ae=Ae.id;else if(!Ae&&We&&0<We.length)for(_e=0;_e<We.length;_e++)if(mt(We[_e].WebTwainId)){Ae=We[_e].WebTwainId;break}return We=null,Ae&&(Ee=c.I.DWT.ContainerMap)&&Ae in Ee?Ee[Ae]:null}},6045:function(e,a,t){t.r(a),a=t(5683);var r=t.n(a),o=(a=t(7711),t.n(a)),u=t(1695),s=u.I.navInfo,f=document;function v(y){var I,c,_,h=this;h._containerID=(y=y||{}).containerID||"dwtcontrolContainer",h._strWidth=y.width||270,h._strHeight=y.height||350,u.D.isString(h._strWidth)&&0<r()(I=h._strWidth).call(I,"%")||(h._strWidth=[o()(h._strWidth),"px"].join("")),u.D.isString(h._strHeight)&&0<r()(I=h._strHeight).call(I,"%")||(h._strHeight=[o()(h._strHeight),"px"].join("")),h._strObjectName=h._containerID+"_Obj",c=h,(_=y)&&u.I.Lib.each(["onAfterOperate","onBeforeOperate","onOperateStatus","onBitmapChanged","onGetFilePath","onImageAreaDeSelected","onImageAreaSelected","onMouseClick","onMouseDoubleClick","onMouseMove","onMouseRightClick","onPreAllTransfers","onPreTransfer","onPostLoad","onPostTransfer","onPostTransferAsync","onPreAllTransfersAsync","onPostAllTransfers","onSourceUIClose","onTopImageInTheViewChanged","onTransferCancelled","onTransferError","onInternetTransferPercentage","onInternetTransferPercentageEx","onRemoteScanStatusAsync","onKeyDown","onMouseWheel"],function(p){c["__O"+p.substring(1)]=_[p]||""}),h.__OnPluginReady=y.onPluginReady,h.__OnPluginNotReady=y.onPluginNotReady,h.__OnRefreshUI=y.onRefreshUI||"",h._objectWebTwain=null,h._strDWTInnerContainerID=h._containerID+"_CID",h._strDWTNonInstallInnerContainerID=h._containerID+"_NonInstallCID",h.Addon={},h._pdfConvertMode=3,h._pdfRealConvertMode=3,u.D.UI.DWTAxViewer&&(h.Viewer=new u.D.UI.DWTAxViewer(h))}(a=v.prototype).getSWebTwain=function(){return this._objectWebTwain},a._isMobileMode=function(){return!1},a.getInstance=function(){return!!this._objectWebTwain&&this},a._createControl=function(){var l,I=this,c=I._strWidth,_=I._strHeight;u.D.isString(c)&&(c=0<r()(c).call(c,"%")?"100%":o()(c)+2+"px"),u.D.isString(_)&&(_=0<r()(_).call(_,"%")?"100%":o()(_)+2+"px"),_=['<div id="',I._strDWTInnerContainerID,'" style="width:',c,";height:",_,'">'],s.bIE?u.I.DWT.ActiveXInstallWithCAB?_.push('<object id="',I._strObjectName,'" style="width:',I._strWidth,";height:",I._strHeight,';border:1px solid #AAAAAA"',' codebase="',s.bWin64?u.D.product.getActiveXCABx64Path():u.D.product.getActiveXCABx86Path(),"#version=",u.I.DWT.ActiveXVersion,'"',' classid="clsid:',u.D.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>"):_.push('<object id="',I._strObjectName,'" style="width:',I._strWidth,";height:",I._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',u.D.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>"):(u.D.isString(l=I._strWidth)&&-1==r()(l).call(l,"%")&&(l=o()(l)-2+"px"),_.push('<embed id="',I._strObjectName,'" style="display: inline; width:',l,";height:",I._strHeight,'" type="',u.D.product.strMIMEType,'"',' pluginspage="',s.bWin?u.D.product.getMSIPath():u.D.product.getPKGPath(),'"></embed>')),_.push('</div><div id="',I._strDWTNonInstallInnerContainerID,'" style="width: ',c,';display:none"></div>'),(l=u.D.get(I._containerID))&&(l.innerHTML=_.join("")),I._objectWebTwain=u.D.get(I._strObjectName)},a._createNonAllowedDivPlugin=function(){var l=this,I=u.D.get(l._strDWTNonInstallInnerContainerID);if(""==I.innerHTML){var c=(u.D.isString(c=l._strHeight)&&-1==r()(c).call(c,"%")&&(c=o()(c)-10+"px"),['<div style="display: block; border:1px solid black; width:',l._strWidth,";height:",c,'">','<div style="margin: 200px 0 0 0; padding: 5px; font-size: 16px;line-height: 30px; ">',"<div>The Component is not allowed to run on this site.</div>",'<div>Please click <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJeSURBVDhPvZRNSxthEMeX0mNpKS09tP04tdBqobT9WCGJ5kU9pIk5xB4KaoJGmoiNMS+IUiqNB08mjUoUN2vU3WyS9d+ZIbvEZREP0j8Mk5ln5sfs7jxRcM/6f8BKpYKZmRlEIhGUSiUYhjE8uV2eQIal0xmobQ3aeQc/CwWUy+Xh6e3yBM7OzuJMbcPs9cUYzNPeRQLc29tDKpVCOBx2LJ3JQDe66Jo9fI3HEY1GnTOurdVqAnBLgFxwcNBAp3N5w0yTJiTTtA5UVXPy9XpDerwkwOnpaZydtWma/p3s8OgYcZraSwIMhULoXFx6NntZvf4XyWRSAG45QO38wrO51x/Asq7F27nbJMBEIoFm8wiLS0uYm0s6j88QfXUF6ucJXNMe2lAWx+qXD3I+KgHu7OwgEAjI/q2vr2N5eUUaebIWwRovFLTG38AaQtlzLPlP4wKyJcB8Pi83IpfLoVqtYmFh0ZnQ0nU0qHn/uSJ+0G7fiPl8VAL0+/20cyZdsTLm57+hdXIqQAdKE+1T869nCnZfK+I5dsNYAgwGg7i8MhwIG8cbG0Wafo1+X6FPk5VfPUDxqSK+r6oCcEuAU1NT0GhhDQLZVtwsIZvNShFPuDX+FqtPFORfPhS/9X5M8m4JkO/pyakKo0uwof3e/SMF3FQg2PfHCgoEMWlS9nbshgqQt755eIwr3RTYOV+vRlMK1j5OIPlIwY93YxgM39mAIBxzns9HJcDt7W3EYjH5OD6fD5OTk7KbrDo99go12TBbDOV8Peuxh5Zl0Z8ATUdFOjWy55jztt1VArw/Af8A9+n0bhYJ0I4AAAAASUVORK5CYII="/>','at the right end of the address bar and click "<b>Always allow plug-ins</b>". Then refresh/restart the browser.</div>',"</div></div>"].join(""));I.innerHTML=c;for(var _=0;_<f.links.length;_++)"DWT_CloseNonAllowedDiv"==f.links[_].className&&(f.links[_].onclick=h)}function h(){u.D.get(l._strDWTNonInstallInnerContainerID).style.display="none",u.D.get(l._strDWTInnerContainerID).style.display="inline"}},u.D.detect._controlDetect=function(){var l,I,c,_,h=u.D.detect.arySTwains,y=h[0],p=y&&y._objectWebTwain;p?(l=u.I.DWT,I=!1,s.bIE?(_=!s.bOSx64||s.bWOW64?"DynamicPdfCore_"+l.PdfVersion+".dll":"DynamicPdfCorex64_"+l.PdfVersion+".dll",0==p.ErrorCode&&""!=p.GetAddOnVersion("pdf",_)&&(I=!0)):0==p.ErrorCode&&(I=!0),I?(clearInterval(u.D.detect._varSeed),c=function(T,C,D){for(var S,M=0;M<h.length;M++)u.D.attachProperty(S=h[M]),u.D.attachMethod(S),S._attachEvents(),u.D.detect.ssl&&(S.IfSSL=!0,S.HTTPPort=443),0==T?(S.GetLicenseInfo(C),S._setConvertMode(S._pdfConvertMode)):(S._blts=!0,""!=C&&""!=D?(S.SetLTSInfo(C,D),S._setConvertMode(S._pdfConvertMode),S.GetLicenseInfo().then(function(G){u.I.DWT.lcheckLic(u.I.DWT.EnumInstance.dwt_desktop,G)})):S.__licenseInfo={LTS:!0,Detail:[]},u.I.DWT.laddDWTObj(S)),u.D.attachAddon(S),S._objectWebTwain.BrokerProcessType=u.D.product._iBrokerProcessType,s.bWin||(S._objectWebTwain.ImageCaptureDriverType=u.D.product._iImageCaptureDriverType),u.D.isFunction(S.__OnPluginReady)&&S.__OnPluginReady()},u.D.License.isLTS()?(_=u.I.DWT.li({instanceMode:u.I.DWT.EnumInstance.dwt_desktop,axInstance:p}),u.I.DWT.lisValidID(_)?u.I.DWT.lglic(u.I.DWT.EnumInstance.dwt_desktop).then(function(m){c(1,m.ar,m.cu)},function(m){m&&(u.I.DWT.lsetException(m.code||m.ltsErrorCode,m.message),u.I.DWT.OnLicenseException()),c(1,"","")}):c(1,"","")):c(0,l.ProductKey,"")):(u.D.detect.bNoControlEvent||(u.D.noControl(y),u.D.detect.bNoControlEvent=!0),u.D.isFunction(y.__OnPluginNotReady)&&y.__OnPluginNotReady())):clearInterval(u.D.detect._varSeed)},u.D.ie={},u.D.ie.DynamicWebTwain=function(l){return(l=new v(l))._createControl(),u.D.detect.arySTwains.push(l),l},u.D.ie.closeAll=function(){for(var l,I=u.D.detect.arySTwains,c=0;c<I.length;c++)(l=I[c])&&l._objectWebTwain&&(l=l._objectWebTwain)&&0==l.ErrorCode&&l.RemoveAllImages();u.D.detect.arySTwains=[]},u.I.DWT.RemoveAllAuthorizations=function(){return!1}},7127:function(e,o,t){t.r(o),o=t(4341);var r=t.n(o),a=(o=t(9104),t.n(o)),u=(o=t(2825),t.n(o)),s=t(1695);function f(I){this._stwain=I,s.D.attachAxViewerPropertyUI(this),s.D.attachAxViewerFunctions(this),this._thumbnailViewer=null}s.D.attachAxViewerPropertyUI=function(I){var c;(c=function(h,y){h in I||r()(I,h,y)})("width",{get:function(){return I._stwain.Width},set:function(_){return I._stwain.Width=_,s.D.checkErrorString(I._stwain)}}),c("height",{get:function(){return I._stwain.Height},set:function(_){return I._stwain.Height=_,s.D.checkErrorString(I._stwain)}}),c("background",{get:function(){return I._stwain.BackgroundColor},set:function(_){return I._stwain.BackgroundColor=_}}),c("cursor",{get:function(){return I._stwain.MouseShape?"pointer":"crosshair"},set:function(_){return I._stwain.MouseShape="pointer"==_,_}}),c("showPageNumber",{get:function(){return!1},set:function(_){return!1}}),c("ifAutoScroll",{get:function(){return I._stwain.IfAutoScroll},set:function(_){return I._stwain.IfAutoScroll=_}}),c("pageMargin",{get:function(){return I._stwain.ImageMargin},set:function(_){return I._stwain.ImageMargin=_}}),c("zoom",{get:function(){return I._stwain.Zoom},set:function(_){return I._stwain.Zoom=_}})},s.D.attachAxViewerFunctions=function(I){I.next=function(){return this._stwain.next()},I.previous=function(){return this._stwain.previous()},I.first=function(){return this._stwain.first()},I.last=function(){return this._stwain.last()},I.gotoPage=function(c){return s.D.isNaN(c=+c)||!s.D.isNumber(c)?(s.D.Errors.InvalidIndex(this._stwain),!1):c<0||c>=this._stwain.HowManyImagesInBuffer?(s.D.Errors.IndexOutOfRange(this._stwain),!1):this._stwain.CurrentImageIndexInBuffer=c},I.setSelectedAreas=function(c){return this._stwain.SetSelectedImageArea(this._stwain.CurrentImageIndexInBuffer,c.left,c.top,c.right,c.bottom)},I.fitWindow=function(c){return"height"==c?(this._stwain.IfFitWindow=!0,this._stwain.FitWindowType=s.I.DWT.EnumDWT_FitWindowType.enumFitWindowHeight):"width"==c?(this._stwain.IfFitWindow=!0,this._stwain.FitWindowType=s.I.DWT.EnumDWT_FitWindowType.enumFitWindowWidth):(this._stwain.IfFitWindow=!0,this._stwain.FitWindowType=s.I.DWT.EnumDWT_FitWindowType.enumFitWindow),!0},I.setViewMode=function(c,_){return this._stwain.SetViewMode(c,_)},I.createImageEditor=function(){return this._stwain},I.on=function(c,_){return""!=(c=this._convertEvtName(c))&&("OnImageAreaSelected"==c?(this.OnImageAreaSelected=function(h,y,p,m,T){_(h,[{x:y,y:p,width:m-y,height:T-p}])},this._stwain.RegisterEvent(c,this.OnImageAreaSelected)):this._stwain.RegisterEvent(c,_))},I.off=function(c,_){return""!=(c=this._convertEvtName(c))&&("OnImageAreaSelected"==c?this.OnImageAreaSelected?this._stwain.UnregisterEvent(c,this.OnImageAreaSelected):this._stwain.UnregisterEvent(c):this._stwain.UnregisterEvent(c,_))},I.createThumbnailViewer=function(c){return this._thumbnailViewer?s.D.Errors.ThumbnailViewerExist(this._stwain):(c=new s.D.UI.ThumbnailViewer(this._stwain,c),this._thumbnailViewer=c.getInstance()),this._thumbnailViewer},I._convertEvtName=function(c){if(!s.D.isString(c))return"";var _=a()(s.D).call(s.D,c).toLowerCase();return"toppagechanged"==_?"OnTopImageInTheViewChanged":"click"==_?"OnMouseClick":"dblclick"==_?"OnMouseDoubleClick":"mousemove"==_?"OnMouseMove":"rightclick"==_?"OnMouseRightClick":"wheel"==_?"OnMouseWheel":"keydown"==_?"OnKeyDown":"pageareaselected"==_?"OnImageAreaSelected":"pageareaunselected"==_?"OnImageAreaDeSelected":a()(s.D).call(s.D,c)}};var v={showThumbnail:!(f.prototype.getInstance=function(){return this}),location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,pageBackground:"transparent",pageBorder:"1px solid rgb(238, 238, 238)",hoverPageBackground:"rgb(239, 246, 253)",hoverPageBorder:"1px solid rgb(238, 238, 238)",placeholderBackground:"rgb(251, 236, 136)",autoChangeIndex:!1};function l(I,c){var _=c;if(_){if(_.location)switch(_.location){case"left":default:_.location="horizontal",_.sequence=-1;break;case"right":_.location="horizontal",_.sequence=1;break;case"top":_.location="vertical",_.sequence=-1;break;case"bottom":_.location="vertical",_.sequence=1}else _.location="horizontal",_.sequence=-1;s.D.isUndefined(_.size)&&(_.size=v.size),s.D.isUndefined(_.columns)&&(_.columns=v.columns),s.D.isUndefined(_.rows)&&(_.rows=v.rows),(s.D.isUndefined(_.scrollDirection)||"horizontal"!=_.scrollDirection)&&(_.scrollDirection=v.scrollDirection),s.D.isUndefined(_.pageMargin)&&(_.pageMargin=v.pageMargin),s.D.isUndefined(_.allowKeyboardControl)&&(_.allowKeyboardControl=v.allowKeyboardControl),s.D.isUndefined(_.allowPageDragging)&&(_.allowPageDragging=v.allowPageDragging),s.D.isUndefined(_.allowResizing)&&(_.allowResizing=v.allowResizing),s.D.isUndefined(_.border)&&(_.border=v.border),s.D.isUndefined(_.pageBackground)&&(_.pageBackground=v.pageBackground),s.D.isUndefined(_.pageBorder)&&(_.pageBorder=v.pageBorder),s.D.isUndefined(_.hoverPageBackground)&&(_.hoverPageBackground=v.hoverPageBackground),s.D.isUndefined(_.hoverPageBorder)&&(_.hoverPageBorder=v.hoverPageBorder),s.D.isUndefined(_.placeholderBackground)&&(_.placeholderBackground=v.placeholderBackground),s.D.isUndefined(_.autoChangeIndex)&&(_.autoChangeIndex=v.autoChangeIndex)}else _=v;this._stwain=I,this._settings=_,s.D.attachViewerPropertyThumbnailUI(this),s.D.attachViewerFunctionsThumbnailUI(this),I.getSWebTwain().SetViewMode(-1,-1),I.getSWebTwain().ShowThumbnail(u()(_))}l.prototype.getInstance=function(){return this},s.D.attachViewerFunctionsThumbnailUI=function(I){I.show=function(){I._stwain?(I._stwain.getSWebTwain().SetViewMode(-1,-1),I._stwain.getSWebTwain().ShowThumbnail('{"mode":"show"}')):s.D.Errors.ThumbnailViewerDispose(I._stwain)},I.hide=function(){I._stwain?I._stwain.getSWebTwain().ShowThumbnail('{"mode":"hide"}'):s.D.Errors.ThumbnailViewerDispose(I._stwain)},I.dispose=function(){I.hide(),I._stwain=null},I.updateViewMode=function(c){if(I._stwain){if(c&&c.columns&&c.rows){if(c.columns<0||c.rows<0)return s.D.Errors.InvalidPropertyValue(I._stwain),!1;I._stwain.getSWebTwain().ShowThumbnail('{"columns":'+c.columns+',"rows":'+c.rows+"}")}}else s.D.Errors.ThumbnailViewerDispose(I._stwain)},I.on=function(y,_){var h=y;y=!1,s.D.isFunction(_)&&("OnMouseClick"==(h="pageareaunselected"==(h="pageareaselected"==(h="toppagechanged"==(h="keydown"==(h="wheel"==(h="mousemove"==(h="dblclick"==(h="rightclick"==(h="click"==h?"OnMouseClick":h)?"OnMouseRightClick":h)?"OnMouseDoubleClick":h)?"OnMouseMove":h)?"OnMouseWheel":h)?"OnKeyDown":h)?"OnTopImageInTheViewChanged":h)?"OnImageAreaSelected":h)?"OnImageAreaDeSelected":h)||"OnMouseDoubleClick"==h||"OnMouseRightClick"==h||"OnMouseMove"==h||"OnMouseWheel"==h||"OnKeyDown"==h||"OnPaintDone"==h||"OnImageAreaDeSelected"==h||"OnTopImageInTheViewChanged"==h?(s.D.isFunction(I._stwain["__"+h])||s.D.isFunction(I._stwain["__"+h+"_Thumbnail"])||(y=!0),I._stwain["__"+h+"_Thumbnail"]=_,y&&I._stwain.getSWebTwain().RegisterEvent(h,function(p,m){return I._stwain.__OnDispatchThumbnailEvt(h,p,m)})):"OnImageAreaSelected"==h&&(s.D.isFunction(I._stwain["__"+h])||s.D.isFunction(I._stwain["__"+h+"_Thumbnail"])||(y=!0),I._stwain["__"+h+"_Thumbnail"]=_,y&&I._stwain.getSWebTwain().RegisterEvent(h,I._stwain._OnImageAreaSelected)))},I.off=function(c,_){I._stwain["__"+c+"_Thumbnail"]=""}},s.D.attachViewerPropertyThumbnailUI=function(I){var c;(c=function(h,y){h in I||r()(I,h,y)})("location",{get:function(){return I._settings.location},set:function(_){I._settings.location=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"location":"'+_+'"}')}}),c("size",{get:function(){return I._settings.size},set:function(_){I._settings.size=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"size":"'+_+'"}')}}),c("pageMargin",{get:function(){return I._settings.pageMargin},set:function(_){I._settings.pageMargin=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"pageMargin":"'+_+'"}')}}),c("background",{get:function(){return I._settings.background},set:function(_){I._settings.background=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"background":"'+_+'"}')}}),c("pageBackground",{get:function(){return I._settings.pageBackground},set:function(_){I._settings.pageBackground=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"pageBackground":"'+_+'"}')}}),c("selectedPageBorder",{get:function(){return I._settings.selectedPageBorder},set:function(_){I._settings.selectedPageBorder=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"selectedPageBorder":"'+_+'"}')}}),c("selectedPageBackground",{get:function(){return I._settings.selectedPageBackground},set:function(_){I._settings.selectedPageBackground=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"selectedPageBackground":"'+_+'"}')}}),c("scrollDirection",{get:function(){return I._settings.scrollDirection},set:function(_){I._settings.scrollDirection=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"scrollDirection":"'+_+'"}')}}),c("showPageNumber",{get:function(){return I._settings.showPageNumber},set:function(_){I._settings.showPageNumber=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"showPageNumber":"'+_+'"}')}}),c("border",{get:function(){return I._settings.border},set:function(_){I._settings.border=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"border":"'+_+'"}')}}),c("pageBorder",{get:function(){return I._settings.pageBorder},set:function(_){I._settings.pageBorder=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"pageBorder":"'+_+'"}')}}),c("hoverPageBackground",{get:function(){return I._settings.hoverPageBackground},set:function(_){I._settings.hoverPageBackground=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"hoverPageBackground":"'+_+'"}')}}),c("hoverPageBorder",{get:function(){return I._settings.hoverPageBorder},set:function(_){I._settings.hoverPageBorder=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"hoverPageBorder":"'+_+'"}')}}),c("placeholderBackground",{get:function(){return I._settings.placeholderBackground},set:function(_){I._settings.placeholderBackground=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"placeholderBackground":"'+_+'"}')}}),c("allowKeyboardControl",{get:function(){return I._settings.allowKeyboardControl},set:function(_){I._settings.allowKeyboardControl=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"allowKeyboardControl":"'+_+'"}')}}),c("allowPageDragging",{get:function(){return I._settings.allowPageDragging},set:function(_){I._settings.allowPageDragging=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"allowPageDragging":"'+_+'"}')}}),c("allowResizing",{get:function(){return I._settings.allowResizing},set:function(_){I._settings.allowResizing=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"allowResizing":"'+_+'"}')}}),c("autoChangeIndex",{get:function(){return I._settings.autoChangeIndex},set:function(_){I._settings.autoChangeIndex=_,I._stwain&&I._stwain.getSWebTwain().ShowThumbnail('{"autoChangeIndex":"'+_+'"}')}})},s.D.UI=s.D.UI||{},s.D.UI.DWTAxViewer=f,s.D.UI.ThumbnailViewer=l},9035:function(e,s,t){t.r(s),s=t(677);var r=t.n(s),a=(s=t(5238),t.n(s)),o=(s=t(4341),t.n(s)),u=(s=t(7711),t.n(s)),f=(s=t(9798),t.n(s)),v=t(1695),l=t(9158),I=v.I.navInfo,c={isFunction:function(_){return _&&"function"==typeof _},isReturnSuccess:function(_){return-2115===_._errorCode||(-2003!==_._errorCode||v.I.DWT.IfHttpPostErrorNoWindow||window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no").document.writeln(_.HTTPPostResponseString),0==_._errorCode)},setErrorString:function(_){_._errorCode=_.getSWebTwain().ErrorCode,_._errorString=_.getSWebTwain().ErrorString},checkErrorString:function(_){return c.setErrorString(_),c.isReturnSuccess(_)},wrapperRet:function(_,h,y,p,m,T){if(c.checkErrorString(_)){if(c.isFunction(y))if(m)y(_.getSWebTwain().HTTPPostResponseString);else{if(T)return y(h),!0;y()}}else c.isFunction(p)&&(m?p(_._errorCode,_._errorString,_.getSWebTwain().HTTPPostResponseString):p(_._errorCode,_._errorString));return h},wrapperPromise:function(_,h){return h?v.D.Promise.resolve(!0):v.D.Promise.reject({errorCode:_._errorCode,errorString:_._errorString})},getImageType:function(_){if(_.length<4)return-1;var h=r()(_).call(_,".");return-1===h?-1:".bmp"===(_=a()(_).call(_,h).toLowerCase())||".dib"===_?0:".jpg"===_||".jpe"===_||".jpeg"===_||".jfif"===_?1:".tif"===_||".tiff"===_?2:".png"===_?3:".pdf"===_?4:".gif"===_?5:-1},replaceLocalFilename:function(_){return v.I.navInfoSync.bFileSystem?decodeURI(_):_},makeParams:function(){var _=arguments;return void 0===_||0===_.length?void 0:_}};v.D.checkErrorString=c.checkErrorString,v.D.wrapperRet=c.wrapperRet,v.D.setErrorString=c.setErrorString,v.D.DynamicLoadAddonFuns=[],v.D.attachAddon=function(_){if(I.bWin){var y=!I.bOSx64||I.bWOW64,h=_.getSWebTwain();y=y?"DynamicPdfCore_"+v.I.DWT.PdfVersion+".dll":"DynamicPdfCorex64_"+v.I.DWT.PdfVersion+".dll";try{h.GetAddOnVersion("pdf",y)}catch{}}v.D.each(v.D.DynamicLoadAddonFuns,function(p){v.D.isFunction(p)&&p(_)})},v.D.attachProperty=function(_){var h,y=_;(h=function(m,T,C){var D;0!==T&&1!==T?D=T:(D={},T&&(D.set=1==C?function(S){return!v.D.isNumber(S=+S)||isNaN(S)?(v.D.Errors.InvalidValue(y),!1):(y.getSWebTwain()[m]=S,c.checkErrorString(y))}:2==C?function(S){return v.D.isBoolean(S)?(y.getSWebTwain()[m]=S,c.checkErrorString(y)):(v.D.Errors.InvalidValue(y),!1)}:function(S){return v.D.isString(S)?(y.getSWebTwain()[m]=S,c.checkErrorString(y)):(v.D.Errors.InvalidValue(y),!1)})),D.get||(D.get=function(){var S=y.getSWebTwain()[m];return y._errorCode=y.getSWebTwain().ErrorCode,y._errorString=y.getSWebTwain().ErrorString,S}),m in y||o()(y,m,D)})("ErrorCode",{get:function(p){return y._errorCode}}),h("ErrorString",{get:function(p){return y._errorString}}),h("LogLevel",1,1),h("Manufacturer",1),h("ProductFamily",1),h("ProductKey",{get:function(){return v.I.DWT.ProductKey},set:function(p){var m=!0;return v.D.isString(p)&&"******"!=p||(p=""),v.I.DWT.ProductKey=p,y.__licenseInfo=!1,""==p?v.D.License.checkProductKey(y,{Core:!(m=!1)},!1,!0):(y.GetLicenseInfo(p),m=c.checkErrorString(y)),m}}),h("ProductName",1),h("VersionInfo",1),h("BitDepth",1,1),h("Brightness",1,1),h("Contrast",1,1),h("CurrentSourceName",0),h("DataSourceStatus",0),h("DefaultSourceName",0),h("Duplex",0),h("IfAppendImage",1,2),h("IfAutoBright",1,2),h("IfAutoDiscardBlankpages",1,2),h("IfAutoFeed",1,2),h("IfAutomaticBorderDetection",1,2),h("IfAutomaticDeskew",1,2),h("IfAutoScan",1,2),h("IfDisableSourceAfterAcquire",1,2),h("IfDuplexEnabled",1,2),h("IfFeederEnabled",1,2),h("IfModalUI",1,2),h("IfScanInNewThread",1,2),h("IfShowCancelDialogWhenImageTransfer",1,2),h("IfShowUI",1,2),h("IfShowIndicator",1,2),h("IfUseTwainDSM",1,2),h("IfFeederLoaded",0,2),h("IfPaperDetectable",0,2),h("IfUIControllable",0,2),h("ImageBitsPerPixel",0),h("ImageCaptureDriverType",1,1),h("ImageLayoutDocumentNumber",0),h("ImageLayoutFrameBottom",0),h("ImageLayoutFrameLeft",0),h("ImageLayoutFrameNumber",0),h("ImageLayoutFrameRight",0),h("ImageLayoutFrameTop",0),h("ImageLayoutPageNumber",0),h("ImageLength",0),h("ImagePixelType",0),h("ImageWidth",0),h("ImageXResolution",0),h("ImageYResolution",0),h("MagData",0),h("MagType",0),h("PageSize",1,1),h("PendingXfers",0),h("PixelFlavor",1,1),h("PixelType",1,1),h("Resolution",1,1),h("SourceCount",0),h("TransferMode",1,1),h("Unit",1,1),h("XferCount",1,1),h("Capability",1,1),h("CapCurrentIndex",1,1),h("CapCurrentValue",1,1),h("CapDefaultIndex",0),h("CapDefaultValue",0),h("CapDescription",1),h("CapMaxValue",1,1),h("CapMinValue",1,1),h("CapNumItems",1,1),h("CapStepSize",1,1),h("CapType",1,1),h("CapValue",1,1),h("CapValueString",1),h("CapValueType",1,1),h("AllowMultiSelect",1,2),h("BackgroundColor",1,1),h("BackgroundFillColor",1,1),h("BlankImageCurrentStdDev",0),h("BlankImageMaxStdDev",1,1),h("BlankImageThreshold",1,1),h("CurrentImageIndexInBuffer",{set:function(p){return p!=y.getSWebTwain().CurrentImageIndexInBuffer&&(y.getSWebTwain().CurrentImageIndexInBuffer=p),c.checkErrorString(y)}}),h("FitWindowType",1,1),h("HowManyImagesInBuffer",0),h("IfFitWindow",1,2),h("ImageMargin",1,1),h("MaxImagesInBuffer",1,1),h("MouseX",0),h("MouseY",0),h("SelectionImageBorderColor",1),h("Zoom",1,1),h("MouseShape",1,2),h("SelectedImagesIndices",{get:function(){for(var p=[],m=y.getSWebTwain().SelectedImagesCount,T=0;T<m;T++)p.push(y.getSWebTwain().GetSelectedImageIndex(T));return p}}),h("HTTPPostResponseString",0),h("AsyncMode",1,2),h("FTPPassword",1),h("FTPPort",{set:function(p){return""!==p&&(p=+p,y.getSWebTwain().FTPPort=p,c.checkErrorString(y))}}),h("FTPUserName",1),h("HTTPPort",{set:function(p){return p=""!==p?+p:v.D.detect.ssl?443:80,y.getSWebTwain().HTTPPort=p,c.checkErrorString(y)}}),h("HTTPPassword",1),h("HTTPUserName",1),h("IfPASVMode",1,2),h("IfShowProgressBar",1,2),h("ProxyServer",1),h("IfShowFileDialog",1,2),h("IfTiffMultiPage",1,2),h("PDFAuthor",1),h("PDFCompressionType",1,1),h("PDFCreationDate",1),h("PDFCreator",1),h("PDFKeywords",1),h("PDFModifiedDate",1),h("PDFProducer",1),h("PDFSubject",1),h("PDFTitle",1),h("PDFVersion",1),h("TIFFCompressionType",1,1),h("JPEGQuality",{set:function(p){return 100<=(p=+p)?p=100:p<0&&(p=0),y.getSWebTwain().JPEGQuality=p,c.checkErrorString(y)}}),h("HttpContentTypeFieldValue",1),h("SelectionRectAspectRatio",1,1),h("IfAllowLocalCache",1,2),h("_AutoCropMethod",1,2),h("BrokerProcessType",1,1),h("BorderStyle",1,1),h("IfShowPrintUI",1,2),h("VScrollBar",1,2),h("EnableInteractiveZoom",1,2),h("ImageEditorIfEnableEnumerator",1,2),h("ImageEditorIfReadonly",1,2),h("ImageEditorIfModal",1,2),h("ImageEditorWindowTitle",1),h("IfSSL",1,2),h("AllowPluginAuthentication",1,2),h("HttpFieldNameOfUploadedImage",1),h("MaxInternetTransferThreads",1,1),h("MaxUploadImageSize",1,1),h("IfOpenImageWithGDIPlus",1,2),h("BufferMemoryLimit",1,1),h("Width",{get:function(){return y.getSWebTwain().style.width},set:function(p){return y._ChangeWidth(p),c.checkErrorString(y)}}),h("Height",{get:function(){return y.getSWebTwain().style.height},set:function(p){return y._ChangeHeight(p),c.checkErrorString(y)}}),h("IfThrowException",1,2),h("IfAutoScroll",1,2),h("ShowPageNumber",{get:function(){return!1},set:function(p){return!1}}),h("UseLocalService",{get:function(){return!0}})},v.D.attachMethod=function(_){var h=_,y=function(S){return!!v.D.License.checkProductKey(h,{Core:!0})||(v.D.isFunction(S)&&S(h.ErrorCode,h.ErrorString),!1)},p=function(S,M){return!!v.D.License.checkPDFProductKeyWhenNeeds(h,S)||(v.D.isFunction(M)&&M(h.ErrorCode,h.ErrorString),!1)},m=function(S,M){return 0!=S.HowManyImagesInBuffer||(v.D.Errors.NoImage(S),v.D.isFunction(M)&&M(S.ErrorCode,S.ErrorString),!1)},T=function(S,M,G){return!(!m(S,G)||(isNaN(M)||!v.D.isNumber(M)||M<0||M>=S.HowManyImagesInBuffer)&&(v.D.Errors.IndexOutOfRange(S),v.D.isFunction(G)&&G(S.ErrorCode,S.ErrorString),1))},C=(_.RegisterEvent=function(D,S){if(!v.D.isString(D)||"onwsmessage"===D.toLowerCase())return v.D.Errors.InvalidEventName(h),!1;if("onpostalltransfers"===D.toLowerCase())return v.D.isFunction(S)&&(h.__OnPostAllTransfers=S),!0;var M=["__",D].join("");return h[M]=S,h.getSWebTwain().RegisterEvent(D,S),c.checkErrorString(h)},_.onEvent=function(D,S){return h.RegisterEvent(D,S)},_.on=function(D,S){return h.RegisterEvent(D,S)},_._isMobileMode=function(){return!1},_.CancelAllPendingTransfers=function(){return h.getSWebTwain().CancelAllPendingTransfers(),c.checkErrorString(h)},_.CloseSource=function(){return h.getSWebTwain().CloseSource(),c.checkErrorString(h)},_.CloseSourceManager=function(){return h.getSWebTwain().CloseSourceManager(),c.checkErrorString(h)},_.DisableSource=function(){return h.getSWebTwain().DisableSource(),c.checkErrorString(h)},_.FeedPage=function(){return h.getSWebTwain().FeedPage(),c.checkErrorString(h)},_.GetDeviceType=function(){var D=h.getSWebTwain().GetDeviceType();return c.setErrorString(h),D},_.GetSourceNameItems=function(D){return D=h.getSWebTwain().GetSourceNameItems(D),c.setErrorString(h),D},_.SourceNameItems=function(D){return D=h.getSWebTwain().GetSourceNameItems(D),c.setErrorString(h),D},_.GetSourceNames=function(){return v.D.Errors.ActiveXNotSupport(h),[]},_.GetSourceType=function(D){return D=h.getSWebTwain().GetSourceType(D),c.setErrorString(h),D},_.OpenSource=function(){return h.getSWebTwain().OpenSource(),c.checkErrorString(h)},_.OpenSourceManager=function(){return h.getSWebTwain().OpenSourceManager(),c.checkErrorString(h)},_.ResetImageLayout=function(){return h.getSWebTwain().ResetImageLayout(),c.checkErrorString(h)},_.RewindPage=function(){return h.getSWebTwain().RewindPage(),c.checkErrorString(h)},_.SelectSource=function(D,S){return v.D.isUndefined(D)?(h.getSWebTwain().SelectSource(),c.checkErrorString(h)):(h.getSWebTwain().SelectSource(),c.checkErrorString(h)?(D(),!0):(S(),!1))},_.SelectSourceByIndex=function(D){return h.getSWebTwain().SelectSourceByIndex(D),c.checkErrorString(h)},_.CloseSourceAsync=function(){return c.wrapperPromise(h,h.CloseSource())},_.CloseSourceManagerAsync=function(){return c.wrapperPromise(h,h.CloseSourceManager())},_.GetSourceNamesAsync=function(){return c.wrapperPromise(h,h.GetSourceNames())},_.GetSourceTypeAsync=function(D){return c.wrapperPromise(h,h.GetSourceType(D))},_.OpenSourceAsync=function(){return c.wrapperPromise(h,h.OpenSource())},_.OpenSourceManagerAsync=function(){return c.wrapperPromise(h,h.OpenSourceManager())},_.SelectSourceAsync=function(){return c.wrapperPromise(h,h.SelectSource())},_.SelectSourceByIndexAsync=function(D){return c.wrapperPromise(h,h.SelectSourceByIndex(D))},_.SetFileXferInfo=function(D,S){return D=c.replaceLocalFilename(D),h.getSWebTwain().SetFileXferInfo(D,S),c.checkErrorString(h)},_.SetImageLayout=function(D,S,M,G){return h.getSWebTwain().SetImageLayout(D,S,M,G),c.checkErrorString(h)},_.CapGet=function(){var D=h.getSWebTwain().CapGet();return c.setErrorString(h),D},_.CapGetCurrent=function(){var D=h.getSWebTwain().CapGetCurrent();return c.setErrorString(h),D},_.CapGetDefault=function(){var D=h.getSWebTwain().CapGetDefault();return c.setErrorString(h),D},_.CapGetFrameBottom=function(D){return D=h.getSWebTwain().CapGetFrameBottom(D),c.setErrorString(h),D},_.CapGetFrameLeft=function(D){return D=h.getSWebTwain().CapGetFrameLeft(D),c.setErrorString(h),D},_.CapGetFrameRight=function(D){return D=h.getSWebTwain().CapGetFrameRight(D),c.setErrorString(h),D},_.CapGetFrameTop=function(D){return D=h.getSWebTwain().CapGetFrameTop(D),c.setErrorString(h),D},_.CapGetHelp=function(){var D=h.getSWebTwain().CapGetHelp();return c.setErrorString(h),D},_.CapGetLabel=function(){var D=h.getSWebTwain().CapGetLabel();return c.setErrorString(h),D},_.CapGetLabels=function(){var D=h.getSWebTwain().CapGetLabels();return c.setErrorString(h),D},_.CapIfSupported=function(D){return D=h.getSWebTwain().CapIfSupported(D),c.setErrorString(h),D},_.CapReset=function(){return h.getSWebTwain().CapReset(),c.checkErrorString(h)},_.CapSet=function(){return h.getSWebTwain().CapSet(),c.checkErrorString(h)},_.CapSetFrame=function(D,S,M,G,L){return h.getSWebTwain().CapSetFrame(D,S,M,G,L),c.checkErrorString(h)},_.GetCapItems=function(D){return D=h.getSWebTwain().GetCapItems(D),c.setErrorString(h),D},_.GetCapItemsString=function(D){return D=h.getSWebTwain().GetCapItemsString(D),c.setErrorString(h),D},_.SetCapItems=function(D,S){return h.getSWebTwain().SetCapItems(D,S),c.checkErrorString(h)},_.SetCapItemsString=function(D,S){return h.getSWebTwain().SetCapItemsString(D,S),c.checkErrorString(h)},_.AddText=function(D,S,M,G,L,W,F,U){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(h.getSWebTwain().AddText(D,S,M,G,L,W,F,U),c.checkErrorString(h))},_.CreateTextFont=function(D,S,M,G,L,W,F,U,H,Z,X,$,V,De){return h.getSWebTwain().CreateTextFont(D,S,M,G,L,W,F,U,H,Z,X,$,V,De),c.checkErrorString(h)},_.CopyToClipboard=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(h.getSWebTwain().CopyToClipboard(D),c.checkErrorString(h))},_.Erase=function(U,S,M,G,L,W,F){return U=u()(U),isNaN(U)||U<0||U>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(F)&&F(h.ErrorCode,h.ErrorString),!1):(U=h.getSWebTwain().Erase(U,S,M,G,L),c.wrapperRet(h,U,W,F))},_.GetImageBitDepth=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(D=h.getSWebTwain().GetImageBitDepth(D),c.setErrorString(h),D)},_.GetImageWidth=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(D=h.getSWebTwain().GetImageWidth(D),c.setErrorString(h),D)},_.GetImageHeight=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(D=h.getSWebTwain().GetImageHeight(D),c.setErrorString(h),D)},_.GetImageSize=function(D,S,M){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(D=h.getSWebTwain().GetImageSize(D,S,M),c.setErrorString(h),D)},_.GetImageSizeWithSpecifiedType=function(D,S){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(D=h.getSWebTwain().GetImageSizeWithSpecifiedType(D,S),c.setErrorString(h),D)},_.GetImageXResolution=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(D=h.getSWebTwain().GetImageXResolution(D),c.setErrorString(h),D)},_.GetImageYResolution=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(D=h.getSWebTwain().GetImageYResolution(D),c.setErrorString(h),D)},_.CopyToClipboardAsync=function(D){return c.wrapperPromise(h,h.CopyToClipboard(D))},_.EraseAsync=function(D,S,M,G,L){return c.wrapperPromise(h,h.Erase(D,S,M,G,L))},_.GetImageBitDepthAsync=function(D){return c.wrapperPromise(h,h.GetImageBitDepth(D))},_.GetImageWidthAsync=function(D){return c.wrapperPromise(h,h.GetImageWidth(D))},_.GetImageHeightAsync=function(D){return c.wrapperPromise(h,h.GetImageHeight(D))},_.GetImageSizeAsync=function(D,S,M){return c.wrapperPromise(h,h.GetImageSize(D,S,M))},_.GetImageSizeWithSpecifiedTypeAsync=function(D,S){return c.wrapperPromise(h,h.GetImageSizeWithSpecifiedType(D,S))},_.GetImageXResolutionAsync=function(D){return c.wrapperPromise(h,h.GetImageXResolution(D))},_.GetImageYResolutionAsync=function(D){return c.wrapperPromise(h,h.GetImageYResolution(D))},_.SelectAllImages=function(){var D,S=h.getSWebTwain().HowManyImagesInBuffer,M=[];for(h.getSWebTwain().SelectedImagesCount=S,D=0;D<S;D++)h.getSWebTwain().SetSelectedImageIndex(D,D),M.push(D);return c.checkErrorString(h),M},_.SelectImages=function(D){var S=D.length;h.getSWebTwain().SelectedImagesCount=S;for(var M=0;M<S;M++)h.getSWebTwain().SetSelectedImageIndex(M,D[M]);return c.checkErrorString(h)},_.GetSelectedImagesSize=function(D){return D=h.getSWebTwain().GetSelectedImagesSize(D),c.setErrorString(h),D},_.GetSkewAngle=function(G,S,M){return G=u()(G),isNaN(G)||G<0||G>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(M)&&M(h.ErrorCode,h.ErrorString),!1):(G=h.getSWebTwain().GetSkewAngle(G),c.wrapperRet(h,G,S,M,!1,!0))},_.GetSkewAngleEx=function(U,S,M,G,L,W,F){return U=u()(U),isNaN(U)||U<0||U>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(F)&&F(h.ErrorCode,h.ErrorString),!1):(U=h.getSWebTwain().GetSkewAngleEx(U,S,M,G,L),c.wrapperRet(h,U,W,F))},_.IsBlankImage=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(D=h.getSWebTwain().IsBlankImage(D),c.setErrorString(h),D)},_.IsBlankImageEx=function(D,S,M,G,L,W){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(D=h.getSWebTwain().IsBlankImageEx(D,S,M,G,L,W),c.setErrorString(h),D)},_.Mirror=function(G,S,M){return G=u()(G),isNaN(G)||G<0||G>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(M)&&M(h.ErrorCode,h.ErrorString),!1):(G=h.getSWebTwain().Mirror(G),c.wrapperRet(h,G,S,M))},_.OverlayRectangle=function(D,S,M,G,L,W,F){return h.getSWebTwain().OverlayRectangle(D,S,M,G,L,W,F),c.checkErrorString(h)},_.RemoveAllImages=function(){var D;return h.getSWebTwain().RemoveAllImages(),(D=c.checkErrorString(h))&&h.__innerRefreshImage(),h.Width=u()(h.Width)+2,D},_.RemoveAllSelectedImages=function(){var D;return h.getSWebTwain().RemoveAllSelectedImages(),(D=c.checkErrorString(h))&&h.__innerRefreshImage(),D},_.RemoveImage=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(h.getSWebTwain().RemoveImage(D),c.checkErrorString(h))},_.MirrorAsync=function(D){return c.wrapperPromise(h,h.Mirror(D))},_.RemoveAllImagesAsync=function(){return c.wrapperPromise(h,h.RemoveAllImages())},_.RemoveAllSelectedImagesAsync=function(){return c.wrapperPromise(h,h.RemoveAllSelectedImages())},_.RemoveImageAsync=function(D){return c.wrapperPromise(h,h.RemoveImage(D))},_.Rotate=function(W,S,M,G,L){return W=u()(W),isNaN(W)||W<0||W>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(L)&&L(h.ErrorCode,h.ErrorString),!1):(W=h.getSWebTwain().Rotate(W,S,M),c.wrapperRet(h,W,G,L))},_.RotateEx=function(F,S,M,G,L,W){return F=u()(F),isNaN(F)||F<0||F>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(W)&&W(h.ErrorCode,h.ErrorString),!1):(F=h.getSWebTwain().RotateEx(F,S,M,G),c.wrapperRet(h,F,L,W))},_.RotateLeft=function(G,S,M){return G=u()(G),isNaN(G)||G<0||G>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(M)&&M(h.ErrorCode,h.ErrorString),!1):(G=h.getSWebTwain().RotateLeft(G),c.wrapperRet(h,G,S,M))},_.RotateRight=function(G,S,M){return G=u()(G),isNaN(G)||G<0||G>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(M)&&M(h.ErrorCode,h.ErrorString),!1):(G=h.getSWebTwain().RotateRight(G),c.wrapperRet(h,G,S,M))},_.ChangeImageSize=function(F,S,M,G,L,W){return F=u()(F),isNaN(F)||F<0||F>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(W)&&W(h.ErrorCode,h.ErrorString),!1):S<=0||M<=0?(v.D.Errors.InvalidWidthOrHeight(h),v.D.isFunction(W)&&W(h.ErrorCode,h.ErrorString),!1):(F=h.getSWebTwain().ChangeImageSize(F,S,M,G),c.wrapperRet(h,F,L,W))},_.Flip=function(G,S,M){return G=u()(G),isNaN(G)||G<0||G>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(M)&&M(h.ErrorCode,h.ErrorString),!1):(G=h.getSWebTwain().Flip(G),c.wrapperRet(h,G,S,M))},_.Crop=function(U,S,M,G,L,W,F){return U=u()(U),isNaN(U)||U<0||U>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(F)&&F(h.ErrorCode,h.ErrorString),!1):(U=h.getSWebTwain().Crop(U,S,M,G,L),c.wrapperRet(h,U,W,F))},_.CropToClipboard=function(D,S,M,G,L){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(h.getSWebTwain().CropToClipboard(D,S,M,G,L),c.checkErrorString(h))},_.CutFrameToClipboard=function(D,S,M,G,L){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(h.getSWebTwain().CutFrameToClipboard(D,S,M,G,L),c.checkErrorString(h))},_.CutToClipboard=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(h.getSWebTwain().CutToClipboard(D),c.checkErrorString(h))},_.RotateAsync=function(D,S,M){return c.wrapperPromise(h,h.Rotate(D,S,M))},_.RotateExAsync=function(D,S,M,G){return c.wrapperPromise(h,h.RotateEx(D,S,M,G))},_.RotateLeftAsync=function(D){return c.wrapperPromise(h,h.RotateLeft(D))},_.RotateRightAsync=function(D){return c.wrapperPromise(h,h.RotateRight(D))},_.ChangeImageSizeAsync=function(D,S,M,G){return c.wrapperPromise(h,h.ChangeImageSize(D,S,M,G))},_.FlipAsync=function(D){return c.wrapperPromise(h,h.Flip(D))},_.CropAsync=function(D,S,M,G,L){return c.wrapperPromise(h,h.Crop(D,S,M,G,L))},_.CropToClipboardAsync=function(D,S,M,G,L){return c.wrapperPromise(h,h.CropToClipboard(D,S,M,G,L))},_.CutFrameToClipboardAsync=function(D,S,M,G,L){return c.wrapperPromise(h,h.CutFrameToClipboard(D,S,M,G,L))},_.CutToClipboardAsync=function(D){return c.wrapperPromise(h,h.CutToClipboard(D))},_.InvertAsync=function(D){return c.wrapperPromise(h,h.Invert(D))},_.Invert=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?v.D.Errors.IndexOutOfRange(h):v.D.Errors.ActiveXNotSupport(h),!1},_.SetDPI=function(U,S,M,G,L,W,F){return U=u()(U),isNaN(U)||U<0||U>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(F)&&F(h.ErrorCode,h.ErrorString),!1):(U=h.getSWebTwain().SetDPI(U,S,M,G,L),c.wrapperRet(h,U,W,F))},_.SetViewMode=function(D,S){return h.getSWebTwain().SetViewMode(D,S),c.checkErrorString(h)},_.GetViewModeH=function(){var D=h.getSWebTwain().GetViewModeH();return c.setErrorString(h),D},_.GetViewModeV=function(){var D=h.getSWebTwain().GetViewModeV();return c.setErrorString(h),D},_.MoveImage=function(D,S){return D=u()(D),S=u()(S),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer||isNaN(S)||S<0||S>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(h.getSWebTwain().MoveImage(D,S),c.checkErrorString(h))},_.SwitchImage=function(D,S){return D=u()(D),S=u()(S),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer||isNaN(S)||S<0||S>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(h.getSWebTwain().SwitchImage(D,S),c.checkErrorString(h))},_.Print=function(){return h.getSWebTwain().Print(),c.checkErrorString(h)},_.checkErrorString=function(){return c.isReturnSuccess(h)},_.FileExists=function(D){return D=c.replaceLocalFilename(D),D=h.getSWebTwain().FileExists(D),c.setErrorString(h),D},_.SaveAllAsMultiPageTIFF=function(D,S,M){return!!m(h,M)&&(D=c.replaceLocalFilename(D),D=h.getSWebTwain().SaveAllAsMultiPageTIFF(D),c.wrapperRet(h,D,S,M))},_.SaveAllAsPDF=function(D,S,M){return!!m(h,M)&&(D=c.replaceLocalFilename(D),D=h.getSWebTwain().SaveAllAsPDF(D),c.wrapperRet(h,D,S,M))},_.SaveAsBMP=function(D,S,M,G){return!!T(h,S,G)&&(D=c.replaceLocalFilename(D),D=h.getSWebTwain().SaveAsBMP(D,S),c.wrapperRet(h,D,M,G))},_.SaveAsJPEG=function(D,S,M,G){return!!T(h,S,G)&&(D=c.replaceLocalFilename(D),D=h.getSWebTwain().SaveAsJPEG(D,S),c.wrapperRet(h,D,M,G))},_.SaveAsPDF=function(D,S,M,G){return!!T(h,S,G)&&(D=c.replaceLocalFilename(D),D=h.getSWebTwain().SaveAsPDF(D,S),c.wrapperRet(h,D,M,G))},_.SaveAsPNG=function(D,S,M,G){return!!T(h,S,G)&&(D=c.replaceLocalFilename(D),D=h.getSWebTwain().SaveAsPNG(D,S),c.wrapperRet(h,D,M,G))},_.SaveAsTIFF=function(D,S,M,G){return!!T(h,S,G)&&(D=c.replaceLocalFilename(D),D=h.getSWebTwain().SaveAsTIFF(D,S),c.wrapperRet(h,D,M,G))},_.SaveSelectedImagesAsMultiPagePDF=function(D,S,M){return D=c.replaceLocalFilename(D),D=h.getSWebTwain().SaveSelectedImagesAsMultiPagePDF(D),c.wrapperRet(h,D,S,M)},_.SaveSelectedImagesAsMultiPageTIFF=function(D,S,M){return D=c.replaceLocalFilename(D),D=h.getSWebTwain().SaveSelectedImagesAsMultiPageTIFF(D),c.wrapperRet(h,D,S,M)},_.SaveSelectedImagesToBase64Binary=function(D,S){var M=h.getSWebTwain().SaveSelectedImagesToBase64Binary();return c.wrapperRet(h,M,D,S)},_.ShowFileDialog=function(D,S,M,G,L,W,F,U){return h.getSWebTwain().ShowFileDialog(D,S,M,G,L,W,F,U),c.checkErrorString(h)},_.FTPDownload=function(D,S,M,G){return!!y(G)&&((D=h.getSWebTwain().FTPDownload(D,S))&&v.D.License.isLTS()&&v.I.DWT.lcvrf(h),c.wrapperRet(h,D,M,G))},_.FTPDownloadDirectly=function(D,S,M,G,L){return!!y(L)&&(D=h.getSWebTwain().FTPDownloadDirectly(D,S,M),c.wrapperRet(h,D,G,L))},_.FTPDownloadEx=function(D,S,M,G,L){return!(!y(L)||(M!=v.I.DWT.EnumDWT_ImageType.IT_BMP&&M!=v.I.DWT.EnumDWT_ImageType.IT_JPG&&M!=v.I.DWT.EnumDWT_ImageType.IT_TIF&&M!=v.I.DWT.EnumDWT_ImageType.IT_PNG&&M!=v.I.DWT.EnumDWT_ImageType.IT_PDF&&M!=v.I.DWT.EnumDWT_ImageType.IT_J2K&&(M=-1),!p(M,L)))&&(D=h.getSWebTwain().FTPDownloadEx(D,S,M),c.wrapperRet(h,D,G,L))},_.FTPUpload=function(D,S,M,G,L){return!!y(L)&&(D=h.getSWebTwain().FTPUpload(D,S,M),c.wrapperRet(h,D,G,L))},_.FTPUploadDirectly=function(D,S,M,G,L){return!!y(L)&&(D=h.getSWebTwain().FTPUploadDirectly(D,S,M),c.wrapperRet(h,D,G,L))},_.FTPUploadEx=function(D,S,M,G,L,W){return!!y(W)&&(D=h.getSWebTwain().FTPUploadEx(D,S,M,G),c.wrapperRet(h,D,L,W))},_.FTPUploadAllAsMultiPageTIFF=function(D,S,M,G){return!!y(G)&&(D=h.getSWebTwain().FTPUploadAllAsMultiPageTIFF(D,S),c.wrapperRet(h,D,M,G))},_.FTPUploadAllAsPDF=function(D,S,M,G){return!!y(G)&&(D=h.getSWebTwain().FTPUploadAllAsPDF(D,S),c.wrapperRet(h,D,M,G))},_.FTPUploadAsMultiPagePDF=function(D,S,M,G){return D=h.getSWebTwain().FTPUploadAsMultiPagePDF(D,S),c.wrapperRet(h,D,M,G)},_.FTPUploadAsMultiPageTIFF=function(D,S,M,G){return D=h.getSWebTwain().FTPUploadAsMultiPageTIFF(D,S),c.wrapperRet(h,D,M,G)},_.HTTPDownloadDirectly=function(D,S,M,G,L){return!!y(L)&&(D=h.getSWebTwain().HTTPDownloadDirectly(D,S,M),c.wrapperRet(h,D,G,L))},_.HTTPDownload=function(D,S,M,G){var L=c.getImageType(S);return h.HTTPDownloadEx(D,S,L,M,G)},_.HTTPDownloadEx=function(D,S,M,G,L){return!(!y(L)||(M!=v.I.DWT.EnumDWT_ImageType.IT_BMP&&M!=v.I.DWT.EnumDWT_ImageType.IT_JPG&&M!=v.I.DWT.EnumDWT_ImageType.IT_TIF&&M!=v.I.DWT.EnumDWT_ImageType.IT_PNG&&M!=v.I.DWT.EnumDWT_ImageType.IT_PDF&&M!=v.I.DWT.EnumDWT_ImageType.IT_J2K&&(M=-1),!p(M,L)))&&((D=h.getSWebTwain().HTTPDownloadEx(D,S,M))&&v.D.License.isLTS()&&v.I.DWT.lcvrf(h),c.wrapperRet(h,D,G,L))},_.HTTPDownloadThroughGet=_.HTTPDownloadEx,_.HTTPUploadThroughPostDirectly=function(D,S,M,G,L,W){return!!y(W)&&(D=h.getSWebTwain().HTTPUploadThroughPostDirectly(D,S,M,G),c.wrapperRet(h,D,L,W,!0))},_.HTTPUploadThroughPost=function(D,S,M,G,L,W){return!v.D.isNumber(S)||isNaN(S)||S<-2?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(W)&&W(h.ErrorCode,h.ErrorString),!1):(D=h.getSWebTwain().HTTPUploadThroughPost(D,S,M,G),c.wrapperRet(h,D,L,W,!0))},_.HTTPUploadThroughPostEx=function(D,S,M,G,L,W,F){return!v.D.isNumber(S)||isNaN(S)||S<-2?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(F)&&F(h.ErrorCode,h.ErrorString),!1):(D=h.getSWebTwain().HTTPUploadThroughPostEx(D,S,M,G,L),c.wrapperRet(h,D,W,F,!0))},_.ClearAllHTTPFormField=function(){return h.getSWebTwain().ClearAllHTTPFormField(),c.checkErrorString(h)},_.SetHTTPFormField=function(D,S){return h.getSWebTwain().SetHTTPFormField(D,S),c.checkErrorString(h)},_.HTTPUploadAllThroughPostAsMultiPageTIFF=function(D,S,M,G,L){return D=h.getSWebTwain().HTTPUploadAllThroughPostAsMultiPageTIFF(D,S,M),c.wrapperRet(h,D,G,L,!0)},_.HTTPUploadThroughPostAsMultiPageTIFF=function(D,S,M,G,L){return D=h.getSWebTwain().HTTPUploadThroughPostAsMultiPageTIFF(D,S,M),c.wrapperRet(h,D,G,L,!0)},_.HTTPUploadAllThroughPostAsPDF=function(D,S,M,G,L){return D=h.getSWebTwain().HTTPUploadAllThroughPostAsPDF(D,S,M),c.wrapperRet(h,D,G,L,!0)},_.HTTPUploadThroughPostAsMultiPagePDF=function(D,S,M,G,L){return D=h.getSWebTwain().HTTPUploadThroughPostAsMultiPagePDF(D,S,M),c.wrapperRet(h,D,G,L,!0)},_.HTTPUploadThroughPutDirectly=function(D,S,M,G,L){return D=h.getSWebTwain().HTTPUploadThroughPutDirectly(D,S,M),c.wrapperRet(h,D,G,L)},_.HTTPUploadThroughPut=function(D,S,M,G,L){var W=c.getImageType(M);return h.HTTPUploadThroughPutEx(D,S,M,W,G,L)},_.HTTPUploadThroughPutEx=function(D,S,M,G,L,W){return D=h.getSWebTwain().HTTPUploadThroughPutEx(D,S,M,G),c.wrapperRet(h,D,L,W)},_.HTTPUploadAllThroughPutAsMultiPageTIFF=function(D,S,M,G){return h.HTTPUploadThroughPutEx(D,-1,S,2,M,G)},_.HTTPUploadThroughPutAsMultiPageTIFF=function(D,S,M,G){return h.HTTPUploadThroughPutEx(D,-2,S,2,M,G)},_.HTTPUploadAllThroughPutAsPDF=function(D,S,M,G){return h.HTTPUploadThroughPutEx(D,-1,S,4,M,G)},_.HTTPUploadThroughPutAsMultiPagePDF=function(D,S,M,G){return h.HTTPUploadThroughPutEx(D,-2,S,4,M,G)},_.ShowImageEditor=function(){return h.getSWebTwain().ShowImageEditor(),c.checkErrorString(h)},_.SetCookie=function(D){return h.getSWebTwain().SetCookie(D),c.checkErrorString(h)},_.LoadImageFromBase64Binary=function(D,S){return!(!y()||(S!=v.I.DWT.EnumDWT_ImageType.IT_BMP&&S!=v.I.DWT.EnumDWT_ImageType.IT_JPG&&S!=v.I.DWT.EnumDWT_ImageType.IT_TIF&&S!=v.I.DWT.EnumDWT_ImageType.IT_PNG&&S!=v.I.DWT.EnumDWT_ImageType.IT_PDF&&S!=v.I.DWT.EnumDWT_ImageType.IT_J2K&&(S=-1),!p(S)))&&(D=h.getSWebTwain().LoadImageFromBase64Binary(D,S),c.setErrorString(h),D)},_.SaveSelectedImagesToBytes=function(D,S){return D=h.getSWebTwain().SaveSelectedImagesToBytes(D,S),c.setErrorString(h),D},_.LoadImageFromBytes=function(D,S,M){return!(!y()||(M!=v.I.DWT.EnumDWT_ImageType.IT_BMP&&M!=v.I.DWT.EnumDWT_ImageType.IT_JPG&&M!=v.I.DWT.EnumDWT_ImageType.IT_TIF&&M!=v.I.DWT.EnumDWT_ImageType.IT_PNG&&M!=v.I.DWT.EnumDWT_ImageType.IT_PDF&&M!=v.I.DWT.EnumDWT_ImageType.IT_J2K&&(M=-1),!p(M)))&&(D=h.getSWebTwain().LoadImageFromBytes(D,S,M),c.setErrorString(h),D)},_.UnregisterEvent=function(D,S){return h.getSWebTwain().UnregisterEvent(D,S),c.checkErrorString(h)},_.SetImageWidth=function(L,S,M,G){return L=u()(L),isNaN(L)||L<0||L>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(G)&&G(h.ErrorCode,h.ErrorString),!1):(L=h.getSWebTwain().SetImageWidth(L,S),c.wrapperRet(h,L,M,G))},_.HTTPDownloadThroughPost=function(D,S,M,G,L){return!(!y(L)||(M!=v.I.DWT.EnumDWT_ImageType.IT_BMP&&M!=v.I.DWT.EnumDWT_ImageType.IT_JPG&&M!=v.I.DWT.EnumDWT_ImageType.IT_TIF&&M!=v.I.DWT.EnumDWT_ImageType.IT_PNG&&M!=v.I.DWT.EnumDWT_ImageType.IT_PDF&&M!=v.I.DWT.EnumDWT_ImageType.IT_J2K&&(M=-1),!p(M,L)))&&(D=h.getSWebTwain().HTTPDownloadThroughPost(D,S,M),c.wrapperRet(h,D,G,L))},_.SetCustomDSDataEx=function(D){return h.getSWebTwain().SetCustomDSDataEx(D),c.checkErrorString(h)},_.SetCustomDSData=function(D){return h.getSWebTwain().SetCustomDSData(D),c.checkErrorString(h)},_.GetCustomDSDataEx=function(){var D=h.getSWebTwain().GetCustomDSDataEx();return c.setErrorString(h),D},_.GetCustomDSData=function(D){return D=h.getSWebTwain().GetCustomDSData(D),c.setErrorString(h),D},_.ChangeBitDepth=function(D,S,M){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(h.getSWebTwain().ChangeBitDepth(D,S,M),c.checkErrorString(h))},_.ConvertToGrayScale=function(D,S,M){var G=u()(D);return isNaN(G)||G<0||G>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),v.D.isFunction(M)&&M(h.ErrorCode,h.ErrorString),!1):(G=h.getSWebTwain().ConvertToGrayScale(D),c.wrapperRet(h,G,S,M))},_.ShowImageEditorEx=function(D,S,M,G,L){return h.getSWebTwain().ShowImageEditorEx(D,S,M,G,L),c.checkErrorString(h)},_.ClearTiffCustomTag=function(){return h.getSWebTwain().ClearTiffCustomTag(),c.checkErrorString(h)},_.SetTiffCustomTag=function(D,S,M){var G=+D;return v.I.Lib.isUndef(D)||v.I.Lib.isUndef(S)?(v.I.Lib.Errors.InvalidParameter(h),!1):G<=0||2147483647<G?(v.I.Lib.Errors.InvalidTiffTagError(h),!1):(h.getSWebTwain().SetTiffCustomTag(D,S,M),c.checkErrorString(h))},_.IsBlankImageExpress=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),!1):(D=h.getSWebTwain().IsBlankImageExpress(D),c.setErrorString(h),D)},_._ChangeWidth=function(D){var S,M=document.getElementById(h._strDWTInnerContainerID);return(S=v.D.isString(D)&&0<D.length&&"%"===D.charAt(D.length-1)?D:S)||(D=u()(D))&&2<D&&(S=D-2+"px"),S&&(h._strWidth=S,h.getSWebTwain().style.width=S,M&&(M.style.width=S)),!0},_._ChangeHeight=function(D){var S,M=document.getElementById(h._strDWTInnerContainerID);return(S=v.D.isString(D)&&0<D.length&&"%"===D.charAt(D.length-1)?D:S)||(D=u()(D))&&(S=D+"px"),S&&(h._strHeight=S,h.getSWebTwain().style.height=S,M&&(M.style.height=S)),!0},_.SetSize=function(D,S){return this._ChangeWidth(D),this._ChangeHeight(S),!0},_.SetSelectedImageArea=function(D,S,M,G,L){return h.getSWebTwain().SetSelectedImageArea(D,S,M,G,L),c.checkErrorString(h)},_.SetVideoRotateMode=function(D){return h.getSWebTwain().SetVideoRotateMode(D),c.checkErrorString(h)},_.SetOpenSourceTimeout=function(D){return h.getSWebTwain().SetOpenSourceTimeout(D),c.checkErrorString(h)},_.SetHTTPHeader=function(D,S){return!1},_.GetImageURL=function(D,S,M){return""},_.GetImagePartURL=function(D){return D=u()(D),isNaN(D)||D<0||D>=h.HowManyImagesInBuffer?(v.D.Errors.IndexOutOfRange(h),""):(D=h.getSWebTwain().GetDIB(D),c.setErrorString(h),D)},_.GetLicenseInfo=function(D){try{var S,G=!1,L=(v.D.License.isLTS()?G=!0:h.getSWebTwain().ProductKey=D,h.getSWebTwain().GetLicenseInfo());c.checkErrorString(h)?((S=v.D.parse(L))&&S.message?(v.D.Errors.LicenseEmptyOrInvalid(h),h._errorString=S.message,S=void 0):G&&(S&&v.D.isArray(S.Detail)&&0<S.Detail.length&&v.I.DWT.lsexp(v.I.DWT.EnumInstance.dwt_desktop,S.Detail[0].ExpireDate),S.LTS=!0),h.__licenseInfo=(0,l.T)(S)):h.__licenseInfo=void 0}catch{h.__licenseInfo=void 0}return f().resolve(h.__licenseInfo)},_.LoadDibFromClipboard=function(D,S){var M=h.getSWebTwain().LoadDibFromClipboard();return M&&v.D.License.isLTS()&&v.I.DWT.lcvrf(h),c.wrapperRet(h,M,D,S)},_.LoadImage=function(D,S,M){return!!y(M)&&(D=c.replaceLocalFilename(D),(D=h.getSWebTwain().LoadImage(D))&&v.D.License.isLTS()&&v.I.DWT.lcvrf(h),c.wrapperRet(h,D,S,M))},_.LoadImageEx=function(L,S,M,G){return!(!y(G)||(S!=v.I.DWT.EnumDWT_ImageType.IT_BMP&&S!=v.I.DWT.EnumDWT_ImageType.IT_JPG&&S!=v.I.DWT.EnumDWT_ImageType.IT_TIF&&S!=v.I.DWT.EnumDWT_ImageType.IT_PNG&&S!=v.I.DWT.EnumDWT_ImageType.IT_PDF&&S!=v.I.DWT.EnumDWT_ImageType.IT_J2K&&(S=-1),!p(S,G)))&&(L=c.replaceLocalFilename(L),S==v.I.DWT.EnumDWT_ImageType.IT_ALL&&(S=-1),(L=h.getSWebTwain().LoadImageEx(L,S))&&v.D.License.isLTS()&&v.I.DWT.lcvrf(h),c.wrapperRet(h,L,M,G))},_.EnableSource=function(D,S,M){return h.AcquireImage(D,S,M),c.checkErrorString(h)},_.AcquireImage=function(D,S,M){var G=h.getSWebTwain(),L=null,W=null,F=null;return v.D.isUndefined(M)&&(v.D.isFunction(D)&&v.D.isFunction(S)||v.D.isFunction(D)&&v.D.isUndefined(S)||v.D.isFunction(D)&&null==S||null==D&&v.D.isFunction(S))?(L=null,v.D.isFunction(D)&&(W=D),v.D.isFunction(S)&&(F=S)):(L=v.D.isUndefined(D)||null==D?{}:v.D.clone(D),v.D.isFunction(S)&&(W=function(){S(L)}),v.D.isFunction(M)&&(F=function(){M(L,h._errorCode,h._errorString)})),!!y(F)&&(null!=L&&(null!=(D=L.SelectSourceByIndex)&&void 0!==D&&(G.SelectSourceByIndex(D),G.CloseSource(),G.OpenSource()),null!=(D=L.IfShowUI)&&void 0!==D&&(G.IfShowUI=D),null!=(D=L.PixelType)&&void 0!==D&&(G.PixelType=D),null!=(D=L.Resolution)&&void 0!==D&&(G.Resolution=D),null!=(D=L.IfFeederEnabled)&&void 0!==D&&(G.IfFeederEnabled=D),null!=(D=L.IfDuplexEnabled)&&void 0!==D&&(G.IfDuplexEnabled=D),null!=(D=L.IfDisableSourceAfterAcquire)&&void 0!==D&&(G.IfDisableSourceAfterAcquire=D)),h.getSWebTwain().RegisterEvent("OnPostTransferAsync",function(U){var H;U&&v.D.isString(U)&&(H=v.D.parse(U)),v.D.isFunction(h.__OnPostTransferAsync)&&h.__OnPostTransferAsync(H)}),h.getSWebTwain().RegisterEvent("OnPostAllTransfers",function(){c.checkErrorString(h)?(v.D.License.isLTS()&&v.I.DWT.lcvrf(h),v.D.isFunction(W)&&W()):v.D.isFunction(F)&&F(h._errorCode,h._errorString),v.D.isFunction(h.__OnPostAllTransfers)&&h.__OnPostAllTransfers()}),G.AcquireImage(),c.checkErrorString(h))},_.GenerateURLForUploadData=function(D,S,M){return c.wrapperRet(h,!0,S,M)},_._innerFun=function(L,S,M){var G=h.getSWebTwain();return"function"==typeof(L=G[L])?L.apply(G,S):L},_.ActiveUI=function(D,S){},_.startScan=function(){return new(f())(function(D,S){})},_.IndexToImageID=function(D){return D},_.ImageIDToIndex=function(D){return D},_.first=function(){return 0<h.HowManyImagesInBuffer&&(h.CurrentImageIndexInBuffer=0,h.__innerRefreshImage()),!0},_.previous=function(){var D;return 0<h.HowManyImagesInBuffer&&0<(D=h.CurrentImageIndexInBuffer)&&(h.CurrentImageIndexInBuffer=D-1,h.__innerRefreshImage()),!0},_.next=function(){var D,S=h.HowManyImagesInBuffer;return 0<S&&0<=(D=h.CurrentImageIndexInBuffer)&&D<S-1&&(h.CurrentImageIndexInBuffer=D+1,h.__innerRefreshImage()),!0},_.last=function(){var D=h.HowManyImagesInBuffer;return 0<D&&(h.CurrentImageIndexInBuffer=D-1,h.__innerRefreshImage()),!0},_.isUsingActiveX=function(){return!0},_.show=function(){return _.ShowImageEditor()},_.SetLTSInfo=function(D,S){return h.getSWebTwain().SetLTSInfo(D,S)},_.EnableBuffer=function(D){return h.getSWebTwain().Encrypt(D,0)},_.GetBuffer=function(D){return h.getSWebTwain().GetBuffer(D)},_.GetUUID=function(){return h.getSWebTwain().GetUUID()},_.__OnDispatchThumbnailEvt=function(D,S,M){1==M?v.D.isFunction(_["__"+D+"_Thumbnail"])&&("OnMouseClick"==D||"OnMouseDoubleClick"==D||"OnMouseMove"==D||"OnMouseWheel"==D||"OnKeyDown"==D?_["__"+D+"_Thumbnail"]():_["__"+D+"_Thumbnail"](S)):v.D.isFunction(_["__"+D])&&_["__"+D](S)},_._OnImageAreaSelected=function(D,S,M,G,L,W){var F="OnImageAreaSelected";1==W?v.D.isFunction(_["__"+F+"_Thumbnail"])&&_["__"+F+"_Thumbnail"](D,S,M,G,L):v.D.isFunction(_["__"+F])&&_["__"+F](D,S,M,G,L)},function(S,M){(v.D.isFunction(S["__"+M])||v.D.isFunction(S["__"+M+"_Thumbnail"]))&&("OnImageAreaSelected"==M?S.getSWebTwain().RegisterEvent(M,S._OnImageAreaSelected):S.getSWebTwain().RegisterEvent(M,function(G,L){return S.__OnDispatchThumbnailEvt(M,G,L)}))});_.getSourceCount=function(D){return v.D.Errors.ActiveXNotSupport(h),v.D.Promise.resolve(h.getSWebTwain().SourceCount)},_.GetSourceCountAsync=function(D){return v.D.Errors.ActiveXNotSupport(h),v.D.Promise.resolve(h.getSWebTwain().SourceCount)},_._resetErr=function(){this._errorCode=0,this._errorString="";var D=v.I.DWT.licenseException;D.code=0,D.message=""},_._setConvertModeInner=function(D){return!(!v.D.License.checkProductKey(h,{Core:!0})||(D=+D,h._resetErr(),isNaN(D)?(v.D.Errors.ParameterCannotEmpty(h),1):1!=D&&2!=D&&3!=D&&4!=D?(v.D.Errors.InvalidValue(h),1):(h._pdfRealConvertMode=2==(h._pdfConvertMode=D)||v.D.License.hasPDFRProductKey(h)?D:2,0)))},_._setConvertMode=function(D){return!!h._setConvertModeInner(D)&&(h.getSWebTwain().SetPDFConvertMode(h._pdfRealConvertMode),!(2==h._pdfRealConvertMode&&1==h._pdfConvertMode||2==h._pdfRealConvertMode&&4==h._pdfConvertMode)||(v.D.Errors.LicenseNoPDF(h),!1))},_.__innerRefreshImage=function(){var S=h.HowManyImagesInBuffer;0<S&&h.__OnRefreshUI&&h.__OnRefreshUI(h.CurrentImageIndexInBuffer,S)},_.__OnBitmapChangedEx=function(D,S,M,G,L){-1<L&&_._blts&&(1==S||2==S)&&(S=v.I.DWT.lgct(L),v.D.isFunction(h.__OnLtsverify)&&h.__OnLtsverify(S,1))},_._attachEvents=function(){var D=h.getSWebTwain(),S=v.I.Lib.detect.getVersionArray(String(h.VersionInfo));S.length<=2||S[0]<9||9==S[0]&&S[1]<=2||(""!=h.__OnPostTransfer&&D.RegisterEvent("OnPostTransfer",h.__OnPostTransfer),""!=h.__OnPostAllTransfers&&D.RegisterEvent("OnPostAllTransfers",h.__OnPostAllTransfers),""!=h.__OnPostLoad&&D.RegisterEvent("OnPostLoad",h.__OnPostLoad),C(h,"OnMouseClick"),C(h,"OnImageAreaSelected"),C(h,"OnTopImageInTheViewChanged"),C(h,"OnImageAreaDeSelected"),C(h,"OnMouseDoubleClick"),C(h,"OnMouseRightClick"),C(h,"OnMouseMove"),""!=h.__OnGetFilePath&&D.RegisterEvent("OnGetFilePath",h.__OnGetFilePath),""!=h.__OnAfterOperate&&D.RegisterEvent("OnAfterOperate",h.__OnAfterOperate),""!=h.__OnBeforeOperate&&D.RegisterEvent("OnBeforeOperate",h.__OnBeforeOperate),""!=h.__OnOperateStatus&&D.RegisterEvent("OnOperateStatus",h.__OnOperateStatus),""!=h.__OnBitmapChanged&&D.RegisterEvent("OnBitmapChanged",h.__OnBitmapChanged),""!=h.__OnBitmapChangedEx&&D.RegisterEvent("OnBitmapChangedEx",h.__OnBitmapChangedEx),""!=h.__OnPreAllTransfers&&D.RegisterEvent("OnPreAllTransfers",h.__OnPreAllTransfers),""!=h.__OnPreTransfer&&D.RegisterEvent("OnPreTransfer",h.__OnPreTransfer),""!=h.__OnSourceUIClose&&D.RegisterEvent("OnSourceUIClose",h.__OnSourceUIClose),""!=h.__OnTransferCancelled&&D.RegisterEvent("OnTransferCancelled",h.__OnTransferCancelled),""!=h.__OnTransferError&&D.RegisterEvent("OnTransferError",h.__OnTransferError),""!=h.__OnInternetTransferPercentage&&D.RegisterEvent("OnInternetTransferPercentage",h.__OnInternetTransferPercentage),""!=h.__OnInternetTransferPercentageEx&&D.RegisterEvent("OnInternetTransferPercentageEx",h.__OnInternetTransferPercentageEx),C(h,"OnMouseWheel"),C(h,"OnKeyDown"),C(h,"OnPaintDone"))}},v.D.noControl=function(_){if(v.I.DWT.IfUseEmbeddedDownloadNoticeForActiveX)if(v.D.isFunction(v.D.detect.onNoControl))v.D.detect.onNoControl(v.D.get(_._containerID),_._strWidth,_._strHeight);else for(var h=v.D.detect.arySTwains,y=0;y<h.length;y++){var p=h[y];D=C=void 0,(D="")==(C=v.D.get((T=p)._strDWTNonInstallInnerContainerID)).innerHTML&&(T=v.I.DWT.ActiveXInstallWithCAB&&I.bIE?["<div style='display: block; border:solid black 1px; text-align:center; width:",T._strWidth,";height:",T._strHeight,"'>","<ul style='padding-top:100px;list-style:none'>","<li>The Component is not installed</li>","<li>You need to download and install the ActiveX to use this sample.</li>","<li>Please follow the instructions in the information bar.</li>","</ul></div>"].join(""):(location,D=v.D.product.bHTML5Edition||I.bIE?v.I.dcp.getDSPath():I.bWin?v.D.product.getMSIPath():v.D.product.getPKGPath(),["<div style='display: block; border:solid black 1px; text-align:center; width:",T._strWidth,";height:",T._strHeight,"'>","<ul style='padding-top:100px;list-style:none'>","<li>The Component is not installed</li>","<li>You need to download and install to use this sample.</li>","<li>Please click the below link to download it.</li>","<li><a href='",D,"'>Download</a></li>","</ul></div>"].join("")),C.innerHTML=T),v.D.show(p._strDWTNonInstallInnerContainerID),v.D.hide(p._strDWTInnerContainerID)}else{_=v.D.product;var m="";v.D.isFunction(v.I.OnWebTwainNotFoundOnWindowsCallback)&&(m=I.bIE||_.bHTML5Edition?v.I.dcp.getDSPath():_.getMSIPath(),v.I.OnWebTwainNotFoundOnWindowsCallback(_.name,m,_.bHTML5Edition,I.bIE,I.bSafari,v.D.detect.ssl,v.D.env.strIEVersion,!1))}var T,C,D}},1695:function(e,n,t){t.d(n,{D:function(){return a},I:function(){return r}});var r=window.Dynamsoft,a=window.Dynamsoft.Lib},1255:function(e,I,l){l.d(I,{$E:function(){return v},$n:function(){return a},Bm:function(){return u},CH:function(){return r},LX:function(){return _},Ne:function(){return o},Sf:function(){return c},UJ:function(){return s},Vn:function(){return h},oU:function(){return f}}),I=l(8066),I=l.n(I);var r="17",a="3",o="0",u="0531",s=1,f=7,v=3,c={JSVersion:l=I()(I=I()(l="".concat(r,",").concat(a,",")).call(l,o,",")).call(I,u),ServerVersionInfo:l,ServerLinuxVersionInfo:l,ServerMacVersionInfo:l,ActiveXVersion:l,PdfVersion:"11.4.0.0531",ProductName:I=0==o?"Dynamic Web TWAIN "+[r,a].join("."):"Dynamic Web TWAIN "+[r,a,o].join("."),Containers:[],DynamicContainers:[],ContainerMap:{},Trial:!1,ResourcesPath:"Resources",Debug:!1,IfUpdateService:!1,AutoLoad:!0,ReConnectToService:!0,OnWebTwainReady:!1,OnWebTwainNotFound:!1,OnWebTwainOldPluginNotAllowed:!1,OnWebTwainNeedUpgrade:!1,OnWebTwainNeedUpgradeWebJavascript:!1,OnWebTwainInitMessage:!1,ViewerJSIntegerited:!0,ActiveXInstallWithCAB:!1,IfUseActiveXForIE10Plus:!1,IfInstallDWTModuleWithZIP:!1,IfUseEmbeddedDownloadNoticeForActiveX:!1,IfCheckDCP:!1,IfDisableDefaultSettings:!1,OnWebTwainWillInit:!1,IfAddMD5InUploadHeader:!1,IfAlwaysFocusOnPopupWindow:!0,IfConfineMaskWithinTheViewer:!0,IfUseWSPool:!1,UseDefaultViewer:!0,fetchOptions:{mode:"cors",credentials:"same-origin"},HideTrialMessage:!1,CheckCertExpired:!0,ConnectWithSocket:!1,SSLPort:18623,Port:18622,handshakeCode:void 0,organizationID:void 0,licenseServer:void 0,sessionPassword:"",ltsDebug:!1,showLoadingMsgDialog:!0},_={URL:"",UpdateDaysBeforeExpired:30},h={loaderBarClassName:"ds-dwt-loaderBar",loaderBarBackgroundColor:"",loaderBarSource:Q.navInfoSync.bIE?Q.Lib.loaderBarSourceIE:Q.Lib.loaderBarSource,errorMessages:{ERR_MODULE_NOT_INSTALLED:"Error: The Dynamic Web TWAIN module is not installed.",ERR_BROWSER_NOT_SUPPORT:"Error: This browser is currently not supported.",ERR_CreateID_MustNotInContainers:"Error: Duplicate ContainerId detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_WebTwainIdDuplicated:"Error: Duplicate id detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_NotContainer:"Error: The ID of the DIV for creating the new DWT object is invalid.",ERR_CreateID_WasmEnvNotLoaded:"Error: The wasm env not loaded.",ERR_DWT_NOT_DOWNLOADED:"Error: Failed to download the Dynamic Web TWAIN module.",limitReachedForZoomIn:"Error: You have reached the limit for zooming in",limitReachedForZoomOut:"Error: You have reached the limit for zooming out",insufficientParas:"Error: Not enough parameters.",invalidAngle:"Error: The angle you entered is invalid.",invalidIndex:"Error: The index you entered is invalid.",invalidHeightOrWidth:"Error: The height or width you entered is invalid.",imageNotChanged:"Error: You have not changed the current image."},generalMessages:{checkingDWTVersion:"Checking WebTwain version ...",updatingDService:"Dynamsoft Service is updating ...",downloadingDWTModule:"Downloading the Dynamic Web TWAIN module.",refreshNeeded:"Please REFRESH your browser.",downloadNeeded:"Please download and install the Dynamic Web TWAIN.",DWTmoduleLoaded:"The Dynamic Web TWAIN module is loaded."},customProgressText:{upload:"Uploading...",download:"Downloading...",load:"Loading...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encode:"Processing...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",canvasLoading:"Loading ..."},buttons:{titles:{previous:"Previous Image",next:"Next Image",print:"Print Image",scan:"Scan Documents",load:"Load Local Images",rotateleft:"Rotate Left",rotate:"Rotate",rotateright:"Rotate Right",deskew:"Deskew",crop:"Crop Selected Area",cut:"Cut Selected Area",changeimagesize:"Change Image Size",flip:"Flip Image",mirror:"Mirror Image",zoomin:"Zoom In",originalsize:"Show Original Size",zoomout:"Zoom Out",stretch:"Stretch Mode",fit:"Fit Window",fitw:"Fit Horizontally",fith:"Fit Vertically",hand:"Hand Mode",rectselect:"Select Mode",zoom:"Click to Zoom In",restore:"Restore Original Image",save:"Save Changes",close:"Close the Editor",removeall:"Remove All Images",removeselected:"Remove All Selected Images"},bShowAllButtons:!0,visibility:{scan:!0,load:!0,print:!0,removeall:!0,removeselected:!0,rotateleft:!0,rotate:!0,rotateright:!0,deskew:!0,crop:!0,cut:!0,changeimagesize:!0,flip:!0,mirror:!0,zoomin:!0,originalsize:!0,zoomout:!0,stretch:!0,fit:!0,fitw:!0,fith:!0,hand:!0,rectselect:!0,zoom:!0,restore:!0,save:!0,close:!0}},dialogText:{dlgRotateAnyAngle:["Angle :","Interpolation:","Keep size","  OK  ","Cancel"],dlgChangeImageSize:["New Height :","New Width :","Interpolation method:","  OK  ","Cancel"],saveChangedImage:["You have changed the image. Do you want to keep the change(s)?","  Yes  ","  No  "],selectSource:["Select Source:","Select","Cancel","There is no source available!"]}}},4130:function(e,n,t){t.d(n,{R:function(){return a}});var r=1;function a(){return++r}},1188:function(e,a,t){t.d(a,{An:function(){return I},dv:function(){return c},yN:function(){return l}}),a=t(5238);var r=t.n(a),o=(a=Q.Lib).isString,u=a.isArray,s=a.each;function l(_,h){var y;o(h)?(_.push('"'),_.push(h),_.push('"')):u(h)?(y=!0,_.push("["),s(h,function(p){y?y=!1:_.push(","),l(_,p)}),_.push("]")):_.push(void 0===h?'""':h)}function I(){for(var _=arguments.length,h=new Array(_),y=0;y<_;y++)h[y]=arguments[y];return h}function c(){for(var _,h,y=[],p=arguments.length,m=new Array(p),T=0;T<p;T++)m[T]=arguments[T];return 0<m.length&&(1===m.length?(_=m[0],y.push("["),l(y,_),y.push("]")):2===m.length?(_=m[0],h=m[1],y.push("["),l(y,_),y.push(","),l(y,h),y.push("]")):l(y,r()(Array.prototype).call(m))),y.join("")}},5316:function(e,n,t){t=t(7784),e.exports=t},93:function(e,n,t){t=t(8196),e.exports=t},2772:function(e,n,t){t=t(8065),e.exports=t},327:function(e,n,t){t=t(5247),e.exports=t},3688:function(e,n,t){t=t(1955),e.exports=t},5684:function(e,n,t){t=t(9373),e.exports=t},682:function(e,n,t){t=t(1022),e.exports=t},729:function(e,n,t){t=t(7145),e.exports=t},4234:function(e,n,t){t=t(2073),e.exports=t},900:function(e,n,t){t=t(2348),e.exports=t},5598:function(e,n,t){t=t(5178),e.exports=t},6279:function(e,n,t){t=t(6361),e.exports=t},7679:function(e,n,t){t=t(8933),e.exports=t},2271:function(e,n,t){t=t(4471),e.exports=t},3536:function(e,n,t){t=t(1910),e.exports=t},9565:function(e,n,t){t=t(6507),e.exports=t},5012:function(e,n,t){t=t(3059),e.exports=t},8690:function(e,n,t){t=t(6670),e.exports=t},2679:function(e,n,t){t=t(6877),e.exports=t},4116:function(e,n,t){t=t(4888),e.exports=t},5626:function(e,n,t){t=t(7460),e.exports=t},4670:function(e,n,t){t=t(1895),e.exports=t},4942:function(e,n,t){t=t(3474),e.exports=t},5057:function(e,n,t){t=t(7989),e.exports=t},281:function(e,n,t){t=t(2547),e.exports=t},31:function(e,n,t){t=t(6509),e.exports=t},7877:function(e,n,t){t=t(7641),e.exports=t},1718:function(e,n,t){t=t(2010),e.exports=t},9002:function(e,n,t){t=t(3726),e.exports=t},5367:function(e,n,t){t(5906),t=t(5703),e.exports=t("Array").concat},2383:function(e,n,t){t(1501),t=t(5703),e.exports=t("Array").filter},8700:function(e,n,t){t(9076),t=t(5703),e.exports=t("Array").indexOf},9728:function(e,n,t){t(8071),t=t(5703),e.exports=t("Array").lastIndexOf},4900:function(e,n,t){t(186),t=t(5703),e.exports=t("Array").slice},8209:function(e,n,t){t(8611),t=t(5703),e.exports=t("Array").splice},1103:function(e,n,t){t(5160),t=t(4058),e.exports=t.Date.now},7700:function(e,n,t){t(3381),t=t(5703),e.exports=t("Function").bind},6246:function(e,n,t){var r=t(7046),a=t(7700),o=Function.prototype;e.exports=function(u){var s=u.bind;return u===o||r(o,u)&&s===o.bind?a:s}},6043:function(e,n,t){var r=t(7046),a=t(5367),o=Array.prototype;e.exports=function(u){var s=u.concat;return u===o||r(o,u)&&s===o.concat?a:s}},1727:function(e,n,t){var r=t(7046),a=t(7796),o=String.prototype;e.exports=function(u){var s=u.endsWith;return"string"==typeof u||u===o||r(o,u)&&s===o.endsWith?a:s}},2480:function(e,n,t){var r=t(7046),a=t(2383),o=Array.prototype;e.exports=function(u){var s=u.filter;return u===o||r(o,u)&&s===o.filter?a:s}},4570:function(e,n,t){var r=t(7046),a=t(8700),o=Array.prototype;e.exports=function(u){var s=u.indexOf;return u===o||r(o,u)&&s===o.indexOf?a:s}},7564:function(e,n,t){var r=t(7046),a=t(9728),o=Array.prototype;e.exports=function(u){var s=u.lastIndexOf;return u===o||r(o,u)&&s===o.lastIndexOf?a:s}},9279:function(e,n,t){var r=t(7046),a=t(9615),o=String.prototype;e.exports=function(u){var s=u.replaceAll;return"string"==typeof u||u===o||r(o,u)&&s===o.replaceAll?a:s}},9601:function(e,n,t){var r=t(7046),a=t(4900),o=Array.prototype;e.exports=function(u){var s=u.slice;return u===o||r(o,u)&&s===o.slice?a:s}},8339:function(e,n,t){var r=t(7046),a=t(8209),o=Array.prototype;e.exports=function(u){var s=u.splice;return u===o||r(o,u)&&s===o.splice?a:s}},1611:function(e,n,t){var r=t(7046),a=t(3269),o=String.prototype;e.exports=function(u){var s=u.startsWith;return"string"==typeof u||u===o||r(o,u)&&s===o.startsWith?a:s}},2774:function(e,n,t){var r=t(7046),a=t(3348),o=String.prototype;e.exports=function(u){var s=u.trim;return"string"==typeof u||u===o||r(o,u)&&s===o.trim?a:s}},4426:function(e,n,t){t(2619);var r=t(4058),a=t(9730);r.JSON||(r.JSON={stringify:JSON.stringify}),e.exports=function(o,u,s){return a(r.JSON.stringify,null,arguments)}},5254:function(e,n,t){t(6950);var r=t(4058).Object;e.exports=function(a,o){return r.create(a,o)}},8171:function(e,n,t){t(6450);var r=t(4058).Object,a=e.exports=function(u,s,f){return r.defineProperty(u,s,f)};r.defineProperty.sham&&(a.sham=!0)},3966:function(e,n,t){t(7405),t=t(4058),e.exports=t.Object.getPrototypeOf},8494:function(e,n,t){t(1724),t=t(4058),e.exports=t.Object.keys},3065:function(e,n,t){t(108),t=t(4058),e.exports=t.Object.setPrototypeOf},7579:function(e,n,t){t(9718),t=t(4058),e.exports=t.parseFloat},8524:function(e,n,t){t(4038),t=t(4058),e.exports=t.parseInt},2956:function(e,n,t){t(7627),t(6274),t(5967),t(8881),t(4560),t(7206),t(4349),t(7971),t=t(4058),e.exports=t.Promise},4983:function(e,n,t){t(7453),t=t(4058),e.exports=t.Reflect.construct},7796:function(e,n,t){t(1293),t=t(5703),e.exports=t("String").endsWith},9615:function(e,n,t){t(7091),t(3475),t(6226),t=t(5703),e.exports=t("String").replaceAll},3269:function(e,n,t){t(4761),t=t(5703),e.exports=t("String").startsWith},3348:function(e,n,t){t(6371),t=t(5703),e.exports=t("String").trim},7473:function(e,n,t){t(5906),t(5967),t(5824),t(8555),t(2615),t(1732),t(5903),t(1825),t(8394),t(5915),t(1766),t(2737),t(9911),t(4315),t(3131),t(4714),t(659),t(9120),t(5327),t(1502),t=t(4058),e.exports=t.Symbol},4227:function(e,n,t){t(6274),t(5967),t(7971),t(1825),t=t(1477),e.exports=t.f("iterator")},2304:function(e,n,t){t(6274),t(5967),t(4334),t=t(4058),e.exports=t.WeakMap},9567:function(e,n,t){t(6274),t(5967),t(1773),t=t(4058),e.exports=t.WeakSet},2626:function(e,n,t){e.exports=t(6526)},4122:function(e,n,t){e.exports=t(9097)},1086:function(e,n,t){e.exports=t(898)},7895:function(e,n,t){e.exports=t(8675)},4442:function(e,n,t){e.exports=t(1675)},9447:function(e,n,t){e.exports=t(628)},5376:function(e,n,t){e.exports=t(8460)},6769:function(e,n,t){e.exports=t(3893)},1493:function(e,n,t){e.exports=t(7088)},1777:function(e,n,t){e.exports=t(2792)},5319:function(e,n,t){e.exports=t(8744)},5425:function(e,n,t){e.exports=t(6384)},2740:function(e,n,t){e.exports=t(9821)},6094:function(e,n,t){e.exports=t(6467)},3685:function(e,n,t){e.exports=t(621)},4303:function(e,n,t){e.exports=t(8688)},3799:function(e,n,t){e.exports=t(2093)},5122:function(e,n,t){e.exports=t(5383)},1645:function(e,n,t){e.exports=t(5796)},3103:function(e,n,t){e.exports=t(6309)},9531:function(e,n,t){e.exports=t(2050)},856:function(e,n,t){e.exports=t(6733)},1490:function(e,n,t){e.exports=t(6170)},4803:function(e,n,t){e.exports=t(1051)},6600:function(e,n,t){e.exports=t(2201)},9759:function(e,n,t){e.exports=t(7398)},7740:function(e,n,t){e.exports=t(3085)},8714:function(e,n,t){e.exports=t(3463)},2790:function(e,n,t){e.exports=t(5069)},6526:function(e,n,t){t=t(5316),e.exports=t},9097:function(e,n,t){t=t(93),e.exports=t},898:function(e,n,t){t=t(2772),e.exports=t},8675:function(e,n,t){t=t(327),e.exports=t},1675:function(e,n,t){t=t(3688),e.exports=t},628:function(e,n,t){t=t(5684),e.exports=t},8460:function(e,n,t){t=t(682),e.exports=t},3893:function(e,n,t){t=t(729),e.exports=t},7088:function(e,n,t){t=t(4234),e.exports=t},2792:function(e,n,t){t=t(900),e.exports=t},8744:function(e,n,t){t=t(5598),e.exports=t},6384:function(e,n,t){t=t(6279),e.exports=t},9821:function(e,n,t){t=t(7679),e.exports=t},6467:function(e,n,t){t=t(2271),e.exports=t},621:function(e,n,t){t=t(3536),e.exports=t},8688:function(e,n,t){t=t(9565),e.exports=t},2093:function(e,n,t){t=t(5012),e.exports=t},5383:function(e,n,t){t=t(8690),e.exports=t},5796:function(e,n,t){t=t(2679),e.exports=t},6309:function(e,n,t){t=t(4116),e.exports=t},2050:function(e,n,t){var r=t(5626);t(9731),t(5708),t(14),t(8731),e.exports=r},6733:function(e,n,t){t=t(4670),e.exports=t},6170:function(e,n,t){t=t(4942),e.exports=t},1051:function(e,n,t){t=t(5057),e.exports=t},2201:function(e,n,t){var r=t(281);t(8783),t(3975),t(5799),t(1943),t(6774),t(5414),t(620),t(6172),e.exports=r},7398:function(e,n,t){t=t(31),e.exports=t},3085:function(e,n,t){t=t(7877),e.exports=t},3463:function(e,n,t){var r=t(1718);t(7971),t(6442),t(6207),t(3215),t(4629),t(4055),e.exports=r},5069:function(e,n,t){var r=t(9002);t(7971),t(5896),t(5501),t(2511),t(3309),e.exports=r},4883:function(e,n,t){var r=t(7475),a=t(9826),o=TypeError;e.exports=function(u){if(r(u))return u;throw o(a(u)+" is not a function")}},174:function(e,n,t){var r=t(4284),a=t(9826),o=TypeError;e.exports=function(u){if(r(u))return u;throw o(a(u)+" is not a constructor")}},1851:function(e,n,t){var r=t(7475),a=String,o=TypeError;e.exports=function(u){if("object"==typeof u||r(u))return u;throw o("Can't set "+a(u)+" as a prototype")}},8479:function(e){e.exports=function(){}},5743:function(e,n,t){var r=t(7046),a=TypeError;e.exports=function(o,u){if(r(u,o))return o;throw a("Incorrect invocation")}},6059:function(e,n,t){var r=t(941),a=String,o=TypeError;e.exports=function(u){if(r(u))return u;throw o(a(u)+" is not an object")}},7135:function(e,n,t){t=t(5981),e.exports=t(function(){var r;"function"==typeof ArrayBuffer&&(r=new ArrayBuffer(8),Object.isExtensible(r)&&Object.defineProperty(r,"a",{value:8}))})},1354:function(e,n,t){var r=t(6843),a=t(8834),o=t(9678),u=t(5196),s=t(6782),f=t(4284),v=t(623),l=t(5449),I=t(3476),c=t(2902),_=Array;e.exports=function(M){var y,p,m,T,C,D,W,S=o(M),G=(M=f(this),1<(W=arguments.length)?arguments[1]:void 0),L=void 0!==G,F=0;if(L&&(G=r(G,2<W?arguments[2]:void 0)),!(W=c(S))||this===_&&s(W))for(y=v(S),p=M?new this(y):_(y);F<y;F++)D=L?G(S[F],F):S[F],l(p,F,D);else for(C=(T=I(S,W)).next,p=M?new this:[];!(m=a(C,T)).done;F++)D=L?u(T,G,[m.value,F],!0):m.value,l(p,F,D);return p.length=F,p}},1692:function(e,n,u){var r=u(4529),a=u(9413),o=u(623);e.exports={includes:(u=function(s){return function(f,v,l){var I,c=r(f),_=o(c),h=a(l,_);if(s&&v!=v){for(;h<_;)if((I=c[h++])!=I)return!0}else for(;h<_;h++)if((s||h in c)&&c[h]===v)return s||h||0;return!s&&-1}})(!0),indexOf:u(!1)}},3610:function(e,n,l){var r=l(6843),a=l(5329),o=l(7026),u=l(9678),s=l(623),f=l(4692),v=a([].push);e.exports={forEach:(l=function(I){var c=1==I,_=2==I,h=3==I,y=4==I,p=6==I,m=7==I,T=5==I||p;return function(C,D,S,M){for(var G,L,W=u(C),F=o(W),U=r(D,S),H=s(F),Z=0,X=(D=M||f,c?D(C,H):_||m?D(C,0):void 0);Z<H;Z++)if((T||Z in F)&&(L=U(G=F[Z],Z,W),I))if(c)X[Z]=L;else if(L)switch(I){case 3:return!0;case 5:return G;case 6:return Z;case 2:v(X,G)}else switch(I){case 4:return!1;case 7:v(X,G)}return p?-1:h||y?y:X}})(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},247:function(e,n,l){var r=l(9730),a=l(4529),o=l(2435),u=l(623),s=(l=l(4194),Math.min),f=[].lastIndexOf,v=!!f&&1/[1].lastIndexOf(1,-0)<0;l=l("lastIndexOf"),e.exports=v||!l?function(I){if(v)return r(f,this,arguments)||0;var c=a(this),_=u(c),h=_-1;for((h=1<arguments.length?s(h,o(arguments[1])):h)<0&&(h=_+h);0<=h;h--)if(h in c&&c[h]===I)return h||0;return-1}:f},568:function(e,n,t){var r=t(5981),a=t(9813),o=t(3385),u=a("species");e.exports=function(s){return 51<=o||!r(function(){var f=[];return(f.constructor={})[u]=function(){return{foo:1}},1!==f[s](Boolean).foo})}},4194:function(e,n,t){var r=t(5981);e.exports=function(a,o){var u=[][a];return!!u&&r(function(){u.call(null,o||function(){return 1},1)})}},5790:function(e,n,t){var r=t(9413),a=t(623),o=t(5449),u=Array,s=Math.max;e.exports=function(f,v,l){for(var I=a(f),c=r(v,I),_=r(void 0===l?I:l,I),h=u(s(_-c,0)),y=0;c<_;c++,y++)o(h,y,f[c]);return h.length=y,h}},3765:function(e,n,t){t=t(5329),e.exports=t([].slice)},1388:function(e,n,t){var r=t(5790),a=Math.floor,o=function(u,s){var f=u.length,v=a(f/2);if(f<8){for(var l,I,c=u,_=s,h=c.length,y=1;y<h;){for(l=c[I=y];I&&0<_(c[I-1],l);)c[I]=c[--I];I!==y++&&(c[I]=l)}return c}for(var p=u,m=o(r(u,0,v),s),T=o(r(u,v),s),C=s,D=m.length,S=T.length,M=0,G=0;M<D||G<S;)p[M+G]=M<D&&G<S?C(m[M],T[G])<=0?m[M++]:T[G++]:M<D?m[M++]:T[G++];return p};e.exports=o},5693:function(e,n,t){var r=t(1052),a=t(4284),o=t(941),u=t(9813)("species"),s=Array;e.exports=function(f){var v;return r(f)&&(a(v=f.constructor)&&(v===s||r(v.prototype))||o(v)&&null===(v=v[u]))&&(v=void 0),void 0===v?s:v}},4692:function(e,n,t){var r=t(5693);e.exports=function(a,o){return new(r(a))(0===o?0:o)}},5196:function(e,n,t){var r=t(6059),a=t(7609);e.exports=function(o,u,s,f){try{return f?u(r(s)[0],s[1]):u(s)}catch(v){a(o,"throw",v)}}},1385:function(e,n,t){var r=t(9813)("iterator"),a=!1;try{var o=0,u={next:function(){return{done:!!o++}},return:function(){a=!0}};u[r]=function(){return this},Array.from(u,function(){throw 2})}catch{}e.exports=function(s,f){if(!f&&!a)return!1;var v=!1;try{var l={};l[r]=function(){return{next:function(){return{done:v=!0}}}},s(l)}catch{}return v}},2532:function(e,n,r){var a=(r=r(5329))({}.toString),o=r("".slice);e.exports=function(u){return o(a(u),8,-1)}},9697:function(e,n,t){var r=t(2885),a=t(7475),o=t(2532),u=t(9813)("toStringTag"),s=Object,f="Arguments"==o(function(){return arguments}());e.exports=r?o:function(v){var l;return void 0===v?"Undefined":null===v?"Null":"string"==typeof(l=function(I,c){try{return I[c]}catch{}}(v=s(v),u))?l:f?o(v):"Object"==(l=o(v))&&a(v.callee)?"Arguments":l}},8694:function(e,n,o){o=o(5329);var r=Error,a=o("".replace),u=(o=String(r("zxcasd").stack),/\n\s*at [^:]*:[^\n]*/),s=u.test(o);e.exports=function(f,v){if(s&&"string"==typeof f&&!r.prepareStackTrace)for(;v--;)f=a(f,u,"");return f}},7622:function(e,n,t){var r=t(8834),a=t(4883),o=t(6059);e.exports=function(){for(var u=o(this),s=a(u.add),f=0,v=arguments.length;f<v;f++)r(s,u,arguments[f]);return u}},8984:function(e,n,t){var r=t(8834),a=t(4883),o=t(6059);e.exports=function(){for(var u,s=o(this),f=a(s.delete),v=!0,l=0,I=arguments.length;l<I;l++)u=r(f,s,arguments[l]),v=v&&u;return!!v}},3590:function(e,n,t){var r=t(6843),a=t(8834),o=t(4883),u=t(174),s=t(3091),f=[].push;e.exports=function(v){var l,I,c,_,h=arguments.length,y=1<h?arguments[1]:void 0;return u(this),(l=void 0!==y)&&o(y),null==v?new this:(I=[],l?(c=0,_=r(y,2<h?arguments[2]:void 0),s(v,function(p){a(f,I,_(p,c++))})):s(v,f,{that:I}),new this(I))}},5226:function(e,n,t){var r=t(3765);e.exports=function(){return new this(r(arguments))}},8850:function(e,n,c){var r=c(5329),a=c(4380),o=c(1647).getWeakData,u=c(6059),s=c(941),f=c(5743),v=c(3091),l=c(3610),I=c(953),_=(c=c(5402)).set,h=c.getterFor,y=l.find,p=l.findIndex,m=r([].splice),T=0,C=function(M){return M.frozen||(M.frozen=new D)},D=function(){this.entries=[]},S=function(M,G){return y(M.entries,function(L){return L[0]===G})};D.prototype={get:function(M){if(M=S(this,M))return M[1]},has:function(M){return!!S(this,M)},set:function(M,G){var L=S(this,M);L?L[1]=G:this.entries.push([M,G])},delete:function(M){var G=p(this.entries,function(L){return L[0]===M});return~G&&m(this.entries,G,1),!!~G}},e.exports={getConstructor:function(F,G,L,W){var U=(F=F(function(X,$){f(X,U),_(X,{type:G,id:T++,frozen:void 0}),null!=$&&v($,X[W],{that:X,AS_ENTRIES:L})})).prototype,H=h(G),Z=function(X,$,V){var De=H(X),fe=o(u($),!0);return!0===fe?C(De).set($,V):fe[De.id]=V,X};return a(U,{delete:function(X){var $=H(this);if(!s(X))return!1;var V=o(X);return!0===V?C($).delete(X):V&&I(V,$.id)&&delete V[$.id]},has:function(X){var $=H(this);if(!s(X))return!1;var V=o(X);return!0===V?C($).has(X):V&&I(V,$.id)}}),a(U,L?{get:function(X){var $,V=H(this);if(s(X))return!0===($=o(X))?C(V).get(X):$?$[V.id]:void 0},set:function(X,$){return Z(this,X,$)}}:{add:function(X){return Z(this,X,!0)}}),F}}},4683:function(e,n,p){var r=p(6887),a=p(1899),o=p(1647),u=p(5981),s=p(2029),f=p(3091),v=p(5743),l=p(7475),I=p(941),c=p(904),_=p(5988).f,h=p(3610).forEach,y=p(5746),m=(p=p(5402)).set,T=p.getterFor;e.exports=function(C,D,S){var M,G,L,W=-1!==C.indexOf("Map"),F=-1!==C.indexOf("Weak"),U=W?"set":"add",H=a[C],Z=H&&H.prototype,X={};return y&&l(H)&&(F||Z.forEach&&!u(function(){(new H).entries().next()}))?(G=(M=D(function($,V){m(v($,G),{type:C,collection:new H}),null!=V&&f(V,$[U],{that:$,AS_ENTRIES:W})})).prototype,L=T(C),h(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function($){var V="add"==$||"set"==$;$ in Z&&(!F||"clear"!=$)&&s(G,$,function(De,fe){var je=L(this).collection;return V||!F||I(De)?(De=je[$](0===De?0:De,fe),V?this:De):"get"==$&&void 0})}),F||_(G,"size",{configurable:!0,get:function(){return L(this).collection.size}})):(M=S.getConstructor(D,C,W,U),o.enable()),c(M,C,!1,!0),X[C]=M,r({global:!0,forced:!0},X),F||S.setStrong(M,C,W),M}},3489:function(e,n,t){var r=t(953),a=t(1136),o=t(9677),u=t(5988);e.exports=function(s,f,v){for(var l=a(f),I=u.f,c=o.f,_=0;_<l.length;_++){var h=l[_];r(s,h)||v&&r(v,h)||I(s,h,c(f,h))}}},7772:function(e,n,t){var r=t(9813)("match");e.exports=function(a){var o=/./;try{"/./"[a](o)}catch{try{return o[r]=!1,"/./"[a](o)}catch{}}return!1}},4160:function(e,n,t){t=t(5981),e.exports=!t(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},1046:function(e,n,t){var r=t(5143).IteratorPrototype,a=t(9290),o=t(1887),u=t(904),s=t(2077),f=function(){return this};e.exports=function(v,l,I,c){return l+=" Iterator",v.prototype=a(r,{next:o(+!c,I)}),u(v,l,!1,!0),s[l]=f,v}},2029:function(e,n,t){var r=t(5746),a=t(5988),o=t(1887);e.exports=r?function(u,s,f){return a.f(u,s,o(1,f))}:function(u,s,f){return u[s]=f,u}},1887:function(e){e.exports=function(n,t){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:t}}},5449:function(e,n,t){var r=t(3894),a=t(5988),o=t(1887);e.exports=function(u,s,f){(s=r(s))in u?a.f(u,s,o(0,f)):u[s]=f}},9202:function(e,n,t){var r=t(5988);e.exports=function(a,o,u){return r.f(a,o,u)}},5929:function(e,n,t){var r=t(2029);e.exports=function(a,o,u,s){return s&&s.enumerable?a[o]=u:r(a,o,u),a}},4380:function(e,n,t){var r=t(5929);e.exports=function(a,o,u){for(var s in o)u&&u.unsafe&&a[s]?a[s]=o[s]:r(a,s,o[s],u);return a}},5609:function(e,n,t){var r=t(1899),a=Object.defineProperty;e.exports=function(o,u){try{a(r,o,{value:u,configurable:!0,writable:!0})}catch{r[o]=u}return u}},7771:function(e,n,p){var r=p(6887),a=p(8834),o=p(2529),u=p(9417),s=p(7475),f=p(1046),v=p(249),l=p(8929),I=p(904),c=p(2029),_=p(5929),h=p(9813),y=p(2077),m=(p=p(5143),u.PROPER),T=u.CONFIGURABLE,C=p.IteratorPrototype,D=p.BUGGY_SAFARI_ITERATORS,S=h("iterator"),M="values",G=function(){return this};e.exports=function(L,W,F,De,H,Z,X){f(F,W,De),De=function(_t){if(_t===H&&tt)return tt;if(!D&&_t in Se)return Se[_t];switch(_t){case"keys":case M:case"entries":return function(){return new F(this,_t)}}return function(){return new F(this)}};var $,V,fe=W+" Iterator",je=!1,Se=L.prototype,rt=Se[S]||Se["@@iterator"]||H&&Se[H],tt=!D&&rt||De(H),de="Array"==W&&Se.entries||rt;if(de&&(L=v(de.call(new L)))!==Object.prototype&&L.next&&(o||v(L)===C||(l?l(L,C):s(L[S])||_(L,S,G)),I(L,fe,!0,!0),o&&(y[fe]=G)),m&&H==M&&rt&&rt.name!==M&&(!o&&T?c(Se,"name",M):(je=!0,tt=function(){return a(rt,this)})),H)if($={values:De(M),keys:Z?tt:De("keys"),entries:De("entries")},X)for(V in $)!D&&!je&&V in Se||_(Se,V,$[V]);else r({target:W,proto:!0,forced:D||je},$);return o&&!X||Se[S]===tt||_(Se,S,tt,{name:H}),y[W]=tt,$}},6349:function(e,n,t){var r=t(4058),a=t(953),o=t(1477),u=t(5988).f;e.exports=function(s){var f=r.Symbol||(r.Symbol={});a(f,s)||u(f,s,{value:o.f(s)})}},5863:function(e,n,t){var r=t(9826),a=TypeError;e.exports=function(o,u){if(!delete o[u])throw a("Cannot delete property "+r(u)+" of "+r(o))}},5746:function(e,n,t){t=t(5981),e.exports=!t(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},1333:function(e,n,a){var r=a(1899),o=(a=a(941),r.document),u=a(o)&&a(o.createElement);e.exports=function(s){return u?o.createElement(s):{}}},6796:function(e){var n=TypeError;e.exports=function(t){if(9007199254740991<t)throw n("Maximum allowed index exceeded");return t}},3281:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3321:function(e){e.exports="object"==typeof window&&"object"!=typeof Deno},4470:function(e,n,a){var r=a(2861);a=a(1899),e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==a.Pebble},2749:function(e,n,t){t=t(2861),e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(t)},6049:function(e,n,a){var r=a(2532);a=a(1899),e.exports="process"==r(a.process)},8045:function(e,n,t){t=t(2861),e.exports=/web0s(?!.*chrome)/i.test(t)},2861:function(e,n,t){t=t(626),e.exports=t("navigator","userAgent")||""},3385:function(e,n,o){var r,a,s=o(1899),u=(o=o(2861),s.process);s=s.Deno,!(a=(s=(u=u&&u.versions||s&&s.version)&&u.v8)?0<(r=s.split("."))[0]&&r[0]<4?1:+(r[0]+r[1]):a)&&o&&(!(r=o.match(/Edge\/(\d+)/))||74<=r[1])&&(r=o.match(/Chrome\/(\d+)/))&&(a=+r[1]),e.exports=a},5703:function(e,n,t){var r=t(4058);e.exports=function(a){return r[a+"Prototype"]}},6759:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8780:function(e,n,t){var r=t(5981),a=t(1887);e.exports=!r(function(){var o=Error("a");return!("stack"in o)||(Object.defineProperty(o,"stack",a(1,7)),7!==o.stack)})},6887:function(e,n,t){var r=t(1899),a=t(9730),o=t(5329),u=t(7475),s=t(9677).f,f=t(7252),v=t(4058),l=t(6843),I=t(2029),c=t(953);e.exports=function(_,h){var y,p,m,T,C,D=_.target,S=_.global,M=_.stat,G=_.proto,L=S?r:M?r[D]:(r[D]||{}).prototype,W=S?v:v[D]||I(v,D,{})[D],F=W.prototype;for(y in h)T=!f(S?y:D+(M?".":"#")+y,_.forced)&&L&&c(L,y),m=W[y],T&&(C=_.dontCallGetSet?(C=s(L,y))&&C.value:L[y]),p=T&&C?C:h[y],T&&typeof m==typeof p||(T=_.bind&&T?l(p,r):_.wrap&&T?function(U){var H=function(Z,X,$){if(this instanceof H){switch(arguments.length){case 0:return new U;case 1:return new U(Z);case 2:return new U(Z,X)}return new U(Z,X,$)}return a(U,this,arguments)};return H.prototype=U.prototype,H}(p):G&&u(p)?o(p):p,(_.sham||p&&p.sham||m&&m.sham)&&I(T,"sham",!0),I(W,y,T),G&&(c(v,m=D+"Prototype")||I(v,m,{}),I(v[m],y,p),_.real&&F&&!F[y]&&I(F,y,p)))}},5981:function(e){e.exports=function(n){try{return!!n()}catch{return!0}}},5602:function(e,n,t){t=t(5981),e.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},9730:function(e,n,r){r=r(8285);var a=Function.prototype,o=a.apply,u=a.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?u.bind(o):function(){return u.apply(o,arguments)})},6843:function(e,n,t){var r=t(5329),a=t(4883),o=t(8285),u=r(r.bind);e.exports=function(s,f){return a(s),void 0===f?s:o?u(s,f):function(){return s.apply(f,arguments)}}},8285:function(e,n,t){t=t(5981),e.exports=!t(function(){var r=function(){}.bind();return"function"!=typeof r||r.hasOwnProperty("prototype")})},8308:function(e,n,f){var r=f(5329),a=f(4883),o=f(941),u=f(953),s=f(3765),v=(f=f(8285),Function),l=r([].concat),I=r([].join),c={};e.exports=f?v.bind:function(_){var h=a(this),y=h.prototype,p=s(arguments,1),m=function(){var T=l(p,s(arguments));if(this instanceof m){var C=h,D=T.length,S=T;if(!u(c,D)){for(var M=[],G=0;G<D;G++)M[G]="a["+G+"]";c[D]=v("C,a","return new C("+I(M,",")+")")}return c[D](C,S)}return h.apply(_,T)};return o(y)&&(m.prototype=y),m}},8834:function(e,n,r){r=r(8285);var a=Function.prototype.call;e.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},9417:function(e,n,o){var s=o(5746),r=(o=o(953),Function.prototype),a=s&&Object.getOwnPropertyDescriptor,u=(o=o(r,"name"))&&"something"===function(){}.name;s=o&&(!s||a(r,"name").configurable),e.exports={EXISTS:o,PROPER:u,CONFIGURABLE:s}},5329:function(e,n,r){r=r(8285);var a=Function.prototype,u=a.call,s=r&&a.bind.bind(u,u);e.exports=r?function(f){return f&&s(f)}:function(f){return f&&function(){return u.apply(f,arguments)}}},626:function(e,n,t){var r=t(4058),a=t(1899),o=t(7475),u=function(s){return o(s)?s:void 0};e.exports=function(s,f){return arguments.length<2?u(r[s])||u(a[s]):r[s]&&r[s][f]||a[s]&&a[s][f]}},2902:function(e,n,t){var r=t(9697),a=t(4229),o=t(2077),u=t(9813)("iterator");e.exports=function(s){if(null!=s)return a(s,u)||a(s,"@@iterator")||o[r(s)]}},3476:function(e,n,t){var r=t(8834),a=t(4883),o=t(6059),u=t(9826),s=t(2902),f=TypeError;e.exports=function(v,l){var I=arguments.length<2?s(v):l;if(a(I))return o(r(I,v));throw f(u(v)+" is not iterable")}},4229:function(e,n,t){var r=t(4883);e.exports=function(a,o){return null==(o=a[o])?void 0:r(o)}},4342:function(e,n,t){var r=t(5329),a=t(9678),o=Math.floor,u=r("".charAt),s=r("".replace),f=r("".slice),v=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(I,c,_,h,y,p){var m=_+I.length,T=h.length,C=l;return void 0!==y&&(y=a(y),C=v),s(p,C,function(D,S){var M;switch(u(S,0)){case"$":return"$";case"&":return I;case"`":return f(c,0,_);case"'":return f(c,m);case"<":M=y[f(S,1,-1)];break;default:var G,L=+S;if(0==L)return D;if(T<L)return 0!==(G=o(L/10))&&G<=T?void 0===h[G-1]?u(S,1):h[G-1]+u(S,1):D;M=h[L-1]}return void 0===M?"":M})}},1899:function(e,n,t){var r=function(a){return a&&a.Math==Math&&a};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t.g&&t.g)||function(){return this}()||Function("return this")()},953:function(e,n,t){var r=t(5329),a=t(9678),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(u,s){return o(a(u),s)}},7748:function(e){e.exports={}},3146:function(e,n,t){var r=t(1899);e.exports=function(a,o){var u=r.console;u&&u.error&&(1==arguments.length?u.error(a):u.error(a,o))}},5463:function(e,n,t){t=t(626),e.exports=t("document","documentElement")},2840:function(e,n,t){var r=t(5746),a=t(5981),o=t(1333);e.exports=!r&&!a(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},7026:function(e,n,t){var r=t(5329),a=t(5981),o=t(2532),u=Object,s=r("".split);e.exports=a(function(){return!u("z").propertyIsEnumerable(0)})?function(f){return"String"==o(f)?s(f,""):u(f)}:u},1302:function(e,n,o){var r=o(5329),a=o(7475),u=(o=o(3030),r(Function.toString));a(o.inspectSource)||(o.inspectSource=function(s){return u(s)}),e.exports=o.inspectSource},3794:function(e,n,t){var r=t(941),a=t(2029);e.exports=function(o,u){r(u)&&"cause"in u&&a(o,"cause",u.cause)}},1647:function(e,n,t){var r=t(6887),a=t(5329),o=t(7748),u=t(941),s=t(953),f=t(5988).f,v=t(946),l=t(684),I=t(1584),c=t(9418),_=t(5602),h=!1,y=c("meta"),p=0,m=function(C){f(C,y,{value:{objectID:"O"+p++,weakData:{}}})},T=e.exports={enable:function(){T.enable=function(){},h=!0;var C=v.f,D=a([].splice),S={};S[y]=1,C(S).length&&(v.f=function(M){for(var G=C(M),L=0,W=G.length;L<W;L++)if(G[L]===y){D(G,L,1);break}return G},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(C,D){if(!u(C))return"symbol"==typeof C?C:("string"==typeof C?"S":"P")+C;if(!s(C,y)){if(!I(C))return"F";if(!D)return"E";m(C)}return C[y].objectID},getWeakData:function(C,D){if(!s(C,y)){if(!I(C))return!0;if(!D)return!1;m(C)}return C[y].weakData},onFreeze:function(C){return _&&h&&I(C)&&!s(C,y)&&m(C),C}};o[y]=!0},5402:function(e,n,T){var r,a,o,u,s,f,v,l,I=T(8019),S=T(1899),c=T(5329),_=T(941),h=T(2029),y=T(953),p=T(3030),m=T(4262),C=(T=T(7748),"Object already initialized"),D=S.TypeError;S=S.WeakMap,v=I||p.state?(r=p.state||(p.state=new S),a=c(r.get),o=c(r.has),u=c(r.set),s=function(M,G){if(o(r,M))throw new D(C);return G.facade=M,u(r,M,G),G},f=function(M){return a(r,M)||{}},function(M){return o(r,M)}):(T[l=m("state")]=!0,s=function(M,G){if(y(M,l))throw new D(C);return G.facade=M,h(M,l,G),G},f=function(M){return y(M,l)?M[l]:{}},function(M){return y(M,l)}),e.exports={set:s,get:f,has:v,enforce:function(M){return v(M)?f(M):s(M,{})},getterFor:function(M){return function(G){if(_(G)&&(G=f(G)).type===M)return G;throw D("Incompatible receiver, "+M+" required")}}}},6782:function(e,n,t){var r=t(9813),a=t(2077),o=r("iterator"),u=Array.prototype;e.exports=function(s){return void 0!==s&&(a.Array===s||u[o]===s)}},1052:function(e,n,t){var r=t(2532);e.exports=Array.isArray||function(a){return"Array"==r(a)}},7475:function(e){e.exports=function(n){return"function"==typeof n}},4284:function(e,n,p){var r=p(5329),a=p(5981),o=p(7475),u=p(9697),s=p(626),f=p(1302),v=function(){},l=[],I=s("Reflect","construct"),c=/^\s*(?:class|function)\b/,_=r(c.exec),h=!c.exec(v),y=function(m){if(!o(m))return!1;try{return I(v,l,m),!0}catch{return!1}};(p=function(m){if(!o(m))return!1;switch(u(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!_(c,f(m))}catch{return!0}}).sham=!0,e.exports=!I||a(function(){var m;return y(y.call)||!y(Object)||!y(function(){m=!0})||m})?p:y},7252:function(e,n,u){var r=u(5981),a=u(7475),o=/#|\.prototype\./,s=(u=function(I,c){return(I=f[s(I)])==l||I!=v&&(a(c)?r(c):!!c)}).normalize=function(I){return String(I).replace(o,".").toLowerCase()},f=u.data={},v=u.NATIVE="N",l=u.POLYFILL="P";e.exports=u},941:function(e,n,t){var r=t(7475);e.exports=function(a){return"object"==typeof a?null!==a:r(a)}},2529:function(e){e.exports=!0},685:function(e,n,t){var r=t(941),a=t(2532),o=t(9813)("match");e.exports=function(u){var s;return r(u)&&(void 0!==(s=u[o])?!!s:"RegExp"==a(u))}},6664:function(e,n,u){var r=u(626),a=u(7475),o=u(7046),s=(u=u(2302),Object);e.exports=u?function(f){return"symbol"==typeof f}:function(f){var v=r("Symbol");return a(v)&&o(v.prototype,s(f))}},3091:function(e,n,t){var r=t(6843),a=t(8834),o=t(6059),u=t(9826),s=t(6782),f=t(623),v=t(7046),l=t(3476),I=t(2902),c=t(7609),_=TypeError,h=function(p,m){this.stopped=p,this.result=m},y=h.prototype;e.exports=function(p,m,T){var C,D,S,M,G,L,F=!(!T||!T.AS_ENTRIES),U=!(!T||!T.IS_ITERATOR),H=!(!T||!T.INTERRUPTED),Z=r(m,T&&T.that),X=function(V){return C&&c(C,"normal",V),new h(!0,V)},$=function(V){return F?(o(V),H?Z(V[0],V[1],X):Z(V[0],V[1])):H?Z(V,X):Z(V)};if(U)C=p;else{if(!(T=I(p)))throw _(u(p)+" is not iterable");if(s(T)){for(D=0,S=f(p);D<S;D++)if((M=$(p[D]))&&v(y,M))return M;return new h(!1)}C=l(p,T)}for(G=C.next;!(L=a(G,C)).done;){try{M=$(L.value)}catch(V){c(C,"throw",V)}if("object"==typeof M&&M&&v(y,M))return M}return new h(!1)}},7609:function(e,n,t){var r=t(8834),a=t(6059),o=t(4229);e.exports=function(u,s,f){var v,l;a(u);try{if(!(v=o(u,"return"))){if("throw"===s)throw f;return f}v=r(v,u)}catch(I){l=!0,v=I}if("throw"===s)throw f;if(l)throw v;return a(v),f}},5143:function(e,n,l){var r,a,o=l(5981),u=l(7475),s=l(9290),f=l(249),v=l(5929),c=l(9813),I=(l=l(2529),c("iterator"));c=!1,[].keys&&("next"in(a=[].keys())?(a=f(f(a)))!==Object.prototype&&(r=a):c=!0),null==r||o(function(){var _={};return r[I].call(_)!==_})?r={}:l&&(r=s(r)),u(r[I])||v(r,I,function(){return this}),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:c}},2077:function(e){e.exports={}},623:function(e,n,t){var r=t(3057);e.exports=function(a){return r(a.length)}},8721:function(e,n,t){var r=t(8834),a=t(4883),o=t(6059);e.exports=function(u,s){var f=o(this),v=a(f.get),I=a(f.has),l=a(f.set);return I=r(I,f,u)&&"update"in s?s.update(r(v,f,u),u,f):s.insert(u,f),r(l,f,u,I),I}},716:function(e,n,t){var r=t(8834),a=t(4883),o=t(7475),u=t(6059),s=TypeError;e.exports=function(f,v){var l,I=u(this),c=a(I.get),_=a(I.has),h=a(I.set),y=2<arguments.length?arguments[2]:void 0;if(o(v)||o(y))return r(_,I,f)?(l=r(c,I,f),o(v)&&(l=v(l),r(h,I,f,l))):o(y)&&(l=y(),r(h,I,f,l)),l;throw s("At least one callback required")}},5331:function(e){var n=Math.ceil,t=Math.floor;e.exports=Math.trunc||function(r){return(0<(r=+r)?t:n)(r)}},6132:function(e,n,m){var r,a,o,u,s,f,v,l=m(1899),I=m(6843),S=m(9677).f,c=m(2941).set,_=m(2749),h=m(4470),y=m(8045),p=m(6049),T=(m=l.MutationObserver||l.WebKitMutationObserver,l.document),C=l.process,D=l.Promise;(S=(S=S(l,"queueMicrotask"))&&S.value)||(r=function(){var M,G;for(p&&(M=C.domain)&&M.exit();a;){G=a.fn,a=a.next;try{G()}catch(L){throw a?u():o=void 0,L}}o=void 0,M&&M.enter()},u=_||p||y||!m||!T?!h&&D&&D.resolve?((_=D.resolve(void 0)).constructor=D,v=I(_.then,_),function(){v(r)}):p?function(){C.nextTick(r)}:(c=I(c,l),function(){c(r)}):(s=!0,f=T.createTextNode(""),new m(r).observe(f,{characterData:!0}),function(){f.data=s=!s})),e.exports=S||function(M){M={fn:M,next:void 0},o&&(o.next=M),a||(a=M,u()),o=M}},5366:function(e,n,t){t=t(2497),e.exports=t&&!!Symbol.for&&!!Symbol.keyFor},2497:function(e,n,a){var r=a(3385);a=a(5981),e.exports=!!Object.getOwnPropertySymbols&&!a(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&r&&r<41})},8468:function(e,n,t){var r=t(5981),a=t(9813),o=t(2529),u=a("iterator");e.exports=!r(function(){var s=new URL("b?a=1&b=2&c=3","http://a"),f=s.searchParams,v="";return s.pathname="c%20d",f.forEach(function(l,I){f.delete("b"),v+=I+l}),o&&!s.toJSON||!f.sort||"http://a/c%20d?a=1&c=3"!==s.href||"3"!==f.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!f[u]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==v||"x"!==new URL("http://x",void 0).host})},8019:function(e,n,a){var o=a(1899),r=a(7475);a=a(1302),e.exports=r(o=o.WeakMap)&&/native code/.test(a(o))},9520:function(e,n,t){var r=t(4883),a=function(o){var u,s;this.promise=new o(function(f,v){if(void 0!==u||void 0!==s)throw TypeError("Bad Promise constructor");u=f,s=v}),this.resolve=r(u),this.reject=r(s)};e.exports.f=function(o){return new a(o)}},4649:function(e,n,t){var r=t(5803);e.exports=function(a,o){return void 0===a?arguments.length<2?"":o:r(a)}},344:function(e,n,t){var r=t(685),a=TypeError;e.exports=function(o){if(r(o))throw a("The method doesn't accept regular expressions");return o}},1942:function(e,n,u){var I=u(1899),r=u(5981),v=u(5329),a=u(5803),o=u(4853).trim,s=(u=u(3483),v("".charAt)),f=I.parseFloat,l=(v=I.Symbol)&&v.iterator;I=1/f(u+"-0")!=-1/0||l&&!r(function(){f(Object(l))}),e.exports=I?function(h){h=o(a(h));var y=f(h);return 0===y&&"-"==s(h,0)?-0:y}:f},9806:function(e,n,s){var c=s(1899),r=s(5981),a=s(5329),o=s(5803),u=s(4853).trim,f=(s=s(3483),c.parseInt),v=(c=c.Symbol)&&c.iterator,l=/^[+-]?0x/i,I=a(l.exec);c=8!==f(s+"08")||22!==f(s+"0x16")||v&&!r(function(){f(Object(v))}),e.exports=c?function(h,y){return h=u(o(h)),f(h,y>>>0||(I(l,h)?16:10))}:f},4420:function(e,n,t){var r=t(5746),a=t(5329),o=t(8834),u=t(5981),s=t(4771),f=t(7857),v=t(6760),l=t(9678),I=t(7026),c=Object.assign,_=Object.defineProperty,h=a([].concat);e.exports=!c||u(function(){if(r&&1!==c({b:1},c(_({},"a",{enumerable:!0,get:function(){_(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var y={},p={},m=Symbol(),T="abcdefghijklmnopqrst";return y[m]=7,T.split("").forEach(function(C){p[C]=C}),7!=c({},y)[m]||s(c({},p)).join("")!=T})?function(y,p){for(var m=l(y),T=arguments.length,C=1,D=f.f,S=v.f;C<T;)for(var M,G=I(arguments[C++]),L=D?h(s(G),D(G)):s(G),W=L.length,F=0;F<W;)M=L[F++],r&&!o(S,G,M)||(m[M]=G[M]);return m}:c},9290:function(e,n,l){var r,a=l(6059),o=l(9938),u=l(6759),s=l(7748),f=l(5463),v=l(1333),I=(l=l(4262),"prototype"),c="script",_=l("IE_PROTO"),h=function(){},y=function(T){return"<"+c+">"+T+"</"+c+">"},m=function(){try{r=new ActiveXObject("htmlfile")}catch{}m=typeof document>"u"||document.domain&&r?function(T){T.write(y("")),T.close();var C=T.parentWindow.Object;return T=null,C}(r):(T=v("iframe"),C="java"+c+":",T.style.display="none",f.appendChild(T),T.src=String(C),(C=T.contentWindow.document).open(),C.write(y("document.F=Object")),C.close(),C.F);for(var T,C,D=u.length;D--;)delete m[I][u[D]];return m()};s[_]=!0,e.exports=Object.create||function(T,C){var D;return null!==T?(h[I]=a(T),D=new h,h[I]=null,D[_]=T):D=m(),void 0===C?D:o.f(D,C)}},9938:function(e,n,t){var r=t(5746),a=t(3937),o=t(5988),u=t(6059),s=t(4529),f=t(4771);n.f=r&&!a?Object.defineProperties:function(v,l){u(v);for(var I,c=s(l),_=f(l),h=_.length,y=0;y<h;)o.f(v,I=_[y++],c[I]);return v}},5988:function(e,n,t){var r=t(5746),a=t(2840),o=t(3937),u=t(6059),s=t(3894),f=TypeError,v=Object.defineProperty,l=Object.getOwnPropertyDescriptor,I="enumerable",c="configurable",_="writable";n.f=r?o?function(h,y,p){var m;return u(h),y=s(y),u(p),"function"==typeof h&&"prototype"===y&&"value"in p&&_ in p&&!p[_]&&(m=l(h,y))&&m[_]&&(h[y]=p.value,p={configurable:(c in p?p:m)[c],enumerable:(I in p?p:m)[I],writable:!1}),v(h,y,p)}:v:function(h,y,p){if(u(h),y=s(y),u(p),a)try{return v(h,y,p)}catch{}if("get"in p||"set"in p)throw f("Accessors not supported");return"value"in p&&(h[y]=p.value),h}},9677:function(e,n,t){var r=t(5746),a=t(8834),o=t(6760),u=t(1887),s=t(4529),f=t(3894),v=t(953),l=t(2840),I=Object.getOwnPropertyDescriptor;n.f=r?I:function(c,_){if(c=s(c),_=f(_),l)try{return I(c,_)}catch{}if(v(c,_))return u(!a(o.f,c,_),c[_])}},684:function(e,n,t){var r=t(2532),a=t(4529),o=t(946).f,u=t(5790),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(f){if(!s||"Window"!=r(f))return o(a(f));try{return o(f)}catch{return u(s)}}},946:function(e,n,t){var r=t(5629),a=t(6759).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(o){return r(o,a)}},7857:function(e,n){n.f=Object.getOwnPropertySymbols},249:function(e,n,s){var r=s(953),a=s(7475),o=s(9678),u=s(4262),f=(s=s(4160),u("IE_PROTO")),v=Object,l=v.prototype;e.exports=s?v.getPrototypeOf:function(I){if(I=o(I),r(I,f))return I[f];var c=I.constructor;return a(c)&&I instanceof c?c.prototype:I instanceof v?l:null}},1584:function(e,n,f){var r=f(5981),a=f(941),o=f(2532),u=f(7135),s=Object.isExtensible;f=r(function(){s(1)}),e.exports=f||u?function(v){return!!a(v)&&(!u||"ArrayBuffer"!=o(v))&&(!s||s(v))}:s},7046:function(e,n,t){t=t(5329),e.exports=t({}.isPrototypeOf)},5629:function(e,n,t){var r=t(5329),a=t(953),o=t(4529),u=t(1692).indexOf,s=t(7748),f=r([].push);e.exports=function(v,l){var I,c=o(v),_=0,h=[];for(I in c)!a(s,I)&&a(c,I)&&f(h,I);for(;l.length>_;)!a(c,I=l[_++])||~u(h,I)||f(h,I);return h}},4771:function(e,n,t){var r=t(5629),a=t(6759);e.exports=Object.keys||function(o){return r(o,a)}},6760:function(e,n){var t={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!t.call({1:2},1);n.f=a?function(o){return!!(o=r(this,o))&&o.enumerable}:t},8929:function(e,n,t){var r=t(5329),a=t(6059),o=t(1851);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u,s=!1,f={};try{(u=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(f,[]),s=f instanceof Array}catch{}return function(v,l){return a(v),o(l),s?u(v,l):v.__proto__=l,v}}():void 0)},5623:function(e,n,t){var r=t(2885),a=t(9697);e.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},9811:function(e,n,t){var r=t(8834),a=t(7475),o=t(941),u=TypeError;e.exports=function(s,f){var v,l;if("string"===f&&a(v=s.toString)&&!o(l=r(v,s))||a(v=s.valueOf)&&!o(l=r(v,s))||"string"!==f&&a(v=s.toString)&&!o(l=r(v,s)))return l;throw u("Can't convert object to primitive value")}},1136:function(e,n,t){var r=t(626),a=t(5329),o=t(946),u=t(7857),s=t(6059),f=a([].concat);e.exports=r("Reflect","ownKeys")||function(v){var l=o.f(s(v)),I=u.f;return I?f(l,I(v)):l}},4058:function(e){e.exports={}},2:function(e){e.exports=function(n){try{return{error:!1,value:n()}}catch(t){return{error:!0,value:t}}}},7742:function(e,n,p){var r=p(1899),a=p(6991),o=p(7475),u=p(7252),s=p(1302),f=p(9813),v=p(3321),l=p(2529),I=p(3385),c=a&&a.prototype,_=f("species"),h=!1,y=o(r.PromiseRejectionEvent);p=u("Promise",function(){var m=(T=s(a))!==String(a);if(!m&&66===I||l&&(!c.catch||!c.finally))return!0;if(51<=I&&/native code/.test(T))return!1;var T,C=function(D){D(function(){},function(){})};return((T=new a(function(D){D(1)})).constructor={})[_]=C,!(h=T.then(function(){})instanceof C)||!m&&v&&!y}),e.exports={CONSTRUCTOR:p,REJECTION_EVENT:y,SUBCLASSING:h}},6991:function(e,n,t){t=t(1899),e.exports=t.Promise},6584:function(e,n,t){var r=t(6059),a=t(941),o=t(9520);e.exports=function(u,s){return r(u),a(s)&&s.constructor===u?s:((0,(u=o.f(u)).resolve)(s),u.promise)}},1542:function(e,n,o){var r=o(6991),a=o(1385);o=o(7742).CONSTRUCTOR,e.exports=o||!a(function(u){r.all(u).then(void 0,function(){})})},8397:function(e){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(t){t={item:t,next:null},this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},e.exports=n},6777:function(e,n,t){var r=t(6059);e.exports=function(){var a=r(this),o="";return a.hasIndices&&(o+="d"),a.global&&(o+="g"),a.ignoreCase&&(o+="i"),a.multiline&&(o+="m"),a.dotAll&&(o+="s"),a.unicode&&(o+="u"),a.unicodeSets&&(o+="v"),a.sticky&&(o+="y"),o}},3613:function(e,n,t){var r=t(8834),a=t(953),o=t(7046),u=t(6777),s=RegExp.prototype;e.exports=function(f){var v=f.flags;return void 0!==v||"flags"in s||a(f,"flags")||!o(s,f)?v:r(u,f)}},8219:function(e){var n=TypeError;e.exports=function(t){if(null==t)throw n("Can't call method on "+t);return t}},7620:function(e,n,I){var r=I(1899),a=I(9730),o=I(7475),u=I(2861),s=I(3765),f=I(8348),v=/MSIE .\./.test(u),l=r.Function;I=function(c){return v?function(_,h){var y=2<f(arguments.length,1),p=o(_)?_:l(_),m=y?s(arguments,2):void 0;return c(y?function(){a(p,this,m)}:p,h)}:c},e.exports={setTimeout:I(r.setTimeout),setInterval:I(r.setInterval)}},4431:function(e,n,t){var r=t(626),a=t(5988),o=t(9813),u=t(5746),s=o("species");e.exports=function(v){v=r(v),u&&v&&!v[s]&&(0,a.f)(v,s,{configurable:!0,get:function(){return this}})}},904:function(e,n,t){var r=t(2885),a=t(5988).f,o=t(2029),u=t(953),s=t(5623),f=t(9813)("toStringTag");e.exports=function(v,l,I,c){v&&(u(I=I?v:v.prototype,f)||a(I,f,{configurable:!0,value:l}),c&&!r&&o(I,"toString",s))}},4262:function(e,n,t){var r=t(8726),a=t(9418),o=r("keys");e.exports=function(u){return o[u]||(o[u]=a(u))}},3030:function(e,n,r){var o=r(1899),a=(r=r(5609),"__core-js_shared__");o=o[a]||r(a,{}),e.exports=o},8726:function(e,n,t){var r=t(2529),a=t(3030);(e.exports=function(o,u){return a[o]||(a[o]=void 0!==u?u:{})})("versions",[]).push({version:"3.23.2",mode:r?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.2/LICENSE",source:"https://github.com/zloirock/core-js"})},487:function(e,n,t){var r=t(6059),a=t(174),o=t(9813)("species");e.exports=function(f,s){return void 0===(f=r(f).constructor)||null==(f=r(f)[o])?s:a(f)}},4620:function(e,n,l){var r=l(5329),a=l(2435),o=l(5803),u=l(8219),s=r("".charAt),f=r("".charCodeAt),v=r("".slice);e.exports={codeAt:(l=function(I){return function(y,p){y=o(u(y)),p=a(p);var h,m=y.length;return p<0||m<=p?I?"":void 0:(h=f(y,p))<55296||56319<h||p+1===m||(m=f(y,p+1))<56320||57343<m?I?s(y,p):h:I?v(y,p,p+2):m-56320+(h-55296<<10)+65536}})(!1),charAt:l(!0)}},3291:function(e,n,r){r=r(5329);var a=2147483647,v=/[^\0-\u007E]/,l=/[.\u3002\uFF0E\uFF61]/g,I="Overflow: input needs wider integers to process",_=RangeError,h=r(l.exec),y=Math.floor,p=String.fromCharCode,m=r("".charCodeAt),T=r([].join),C=r([].push),D=r("".replace),S=r("".split),M=r("".toLowerCase),G=function(W){return W+22+75*(W<26)},L=function(W){var F,U=[],H=(W=function(it){for(var mt=[],Ce=0,we=it.length;Ce<we;){var Ve,bt=m(it,Ce++);55296<=bt&&bt<=56319&&Ce<we?56320==(64512&(Ve=m(it,Ce++)))?C(mt,((1023&bt)<<10)+(1023&Ve)+65536):(C(mt,bt),Ce--):C(mt,bt)}return mt}(W)).length,Z=128,X=0,$=72;for(je=0;je<W.length;je++)(F=W[je])<128&&C(U,p(F));var V=U.length,De=V;for(V&&C(U,"-");De<H;){for(var fe=a,je=0;je<W.length;je++)Z<=(F=W[je])&&F<fe&&(fe=F);var Se=De+1;if(fe-Z>y((a-X)/Se))throw _(I);for(X+=(fe-Z)*Se,Z=fe,je=0;je<W.length;je++){if((F=W[je])<Z&&++X>a)throw _(I);if(F==Z){for(var rt=X,tt=36;;){var de=tt<=$?1:$+26<=tt?26:tt-$;if(rt<de)break;var _t=rt-de,be=36-de;C(U,p(G(de+_t%be))),rt=y(_t/be),tt+=36}C(U,p(G(rt))),$=function(it,mt,Ce){var we=0;for(it=Ce?y(it/700):it>>1,it+=y(it/mt);455<it;)it=y(it/35),we+=36;return y(we+36*it/(it+38))}(X,Se,De==V),X=0,De++}}X++,Z++}return T(U,"")};e.exports=function(W){for(var F,U=[],H=S(D(M(W),l,"."),"."),Z=0;Z<H.length;Z++)C(U,h(v,F=H[Z])?"xn--"+L(F):F);return T(U,".")}},3093:function(e,n,t){var r=t(9417).PROPER,a=t(5981),o=t(3483);e.exports=function(u){return a(function(){return!!o[u]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[u]()||r&&o[u].name!==u})}},4853:function(e,n,v){var u=v(5329),r=v(8219),a=v(5803),o=(v=v(3483),u("".replace)),s=(u="["+v+"]",RegExp("^"+u+u+"*")),f=RegExp(u+u+"*$");e.exports={start:(v=function(l){return function(I){return I=a(r(I)),1&l&&(I=o(I,s,"")),2&l?o(I,f,""):I}})(1),end:v(2),trim:v(3)}},9630:function(e,n,t){var r=t(8834),a=t(626),o=t(9813),u=t(5929);e.exports=function(){var s,f=(s=(s=a("Symbol"))&&s.prototype)&&s.valueOf,v=o("toPrimitive");s&&!s[v]&&u(s,v,function(l){return r(f,this)},{arity:1})}},2941:function(e,n,p){var r,a,o=p(1899),u=p(9730),s=p(6843),f=p(7475),v=p(953),l=p(5981),I=p(5463),c=p(3765),_=p(1333),h=p(8348),y=p(2749),m=(p=p(6049),o.setImmediate),T=o.clearImmediate,C=o.process,D=o.Dispatch,S=o.Function,M=o.MessageChannel,G=o.String,L=0,W={},F="onreadystatechange";try{r=o.location}catch{}var U=function($){var V;v(W,$)&&(V=W[$],delete W[$],V())},H=function($){return function(){U($)}},Z=function($){U($.data)},X=function($){o.postMessage(G($),r.protocol+"//"+r.host)};m&&T||(m=function($){h(arguments.length,1);var V=f($)?$:S($),De=c(arguments,1);return W[++L]=function(){u(V,void 0,De)},a(L),L},T=function($){delete W[$]},p?a=function($){C.nextTick(H($))}:D&&D.now?a=function($){D.now(H($))}:M&&!y?(y=(p=new M).port2,p.port1.onmessage=Z,a=s(y.postMessage,y)):o.addEventListener&&f(o.postMessage)&&!o.importScripts&&r&&"file:"!==r.protocol&&!l(X)?(a=X,o.addEventListener("message",Z,!1)):a=F in _("script")?function($){I.appendChild(_("script"))[F]=function(){I.removeChild(this),U($)}}:function($){setTimeout(H($),0)}),e.exports={set:m,clear:T}},9413:function(e,n,t){var r=t(2435),a=Math.max,o=Math.min;e.exports=function(u,s){return(u=r(u))<0?a(u+s,0):o(u,s)}},4529:function(e,n,t){var r=t(7026),a=t(8219);e.exports=function(o){return r(a(o))}},2435:function(e,n,t){var r=t(5331);e.exports=function(a){return(a=+a)!=a||0==a?0:r(a)}},3057:function(e,n,t){var r=t(2435),a=Math.min;e.exports=function(o){return 0<o?a(r(o),9007199254740991):0}},9678:function(e,n,t){var r=t(8219),a=Object;e.exports=function(o){return a(r(o))}},6935:function(e,n,f){var r=f(8834),a=f(941),o=f(6664),u=f(4229),s=f(9811),v=(f=f(9813),TypeError),l=f("toPrimitive");e.exports=function(I,c){if(!a(I)||o(I))return I;var _=u(I,l);if(_){if(void 0===c&&(c="default"),_=r(_,I,c),!a(_)||o(_))return _;throw v("Can't convert object to primitive value")}return void 0===c&&(c="number"),s(I,c)}},3894:function(e,n,t){var r=t(6935),a=t(6664);e.exports=function(o){return o=r(o,"string"),a(o)?o:o+""}},2885:function(e,n,t){var r={};r[t(9813)("toStringTag")]="z",e.exports="[object z]"===String(r)},5803:function(e,n,t){var r=t(9697),a=String;e.exports=function(o){if("Symbol"===r(o))throw TypeError("Cannot convert a Symbol value to a string");return a(o)}},9826:function(e){var n=String;e.exports=function(t){try{return n(t)}catch{return"Object"}}},9418:function(e,n,r){r=r(5329);var a=0,o=Math.random(),u=r(1..toString);e.exports=function(s){return"Symbol("+(void 0===s?"":s)+")_"+u(++a+o,36)}},2302:function(e,n,t){t=t(2497),e.exports=t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3937:function(e,n,a){var r=a(5746);a=a(5981),e.exports=r&&a(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8348:function(e){var n=TypeError;e.exports=function(t,r){if(t<r)throw n("Not enough arguments");return t}},1477:function(e,n,t){t=t(9813),n.f=t},9813:function(e,n,t){var r=t(1899),a=t(8726),o=t(953),u=t(9418),s=t(2497),f=t(2302),v=a("wks"),l=r.Symbol,I=l&&l.for,c=f?l:l&&l.withoutSetter||u;e.exports=function(_){var h;return o(v,_)&&(s||"string"==typeof v[_])||(h="Symbol."+_,v[_]=s&&o(l,_)?l[_]:(f&&I?I:c)(h)),v[_]}},3483:function(e){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},9812:function(e,n,D){var r=D(6887),a=D(7046),o=D(249),u=D(8929),s=D(3489),f=D(9290),v=D(2029),l=D(1887),I=D(8694),c=D(3794),_=D(3091),h=D(4649),y=D(9813),p=D(8780),m=y("toStringTag"),T=Error,C=[].push,S=(D=function(M,G){var L,W=2<arguments.length?arguments[2]:void 0,F=a(S,this);return u?L=u(new T,F?o(this):S):(L=F?this:f(S),v(L,m,"Error")),void 0!==G&&v(L,"message",h(G)),p&&v(L,"stack",I(L.stack,1)),c(L,W),_(M,C,{that:F=[]}),v(L,"errors",F),L},u?u(D,T):s(D,T,{name:!0}),D.prototype=f(T.prototype,{constructor:l(1,D),message:l(1,""),name:l(1,"AggregateError")}));r({global:!0,constructor:!0,arity:2},{AggregateError:D})},7627:function(e,n,t){t(9812)},5906:function(e,n,y){var r=y(6887),a=y(5981),o=y(1052),u=y(941),s=y(9678),f=y(623),v=y(6796),l=y(5449),I=y(4692),c=y(568),h=y(9813),_=(y=y(3385),h("isConcatSpreadable"));h=51<=y||!a(function(){var p=[];return p[_]=!1,p.concat()[0]!==p}),y=c("concat"),r({target:"Array",proto:!0,arity:1,forced:!h||!y},{concat:function(p){for(var m,T,C,D=s(this),S=I(D,0),M=0,G=-1,L=arguments.length;G<L;G++)if(function(W){if(!u(W))return!1;var F=W[_];return void 0!==F?!!F:o(W)}(C=-1===G?D:arguments[G]))for(T=f(C),v(M+T),m=0;m<T;m++,M++)m in C&&l(S,M,C[m]);else v(M+1),l(S,M++,C);return S.length=M,S}})},1501:function(e,n,t){var r=t(6887),a=t(3610).filter;r({target:"Array",proto:!0,forced:!t(568)("filter")},{filter:function(o){return a(this,o,1<arguments.length?arguments[1]:void 0)}})},9076:function(e,n,o){var r=o(6887),f=o(5329),a=o(1692).indexOf,u=(o=o(4194),f([].indexOf)),s=!!u&&1/u([1],1,-0)<0;f=o("indexOf"),r({target:"Array",proto:!0,forced:s||!f},{indexOf:function(v){var l=1<arguments.length?arguments[1]:void 0;return s?u(this,v,l)||0:a(this,v,l)}})},6274:function(e,n,v){var r=v(4529),a=v(8479),o=v(2077),_=v(5402),u=v(5988).f,s=v(7771),f=v(2529),l=(v=v(5746),"Array Iterator"),I=_.set,c=_.getterFor(l);if(e.exports=s(Array,"Array",function(h,y){I(this,{type:l,target:r(h),index:0,kind:y})},function(){var h=c(this),y=h.target,p=h.kind,m=h.index++;return!y||m>=y.length?{value:h.target=void 0,done:!0}:"keys"==p?{value:m,done:!1}:"values"==p?{value:y[m],done:!1}:{value:[m,y[m]],done:!1}},"values"),_=o.Arguments=o.Array,a("keys"),a("values"),a("entries"),!f&&v&&"values"!==_.name)try{u(_,"name",{value:"values"})}catch{}},8071:function(e,n,a){a(6887)({target:"Array",proto:!0,forced:(a=a(247))!==[].lastIndexOf},{lastIndexOf:a})},186:function(e,n,h){var r=h(6887),a=h(1052),o=h(4284),u=h(941),s=h(9413),f=h(623),v=h(4529),l=h(5449),I=h(9813),c=h(568),_=h(3765),y=(h=c("slice"),I("species")),p=Array,m=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(T,C){var D,S,M,G=v(this),L=f(G),W=s(T,L),F=s(void 0===C?L:C,L);if(a(G)&&((D=o(D=G.constructor)&&(D===p||a(D.prototype))||u(D)&&null===(D=D[y])?void 0:D)===p||void 0===D))return _(G,W,F);for(S=new(void 0===D?p:D)(m(F-W,0)),M=0;W<F;W++,M++)W in G&&l(S,M,G[W]);return S.length=M,S}})},8611:function(e,n,c){var r=c(6887),a=c(9678),o=c(9413),u=c(2435),s=c(623),f=c(6796),v=c(4692),l=c(5449),I=c(5863),_=(c=c(568)("splice"),Math.max),h=Math.min;r({target:"Array",proto:!0,forced:!c},{splice:function(F,p){var m,T,C,D,S,M,G=a(this),L=s(G),W=o(F,L);for(0===(F=arguments.length)?m=T=0:T=1===F?(m=0,L-W):(m=F-2,h(_(u(p),0),L-W)),f(L+m-T),C=v(G,T),D=0;D<T;D++)(S=W+D)in G&&l(C,D,G[S]);if(m<(C.length=T)){for(D=W;D<L-T;D++)M=D+m,(S=D+T)in G?G[M]=G[S]:I(G,M);for(D=L;L-T+m<D;D--)I(G,D-1)}else if(T<m)for(D=L-T;W<D;D--)M=D+m-1,(S=D+T-1)in G?G[M]=G[S]:I(G,M);for(D=0;D<m;D++)G[D+W]=arguments[D+2];return G.length=L-T+m,C}})},5160:function(e,n,a){var r=a(6887),o=(a=a(5329),Date),u=a(o.prototype.getTime);r({target:"Date",stat:!0},{now:function(){return u(new o)}})},3381:function(e,n,a){var r=a(6887);a=a(8308),r({target:"Function",proto:!0,forced:Function.bind!==a},{bind:a})},2619:function(e,n,h){var r=h(6887),a=h(626),o=h(9730),u=h(8834),s=h(5329),f=h(5981),v=h(1052),l=h(7475),I=h(941),c=h(6664),_=h(3765),y=(h=h(2497),a("JSON","stringify")),p=s(/./.exec),m=s("".charAt),T=s("".charCodeAt),C=s("".replace),D=s(1..toString),S=/[\uD800-\uDFFF]/g,M=/^[\uD800-\uDBFF]$/,G=/^[\uDC00-\uDFFF]$/,L=!h||f(function(){var H=a("Symbol")();return"[null]"!=y([H])||"{}"!=y({a:H})||"{}"!=y(Object(H))}),W=f(function(){return'"\\udf06\\ud834"'!==y("\udf06\ud834")||'"\\udead"'!==y("\udead")}),F=function(H,Z){var X=_(arguments),$=Z;if((I(Z)||void 0!==H)&&!c(H))return v(Z)||(Z=function(V,De){if(l($)&&(De=u($,this,V,De)),!c(De))return De}),X[1]=Z,o(y,null,X)},U=function(H,Z,V){var $=m(V,Z-1);return V=m(V,Z+1),p(M,H)&&!p(G,V)||p(G,H)&&!p(M,$)?"\\u"+D(T(H,0),16):H};y&&r({target:"JSON",stat:!0,arity:3,forced:L||W},{stringify:function(H,Z,X){var $=_(arguments);return $=o(L?F:y,null,$),W&&"string"==typeof $?C($,S,U):$}})},9120:function(e,n,t){var r=t(1899);t(904)(r.JSON,"JSON",!0)},5327:function(){},6950:function(e,n,t){t(6887)({target:"Object",stat:!0,sham:!t(5746)},{create:t(9290)})},6450:function(e,n,o){var r=o(6887),a=o(5746);o=o(5988).f,r({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!a},{defineProperty:o})},7144:function(e,n,t){var r=t(6887),a=t(2497),o=t(5981),u=t(7857),s=t(9678);r({target:"Object",stat:!0,forced:!a||o(function(){u.f(1)})},{getOwnPropertySymbols:function(f){var v=u.f;return v?v(s(f)):[]}})},7405:function(e,n,s){var r=s(6887),a=s(5981),o=s(9678),u=s(249);s=s(4160),r({target:"Object",stat:!0,forced:a(function(){u(1)}),sham:!s},{getPrototypeOf:function(f){return u(o(f))}})},1724:function(e,n,t){var r=t(6887),a=t(9678),o=t(4771);r({target:"Object",stat:!0,forced:t(5981)(function(){o(1)})},{keys:function(u){return o(a(u))}})},108:function(e,n,t){t(6887)({target:"Object",stat:!0},{setPrototypeOf:t(8929)})},5967:function(){},9718:function(e,n,a){var r=a(6887);a=a(1942),r({global:!0,forced:parseFloat!=a},{parseFloat:a})},4038:function(e,n,a){var r=a(6887);a=a(9806),r({global:!0,forced:parseInt!=a},{parseInt:a})},4560:function(e,n,t){var r=t(6887),a=t(8834),o=t(4883),u=t(9520),s=t(2),f=t(3091);r({target:"Promise",stat:!0},{allSettled:function(v){var l=this,I=u.f(l),c=I.resolve,_=I.reject,h=s(function(){var y=o(l.resolve),p=[],m=0,T=1;f(v,function(C){var D=m++,S=!1;T++,a(y,l,C).then(function(M){S||(S=!0,p[D]={status:"fulfilled",value:M},--T||c(p))},function(M){S||(S=!0,p[D]={status:"rejected",reason:M},--T||c(p))})}),--T||c(p)});return h.error&&_(h.value),I.promise}})},6890:function(e,n,t){var r=t(6887),a=t(8834),o=t(4883),u=t(9520),s=t(2),f=t(3091);r({target:"Promise",stat:!0,forced:t(1542)},{all:function(v){var l=this,I=u.f(l),c=I.resolve,_=I.reject,h=s(function(){var y=o(l.resolve),p=[],m=0,T=1;f(v,function(C){var D=m++,S=!1;T++,a(y,l,C).then(function(M){S||(S=!0,p[D]=M,--T||c(p))},_)}),--T||c(p)});return h.error&&_(h.value),I.promise}})},7206:function(e,n,t){var r=t(6887),a=t(8834),o=t(4883),u=t(626),s=t(9520),f=t(2),v=t(3091),l="No one promise resolved";r({target:"Promise",stat:!0},{any:function(I){var c=this,_=u("AggregateError"),h=s.f(c),y=h.resolve,p=h.reject,m=f(function(){var T=o(c.resolve),C=[],D=0,S=1,M=!1;v(I,function(G){var L=D++,W=!1;S++,a(T,c,G).then(function(F){W||M||(M=!0,y(F))},function(F){W||M||(W=!0,C[L]=F,--S||p(new _(C,l)))})}),--S||p(new _(C,l))});return m.error&&p(m.value),h.promise}})},3376:function(e,n,v){var r=v(6887),a=v(2529),o=v(7742).CONSTRUCTOR,u=v(6991),s=v(626),f=v(7475),l=(v=v(5929),u&&u.prototype);r({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(I){return this.then(void 0,I)}}),!a&&f(u)&&(o=s("Promise").prototype.catch,l.catch!==o&&v(l,"catch",o,{unsafe:!0}))},6934:function(e,n,F){var r,a,o,u=F(6887),s=F(2529),f=F(6049),v=F(1899),l=F(8834),I=F(5929),c=F(8929),_=F(904),h=F(4431),y=F(4883),p=F(7475),m=F(941),T=F(5743),C=F(487),D=F(2941).set,S=F(6132),M=F(3146),G=F(2),L=F(8397),De=F(5402),W=F(6991),X=F(7742),U=(F=F(9520),"Promise"),H=X.CONSTRUCTOR,Z=X.REJECTION_EVENT,$=(X=X.SUBCLASSING,De.getterFor(U)),V=De.set,fe=W,je=De=W&&W.prototype,Se=v.TypeError,rt=v.document,tt=v.process,de=F.f,_t=de,be=!!(rt&&rt.createEvent&&v.dispatchEvent),it="unhandledrejection",At=function(Qe){var ot;return!(!m(Qe)||!p(ot=Qe.then))&&ot},St=function(Qe,ot){var Lt,Ot,Bt,Ft,It=ot.value,Kt=1==ot.state,tn=Kt?Qe.ok:Qe.fail,en=Qe.resolve,Ee=Qe.reject,_e=Qe.domain;try{tn?(Kt||(2===ot.rejection&&(Ft=ot,l(D,v,function(){var Ae=Ft.facade;f?tt.emit("rejectionHandled",Ae):ae("rejectionhandled",Ae,Ft.value)})),ot.rejection=1),!0===tn?Lt=It:(_e&&_e.enter(),Lt=tn(It),_e&&(_e.exit(),Bt=!0)),Lt===Qe.promise?Ee(Se("Promise-chain cycle")):(Ot=At(Lt))?l(Ot,Lt,en,Ee):en(Lt)):Ee(It)}catch(Ae){_e&&!Bt&&_e.exit(),Ee(Ae)}},Pe=function(Qe,ot){Qe.notified||(Qe.notified=!0,S(function(){for(var Lt,Ot,Bt=Qe.reactions;Lt=Bt.get();)St(Lt,Qe);Qe.notified=!1,ot&&!Qe.rejection&&(Ot=Qe,l(D,v,function(){var Ft=Ot.facade,It=Ot.value,Kt=Ze(Ot);if(Kt&&(Kt=G(function(){f?tt.emit("unhandledRejection",It,Ft):ae(it,Ft,It)}),Ot.rejection=f||Ze(Ot)?2:1,Kt.error))throw Kt.value}))}))},ae=function(Qe,ot,Lt){var Ot;be?((Ot=rt.createEvent("Event")).promise=ot,Ot.reason=Lt,Ot.initEvent(Qe,!1,!0),v.dispatchEvent(Ot)):Ot={promise:ot,reason:Lt},!Z&&(ot=v["on"+Qe])?ot(Ot):Qe===it&&M("Unhandled promise rejection",Lt)},Ze=function(Qe){return 1!==Qe.rejection&&!Qe.parent},Ne=function(Qe,ot,Lt){return function(Ot){Qe(ot,Ot,Lt)}},Re=function(Qe,ot,Lt){Qe.done||(Qe.done=!0,(Qe=Lt||Qe).value=ot,Qe.state=2,Pe(Qe,!0))},ze=function(Qe,ot,Lt){if(!Qe.done){Qe.done=!0,Lt&&(Qe=Lt);try{if(Qe.facade===ot)throw Se("Promise can't be resolved itself");var Ot=At(ot);Ot?S(function(){var Bt={done:!1};try{l(Ot,ot,Ne(ze,Bt,Qe),Ne(Re,Bt,Qe))}catch(Ft){Re(Bt,Ft,Qe)}}):(Qe.value=ot,Qe.state=1,Pe(Qe,!1))}catch(Bt){Re({done:!1},Bt,Qe)}}};if(H&&(je=(fe=function(ot){T(this,je),y(ot),l(r,this);var Lt=$(this);try{ot(Ne(ze,Lt),Ne(Re,Lt))}catch(Ot){Re(Lt,Ot)}}).prototype,(r=function(ot){V(this,{type:U,done:!1,notified:!1,parent:!1,reactions:new L,rejection:!1,state:0,value:void 0})}).prototype=I(je,"then",function(Qe,ot){var Lt=$(this),Ot=de(C(this,fe));return Lt.parent=!0,Ot.ok=!p(Qe)||Qe,Ot.fail=p(ot)&&ot,Ot.domain=f?tt.domain:void 0,0==Lt.state?Lt.reactions.add(Ot):S(function(){St(Ot,Lt)}),Ot.promise}),a=function(){var Qe=new r,ot=$(Qe);this.promise=Qe,this.resolve=Ne(ze,ot),this.reject=Ne(Re,ot)},F.f=de=function(Qe){return Qe===fe||void 0===Qe?new a:_t(Qe)},!s&&p(W)&&De!==Object.prototype)){o=De.then,X||I(De,"then",function(Qe,ot){var Lt=this;return new fe(function(Ot,Bt){l(o,Lt,Ot,Bt)}).then(Qe,ot)},{unsafe:!0});try{delete De.constructor}catch{}c&&c(De,je)}u({global:!0,constructor:!0,wrap:!0,forced:H},{Promise:fe}),_(fe,U,!1,!0),h(U)},4349:function(e,n,I){var r=I(6887),a=I(2529),o=I(6991),u=I(5981),s=I(626),f=I(7475),v=I(487),l=I(6584),c=(I=I(5929),o&&o.prototype);r({target:"Promise",proto:!0,real:!0,forced:!!o&&u(function(){c.finally.call({then:function(){}},function(){})})},{finally:function(_){var h=v(this,s("Promise")),y=f(_);return this.then(y?function(p){return l(h,_()).then(function(){return p})}:_,y?function(p){return l(h,_()).then(function(){throw p})}:_)}}),!a&&f(o)&&(u=s("Promise").prototype.finally,c.finally!==u&&I(c,"finally",u,{unsafe:!0}))},8881:function(e,n,t){t(6934),t(6890),t(3376),t(5921),t(4069),t(4482)},5921:function(e,n,t){var r=t(6887),a=t(8834),o=t(4883),u=t(9520),s=t(2),f=t(3091);r({target:"Promise",stat:!0,forced:t(1542)},{race:function(v){var l=this,I=u.f(l),c=I.reject,_=s(function(){var h=o(l.resolve);f(v,function(y){a(h,l,y).then(I.resolve,c)})});return _.error&&c(_.value),I.promise}})},4069:function(e,n,t){var r=t(6887),a=t(8834),o=t(9520);r({target:"Promise",stat:!0,forced:t(7742).CONSTRUCTOR},{reject:function(u){var s=o.f(this);return a(s.reject,void 0,u),s.promise}})},4482:function(e,n,t){var r=t(6887),a=t(626),o=t(2529),u=t(6991),s=t(7742).CONSTRUCTOR,f=t(6584),v=a("Promise"),l=o&&!s;r({target:"Promise",stat:!0,forced:o||s},{resolve:function(I){return f(l&&this===v?u:this,I)}})},7453:function(e,n,l){var r=l(6887),p=l(626),a=l(9730),o=l(8308),u=l(174),s=l(6059),f=l(941),v=l(9290),I=(l=l(5981),p("Reflect","construct")),c=Object.prototype,_=[].push,h=l(function(){function m(){}return!(I(function(){},[],m)instanceof m)}),y=!l(function(){I(function(){})});r({target:"Reflect",stat:!0,forced:p=h||y,sham:p},{construct:function(m,T){u(m),s(T);var C=arguments.length<3?m:u(arguments[2]);if(y&&!h)return I(m,T,C);if(m==C){switch(T.length){case 0:return new m;case 1:return new m(T[0]);case 2:return new m(T[0],T[1]);case 3:return new m(T[0],T[1],T[2]);case 4:return new m(T[0],T[1],T[2],T[3])}var D=[null];return a(_,D,T),new(a(o,m,D))}return C=v(f(D=C.prototype)?D:c),D=a(m,C,T),f(D)?D:C}})},1502:function(){},7091:function(){},1293:function(e,n,l){var r=l(6887),h=l(5329),a=l(9677).f,o=l(3057),u=l(5803),s=l(344),f=l(8219),v=l(7772),I=(l=l(2529),h("".endsWith)),c=h("".slice),_=Math.min;h=v("endsWith"),r({target:"String",proto:!0,forced:!(!l&&!h&&(v=a(String.prototype,"endsWith"))&&!v.writable||h)},{endsWith:function(y){var p=u(f(this)),m=(s(y),1<arguments.length?arguments[1]:void 0),T=p.length;return m=void 0===m?T:_(o(m),T),T=u(y),I?I(p,T,m):c(p,m-T.length,m)===T}})},7971:function(e,n,u){var r=u(4620).charAt,a=u(5803),o=u(5402),s=(u=u(7771),"String Iterator"),f=o.set,v=o.getterFor(s);u(String,"String",function(l){f(this,{type:s,string:a(l),index:0})},function(){var l=v(this),I=l.string,c=l.index;return c>=I.length?{value:void 0,done:!0}:(I=r(I,c),l.index+=I.length,{value:I,done:!1})})},6226:function(e,n,t){var r=t(6887),a=t(8834),o=t(5329),u=t(8219),s=t(7475),f=t(685),v=t(5803),l=t(4229),I=t(3613),c=t(4342),_=t(9813),h=t(2529),y=_("replace"),p=TypeError,m=o("".indexOf),T=o("".replace),C=o("".slice),D=Math.max,S=function(M,G,L){return L>M.length?-1:""===G?L:m(M,G,L)};r({target:"String",proto:!0},{replaceAll:function(M,G){var L,W,F,U,H,Z,X,$,V=u(this),De=0,fe=0,je="";if(null!=M){if((L=f(M))&&(W=v(u(I(M))),!~m(W,"g")))throw p("`.replaceAll` does not allow non-global regexes");if(W=l(M,y))return a(W,M,V,G);if(h&&L)return T(v(V),M,G)}for(F=v(V),U=v(M),(H=s(G))||(G=v(G)),X=D(1,Z=U.length),De=S(F,U,0);-1!==De;)$=H?v(G(U,De,F)):c(U,F,De,[],void 0,G),je+=C(F,fe,De)+$,fe=De+Z,De=S(F,U,De+X);return fe<F.length&&(je+=C(F,fe)),je}})},3475:function(){},4761:function(e,n,l){var r=l(6887),h=l(5329),a=l(9677).f,o=l(3057),u=l(5803),s=l(344),f=l(8219),v=l(7772),I=(l=l(2529),h("".startsWith)),c=h("".slice),_=Math.min;h=v("startsWith"),r({target:"String",proto:!0,forced:!(!l&&!h&&(v=a(String.prototype,"startsWith"))&&!v.writable||h)},{startsWith:function(T){var p=u(f(this)),m=(s(T),o(_(1<arguments.length?arguments[1]:void 0,p.length)));return T=u(T),I?I(p,T,m):c(p,m,m+T.length)===T}})},6371:function(e,n,t){var r=t(6887),a=t(4853).trim;r({target:"String",proto:!0,forced:t(3093)("trim")},{trim:function(){return a(this)}})},8555:function(e,n,t){t(6349)("asyncIterator")},8616:function(e,n,Se){var r=Se(6887),ae=Se(1899),a=Se(8834),Lt=Se(5329),o=Se(2529),u=Se(5746),s=Se(2497),f=Se(5981),v=Se(953),l=Se(7046),I=Se(6059),c=Se(4529),_=Se(3894),h=Se(5803),y=Se(1887),p=Se(9290),m=Se(4771),T=Se(946),C=Se(684),D=Se(7857),S=Se(9677),M=Se(5988),G=Se(9938),L=Se(6760),W=Se(5929),Ot=Se(8726),_t=Se(4262),F=Se(7748),U=Se(9418),H=Se(9813),Z=Se(1477),X=Se(6349),$=Se(9630),V=Se(904),mt=Se(5402),De=Se(3610).forEach,fe=_t("hidden"),je="Symbol",rt=(Se="prototype",mt.set),tt=mt.getterFor(je),de=Object[Se],be=(_t=ae.Symbol)&&_t[Se],it=ae.TypeError,Ce=(mt=ae.QObject,S.f),we=M.f,Ve=C.f,bt=L.f,At=Lt([].push),St=Ot("symbols"),Pe=Ot("op-symbols"),Ze=(ae=Ot("wks"),!mt||!mt[Se]||!mt[Se].findChild),Ne=u&&f(function(){return 7!=p(we({},"a",{get:function(){return we(this,"a",{value:7}).a}})).a})?function(Ft,It,Kt){var tn=Ce(de,It);tn&&delete de[It],we(Ft,It,Kt),tn&&Ft!==de&&we(de,It,tn)}:we,Re=function(Ft,It){var Kt=St[Ft]=p(be);return rt(Kt,{type:je,tag:Ft,description:It}),u||(Kt.description=It),Kt},ze=function(Ft,It,Kt){return Ft===de&&ze(Pe,It,Kt),I(Ft),It=_(It),I(Kt),v(St,It)?(Kt.enumerable?(v(Ft,fe)&&Ft[fe][It]&&(Ft[fe][It]=!1),Kt=p(Kt,{enumerable:y(0,!1)})):(v(Ft,fe)||we(Ft,fe,y(1,{})),Ft[fe][It]=!0),Ne(Ft,It,Kt)):we(Ft,It,Kt)},Qe=function(Ft,tn){I(Ft);var Kt=c(tn);return tn=m(Kt).concat(Bt(Kt)),De(tn,function(en){u&&!a(ot,Kt,en)||ze(Ft,en,Kt[en])}),Ft},ot=function(It){It=_(It);var Kt=a(bt,this,It);return!(this===de&&v(St,It)&&!v(Pe,It))&&(!(Kt||!v(this,It)||!v(St,It)||v(this,fe)&&this[fe][It])||Kt)},Bt=(Lt=function(tn,en){var Kt;if(tn=c(tn),en=_(en),tn!==de||!v(St,en)||v(Pe,en))return!(Kt=Ce(tn,en))||!v(St,en)||v(tn,fe)&&tn[fe][en]||(Kt.enumerable=!0),Kt},Ot=function(It){It=Ve(c(It));var Kt=[];return De(It,function(tn){v(St,tn)||v(F,tn)||At(Kt,tn)}),Kt},function(Kt){var It=Kt===de,tn=(Kt=Ve(It?Pe:c(Kt)),[]);return De(Kt,function(en){!v(St,en)||It&&!v(de,en)||At(tn,St[en])}),tn});s||(W(be=(_t=function(){if(l(be,this))throw it("Symbol is not a constructor");var It=arguments.length&&void 0!==arguments[0]?h(arguments[0]):void 0,Kt=U(It),tn=function(en){this===de&&a(tn,Pe,en),v(this,fe)&&v(this[fe],Kt)&&(this[fe][Kt]=!1),Ne(this,Kt,y(1,en))};return u&&Ze&&Ne(de,Kt,{configurable:!0,set:tn}),Re(Kt,It)})[Se],"toString",function(){return tt(this).tag}),W(_t,"withoutSetter",function(Ft){return Re(U(Ft),Ft)}),L.f=ot,M.f=ze,G.f=Qe,S.f=Lt,T.f=C.f=Ot,D.f=Bt,Z.f=function(Ft){return Re(H(Ft),Ft)},u&&(we(be,"description",{configurable:!0,get:function(){return tt(this).description}}),o||W(de,"propertyIsEnumerable",ot,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!s,sham:!s},{Symbol:_t}),De(m(ae),function(Ft){X(Ft)}),r({target:je,stat:!0,forced:!s},{useSetter:function(){Ze=!0},useSimple:function(){Ze=!1}}),r({target:"Object",stat:!0,forced:!s,sham:!u},{create:function(Ft,It){return void 0===It?p(Ft):Qe(p(Ft),It)},defineProperty:ze,defineProperties:Qe,getOwnPropertyDescriptor:Lt}),r({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:Ot}),$(),V(_t,je),F[fe]=!0},2615:function(){},4523:function(e,n,f){var r=f(6887),a=f(626),o=f(953),u=f(5803),s=f(8726),v=(f=f(5366),s("string-to-symbol-registry")),l=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!f},{for:function(I){if(I=u(I),o(v,I))return v[I];var c=a("Symbol")(I);return v[I]=c,l[c]=I,c}})},1732:function(e,n,t){t(6349)("hasInstance")},5903:function(e,n,t){t(6349)("isConcatSpreadable")},1825:function(e,n,t){t(6349)("iterator")},5824:function(e,n,t){t(8616),t(4523),t(8608),t(2619),t(7144)},8608:function(e,n,f){var r=f(6887),a=f(953),o=f(6664),u=f(9826),s=f(8726),v=(f=f(5366),s("symbol-to-string-registry"));r({target:"Symbol",stat:!0,forced:!f},{keyFor:function(l){if(!o(l))throw TypeError(u(l)+" is not a symbol");if(a(v,l))return v[l]}})},5915:function(e,n,t){t(6349)("matchAll")},8394:function(e,n,t){t(6349)("match")},1766:function(e,n,t){t(6349)("replace")},2737:function(e,n,t){t(6349)("search")},9911:function(e,n,t){t(6349)("species")},4315:function(e,n,t){t(6349)("split")},3131:function(e,n,a){var r=a(6349);a=a(9630),r("toPrimitive"),a()},4714:function(e,n,o){var r=o(626),a=o(6349);o=o(904),a("toStringTag"),o(r("Symbol"),"Symbol")},659:function(e,n,t){t(6349)("unscopables")},4776:function(e,n,y){var r,a,o,u,s,p=y(1899),f=y(5329),v=y(4380),l=y(1647),T=y(4683),I=y(8850),c=y(941),_=y(1584),h=y(5402).enforce,m=(y=y(8019),p=!p.ActiveXObject&&"ActiveXObject"in p,function(C){return function(){return C(this,arguments.length?arguments[0]:void 0)}});T=T("WeakMap",m,I),y&&p&&(r=I.getConstructor(m,"WeakMap",!0),l.enable(),a=f((y=T.prototype).delete),o=f(y.has),u=f(y.get),s=f(y.set),v(y,{delete:function(C){var D;return c(C)&&!_(C)?((D=h(this)).frozen||(D.frozen=new r),a(this,C)||D.frozen.delete(C)):a(this,C)},has:function(C){var D;return c(C)&&!_(C)?((D=h(this)).frozen||(D.frozen=new r),o(this,C)||D.frozen.has(C)):o(this,C)},get:function(C){var D;return c(C)&&!_(C)?((D=h(this)).frozen||(D.frozen=new r),o(this,C)?u(this,C):D.frozen.get(C)):u(this,C)},set:function(C,D){var S;return c(C)&&!_(C)?((S=h(this)).frozen||(S.frozen=new r),o(this,C)?s(this,C,D):S.frozen.set(C,D)):s(this,C,D),this}}))},4334:function(e,n,t){t(4776)},1115:function(e,n,t){t(4683)("WeakSet",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},t(8850))},1773:function(e,n,t){t(1115)},9731:function(e,n,t){t(7627)},5708:function(e,n,t){t(4560)},8731:function(e,n,t){t(7206)},14:function(e,n,t){var r=t(6887),a=t(9520),o=t(2);r({target:"Promise",stat:!0,forced:!0},{try:function(f){var s=a.f(this);return((f=o(f)).error?s.reject:s.resolve)(f.value),s.promise}})},8783:function(e,n,t){t(6349)("asyncDispose")},3975:function(e,n,t){t(6349)("dispose")},5799:function(e,n,t){t(6349)("matcher")},1943:function(e,n,t){t(6349)("metadataKey")},5414:function(e,n,t){t(6349)("metadata")},6774:function(e,n,t){t(6349)("observable")},620:function(e,n,t){t(6349)("patternMatch")},6172:function(e,n,t){t(6349)("replaceAll")},4629:function(e,n,t){t(6887)({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:t(8984)})},6442:function(e,n,t){t(6887)({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:t(8721)})},6207:function(e,n,t){t(6887)({target:"WeakMap",stat:!0,forced:!0},{from:t(3590)})},3215:function(e,n,t){t(6887)({target:"WeakMap",stat:!0,forced:!0},{of:t(5226)})},4055:function(e,n,t){t(6887)({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:t(716)})},5896:function(e,n,t){t(6887)({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:t(7622)})},5501:function(e,n,t){t(6887)({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:t(8984)})},2511:function(e,n,t){t(6887)({target:"WeakSet",stat:!0,forced:!0},{from:t(3590)})},3309:function(e,n,t){t(6887)({target:"WeakSet",stat:!0,forced:!0},{of:t(5226)})},7634:function(e,n,t){t(6274);var r,a=t(3281),o=t(1899),u=t(9697),s=t(2029),f=t(2077),v=t(9813)("toStringTag");for(r in a){var l;(l=(l=o[r])&&l.prototype)&&u(l)!==v&&s(l,v,r),f[r]=f.Array}},9229:function(e,n,o){var r=o(6887),a=o(1899);o=o(7620).setInterval,r({global:!0,bind:!0,forced:a.setInterval!==o},{setInterval:o})},7749:function(e,n,o){var r=o(6887),a=o(1899);o=o(7620).setTimeout,r({global:!0,bind:!0,forced:a.setTimeout!==o},{setTimeout:o})},1249:function(e,n,t){t(9229),t(7749)},2524:function(e,n,X){X(6274);var r,a,o,u=X(6887),s=X(1899),f=X(8834),v=X(5329),l=X(5746),I=X(8468),c=X(5929),_=X(4380),h=X(904),y=X(1046),be=X(5402),p=X(5743),m=X(7475),T=X(953),C=X(6843),D=X(9697),S=X(6059),M=X(941),G=X(5803),L=X(9290),W=X(1887),F=X(3476),U=X(2902),H=X(8348),tn=X(9813),Z=X(1388),$=(X=tn("iterator"),"URLSearchParams"),V=$+"Iterator",De=be.set,fe=be.getterFor($),je=be.getterFor(V),Se=Object.getOwnPropertyDescriptor,rt=(tn=function(Ee){return l?(Ee=Se(s,Ee))&&Ee.value:s[Ee]})("fetch"),tt=tn("Request"),de=tn("Headers"),_t=tt&&tt.prototype,it=(be=de&&de.prototype,s.RegExp),mt=s.TypeError,Ce=s.decodeURIComponent,we=s.encodeURIComponent,Ve=v("".charAt),bt=v([].join),At=v([].push),St=v("".replace),Pe=v([].shift),ae=v([].splice),Ze=v("".split),Ne=v("".slice),Re=/\+/g,ze=Array(4),Qe=function(Ee){try{return Ce(Ee)}catch{return Ee}},ot=function(Ee){var _e,Ae=St(Ee,Re," "),We=4;try{return Ce(Ae)}catch{for(;We;)Ae=St(Ae,(_e=We--,ze[_e-1]||(ze[_e-1]=it("((?:%[\\da-f]{2}){"+_e+"})","gi"))),Qe);return Ae}},Lt=/[!'()~]|%20/g,Ot={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Bt=function(Ee){return Ot[Ee]},Ft=function(Ee){return St(we(Ee),Lt,Bt)},It=y(function(Ee,_e){De(this,{type:V,iterator:F(fe(Ee).entries),kind:_e})},"Iterator",function(){var _e,Ee=(_e=je(this)).kind,Ae=(_e=_e.iterator.next()).value;return _e.done||(_e.value="keys"===Ee?Ae.key:"values"===Ee?Ae.value:[Ae.key,Ae.value]),_e},!0),Kt=function(Ee){this.entries=[],this.url=null,void 0!==Ee&&(M(Ee)?this.parseObject(Ee):this.parseQuery("string"==typeof Ee?"?"===Ve(Ee,0)?Ne(Ee,1):Ee:G(Ee)))},en=(Kt.prototype={type:$,bindURL:function(Ee){this.url=Ee,this.update()},parseObject:function(Ee){var _e,Ae,We,pe,Ie,$e,st=U(Ee);if(st)for(Ae=(_e=F(Ee,st)).next;!(We=f(Ae,_e)).done;){if(pe=(We=F(S(We.value))).next,(Ie=f(pe,We)).done||($e=f(pe,We)).done||!f(pe,We).done)throw mt("Expected sequence with length 2");At(this.entries,{key:G(Ie.value),value:G($e.value)})}else for(var Nt in Ee)T(Ee,Nt)&&At(this.entries,{key:Nt,value:G(Ee[Nt])})},parseQuery:function(Ee){if(Ee)for(var _e,Ae=Ze(Ee,"&"),We=0;We<Ae.length;)(_e=Ae[We++]).length&&(_e=Ze(_e,"="),At(this.entries,{key:ot(Pe(_e)),value:ot(bt(_e,"="))}))},serialize:function(){for(var Ee,_e=this.entries,Ae=[],We=0;We<_e.length;)Ee=_e[We++],At(Ae,Ft(Ee.key)+"="+Ft(Ee.value));return bt(Ae,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}},tn=function(){p(this,en);var _e=0<arguments.length?arguments[0]:void 0;De(this,new Kt(_e))},tn.prototype);_(en,{append:function(Ee,_e){H(arguments.length,2);var Ae=fe(this);At(Ae.entries,{key:G(Ee),value:G(_e)}),Ae.updateURL()},delete:function(Ee){H(arguments.length,1);for(var _e=fe(this),Ae=_e.entries,We=G(Ee),pe=0;pe<Ae.length;)Ae[pe].key===We?ae(Ae,pe,1):pe++;_e.updateURL()},get:function(Ee){H(arguments.length,1);for(var _e=fe(this).entries,Ae=G(Ee),We=0;We<_e.length;We++)if(_e[We].key===Ae)return _e[We].value;return null},getAll:function(Ee){H(arguments.length,1);for(var _e=fe(this).entries,Ae=G(Ee),We=[],pe=0;pe<_e.length;pe++)_e[pe].key===Ae&&At(We,_e[pe].value);return We},has:function(Ee){H(arguments.length,1);for(var _e=fe(this).entries,Ae=G(Ee),We=0;We<_e.length;)if(_e[We++].key===Ae)return!0;return!1},set:function(Ee,_e){H(arguments.length,1);for(var Ae,We=fe(this),pe=We.entries,Ie=!1,$e=G(Ee),st=G(_e),Nt=0;Nt<pe.length;Nt++)(Ae=pe[Nt]).key===$e&&(Ie?ae(pe,Nt--,1):(Ie=!0,Ae.value=st));Ie||At(pe,{key:$e,value:st}),We.updateURL()},sort:function(){var Ee=fe(this);Z(Ee.entries,function(_e,Ae){return _e.key>Ae.key?1:-1}),Ee.updateURL()},forEach:function(Ee){for(var _e,Ae=fe(this).entries,We=C(Ee,1<arguments.length?arguments[1]:void 0),pe=0;pe<Ae.length;)We((_e=Ae[pe++]).value,_e.key,this)},keys:function(){return new It(this,"keys")},values:function(){return new It(this,"values")},entries:function(){return new It(this,"entries")}},{enumerable:!0}),c(en,X,en.entries,{name:"entries"}),c(en,"toString",function(){return fe(this).serialize()},{enumerable:!0}),h(tn,$),u({global:!0,constructor:!0,forced:!I},{URLSearchParams:tn}),!I&&m(de)&&(r=v(be.has),a=v(be.set),o=function(Ee){if(M(Ee)){var _e,Ae=Ee.body;if(D(Ae)===$)return _e=Ee.headers?new de(Ee.headers):new de,r(_e,"content-type")||a(_e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),L(Ee,{body:W(0,G(Ae)),headers:W(0,_e)})}return Ee},m(rt)&&u({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(_e){return rt(_e,1<arguments.length?o(arguments[1]):{})}}),m(tt)&&((_t.constructor=y=function(Ee){return p(this,_t),new tt(Ee,1<arguments.length?o(arguments[1]):{})}).prototype=_t,u({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:y}))),e.exports={URLSearchParams:tn,getState:fe}},5304:function(e,n,t){t(2524)},7250:function(e,n,F){F(7971);var r,a=F(6887),o=F(5746),u=F(8468),s=F(1899),f=F(6843),v=F(5329),l=F(5929),I=F(9202),c=F(5743),_=F(953),h=F(4420),y=F(1354),p=F(5790),m=F(4620).codeAt,T=F(3291),C=F(5803),D=F(904),S=F(8348),Fe=F(2524),M=(F=F(5402)).set,G=F.getterFor("URL"),L=Fe.URLSearchParams,W=Fe.getState,U=(F=s.URL,s.TypeError),H=s.parseInt,Z=Math.floor,X=Math.pow,$=v("".charAt),V=v(/./.exec),De=v([].join),fe=v(1..toString),je=v([].pop),Se=v([].push),rt=v("".replace),tt=v([].shift),de=v("".split),_t=v("".slice),be=v("".toLowerCase),it=v([].unshift),mt="Invalid scheme",Ce="Invalid host",we="Invalid port",Ve=/[a-z]/i,bt=/[\d+-.a-z]/i,At=/\d/,St=/^0x/i,Pe=/^[0-7]+$/,ae=/^\d+$/,Ze=/^[\da-f]+$/i,Ne=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Re=/[\0\t\n\r #/:<>?@[\\\]^|]/,ze=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Qe=/[\t\n\r]/g,ot=function(Ke){var Je,Ye,qt,xe;if("number"==typeof Ke){for(Je=[],Ye=0;Ye<4;Ye++)it(Je,Ke%256),Ke=Z(Ke/256);return De(Je,".")}if("object"!=typeof Ke)return Ke;for(Je="",qt=function(ut){for(var ue=null,se=1,le=null,Ue=0,ke=0;ke<8;ke++)0!==ut[ke]?(se<Ue&&(ue=le,se=Ue),le=null,Ue=0):(null===le&&(le=ke),++Ue);return se<Ue&&(ue=le,se=Ue),ue}(Ke),Ye=0;Ye<8;Ye++)xe&&0===Ke[Ye]||(xe=xe&&!1,qt===Ye?(Je+=Ye?":":"::",xe=!0):(Je+=fe(Ke[Ye],16),Ye<7&&(Je+=":")));return"["+Je+"]"},Lt={},Ot=h({},Lt,{" ":1,'"':1,"<":1,">":1,"`":1}),Bt=h({},Ot,{"#":1,"?":1,"{":1,"}":1}),Ft=h({},Bt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),It=function(Ke,Je){var Ye=m(Ke,0);return 32<Ye&&Ye<127&&!_(Je,Ke)?Ke:encodeURIComponent(Ke)},Kt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},tn=function(Ke,Je){return 2==Ke.length&&V(Ve,$(Ke,0))&&(":"==(Ke=$(Ke,1))||!Je&&"|"==Ke)},en=function(Ke){return 1<Ke.length&&tn(_t(Ke,0,2))&&(2==Ke.length||"/"===(Ke=$(Ke,2))||"\\"===Ke||"?"===Ke||"#"===Ke)},Ee={},_e={},Ae={},We={},pe={},Ie={},$e={},st={},Nt={},Pt={},et={},lt={},Ut={},xt={},wn={},Ln={},Cn={},In={},Le={},g={},w={},N=function(ut,Je,Ye){var qt,xe;if(ut=C(ut),Je){if(xe=this.parse(ut))throw U(xe);this.searchParams=null}else{if(void 0!==Ye&&(qt=new N(Ye,!0)),xe=this.parse(ut,null,qt))throw U(xe);(Je=W(new L)).bindURL(this),this.searchParams=Je}},K=(N.prototype={type:"URL",parse:function(Ke,Je,Ye){var qt,xe,ut,ue,se=this,le=Je||Ee,Ue=0,ke="",He=!1,nt=!1,zt=!1;for(Ke=C(Ke),Je||(se.scheme="",se.username="",se.password="",se.host=null,se.port=null,se.path=[],se.query=null,se.fragment=null,se.cannotBeABaseURL=!1,Ke=rt(Ke,ze,"")),Ke=rt(Ke,Qe,""),qt=y(Ke);Ue<=qt.length;){switch(xe=qt[Ue],le){case Ee:if(!xe||!V(Ve,xe)){if(Je)return mt;le=Ae;continue}ke+=be(xe),le=_e;break;case _e:if(xe&&(V(bt,xe)||"+"==xe||"-"==xe||"."==xe))ke+=be(xe);else{if(":"!=xe){if(Je)return mt;ke="",le=Ae,Ue=0;continue}if(Je&&(se.isSpecial()!=_(Kt,ke)||"file"==ke&&(se.includesCredentials()||null!==se.port)||"file"==se.scheme&&!se.host))return;if(se.scheme=ke,Je)return void(se.isSpecial()&&Kt[se.scheme]==se.port&&(se.port=null));ke="","file"==se.scheme?le=xt:se.isSpecial()&&Ye&&Ye.scheme==se.scheme?le=We:se.isSpecial()?le=st:"/"==qt[Ue+1]?(le=pe,Ue++):(se.cannotBeABaseURL=!0,Se(se.path,""),le=Le)}break;case Ae:if(!Ye||Ye.cannotBeABaseURL&&"#"!=xe)return mt;if(Ye.cannotBeABaseURL&&"#"==xe){se.scheme=Ye.scheme,se.path=p(Ye.path),se.query=Ye.query,se.fragment="",se.cannotBeABaseURL=!0,le=w;break}le="file"==Ye.scheme?xt:Ie;continue;case We:if("/"!=xe||"/"!=qt[Ue+1]){le=Ie;continue}le=Nt,Ue++;break;case pe:if("/"==xe){le=Pt;break}le=In;continue;case Ie:if(se.scheme=Ye.scheme,xe==r)se.username=Ye.username,se.password=Ye.password,se.host=Ye.host,se.port=Ye.port,se.path=p(Ye.path),se.query=Ye.query;else if("/"==xe||"\\"==xe&&se.isSpecial())le=$e;else if("?"==xe)se.username=Ye.username,se.password=Ye.password,se.host=Ye.host,se.port=Ye.port,se.path=p(Ye.path),se.query="",le=g;else{if("#"!=xe){se.username=Ye.username,se.password=Ye.password,se.host=Ye.host,se.port=Ye.port,se.path=p(Ye.path),se.path.length--,le=In;continue}se.username=Ye.username,se.password=Ye.password,se.host=Ye.host,se.port=Ye.port,se.path=p(Ye.path),se.query=Ye.query,se.fragment="",le=w}break;case $e:if(!se.isSpecial()||"/"!=xe&&"\\"!=xe){if("/"!=xe){se.username=Ye.username,se.password=Ye.password,se.host=Ye.host,se.port=Ye.port,le=In;continue}le=Pt}else le=Nt;break;case st:if(le=Nt,"/"!=xe||"/"!=$(ke,Ue+1))continue;Ue++;break;case Nt:if("/"==xe||"\\"==xe)break;le=Pt;continue;case Pt:if("@"==xe){He&&(ke="%40"+ke),He=!0;for(var Qt=y(ke),rn=0;rn<Qt.length;rn++){var Gt=Qt[rn];":"!=Gt||zt?(Gt=It(Gt,Ft),zt?se.password+=Gt:se.username+=Gt):zt=!0}ke=""}else if(xe==r||"/"==xe||"?"==xe||"#"==xe||"\\"==xe&&se.isSpecial()){if(He&&""==ke)return"Invalid authority";Ue-=y(ke).length+1,ke="",le=et}else ke+=xe;break;case et:case lt:if(Je&&"file"==se.scheme){le=Ln;continue}if(":"!=xe||nt){if(xe==r||"/"==xe||"?"==xe||"#"==xe||"\\"==xe&&se.isSpecial()){if(se.isSpecial()&&""==ke)return Ce;if(Je&&""==ke&&(se.includesCredentials()||null!==se.port))return;if(ut=se.parseHost(ke))return ut;if(ke="",le=Cn,Je)return;continue}"["==xe?nt=!0:"]"==xe&&(nt=!1),ke+=xe}else{if(""==ke)return Ce;if(ut=se.parseHost(ke))return ut;if(ke="",le=Ut,Je==lt)return}break;case Ut:if(!V(At,xe)){if(xe==r||"/"==xe||"?"==xe||"#"==xe||"\\"==xe&&se.isSpecial()||Je){if(""!=ke){var ce=H(ke,10);if(65535<ce)return we;se.port=se.isSpecial()&&ce===Kt[se.scheme]?null:ce,ke=""}if(Je)return;le=Cn;continue}return we}ke+=xe;break;case xt:if(se.scheme="file","/"==xe||"\\"==xe)le=wn;else{if(!Ye||"file"!=Ye.scheme){le=In;continue}if(xe==r)se.host=Ye.host,se.path=p(Ye.path),se.query=Ye.query;else if("?"==xe)se.host=Ye.host,se.path=p(Ye.path),se.query="",le=g;else{if("#"!=xe){en(De(p(qt,Ue),""))||(se.host=Ye.host,se.path=p(Ye.path),se.shortenPath()),le=In;continue}se.host=Ye.host,se.path=p(Ye.path),se.query=Ye.query,se.fragment="",le=w}}break;case wn:if("/"==xe||"\\"==xe){le=Ln;break}Ye&&"file"==Ye.scheme&&!en(De(p(qt,Ue),""))&&(tn(Ye.path[0],!0)?Se(se.path,Ye.path[0]):se.host=Ye.host),le=In;continue;case Ln:if(xe==r||"/"==xe||"\\"==xe||"?"==xe||"#"==xe){if(!Je&&tn(ke))le=In;else if(""==ke){if(se.host="",Je)return;le=Cn}else{if(ut=se.parseHost(ke))return ut;if("localhost"==se.host&&(se.host=""),Je)return;ke="",le=Cn}continue}ke+=xe;break;case Cn:if(se.isSpecial()){if(le=In,"/"!=xe&&"\\"!=xe)continue}else if(Je||"?"!=xe)if(Je||"#"!=xe){if(xe!=r&&(le=In,"/"!=xe))continue}else se.fragment="",le=w;else se.query="",le=g;break;case In:if(xe==r||"/"==xe||"\\"==xe&&se.isSpecial()||!Je&&("?"==xe||"#"==xe)){if(".."===(ce=be(ce=ke))||"%2e."===ce||".%2e"===ce||"%2e%2e"===ce?(se.shortenPath(),"/"==xe||"\\"==xe&&se.isSpecial()||Se(se.path,"")):"."===(ue=ke)||"%2e"===be(ue)?"/"==xe||"\\"==xe&&se.isSpecial()||Se(se.path,""):("file"==se.scheme&&!se.path.length&&tn(ke)&&(se.host&&(se.host=""),ke=$(ke,0)+":"),Se(se.path,ke)),ke="","file"==se.scheme&&(xe==r||"?"==xe||"#"==xe))for(;1<se.path.length&&""===se.path[0];)tt(se.path);"?"==xe?(se.query="",le=g):"#"==xe&&(se.fragment="",le=w)}else ke+=It(xe,Bt);break;case Le:"?"==xe?(se.query="",le=g):"#"==xe?(se.fragment="",le=w):xe!=r&&(se.path[0]+=It(xe,Lt));break;case g:Je||"#"!=xe?xe!=r&&("'"==xe&&se.isSpecial()?se.query+="%27":se.query+="#"==xe?"%23":It(xe,Lt)):(se.fragment="",le=w);break;case w:xe!=r&&(se.fragment+=It(xe,Ot))}Ue++}},parseHost:function(Ke){var Je,Ye,qt;if("["==$(Ke,0))return"]"==$(Ke,Ke.length-1)&&(Je=function(xe){var ut,ue,se,le,Ue,ke,He,nt=[0,0,0,0,0,0,0,0],zt=0,Qt=null,rn=0,Gt=function(){return $(xe,rn)};if(":"==Gt()){if(":"!=$(xe,1))return;rn+=2,Qt=++zt}for(;Gt();){if(8==zt)return;if(":"==Gt()){if(null!==Qt)return;rn++,Qt=++zt}else{for(ut=ue=0;ue<4&&V(Ze,Gt());)ut=16*ut+H(Gt(),16),rn++,ue++;if("."==Gt()){if(0==ue||(rn-=ue,6<zt))return;for(se=0;Gt();){if(le=null,0<se){if(!("."==Gt()&&se<4))return;rn++}if(!V(At,Gt()))return;for(;V(At,Gt());){if(Ue=H(Gt(),10),null===le)le=Ue;else{if(0==le)return;le=10*le+Ue}if(255<le)return;rn++}nt[zt]=256*nt[zt]+le,2!=++se&&4!=se||zt++}if(4!=se)return;break}if(":"==Gt()){if(rn++,!Gt())return}else if(Gt())return;nt[zt++]=ut}}if(null!==Qt)for(ke=zt-Qt,zt=7;0!=zt&&0<ke;)He=nt[zt],nt[zt--]=nt[Qt+ke-1],nt[Qt+--ke]=He;else if(8!=zt)return;return nt}(_t(Ke,1,-1)))?void(this.host=Je):Ce;if(this.isSpecial())return Ke=T(Ke),V(Ne,Ke)||null===(Je=function(xe){var ut,ue,se,le,Ue,ke,He,nt=de(xe,".");if(nt.length&&""==nt[nt.length-1]&&nt.length--,4<(ut=nt.length))return xe;for(ue=[],se=0;se<ut;se++){if(""==(le=nt[se]))return xe;if(Ue=10,1<le.length&&"0"==$(le,0)&&(Ue=V(St,le)?16:8,le=_t(le,8==Ue?1:2)),""===le)ke=0;else{if(!V(10==Ue?ae:8==Ue?Pe:Ze,le))return xe;ke=H(le,Ue)}Se(ue,ke)}for(se=0;se<ut;se++)if(ke=ue[se],se==ut-1){if(ke>=X(256,5-ut))return null}else if(255<ke)return null;for(He=je(ue),se=0;se<ue.length;se++)He+=ue[se]*X(256,3-se);return He}(Ke))?Ce:void(this.host=Je);if(V(Re,Ke))return Ce;for(Je="",Ye=y(Ke),qt=0;qt<Ye.length;qt++)Je+=It(Ye[qt],Lt);this.host=Je},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return _(Kt,this.scheme)},shortenPath:function(){var Ke=this.path,Je=Ke.length;!Je||"file"==this.scheme&&1==Je&&tn(Ke[0],!0)||Ke.length--},serialize:function(){var Ke=this,Je=Ke.scheme,Ye=Ke.username,qt=Ke.password,xe=Ke.host,ut=Ke.port,ue=Ke.path,se=Ke.query,le=Ke.fragment,Ue=Je+":";return null!==xe?(Ue+="//",Ke.includesCredentials()&&(Ue+=Ye+(qt?":"+qt:"")+"@"),Ue+=ot(xe),null!==ut&&(Ue+=":"+ut)):"file"==Je&&(Ue+="//"),Ue+=Ke.cannotBeABaseURL?ue[0]:ue.length?"/"+De(ue,"/"):"",null!==se&&(Ue+="?"+se),null!==le&&(Ue+="#"+le),Ue},setHref:function(Ke){if(Ke=this.parse(Ke))throw U(Ke);this.searchParams.update()},getOrigin:function(){var Ke=this.scheme,Je=this.port;if("blob"==Ke)try{return new K(Ke.path[0]).origin}catch{return"null"}return"file"!=Ke&&this.isSpecial()?Ke+"://"+ot(this.host)+(null!==Je?":"+Je:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(Ke){this.parse(C(Ke)+":",Ee)},getUsername:function(){return this.username},setUsername:function(Ke){var Je=y(C(Ke));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var Ye=0;Ye<Je.length;Ye++)this.username+=It(Je[Ye],Ft)}},getPassword:function(){return this.password},setPassword:function(Ke){var Je=y(C(Ke));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var Ye=0;Ye<Je.length;Ye++)this.password+=It(Je[Ye],Ft)}},getHost:function(){var Ke=this.host,Je=this.port;return null===Ke?"":null===Je?ot(Ke):ot(Ke)+":"+Je},setHost:function(Ke){this.cannotBeABaseURL||this.parse(Ke,et)},getHostname:function(){var Ke=this.host;return null===Ke?"":ot(Ke)},setHostname:function(Ke){this.cannotBeABaseURL||this.parse(Ke,lt)},getPort:function(){var Ke=this.port;return null===Ke?"":C(Ke)},setPort:function(Ke){this.cannotHaveUsernamePasswordPort()||(""==(Ke=C(Ke))?this.port=null:this.parse(Ke,Ut))},getPathname:function(){var Ke=this.path;return this.cannotBeABaseURL?Ke[0]:Ke.length?"/"+De(Ke,"/"):""},setPathname:function(Ke){this.cannotBeABaseURL||(this.path=[],this.parse(Ke,Cn))},getSearch:function(){var Ke=this.query;return Ke?"?"+Ke:""},setSearch:function(Ke){""==(Ke=C(Ke))?this.query=null:("?"==$(Ke,0)&&(Ke=_t(Ke,1)),this.query="",this.parse(Ke,g)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var Ke=this.fragment;return Ke?"#"+Ke:""},setHash:function(Ke){""==(Ke=C(Ke))?this.fragment=null:("#"==$(Ke,0)&&(Ke=_t(Ke,1)),this.fragment="",this.parse(Ke,w))},update:function(){this.query=this.searchParams.serialize()||null}},function(xe){var Ye=c(this,Te),qt=1<S(arguments.length,1)?arguments[1]:void 0;xe=M(Ye,new N(xe,!1,qt)),o||(Ye.href=xe.serialize(),Ye.origin=xe.getOrigin(),Ye.protocol=xe.getProtocol(),Ye.username=xe.getUsername(),Ye.password=xe.getPassword(),Ye.host=xe.getHost(),Ye.hostname=xe.getHostname(),Ye.port=xe.getPort(),Ye.pathname=xe.getPathname(),Ye.search=xe.getSearch(),Ye.searchParams=xe.getSearchParams(),Ye.hash=xe.getHash())}),Te=K.prototype;Fe=function(Ke,Je){return{get:function(){return G(this)[Ke]()},set:Je&&function(Ye){return G(this)[Je](Ye)},configurable:!0,enumerable:!0}},o&&(I(Te,"href",Fe("serialize","setHref")),I(Te,"origin",Fe("getOrigin")),I(Te,"protocol",Fe("getProtocol","setProtocol")),I(Te,"username",Fe("getUsername","setUsername")),I(Te,"password",Fe("getPassword","setPassword")),I(Te,"host",Fe("getHost","setHost")),I(Te,"hostname",Fe("getHostname","setHostname")),I(Te,"port",Fe("getPort","setPort")),I(Te,"pathname",Fe("getPathname","setPathname")),I(Te,"search",Fe("getSearch","setSearch")),I(Te,"searchParams",Fe("getSearchParams")),I(Te,"hash",Fe("getHash","setHash"))),l(Te,"toJSON",function(){return G(this).serialize()},{enumerable:!0}),l(Te,"toString",function(){return G(this).serialize()},{enumerable:!0}),F&&(v=F.revokeObjectURL,(s=F.createObjectURL)&&l(K,"createObjectURL",f(s,F)),v&&l(K,"revokeObjectURL",f(v,F))),D(K,"URL"),a({global:!0,constructor:!0,forced:!u,sham:!o},{URL:K})},3601:function(e,n,t){t(7250)},8947:function(){},7784:function(e,n,t){t=t(1103),e.exports=t},8196:function(e,n,t){t=t(6246),e.exports=t},8065:function(e,n,t){t=t(6043),e.exports=t},5247:function(e,n,t){t=t(1727),e.exports=t},1955:function(e,n,t){t=t(2480),e.exports=t},9373:function(e,n,t){t=t(4570),e.exports=t},1022:function(e,n,t){t=t(7564),e.exports=t},7145:function(e,n,t){t=t(9279),e.exports=t},2073:function(e,n,t){t=t(9601),e.exports=t},2348:function(e,n,t){t=t(8339),e.exports=t},5178:function(e,n,t){t=t(1611),e.exports=t},6361:function(e,n,t){t=t(2774),e.exports=t},8933:function(e,n,t){t=t(4426),e.exports=t},4471:function(e,n,t){t=t(5254),e.exports=t},1910:function(e,n,t){t=t(8171),e.exports=t},6507:function(e,n,t){t=t(3966),e.exports=t},3059:function(e,n,t){t=t(8494),e.exports=t},6670:function(e,n,t){t=t(3065),e.exports=t},6877:function(e,n,t){t=t(7579),e.exports=t},4888:function(e,n,t){t=t(8524),e.exports=t},7460:function(e,n,t){var r=t(2956);t(7634),e.exports=r},1895:function(e,n,t){t=t(4983),e.exports=t},3474:function(e,n,t){t(1249),t=t(4058),e.exports=t.setInterval},7989:function(e,n,t){t(1249),t=t(4058),e.exports=t.setTimeout},2547:function(e,n,t){var r=t(7473);t(7634),e.exports=r},6509:function(e,n,t){var r=t(4227);t(7634),e.exports=r},7641:function(e,n,t){t=t(1459),e.exports=t},2010:function(e,n,t){var r=t(2304);t(7634),e.exports=r},3726:function(e,n,t){var r=t(9567);t(7634),e.exports=r},1459:function(e,n,t){t(3601),t(8947),t(5304),t=t(4058),e.exports=t.URL},630:function(e,n){var t={553:function(d){d=function(b){var A,O=Object.prototype,Y=O.hasOwnProperty,re="function"==typeof Symbol?Symbol:{},he=re.iterator||"@@iterator",Oe=re.asyncIterator||"@@asyncIterator",ye=re.toStringTag||"@@toStringTag";function ct(un,ne,J){return Object.defineProperty(un,ne,{value:J,enumerable:!0,configurable:!0,writable:!0}),un[ne]}try{ct({},"")}catch{ct=function(ne,J,P){return ne[J]=P}}function gt(un,j,J,B){var E,x,R,k;return j=j&&j.prototype instanceof vn?j:vn,j=Object.create(j.prototype),B=new ai(B||[]),j._invoke=(E=un,x=J,R=B,k=Jt,function(q,ee){if(k===an)throw new Error("Generator is already running");if(k===kn){if("throw"===q)throw ee;return gn()}for(R.method=q,R.arg=ee;;){var te=R.delegate;if(te=te&&function ve(Ge,ht){var pt=Ge.iterator[ht.method];if(pt!==A)return"throw"===(pt=wt(pt,Ge.iterator,ht.arg)).type?(ht.method="throw",ht.arg=pt.arg,ht.delegate=null,hn):(pt=pt.arg)?pt.done?(ht[Ge.resultName]=pt.value,ht.next=Ge.nextLoc,"return"!==ht.method&&(ht.method="next",ht.arg=A),ht.delegate=null,hn):pt:(ht.method="throw",ht.arg=new TypeError("iterator result is not an object"),ht.delegate=null,hn);if(ht.delegate=null,"throw"===ht.method){if(Ge.iterator.return&&(ht.method="return",ht.arg=A,ve(Ge,ht),"throw"===ht.method))return hn;ht.method="throw",ht.arg=new TypeError("The iterator does not provide a 'throw' method")}return hn}(te,R)){if(te===hn)continue;return te}if("next"===R.method)R.sent=R._sent=R.arg;else if("throw"===R.method){if(k===Jt)throw k=kn,R.arg;R.dispatchException(R.arg)}else"return"===R.method&&R.abrupt("return",R.arg);if(k=an,"normal"===(te=wt(E,x,R)).type){if(k=R.done?kn:Xt,te.arg!==hn)return{value:te.arg,done:R.done}}else"throw"===te.type&&(k=kn,R.method="throw",R.arg=te.arg)}}),j}function wt(un,ne,J){try{return{type:"normal",arg:un.call(ne,J)}}catch(P){return{type:"throw",arg:P}}}b.wrap=gt;var Jt="suspendedStart",Xt="suspendedYield",an="executing",kn="completed",hn={};function vn(){}function Jn(){}function Qn(){}ct(re={},he,function(){return this});var Cr=Object.getPrototypeOf,yr=((Cr=Cr&&Cr(Cr(Wr([]))))&&Cr!==O&&Y.call(Cr,he)&&(re=Cr),Qn.prototype=vn.prototype=Object.create(re));function Nr(un){["next","throw","return"].forEach(function(ne){ct(un,ne,function(J){return this._invoke(ne,J)})})}function cr(un,ne){var J;this._invoke=function(P,E){function x(){return new ne(function(R,k){!function j(B,q,ee,te){var ve;return"throw"!==(B=wt(un[B],un,q)).type?(q=(ve=B.arg).value)&&"object"==typeof q&&Y.call(q,"__await")?ne.resolve(q.__await).then(function(Ge){j("next",Ge,ee,te)},function(Ge){j("throw",Ge,ee,te)}):ne.resolve(q).then(function(Ge){ve.value=Ge,ee(ve)},function(Ge){return j("throw",Ge,ee,te)}):void te(B.arg)}(P,E,R,k)})}return J=J?J.then(x,x):x()}}function Ur(un){var ne={tryLoc:un[0]};1 in un&&(ne.catchLoc=un[1]),2 in un&&(ne.finallyLoc=un[2],ne.afterLoc=un[3]),this.tryEntries.push(ne)}function oi(un){var ne=un.completion||{};ne.type="normal",delete ne.arg,un.completion=ne}function ai(un){this.tryEntries=[{tryLoc:"root"}],un.forEach(Ur,this),this.reset(!0)}function Wr(un){if(un){var ne,J,P=un[he];if(P)return P.call(un);if("function"==typeof un.next)return un;if(!isNaN(un.length))return ne=-1,(J=function E(){for(;++ne<un.length;)if(Y.call(un,ne))return E.value=un[ne],E.done=!1,E;return E.value=A,E.done=!0,E}).next=J}return{next:gn}}function gn(){return{value:A,done:!0}}return ct(yr,"constructor",Jn.prototype=Qn),ct(Qn,"constructor",Jn),Jn.displayName=ct(Qn,ye,"GeneratorFunction"),b.isGeneratorFunction=function(un){return!!(un="function"==typeof un&&un.constructor)&&(un===Jn||"GeneratorFunction"===(un.displayName||un.name))},b.mark=function(un){return Object.setPrototypeOf?Object.setPrototypeOf(un,Qn):(un.__proto__=Qn,ct(un,ye,"GeneratorFunction")),un.prototype=Object.create(yr),un},b.awrap=function(un){return{__await:un}},Nr(cr.prototype),ct(cr.prototype,Oe,function(){return this}),b.AsyncIterator=cr,b.async=function(un,ne,J,P,E){void 0===E&&(E=Promise);var x=new cr(gt(un,ne,J,P),E);return b.isGeneratorFunction(ne)?x:x.next().then(function(R){return R.done?R.value:x.next()})},Nr(yr),ct(yr,ye,"Generator"),ct(yr,he,function(){return this}),ct(yr,"toString",function(){return"[object Generator]"}),b.keys=function(un){var ne,J=[];for(ne in un)J.push(ne);return J.reverse(),function P(){for(;J.length;){var E=J.pop();if(E in un)return P.value=E,P.done=!1,P}return P.done=!0,P}},b.values=Wr,ai.prototype={constructor:ai,reset:function(un){if(this.prev=0,this.next=0,this.sent=this._sent=A,this.done=!1,this.delegate=null,this.method="next",this.arg=A,this.tryEntries.forEach(oi),!un)for(var ne in this)"t"===ne.charAt(0)&&Y.call(this,ne)&&!isNaN(+ne.slice(1))&&(this[ne]=A)},stop:function(){this.done=!0;var un=this.tryEntries[0].completion;if("throw"===un.type)throw un.arg;return this.rval},dispatchException:function(un){if(this.done)throw un;var ne=this;function J(j,B){return x.type="throw",x.arg=un,ne.next=j,B&&(ne.method="next",ne.arg=A),!!B}for(var P=this.tryEntries.length-1;0<=P;--P){var E=this.tryEntries[P],x=E.completion;if("root"===E.tryLoc)return J("end");if(E.tryLoc<=this.prev){var R=Y.call(E,"catchLoc"),k=Y.call(E,"finallyLoc");if(R&&k){if(this.prev<E.catchLoc)return J(E.catchLoc,!0);if(this.prev<E.finallyLoc)return J(E.finallyLoc)}else if(R){if(this.prev<E.catchLoc)return J(E.catchLoc,!0)}else{if(!k)throw new Error("try statement without catch or finally");if(this.prev<E.finallyLoc)return J(E.finallyLoc)}}}},abrupt:function(un,ne){for(var J=this.tryEntries.length-1;0<=J;--J){var P=this.tryEntries[J];if(P.tryLoc<=this.prev&&Y.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var E=P;break}}var x=(E=E&&("break"===un||"continue"===un)&&E.tryLoc<=ne&&ne<=E.finallyLoc?null:E)?E.completion:{};return x.type=un,x.arg=ne,E?(this.method="next",this.next=E.finallyLoc,hn):this.complete(x)},complete:function(un,ne){if("throw"===un.type)throw un.arg;return"break"===un.type||"continue"===un.type?this.next=un.arg:"return"===un.type?(this.rval=this.arg=un.arg,this.method="return",this.next="end"):"normal"===un.type&&ne&&(this.next=ne),hn},finish:function(un){for(var ne=this.tryEntries.length-1;0<=ne;--ne){var J=this.tryEntries[ne];if(J.finallyLoc===un)return this.complete(J.completion,J.afterLoc),oi(J),hn}},catch:function(un){for(var ne=this.tryEntries.length-1;0<=ne;--ne){var J,P,E=this.tryEntries[ne];if(E.tryLoc===un)return"throw"===(J=E.completion).type&&(P=J.arg,oi(E)),P}throw new Error("illegal catch attempt")},delegateYield:function(un,ne,J){return this.delegate={iterator:Wr(un),resultName:ne,nextLoc:J},"next"===this.method&&(this.arg=A),hn}},b}(d.exports);try{regeneratorRuntime=d}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=d:Function("r","regeneratorRuntime = r")(d)}},757:function(d,b,A){d.exports=A(553)}},r={};function a(d){var b=r[d];return void 0!==b||(b=r[d]={exports:{}},t[d](b,b.exports,a)),b.exports}function o(d,b){return(o=Object.setPrototypeOf||function(O,Y){return O.__proto__=Y,O})(d,b)}function u(d,b){d.prototype=Object.create(b.prototype),d.prototype.constructor=d,o(d,b)}function s(d){return Array.isArray?Array.isArray(d):"[object Array]"===Object.prototype.toString.call(d)}function f(d){return"[object Object]"===Object.prototype.toString.call(d)}function v(d){return"function"==typeof d}function l(d){return"string"==typeof d}function I(d){return d=String(d),/^\d+(px|em)$|^\d+$|^(100|[1-9]?\d(\.\d\d?\d?)?)%$/.test(d)}function c(d){return"number"==typeof d&&!isNaN(d)}function _(d){return"[object Boolean]"===Object.prototype.toString.call(d)}function h(d){var b=document.createElement("span");return b.style.background=d,b.style.background}function y(d){var b=document.createElement("span");return b.style.border=d,b.style.border||""===d}function p(){return"ontouchstart"in document.documentElement}function m(d){return d instanceof HTMLElement||"[object ShadowRoot]"===Object.prototype.toString.call(d)}function T(d,b){for(var A in d)void 0!==b[A]&&f(d[A])&&f(b[A])?T(d[A],b[A]):b[A]=d[A]}function C(d,b){for(var A in d){var O=d[A],Y=b[A];void 0===Y?b[A]=d[A]:l(O)&&f(Y)?Y.visibility=O:f(O)&&f(Y)?C(d[A],b[A]):b[A]=d[A]}}function D(d){var b=Math.random().toString(35).substring(2);return b.length<11&&(b+=Math.random().toString(35).substring(2)),d=Math.max(Math.min(Math.round(d),11),8),b.substring(0,d)}function S(d){var b,A;if(s(d))b=[];else{if(!f(d))return d;b={}}for(A in d){var O=d[A];b[A]=s(d)||f(d)?S(O):O}return b}function M(d){var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame,A=!!b;if(A=!(b&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(b.toString()))&&A)return b(d);var O={},Y=null,re=+new Date;O[1]=d,null===Y&&(Y=setInterval(function(){var he,Oe=+new Date,ye=O;for(he in O={},ye)Object.prototype.hasOwnProperty.call(ye,he)&&(ye[he](Oe),re=Oe);2500<Oe-re&&(clearInterval(Y),Y=null)},1e3/60))}function G(){var d=window;if(d){if(d.devicePixelRatio)return d.devicePixelRatio;if(d.screen.deviceXDPI&&d.screen.logicalXDPI)return d.screen.deviceXDPI/d.screen.logicalXDPI}return 1}function L(gt,wt,ct,Jt,Y){var re=gt+ct/2,he=wt+Jt/2,Oe=W(gt,wt,re,he,Y),ye=W(gt+ct,wt,re,he,Y);return ct=W(gt+ct,wt+Jt,re,he,Y),gt=W(gt,wt+Jt,re,he,Y),wt=[ye.x,Oe.x,gt.x,ct.x].sort(function(Xt,an){return Xt-an}),Jt=[ye.y,Oe.y,gt.y,ct.y].sort(function(Xt,an){return Xt-an}),{x:wt[0],y:Jt[0],width:wt[3]-wt[0],height:Jt[3]-Jt[0]}}function W(d,b,A,O,Y){return Y=Y/180*Math.PI,{x:(d-A)*Math.cos(Y)-(b-O)*Math.sin(Y)+A,y:(d-A)*Math.sin(Y)+(b-O)*Math.cos(Y)+O}}a.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return a.d(b,{a:b}),b},a.d=function(d,b){for(var A in b)a.o(b,A)&&!a.o(d,A)&&Object.defineProperty(d,A,{enumerable:!0,get:b[A]})},a.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)};var F=function(d){window.Dynamsoft&&window.Dynamsoft.Lib.debug&&window.Dynamsoft.Lib.log(d)},U={windowURL:window.URL||window.webkitURL,createURL:function(d){return l(d)?d:U.createURLWithType(d).data},createURLWithType:function(d){if(l(d)||void 0===d)return{type:"string",data:d};if(d instanceof Blob)return{type:"object",data:U.createObjectURL(d)};if(d.imageData&&d.imageData instanceof Blob)return{type:"object",data:U.createObjectURL(d.imageData)};if(d.imageData){var b=Object.prototype.toString.call(d.imageData);if(/\[object \w+Array\]/.test(b))return{type:"object",data:U.createObjectURL(new Blob([d.imageData]))}}else if(b=Object.prototype.toString.call(d),/\[object \w+Array\]/.test(b))return{type:"object",data:U.createObjectURL(new Blob([d]))};return/data:image\/\w+;base64/.test(d)?{type:"string",data:d}:{type:"object",data:d}},createObjectURL:function(d){return d?(d=U.windowURL.createObjectURL(d),F("createObjectURL:"+d),d):""},revokeObjectURL:function(d){F("revokeObjectURL:"+d),l(d)&&0==d.indexOf("blob:http")&&U.windowURL.revokeObjectURL(d)}},H=((ur=$.prototype).getPublishSubscribe=function(){return this._oPub},ur._on=function(d,b){b=this._oPub.on(d,b),this.push(d,b)},ur._emit=function(d){for(var b,A=arguments.length,O=new Array(1<A?A-1:0),Y=1;Y<A;Y++)O[Y-1]=arguments[Y];null!=(b=this._oPub)&&b.emit.apply(b,[d].concat(O))},ur._off=function(d,b){var A;null!=(A=this._oPub)&&A.off(d,b)},ur._offById=function(d,b){var A;null!=(A=this._oPub)&&A.offById(d,b)},ur.push=function(d,b){this._evtIds.push({name:d,id:b})},ur.dispose=function(){if(this._oPub){for(var d=this._evtIds.length,b=0;b<d;b++){var A=this._evtIds[b];this._oPub.offById(A.name,A.id)}this._bDisposePub&&this._oPub&&this._oPub.dispose()}this._oPub=null},$),Z=((ur=X.prototype).on=function(d,b){this._events[d]||(this._events[d]=[]);var A=D(10);return this._events[d].push({fn:b,evtId:A}),A},ur.emit=function(d){var b=this._events[d];if(!b||0===b.length)return!1;for(var A=b.length,O=arguments.length,Y=new Array(1<O?O-1:0),re=1;re<O;re++)Y[re-1]=arguments[re];for(var he,Oe=0;Oe<A;Oe++)null!=(he=b[Oe])&&(he=he.fn).call.apply(he,[null].concat(Y))},ur.emitEx=function(d){var b=this._events[d];if(!b||0===b.length)return Promise.resolve(!0);for(var A=b.length,O=Promise.resolve(!0),Y=arguments.length,re=new Array(1<Y?Y-1:0),he=1;he<Y;he++)re[he-1]=arguments[he];if(1===b.length)return(d=null==(d=b[0])?void 0:(d=d.fn).call.apply(d,[null].concat(re)))instanceof Promise?d:O;for(var Oe=function(gt){var wt=null==(gt=b[gt])?void 0:(gt=gt.fn).call.apply(gt,[null].concat(re));wt instanceof Promise&&(O=O.then(function(){return wt}))},ye=0;ye<A;ye++)Oe(ye);return O},ur.off=function(d,b){var A=this._events[d];if(!A)return!1;if(b)for(var O=A.length-1;0<=O;O--){var Y=A[O];Y&&Y.fn===b&&A.splice(O,1),Y=null}else A&&(A.length=0)},ur.offById=function(d,b){var A=this._events[d];if(!A)return!1;if(b)for(var O=A.length-1;0<=O;O--){var Y=A[O];if(Y&&Y.evtId===b){A.splice(O,1);break}Y=null}else A&&(A.length=0)},ur.dispose=function(){for(var d=Object.keys(this._events),b=0,A=d.length;b<A;b++){var O=d[b];(O=this._events[O])&&O.splice(0),O=null}this._events={}},X);function X(){this._events={}}function $(d){this._evtIds=[],this._oPub=null,this._bDisposePub=!1,d?this._oPub=d:(this._oPub=new Z,this._bDisposePub=!0)}function V(d,b,A,O,Y,re,he){try{var Oe=d[re](he),ye=Oe.value}catch(ct){return A(ct)}Oe.done?b(ye):Promise.resolve(ye).then(O,Y)}function De(d){return function(){var b=this,A=arguments;return new Promise(function(O,Y){var re=d.apply(b,A);function he(ye){V(re,O,Y,he,Oe,"next",ye)}function Oe(ye){V(re,O,Y,he,Oe,"throw",ye)}he(void 0)})}}var fe,je,Se,rt,tt,ur=a(757),de=a.n(ur),_t=(ur=typeof window<"u")?window:{},be=(ur&&window,"prev"),it="next",mt="pageAreaSelected",Ce="pageAreaUnselected",we="_canvasVisibilityChanged",Ve="_updateErrorMessage",bt="_updateLogMessage",At="_DirectoryChanged",St="_canvasRightClick",Pe="_afterRender",ae="_currentChanged",Ze="_updateThbItem",Ne="_setScrollerSizeUI",Re="_changeCanvasCursorUI",ze="_tabChangedUI",Qe="_updateForViewer",ot="_loadToViewer",Lt="_openToViewer",Ot="_loadPage",Bt="_removeViewerUid",Ft="_changePage",It="_reorderPage",Kt="_removePage",tn="_editPage",en="_loadToTag",Ee="_removePageTag",_e="_addPageTag",Ae="_emptyTag",We="_renameTag",pe="_tagChanged",Ie="_appendSync",$e="_updateSync",st="_loadToFile",Nt="_removeFile",Pt="_renameFile",et={code:0,message:"ok."},lt={code:80001,message:"The parameter type is wrong."},Ut={code:80002,message:"The parameter is out of range."},xt={code:80003,message:"The image does not exist."},wn={code:80006,message:"The file does not exist."},Ln={code:80009,message:"Tag does not exist."},Cn={code:80010,message:"The tag already exists."},In={code:80011,message:"Element does not exist."},Le={code:80012,message:"Page does not exist."},g={code:80013,message:"The parameter is invalid."},w={code:80016,message:"The color is invalid."},N={code:80017,message:"Failed to save image to database."},K={code:80018,message:"Failed to remove image from database by uid."},Te={code:80020,message:"Your browser does not support full screen."},Fe={code:80021,message:"The size is invalid."},Ke={code:80022,message:"The operation mode is error."},Je={code:80023,message:"The border is invalid."},Ye={code:80026,message:"The constructor of view ui is required."},qt={code:80032,message:"The file already exists."},xe=((z=Ue.prototype).calc3x3Matrix=function(d,b){for(var A=[],O=0;O<3;O++)for(var Y=0;Y<3;Y++)A.push(d[3*O+0]*b[Y]+d[3*O+1]*b[Y+3]+d[3*O+2]*b[Y+6]);return A},z.rotateMatrix=function(d,b,A){d=d/180*Math.PI;var O=Math.sin(d);return[d=Math.cos(d),-O,(1-d)*b+A*O,O,d,(1-d)*A-b*O,0,0,1]},z.moveMatrix=function(d,b){return[1,0,d,0,1,b,0,0,1]},z.scaleMatrix=function(d){return[d,0,0,0,d,0,0,0,1]},z.flipMatrix=function(d,b){return[1-2*Math.pow(d,2),-2*d*b,0,-2*d*b,1-2*Math.pow(b,2),0,0,0,1]},z.toCanvasMatrix=function(d){for(var b=[0,3,1,4,2,5],A=0;A<b.length;A++)b[A]=d[b[A]];return b},z.getLatestResult=function(){return 0!==this.result.length?this.result[this.result.length-1].slice():null},z.rotatePoint=function(b,A,O,Y,re){return re=re/180*Math.PI,{x:(b-O)*Math.cos(re)-(A-Y)*Math.sin(re)+O,y:(b-O)*Math.sin(re)+(A-Y)*Math.cos(re)+Y}},z.rotateRect=function(wt,Jt,gt,Xt,re){var he=wt+gt/2,Oe=Jt+Xt/2,ye=this.rotatePoint(wt,Jt,he,Oe,re),ct=this.rotatePoint(wt+gt,Jt,he,Oe,re);return gt=this.rotatePoint(wt+gt,Jt+Xt,he,Oe,re),wt=this.rotatePoint(wt,Jt+Xt,he,Oe,re),Jt=[ct.x,ye.x,wt.x,gt.x].sort(function(an,kn){return an-kn}),Xt=[ct.y,ye.y,wt.y,gt.y].sort(function(an,kn){return an-kn}),{x:Jt[0],y:Xt[0],width:Jt[3]-Jt[0],height:Xt[3]-Xt[0]}},z.calcLineEquation=function(Y,re){var A=re.y-Y.y,O=Y.x-re.x,he=(Y=re.x*Y.y-Y.x*re.y,[]);return he.push((O*O-A*A)/(re=A*A+O*O),-2*A*O/re,-2*A*Y/re,-2*A*O/re,(A*A-O*O)/re,-2*O*Y/re,0,0,1/re),he},z.setTransform=function(d){var b=this;this.matrix.forEach(function(A){A=b.toCanvasMatrix(A),d.transform.apply(d,A)})},z.setPointTransform=function(d,b){for(var A=0;A<this.matrix.length;A++){var O=d*(Y=this.matrix[A])[0]+b*Y[3],Y=d*Y[1]+b*Y[4];d=O,b=Y}return{x:d,y:b}},z.crop=function(d,b,A,O){return this._clear(),this.all.push(d={type:"crop",left:d,top:b,width:A,height:O}),d},z.erase=function(d,b,A,O,Y){return this._clear(),this.all.push(d={type:"erase",left:d,top:b,width:A,height:O,color:Y}),d},z.changePageSize=function(d,b){return this._clear(),this.all.push(d={type:"changeSize",width:d,height:b}),d},z.flip=function(d){this._flipNum+=1;var Y=this._tAngle/180*Math.PI,b=Math.cos(Y),A=-Math.sin(Y),O=-Math.sin(Y);if(Y=-Math.cos(Y),this._flipNumX%2&&(O=-O,Y=-Y),this._flipNumY%2&&(b=-b,A=-A),b={x:b,y:A},A={x:O,y:Y},O={x:0,y:0},Y=null,0===d)this._flipNumX+=1,Y=this.calcLineEquation(b,O);else{if(1!==d)return;this._flipNumY+=1,Y=this.calcLineEquation(A,O)}return this.all.push(b={type:"flip",matrix:Y,direction:d}),this.matrix.push(Y),A=(A=this.getLatestResult())?this.calc3x3Matrix(Y,A):Y,this.result.push(A),b},z.calcFlipMatrix=function(d,b){return[1-2*d*d,-2*d*b,0,-2*d*b,1-2*b*b,0,0,0,1]},z.rotate=function(d,b,he,O){var Y=!1,re=(null!==this._curMode&&(Y=this._curMode===O||(this._clear(),!1)),this._curMode=O,this._flipNum%2&&(d=-d),this._tAngle+=d,d);return he={type:"rotate",matrix:b=this.rotateMatrix(d,b||0,he||0),mode:O,angle:d,calcAngle:re=Y?this._tAngle:re},this.all.push(he),this.matrix.push(b),O=(O=this.getLatestResult())?this.calc3x3Matrix(b,O):b,this.result.push(O),he},z.translate=function(d,b){d=this.moveMatrix(d,b),this.all.push(d),this.matrix.push(d),b=(b=this.getLatestResult())?this.calc3x3Matrix(d,b):d,this.result.push(b)},z.calcTranslateDis=function(Y,he){var A=this._tAngle/180*Math.PI,O=Y*Math.cos(A),re=(Y=-Y*Math.sin(A),he*Math.sin(A));return he*=Math.cos(A),this._flipNumX%2&&(re=-re,he=-he),this._flipNumY%2&&(O=-O,Y=-Y),{x:O+re,y:Y+he}},z.reset=function(){this.all=[],this._clear(),this._curMode=null},z.getCurAngle=function(){return this._tAngle},z._clear=function(){this.result=[],this.matrix=[],this._tAngle=0,this._flipNumX=0,this._flipNumY=0,this._flipNum=0},Ue),ut=((z=le.prototype).setTempSize=function(d,b){this.tempWidth=d,this.tempHeight=b},z.addViewer=function(d){-1===this.vws.indexOf(d)&&this.vws.push(d)},z.rmViewer=function(d){-1!==(d=this.vws.indexOf(d))&&this.vws.splice(d,1)},z.setTags=function(d){d.length<1||(this.tags=d.slice())},z.getTags=function(){return this.tags.slice()},le),ue=(u(se,fe=H),(z=se.prototype).dispose=function(){fe.prototype.dispose.call(this),this._db=null},z._initEvent=function(){var d=this;this._on($e,function(b,A,O){d.updateSync(b,A,O)}),this._on(Kt,function(b,A){A.forEach(function(O){var Y,re=d._db.getMid(O);re&&(l(re.oriData)&&U.revokeObjectURL(re.oriData),l(re.minData)&&U.revokeObjectURL(re.minData),(Y=re.img)&&(Y.src="",Y.onload=null,Y.onerror=null,re.img=null)),d._db.removeMid(O),d._db.getDataAsync(O).then(function(he){l(he.oriData)&&U.revokeObjectURL(he.oriData),l(he.minData)&&U.revokeObjectURL(he.minData)}).catch(function(he){}),d._db.removeDataAsync(O),d._db.removeMetadata(O)})}),this._on(We,function(b,A,O){O.forEach(function(Y){var re,he=d._db.getMid(Y);he&&-1!==(re=he.tags.indexOf(b))&&he.tags.splice(re,1,A),d._db.getDataAsync(Y).then(function(Oe){var ye;Oe.tags&&-1!==(ye=Oe.tags.indexOf(b))&&(Oe.tags.splice(ye,1,A),d._db.updateDataAsync(Y,Oe).catch(function(ct){}))}).catch(function(Oe){})})}),this._on(Ae,function(b,A,O){A.forEach(function(Y){var re,he=d._db.getMid(Y);he&&-1!==(re=he.tags.indexOf(b))&&he.tags.splice(re,1),d._db.getDataAsync(Y).then(function(Oe){var ye;Oe.tags&&-1!==(ye=Oe.tags.indexOf(b))&&(Oe.tags.splice(ye,1),d._db.updateDataAsync(Y,Oe).catch(function(ct){}))}).catch(function(Oe){})})}),this._on(_e,function(b,A,O){var Y=d._db.getMid(b);Y&&-1===Y.tags.indexOf(A)&&Y.tags.push(b),d._db.getDataAsync(b).then(function(re){re.tags&&-1===re.tags.indexOf(A)&&(re.tags.push(b),d._db.updateDataAsync(b,re).catch(function(he){}))}).catch(function(re){})}),this._on(Ee,function(b,A,O){var Y,re=d._db.getMid(b);re&&-1!==(Y=re.tags.indexOf(A))&&re.tags.splice(Y,1),d._db.getDataAsync(b).then(function(he){var Oe;he.tags&&-1!==(Oe=he.tags.indexOf(A))&&(he.tags.splice(Oe,1),d._db.updateDataAsync(b,he).catch(function(ye){}))}).catch(function(he){})})},z.appendSync=function(d,b){return this._ckStr(d)&&this._ckArray(b)?(d=this._load(d,b),this._ok(),d):[]},z.insertSync=function(d,b,A){return this._ckStr(d)&&this._ckArray(b)?void 0===A?this.appendSync(d,b):(d=this._load(d,b,A),this._ok(),d):(this._thrEr(lt),[])},z.updateSync=function(d,b,A){void 0===A&&(A=!0),this._emit(bt,"Invoking DataControl#updateSync.");var O=this._db.getMid(d);if(!O)return!1;this._db.updateMetadata(d,b.metadata),b.customData&&(O.customData=b.customData),b.tags&&O.setTags(b.tags),A&&(U.revokeObjectURL(O.oriData),U.revokeObjectURL(O.minData)),O.minData=null,!O.overlays.length&&b.minData&&l(b.minData)&&(O.minData=b.minData),O.oriData=null,O.img=null,O.active=!1,O.activeMin=!1,O.minTask=null,O.edt.reset(),O.setTempSize(b.metadata.width,b.metadata.height),this._db.updateMid(d,O),b.tags||(b.tags=O.getTags()),b.customData||(b.customData=O.customData),this._db.updateDataAsync(d,b),this._emit(Qe,d,b)},z._load=function(d,b,A){for(var O=this,Y=[],re=[],he=b.length,Oe=function(Jt){var wt={uid:D(11),data:b[Jt]};re.push(wt),Y.push(wt.uid),Jt=Object.assign({},wt.data.metadata),O._db.addMetadata(wt.uid,Jt),O._db.addDataAsync(wt.uid,wt.data).then(function(Xt){O._emit("_addDataToDBSuccess",wt.uid,Xt)}).catch(function(Xt){O._emit("_addDataToDBFailed",wt.uid,Xt)}),Jt=new ut(wt.uid,Jt),wt.data.minData&&l(wt.data.minData)&&(Jt.minData=wt.data.minData),Jt.customData=wt.data.customData||{},Jt.setTags(wt.data.tags||[]),O._db.addMid(wt.uid,Jt)},ye=0;ye<he;ye++)Oe(ye);return this._emit(st,d,re,A),re.slice().forEach(function(ct){O._emit(en,ct)}),Y},z._convertData=function(d){return new Promise(function(b,A){var O;f(d)?b(d):((O=new XMLHttpRequest).onload=function(){var Y=U.createObjectURL(O.response);b(Y)},O.open("GET",d,!0),O.responseType="blob",O.send())})},z.addData=(tt=De(de().mark(function d(b,A){var O=this;return de().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(this._ckStr(b)&&f(A)){Y.next=3;break}return this._thrEr(lt),Y.abrupt("return",this._err(lt.message));case 3:return Y.next=5,this._db.addDataAsync(b,A).then(function(re){return O._ok(),re}).catch(function(re){return O._thrEr(N),O._err(N.message)});case 5:return Y.abrupt("return",Y.sent);case 6:case"end":return Y.stop()}},d,this)})),function(d,b){return tt.apply(this,arguments)}),z.getData=(rt=De(de().mark(function d(b){var A=this;return de().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(this._ckStr(b)){O.next=3;break}return this._thrEr(lt),O.abrupt("return",this._err(lt.message));case 3:return O.next=5,this._db.getDataAsync(b).then(function(Y){return A._ok(),Promise.resolve(Y)}).catch(function(Y){return A._thrEr(xt),A._err(xt.message)});case 5:return O.abrupt("return",O.sent);case 6:case"end":return O.stop()}},d,this)})),function(d){return rt.apply(this,arguments)}),z.removeData=(Se=De(de().mark(function d(b){var A=this;return de().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(this._ckStr(b)){O.next=3;break}return this._thrEr(lt),O.abrupt("return",this._err(lt.message));case 3:return O.next=5,this._db.removeDataAsync(b).then(function(Y){return A._ok(),Y}).catch(function(Y){return A._thrEr(K),A._err(K.message)});case 5:return O.abrupt("return",O.sent);case 6:case"end":return O.stop()}},d,this)})),function(d){return Se.apply(this,arguments)}),z.updateData=(je=De(de().mark(function d(b,A){var O=this;return de().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(this._ckStr(b)){Y.next=3;break}return this._thrEr(lt),Y.abrupt("return",this._err(lt.message));case 3:return Y.next=5,this._db.updateDataAsync(b,A).then(function(re){return O._ok(),re}).catch(function(re){return O._thrEr(xt),O._err(xt.message)});case 5:return Y.abrupt("return",Y.sent);case 6:case"end":return Y.stop()}},d,this)})),function(d,b){return je.apply(this,arguments)}),z._err=function(d){return Promise.reject(new Error(d))},z._ckArray=function(d){return!!s(d)||(this._thrEr(lt),!1)},z._ckStr=function(d){return!!l(d)||(this._thrEr(lt),!1)},z._thrEr=function(d){this._emit(Ve,d)},z._ok=function(){this._emit(Ve,et)},se);function se(d,b,A){var O=fe.call(this,b)||this;return O._db=A,O._on(Ie,function(Y,re){O.appendSync(Y,re)}),O._initEvent(),O}function le(d,b){this.uid=null,this.minData=null,this.oriData=null,this.customData={},this.tags=[],this.active=!1,this.activeMin=!1,this.minTask=null,this.load=!1,this.show=[],this.overlays=[],this.img=null,this.edt=null,this.vws=[],this.oriType=null,this.minType=null,this.tempWidth=0,this.tempHeight=0,this.uid=d,this.setTempSize(b.width,b.height),this.edt=new xe}function Ue(){this.matrix=[],this.all=[],this.result=[],this._flipNum=0,this._flipNumX=0,this._flipNumY=0,this._tAngle=0,this._curMode=null}function ke(){return(ke=Object.assign||function(d){for(var b=1;b<arguments.length;b++){var A,O=arguments[b];for(A in O)Object.prototype.hasOwnProperty.call(O,A)&&(d[A]=O[A])}return d}).apply(this,arguments)}function He(d,b){for(var A=0;A<b.length;A++){var O=b[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(d,O.key,O)}}function nt(d,b,A){b&&He(d.prototype,b),A&&He(d,A),Object.defineProperty(d,"prototype",{writable:!1})}function zt(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(z=yi.prototype).bind=function(d){this.canvas=d,this.ctx=d.getContext("2d"),this.ctx.imageSmoothingEnabled=!1},z.unbind=function(){this.canvas=null,this.ctx=null},z.clear=function(d,b,A,O){var Y;null!=(Y=this.canvas)&&Y.clearRect(d,b,A,O)},z.size=function(d,b){this.cssWidth=d,this.cssHeight=b,this.innerWidth=d*this.dpr,this.innerHeight=b*this.dpr},z.dispose=function(){this.unbind()},u(gi,On=ur=yi),(z=gi.prototype).setMaskColor=function(d){this.maskColor=d},z.getMaskColor=function(){return this.maskColor};var Qt=gi,rn=(u(so,Un=ur),so.prototype.setBackGroundColor=function(d){this.canvas.style.background=d},so),Gt=((z=Sr.prototype).updateDpr=function(d){this.mainCvs.dpr=d,this.cropCvs.dpr=d},z.bind=function(O){var b,A=O.main;O=O.cropper,A&&null!=(b=this.mainCvs)&&b.bind(A),O&&null!=(A=this.cropCvs)&&A.bind(O)},z.unbind=function(d){"main"===d&&this.mainCvs&&(this.mainCvs.innerWidth=1,this.mainCvs.innerHeight=1,this.mainCvs.unbind()),"cropper"===d&&this.cropCvs&&(this.cropCvs.innerWidth=1,this.cropCvs.innerHeight=1,this.cropCvs.unbind())},z.setCanvasSize=function(d,b){var A;null!=(A=this.mainCvs)&&A.size(d,b),null!=(A=this.cropCvs)&&A.size(d,b)},z.dispose=function(){var d;null!=(d=this.cropCvs)&&d.dispose(),(this.cropCvs=null)!=(d=this.mainCvs)&&d.dispose(),this.mainCvs=null},Sr),ce=(u(tr,ln=H),(z=tr.prototype)._initEvent=function(){var d=this;ln.prototype._on.call(this,Pe,function(b){d.renderPageUid=b}),ln.prototype._on.call(this,ae,function(b){b||(d.renderPageUid=null),d.curPageUid=b})},z.setSlidePages=function(d){if(this.wrapper){for(var b=0;b<3;b++){var A=d[b];if(A.index!==this.targetIndexes[b]||-1<A.index&&""===A.url)return}this.pages=d,this.isNew=!0,this.allowDrag=!1,this.isVisible||this.showPages()}},z.showPages=function(){var d,b=this;this.loading||this.isNew&&(this.loading=!0,this.isNew=!1,d=[],this.pages.forEach(function(A,O){var Y=new Promise(function(re,he){var Oe,ye=null==(Oe=b.wrapper)||null==(Oe=Oe.children[O])?void 0:Oe.children[0],ct=A.index;if(ye)if(ye.style.width=A.width+"px",ye.style.height=A.height+"px",ye.src!==A.url){if(""===A.url)return ye.src=A.url,ye.onload=null,ye.onerror=null,re(-1);ye.onload=function(){ye.onload=null,ye.onerror=null,re(ct)},ye.onerror=function(){ye.onload=null,ye.onerror=null,re(ct)},ye.src=A.url}else re(ct);else he(ct)});d.push(Y)}),Promise.all(d).then(function(A){b.allowDrag=!0;for(var O=0;O<A.length;O++)if(A[O]!==b.targetIndexes[O]){b.allowDrag=!1;break}b.loading=!1,b.showPages()}).catch(function(A){}))},z.startHandler=function(d){!this.isDragging&&this.allowDrag&&(clearTimeout(this.hideTimer),this.startTime=d.timeStamp,d.touches?(this.touchNum=d.touches.length,this.startX=d.touches[0].pageX):this.startX=d.pageX,this.isStart=!0)},z.moveHandler=function(d){var b;!this.isStart||2<this.touchNum||(d=(d.touches?d.touches[0]:d).pageX-this.startX,Math.abs(d)>this.triggerDist&&(this.isDragging=!0,null!=(b=this.stateCb)&&b.call(this,!0),this._visible(!0),(b=this.width)<d?d=b:d<-b&&(d=-b)),this._translateX(d))},z.endHandler=function(d){var b,A,O,Y,re=this;this.isStart&&(b=!0,(!d||d.touches&&(1<this.touchNum||1!==d.changedTouches.length))&&(b=!1),this.isStart=!1,A=(d=d||{}).pageX-this.startX,O=this._calcDirection(d=d.timeStamp-this.startTime,A,b),Y=this,(l(O)?this._oPub.emitEx("preSlide",O):Promise.resolve(!0)).then(function(){O&&(re.allowDrag=!1);var he=re._calcSlidingDistance(O);Y._transition("transform 0.2s linear"),re._translateX(he),setTimeout(function(){var Oe;re.wrapper&&(re.isDragging=!1,null!=(Oe=re.stateCb)&&Oe.call(re,!1))},200),O&&setTimeout(function(){var Oe;re.isDisposed||null!=(Oe=re.slideEndCallback)&&Oe.call(re,O)},205),Y._hideSlide()}))},z._calcDirection=function(d,b,A){if(A){var O,Y=this.minDistanceThreshold,re=this.minTimeThreshold,he=this.triggerDist;if(-1!==(null==(O=(A=this.pages)[0])?void 0:O.index)&&(Y<b||d<re&&he<b))return be;if(-1!==(null==(O=A[2])?void 0:O.index)&&(b<-Y||d<re&&b<-he))return it}return null},z._calcSlidingDistance=function(d){return d===be?this.width:d===it?-this.width:0},z._hideSlide=function(){var d=this;this.curPageUid!==this.renderPageUid||this.pages[1].uid!==this.curPageUid||this.isDragging?(clearTimeout(this.hideTimer),this.hideTimer=setTimeout(function(){d.isDisposed||d._hideSlide()},210)):(this._visible(!1),this.showPages(),this._transition(""),this._translateX(0))},z._translateX=function(d){this.wrapper&&(this.wrapper.style.transform="translateX(".concat(d,"px)"))},z._visible=function(d){this.wrapper&&(this.wrapper.style.visibility=d?"visible":"hidden"),this.isVisible=d},z._transition=function(d){this.wrapper&&(this.wrapper.style.transition=d)},z.bindSlideEndCallback=function(d){this.slideEndCallback=d},z.bind=function(d){this.wrapper=d},z.unbind=function(){this.wrapper=null},z.setSlideSize=function(d){if(!this.wrapper)return!1;d<120&&(this.minDistanceThreshold=d/2),this.width=d,this.wrapper.style.width=3*d+"px",this.wrapper.style.left=-d+"px";for(var b=0;b<3;b++)this.wrapper.children[b].style.width=d+"px"},z.dispose=function(){ln.prototype.dispose.call(this),this._hideSlide(),this.unbind(),this.isDisposed=!0},tr),Me=((z=jn.prototype).resize=function(d,b,A,O,Y,re){return this.useWorker?this.resizeWithWorker(d,b,A,O,Y,re):this.resizeWithoutWorker(d,O,Y,re)},z.resizeWithoutWorker=function(d,b,A,O){for(var Y=d.width,re=d.height,he=(b=Math.round(b),re/(A=Math.round(A))),Oe=d.getContext("2d"),ye=[],ct=2*Math.ceil(re/this.cores/2),gt=[],wt=-1,Jt=0;Jt<this.cores;Jt++){var Xt,an=wt+1;re<=an||(wt=an+ct-1,wt=Math.min(wt,re-1),Xt=Math.min(ct,re-an),ye[Jt]={},ye[Jt].source=Oe.getImageData(0,an,Y,ct),ye[Jt].target=!0,ye[Jt].start_y=Math.ceil(an/he),ye[Jt].height=Xt,an={width_source:Y,height_source:ye[Jt].height,width:b,height:Math.ceil(ye[Jt].height/he),core:Jt,source:ye[Jt].source.data.buffer||ye[Jt].source.data},gt[Jt]=an)}for(var kn=gt.length,hn=[],vn=0;vn<kn;vn++){for(var Jn=(gn=gt[vn]).core,Qn=gn.width_source,Cr=gn.height_source,yr=gn.width,Nr=gn.height,cr=Qn/yr,Ur=Cr/Nr,oi=Math.ceil(cr/2),ai=Math.ceil(Ur/2),Wr=new Uint8ClampedArray(gn.source),gn=yr*Nr*4,un=new ArrayBuffer(gn),ne=new Uint8ClampedArray(un,0,gn),J=0;J<Nr;J++)for(var P=0;P<yr;P++){for(var E=4*(P+J*yr),x=0,R=0,k=0,j=0,B=0,q=0,ee=0,te=J*Ur,ve=Math.floor(P*cr),ht=Math.ceil((P+1)*cr),Ge=Math.floor(J*Ur),pt=Math.ceil((J+1)*Ur),vt=(ht=Math.min(ht,Qn),pt=Math.min(pt,Cr),Ge);vt<pt;vt++)for(var Tt=Math.abs(te-vt)/ai,dn=P*cr,Wt=Tt*Tt,Tn=ve;Tn<ht;Tn++){var xn=Math.abs(dn-Tn)/oi;1<=(xn=Math.sqrt(Wt+xn*xn))||(ee+=(x=2*xn*xn*xn-3*xn*xn+1)*Wr[3+(xn=4*(Tn+vt*Qn))],k+=x,j+=(x=Wr[3+xn]<255?x*Wr[3+xn]/250:x)*Wr[xn],B+=x*Wr[1+xn],q+=x*Wr[2+xn],R+=x)}ne[E]=j/R,ne[1+E]=B/R,ne[2+E]=q/R,ne[3+E]=ee/k}hn.push({core:Jn,target:ne})}for(var _n=0;_n<kn;_n++){var Nn=hn[_n],zn=Math.ceil(ye[_n].height/he);if(ye[_n].target=Oe.createImageData(b,zn),ye[_n].target.data.set)ye[_n].target.data.set(Nn.target);else for(var Pn=ye[_n].target.data.length,yn=0;yn<Pn;yn++)ye[_n].target.data[yn]=Nn.target[yn]}return Promise.resolve(ye)},z.resizeWithWorker=function(d,b,A,O,Y,re){for(var he=this,Oe=Math.floor(b),ye=Math.floor(A),ct=(O=Math.round(O),ye/(Y=Math.round(Y))),gt=d.getContext("2d"),wt=[],Jt=2*Math.ceil(ye/this.cores/2),Xt=-1,an=0;an<this.cores;an++){var kn,hn,vn=Xt+1;ye<=vn||(Xt=vn+Jt-1,Xt=Math.min(Xt,ye-1),kn=Math.min(Jt,ye-vn),wt[an]={},wt[an].source=gt.getImageData(0,vn,Oe,Jt),wt[an].target=!0,hn=Math.ceil(vn/ct),wt[an].start_y=hn,wt[an].height=kn,wt[an].height_part=Math.ceil((vn+kn)/ct)-hn)}d=gt=null;for(var Jn=[],Qn=function(Nr){if(null==wt[Nr])return"continue";var cr=new Worker(he.workerBlobURL),Ur=new Promise(function(oi,ai){cr.onmessage=function(Wr){cr.terminate(),cr.onmessage=null,cr.onerror=null,cr=null,Wr.data.taskUid!==he.taskUid&&ai(!1);var gn=Wr.data.core,un=wt[gn].height_part;if(wt[gn].target=document.createElement("canvas").getContext("2d").createImageData(O,un),wt[gn].target.data.set)wt[gn].target.data.set(Wr.data.target);else for(var ne=wt[gn].target.data.length,J=0;J<ne;J++)wt[gn].target.data[J]=Wr.data.target[J];oi(gn)},cr.onerror=function(Wr){cr.terminate(),cr.onmessage=null,cr.onerror=null,cr=null,ai(Wr)}});Jn.push(Ur),Ur={width_source:Oe,height_source:wt[Nr].height,width:O,height:wt[Nr].height_part,core:Nr,source:wt[Nr].source.data.buffer||wt[Nr].source.data,taskUid:re};try{cr.postMessage(Ur,[Ur.source])}catch{cr.postMessage(Ur)}},Cr=0;Cr<this.cores;Cr++)Qn(Cr);return Promise.all(Jn).then(function(yr){return Promise.resolve(wt)}).catch(function(yr){return Promise.reject(yr)})},jn),Xe=(u(Sn,Vt=H),(jt=Sn.prototype).updateDpr=function(){var d=G();this.dpr=d,this.cvsMng.updateDpr(d),this.tabItem&&this.tabItem.chs.forEach(function(b){b.cropMng.updateDpr(d)})},jt.setAllowSlide=function(d){this.allowSlide=d},jt.setSlidePages=function(d){var b;null!=(b=this.slide)&&b.setSlidePages(d)},jt.checkDisplay=function(d,b){return"single"!==b.disMode||!(!(b=b.getCurPage())||d!==b.uid)},jt.initGraphic=function(d){var b=d.uid;this.curPages=d.chs,b!==this.curTab&&(this.curTab=b,this.tabItem=d,this.virH=d.virH||0,this.virW=d.virW||0,this.fitType=d.fitType,this.clickZoom=d.clickZoom,this.isFreeCrop=d.isFreeCrop,this.scrL=d.scrL,this.scrT=d.scrT,this.zoom=d.zoom,this.iMargin=d.iMargin,this.oMargin=d.oMargin,this.direction=d.direction,this.disMode=d.disMode,this.opMode=d.opMode)},jt.render=function(d){var b,A,O,Y,re,he,Oe,ye,ct,gt,wt,Jt,Xt=this;this.tabItem&&(b=this.tabItem.getCurPage())&&b.uid===d&&(A=this._db.getMid(d),Y=this.cvsMng.mainCvs.ctx,(O=A.img)&&Y&&(re=Math.round(b.style.left-this.scrL+b.style.width/2),he=Math.round(b.style.top-this.scrT+b.style.height/2),(Oe=this.offScreenCanvas).render(ye={viewerUid:"",pageUid:d,isMin:!1,img:O,page:b,midData:A}),gt=(ct=Oe.mainCanvas).width*(wt=b.style.width/Oe.mainWidth),wt*=ct.height,Y.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),Y.save(),Y.imageSmoothingEnabled=!1,Y.mozImageSmoothingEnabled=!1,Y.webkitImageSmoothingEnabled=!1,Y.msImageSmoothingEnabled=!1,Y.oImageSmoothingEnabled=!1,Y.scale(this.dpr,this.dpr),Y.translate(re,he),Y.drawImage(ct,Math.round(-b.style.width/2),Math.round(-b.style.height/2),Math.round(gt),Math.round(wt)),this._handleOverlay(A?.overlays||[],b,Y),Y.restore(),this.workerTimer&&clearTimeout(this.workerTimer),Jt=D(11),this.renderTaskUid=Jt,this.hermite&&(this.hermite.taskUid=this.renderTaskUid),this.useHermite&&this.zoom<1&&this.hermite&&(this.workerTimer=setTimeout(function(){var an,kn,hn,vn;Xt.isDisposed||!Xt.offScreenCanvas||Oe.isDisposed||Xt.hermite.taskUid===Jt&&O.naturalWidth&&O.naturalHeight&&(Oe.render(ye),kn=(an=document.createElement("canvas")).getContext("2d"),vn=Oe.mainHeight,an.width=hn=Oe.mainWidth,an.height=vn,kn.imageSmoothingEnabled=!1,kn.drawImage(ct,0,0),null!=(kn=Xt.hermite)&&kn.resize(an,hn,vn,b.style.width*Xt.dpr||1,b.style.height*Xt.dpr||1,Xt.renderTaskUid).then(function(Jn){var Qn,Cr=Xt._db.getMid(d);Cr&&Xt.tabItem&&(Qn=Xt.tabItem.getCurPage())&&Qn.uid===d&&(Y.save(),Y.clearRect(0,0,Xt.cvsInnerW,Xt.cvsInnerH),Jn.forEach(function(yr){var Nr=0+Math.round((Qn.style.left-Xt.scrL)*Xt.dpr),cr=yr.start_y+Math.round((Qn.style.top-Xt.scrT)*Xt.dpr);Y.putImageData(yr.target,Nr,cr)}),Y.scale(Xt.dpr,Xt.dpr),Y.translate(re,he),Xt._handleOverlay(Cr?.overlays||[],Qn,Y),Y.restore(),Vt.prototype._emit.call(Xt,Pe,d))}).catch(function(Jn){Vt.prototype._emit.call(Xt,Pe,d)}))},100)),"single"===this.disMode&&(this.useHermite&&this.zoom<1&&this.hermite||Vt.prototype._emit.call(this,Pe,d),Vt.prototype._emit.call(this,"pageRendered",this.tabItem.cur))))},jt._handleOverlay=function(d,b,A){var O=this;d.forEach(function(Y){0<b.style.width-Y.width*O.zoom&&0<b.style.height-Y.height*O.zoom&&(A.save(),A.globalAlpha=Y.opacity,A.fillStyle=Y.color,A.fillRect(-b.style.width/2+Y.left*O.zoom,-b.style.height/2+Y.top*O.zoom,Math.min(b.style.width-Y.left*O.zoom,Y.width*O.zoom),Math.min(b.style.height-Y.top*O.zoom,Y.height*O.zoom)),A.restore())})},jt.drawSltBox=function(d){var b=this,A=this.cvsMng.cropCvs.ctx;A&&(A.imageSmoothingEnabled=!1,A.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),1===this.opMode&&(A.save(),A.scale(this.dpr,this.dpr),A.lineJoin="round",d.cropMng.cropBoxes.forEach(function(O){for(var Y=(hn=O.cropBoxStyle).ctrlBorderWidth,re=hn.ctrlBackground,he=hn.ctrlBorderColor,Oe=hn.ctrlBorderRadius,ye=hn.ctrlWidth,ct=hn.ctrlHeight,gt=hn.borderColor,wt=hn.borderWidth,Jt=hn.invalidBorderColor,Xt=hn.invalidCtrlBorderColor,an=hn.background,kn=hn.dashLine,hn=hn.enableConcaveBorderColor,vn=O.probePoints.slice(0,8),Jn=O.midpoints.slice(0,8),Qn=0;Qn<4;Qn++){var Cr=b.toCanvasCoordinate(vn[2*Qn],vn[2*Qn+1]),yr=b.toCanvasCoordinate(Jn[2*Qn],Jn[2*Qn+1]);vn[2*Qn]=Cr.x,vn[2*Qn+1]=Cr.y,Jn[2*Qn]=yr.x,Jn[2*Qn+1]=yr.y}A.save();try{A.setLineDash(kn)}catch{}A.fillStyle=an,A.lineWidth=wt,A.strokeStyle=hn&&!O.isConvex?Jt:gt,A.beginPath(),A.moveTo(vn[0],vn[1]),A.lineTo(vn[2],vn[3]),A.lineTo(vn[4],vn[5]),A.lineTo(vn[6],vn[7]),A.closePath(),A.stroke(),A.restore(),A.lineWidth=Y,A.fillStyle=re,A.strokeStyle=hn&&!O.isConvex?Xt:he;for(var Nr=Math.min(Oe,ye/2),cr=Math.min(Oe,ct/2),Ur=0;Ur<4;Ur++)b.drawRoundedRectangle(A,{x:vn[2*Ur],y:vn[2*Ur+1],width:ye,height:ct,radiusX:Nr,radiusY:cr}),A.stroke(),""!==re&&A.fill(),b.drawRoundedRectangle(A,{x:Jn[2*Ur],y:Jn[2*Ur+1],width:ye,height:ct,radiusX:Nr,radiusY:cr}),A.stroke(),""!==re&&A.fill()}),A.restore()))},jt.drawRoundedRectangle=function(d,b){var A=b.width,O=b.height,Y=b.radiusX,re=b.radiusY,he=b.x,Oe=[{x:he-A/2+Y,y:(b=b.y)-O/2+re,start:Math.PI,end:3*Math.PI/2},{x:he+A/2-Y,y:b-O/2+re,start:3*Math.PI/2,end:2*Math.PI},{x:he+A/2-Y,y:b+O/2-re,start:0,end:Math.PI/2},{x:he-A/2+Y,y:b+O/2-re,start:Math.PI/2,end:Math.PI}];if(d.beginPath(),d.ellipse)for(var ye=0;ye<4;ye++){var ct=Oe[ye];d.ellipse(ct.x,ct.y,Y,re,0,ct.start,ct.end)}else d.rect(he-A/2,b-O/2,A,O);d.closePath()},jt.clearCanvas=function(){var d=this.cvsMng.mainCvs.ctx;d&&d.clearRect(0,0,this.cvsInnerW,this.cvsInnerH)},jt._layoutSingle=function(d,b,A){var O,Y,re,he,Oe,ye,ct,gt,wt,Jt,Xt,an=d.getCurPage();an&&(wt=this._db.getMetadata(an.uid),ct=this._db.getMid(an.uid)),an&&wt&&ct?(O=wt.width,Y=wt.height,re=wt.width,he=wt.height,ye=Oe=null,(ct=ct.edt.all).forEach(function(kn){var hn,vn;"rotate"===kn.type?(0===kn.mode&&(ye=L(0,0,re,he,kn.calcAngle)),null!==Oe&&Oe!==kn.mode&&(re=O,he=Y),Oe=kn.mode,ye&&(hn=(vn=ye).width,O=hn,Y=vn=vn.height)):"crop"!==kn.type&&"changeSize"!==kn.type||(re=O=hn=kn.width,he=Y=vn=kn.height)}),an?.setNaturalSize(O,Y),ct=(wt=this._calcZoom(d,O||0,Y||.1)).zoom,Jt=wt.canvasWidth,Xt=wt.canvasHeight,gt=wt.virW,wt=wt.virH,this.setCanvasSize(Jt,Xt),an.cropMng.setZoom(ct=ct||1),this.virW=gt,this.virH=wt,A||Vt.prototype._emit.call(this,Ne,{width:this.virW,height:this.virH,x:this.scrL,y:this.scrT}),Xt=(this.cvsCltH-wt)/2,(Jt=(this.cvsCltW-gt)/2)<0&&(b&&(this._srL=Math.abs(Jt)),Jt=0),Xt<0&&(b&&(this._srT=Math.abs(Xt)),Xt=0),an.setBorder(d.pageBorderWidth),an.setSize(gt,wt),an.setPosition(Jt,Xt),d.virW=gt,d.virH=wt,this._zoomTo(ct,!1,b),this.setVirtualSize(gt,wt),this._zoomTo(ct,!1,b),this.zoom!==ct&&(this.zoom=ct),A||Vt.prototype._emit.call(this,Ne,{width:gt,height:wt,x:this.scrL,y:this.scrT})):Vt.prototype._emit.call(this,Ne,{width:1,height:1,x:0,y:0})},jt._calcZoom=function(d,b,A){return"window"===d.fitType?this._calFitWindow(b,A):"width"===d.fitType?this._calcFitWidth(b,A):"height"===d.fitType?this._calcFitHeight(b,A):this.keepZoom&&"none"===d.fitType?this._calcKeepZoom(b,A):this._calFitWindow(b,A)},jt.calcZoomForSlide=function(d,b){return d=this._calFitWindow(d,b).zoom,Math.min(Math.max(this.minZoom,d),this.maxZoom)},jt._calcKeepZoom=function(d,re){var A=this.zoom,O=this.cvsOffW,Y=this.cvsOffH;return O<(d*=A)&&(Y-=this.scrBarW),Y<(re*=A)&&(O-=this.scrBarW),{zoom:A,canvasWidth:O,canvasHeight:Y,virW:d,virH:re}},jt._calcFitWidth=function(d,b){var A=1,O=0,Y=this.cvsOffW,re=this.cvsOffH;return re<(O=b*(A=d<=this.cvsOffW?1:this.cvsOffW/d))&&(O=b*(A=d<=this.cvsOffW-this.scrBarW?1:(this.cvsOffW-this.scrBarW)/d))>this.cvsOffH&&(Y-=this.scrBarW),{zoom:A,canvasWidth:Y,canvasHeight:re,virW:d*A,virH:O}},jt._calcFitHeight=function(d,b){var A=1,O=0,re=0,Y=this.cvsOffW;return re=this.cvsOffH,Y<(O=d*(A=b<=this.cvsOffH?1:this.cvsOffH/b))&&(O=d*(A=b<=this.cvsOffH-this.scrBarW?1:(this.cvsOffH-this.scrBarW)/b))>this.cvsOffW&&(re-=this.scrBarW),{zoom:A,canvasWidth:Y,canvasHeight:re,virW:O,virH:b*A}},jt._calFitWindow=function(d,b){return d<=this.cvsCltW&&b<=this.cvsCltH||d>this.cvsCltW&&b<=this.cvsCltH||!(d<=this.cvsCltW&&b>this.cvsCltH)&&d/this.cvsCltW>=b/this.cvsCltH?this._calcFitWidth(d,b):this._calcFitHeight(d,b)},jt._getPage=function(d){for(var b=this.curPages.length,A=0;A<b;A++)if(this.curPages[A].uid===d)return{page:this.curPages[A],index:A}},jt.setFitType=function(d){this.fitType=d,this.tabItem&&(this.tabItem.fitType=d)},jt._setValidArea=function(){this.setValidArea(this.cvsCltW,this.cvsCltH,this.virW,this.virH)},jt._setScrollerPosition=function(){var d=this.cvsMng.mainCvs.canvas;if(d){var b={left:0,top:0,right:0,bottom:0,width:0,height:0};try{b=d.getBoundingClientRect()}catch{}this.setPosition(b.left+window.pageXOffset+d?.clientLeft||0,b.top+window.pageYOffset+d?.clientTop||0)}},jt.setCanvasOffsetSize=function(d,b){var A=!1;return this.cvsOffW===d&&this.cvsOffH===b&&(A=!0),this.cvsOffW=d,this.cvsOffH=b,this.cvsCltW=d,this.cvsCltH=b,this.cvsInnerW=d*this.dpr,this.cvsInnerH=b*this.dpr,this.cvsMng.setCanvasSize(d,b),null!=(b=this.slide)&&b.setSlideSize(d),this._setScrollerPosition(),A},jt.setCanvasSize=function(d,b){this.cvsCltW=d,this.cvsCltH=b,this.cvsInnerW=d*this.dpr,this.cvsInnerH=b*this.dpr,this.cvsMng.setCanvasSize(d,b)},jt.setVirtualSize=function(d,b){this.virW=d||0,this.virH=b||0,this._setValidArea()},jt.setZoom=function(d){return d=Math.max(Math.min(this.maxZoom,d),this.minZoom),this.zoom=d,this.tabItem&&this.tabItem.total||(this._zoom=d),this.setFitType("none"),Vt.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&Vt.prototype._emit.call(this,"_getSlidePages"),!0},jt.getZoom=function(){return this.zoom},jt.zoomTo=function(d,b,A,O){return this.zoom=d,this._zoomTo(d,b,!1,A,O),this.setFitType("none"),Vt.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&Vt.prototype._emit.call(this,"_getSlidePages"),this._zoom},jt.scrollTo=function(d,b,A,O){this._scrollTo(d,b,!1),Vt.prototype._emit.call(this,"_onRender")},jt.zoomIn=function(){var d=this.zoom;return this._zoomTo(d*=this.zoomInDelta,!1),this.setFitType("none"),Vt.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&Vt.prototype._emit.call(this,"_getSlidePages"),d},jt.zoomOut=function(){var d=this.zoom;return this._zoomTo(d/=this.zoomInDelta,!1),this.setFitType("none"),Vt.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&Vt.prototype._emit.call(this,"_getSlidePages"),d},jt.getMinPageData=function(){var d=document.createElement("canvas"),b=d.getContext("2d"),he=this.offScreenCanvas,A=(d.dvsUid="useToGetMinPageData",he.mainWidth),O=he.mainHeight,Y=A/O,re=((800<A||800<O)&&(1<=Y?O=(A=800)/Y:A=(O=800)*Y),d.width=A,d.height=O,Y=A/he.mainWidth,Y*=he.mainCanvas.width,he.mainCanvas.height*(re=O/he.mainHeight));return b.drawImage(he.mainCanvas,0,0,Math.floor(Y),Math.floor(re)),he=b.getImageData(0,0,A,O),d.width=1,d.height=1,b.fillRect(0,0,1,1),d=null,he},jt.setSaveBackgroundColor=function(d){this.saveBg=d,this.offScreenCanvas.saveColor=d},jt.onCanvasTouchstart=function(d){var b,A,O,Y,re,he;d.cancelable&&d.preventDefault(),d.touches[0]&&d.touches[0].target&&d.touches[0].target.tagName.match(/input|textarea|select/i)||"single"===this.disMode&&"single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,d.target.tagName.match(/input|textarea|select/i)||(b=d.touches[0].pageX,A=d.touches[0].pageY,0===this.opMode?(this._pageX=b,this._pageY=A,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT&&!this.slide.isDragging&&null!=(O=this.slide)&&O.startHandler(d),this.isSliding||(1<d.targetTouches.length&&(this._startDistance=this._calDistance(d.targetTouches)),this.startHandler(d.targetTouches,d.timeStamp))):1===this.opMode?this.checkMouseOverPage(d)&&(O=this.tabItem.getCurPage())&&(Y=this.getMouseCoordinate(d),Y=this.toPageCoordinate(Y.x,Y.y),!(re=!1)===d.ctrlKey&&(re=!0),he=this.tabItem.cur,null!==O.cropMng.checkSelect(Y.x,Y.y)||re||0<O.cropMng.cropBoxes.length&&Vt.prototype._emit.call(this,Ce,he),O.cropMng.onStartHandler(Y.x,Y.y,re)):2===this.opMode&&this.checkMouseOverPage(d)&&(this.setFitType("none"),this._setScrollerPosition(),this._zoomTo(this._zoom*this.zoomInDelta,!1,!1,b-this._outerLeft,A-this._outerTop),Vt.prototype._emit.call(this,"_onRender"))))},jt.onCanvasTouchmove=function(d){if("single"===this.disMode&&this.tabItem){var b=this.tabItem.getCurPage();if(b&&this._mousedown){if(0===this.opMode)if(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL&&1===d.targetTouches.length)null!=(b=this.slide)&&b.moveHandler(d);else{if(this.isSliding)return;(b=1)<d.targetTouches.length&&(b=this._calDistance(d.targetTouches)/this._startDistance,this.fitType="none",this.tabItem.fitType="none",d.scale&&(b=d.scale)),this.moveHandler(d.targetTouches,d.timeStamp,b),Vt.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&Vt.prototype._emit.call(this,"_getSlidePages")}this._mousedown=!0}}},jt.onCanvasTouchend=function(d){},jt.onDocumentTouchend=function(d){},jt.onCanvasMousedown=function(d){var b,A,O,Y;"single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,d.cancelable&&d.preventDefault(),d.target.tagName.match(/input|textarea|select/i)||(0===this.opMode?(this._pageX=d.pageX,this._pageY=d.pageY,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT&&!this.slide.isDragging?null!=(b=this.slide)&&b.startHandler(d):this.startHandler([{pageX:d.pageX,pageY:d.pageY}],d.timeStamp)):1===this.opMode?this.checkMouseOverPage(d)&&(b=this.tabItem.getCurPage())&&(A=this.getMouseCoordinate(d),A=this.toPageCoordinate(A.x,A.y),!(O=!1)===d.ctrlKey&&(O=!0),Y=this.tabItem.cur,null!==b.cropMng.checkSelect(A.x,A.y)||O||0<b.cropMng.cropBoxes.length&&Vt.prototype._emit.call(this,Ce,Y),b.cropMng.onStartHandler(A.x,A.y,O)):2===this.opMode&&this.checkMouseOverPage(d)&&(this.setFitType("none"),this._setScrollerPosition(),this._zoomTo(this._zoom*this.zoomInDelta,!1,!1,d.pageX-this._outerLeft,d.pageY-this._outerTop),Vt.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&Vt.prototype._emit.call(this,"_getSlidePages"))))},jt.onCanvasMousemove=function(d){this._mousedown&&d.cancelable&&d.preventDefault()},jt.onCanvasMouseup=function(d){},jt.onDocumentMousemove=function(d){var b,A,O;"single"===this.disMode&&this.tabItem&&(b=this.tabItem.getCurPage())&&(A=this.getMouseCoordinate(d),A=this.toPageCoordinate(A.x,A.y),this._mousedown?(1===this.opMode?void 0!==this.checkMouseOverPage(d)&&(!(O=!1)===d.ctrlKey&&(O=!0),b.cropMng.setAspectRatio(this.aspectRatio),b.cropMng.setKeepAspectRatio(!0===d.shiftKey||this.keepAspectRatio),b.cropMng.onMoveHandler(A.x,A.y,O),Vt.prototype._emit.call(this,"_onRenderBoxes")):0!==this.opMode||d.touches||(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL?null!=(O=this.slide)&&O.moveHandler(d):0===this._maxSrL&&0===this._maxSrT||(this.moveHandler([{pageX:d.pageX,pageY:d.pageY}],d.timeStamp),Vt.prototype._emit.call(this,"_onRender"))),this._mousedown=!0):0<b.cropMng.cropBoxes.length&&(null!==(O=b.cropMng.checkSelectForCursor(A.x,A.y))?(d=null,"move"===O.position?d="move":"nw"!==O.position&&"se"!==O.position&&"ne"!==O.position&&"sw"!==O.position&&"e"!==O.position&&"w"!==O.position&&"n"!==O.position&&"s"!==O.position||(d=O.position+"-resize"),Vt.prototype._emit.call(this,Re,d)):Vt.prototype._emit.call(this,Re,this.defaultCursor)))},jt._calDistance=function(d){return Math.sqrt(Math.pow(d[0].pageX-d[1].pageX,2)+Math.pow(d[0].pageY-d[1].pageY,2))},jt.onDocumentMouseup=function(d){var b,A;this._mousedown&&(1===this.opMode?this.tabItem&&"single"===this.tabItem.disMode&&(A=this.tabItem.getCurPage())&&(A.cropMng.onEndHandler(),b=this.tabItem.cur,0<(A=A.cropMng.getRectArr()).length&&Vt.prototype._emit.call(this,mt,b,A),Vt.prototype._emit.call(this,"_onRenderBoxes")):0===this.opMode&&(this.clickZoom&&this._pageX===d.pageX&&this._pageY===d.pageY&&(b=this.getPosition(),this._zoomTo(this.zoom*this.zoomInDelta,!1,!1,d.pageX-b.left,d.pageY-b.top),Vt.prototype._emit.call(this,"_onRender")),this.allowSlide&&null!=(A=this.slide)&&A.endHandler(d),this.endHandler(d&&d.timeStamp||0)),this._mousedown=!1)},jt.onCanvasWheel=function(d){this.isSliding||this._onWheelHandler(d)},jt.onCanvasScroll=function(d){d&&d.target&&(this._scrollTo(d.target.scrollLeft,d.target.scrollTop,!1),Vt.prototype._emit.call(this,"_onRender"),Vt.prototype._emit.call(this,"_onRenderBoxes"))},jt._onWheelHandler=function(d){var b=0,A=d.wheelDelta||-d.deltaY;d.ctrlKey?(d.cancelable&&d.preventDefault(),b=0<A?1.05:.95,this.fitType="none",this.tabItem.fitType="none",this.zoomHandler(A,d.timeStamp,d.pageX,d.pageY),Vt.prototype._emit.call(this,"_onRender"),Vt.prototype._emit.call(this,"_onRenderBoxes"),0===this._maxSrL&&0===this._maxSrT&&Vt.prototype._emit.call(this,"_getSlidePages")):d.shiftKey?0!==this._maxSrL&&(d.cancelable&&d.preventDefault(),b=A<0?30:-30,(0!==this._srL&&b<0||this._srL!==this._maxSrL&&0<b)&&(this._scrollTo(this.scrL+b,this.scrT,!1),Vt.prototype._emit.call(this,"_onRender"),Vt.prototype._emit.call(this,"_onRenderBoxes"))):0!==this._maxSrT&&(d.cancelable&&d.preventDefault(),b=A<0?30:-30,(0!==this._srT&&b<0||this._srT!==this._maxSrT&&0<b)&&(this._scrollTo(this.scrL,this.scrT+b,!1),Vt.prototype._emit.call(this,"_onRender"),Vt.prototype._emit.call(this,"_onRenderBoxes")))},jt.checkMouseOverPage=function(O){if(!this.tabItem)return!1;var b=this.tabItem.getCurPage();if(!b)return!1;O=this.getMouseCoordinate(O);var A=(O=this.toPageCoordinate(O.x,O.y)).x;return O=O.y,0<=A&&A<=b.naturalWidth&&0<=O&&O<=b.naturalHeight},jt.toCanvasCoordinate=function(d,b){var A=this.tabItem.getCurPage();return{x:d=d*this.zoom+A.style.left-this.scrL,y:b=b*this.zoom+A.style.top-this.scrT}},jt.toPageCoordinate=function(d,b){var A=this.tabItem.getCurPage();return{x:d=(d-A.style.left+this.scrL)/this.zoom,y:b=(b-A.style.top+this.scrT)/this.zoom}},jt.getMouseCoordinate=function(O){var b=this.cvsMng.mainCvs.canvas.getBoundingClientRect();return{x:(void 0!==O.clientX?O:O.changedTouches[0]).clientX-b.left,y:(O=(void 0!==O.clientY?O:O.changedTouches[0]).clientY)-b.top}},jt._initAnimation=function(){this._time=Date.now||function(){return+new Date},this._fps=60,this._running={},this._counter=1},jt._initScroller=function(){this.callback=function(d,b,A){this.scrL=d,this.scrT=b,this.zoom=A,this.tabItem&&(this.tabItem.scrL=d,this.tabItem.scrT=b,this.tabItem.zoom=A)}.bind(this),this._setValidArea(),this._setScrollerPosition()},jt.setValidArea=function(d,b,A,O){d===+d&&(this._outerWidth=d),b===+b&&(this._outerHeight=b),A===+A&&(this._innerWidth=A),O===+O&&(this._innerHeight=O),this.calcMaxScrollValue()},jt.calcMaxScrollValue=function(d){var b,A,O,Y,re,he,Oe,ye,ct;void 0===d&&(d=this._zoom),this.tabItem&&((ye=this.tabItem.getCurPage())&&(ct=this._db.getMetadata(ye.uid),b=this._db.getMid(ye.uid)),ye&&ct&&b&&(A=ct.width,O=ct.height,Y=ct.width,re=ct.height,Oe=he=null,b.edt.all.forEach(function(gt){var wt,Jt;"rotate"===gt.type?(0===gt.mode&&(Oe=L(0,0,Y,re,gt.calcAngle)),null!==he&&he!==gt.mode&&(Y=A,re=O),he=gt.mode,Oe&&(wt=(Jt=Oe).width,A=wt,O=Jt=Jt.height)):"crop"!==gt.type&&"changeSize"!==gt.type||(Y=A=wt=gt.width,re=O=Jt=gt.height)}),ye=A*d,ct=O*d,this._maxSrL=Math.round(Math.max(ye-this._outerWidth,0)),this._maxSrT=Math.round(Math.max(ct-this._outerHeight,0))))},jt.setPosition=function(d,b){this._outerLeft=d||0,this._outerTop=b||0},jt.getPosition=function(){return{left:this._outerLeft||0,top:this._outerTop||0}},jt.setSnapSize=function(d,b){this._snapWidth=d,this._snapHeight=b},jt.activatePull=function(d,b,A,O){this._pullHeight=d,this._pullStart=O,this._pullActivate=b,this._pullDeactivate=A},jt.emitPull=function(){this.publish(this._srL,-this._pullHeight,this._zoom,!0),this._pullStart&&this._pullStart()},jt.endPull=function(){this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate(),this._scrollTo(this._srL,this._srT,!0)},jt.getCurScrollValues=function(){return{scrollLeft:this._srL,scrollTop:this._srT,zoom:this._zoom}},jt.getMaxScrollValues=function(){return{maxScrollLeft:this._maxSrL,maxScrollTop:this._maxSrT}},jt._zoomTo=function(d,b,A,O,Y,re){return void 0===A&&(A=!1),!(!this.zooming||"continuous"===this.disMode)&&(re&&(this._zoomComplete=re),this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),void 0===O&&(O=this._outerWidth/2),void 0===Y&&(Y=this._outerHeight/2),re=this._zoom,d=Math.max(Math.min(d,this.maxZoom),this.minZoom),"single"===this.disMode?(this.calcMaxScrollValue(d),(O=(O+this._srL)*d/re-O)>this._maxSrL?O=this._maxSrL:O<0&&(O=0),(re=(Y+this._srT)*d/re-Y)>this._maxSrT?re=this._maxSrT:re<0&&(re=0),(this._innerWidth<this._outerWidth||A)&&(O=this._maxSrL/2),(this._innerHeight<this._outerHeight||A)&&(re=this._maxSrT/2),this.publish(O,re,d,b),!0):void 0)},jt._zoomBy=function(d,b,A,O,Y){return this._zoomTo(this._zoom*d,b,!1,A,O,Y)},jt._scrollTo=function(d,b,A,O){this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),void 0!==O&&O!==this._zoom?this.zooming&&(d*=O,b*=O,this.calcMaxScrollValue(O)):O=this._zoom,this.scrollX?this.paging?d=Math.round(d/this._outerWidth)*this._outerWidth:this.snapping&&(d=Math.round(d/this._snapWidth)*this._snapWidth):d=this._srL,this.scrollY?this.paging?b=Math.round(b/this._outerHeight)*this._outerHeight:this.snapping&&(b=Math.round(b/this._snapHeight)*this._snapHeight):b=this._srT,d=Math.max(Math.min(this._maxSrL,d),0),b=Math.max(Math.min(this._maxSrT,b),0),d===this._srL&&b===this._srT&&(A=!1),this._isProcessing||this.publish(d,b,O,A)},jt._scrollBy=function(d,b,A){this._scrollTo((this._isAnimating?this._futureLeft:this._srL)+(d||0),(this._isAnimating?this._futureTop:this._srT)+(b||0),A)},jt.startHandler=function(d,b){var A;void 0!==d.length&&(b instanceof Date&&(b=b.valueOf()),this._interruptedAnimation=!0,this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),this._isAnimating&&(this._stop(this._animationId),this._isAnimating=!1),this._isSingleTouch=1===d.length,d=this._isSingleTouch?(A=d[0].pageX,d[0].pageY):(A=Math.abs(d[0].pageX+d[1].pageX)/2,Math.abs(d[0].pageY+d[1].pageY)/2),this._startTouchLeft=A,this._startTouchTop=d,this._startZoom=this._zoom,this._lastTouchLeft=A,this._lastTouchTop=d,this._lastScale=1,this._lastTouchMove=b,this._enableScrollX=!this._isSingleTouch&&this.scrollX,this._enableScrollY=!this._isSingleTouch&&this.scrollY,this._isProcessing=!0,this._isDecComp=!1,this._isDragging=!this._isSingleTouch,this._position=[])},jt.moveHandler=function(d,b,A){var O,Y,re,he,Oe,ye,ct,gt,wt;void 0!==d.length&&(b instanceof Date&&(b=b.valueOf()),this._isProcessing&&(d=1===d.length?(O=d[0].pageX,d[0].pageY):(O=Math.abs(d[0].pageX+d[1].pageX)/2,Math.abs(d[0].pageY+d[1].pageY)/2),Y=this._position,this._isDragging?(wt=O-this._lastTouchLeft,re=d-this._lastTouchTop,he=this._srL,Oe=this._srT,ye=this._zoom,void 0!==A&&this.zooming&&(ye=(ct=ye)/this._lastScale*A,ct!==(ye=Math.max(Math.min(ye,this.maxZoom),this.minZoom))&&(this._setScrollerPosition(),he=((gt=O-this._outerLeft)+he)*ye/ct-gt,Oe=((gt=d-this._outerTop)+Oe)*ye/ct-gt,this.calcMaxScrollValue(ye))),this._enableScrollX&&((he-=wt*this.speedDelta)>this._maxSrL||he<0)&&(this.bouncing?he+=wt/2*this.speedDelta:he=Math.max(Math.min(this._maxSrL,he),0)),this._enableScrollY&&((Oe-=re*this.speedDelta)>this._maxSrT||Oe<0)&&(this.bouncing?(Oe+=re/2*this.speedDelta,this._enableScrollX||null==this._pullHeight||(!this._pullActive&&Oe<=-this._pullHeight?(this._pullActive=!0,this._pullActivate&&this._pullActivate()):this._pullActive&&Oe>-this._pullHeight&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))):Oe=Math.max(Math.min(this._maxSrT,Oe),0)),60<Y.length&&Y.splice(0,30),Y.push(he,Oe,b),this.publish(he,Oe,ye)):(ct=this.locking?3:0,gt=Math.abs(O-this._startTouchLeft),wt=Math.abs(d-this._startTouchTop),this._enableScrollX=this.scrollX&&ct<=gt,this._enableScrollY=this.scrollY&&ct<=wt,Y.push(this._srL,this._srT,b),this._isDragging=(this._enableScrollX||this._enableScrollY)&&(5<=gt||5<=wt),this._isDragging&&(this._interruptedAnimation=!1)),this._lastTouchLeft=O,this._lastTouchTop=d,this._lastTouchMove=b,this._lastScale=A))},jt.endHandler=function(d){if(d instanceof Date&&(d=d.valueOf()),this._isProcessing){if(this._isProcessing=!1,this._isDragging)if(this._isDragging=!1,this._isSingleTouch&&this.animating&&d-this._lastTouchMove<=100){for(var A,O=this._position,Y=O.length-1,re=Y,he=Y;0<he&&O[he]>this._lastTouchMove-100;he-=3)re=he;re!==Y?(A=this._srT-O[re-1],this._decVX=(this._srL-O[re-2])/(Y=O[Y]-O[re])*(1e3/60),this._decVY=A/Y*(1e3/60),1<Math.abs(this._decVX)||1<Math.abs(this._decVY)?this._startDeceleration(d):this._scrollComp&&this._scrollComp()):this._scrollComp&&this._scrollComp()}else 100<d-this._lastTouchMove&&this._scrollComp&&this._scrollComp();this._isDecelerating||(this._pullActive&&this._pullStart?(this.publish(this._srL,this._srT,this._zoom),this._pullStart()):((this._interruptedAnimation||this._isDragging)&&this._scrollComp&&this._scrollComp(),this._scrollTo(this._srL,this._srT,!0,this._zoom),this._pullActive&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))),this._position.length=0}},jt.zoomHandler=function(d,b,A,O){return d=0<d?1.05:.95,this._setScrollerPosition(),this._zoomTo(this._zoom*d,!1,!1,A-this._outerLeft,O-this._outerTop)},jt.publish=function(d,b,A,O){var Y,re,he,Oe,ye,ct,gt=this;this._isAnimating&&(this._stop(this._isAnimating),this._isAnimating=!1),O&&this.animating?(this._futureLeft=d,this._futureTop=b,this._futureZoom=A,Oe=d-(Y=this._srL),ye=b-(re=this._srT),ct=A-(he=this._zoom),this._isAnimating=this._start(function(Jt,Xt,an){an&&(gt._srL=Y+Oe*Jt,gt._srT=re+ye*Jt,gt._zoom=he+ct*Jt,gt.callback&&gt.callback(d,b,A))},function(Jt){return gt._isAnimating===Jt},function(Jt,Xt,an){Xt===gt._isAnimating&&(gt._isAnimating=!1),(gt._isDecComp||an)&&gt._scrollComp&&gt._scrollComp(),gt.zooming&&(gt.calcMaxScrollValue(),gt._zoomComplete&&(gt._zoomComplete(),gt._zoomComplete=null))},this.animationDuration,this._isAnimating?this._easeOut:this._easeInOut)):(this._futureLeft=this._srL=d,this._futureTop=this._srT=b,this._futureZoom=this._zoom=A,this.callback&&this.callback(d,b,A),this.zooming&&(this.calcMaxScrollValue(),this._zoomComplete&&(this._zoomComplete(),this._zoomComplete=null)))},jt._easeOut=function(d){return Math.pow(d-1,3)+1},jt._easeInOut=function(d){return(d/=.5)<1?.5*Math.pow(d,3):.5*(Math.pow(d-2,3)+2)},jt._startDeceleration=function(d){var b,A,O,Y,re=this,he=(this.paging?(b=Math.max(Math.min(this._srL,this._maxSrL),0),A=Math.max(Math.min(this._srT,this._maxSrT),0),O=this._outerWidth,Y=this._outerHeight,this._minDecL=Math.floor(b/O)*O,this._minDecT=Math.floor(A/Y)*Y,this._maxDecL=Math.ceil(b/O)*O,this._maxDecT=Math.ceil(A/Y)*Y):(this._minDecL=0,this._minDecT=0,this._maxDecL=this._maxSrL,this._maxDecT=this._maxSrT),function(wt,Jt,Xt){var an,kn,hn,vn=re._srL+re._decVX,Jn=re._srT+re._decVY;re.bouncing||(an=Math.max(Math.min(re._maxDecL,vn),re._minDecL),kn=Math.max(Math.min(re._maxDecT,Jn),re._minDecT),an!==vn&&(vn=an,re._decVX=0),kn!==Jn&&(Jn=kn,re._decVY=0)),Xt?re.publish(vn,Jn,re._zoom):(re._srL=vn,re._srT=Jn),re.paging||(re._decVX*=.95,re._decVY*=.95),re.bouncing&&(kn=an=0,Xt=re.penetrationAcceleration,hn=re.penetrationDeceleration,vn<re._minDecL?an=re._minDecL-vn:vn>re._maxDecL&&(an=re._maxDecL-vn),Jn<re._minDecT?kn=re._minDecT-Jn:Jn>re._maxDecT&&(kn=re._maxDecT-Jn),0!=an&&(an*re._decVX<=0?re._decVX+=an*hn:re._decVX=an*Xt),0!=kn&&(kn*re._decVY<=0?re._decVY+=kn*hn:re._decVY=kn*Xt))}),Oe=this.snapping?4:.001;this._isDecelerating=this._start(he,function(){return Math.abs(re._decVX)>=Oe||Math.abs(re._decVY)>=Oe||!(re._isDecComp=!0)},function(wt,Jt,Xt){re._isDecelerating=!1,re._scrollComp&&re._scrollComp(),re._scrollTo(re._srL,re._srT,re.snapping)})},jt._stop=function(d){var b=null!=this._running[d];return b&&(this._running[d]=null),b},jt._isRunning=function(d){return null!=this._running[d]},jt._start=function(d,b,A,O,Y){var re=this,he=this._time(),Oe=he,ye=0,ct=0,gt=this._counter++;if(gt%16==0){var wt,Jt={};for(wt in this._running)Jt[wt]=!0;this._running=Jt}return this._running[gt]=!0,M(function an(hn){hn=!0!==hn;var vn=re._time();if(!re._running[gt]||b&&!b(gt))return re._running[gt]=null,void(A&&A(re._fps-ct/((vn-he)/1e3),gt,!1));if(hn)for(var Jn=Math.round((vn-Oe)/(1e3/re._fps))-1,Qn=0;Qn<Math.min(Jn,4);Qn++)an(!0),ct++;O&&1<(ye=(vn-he)/O)&&(ye=1);var Cr=Y?Y(ye):ye;!1!==d(Cr,vn,hn)&&1!==ye||!hn?hn&&(Oe=vn,M(an)):(re._running[gt]=null,A&&A(re._fps-ct/((vn-he)/1e3),gt,1===ye||null==O))}),gt},jt.dispose=function(){var d;Vt.prototype.dispose.call(this),(this._db=null)!=(d=this.cvsMng)&&d.dispose(),(this.cvsMng=null)!=(d=this.slide)&&d.dispose(),this.slide=null,this.hermite=null,this.offScreenCanvas=null,this.isDisposed=!0},Sn),Be=(u(mn,Ht=H),(z=mn.prototype).updateUiSetting=function(d){this.init(d=void 0===d?{}:d)},z.init=function(d,b){var A=this;void 0===b&&(b=[]),Object.keys(d).forEach(function(O){var Y=A[O];Y!==d[O]&&(A[O]=d[O],Y===A[O]&&b.push(O))})},z._err=function(d){this._emit(Ve,d)},z._ok=function(){this._emit(Ve,et)},z.scrollTo=function(d){this.emit("_scrollToUI",d,!1)},z.setViewMode=function(d,b){return c(d)&&c(b)?d<0||b<0?(this._err(Ut),!1):(this._rows=b,this._columns=d,this.emit("_setViewModeUI",d,b),!0):(this._err(lt),!1)},z.getConfig=function(){return{pubsub:this._tbPub.getPublishSubscribe(),uid:this.uid,size:this.size,mouseShape:this.mouseShape,scrollDirection:this.scrollDirection,sequence:this.sequence,location:this.location,showThumbnail:this.showThumbnail,showPageNumber:this.showPageNumber,showRemoveBtn:this.showRemoveBtn,fullThumbnail:this.fullThumbnail,allowPageDragging:this.allowPageDragging,allowResizing:this.allowResizing,allowKeyboardControl:this.allowKeyboardControl,autoChangeIndex:this.autoChangeIndex,rows:this.rows,columns:this.columns,background:this.background,border:this.border,pageBackground:this.pageBackground,pageBorder:this.pageBorder,selectedPageBackground:this.selectedPageBackground,selectedPageBorder:this.selectedPageBorder,hoverPageBackground:this.hoverPageBackground,hoverPageBorder:this.hoverPageBorder,placeholderBackground:this.placeholderBackground,pageMargin:this.pageMargin,checkbox:this.checkbox,pageNumber:this.pageNumber}},z.on=function(d,b){return l(d)&&v(b)?(this._tbPub._on(d,b),!0):(this._err(lt),!1)},z.emit=function(d){var b;if(!l(d))return this._err(lt),!1;for(var A=arguments.length,O=new Array(1<A?A-1:0),Y=1;Y<A;Y++)O[Y-1]=arguments[Y];return(b=this._tbPub)._emit.apply(b,[d].concat(O)),!0},z.off=function(d,b){return l(d)?(this._tbPub._off(d,b),!0):(this._err(lt),!1)},z._notifyUi=function(d){this.emit("_updateThumbnailPropUI",d)},z.dispose=function(){var d;Ht.prototype.dispose.call(this),null!=(d=this._tbPub)&&d.dispose(),this._tbPub=null},nt(mn,[{key:"optimizeImage",get:function(){return this._optimizeImage},set:function(d){this._optimizeImage=d,this._notifyUi({optimizeImage:d}),this._ok()}},{key:"multiSelectMode",get:function(){return this._multiSelectMode},set:function(d){_(d)?(this._multiSelectMode=d,this._notifyUi({multiSelectMode:d}),this._ok()):this._err(lt)}},{key:"checkbox",get:function(){return this._checkboxConfig},set:function(d){f(d)?(Object.assign(this._checkboxConfig,d),this._notifyUi({checkbox:d}),this._ok()):this._err(lt)}},{key:"pageNumber",get:function(){return this._pageNumberConfig},set:function(d){f(d)?(void 0!==d.visibility&&(this._showPNum="visible"===d.visibility),Object.assign(this._pageNumberConfig,d),this._notifyUi({pageNumber:d}),this._ok()):this._err(lt)}},{key:"size",get:function(){return this._size},set:function(d){I(d)?(this._size=d,this._notifyUi({size:d}),this._ok()):this._err(Fe)}},{key:"mouseShape",get:function(){return this._mouseShape},set:function(d){l(d)?(this._mouseShape=d,this._notifyUi({mouseShape:d}),this._ok()):this._err(lt)}},{key:"pubsub",get:function(){return this._tbPub.getPublishSubscribe()}},{key:"scrollDirection",get:function(){return this._direction},set:function(d){l(d)?(this._direction=d,this._notifyUi({scrollDirection:d}),this._ok()):this._err(lt)}},{key:"sequence",get:function(){return this._sequence},set:function(d){c(d)?(this._sequence=d,this._notifyUi({sequence:d}),this._ok()):this._err(lt)}},{key:"location",get:function(){return this._location},set:function(d){l(d)?(this._location=d,this._notifyUi({location:d}),this._ok()):this._err(lt)}},{key:"showThumbnail",get:function(){return this._showThb},set:function(d){_(d)?(this._showThb=d,this._notifyUi({showThumbnail:d}),this._ok()):this._err(lt)}},{key:"showPageNumber",get:function(){return this._showPNum},set:function(d){_(d)?(this._showPNum=d,this._pageNumberConfig||(this._pageNumberConfig={}),this._pageNumberConfig.visibility=d?"visible":"hidden",this._notifyUi({showPageNumber:d}),this._ok()):this._err(lt)}},{key:"showRemoveBtn",get:function(){return this._showRmBtn},set:function(d){_(d)?(this._showRmBtn=d,this._notifyUi({showRemoveBtn:d}),this._ok()):this._err(lt)}},{key:"fullThumbnail",get:function(){return this._fullThb},set:function(d){_(d)?(this._fullThb=d,this._notifyUi({fullThumbnail:d}),this._ok()):this._err(lt)}},{key:"rows",get:function(){return this._rows},set:function(d){c(d)?d<=0?this._err(Ut):(this._rows=d,this._notifyUi({rows:d}),this._ok()):this._err(lt)}},{key:"columns",get:function(){return this._columns},set:function(d){c(d)?d<=0?this._err(Ut):(this._columns=d,this._notifyUi({columns:d}),this._ok()):this._err(lt)}},{key:"background",get:function(){return this._bg},set:function(d){h(d)?(this._bg=d,this._notifyUi({background:d}),this._ok()):this._err(w)}},{key:"border",get:function(){return this._border},set:function(d){y(d)?(this._border=d,this._notifyUi({border:d}),this._ok()):this._err(Je)}},{key:"pageBackground",get:function(){return this._pageBg},set:function(d){h(d)?(this._pageBg=d,this._notifyUi({pageBackground:d}),this._ok()):this._err(w)}},{key:"pageBorder",get:function(){return this._pageBorder},set:function(d){y(d)?(this._pageBorder=d,this._notifyUi({pageBorder:d}),this._ok()):this._err(Je)}},{key:"selectedPageBackground",get:function(){return this._sltPBg},set:function(d){h(d)?(this._sltPBg=d,this._notifyUi({selectedPageBackground:d}),this._ok()):this._err(w)}},{key:"selectedPageBorder",get:function(){return this._sltPBorder},set:function(d){y(d)?(this._sltPBorder=d,this._notifyUi({selectedPageBorder:d}),this._ok()):this._err(Je)}},{key:"hoverPageBackground",get:function(){return this._hvPBg},set:function(d){h(d)?(this._hvPBg=d,this._notifyUi({hoverPageBackground:d}),this._ok()):this._err(w)}},{key:"hoverPageBorder",get:function(){return this._hvPBorder},set:function(d){y(d)?(this._hvPBorder=d,this._notifyUi({hoverPageBorder:d}),this._ok()):this._err(Je)}},{key:"placeholderBackground",get:function(){return this._placeholderBg},set:function(d){h(d)?(this._placeholderBg=d,this._notifyUi({placeholderBackground:d}),this._ok()):this._err(w)}},{key:"pageMargin",get:function(){return this._pageMargin},set:function(d){I(d)?(this._pageMargin=d,this._notifyUi({pageMargin:d}),this._ok()):this._err(Fe)}},{key:"allowPageDragging",get:function(){return this._dragging},set:function(d){_(d)?(this._dragging=d,this._notifyUi({allowPageDragging:d}),this._ok()):this._err(lt)}},{key:"allowResizing",get:function(){return this._resizing},set:function(d){_(d)?(this._resizing=d,this._notifyUi({allowResizing:d}),this._ok()):this._err(lt)}},{key:"allowKeyboardControl",get:function(){return this._keyboard},set:function(d){_(d)?(this._keyboard=d,this._notifyUi({allowKeyboardControl:d}),this._ok()):this._err(lt)}},{key:"autoChangeIndex",get:function(){return this._autoChangeIdx},set:function(d){_(d)?(this._autoChangeIdx=d,this._notifyUi({autoChangeIndex:d}),this._ok()):this._err(lt)}}]),mn),Ct=((z=fn.prototype).getRect=function(){if("free"===this.mode)return null;var d=(O=this._getMaxPoint()).minX,b=O.maxX,A=O.minY,O=O.maxY;return{x:Math.floor(d),y:Math.floor(A),width:Math.floor(b-d),height:Math.floor(O-A)}},z._initBox=function(){this.midpoints=this._calcMidpoint(this.vertexes),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=this._calcSlopeRatio(this.vertexes)},z._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},z.checkPointPosition=function(d){var b=(Y=this._getMaxPoint()).minX,A=Y.maxX,O=Y.minY,Y=Y.maxY,re=this.probePoints[2*d],he=this.probePoints[2*d+1];return d<4?re===A&&he===Y?"se":re===A&&he===O?"ne":re===b&&he===O?"nw":re===b&&he===Y?"sw":null:re===A?"e":he===Y?"s":re===b?"w":he===O?"n":null},z.onStartHandler=function(d,b,A){var O=this.isBoxSelected(d,b);null!==(O=void 0!==A?A:O)&&(this._startX=d,this._startY=b,this._lastX=d,this._lastY=b,-1===O?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=O,this.isMoveBox=!1),"free"===this.mode&&3<O&&(this.k1=this.slopeRatio[(1+(A=O-4))%4],this.b1=this.probePoints[(2*A+3)%8]-this.k1*this.probePoints[(2*A+2)%8],this.k2=this.slopeRatio[(3+A)%4],this.b2=this.probePoints[(2*A+1)%8]-this.k2*this.probePoints[(2*A+0)%8]))},z.onMoveHandler=function(d,b,A){if(this.isPointSelected||this.isMoveBox){var O=this.probePoints.slice();if(this.isPointSelected){var Y=this.activeProbePoint;void 0!==A&&(Y=A),"normal"===this.mode?O=this._movePointNormal(O,Y,d,b):(O=this._movePointFree(O,Y,d,b),this.slopeRatio=this._calcSlopeRatio(this.probePoints).slice(0,4)),this.probePoints=O.slice(),A=this._checkRectConvexity(this.probePoints),this.isConvex=!!A}else if(this.isMoveBox){if(A=b-this._lastY,0==(Y=d-this._lastX)&&0==A)return;O=this._moveBox(O,Y,A),this.probePoints=O.slice()}Y=this._calcMidpoint(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(Y),this.midpoints=Y,this._lastX=d,this._lastY=b}},z.onEndHandler=function(){this.isConvex=!0;var d,b=this._startX,A=this._startY,O=(this._startX=0,this._startY=0,this._lastX),Y=this._lastY;(this.isPointSelected||this.isMoveBox)&&(this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null,d=this._checkRectConvexity(this.probePoints),(b!==O||A!==Y)&&d||(this.probePoints=this.vertexes.slice().concat(this.midpoints)),this.vertexes=this.probePoints.slice(0,8),this.midpoints=this._calcMidpoint(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(this.midpoints),this.slopeRatio=this._calcSlopeRatio(this.probePoints).slice(0,4))},z._checkEdge=function(d,b){return 0<=d&&d<=this.width&&0<=b&&b<this.height},z._movePointNormal=function(d,b,A,O){A=Math.max(0,Math.min(this.width,A)),O=Math.max(0,Math.min(this.height,O));var Y=0,re=0;if(this.keepAspectRatio){var gt=(ye=this._getMaxPoint()).minX,he=ye.maxX,Oe=ye.minY,ye=ye.maxY,ct=this.checkPointPosition(b);if(0==(he=(he-gt)/(ye-Oe))||he===1/0||he===-1/0||isNaN(he)?he=this._lastWhr:this._lastWhr=he,re=Y=0,gt="width",b<4){if(re=O-d[2*b+1],0==(Y=A-d[2*b])||0===re)return d;gt="width"}else if(ye=b-4,"e"===ct?(b=(1+ye)%4,gt="width"):"s"===ct?(b=ye,gt="height"):"w"===ct?(b=ye,gt="width"):"n"===ct&&(b=(1+ye)%4,gt="height"),re=O-d[2*ye+1],0==(Y=A-d[2*ye])||0===re)return d;"height"===gt?(Y=re*he,"ne"!==ct&&"sw"!==ct&&"n"!==ct&&"w"!==ct||(Y=-Y)):(re=Y/he,"ne"!==ct&&"sw"!==ct&&"n"!==ct&&"w"!==ct||(re=-re)),ye=d[2*b+1]+re,(Oe=d[2*b]+Y)<0?(Y=0-d[2*b],re=0):Oe>this.width?(Y=this.width-d[2*b],re=0):ye<0?(re=0-d[2*b+1],Y=0):ye>this.height&&(re=this.height-d[2*b+1],Y=0),d[2*b]+=Y,d[2*b+1]+=re,gt=(b+1)%4,he=(b+3)%4,b%2?(d[2*gt]+=Y,d[2*he+1]+=re):(d[2*gt+1]+=re,d[2*he]+=Y)}else if(b<4){if(re=O-d[2*b+1],0==(Y=A-d[2*b])&&0===re)return d;d[2*b]=A,d[2*b+1]=O,ct=(b+1)%4,Oe=(b+3)%4,b%2?(d[2*ct]=A,d[2*Oe+1]=O):(d[2*ct+1]=O,d[2*Oe]=A)}else 0===(gt=this.slopeRatio[(ye=b-4)%4])?(d[(2*ye+3)%8]=O,d[(2*ye+1)%8]=O):gt!==1/0&&gt!==-1/0||(d[(2*ye+2)%8]=A,d[(2*ye+0)%8]=A);return d},z._movePointFree=function(d,b,A,O){A=Math.max(0,Math.min(this.width,A)),O=Math.max(0,Math.min(this.height,O));var Y=d.slice();if(b<4){var he=O-d[2*b+1];if(0==(re=A-d[2*b])&&0==he)return d;d[2*b]=A,d[2*b+1]=O}else{var re,Oe=-(b=O-(he=this.slopeRatio[(re=b-4)%4])*A)/he,ye=b,ct=d[(2*re+9)%8]-he*d[(2*re+8)%8],gt=-ct/he,wt=this.k1,Jt=this.b1,Xt=this.k2,an=this.b2;0===he?(d[(2*re+3)%8]=O,wt!==1/0&&wt!==-1/0&&(d[(2*re+2)%8]=(O-Jt)/wt),d[(2*re+1)%8]=O,Xt!==1/0&&Xt!==-1/0&&(d[(2*re+0)%8]=(O-an)/Xt)):he===1/0||he===-1/0?(d[(2*re+2)%8]=A,d[(2*re+3)%8]=wt*A+Jt,d[(2*re+0)%8]=A,d[(2*re+1)%8]=Xt*A+an):(0===wt?d[(2*re+2)%8]+=Oe-gt:wt===1/0||wt===-1/0?d[(2*re+3)%8]+=ye-ct:(d[(2*re+2)%8]=(Jt-b)/(he-wt),d[(2*re+3)%8]=(he*Jt-wt*b)/(he-wt)),0===Xt?d[(2*re+0)%8]+=Oe-gt:Xt===1/0||Xt===-1/0?d[(2*re+1)%8]+=ye-ct:(d[(2*re+0)%8]=(an-b)/(he-Xt),d[(2*re+1)%8]=(he*an-Xt*b)/(he-Xt)));for(var kn=0;kn<4;kn++){var hn=d[2*kn],vn=d[2*kn+1];if(hn<0||hn>this.width||vn<0||vn>this.height)return Y}}return d},z._moveBox=function(d,b,A){if("normal"===this.mode){var O=Math.min(d[0],d[2],d[4],d[6]),Y=Math.max(d[0],d[2],d[4],d[6]),re=Math.min(d[1],d[3],d[5],d[7]),he=Math.max(d[1],d[3],d[5],d[7]);Y+(b=O+b<0?-O:b)>this.width&&(b=this.width-Y),he+(A=re+A<0?-re:A)>this.height&&(A=this.height-he);for(var Oe=0;Oe<4;Oe++)d[2*Oe]+=b,d[2*Oe+1]+=A}return d},z._isPointOnBox=function(d,b){var A,O,Y,re;return"normal"===this.mode&&(A=(re=this._getMaxPoint()).minX,O=re.maxX,Y=re.minY,re=re.maxY,A<=d&&d<=O&&Y<=b&&b<=re)},z.isBoxSelected=function(d,b){var A=this._isPointOnBox(d,b);return null!==(d=this.isCtrlPointSelected(d,b))?d:A?-1:null},z.isCtrlPointSelected=function(d,b){for(var he=this.cropBoxStyle.ctrlWidth/this.zoom/2,Oe=this.cropBoxStyle.ctrlHeight/this.zoom/2,A=(re=this._getMaxPoint()).minX,O=re.maxX,Y=re.minY,re=re.maxY,ye=(he=Math.min(Math.max(he,.1*(O-A)),3*he),Oe=Math.min(Math.max(Oe,.1*(re-Y)),3*Oe),0);ye<8;ye++){var ct=this.probePoints[2*ye],gt=this.probePoints[2*ye+1];if(d<=ct+he&&ct-he<=d&&b<=gt+Oe&&gt-Oe<=b&&0<=d&&d<=this.width&&0<=b&&b<=this.height)return ye}return null},z._checkRectConvexity=function(d){var b=(d[6]-d[0])*(d[3]-d[1])-(d[7]-d[1])*(d[2]-d[0]),A=(d[0]-d[2])*(d[5]-d[3])-(d[1]-d[3])*(d[4]-d[2]),O=(d[2]-d[4])*(d[7]-d[5])-(d[3]-d[5])*(d[6]-d[4]),Y=(d[4]-d[6])*(d[1]-d[7])-(d[5]-d[7])*(d[0]-d[6]);if(b*A*O*Y<0)return!1;var re=d.slice().concat(d.slice(0,2));if(this.slopeRatio.length)for(var he=0;he<2;he++)if(this.slopeRatio[he]!==this.slopeRatio[he+2]&&this._calcIntersection(re.slice(2*he,2*he+2),re.slice(2*he+2,2*he+4),re.slice(2*he+4,2*he+6),re.slice(2*he+6,2*he+8)))return!1;return 0<b*A*O*Y},z._calcMidpoint=function(d){for(var b=d.slice(0,8).concat(d[0],d[1]),A=[],O=0;O<4;O++)A.push((b[2*O]+b[2*O+2])/2,(b[2*O+1]+b[2*O+3])/2);return A},z._calcSlopeRatio=function(d){for(var A=[],O=d.slice(0,8).concat(d[0],d[1]),Y=0;Y<4;Y++)A.push(O[2*Y+3]-O[2*Y+1]==0&&O[2*Y+2]-O[2*Y]==0?0:(O[2*Y+3]-O[2*Y+1])/(O[2*Y+2]-O[2*Y]));return A},z._calcIntersection=function(d,b,A,O){if(this._isRectCross(d,b,A,O)&&this._isLineSegmentCross(d,b,A,O)){var Y=(O[0]-A[0])*(d[1]-b[1])-(b[0]-d[0])*(A[1]-O[1]),re=(d[1]-A[1])*(b[0]-d[0])*(O[0]-A[0])+A[0]*(O[1]-A[1])*(b[0]-d[0])-d[0]*(b[1]-d[1])*(O[0]-A[0]);if(0==Y||0===re){var he=this._getLine(d,b),Oe=this._getLine(A,O),ye=he[0],ct=he[1],gt=Oe[0],wt=Oe[1];if(ct[0]===gt[0]&&ct[1]===gt[1])return ct;if(ye[0]===wt[0]&&ye[1]===wt[1])return ye;if(this._isOnLine(ct,Oe)&&this._isOnLine(gt,he))return[gt,ct];if(this._isOnLine(ye,Oe)&&this._isOnLine(wt,he))return[ye,wt];if(this._isOnLine(ye,Oe)&&this._isOnLine(ct,Oe))return[ye,ct];if(this._isOnLine(gt,Oe)&&this._isOnLine(wt,Oe))return[gt,wt]}return[he=re/Y,(re=b[1]*(d[0]-b[0])*(O[1]-A[1])+(O[0]-b[0])*(O[1]-A[1])*(d[1]-b[1])-O[1]*(A[0]-O[0])*(b[1]-d[1]))/(Y=(d[0]-b[0])*(O[1]-A[1])-(b[1]-d[1])*(A[0]-O[0]))]}return!1},z._getLine=function(d,b){return d[0]===b[0]?d[1]<b[1]?[d,b]:[b,d]:d[0]<b[0]?[d,b]:[b,d]},z._isOnLine=function(d,b){return b[0][0]===b[1][0]?d[1]>=b[0][1]&&d[1]<=b[1][1]:d[0]>=b[0][0]&&d[0]<=b[1][0]},z._isRectCross=function(d,b,A,O){var Y=Math.min,re=Math.max;return Y(d[0],b[0])<=re(A[0],O[0])&&Y(A[0],O[0])<=re(d[0],b[0])&&Y(d[1],b[1])<=re(A[1],O[1])&&Y(A[1],O[1])<=re(d[1],b[1])},z._isLineSegmentCross=function(d,b,A,O){var Y=d[0]*(A[1]-b[1])+b[0]*(d[1]-A[1])+A[0]*(b[1]-d[1]),re=d[0]*(O[1]-b[1])+b[0]*(d[1]-O[1])+O[0]*(b[1]-d[1]);return!(0<=(Y^re)&&0!==Y&&0!==re||0<=((Y=A[0]*(d[1]-O[1])+O[0]*(A[1]-d[1])+d[0]*(O[1]-A[1]))^(re=A[0]*(b[1]-O[1])+O[0]*(A[1]-b[1])+b[0]*(O[1]-A[1])))&&0!==Y&&0!==re)},fn),at=((z=on.prototype).setCropBoxStyle=function(d){Object.assign(this.cropBoxStyle,d),this.cropBoxes.forEach(function(b){Object.assign(b.cropBoxStyle,d)})},z.updateDpr=function(d){this.cropBoxes.forEach(function(b){b.dpr=d})},z.setKeepAspectRatio=function(d){this.keepAspectRatio=d,this._drawingFlag||this.cropBoxes.forEach(function(b){b.keepAspectRatio=d})},z.setAspectRatio=function(d){this.aspectRatio=d},z.setZoom=function(d){this.zoom=d,this.cropBoxes.forEach(function(b){b.zoom=d})},z.setPageSize=function(d,b){this.width=d,this.height=b},z.getRectArr=function(){var d=[];return this.cropBoxes.forEach(function(b,A){A=Object.assign({index:A},b.getRect()),d.push(A)}),d},z.clear=function(){var d;0<this.cropBoxes.length&&null!=(d=this.unselectedCallback)&&d.call(this),this.cropBoxes=[]},z.addFreeBox=function(A){var b=G();return A=new Ct({cropBoxStyle:this.cropBoxStyle,vertexes:A.slice(),width:this.width,height:this.height,mode:"free",dpr:b}),this.cropBoxes.push(A),A},z.addBox=function(O,b){var A=G();return O=new Ct({cropBoxStyle:this.cropBoxStyle,vertexes:O.slice(),width:this.width,height:this.height,type:b,mode:"normal",aspectRatio:this.aspectRatio,keepAspectRatio:this.keepAspectRatio,zoom:this.zoom,dpr:A}),this.cropBoxes.push(O),O},z.removeBox=function(d){return void 0===d&&this.clear(),!(d<0||d>=this.cropBoxes.length||(this.cropBoxes.splice(d,1),0))},z.getBoxByUid=function(d){for(var b=this.cropBoxes.length,A=0;A<b;A++)if(this.cropBoxes[A].uid===d)return this.cropBoxes[A];return null},z.onStartHandler=function(d,b,A){this._startX=d,this._startY=b,this.mouseDown=!0;var O=this.checkSelect(d,b);if(null===O)return A||this.clear(),void(this._activeBoxId=null);this._activeBoxId=this.cropBoxes[O].uid,this.getBoxByUid(this._activeBoxId).onStartHandler(d,b)},z.onMoveHandler=function(d,b,A){if(this.mouseDown){var O=null,Y=d-this._startX,re=b-this._startY,he=null,Oe=2/this.zoom,ye=(!this._activeBoxId&&d-this._startX<-Oe&&b-this._startY<-Oe?(he=0)<this.aspectRatio&&(re=Y/this.aspectRatio):!this._activeBoxId&&d-this._startX>Oe&&b-this._startY<-Oe?(he=1,0<this.aspectRatio&&(re=-Y/this.aspectRatio)):!this._activeBoxId&&d-this._startX>Oe&&b-this._startY>Oe?(he=2,0<this.aspectRatio&&(re=Y/this.aspectRatio)):!this._activeBoxId&&d-this._startX<-Oe&&b-this._startY>Oe&&(he=3,0<this.aspectRatio&&(re=-Y/this.aspectRatio)),[d,this._startY+re,this._startX,this._startY+re,this._startX,this._startY,d,this._startY]),ct=[this._startX,this._startY,this._startX,this._startY+re,d,this._startY+re,d,this._startY];if(null!==he){for(var gt=[],wt=0;wt<4;wt++)he%2?(gt.push(ct[2*(he+wt)%8]),gt.push(ct[(2*(he+wt)+1)%8])):(gt.push(ye[2*(he+wt)%8]),gt.push(ye[(2*(he+wt)+1)%8]));return(O=this.addBox(gt,["topLeft","topRight","bottomRight","bottomLeft"][he])).keepAspectRatio=0<this.aspectRatio,this._drawingFlag=!0,this._addNewFlag=this.keepAspectRatio,this._activeBoxId=O.uid,O.onStartHandler(this._startX,this._startY,he),void O.onMoveHandler(d,b,he)}(O=this._activeBoxId?this.getBoxByUid(this._activeBoxId):O)&&O.onMoveHandler(d,b)}},z.onEndHandler=function(){var d;this.mouseDown&&(this.mouseDown=!1,this._drawingFlag=!1,this._activeBoxId&&(d=this.getBoxByUid(this._activeBoxId),null!==this._addNewFlag&&(d.keepAspectRatio=this._addNewFlag,this._addNewFlag=null),d.onEndHandler(),0<this.cropBoxes.length&&null!=(d=this.selectedCallback)&&d.call(this,this.getRectArr()),this._activeBoxId=null))},z.checkSelect=function(d,b){var A=this.cropBoxes.length;if(0===A)return null;for(var O=A-1;0<=O;O--)if(null!==this.cropBoxes[O].isBoxSelected(d,b))return O;return null},z.checkSelectForCursor=function(d,b){var A=this.cropBoxes.length;if(0===A)return null;for(var O=A-1;0<=O;O--){var Y,re=this.cropBoxes[O],he=re.isBoxSelected(d,b);if(null!==he)return Y="move",-1!==he&&(Y=re.checkPointPosition(he)),{part:he,type:re.type,position:Y}}return null},z.dispose=function(){this.unselectedCallback=null,this.selectedCallback=null},on),Dt=((z=nn.prototype).setBorder=function(d,b,A){this.style.borderWidth=d,b&&(this.style.borderType=b),A&&(this.style.borderColor=A)},z.setSize=function(d,b){this.style.width=d||1,this.style.height=b||1},z.setPosition=function(d,b){this.style.left=d,this.style.top=b},z.clearSelectionBoxes=function(){this.selectionBoxes=[]},z.pushSelectionBox=function(d){this.selectionBoxes.push(d)},z.setNaturalSize=function(d,b){var A=this._db.getMid(this.uid);A&&(A.tempWidth=d,A.tempHeight=b),this.naturalWidth=d,this.naturalHeight=b,this.cropMng.setPageSize(d,b)},z.boxCount=function(){return this.cropMng.cropBoxes.length},nn);(z=Mi.prototype).append=function(d){return-1===this._idxOf(d)&&(this.chs.push(d),!0)},z.insert=function(d,b){return!(b<0||b>=this.chs.length||(this.chs.splice(b,0,d),0))},z.remove=function(d){return-1!==(d=this._idxOf(d))&&(this.chs.splice(d,1),!0)},z.clear=function(){return this.chs=[],!0},z.move=function(d,b){return d===b||(d=this.chs.splice(d,1)[0],this.chs.splice(b,0,d)),!0},z.switch=function(d,b){if(d===b)return!0;var A=this.chs[d];return this.chs[d]=this.chs[b],this.chs[b]=A,!0},z.reorder=function(d){var b=d.length,A=[],O=0;if(this.chs.length!==b||0===b)return!1;for(var Y=0;Y<b;Y++)d[Y]===Y&&O++;if(O===b)return!0;for(var re=0;re<b;re++)A[re]=this.chs[d[re]];for(var he=0;he<b;he++)this.chs[he]=A[he];return!0},z._idxOf=function(d){for(var b=l(d),A=0,O=this.chs.length;A<O;A++)if(b&&this.chs[A]===d||!b&&this.chs[A].uid===d.uid)return A;return-1},u(Jr,Mt=_t=Mi),(z=Jr.prototype).getCurUid=function(){return-1===this.cur?null:this.chs[this.cur].uid},z.getCurPage=function(){return-1===this.cur?null:this.chs[this.cur]},z.idxPage=function(d){return this.chs[d]},z.uidPage=function(d){if(!d)return null;for(var b=0;b<this.total;b++)if(this.chs[b].uid===d)return this.chs[b];return null},z.uid2Idx=function(d){for(var b=0;b<this.total;b++)if(this.chs[b].uid===d)return b;return-1},z.setCur=function(d){return!(d<0||d>=this.total||(this.cur=d,0))},z.append=function(d){return this.chs.push(d),!0},z.remove=function(d){var b=this.chs.length;return 0!==b&&(1===b?this.chs[0].uid===d&&(this.cur=-1,this.total=0,this.slt=[],this.chs=[],!0):-1!==(b=this.uid2Idx(d))&&((b===this.cur&&b===this.total-1||b<this.cur)&&this.cur--,this.chs.splice(b,1),this.slt=this.chs[this.cur]?[this.chs[this.cur].uid]:[],this.total--,!0))},z.clear=function(){return this.chs=[],this.slt=[],this.cur=-1,!(this.total=0)},z.getSlt=function(){return this.slt.slice()},z.setSlt=function(d){var b=d.length;return 0===b?(this.slt=d,this.cur=-1,!0):-1!==(b=this.uid2Idx(d[b-1]))&&(this.slt=d,this.cur=b,!0)},z.move=function(d,b){return Mt.prototype.move.call(this,d,b),this.setSlt([this.chs[b].uid])},z.switch=function(d,b){return Mt.prototype.switch.call(this,d,b),this.cur===d?this.setSlt([this.chs[b].uid]):this.cur===b&&this.setSlt([this.chs[d].uid]),!0},z.next=function(){return 0===this.total?-1:(1<this.total-this.cur&&this.cur<this.total&&this.cur++,this.slt=[this.chs[this.cur].uid],this.cur)},z.prev=function(){return 0===this.total?-1:(0<this.cur&&this.cur--,this.cur<0?-1:(this.slt=[this.chs[this.cur].uid],this.cur))},z.first=function(){return 0===this.total?-1:(this.cur=0,this.slt=[this.chs[0].uid],0)},z.last=function(){return 0===this.total?-1:(this.cur!==this.total-1&&(this.cur=this.total-1),this.slt=[this.chs[this.cur].uid],this.cur)},z.goto=function(d){return 0===this.total?-1:(d!==this.cur&&(this.cur=d=d<this.total?0<=d?d:0:this.total-1),this.slt=[this.chs[this.cur].uid],this.cur)};var kt,Rt,qe,Mt,Ht,Vt,jt,ln,Un,On,br=Jr,En=((z=xr.prototype).addTab=function(d){var b=this.checkTab(d.uid),A=null;return-1!==b?A=this.tabs[b]:(b=Object.assign(this.dfConfig,d),A=new br(b),"single"===this.mode?this.tabs=[A]:this.tabs.push(A)),A},z.getTab=function(d){return-1===(d=this.checkTab(d))?null:this.tabs[d]},z.checkTab=function(d){for(var b=this.tabs.length,A=0;A<b;A++)if(this.tabs[A].uid===d)return A;return-1},z.getCurTab=function(){return this.getTab(this.curTab)},z.setCurTab=function(d){if(~this.checkTab(d))return this.curTab=d,!0},z._moveToTop=function(d,b){0<=b&&b<d.length&&(b=d.splice(b,1)[0],d.push(b))},z.closeTab=function(d){return-1!==(d=this.checkTab(d))&&(this._opStack.pop(),this.tabs.splice(d,1),this.curTab=0===this.tabs.length?null:this._opStack[this._opStack.length-1],!0)},z.setMode=function(d){return("single"===d||"multiple"===d)&&(this.mode=d,!0)},z.removePage=function(d,b){return-1!=(d=this.checkTab(d))&&this.tabs[d].remove(b)},z.dispose=function(){},xr),vr=(u(Ei,qe=H),(z=Ei.prototype).setUseHermite=function(d){this.useHermite=d,this._gpc.useHermite=d},z.drawSltBox=function(){var d;"single"===this._gpc.disMode&&(d=this._tabMng.getCurTab())&&(d=d.getCurPage())&&this._gpc.drawSltBox(d)},z.render=function(d,b){d=d||!1,b=b||!1;var A=this._tabMng.getCurTab();return!!A&&(this._gpc._layoutSingle(A,d,b),(d=A.getCurPage())?(this._checkDisplay(A),this._showPage(d.uid,A.uid),this._ok(),!0):(this._gpc.clearCanvas(),this._err(Le),!1))},z.tabHandler=function(d,b,A){var O,Y=this,re=(void 0===b&&(b=null),[]),he=this.getTab(d.uid);if((b=this.getCurTab())&&!he&&"single"===this.tabMode&&A&&this._emitM(Bt,b.uid,this.uid),!b||!he&&A)O=he=this._tabMng.addTab({uid:d.uid,name:d.name,type:d.type,chs:[]});else{if(!he)return void this._emitM(Bt,d.uid,this.uid);b.uid!==he.uid&&!A||(O=he)}d.chs.forEach(function(ct){he.uidPage(ct)||re.push(ct)});var Oe=re.map(function(ct){var gt=Y._db.getMetadata(ct);return new Dt({uid:ct,naturalW:gt.width,naturalH:gt.height},Y._db,Y.cropBoxStyle)}),ye=[];return d.chs.forEach(function(ct){var gt=re.indexOf(ct);-1<gt?ye.push(Oe[gt]):(gt=he.uidPage(ct))&&ye.push(gt)}),he.chs=ye,he.total=d.chs.length,this.showLatest?(this.clearBox(),b=d.chs.indexOf(re[re.length-1]),(A=he.idxPage(b))&&(he.cur=b,he.setSlt([A.uid]))):0<he.total&&-1===he.cur&&(he.cur=0),O},z.showTab=function(d,b){var A=this,O=(void 0===b&&(b="add"),null!==this.showTabTimer&&clearTimeout(this.showTabTimer),d.uid);this._tabMng.setCurTab(O),qe.prototype._emit.call(this,ze,{tabId:this._tabMng.curTab,tabs:this._tabMng.tabs}),this._showAllThb(d),(!d.total||d.cur<0)&&this._gpc.clearCanvas(),this._gpc.initGraphic(d),this._gpc._layoutSingle(d,!0),"remove"==b&&!d.total||(this.showTabTimer=setTimeout(function(){A.isDisposed||(A._checkDisplay(d),d.chs.length||A._gpc.offScreenCanvas.reset(),d.chs.forEach(function(Y){A._showPage(Y.uid,O)}))},20),this.getSlidePages()),this.__slt([d.cur]),this.__buffer(d,b),this.__pager()},z.onTabChanged=function(){qe.prototype._emit.call(this,ze,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},z.updateSync=function(d,b,A){var O=this,Y=null;if(!(Y=b?this.getTab(b):this.getCurTab()))return this._err(xt),!1;for(var re=Y.chs,he=new Dt({uid:d,naturalW:A.metadata.width||0,naturalH:A.metadata.height||0},this._db,this.cropBoxStyle),Oe=null,ye=0;ye<re.length;ye++)if(re[ye].uid===d){Oe=re[ye],re[ye]=he;break}if(this._tabMng.curTab===Y.uid){if(Y.getCurUid()===d&&this._gpc.offScreenCanvas.reset(),!Oe)return!1;b=!0,Oe&&Oe.naturalHeight===he.naturalHeight&&Oe.naturalWidth===he.naturalWidth&&(b=!1),this._gpc._layoutSingle(Y,b),this._gpc.initGraphic(Y),this._checkDisplay(Y),re.forEach(function(ct){O._showPage(ct.uid,Y.uid,!0)}),this.getSlidePages(),this.__buffer(Y,"modify",d)}},z.setTabMode=function(d){-1!==["single","multiple"].indexOf(d)&&(this.tabMode=d)},z.getSlidePages=function(){var d,b,A,O=this,Y=this._tabMng.getCurTab();Y&&"continuous"!==Y.disMode&&(null!==this.slideTimer&&clearTimeout(this.slideTimer),d=Y.cur,b=[],A=[-1,-1,-1],0!==(Y=Y.total)&&(0<=d-1?(b.push(d-1),A[0]=d-1):A[0]=-1,b.push(d),(A[1]=d)+1<Y?(b.push(d+1),A[2]=d+1):A[2]=-1),this._gpc&&this._gpc.slide&&(this._gpc.slide.targetIndexes=A),this.slideTimer=setTimeout(function(){O.isDisposed||b.forEach(function(re){re=O.idxUid(re),O._emitM(Ot,re)})},200))},z._setSlidePages=function(d){var b,A,O,Y=this,re=this.getCurTab();!this.isDisposed&&re&&"single"===re.disMode&&(b=re.cur,A=[-1,-1,-1],0!==(O=re.total)&&(0<=b-1&&(A[0]=b-1),(A[1]=b)+1<O&&(A[2]=b+1)),A.indexOf(d)<0||(O=A.map(function(he){return Y._calcSlidePage(he,b,re)}),this._gpc.setSlidePages(O)))},z._calcSlidePage=function(d,b,re){var he={width:0,height:0,index:-1,uid:null,url:""};if(-1===d)return he;var O=this.idxUid(d),Y=this._db.getMid(O);if(re=re.idxPage(d),!Y||!re)return he;he=re.style.width;var Oe=re.style.height;return d!==b&&(b=this._gpc.calcZoomForSlide(re.naturalWidth||1,re.naturalHeight||1),he=(re.naturalWidth||0)*b,Oe=(re.naturalHeight||0)*b),{width:he,height:Oe,index:d,uid:O,url:Y.minData||""}},z._showAllThb=function(d,Y){var A=this,O=d.chs||[],re=(Y=d.uidPage(Y),[]);(O=Y?[Y]:O).forEach(function(he){var Oe;he&&(Oe=A._db.getMid(he.uid))&&(he={uid:he.uid,data:Oe.minData,tags:Oe.getTags()},re.push(he))}),qe.prototype._emit.call(this,"_thumbnailChangedUI",re)},z.showThbItem=function(d){var b,A,O=this.getCurTab();O&&(b=O.uidPage(d),A=this._db.getMid(d),b&&A&&(b={uid:d,data:A.minData,tags:A.getTags()},qe.prototype._emit.call(this,Ze,b),A=O.uid2Idx(d),this._setSlidePages(A)))},z.needRender=function(d){return!!this._db&&!(!(d=this._db.getMid(d))||d.show.indexOf(this.uid)<0)},z.renderMainPage=function(d){this.needRender(d)&&this._db.getMid(d).img&&this._gpc.render(d)},z._showPage=function(d,b,A){var O,Y=this;b===this._tabMng.curTab&&this.needRender(d)&&(O=this._db.getMid(d),!A&&O.img?null!=this&&this._gpc.render(d):!A&&O.active||(O.active=!0,this._db.getDataAsync(d).then(function(re){var he;Y.needRender(d)?(re=U.createURLWithType(re.oriData),O.oriData=re.data,O.oriType=re.type,he=new Image,Y.cors&&(he.crossOrigin="anonymous"),he.onload=function(){if(he.onload=null,he.onerror=null,Y.isDisposed||!Y.needRender(d))O.active=!1;else{if(A){if(!Y._gpc)return;Y._gpc.offScreenCanvas.reset()}O.img=he,Y._emitM("dvsRenderMainPage",O.show.slice(),d)}},he.onerror=function(){he.onload=null,he.onerror=null},he.src=O.oriData):O.active=!1}).catch(function(re){O.active=!1})))},z._checkDisplay=function(d){var b,A=this;"single"===d.disMode&&(b=d.chs,d.getCurPage()&&b.forEach(function(O,Y){var re,he,Oe=A._db.getMid(O.uid);Oe&&(O=A._gpc.checkDisplay(O.uid,d),he=(re=Oe.show).indexOf(A.uid),O?he<0&&re.push(A.uid):(-1<he&&re.splice(he,1),0===re.length&&(l(Oe.oriData)&&""!=Oe.oriData&&U.revokeObjectURL(Oe.oriData),Oe.active=!1,Oe.load=!1,Oe.img=null,Oe.oriData=null)))}))},z.getTabManager=function(){return this._tabMng},z.closeTab=function(d){var b;return!!this._tabMng.closeTab(d)&&(this._tabMng.curTab?this.showTab(this._tabMng.getCurTab(),"add"):(b=new br({uid:"",name:"empty",type:"",chs:[]}),this.showTab(b,"remove")),qe.prototype._emit.call(this,"_onCloseTab",d),!0)},z.closeCurTab=function(){},z.emptyTab=function(d){},z.getCurrentTabId=function(){return this._tabMng.curTab},z.getTab=function(d){return this._tabMng.getTab(d)},z.getCurTab=function(){return this._tabMng?this._tabMng.getCurTab():null},z.setCurTab=function(d){return!!this._tabMng&&this._tabMng.setCurTab(d)},z.getCurPageUids=function(){var d=this.getCurTab();return d?d.chs.map(function(b){return b.uid}):[]},z.getCurPageCount=function(){var d=this.getCurTab();return d?d.total:0},z.createThumbnailView=function(d){return d=new Be(d=void 0===d?{}:d,this._mPub.getPublishSubscribe()),this.thbViews.push(d),d},z.removeThumbnailView=function(d){if(!d)return this.thbViews=[],!0;for(var b=0;b<this.thbViews.length;b++)if(this.thbViews[b].uid===d)return this.thbViews.splice(b,1),!0;return!1},z.getThumbnailViewById=function(d){if(!this._chStr(d))return null;for(var b=0;b<this.thbViews.length;b++)if(this.thbViews[b].uid===d)return this._ok(),this.thbViews[b];return null},z.remove=function(d,b,A){if(void 0===b&&(b=!0),!s(d))return this._err(lt),!1;var O=this._tabMng.tabs,Y=(d.forEach(function(re){O.forEach(function(he){he.remove(re)})}),this.getCurTab());return Y?(b&&this._emitM(Kt,this.uid,Y,d),A&&A!==Y.uid||(this.showTab(Y,"remove"),0===Y.chs.length&&(this._gpc.slide.targetIndexes=[-1,-1,-1],this._setSlidePages(-1),this._gpc.clearCanvas(),qe.prototype._emit.call(this,Ne,{width:1,height:1,x:1,y:1}))),this._ok(),!0):void 0},z.rmAll=function(d){void 0===d&&(d=!0);var b=[],A=this.getCurTab();return A?(A.chs.forEach(function(O){b.push(O.uid)}),this.remove(b,d,A.uid)):(this._ok(),!0)},z.setBox=function(d,b){var A=this.getCurTab();if(!A)return!1;var O=A.getCurPage();if(void 0===O)return!1;for(var Y=null,re=(s(d)?Y=d:f(d)&&(Y=[d]),b||0<O.boxCount()&&(O.cropMng.clear(),this.drawSltBox(),qe.prototype._emit.call(this,Ce,A.cur)),Y.length),he=0;he<re;he++){var Oe=Y[he];if(!this._chBox(Oe,O.naturalWidth,O.naturalHeight))return!1;O.cropMng.addBox([Oe.left,Oe.top,Oe.left+Oe.width,Oe.top,Oe.left+Oe.width,Oe.top+Oe.height,Oe.left,Oe.top+Oe.height],"bottomRight")}return this.drawSltBox(),0<(d=O.cropMng.getRectArr()).length&&qe.prototype._emit.call(this,mt,A.cur,d),this._ok(),!0},z._chBox=function(d,b,A){return c(d.left)&&c(d.top)&&c(d.width)&&c(d.height)?!(d.left<0||d.top<0||d.width<0||d.height<0)&&!(d.left>b||d.top>A||d.left+d.width>b||d.top+d.height>A)||(this._err(Ut),!1):(this._err(g),!1)},z.clearBox=function(d){var b=this.getCurTab();if(!b)return this._err(xt),!1;var A=b.getCurPage();return A?(0<A.boxCount()&&qe.prototype._emit.call(this,Ce,b.cur),A.cropMng.removeBox(d),this.drawSltBox(),this._ok(),!0):(this._err(Le),!1)},z._clearBox=function(){var d=this.getCurTab();if(!d)return!1;var b=d.getCurPage();return b?(0<b.boxCount()&&qe.prototype._emit.call(this,Ce,d.cur),b.cropMng.removeBox(),qe.prototype._emit.call(this,"_clearSltBox",d.cur),!0):(this._err(Le),!1)},z.setFreeBox=function(d){var b=this.getCurTab();if(!b)return!1;var A=b.getCurPage();return void 0!==A&&(A.cropMng.addFreeBox(d),this.drawSltBox(),0<(d=A.cropMng.getRectArr()).length&&qe.prototype._emit.call(this,mt,b.cur,d),this._ok(),!0)},z.nextPage=function(d){void 0===d&&(d=!0);var b=this.getCurTab();if(!b)return this._err(xt),-1;var A=b.cur,O=b.slt.length,Y=b.next();return-1===Y?(this._err(xt),-1):((A!==b.total-1||1<O)&&((O=b.idxPage(A))&&0<O.boxCount()&&(O.cropMng.clear(),this.drawSltBox(),qe.prototype._emit.call(this,Ce,b.cur)),this.__pager(),this.render(!0),this.getSlidePages(),d&&this._emitM(Ft,this.uid,it),this.__buffer(b,"shift")),this.__slt(),this._ok(),Y)},z.prevPage=function(d){void 0===d&&(d=!0);var b=this.getCurTab();if(!b)return this._err(xt),-1;var A=b.cur,O=b.slt.length,Y=b.prev();return-1===Y?(this._err(xt),-1):((0!==A||1<O)&&((O=b.idxPage(A))&&0<O.boxCount()&&(O.cropMng.clear(),this.drawSltBox(),qe.prototype._emit.call(this,Ce,b.cur)),this.__pager(),this.render(!0),this.getSlidePages(),d&&this._emitM(Ft,this.uid,be),this.__buffer(b,"shift")),this.__slt(),this._ok(),Y)},z.firstPage=function(d){void 0===d&&(d=!0);var b=this.getCurTab();if(!b)return this._err(xt),-1;var A=b.cur,O=b.slt.length,Y=b.first();return-1===Y?(this._err(xt),-1):((0!==A||1<O)&&((O=b.idxPage(A))&&0<O.boxCount()&&(O.cropMng.clear(),this.drawSltBox(),qe.prototype._emit.call(this,Ce,b.cur)),this.__pager(),this.render(!0),this.getSlidePages(),d&&this._emitM(Ft,this.uid,"first"),this.__buffer(b,"shift")),this.__slt(),this._ok(),Y)},z.lastPage=function(d){void 0===d&&(d=!0);var b=this.getCurTab();if(!b)return this._err(xt),-1;var A=b.cur,O=b.slt.length,Y=b.last();return-1===Y?(this._err(xt),-1):((A!==b.total-1||1<O)&&((O=b.idxPage(A))&&0<O.boxCount()&&(O.cropMng.clear(),this.drawSltBox(),qe.prototype._emit.call(this,Ce,b.cur)),this.__pager(),this.render(!0),this.getSlidePages(),d&&this._emitM(Ft,this.uid,"last"),this.__buffer(b,"shift")),this.__slt(),this._ok(),Y)},z.gotoPage=function(d,b){if(void 0===b&&(b=!0),!this._checkIndex(d))return-1;var A=this.getCurTab();if(!A)return this._err(xt),-1;var O=A.cur,Y=A.slt.length,re=A.goto(d);return-1===re?(this._err(xt),-1):((O!==d||1<Y)&&((Y=A.idxPage(O))&&0<Y.boxCount()&&(Y.cropMng.clear(),this.drawSltBox(),qe.prototype._emit.call(this,Ce,A.cur)),this.render(!0),this.getSlidePages(),b&&this._emitM(Ft,this.uid,"goto",d),this.__buffer(A,"shift")),this.__pager(),this.__slt(),this._ok(),re)},z.__slt=function(d){d=d||this.getSltIndexes(),qe.prototype._emit.call(this,"_imageSelectedUI",d),qe.prototype._emit.call(this,"imageSelected",d)},z.updateSltIndex=function(){this.__slt(),this.__pager(),this.render()},z.__pager=function(){var d=this.getCurTab(),b={cur:-1,total:0};d&&(b={cur:d.cur,total:d.total}),qe.prototype._emit.call(this,"_pagerChangedUI",b)},z.changeTag=function(d){qe.prototype._emit.call(this,pe,d)},z.changeDir=function(d){qe.prototype._emit.call(this,pe,d)},z.rmPageTag=function(d,b){return!!(b=this._tabMng.getTab(b))&&(b.remove(d),b.uid===this._tabMng.curTab?(this.showTab(b,"remove"),0===b.chs.length&&this._gpc.clearCanvas(),!0):void 0)},z.addPageTag=function(d,b){return!!(b=this._tabMng.getTab(b))&&!!(A=this._db.getMetadata(d))&&(d=new Dt({uid:d,naturalW:A.width,naturalH:A.height},this._db,this.cropBoxStyle),b.append(d),b.total=b.chs.length,this.showLatest&&(b.cur=b.total-1),void(b.uid===this._tabMng.curTab&&this.showTab(b,"add")));var A},z.emptyTag=function(d){if(!this._tabMng.getTab(d))return!1},z.renameTag=function(d,b,A){if(!(A=this._tabMng.getTab(A)))return!1;A.name=b,qe.prototype._emit.call(this,ze,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},z.renameFile=function(d,b,A){if(!(A=this._tabMng.getTab(A)))return!1;A.name=b,qe.prototype._emit.call(this,ze,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},z.switchPage=function(d,b,A,O){void 0===A&&(A=!0);var Y=null;return(Y=O?this.getTab(O):this.getCurTab())?!(!this._checkIndex(d)||!this._checkIndex(b)||(Y.switch(d,b),this._tabMng.curTab===Y.uid&&(this._showAllThb(Y),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(Y,"shift")),A&&this._emitM(It,this.uid,Y,"switch",d,b),this._ok(),0)):(this._err(xt),!1)},z.movePage=function(d,b,A,O){void 0===A&&(A=!0);var Y=null;return(Y=O?this.getTab(O):this.getCurTab())?!(!this._checkIndex(d)||!this._checkIndex(b)||(Y.move(d,b),this._tabMng.curTab===Y.uid&&(this._showAllThb(Y),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(Y,"shift")),A&&this._emitM(It,this.uid,Y,"move",d,b),this._ok(),0)):(this._err(xt),!1)},z.reorderPage=function(d,b,A,he){void 0===A&&(A=!0);var re,Y=null;if(!(Y=he?this.getTab(he):this.getCurTab()))return this._err(xt),!1;he=Y.getCurPage(),Y.reorder(d),this._tabMng.curTab===Y.uid&&(this._showAllThb(Y),this.setSltPages(b,!1),re=Y.getCurPage(),he&&re&&he.uid!==re.uid&&0<he.boxCount()&&(he.cropMng.clear(),this.drawSltBox(),qe.prototype._emit.call(this,Ce,Y.cur))),A&&this._emitM(It,this.uid,Y,"reorder",d,b)},z.uidIdx=function(d){var b=this.getCurTab();if(!b)return this._err(xt),null;if(!this._chStr(d))return null;for(var A=b.chs.length,O=0;O<A;O++)if(b.chs[O].uid===d)return this._ok(),O;return this._err(g),null},z.idxUid=function(d){if(!this._checkIndex(d))return null;var b=this.getCurTab();return b?(this._ok(),b.chs[d].uid):(this._err(xt),null)},z.getRealTimeMetadataByIndex=function(d){if(void 0!==d&&!this._checkIndex(d))return null;var b=this.getCurTab();if(!b)return this._err(xt),null;var A=b.getCurPage();return(A=void 0!==d?b.idxPage(d):A)?(d=this._db.getMetadata(A.uid))?(b=this._db.getMid(A.uid),(d=Object.assign({},d)).width=b.tempWidth,d.height=b.tempHeight,this._ok(),d):null:(this._err(xt),null)},z.getMetadata=function(d){return this._checkIndex(d)&&(d=this.idxUid(d))?(this._ok(),(d=this._db.getMetadata(d))?Object.assign({},d):null):null},z.setMetadata=function(d,b){return!!this._checkIndex(d)&&(f(b)?!!(d=this.idxUid(d))&&(this._ok(),this._db.updateMetadata(d,b)):(this._err(lt),!1))},z.getCurIndex=function(){var d=this._tabMng.getCurTab();return d?(this._ok(),d.cur):(this._err(xt),-1)},z.getNextPageIndex=function(){var d=this._tabMng.getCurTab();if(!d)return this._err(xt),-1;if(this._ok(),0===d.total)return-1;var b=d.cur+1;return b>=d.total?-1:b},z.getPrePageIndex=function(){var d=this._tabMng.getCurTab();return d?(this._ok(),0===d.total||(d=d.cur-1)<0?-1:d):(this._err(xt),-1)},z.setCurIndex=function(d,b){if(void 0===b&&(b=!0),!this._checkIndex(d))return!1;var A=this._tabMng.getCurTab();if(!A)return this._err(xt),!1;var O=A.getCurUid(),Y=this.idxUid(d);if(Y!==O){if((O=A.getCurPage())&&0<O.boxCount()&&(O.cropMng.clear(),this.drawSltBox(),qe.prototype._emit.call(this,Ce,A.cur)),A.setSlt([Y]),!A.setCur(d))return!1;this.__pager(),this.render(!0),this.getSlidePages(),b&&this._emitM(Ft,this.uid,"cur",d),this.__buffer(A,"shift")}return this.__slt(),this._ok(),!0},z.setSltPages=function(d,b){var A=this;if(void 0===b&&(b=!0),!s(d))return this._err(lt),!1;var O=d.length;0===O&&this._err(g);for(var Y=0;Y<O;Y++)if(!this._checkIndex(d[Y]))return!1;var he=this.getCurTab();if(!he)return this._err(xt),!1;var Oe=!1,ye=he.getCurUid(),ct=he.slt.slice(),gt=(ct.length!==O&&(Oe=!0),[]),wt=(d.forEach(function(Jt,Xt){Jt=A.idxUid(Jt),gt.push(Jt),ct[Xt]!==Jt&&(Oe=!0)}),!1);return ye&&ye!==gt[O-1]&&(Oe=!0,(ye=he.getCurPage())&&0<ye.boxCount()&&(ye.cropMng.clear(),this.drawSltBox(),qe.prototype._emit.call(this,Ce,he.cur)),wt=!0),he.setSlt(gt),this.__slt(d),this.__pager(),this.render(wt),this.getSlidePages(),b&&this._emitM(Ft,this.uid,"slt",d),!Oe&&ct.length===gt.length||this.__buffer(he,"shift"),this._ok(),!0},z.getCustomDataByIndex=function(d){return this._checkIndex(d)?(d=this.idxUid(d))?this.getCustomDataByUid(d):(this._err(xt),null):null},z.getCustomDataByUid=function(d){return(d=this._db.getMid(d))?(this._ok(),d.customData):(this._err(xt),null)},z.getSltIndexes=function(){var d=this;if(!(b=this.getCurTab()))return this._err(xt),null;var b=b.getSlt(),A=[];return b.forEach(function(O){O=d.uidIdx(O),A.push(O)}),this._ok(),A},z.selectAll=function(){var d=this.getCurTab();if(!d)return this._err(xt),!1;for(var b=[],A=d.chs.length,O=0;O<A;O++)b.push(O);return this.setSltPages(b)},z.zoomIn=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomIn()},z.zoomOut=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomOut()},z.zoomTo=function(d,b,A){return!c(d)||void 0!==b&&!c(b)||void 0!==A&&!c(A)?(this._err(lt),-1):("single"===this.tabMode&&(this._tabMng.dfConfig.zoom=d,this._tabMng.dfConfig.fitType="none"),this._ok(),this._gpc.zoomTo(d,!1,b,A))},z.flip=function(d){var b=this.getCurTab();if(!b)return this._err(xt),!1;if(!(b=b.getCurPage()))return this._err(xt),!1;this._clearBox();var A=this._db.getMid(b.uid);return A&&(this._releaseMin(A),d=A.edt.flip(d),this._emitM(tn,"flip",{uid:b.uid,flipObj:d,page:b,interlayerData:A})),this.getSlidePages(),!0},z.reset=function(){var d=this,b=this.getCurTab();return b&&b.getCurPage()?(this._clearBox(),b.chs.forEach(function(A){d._resetByPage(A,!0)}),this.getSlidePages(),this._ok(),!0):(this._err(xt),!1)},z._resetByPage=function(d,b){var A,O=this._db.getMid(d.uid);O&&0<O.edt.all.length&&(A=this._db.getMetadata(d.uid),b&&this._releaseMin(O),A&&d.setNaturalSize(A.width,A.height),O.edt.reset(),this._emitM(tn,"reset",{uid:d.uid}))},z.resetByIndex=function(d,b){var A=this.getCurTab();A?!c(d)||d<0||d>=A.chs.length?this._err(lt):this._resetByPage(d=A.chs[d],b):this._err(xt)},z.getRotateAngle=function(d){var b=this.getCurTab();return b?!c(d)||d<0||d>=b.chs.length?(this._err(lt),0):(b=this._db.getMid((d=b.chs[d]).uid))?(this._releaseMin(b),b.edt.getCurAngle()):0:(this._err(xt),0)},z.rotate=function(d,b){var A=this,O=this.getCurTab();if(!O)return this._err(xt),!1;if(!c(d))return this._err(lt),!1;if(void 0!==b){if(!c(b)&&!s(b))return this._err(lt),!1;if(s(b))for(var Y=b.length,re=0;re<Y;re++)if(!this._checkIndex(b[re]))return!1}var he,Oe,ye=[],ct=(O.getCurPage(),void 0===b?-1<(Oe=O.cur)&&(ye=[Oe]):ye=c(b)?[b]:b.slice(),this._clearBox(),this._gpc.rotateMode);return ye.forEach(function(gt){var wt;(gt=A._db.getMid((he=O.chs[gt]).uid))&&(A._releaseMin(gt),wt=gt.edt.rotate(d,0,0,ct),A._emitM(tn,"rotate",{uid:he.uid,rotateObj:wt,page:he,interlayerData:gt}))}),this.getSlidePages(),this._ok(),!0},z.crop=function(d,b,A,O){var Y=this.getCurTab();if(!Y)return this._err(xt),!1;if(!(Y=Y.getCurPage()))return this._err(xt),!1;if(!(c(d)&&c(b)&&c(A)&&c(O)))return this._err(lt),!1;var re=Y.naturalWidth,he=Y.naturalHeight;return d<0||re<d||b<0||he<b||A<0||O<0||re<d+A||he<b+O?(this._err(Ut),!1):(this._clearBox(),(re=this._db.getMid(Y.uid))&&(this._releaseMin(re),he=re.edt.crop(d,b,A,O),this._emitM(tn,"crop",{uid:Y.uid,cropObj:he,page:Y})),this.getSlidePages(),this._ok(),!0)},z.erase=function(d,b,A,O,Y){var re=this.getCurTab();if(!re)return this._err(xt),!1;if(!(re=re.getCurPage()))return this._err(xt),!1;if(!(c(d)&&c(b)&&c(A)&&c(O)))return this._err(lt),!1;var he=re.naturalWidth,Oe=re.naturalHeight;return d<0||he<d||b<0||Oe<b||A<0||O<0||he<d+A||Oe<b+O?(this._err(Ut),!1):(this._clearBox(),(he=this._db.getMid(re.uid))&&(this._releaseMin(he),Oe=he.edt.erase(d,b,A,O,Y),this._emitM(tn,"erase",{uid:re.uid,eraseObj:Oe,page:re})),this.getSlidePages(),this._ok(),!0)},z.overlay=function(d,b,A,O,Y,re,he){if(!this._checkIndex(d))return!1;if(!(Oe=this.getCurTab()))return this._err(xt),!1;if(!(d=Oe.idxPage(d)))return this._err(xt),!1;if(!(c(b)&&c(A)&&c(O)&&c(Y)))return this._err(lt),!1;var Oe=d.naturalWidth,ye=d.naturalHeight;return b<0||Oe<b||A<0||ye<A||O<0||Y<0||Oe<b+O||ye<A+Y?(this._err(Ut),!1):((Oe=this._db.getMid(d.uid)).overlays.push({type:"overlay",left:b,top:A,width:O,height:Y,color:re,opacity:he}),Oe&&(this._releaseMin(Oe),this._emitM(tn,"overlay",{uid:d.uid})),this.getSlidePages(),this._clearBox(),this._ok(),!0)},z.changePageSize=function(d,b){if(d<=0||b<=0)return this._err(g),!1;var A=this.getCurTab();if(!A)return this._err(xt),!1;if(!(A=A.getCurPage()))return this._err(xt),!1;if(!c(d)||!c(b))return this._err(lt),!1;this._clearBox();var O=this._db.getMid(A.uid);return O&&(this._releaseMin(O),d=O.edt.changePageSize(d,b),this._emitM(tn,"changePageSize",{uid:A.uid,changeSizeObj:d,page:A})),this.getSlidePages(),this._ok(),!0},z._releaseMin=function(d){l(d.minData)&&""!=d.minData&&U.revokeObjectURL(d.minData),d.minData=null,d.minType=null,d.activeMin=!1},z.setSaveType=function(d){return["image/png","image/jpeg"].indexOf(d)<0?(this._err(g),!1):(this.saveType=d,this._gpc.offScreenCanvas.saveType=d,this._ok(),!0)},z.getSaveType=function(){return this.saveType},z.setSaveQuality=function(d){return d<0||1<d?(this._err(Ut),!1):(this.saveQuality=d,this._ok(),!0)},z.getSaveQuality=function(){return this.saveQuality},z.setRotateMode=function(d){return c(d)||this._err(lt),-1===[0,1,2].indexOf(d)?(this._err(g),!1):(this._gpc.rotateMode=d,this._ok(),!0)},z.getRotateMode=function(){return this._gpc.rotateMode},z.setSaveBackgroundColor=function(d){return this._ok(),this._gpc.setSaveBackgroundColor(d)},z.getSaveBackgroundColor=function(){return this._gpc.saveBg},z.saveTransformation=function(){var d=this,b=this.getCurTab();if(!b)return Promise.reject(xt);for(var A=b.getCurUid(),O=b.chs,Y=[],re=function(ye){var ct=O[ye];(ye=d._db.getMid(ct.uid))&&0<ye.edt.all.length&&(ye=new Promise(function(gt,wt){var Jt=!0,Xt=(A===ct.uid&&(Jt=!1),d._db.getMid(ct.uid));Xt.img?d._saveToBlob(ct.uid,Xt.img,ct,Jt).then(function(an){gt(an)}):Xt.oriData?d._getImage(ct.uid,Xt.oriData,ct,Jt).then(function(an){gt(an)}):d._db.getDataAsync(ct.uid).then(function(an){an=U.createURL(an.oriData),d._getImage(ct.uid,an,ct,Jt).then(function(kn){gt(kn)})}).catch(function(an){})}),Y.push(ye))},he=0;he<O.length;he++)re(he);return Promise.all(Y)},z.__buffer=function(d,b,A){b={action:b,uids:(null==(b=d.data)||null==(b=b.chs)?void 0:b.slice())||[],currentUid:d.getCurUid(),selectedUids:d.getSlt(),pageUid:A},qe.prototype._emit.call(this,ae,d.getCurUid()),qe.prototype._emit.call(this,"bufferChanged",b)},z._getImage=function(d,b,A,O){var Y=this;return new Promise(function(re,he){var Oe=new Image;Y.cors&&(Oe.crossOrigin="anonymous"),Oe.src=b,Oe.onload=function(){Oe.onload=null,Oe.onerror=null,Y._saveToBlob(d,Oe,A,O).then(function(ye){re(ye)}),"object"===b.type&&U.revokeObjectURL(b),Oe.src=""}})},z._saveToBlob=function(d,gt,ct,O){var Y=this,wt=this._gpc.offScreenCanvas,re=this._db.getMid(d),he=(wt.render({viewerUid:"",pageUid:d,isMin:!1,img:gt,page:ct,midData:re}),this._db.getMetadata(d)),Oe=re.customData,ye=re.tags,Jt=(he.width=ct.naturalWidth,he.height=ct.naturalHeight,re.setTempSize(ct.naturalWidth,ct.naturalHeight),gt=null,ct=wt.mainCanvas,gt=wt.mainWidth,wt=wt.mainHeight,this.saveCanvas),Xt=Jt.getContext("2d");return Jt.width!==gt&&(Jt.width=gt),Jt.height!==wt&&(Jt.height=wt),Xt.drawImage(ct,0,0),new Promise(function(an,kn){Jt.toBlob(function(hn){re.edt.reset(),Y._emitM($e,d,{oriData:hn,minData:null,metadata:he,customData:Oe,tags:ye},!0),Y._db&&Y._db.getDataAsync(d).then(function(vn){an(hn)})},Y.saveType,Y.saveQuality)})},z.getMinPageData=function(){var d=this.getCurTab();return(d=d&&d.getCurPage())&&this._db.getMid(d.uid)?this._gpc.getMinPageData():(this._err(xt),null)},z.setCropBoxStyle=function(d){Object.assign(this.cropBoxStyle,d),this._tabMng.tabs.forEach(function(b){b.chs.forEach(function(A){A.cropMng.setCropBoxStyle(d)})}),this.drawSltBox()},z.setKeepZoom=function(d){this._gpc.keepZoom=d},z.getFitType=function(){return this._gpc.fitType},z.setFitType=function(d){if(!this._chStr(d))return!1;if(-1===["window","width","height"].indexOf(d))return this._err(g),!1;this._gpc.fitType=d;var b=this.getCurTab();return b&&(b.fitType=d),"single"===this.tabMode&&(this._tabMng.dfConfig.fitType=d),this.render(!0),this.getSlidePages(),this._ok(),!0},z.setZoom=function(d){"single"===this.tabMode&&(this._tabMng.dfConfig.zoom=d,this._tabMng.dfConfig.fitType="none");var b=this.getCurTab();return b&&(b.zoom=d),this._gpc.setZoom(d)},z.getZoom=function(){return this._gpc.getZoom()},z.setMinZoom=function(d){return this._gpc.minZoom=d,!0},z.getMinZoom=function(){return this._gpc.minZoom},z.setMaxZoom=function(d){return this._gpc.maxZoom=d,!0},z.getMaxZoom=function(){return this._gpc.maxZoom},z.setOperationMode=function(d){var b,A=this.getCurTab();A&&(A.opMode=d,(b=A.getCurPage())&&0<b.boxCount()&&(b.cropMng.clear(),this.drawSltBox(),qe.prototype._emit.call(this,Ce,A.cur))),this._gpc.opMode=d,"single"===this.tabMode&&(this._tabMng.dfConfig.opMode=d)},z.getOperationMode=function(){return this._gpc.opMode},z.setDisplayMode=function(d){var b,A=this.getCurTab();A&&(A.disMode=d,(b=A.getCurPage())&&0<b.boxCount()&&(b.cropMng.clear(),this.drawSltBox(),qe.prototype._emit.call(this,Ce,A.cur))),this._tabMng.dfConfig.disMode=d,this._gpc.disMode=d,this.render(!0),this.getSlidePages()},z.setAspectRatio=function(d){this._gpc.aspectRatio=d;var b=this.getCurTab();b&&b.chs.forEach(function(A){A.cropMng.setAspectRatio(d)})},z.getAspectRatio=function(){return this._gpc.aspectRatio},z.setKeepAspectRatio=function(d){this._gpc.keepAspectRatio=d;var b=this.getCurTab();b&&b.chs.forEach(function(A){A.cropMng.setKeepAspectRatio(d)})},z.getKeepAspectRatio=function(){return this._gpc.keepAspectRatio},z.setPageMargin=function(d){return this._gpc.iMargin=d,!0},z.getPageMargin=function(){return this._gpc.iMargin},z.setZoomDelta=function(){},z.getZoomDelta=function(){},z.setAllowSlide=function(d){this._gpc.setAllowSlide(d)},z.getAllowSlide=function(){return this._gpc.allowSlide},z._getOutEvent=function(d){var b=null,A=-1,O=-1,Y=-1,re=d?.clientX,he=d?.clientY,Oe=this.getCurTab();return(b=Oe?Oe.getCurPage():b)&&(A=this.uidIdx(b.uid)),this._gpc.checkMouseOverPage(d)&&(Oe=this._gpc.getMouseCoordinate(d),b=this._gpc.toPageCoordinate(Oe.x,Oe.y),O=Math.floor(b.x),Y=Math.floor(b.y)),{index:A,imageX:O,imageY:Y,pageX:re,pageY:he}},z._initEvent=function(){var d=this;qe.prototype._on.call(this,Ie,function(b,A){d._emitM(Ie,b,A)}),qe.prototype._on.call(this,we,this._onSetCanvasVisibility.bind(this)),qe.prototype._on.call(this,"_bindSlideComponent",function(b){var A;null!=(A=d._gpc.slide)&&A.bind(b)}),qe.prototype._on.call(this,"_unbindSlideComponent",function(){var b;null!=(b=d._gpc.slide)&&b.unbind()}),qe.prototype._on.call(this,"_bindCanvas",function(b){d._gpc.cvsMng.bind(b)}),qe.prototype._on.call(this,"_unbindCanvas",function(b){d._gpc.cvsMng.unbind(b)}),qe.prototype._on.call(this,"_setCanvasSize",function(Y){var A=Y.width,O=Y.height;d._gpc.updateDpr(),Y=d._gpc.setCanvasOffsetSize(A,O),(A=d.getCurTab())&&0!==A.total||qe.prototype._emit.call(d,Ne,{width:0,height:0,x:0,y:0}),"single"!==d._gpc.disMode||Y||(d.render(!1,!1),d.drawSltBox(),d.getSlidePages())}),qe.prototype._on.call(this,"_displayedImageChanged",function(b){b.forEach(function(A){var O=d._db.getMid(A);O&&(O.minData?(O={uid:A,data:O.minData,tags:O.getTags()},qe.prototype._emit.call(d,Ze,O)):d._emitM(Ot,A))})}),qe.prototype._on.call(this,"_canvasMousedown",function(b,A){var O=d.getCurTab();O&&O.getCurPage()&&d._gpc.onCanvasMousedown(b),A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"mousedown",A,b)}),qe.prototype._on.call(this,"_canvasMousemove",function(b,A){A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"mousemove",A,b)}),qe.prototype._on.call(this,"_canvasMouseup",function(b,A){A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"mouseup",A,b)}),qe.prototype._on.call(this,"_canvasMouseOver",function(b,A){A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"mouseover",A,b)}),qe.prototype._on.call(this,"_canvasMouseOut",function(b,A){A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"mouseout",A,b)}),qe.prototype._on.call(this,"_canvasTouchstart",function(b,A){var O=d.getCurTab();O&&O.getCurPage()&&d._gpc.onCanvasTouchstart(b),A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"mousedown",A,b)}),qe.prototype._on.call(this,"_canvasTouchmove",function(b,A){var O=d.getCurTab();O&&O.getCurPage()&&d._gpc.onCanvasTouchmove(b),A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"mousemove",A,b)}),qe.prototype._on.call(this,"_canvasTouchend",function(b,A){A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"mouseup",A,b)}),qe.prototype._on.call(this,"_canvasScroll",function(b,A){var O=d.getCurTab();O&&O.getCurPage()&&d._gpc.onCanvasScroll(b)}),qe.prototype._on.call(this,"_canvasWheel",function(b,A){var O=d.getCurTab();O&&O.getCurPage()&&(d._gpc.onCanvasWheel(b),qe.prototype._emit.call(d,"wheel",b))}),qe.prototype._on.call(this,"_canvasClick",function(b,A){A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"click",A,b)}),qe.prototype._on.call(this,"_canvasDoubleClick",function(b,A){A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"dblclick",A,b)}),qe.prototype._on.call(this,St,function(b,A){A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"rightclick",A,b)}),qe.prototype._on.call(this,St,function(b,A){A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"contextmenu",A,b)}),qe.prototype._on.call(this,"_canvasKeyDown",function(b){qe.prototype._emit.call(d,"keydown",b)}),qe.prototype._on.call(this,"_canvasKeyUp",function(b){qe.prototype._emit.call(d,"keyup",b)}),qe.prototype._on.call(this,"_canvasResize",function(b,A){qe.prototype._emit.call(d,"resize",b,A)}),qe.prototype._on.call(this,"_canvasDragStart",function(b,A){A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"dragstart",A,b)}),qe.prototype._on.call(this,"_canvasDragMove",function(b,A){A=A||d._getOutEvent(b),qe.prototype._emit.call(d,"dragmove",A,b)}),qe.prototype._on.call(this,"_canvasDragDone",function(b){qe.prototype._emit.call(d,"dragdone",b)}),qe.prototype._on.call(this,"_documentMove",function(b){var A=d.getCurTab();A&&A.getCurPage()&&d._gpc.onDocumentMousemove(b)}),qe.prototype._on.call(this,"_documentUp",function(b){var A=d.getCurTab();A&&A.getCurPage()&&d._gpc.onDocumentMouseup(b)}),qe.prototype._on.call(this,"_SetSelectedIndexes",function(b){d.setSltPages(b,!1),d._emitM(Ft,d.uid,"slt",b)}),qe.prototype._on.call(this,"_onReOrderThumbnail",function(b,A){d.getCurTab()&&d.reorderPage(b,A,!0)}),qe.prototype._on.call(this,"_canvasDefaultCursor",function(b){d._gpc.defaultCursor=b=void 0===b?"default":b}),qe.prototype._on.call(this,"_onRender",function(){d.render()}),qe.prototype._on.call(this,"_onRenderBoxes",function(){d.drawSltBox()}),qe.prototype._on.call(this,"_getSlidePages",function(){d.getSlidePages()})},z._onSetCanvasVisibility=function(d){},z.setScrBarW=function(d){this._gpc.scrBarW=d},z._onM=function(d,b){this._mPub._on(d,b)},z._emitM=function(d){for(var b,A=arguments.length,O=new Array(1<A?A-1:0),Y=1;Y<A;Y++)O[Y-1]=arguments[Y];this._mPub&&(b=this._mPub)._emit.apply(b,[d].concat(O))},z._offM=function(d,b){this._mPub._off(d,b)},z._err=function(d){this._emitM(Ve,d)},z._ok=function(){this._emitM(Ve,et)},z._chStr=function(d){return!!l(d)||(this._err(lt),!1)},z._checkIndex=function(d){return c(d)?!(d<0||d>=this.getCurPageCount())||(this._err(Ut),!1):(this._err(lt),!1)},z.dispose=function(){var d;this.isDisposed||(qe.prototype.dispose.call(this),null!=(d=this._mPub)&&d.dispose(),this._mPub=null,(this._db=null)!=(d=this._tabMng)&&d.dispose(),(this._tabMng=null)!=(d=this._gpc)&&d.dispose(),this._gpc=null,this.saveCanvas=null,this.isDisposed=!0)},Ei),ei=(u(Or,Rt=H),(z=Or.prototype)._bindEvents=function(){var d=this;this.on("_updateFocus",function(O){var A=O.viewerId;O=O.thumbnailId,d._focus.viewerId=A,d._focus.thumbnailId=O}),this.on("_documentKeyDownUI",function(b){var A=(O=d._focus).thumbnailId,O=O.viewerId;d.uid===O&&null!=(O=d.ui)&&O.documentKeyDown(b,A)}),this.on("_documentKeyUpUI",function(b){var A=(O=d._focus).thumbnailId,O=O.viewerId;d.uid===O&&null!=(O=d.ui)&&O.documentKeyUp(b,A)}),this.on("_gotoPage",function(b){d.gotoPage(b)})},z.initConfig=function(d){var b,A=[],O=ke({},d,d.uiConfig.canvasConfig,d.uiConfig);for(b in O)"uiConfig"===b||f(O[b])||this._checkInitProp(O,b)||A.push(b);return this._config=d,this._uiConfig=d.uiConfig,A},z._e=function(d){Rt.prototype._emit.call(this,Ve,d)},z._checkInitProp=function(d,b){var A=this[b],O=d[b];return this[b]=d[b],A===O||A!==this[b]},z.closeTab=function(d){if(!l(d))return this._e(lt),!1;this.vm.closeTab(d)},z.closeCurrentTab=function(){return this.vm.closeCurTab()},z.emptyTab=function(d){},z.getCurrentTabId=function(){return this.vm.getCurrentTabId()},z.getTab=function(d){return l(d)?this.vm.getTab(d):(this._e(lt),null)},z.setCurrentTab=function(d){return this.vm.setCurTab(d)},z.getCurrentTab=function(){return this.vm.getCurTab()},z.getCurrentPageUids=function(){return this.vm.getCurPageUids()},z.getCurrentIndex=function(){return this.vm.getCurIndex()},z.getNextPageIndex=function(){return this.vm.getNextPageIndex()},z.getPrePageIndex=function(){return this.vm.getPrePageIndex()},z.setCurrentIndex=function(d){return this.vm.setCurIndex(d)},z.setSelectedIndexes=function(d){return this.vm.setSltPages(d)},z.getSelectedIndexes=function(){return this.vm.getSltIndexes()},z.selectAll=function(){return this.vm.selectAll()},z.removeSync=function(d){if(!s(d=c(d)?[d]:d))return this._e(lt),!1;if(0===d.length)return this._e(g),!1;for(var b=[],A=0;A<d.length;A++){var O=this.getUidByIndex(d[A]);if(!O)return!1;b.push(O)}return this.vm.remove(b)},z.removeAllSync=function(){return this.vm.rmAll()},z.switchPage=function(d,b){return this.vm.switchPage(d,b,!0)},z.movePage=function(d,b){return this.vm.movePage(d,b,!0)},z.getViewerElement=function(){var d;return this._e(et),(null==(d=this.ui)?void 0:d.getViewerElement())||null},z.bindView=function(d,b,A){var O=this;return void 0===b&&(b={}),void 0===A&&(A=!0),this.ViewUi?d&&m(d=l(d)?document.getElementById(d):d)?(this.unbindView(),A?C(b,this._uiConfig):this._uiConfig=b,this.ui=new this.ViewUi(d,this._uiConfig,this.postfix,this._iPub.getPublishSubscribe(),this._db,this.workerBlobURL),null!=(A=this.ui)&&A.createInnerThumbnail(),null!=(b=this.ui)&&b.setDisplayMode(this.displayMode),null!=(d=this.ui)&&d.setOperationMode(this.operationMode),this.vm.thbViews.forEach(function(Y){var re;null!=(re=O.ui)&&re.createThumbnail(Y.getConfig())}),(A=this.vm.getCurTab())&&(this.vm._showAllThb(A),this.vm.getSlidePages(),this.vm.updateSltIndex(),this.vm.onTabChanged(),this._e(et)),!0):(this._e(g),!1):(this._e(Ye),!1)},z.unbindView=function(){var d;return null!=(d=this.ui)&&d.unbindView(),this.ui=null,this._e(et),!0},z.dispose=function(){var d;Rt.prototype.dispose.call(this),null!=(d=this._iPub)&&d.dispose(),this._iPub=null,this._db=null,this.ViewUi=null,(this.ui=null)!=(d=this.vm)&&d.dispose(),this.vm=null},z.updateUISetting=function(d){var b;return f(d)?(C(d,d=S(this._dfConfig.uiConfig)),(b=null==(b=this.ui)?void 0:b.containerBox)&&this.bindView(b,d,!1),this._e(et),!0):(this._e(lt),!1)},z.bindContent=function(d){var b;return m(d=l(d)?document.getElementById(d):d)?null!=(b=this.ui)&&b.bindContent(d)?(this._e(et),!0):(this._e(In),!1):(this._e(g),!1)},z.unbindContent=function(){var d;return null!=(d=this.ui)&&d.unbindContent()?(this._e(et),!0):(this._e(In),!1)},z.fullScreen=function(){var d;return null!=(d=this.ui)&&d.fullScreen()?(this._e(et),!0):(this._e(this.ui?Te:In),!1)},z.cancelFullScreen=function(){var d;return this._e(et),null==(d=this.ui)?void 0:d.cancelFullScreen()},z.fullWebPage=function(){var d;return null!=(d=this.ui)&&d.fullPage()?(this._e(et),!0):(this._e(In),!1)},z.cancelFullWebPage=function(){var d;return null!=(d=this.ui)&&d.cancelFullPage()?(this._e(et),!0):(this._e(In),!1)},z.setButtonClass=function(d,b){if(!l(d)||!l(b))return this._e(lt),!1;var A=this._uiConfig.buttons[d];return A?(A.setClass=b,null!=(A=this.ui)&&A.setButtonClass(d)?(this._e(et),!0):(this._e(In),!1)):(this._e(In),!1)},z.setViewMode=function(d,b){return c(d)&&c(b)?0<d&&0<b?(this._uiConfig.canvasConfig.rows=b,this._uiConfig.canvasConfig.columns=d,this.ui?(this._e(et),this.vm.rows=b,this.vm.columns=d,null==(A=this.ui)?void 0:A.setViewMode(d,b)):(this._e(In),!1)):(this._e(Ut),!1):(this._e(lt),!1);var A},z.createCustomElement=function(d,b,A){void 0===b&&(b=0),void 0===A&&(A=!1);var O=d;return m(O=l(d)?document.getElementById(d):O)?(this._e(et),null==(d=this.ui)?void 0:d.createCustomElement(O,b,A)):(this._e(lt),!1)},z.updateVideoContainer=function(d){return this.ui?(l(d)||this._e(lt),this.ui.updateVideoContainer(d),this._e(et),!0):(this._e(In),!1)},z.setLoadingImage=function(d){var b;this.uiConfig.canvasConfig.loadingImageUrl=d,null!=(b=this.ui)&&b.setLoadingImage(d)},z.nextPage=function(){return this.vm.nextPage()},z.prevPage=function(){return this.vm.prevPage()},z.firstPage=function(){return this.vm.firstPage()},z.lastPage=function(){return this.vm.lastPage()},z.gotoPage=function(d){return this.vm.gotoPage(d)},z.createThumbnailView=function(d){if(void 0===d&&(d={}),Rt.prototype._emit.call(this,bt,"Invoking viewer#createThumbnailView."),!f(d))return this._e(lt),null;var b,A=[],O=this.vm.createThumbnailView(this._uiConfig.thumbnail);return null!=(b=this.ui)&&b.createThumbnail(O.getConfig()),O.init(d,A),A.length?(b="Failed to create the thumbnail viewer because the parameter ".concat(A[0]," is incorrect."),this._e({code:80024,message:b})):this._e(et),O},z.removeThumbnailView=function(d){Rt.prototype._emit.call(this,bt,"Invoking viewer#removeThumbnailView.");var b=d;return l(d)||(b=d.uid),this.vm.removeThumbnailView(b)?(null!=(d=this.ui)&&d.removeThumbnail(b),this._e(et),!0):(this._e(g),!1)},z.getThumbnailViewById=function(d){return this.vm.getThumbnailViewById(d)},z.getThumbnailViewsList=function(){return this.vm.thbViews},z.getIndexByUid=function(d){return this.vm.uidIdx(d)},z.getUidByIndex=function(d){return this.vm.idxUid(d)},z.getRealTimeMetadataByIndex=function(d){return this.vm.getRealTimeMetadataByIndex(d)},z.getMetadataByIndex=function(d){return this.vm.getMetadata(d)},z.setMetadataByIndex=function(d,b){return this.vm.setMetadata(d,b)},z.getCustomDataByIndex=function(d){return this.vm.getCustomDataByIndex(d)},z.getCustomDataByUid=function(d){return this.vm.getCustomDataByUid(d)},z.zoomIn=function(){return this.vm.zoomIn()},z.zoomOut=function(){return this.vm.zoomOut()},z.zoomTo=function(d,b,A){return this.vm.zoomTo(d,b,A)},z.reset=function(){return this.vm.reset()},z.resetByIndex=function(d,b){return this.vm.resetByIndex(d,b)},z.mirror=function(){return this.vm.flip(1)},z.flip=function(){return this.vm.flip(0)},z.rotate=function(d,b){return this.vm.rotate(d,b)},z.getRotateAngle=function(d){return this.vm.getRotateAngle(d)},z.crop=function(d,b,A,O){return this.vm.crop(d,b,A,O)},z.erase=function(d,b,A,O,Y){return this.vm.erase(d,b,A,O,Y)},z.overlayRectangle=function(d,b,A,O,Y,re,he){return this.vm.overlay(d,b,A,O,Y,re,he)},z.changePageSize=function(d,b){return this.vm.changePageSize(d,b)},z.saveTransformation=function(){return this.vm.saveTransformation()},z.getMinPageData=function(){return"single"===this.displayMode?this.vm.getMinPageData():"continuous"===this.displayMode?null:void 0},z.setFreeSelectedBox=function(d){return this.vm.setFreeBox(d)},z.setSelectedBoxes=function(d,b){if(1!==this.operationMode)return this._e(Ke),!1;if(void 0===d)return this._e(lt),!1;if(void 0!==b&&!_(b))return this._e(lt),!1;var A=this.getCurrentTab();if(!A)return this._e(xt),!1;if(void 0===(A=A.getCurPage()))return this._e(xt),!1;var O=null;if(s(d)){if(0===(O=d).length)return this._e(g),!1}else{if(!f(d))return this._e(lt),!1;O=[d]}for(var Y=O.length,re=A.naturalWidth,he=A.naturalHeight,Oe=0;Oe<Y;Oe++){var ye=O[Oe];if(!(c(ye.left)&&c(ye.top)&&c(ye.width)&&c(ye.height)))return this._e(lt),!1;ye.left<0&&(ye.left=0),ye.top<0&&(ye.top=0),ye.width<=0&&(ye.width=1),ye.height<=0&&(ye.height=1),ye.width+ye.left>re&&(ye.width=re-ye.left),ye.height+ye.top>he&&(ye.height=he-ye.top)}return"single"===this.displayMode?this.vm.setBox(d,b):null!=(A=this.ui)&&A.setSelectedBoxes(d,b),this._e(et),!0},z.clearSelectedBoxes=function(d){var b;return this.vm.clearBox(d),null!=(b=this.ui)&&b.clearSelectedBoxes(d),this._e(et),!0},z.render=function(){return this.vm.render()},z.on=function(d,b){l(d)&&v(b)?(this._iPub._on(d,b),this._e(et)):this._e(lt)},z.emit=function(d){var b;if(l(d)){for(var A=arguments.length,O=new Array(1<A?A-1:0),Y=1;Y<A;Y++)O[Y-1]=arguments[Y];(b=this._iPub)._emit.apply(b,[d].concat(O)),this._e(et)}else this._e(lt)},z.off=function(d,b){!l(d)||void 0!==b&&!v(b)?this._e(lt):(this._iPub._off(d,b),this._e(et))},z.offById=function(d,b){l(d)&&l(b)?(this._iPub._offById(d,b),this._e(et)):this._e(lt)},nt(Or,[{key:"zoom",get:function(){return this.vm.getZoom()},set:function(d){c(d)?d<=0?this._e(Ut):(this.vm.setZoom(d),this._e(et)):this._e(lt)}},{key:"minZoom",get:function(){return this._config.minZoom},set:function(d){c(d)?d<=0?this._e(Ut):(this._config.minZoom=d,this.vm.setMinZoom(d),this._e(et)):this._e(lt)}},{key:"maxZoom",get:function(){return this._config.maxZoom},set:function(d){c(d)?d<=0?this._e(Ut):(this._config.maxZoom=d,this.vm.setMaxZoom(d),this._e(et)):this._e(lt)}},{key:"showViewer",get:function(){return this._uiConfig.showViewer},set:function(d){var b;_(d)?(this._uiConfig.showViewer=d,null!=(b=this.ui)&&b.setShowViewer(d),d&&this.render(),this._e(et)):this._e(lt)}},{key:"showHeader",get:function(){return this._uiConfig.toolbars.header},set:function(d){var b;_(d)?(this._uiConfig.toolbars.header=d,null!=(b=this.ui)&&b.setShowHeader(d),this._e(et)):this._e(lt)}},{key:"headerColor",get:function(){return this._uiConfig.headerColor},set:function(d){var b;h(d)?(this._uiConfig.headerColor=d,null!=(b=this.ui)&&b.setHeaderColor(d),this._e(et)):this._e(w)}},{key:"showTopMenu",get:function(){return this._uiConfig.toolbars.topMenu},set:function(d){var b;_(d)?(this._uiConfig.toolbars.topMenu=d,null!=(b=this.ui)&&b.setShowTopMenu(d),this._e(et)):this._e(lt)}},{key:"topMenuColor",get:function(){return this._uiConfig.topMenuColor},set:function(d){var b;h(d)?(this._uiConfig.topMenuColor=d,null!=(b=this.ui)&&b.setTopMenuColor(d),this._e(et)):this._e(w)}},{key:"topMenuBorder",get:function(){return this._uiConfig.topMenuBorder},set:function(d){var b;y(d)?(this._uiConfig.topMenuBorder=d,null!=(b=this.ui)&&b.setTopMenuBorder(d),this._e(et)):this._e(Je)}},{key:"showSidebar",get:function(){return this._uiConfig.showSidebar},set:function(d){var b;_(d)?(this._uiConfig.showSidebar=d,null!=(b=this.ui)&&b.setShowSidebar(d),this._e(et)):this._e(lt)}},{key:"showAside",get:function(){return this._uiConfig.toolbars.asideMenu},set:function(d){var b;_(d)?(this._uiConfig.toolbars.asideMenu=d,null!=(b=this.ui)&&b.setShowAside(d),this._e(et)):this._e(lt)}},{key:"showMain",get:function(){return this._uiConfig.showMain},set:function(d){var b;_(d)?(this._uiConfig.showMain=d,null!=(b=this.ui)&&b.setShowMain(d),this.emit(we,d),this._e(et)):this._e(lt)}},{key:"showFooter",get:function(){return this._uiConfig.toolbars.bottomMenu},set:function(d){var b;_(d)?(this._uiConfig.toolbars.bottomMenu=d,null!=(b=this.ui)&&b.setShowFooter(d),this._e(et)):this._e(lt)}},{key:"showTab",get:function(){return this._uiConfig.showTab},set:function(d){var b;_(d)?(this._uiConfig.showTab=d,null!=(b=this.ui)&&b.setShowTab(d),this._e(et)):this._e(lt)}},{key:"footerColor",get:function(){return this._uiConfig.footerColor},set:function(d){var b;h(d)?(this._uiConfig.footerColor=d,null!=(b=this.ui)&&b.setFooterColor(d),this._e(et)):this._e(w)}},{key:"showVideoContainer",get:function(){return this._uiConfig.showVideoContainer},set:function(d){var b;_(d)||this._e(lt),this._uiConfig.showVideoContainer=d,null!=(b=this.ui)&&b.setShowVideoContainer(d),this._e(et)}},{key:"fitType",get:function(){return this.vm.getFitType()},set:function(d){this.vm.setFitType(d)&&(this._config.fitType=d)}},{key:"canvasMouseShape",get:function(){return this._uiConfig.canvasConfig.canvasMouseShape},set:function(d){var b;l(d)?(this._uiConfig.canvasConfig.canvasMouseShape=d,null!=(b=this.ui)&&b.setCanvasMouseShape(d),this._e(et)):this._e(lt)}},{key:"canvasBackground",get:function(){return this._uiConfig.canvasConfig.canvasBackground},set:function(d){var b;h(d)?(this._uiConfig.canvasConfig.canvasBackground=d,null!=(b=this.ui)&&b.setInnerTbProp("canvasBackground",d),this._e(et)):this._e(w)}},{key:"cropBoxStyle",get:function(){return this.vm.cropBoxStyle},set:function(d){f(d)?(void 0!==d.borderColor&&(this._uiConfig.canvasConfig.selectedBoxLineColor=d.borderColor),this._uiConfig.canvasConfig.cropBoxStyle||(this._uiConfig.canvasConfig.cropBoxStyle={}),Object.assign(this._uiConfig.canvasConfig.cropBoxStyle,d),this.vm.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),null!=(d=this.ui)&&d.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),this._e(et)):this._e(lt)}},{key:"selectedBoxLineColor",get:function(){return this.vm.cropBoxStyle.borderColor},set:function(d){h(d)?(this._uiConfig.canvasConfig.selectedBoxLineColor=d,this._uiConfig.canvasConfig.cropBoxStyle||(this._uiConfig.canvasConfig.cropBoxStyle={}),this._uiConfig.canvasConfig.cropBoxStyle.borderColor=d,this._uiConfig.canvasConfig.cropBoxStyle.ctrlBorderColor=d,this.vm.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),null!=(d=this.ui)&&d.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle),this._e(et)):this._e(w)}},{key:"saveBackgroundColor",get:function(){return this.vm.getSaveBackgroundColor()},set:function(d){this.vm.setSaveBackgroundColor(d)}},{key:"saveQuality",get:function(){return this.vm.getSaveQuality()},set:function(d){this.vm.setSaveQuality(d)}},{key:"saveType",get:function(){return this.vm.getSaveType()},set:function(d){this.vm.setSaveType(d)}},{key:"rotateMode",get:function(){return this.vm.getRotateMode()},set:function(d){this.vm.setRotateMode(d)}},{key:"canvasBorder",get:function(){return this._uiConfig.canvasConfig.canvasBorder},set:function(d){var b;y(d)?(this._uiConfig.canvasConfig.canvasBorder=d,null!=(b=this.ui)&&b.setCanvasBorder(d),this._e(et)):this._e(Je)}},{key:"pageBackground",get:function(){return this._uiConfig.canvasConfig.pageBackground},set:function(d){var b;h(d)?(this._uiConfig.canvasConfig.pageBackground=d,null!=(b=this.ui)&&b.setInnerTbProp("pageBackground",d),this._e(et)):this._e(w)}},{key:"pageBorder",get:function(){return this._uiConfig.canvasConfig.pageBorder},set:function(d){var b;y(d)?(this._uiConfig.canvasConfig.pageBorder=d,null!=(b=this.ui)&&b.setInnerTbProp("pageBorder",d),this._e(et)):this._e(Je)}},{key:"selectedPageBackground",get:function(){return this._uiConfig.canvasConfig.selectedPageBackground},set:function(d){var b;h(d)?(this._uiConfig.canvasConfig.selectedPageBackground=d,null!=(b=this.ui)&&b.setInnerTbProp("selectedPageBackground",d),this._e(et)):this._e(w)}},{key:"selectedPageBorder",get:function(){return this._uiConfig.canvasConfig.selectedPageBorder},set:function(d){var b;y(d)?(this._uiConfig.canvasConfig.selectedPageBorder=d,null!=(b=this.ui)&&b.setInnerTbProp("selectedPageBorder",d),this._e(et)):this._e(Je)}},{key:"hoverPageBorder",get:function(){return this._uiConfig.canvasConfig.hoverPageBorder},set:function(d){var b;y(d)?(this._uiConfig.canvasConfig.hoverPageBorder=d,null!=(b=this.ui)&&b.setInnerTbProp("hoverPageBorder",d),this._e(et)):this._e(Je)}},{key:"hoverPageBackground",get:function(){return this._uiConfig.canvasConfig.hoverPageBackground},set:function(d){var b;h(d)?(this._uiConfig.canvasConfig.hoverPageBackground=d,null!=(b=this.ui)&&b.setInnerTbProp("hoverPageBackground",d),this._e(et)):this._e(w)}},{key:"placeholderBackground",get:function(){return this._uiConfig.canvasConfig.placeholderBackground},set:function(d){var b;h(d)?(this._uiConfig.canvasConfig.placeholderBackground=d,null!=(b=this.ui)&&b.setInnerTbProp("placeholderBackground",d),this._e(et)):this._e(w)}},{key:"showPageNumber",get:function(){return this._uiConfig.canvasConfig.showPageNumber},set:function(d){var b;_(d)?(this._uiConfig.canvasConfig.showPageNumber=d,this._uiConfig.canvasConfig.pageNumber||(this._uiConfig.canvasConfig.pageNumber={}),this._uiConfig.canvasConfig.pageNumber.visibility=d?"visible":"hidden",null!=(b=this.ui)&&b.setInnerTbProp("showPageNumber",d),this._e(et)):this._e(lt)}},{key:"pageNumber",get:function(){var d;return null==(d=this._uiConfig.canvasConfig)?void 0:d.pageNumber},set:function(d){var b;f(d)?(void 0!==d.visibility&&(this._uiConfig.canvasConfig.showPageNumber="visible"===d.visibility),this._uiConfig.canvasConfig.pageNumber||(this._uiConfig.canvasConfig.pageNumber={}),Object.assign(this._uiConfig.canvasConfig.pageNumber,d),null!=(b=this.ui)&&b.setInnerTbProp("pageNumber",d),this._e(et)):this._e(lt)}},{key:"checkbox",get:function(){return this._uiConfig.canvasConfig.checkbox||{}},set:function(d){var b;f(d)?(this._uiConfig.canvasConfig.checkbox||(this._uiConfig.canvasConfig.checkbox={}),Object.assign(this._uiConfig.canvasConfig.checkbox,d),null!=(b=this.ui)&&b.setInnerTbProp("checkbox",d),this._e(et)):this._e(lt)}},{key:"multiSelectMode",get:function(){return this._multiSelectMode},set:function(d){var b;_(d)?(this._multiSelectMode=d,null!=(b=this.ui)&&b.setInnerTbProp("multiSelectMode",d),this._e(et)):this._e(lt)}},{key:"allowPageDragging",get:function(){return this._uiConfig.canvasConfig.allowPageDragging},set:function(d){var b;_(d)?(this._uiConfig.canvasConfig.allowPageDragging=d,null!=(b=this.ui)&&b.setInnerTbProp("allowPageDragging",d),this._e(et)):this._e(lt)}},{key:"allowKeyboardControl",get:function(){return this._uiConfig.canvasConfig.allowKeyboardControl},set:function(d){var b;_(d)?(this._uiConfig.canvasConfig.allowKeyboardControl=d,null!=(b=this.ui)&&b.setInnerTbProp("allowKeyboardControl",d),this._e(et)):this._e(lt)}},{key:"pageMargin",get:function(){return this._uiConfig.canvasConfig.pageMargin},set:function(d){var b;I(d)?(this._uiConfig.canvasConfig.pageMargin=d,this.vm.setPageMargin(d),null!=(b=this.ui)&&b.setInnerTbProp("pageMargin",d),this._e(et)):this._e(Fe)}},{key:"scrollDirection",get:function(){return this._uiConfig.canvasConfig.scrollDirection},set:function(d){var b;l(d)?(this._uiConfig.canvasConfig.scrollDirection=d,null!=(b=this.ui)&&b.setInnerTbProp("scrollDirection",d),this._e(et)):this._e(lt)}},{key:"autoChangeIndex",get:function(){return this._uiConfig.canvasConfig.autoChangeIndex},set:function(d){var b;_(d)?(this.uiConfig.canvasConfig.autoChangeIndex=d,null!=(b=this.ui)&&b.setInnerTbProp("autoChangeIndex",d)):this._e(lt)}},{key:"outerBorder",get:function(){return this._uiConfig.outerBorder},set:function(d){var b;y(d)?(this._uiConfig.outerBorder=d,null!=(b=this.ui)&&b.setOuterBorder(d),this._e(et)):this._e(Je)}},{key:"sidebarWidth",get:function(){return this._uiConfig.sidebarWidth},set:function(d){var b;I(d)?(this._uiConfig.sidebarWidth=d,null!=(b=this.ui)&&b.setSidebarWidth(d),this._e(et)):this._e(Fe)}},{key:"width",get:function(){var d;return(null==(d=this.ui)?void 0:d.getViewerWidth())||this._uiConfig.width},set:function(d){var b;I(d)?(this._uiConfig.width=d,null!=(b=this.ui)&&b.setViewerWidth(d),this._e(et)):this._e(Fe)}},{key:"height",get:function(){var d;return(null==(d=this.ui)?void 0:d.getViewerHeight())||this._uiConfig.height},set:function(d){var b;I(d)?(this._uiConfig.height=d,null!=(b=this.ui)&&b.setViewerHeight(d),this._e(et)):this._e(Fe)}},{key:"uiConfig",get:function(){return this._uiConfig}},{key:"operationMode",get:function(){return this._config.operationMode},set:function(d){var b;c(d)?-1===[0,1,2].indexOf(d)?this._e(g):(this._config.operationMode=d,this.vm.setOperationMode(d),null!=(b=this.ui)&&b.setOperationMode(d),this._e(et)):this._e(lt)}},{key:"allowSlide",get:function(){return this.vm.getAllowSlide()},set:function(d){_(d)?(this.vm.setAllowSlide(d),this._e(et)):this._e(lt)}},{key:"tabMode",get:function(){return this._config.tabMode},set:function(d){"single"===d||"multiple"===d?(this._config.tabMode=d,this.vm.setTabMode(d),this._e(et)):this._e(g)}},{key:"selectionBoxAspectRatio",get:function(){return this.vm.getAspectRatio()},set:function(d){var b;c(d)?(this.vm.setAspectRatio(d),null!=(b=this.ui)&&b.setAspectRatio(d),this._e(et)):this._e(lt)}},{key:"keepAspectRatio",get:function(){return this.vm.getKeepAspectRatio()},set:function(d){_(d)?this.vm.setKeepAspectRatio(d):this._e(lt)}},{key:"displayMode",get:function(){return this._config.displayMode},set:function(d){var b;l(d)?-1!==["single","continuous"].indexOf(String(d))?(this._config.displayMode=d,null!=(b=this.ui)&&b.setDisplayMode(d),this.vm.setDisplayMode(d),this._e(et)):this._e(Ut):this._e(lt)}},{key:"zooming",get:function(){return this._config.zooming},set:function(d){this._config.zooming=d,this._e(et)}},{key:"scrollX",get:function(){return this._config.scrollX},set:function(d){this._config.scrollX=d,this._e(et)}},{key:"scrollY",get:function(){return this._config.scrollY},set:function(d){this._config.scrollY=d,this._e(et)}},{key:"keepZoom",get:function(){return this._config.keepZoom},set:function(d){_(d)?(this._config.keepZoom=d,this.vm.setKeepZoom(d),this._e(et)):this._e(lt)}},{key:"ifAllowSlide",get:function(){return this._config.ifAllowSlide},set:function(d){_(d)?(this._config.ifAllowSlide=d,this._e(et)):this._e(lt)}},{key:"zoomInDelta",get:function(){return this._config.zoomInDelta},set:function(d){c(d)?d<=0?this._e(Ut):(this._config.zoomInDelta=d,this._e(et)):this._e(lt)}},{key:"zoomOutDelta",get:function(){return this._config.zoomOutDelta},set:function(d){c(d)?d<=0?this._e(Ut):(this._config.zoomOutDelta=d,this._e(et)):this._e(lt)}},{key:"zoomDelta",get:function(){return this._config.zoomDelta},set:function(d){c(d)?d<=0?this._e(Ut):(this._config.zoomDelta=d,this._e(et)):this._e(lt)}},{key:"currentPageCount",get:function(){return this.vm.getCurPageCount()}},{key:"showLatestPage",get:function(){return this._config.showLatestPage},set:function(d){_(d)?(this._config.showLatestPage=d,this.vm.showLatest=d,this._e(et)):this._e(lt)}},{key:"container",get:function(){return this._config.container},set:function(d){""===d||m(d)||m(d)?this._config.container=d:this._e(lt)}},{key:"optimizeImage",get:function(){return this.vm.useHermite},set:function(d){this.vm.setUseHermite(d)}}]),Or),fi=(u(wr,kt=_t),(z=wr.prototype).getCounts=function(){return this.chs.length},z.addViewer=function(d){return-1==this.vws.indexOf(d)&&(this.vws.push(d),!0)},z.removeViewer=function(d){return-1!=(d=this.vws.indexOf(d))&&(this.vws.splice(d,1),!0)},wr),pr=((z=Gn.prototype).addTab=function(d,b){var A=this.checkTab(d.uid),O=null;return-1!==A?O=this.tabs[A]:(O=new fi(d),this.tabs.push(O)),b&&O.addViewer(b),O},z.getTab=function(d){return-1===(d=this.checkTab(d))?null:this.tabs[d]},z.removeTab=function(d){-1<(d=this.checkTab(d))&&this.tabs.splice(d,1)},z.checkTab=function(d){for(var b=this.tabs.length,A=0;A<b;A++)if(this.tabs[A].uid===d)return A;return-1},z.setMode=function(d){return("single"===d||"multiple"===d)&&(this.mode=d,!0)},z.removePage=function(d,b){return-1!=(d=this.checkTab(d))&&this.tabs[d].remove(b)},z.dispose=function(){},Gn),ao=((z=Li.prototype).dispose=function(){this.isDisposed||(this._setCanvasSize(1,1),this._clearRect(this.mainCtx),this._clearRect(this.minorCtx),this.mainCanvas=null,this.minorCanvas=null,this.mainCtx=null,this.minorCtx=null,this.isDisposed=!0)},z.reset=function(){this.scale=1,this.pageUid=null,this._curOpType=null},z.render=function(d){var b=this,A=d.viewerUid,O=d.pageUid,Y=d.isMin,re=d.img,he=d.page,Oe=d.midData;O!==this.pageUid&&(this.ownerViewer=A,this.isMin=Y,this.pageUid=O,d=1,A=re.naturalWidth,Y=re.naturalHeight,Math.pow(Math.pow(A,2)+Math.pow(Y,2),.5),O=Math.max(A,Y),this.isKeepCanvasSize?this.mainCanvas.width<O&&(this.scale=d=this.baseSize/O):this.mainCanvas.width===A&&this.mainCanvas.height===Y||this._setCanvasSize(A,Y),A*=d,Y*=d,A=Math.floor(A),Y=Math.floor(Y),this._setMainSize(A,Y),this._setMinorSize(A,Y),this._clearRect(this.mainCtx),this._clearRect(this.minorCtx),this.mainCtx.drawImage(re,0,0,A,Y),this.minorCtx.drawImage(re,0,0,A,Y),O=Oe.edt.all.slice(),Oe.edt.reset(),O.forEach(function(ye){"rotate"===ye.type?(Oe.edt.rotate(ye.angle,0,0,ye.mode),b.rotate(ye,he,Oe)):"flip"===ye.type?(Oe.edt.flip(ye.direction),b.flip(ye,he,Oe)):"crop"===ye.type?(Oe.edt.crop(ye.left,ye.top,ye.width,ye.height),b.crop(ye,he)):"erase"===ye.type?(Oe.edt.erase(ye.left,ye.top,ye.width,ye.height,ye.color),b.erase(ye,he)):"changeSize"===ye.type&&(Oe.edt.changePageSize(ye.width,ye.height),b.changePageSize(ye,he))}))},z.rotate=function(d,b,A){var Jt=this.mainCanvas,O=this.minorCanvas,Y=this.mainCtx,Xt=this.minorCtx,re=null,he=this.mainWidth,Oe=this.mainHeight,ye=1,ct=0,gt=!1,wt=(0===d.mode&&(he=(re=L(0,0,this.minorWidth,this.minorHeight,d.calcAngle)).width,Oe=re.height,ct=Math.pow(Math.pow(he,2)+Math.pow(Oe,2),.5),gt=!this.isKeepCanvasSize&&(this.mainCanvas.width!==he||this.mainCanvas.height!==Oe),this.isKeepCanvasSize&&(wt=Math.max(he,Oe),this.mainCanvas.width<wt&&(ye=this.baseSize/wt)),he*=ye,Oe*=ye),null!==this._curOpType&&this._curOpType!==d.mode&&(re&&gt&&this._setMinorCanvasSize(ct,ct),this._setMinorSize(this.mainWidth,this.mainHeight),this._clearRect(Xt),Xt.save(),Xt.beginPath(),Xt.rect(0,0,this.minorWidth,this.minorHeight),Xt.clip(),Xt.closePath(),Xt.drawImage(Jt,0,0),Xt.restore()),this._curOpType=d.mode,re&&(gt&&this._setMainCanvasSize(ct,ct),this._setMainSize(he,Oe)),this._clearRect(Y),Y.save(),Y.beginPath(),Y.rect(0,0,this.mainWidth,this.mainHeight),Y.clip(),Y.closePath(),this._fillRect(Y,this.mainWidth,this.mainHeight),Y.translate(this.mainWidth/2,this.mainHeight/2),A.edt.setTransform(Y),this.minorWidth*ye/this.minorWidth);Jt=O.width*wt,Xt=O.height*wt,Y.drawImage(O,Math.floor(-this.minorWidth*ye/2),Math.floor(-this.minorHeight*ye/2),Math.floor(Jt),Math.floor(Xt)),Y.restore()},z.flip=function(d,b,A){var O=this.minorCanvas,Y=this.mainCtx;this._clearRect(Y),Y.save(),Y.beginPath(),Y.rect(0,0,this.mainWidth,this.mainHeight),Y.clip(),Y.closePath(),this._fillRect(Y,this.mainWidth,this.mainHeight),Y.translate(this.mainWidth/2,this.mainHeight/2),A.edt.setTransform(Y),Y.drawImage(O,Math.floor(-this.minorWidth/2),Math.floor(-this.minorHeight/2)),Y.restore()},z.crop=function(gt,b){var A=this.mainCanvas,O=this.minorCanvas,Y=this.mainCtx,re=this.minorCtx,he=this.scale,Oe=gt.left,ye=gt.top,ct=gt.width;gt=gt.height,Oe*=he,ye*=he,this._setMinorSize(ct*=he,gt*=he),this._clearRect(re),re.save(),re.beginPath(),re.rect(0,0,ct,gt),re.clip(),re.closePath(),re.translate(-Oe,-ye),re.drawImage(A,0,0),re.restore(),this._setMainSize(ct,gt),this._clearRect(Y),Y.save(),Y.beginPath(),Y.rect(0,0,this.mainWidth,this.mainHeight),Y.clip(),Y.closePath(),Y.drawImage(O,0,0),Y.restore()},z.erase=function(d,b){var A=this.mainCanvas,O=this.mainCtx,Y=this.minorCtx,re=this.scale,he=d.left,Oe=d.top,ye=d.width,ct=d.height;he*=re,Oe*=re,ye*=re,ct*=re,re=d.color||"#ffffff",this._clearRect(Y),Y.save(),Y.beginPath(),Y.rect(0,0,this.minorWidth,this.minorHeight),Y.clip(),Y.closePath(),Y.drawImage(A,0,0),Y.fillStyle=re,Y.fillRect(he,Oe,ye,ct),Y.restore(),O.save(),O.fillStyle=re,O.fillRect(he,Oe,ye,ct),O.restore()},z.changePageSize=function(Oe,b){var A=this.mainCanvas,O=this.minorCanvas,Y=this.mainCtx,re=this.minorCtx,he=Oe.width,gt=(Oe=Oe.height,this.scale),ye=Math.pow(Math.pow(he,2)+Math.pow(Oe,2),.5),ct=(this.isKeepCanvasSize?(ct=Math.max(he,Oe),this.mainCanvas.width<ct&&(this.scale=gt=this.baseSize/ct)):this.mainCanvas.width<ye&&this._setMinorCanvasSize(ye,ye),this._setMinorSize(he*=gt,Oe*=gt),this._clearRect(re),re.save(),re.beginPath(),re.rect(0,0,this.minorWidth,this.minorHeight),re.clip(),re.closePath(),he/this.mainWidth);ct*=A.width,gt=A.height*(gt=Oe/this.mainHeight),re.drawImage(A,0,0,Math.floor(ct),Math.floor(gt)),re.restore(),this.isKeepCanvasSize||this.mainCanvas.width<ye&&this._setMainCanvasSize(ye,ye),this._setMainSize(he,Oe),this._clearRect(Y),Y.save(),Y.beginPath(),Y.rect(0,0,this.mainWidth,this.mainHeight),Y.clip(),Y.closePath(),Y.drawImage(O,0,0),Y.restore()},z._clearRect=function(d){d.clearRect(0,0,d.canvas.width,d.canvas.height)},z._fillRect=function(d,b,A){return d.save(),d.fillStyle=this.saveColor,d.fillRect(0,0,b,A),d.restore(),!0},z._setMainSize=function(d,b){this.mainWidth=d,this.mainHeight=b},z._setMinorSize=function(d,b){this.minorWidth=d,this.minorHeight=b},z._setCanvasSize=function(d,b){this.mainCanvas.width=d,this.mainCanvas.height=b,this.minorCanvas.width=d,this.minorCanvas.height=b},z._setMainCanvasSize=function(d,b){this.mainCanvas.width=d,this.mainCanvas.height=b},z._setMinorCanvasSize=function(d,b){this.minorCanvas.width=d,this.minorCanvas.height=b},Li);function Li(O,b,A){this.baseSize=0,this.mainWidth=0,this.mainHeight=0,this.minorWidth=0,this.minorHeight=0,this._curOpType=null,this.saveColor=null,this.saveType="image/jpg",this.scale=1,this.isKeepCanvasSize=!1,this.isDisposed=!1,this.uid=O,this.baseSize=b=b||3840,O=document.createElement("canvas");var Y=document.createElement("canvas");O.id="dvs_used_as_offscreenCanvas_main_".concat(this.uid),Y.id="dvs_used_as_offscreenCanvas_minor_".concat(this.uid),this.mainCanvas=O,this.minorCanvas=Y,this.mainCtx=O.getContext("2d"),this.minorCtx=Y.getContext("2d"),this.mainCtx.imageSmoothingEnabled=!1,this.minorCtx.imageSmoothingEnabled=!1,this._setCanvasSize(b,b),void 0!==A?this.isKeepCanvasSize=A:p()&&(this.isKeepCanvasSize=!0)}function Gn(d){this.tabs=[],this.mode="single",this.tabs=[]}function wr(d){var b=kt.call(this,d)||this;return b.vws=[],b.name=d.name,b.type=d.type,b.chs=d.chs||[],b}function Or(gt){var b=gt.config,wt=gt.viewUi,A=gt.workerBlobURL,O=gt.scrollbarWidth,Y=gt.groupUid,re=gt.defaultConfig,he=gt.mPub,Oe=gt.focus,ye=gt.db,ct=gt.offScreenCanvas;return gt=gt.saveCanvas,(he=Rt.call(this,he)||this).ViewUi=null,he.group=null,he._uiConfig={canvasConfig:{}},he._config={},he._dfConfig=null,he._focus={viewerId:void 0,thumbnailId:void 0},he._multiSelectMode=!1,he.workerBlobURL=null,he.uid=D(6),he.postfix="-"+he.uid,he._iPub=new H,he._db=ye,he.ViewUi=wt,he.group=Y,he._dfConfig=re,he._focus=Oe,he.workerBlobURL=A,he.vm=new vr(b,he._iPub.getPublishSubscribe(),he._oPub,he.uid,A,O,ye,ct,gt),wt=he.initConfig(b),he.bindView(he.container),he._bindEvents(),wt.length?(re="Failed to create the viewer because the parameter ".concat(Y=wt[0]," is incorrect."),he._e({code:80024,message:re})):he._e(et),he}function Ei(d,b,A,O,Y,re,he,Oe,ye){var ct=qe.call(this,b)||this;return ct.showLatest=!0,ct.isMainViewVisible=!0,ct.isThumbnailVisible=!0,ct.thbViews=[],ct.tabMode="single",ct.autoOpen=!0,ct.keepZoom=!0,ct.cors=!0,ct.minPicWidth=800,ct.minPicHeight=800,ct.saveType="image/jpeg",ct.saveQuality=1,ct.useHermite=!0,ct.rows=1,ct.columns=1,ct.slideTimer=null,ct.showTabTimer=null,ct.isDisposed=!1,ct.cropBoxStyle={borderWidth:1,borderColor:"#000",invalidBorderColor:"#f00",dashLine:[4,2],background:"",ctrlBorderWidth:1,ctrlBorderRadius:0,ctrlBorderColor:"#000",invalidCtrlBorderColor:"#f00",ctrlBackground:"",ctrlWidth:8,ctrlHeight:8,enableConcaveBorderColor:!1},Object.assign(ct.cropBoxStyle,d.uiConfig.canvasConfig.cropBoxStyle||{}),ct.saveCanvas=ye,ct.uid=O,ct._mPub=new H(A),ct._db=he,ct._tabMng=new En(d),void 0===document.documentMode&&!p()||(ct.useHermite=!1),ct._gpc=new Xe(d,ct._db,ct._oPub,O,ct.useHermite,Y,re,Oe),ct._initEvent(),ct._gpc.slide.bindSlideEndCallback(function(gt){gt===be?ct.prevPage():gt===it&&ct.nextPage(),qe.prototype._emit.call(zt(ct),"slideFinished",gt),ct.setFitType("window")}),ct}function xr(d){this.tabs=[],this.mode="single",this.curTab=null,this.dfConfig=null,this._opStack=[],this.tabs=[],this.dfConfig={zoom:1,fitType:"window",disMode:"single",opMode:0}}function Jr(d){var b=Mt.call(this,d)||this;return b.cur=-1,b.total=0,b.slt=[],b.chs=[],b.thbs=[],b.scrL=0,b.scrT=0,b.virW=0,b.virH=0,b.iMargin=0,b.oMargin=0,b.zoom=1,b.fitType="window",b.clickZoom=!1,b.isFreeCrop=!1,b.disMode="single",b.opMode=0,b.name=d.name,b.type=d.type,b.chs=d.chs,b.zoom=d.zoom,b.fitType=d.fitType,b.disMode=d.disMode,b.opMode=d.opMode,b}function Mi(d){this.uid=d.uid,this.chs=d.chs||[]}function nn(d,b,A){this._db=null,this.visible=!1,this.children=[],this.redoStack=[],this.undoStack=[],this.matrixStack=[],this.style={left:0,top:0,width:0,height:0,borderColor:"#ffffff",borderType:"solid",borderWidth:0},this.naturalWidth=0,this.naturalHeight=0,this.wrapLeft=0,this.wrapTop=0,this.wrapWidth=0,this.wrapHeight=0,this.rotateAngle=0,this.flipCount=0,this.flipCountX=0,this.flipCountY=0,this.selectionBoxes=[],this.cropMng=null,this.editor2d=null,this._db=b,this.uid=d.uid,this.naturalWidth=d.naturalW,this.naturalHeight=d.naturalH,this.cropMng=new at(this.naturalWidth,this.naturalHeight,A),this.editor2d=new xe}function on(d,b,A){this._activeBoxId=null,this._startX=null,this._startY=null,this._addNewFlag=null,this._drawingFlag=!1,this.cropBoxes=[],this.width=0,this.height=0,this.zoom=1,this.aspectRatio=0,this.keepAspectRatio=!1,this.mouseDown=!1,this.unselectedCallback=null,this.selectedCallback=null,this.cropBoxStyle={},this.width=d,this.height=b,Object.assign(this.cropBoxStyle,A)}function fn(d){var b=this;this.uid=null,this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.isConvex=!0,this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.zoom=1,this.dpr=1,this.cropBoxStyle={ctrlWidth:8,ctrlHeight:8},this.uid=D(11),Object.keys(d).forEach(function(A){b[A]=d[A]}),this._initBox()}function mn(d,b){var A=Ht.call(this,b)||this;return A.uid=null,A._tbPub=null,A._size=null,A._mouseShape="pointer",A._direction="vertical",A._sequence=-1,A._location="horizontal",A._showThb=!0,A._showPNum=!1,A._showRmBtn=!1,A._fullThb=!1,A._dragging=!0,A._resizing=!0,A._keyboard=!1,A._rows=4,A._columns=1,A._bg="rgba(67,66,70,1)",A._border="1px solid rgba(27,27,29,1)",A._pageBg="rgba(0,0,0,0)",A._pageBorder="1px solid rgba(128,128,128,1)",A._sltPBg="rgba(127,133,251,1)",A._sltPBorder="1px solid rgba(255,0,0,1)",A._hvPBg="rgba(196,250,248,1)",A._hvPBorder="1px solid rgba(255,255,0,1)",A._placeholderBg="rgba(255,192,203,1)",A._pageMargin=10,A._autoChangeIdx=!1,A._checkboxConfig={},A._pageNumberConfig={},A._multiSelectMode=!1,A._optimizeImage=!0,A.uid=D(11),A._tbPub=new H,A.init(d),A._tbPub._on("_changeThumbnailViewProp",function(O){for(var Y in O)A[Y]=O[Y]}),A}function Sn(d,b,A,O,Y,re,he,Oe){var ye=Vt.call(this,A)||this;return ye.uid=null,ye.cvsOffW=0,ye.cvsOffH=0,ye.cvsCltW=0,ye.cvsCltH=0,ye.cvsInnerW=0,ye.cvsInnerH=0,ye.maxW=0,ye.maxH=0,ye.virW=0,ye.virH=0,ye.dpr=1,ye.fitType="window",ye.keepZoom=!0,ye.clickZoom=!1,ye.isFreeCrop=!1,ye.zoom=1,ye.zoomInDelta=1.2,ye.zoomOutDelta=1.2,ye.zoomDelta=1.2,ye.scrL=0,ye.scrT=0,ye.disMode="single",ye.opMode=0,ye.curTab=null,ye.curPages=[],ye.iMargin=10,ye.oMargin=10,ye.rows=0,ye.columns=0,ye._mousedown=!1,ye._pageX=0,ye._pageY=0,ye.rotateMode=1,ye.saveBg="#ffffff",ye.aspectRatio=0,ye.keepAspectRatio=!1,ye._startDistance=0,ye.useWebWorker=!1,ye.renderTaskUid=null,ye.workerTimer=null,ye.useHermite=!0,ye.hermite=null,ye.workerBlobURL=null,ye.scrBarW=0,ye.loadingTimer=null,ye.allowSlide=!0,ye.slide=null,ye.isSliding=!1,ye.zooming=!0,ye.scrollX=!0,ye.scrollY=!0,ye.animating=!1,ye.bouncing=!1,ye.paging=!1,ye.snapping=!1,ye.animationDuration=300,ye.locking=!1,ye.minZoom=.01,ye.maxZoom=8,ye.speedDelta=1,ye._outerWidth=0,ye._outerHeight=0,ye._innerWidth=0,ye._innerHeight=0,ye._outerLeft=0,ye._outerTop=0,ye._snapWidth=0,ye._snapHeight=0,ye._pullHeight=0,ye._pullActive=!1,ye._maxSrL=0,ye._maxSrT=0,ye._srL=0,ye._srT=0,ye._zoom=1,ye._futureLeft=0,ye._futureTop=0,ye._futureZoom=0,ye._zoomComplete=null,ye._isSingleTouch=!0,ye._isDecelerating=!1,ye._isProcessing=!1,ye._isDragging=!1,ye._isAnimating=!1,ye._interruptedAnimation=!1,ye._position=[],ye._startTouchLeft=0,ye._startTouchTop=0,ye._startZoom=1,ye._lastTouchLeft=0,ye._lastTouchTop=0,ye._lastScale=1,ye._enableScrollX=!0,ye._enableScrollY=!0,ye._fps=60,ye._running={},ye._counter=1,ye.cropLineColor="rgba(0,0,0,1)",ye.defaultCursor=null,ye.isDisposed=!1,ye.offScreenCanvas=Oe,ye.uid=O,ye.dpr=G(),ye._db=b,ye.fitType=d.fitType,ye.maxZoom=d.maxZoom,ye.minZoom=d.minZoom,ye.opMode=d.opMode,ye.iMargin=d.iMargin,ye.scrollX=d.scrollX,ye.scrollY=d.scrollY,ye.zoomInDelta=d.zoomInDelta,ye.zoomOutDelta=d.zoomOutDelta,ye.zoomDelta=d.zoomDelta,ye.zooming=d.zooming,ye.useWebWorker=d.useWebWorker,ye.useHermite=Y,ye.scrBarW=he,ye.cvsMng=new Gt,ye.offScreenCanvas.saveColor=ye.saveBg,ye._initAnimation(),ye._initScroller(),ye.slide=new ce(A,b),ye.slide.stateCb=function(ct){ye.isSliding=ct},ye.useHermite&&(ye.workerBlobURL||(ye.workerBlobURL=re),ye.hermite=new Me(ye.useWebWorker,ye.workerBlobURL)),ye}function jn(d,b){this.useWorker=!0,this.workers_archive=[],this.taskUid=null,this.useWorker=d,this.cores=2,this.workerBlobURL=b}function tr(d,b){return(d=ln.call(this,d)||this).wrapper=null,d.isVisible=!1,d.isDragging=!1,d.isStart=!1,d.startX=0,d.startTime=0,d.hideTimer=null,d.width=0,d.triggerDist=10,d.minDistanceThreshold=60,d.minTimeThreshold=300,d.pages=null,d.slideEndCallback=null,d.slidingStateChangedCallback=null,d.stateCb=null,d.touchNum=0,d.curPageUid=null,d.renderPageUid=null,d.loading=!1,d.isNew=!1,d.targetIndexes=[-1,-1,-1],d.allowDrag=!0,d.isDisposed=!1,d._db=b,d.isDisposed=!1,d.pages=[{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1}],d._initEvent(),d}function Sr(){this.saveColor="#ffffff";var d=G();this.mainCvs=new rn({dpr:d}),this.cropCvs=new Qt({dpr:d})}function so(d){return Un.call(this,d)||this}function gi(d){return(d=On.call(this,d)||this).maskColor="rgba(200,200,200,0.5)",d.isMask=!0,d}function yi(d){this.cssWidth=0,this.cssHeight=0,this.dpr=1,this.canvas=null,this.ctx=null,this.dpr=d.dpr}u(nr,ge=H),(z=nr.prototype)._initTopEvent=function(){var d=this;this.on(ot,function(b,A,O,Y){d._load(b,A,O,Y)}),this.on(Lt,function(b,A,O){d._open(b,A,O)}),this.on(We,function(b,A,O,Y){var re=d._tabMng.getTab(Y);re&&re.vws.forEach(function(he){(he=d.uidViewer(he))&&he.vm.renameTag(b,A,Y)})}),this.on(Ae,function(b,A,O){var Y=d._tabMng.getTab(O);Y&&Y.vws.forEach(function(re){(re=d.uidViewer(re))&&re.vm.emptyTag(O)})}),this.on(_e,function(b,A,O){var Y=d._tabMng.getTab(O);Y&&Y.vws.forEach(function(re){(re=d.uidViewer(re))&&re.vm.addPageTag(b,O)})}),this.on(Ee,function(b,A,O){var Y=d._tabMng.getTab(O);Y&&Y.vws.forEach(function(re){(re=d.uidViewer(re))&&re.vm.rmPageTag(b,O)})}),this.on(Pt,function(b,A,O,Y){var re=d._tabMng.getTab(Y);re&&re.vws.forEach(function(he){(he=d.uidViewer(he))&&he.vm.renameFile(b,A,Y)})}),this.on(Nt,function(b){d.emit(Kt,{},b.chs.slice());var A=d._tabMng.getTab(b.uid);A&&(A.vws.forEach(function(O){(O=d.uidViewer(O))&&O.closeTab(b.uid)}),d._tabMng.removeTab(b.uid))}),this.on(pe,function(b){d.vws.forEach(function(A){A.vm.changeTag(b)})}),this.on(At,function(b){d.vws.forEach(function(A){A.vm.changeDir(b)})}),this.on(Qe,function(b,A){var O=d._db.getMid(b);O&&(b===d.offScreenCanvas.pageUid&&d.offScreenCanvas.reset(),d._tabMng.tabs.forEach(function(Y){-1!==Y.chs.indexOf(b)&&Y.vws.forEach(function(re){(re=d.uidViewer(re))&&(re.vm.updateSync(b,Y.uid,A),re.vm.showThbItem(b))})}),O.minData||d._loadMinPic(b))})},z._initViewerEvent=function(){var d=this;this.onM("dvsRenderMainPage",function(b,A){b.forEach(function(O){(O=d.uidViewer(O))&&O.vm.renderMainPage(A)})}),this.onM(Ie,function(b,A){d.emit(Ie,b,A)}),this.onM($e,function(b,A,O){d.emit($e,b,A,O)}),this.onM(Ve,function(b){d._err(b)}),this.onM(Ot,function(b){d._loadMinPic(b)}),this.onM(Ft,function(b,A,O){d._getGroup(b).forEach(function(Y){if(Y.uid!==b)switch(A){case"first":Y.vm.firstPage(!1);break;case"last":Y.vm.lastPage(!1);break;case"next":Y.vm.nextPage(!1);break;case"prev":Y.vm.prevPage(!1);break;case"goto":Y.vm.gotoPage(O,!1);break;case"cur":Y.vm.setCurIndex(O,!1);break;case"slt":Y.vm.setSltPages(O,!1)}})}),this.onM(It,function(b,A,O,Y,re){var he,Oe=d._tabMng.getTab(A.uid);Oe&&(he=Oe.uid,Oe.vws.forEach(function(ye){if(b!==ye){var ct=d.uidViewer(ye);if(ct)switch(O){case"switch":ct.vm.switchPage(Y,re,!1,he);break;case"move":ct.vm.movePage(Y,re,!1,he);break;case"reorder":ct.vm.reorderPage(Y,re,!1,he)}}}),Oe[O](Y,re),d.emit(It,A,O,Y,re))}),this.onM(Kt,function(b,A,O){d.emit(Kt,A,O),O.forEach(function(Y){d._tabMng.tabs.forEach(function(re){re.remove(Y)})}),d.vws.forEach(function(Y){Y.uid!==b&&Y.vm.remove(O,!1,A.uid)})}),this.onM(tn,function(b,A){var O=A.uid,Y=d._db.getMid(O);if(Y){if(d._loadMinPic(O),Y.vws.length){var re=d.offScreenCanvas;if(re.pageUid===O)switch(b){case"rotate":re.rotate(A.rotateObj,A.page,A.interlayerData);break;case"flip":re.flip(A.flipObj,A.page,A.interlayerData);break;case"crop":re.crop(A.cropObj,A.page);break;case"erase":re.erase(A.eraseObj,A.page);break;case"changePageSize":re.changePageSize(A.changeSizeObj,A.page);break;case"reset":re.reset()}}Y.vws.forEach(function(he){(he=d.uidViewer(he))&&he.vm.uidIdx(O)===he.vm.getCurIndex()&&he.vm.render()})}}),this.onM(Bt,function(b,A){(b=d._tabMng.getTab(b))&&b.removeViewer(A)})},z._getGroup=function(d){var b=this,A=[];return(d=this.uidViewer(d))&&this._group[d.group].forEach(function(O){(O=b.uidViewer(O))&&A.push(O)}),A},z._loadMinPic=function(d){for(var b=this._q,A=-1,O=0;O<this.loader.length;O++)if(!this.loader[O]){A=O;break}-1===A?-1===b.indexOf(d)&&b.push(d):(this.loader[A]=!0,this.runLoader(d,A))},z._convertData=function(d){return new Promise(function(b,A){var O;f(d)?b(d):((O=new XMLHttpRequest).onload=function(){var Y=U.createURL(O.response);b(Y)},O.open("GET",d,!0),O.responseType="blob",O.send())})},z.runLoader=function(d,b){var A,O,Y,re,he,Oe=this,ye=this._db.getMid(d);ye&&ye.minData&&ye.vws.forEach(function(ct){var gt=-1;Oe.vws.some(function(wt,Jt){if(wt.uid===ct)return gt=Jt,!0}),-1!==gt&&Oe.vws[gt].vm.showThbItem(d)}),!ye||ye.activeMin||ye.minData?(A=this._q.shift())?this.runLoader(A,b):this.loader[b]=!1:(O=!1,Y=D(11),ye.activeMin=!0,ye.minTask=Y,re=new Promise(function(ct,gt){ye.oriData?(O=!0,ct(ye.oriData)):Oe._db.getDataAsync(d).then(function(wt){l(wt.oriData)&&(O=!0),10===document.documentMode?Oe._convertData(wt.oriData).then(function(Jt){ct(Jt)}):(wt=U.createURL(wt.oriData),ct(wt))}).catch(function(wt){gt(wt)})}),he=new Promise(function(ct,gt){re.then(function(wt){var Jt=new Image;Oe._cors&&(Jt.crossOrigin="anonymous"),Jt.src=wt,Jt.onload=function(){var Xt=Oe._db.getMid(d);if(!Xt||Xt.minTask!==Y)return Xt?.oriData!==wt&&U.revokeObjectURL(wt),gt("task cancel or page does not exist");Jt.onload=null,Jt.onerror=null,ct(Jt)},Jt.onerror=function(Xt){return Jt.onload=null,Jt.onerror=null,gt(Xt)}}).catch(function(wt){gt(wt)})}),new Promise(function(ct,gt){he.then(function(wt){var Jt=Oe._db.getMid(d);if(!Jt||Jt.minTask!==Y)return Jt?.oriData!==wt.src&&U.revokeObjectURL(wt.src),gt("task cancel or page does not exist");Oe.offScreenCanvas||gt("OffScreenCanvas is disposed");var Xt=Oe.offScreenCanvas;if(Xt.isDisposed)return gt("The offScreenCanvas is disposed.");Xt.render({viewerUid:"",pageUid:d,isMin:!0,img:wt,page:null,midData:Jt});var an=1,vn=(1<=(vn=wt.naturalWidth/wt.naturalHeight)&&Xt.mainWidth>Oe._minW?an=Oe._minW/Xt.mainWidth:vn<1&&Xt.mainHeight>Oe._minH&&(an=Oe._minH/Xt.mainHeight),Xt.mainWidth*an),Jn=Xt.mainHeight*an,kn=Oe.canvas,hn=kn.getContext("2d");kn.width!==vn&&(kn.width=vn),kn.height!==Jn&&(kn.height=Jn),vn=Xt.mainCanvas.width*(Jn=vn/Xt.mainWidth),Jn*=Xt.mainCanvas.height,hn.drawImage(Xt.mainCanvas,0,0,Math.floor(vn),Math.floor(Jn)),(Jt.overlays||[]).forEach(function(Qn){hn.save(),hn.globalAlpha=Qn.opacity,hn.fillStyle=Qn.color,hn.fillRect(Qn.left*an,Qn.top*an,Qn.width*an,Qn.height*an),hn.restore()}),!O&&wt.src&&(U.revokeObjectURL(wt.src),wt.src=""),kn.toBlob(function(Qn){var Cr=Oe._db.getMid(d);Cr&&Cr.minTask===Y||gt("task cancel or page does not exist"),ct(Qn)},"image/png")}).catch(function(wt){gt(wt)})}).then(function(gt){gt=U.createURLWithType(gt);var wt=Oe._db.getMid(d);wt&&wt.minTask===Y&&(wt.activeMin=!1,l(wt?.minData)&&""!=wt?.minData&&U.revokeObjectURL(wt.minData),wt.minData=gt.data,wt.vws.forEach(function(Jt){var Xt=-1;Oe.vws.some(function(an,kn){if(an.uid===Jt)return Xt=kn,!0}),-1!==Xt&&Oe.vws[Xt].vm.showThbItem(d)})),(gt=Oe._q.shift())?Oe.runLoader(gt,b):Oe.loader[b]=!1}).catch(function(ct){var gt=Oe._db.getMid(d);gt&&gt.minTask===Y&&(gt.activeMin=!1),(gt=Oe._q.shift())?Oe.runLoader(gt,b):Oe.loader[b]=!1}))},z._open=function(d,b,A){var O=this,he=d.uid,Y=d.chs.slice(),re=this._tabMng.getTab(he);if((re=re||this._tabMng.addTab({uid:he,name:d.name,type:b,chs:[]},A)).chs=Y,he=null,A){if(0===(he=this._getGroup(A).map(function(Oe){return Oe.uid})).length)return void this._err(g)}else he=re.vws;he.map(function(Oe){return O.uidViewer(Oe)}).forEach(function(Oe){var ye;Oe&&(re.addViewer(Oe.uid),re.chs.forEach(function(ct){(ct=O._db.getMid(ct))&&ct.addViewer(Oe.uid)}),(ye=null==(ye=Oe.vm)?void 0:ye.tabHandler(re,null,!0))&&Oe.vm.showTab(ye,"filter"))})},z._load=function(d,b,A,O){var Y=this,re=d.uid,he=d.chs.slice(),Oe=(Oe=this._tabMng.getTab(re))||this._tabMng.addTab({uid:re,name:d.name,type:b,chs:[]});this.vws.forEach(function(ye){Oe.addViewer(ye.uid)}),Oe.chs=he,Oe.vws.forEach(function(ye){var ct,gt=Y.uidViewer(ye);gt&&(Oe.chs.forEach(function(wt){(wt=Y._db.getMid(wt))&&wt.addViewer(gt.uid)}),ye=null,"all"!==Oe.type.toLowerCase()&&(ye=A),(ye=null==(ct=gt.vm)?void 0:ct.tabHandler(Oe,ye,!1))&&gt.vm.showTab(ye))})},z.bindViewUi=function(d){if(!v(d))return this.emit(Ve,lt),!1;this._ViewUi=d,this.vws.forEach(function(b){b.ViewUi=d})},z.createViewer=function(he,b){var A=this,O=(void 0===he&&(he={}),null),Y=[],re=null;if(b){if(!(re=this.uidViewer(b)))return this._err(g),null;Y=this._group[O=re.group]}else O=D(11),this._group[O]=Y;T(he,b=S(this._defaultConfig)),he={config:b,viewUi:this._ViewUi,workerBlobURL:this._hermiteWorkerUrl,scrollbarWidth:this._scrBarW,groupUid:O,defaultConfig:this._defaultConfig,mPub:this._mPub.getPublishSubscribe(),focus:this._focus,db:this._db,offScreenCanvas:this.offScreenCanvas,saveCanvas:this.saveCanvas};var Oe=(b=new ei(he)).uid;return this.vws.push(b),Y.push(Oe),re&&(O=re.vm.getCurTab())&&(O.chs.forEach(function(ye){(ye=A._db.getMid(ye.uid))&&ye.addViewer(Oe)}),(he=this._tabMng.getTab(O.uid)).vws.push(Oe),(Y=b.vm.tabHandler(he,null,!0))&&(Y.setCur(O.cur),Y.setSlt(O.slt.slice()),b.vm.showTab(Y,"filter"))),this.emit(bt,"Invoking ViewControl#createViewer."),b},z.removeViewer=function(d){var b=this;if(!d)return!1;var A=d,O=null,Y=null;f(d)&&(A=d.uid,O=d);for(var re,he,Oe=0;Oe<this.vws.length;Oe++)if(this.vws[Oe].uid===A){O=this.vws[Oe],Y=Oe;break}if(null===Y)return!1;for(he in(d=this._group[O.group])&&(re=d.indexOf(A),d.splice(re,1),0===d.length&&delete this._group[O.group]),null!=(re=this._tabMng)&&null!=(d=re.tabs)&&d.forEach(function(ye){ye.removeViewer(O.uid)&&ye.chs.forEach(function(ct){(ct=b._db.getMid(ct))&&ct.rmViewer(O.uid)})}),O.unbindView(),O.dispose(),O)O[he]=null,delete O[he];return this.vws.splice(Y,1),this.emit(bt,"Invoking ViewControl#removeViewer."),!0},z.uidViewer=function(d){if(!d)return this.vws[0]||null;for(var b=0,A=this.vws.length;b<A;b++){var O=this.vws[b];if(O.uid===d)return O}return null},z.idxViewer=function(d){return d>=this.vws.length||d<0?null:this.vws[d]},z.dispose=function(){var d,b=this;this.isDisposed||(ge.prototype.dispose.call(this),null!=(d=this.vws)&&d.forEach(function(A){b.removeViewer(A)}),this.vws=null,this.offScreenCanvas.dispose(),this.offScreenCanvas=null,this.canvas.width=1,this.canvas.height=1,this.canvas.getContext("2d").clearRect(0,0,1,1),this.canvas=null,this.saveCanvas.width=1,this.saveCanvas.height=1,this.saveCanvas.getContext("2d").clearRect(0,0,1,1),(this.saveCanvas=null)!=(d=this._mPub)&&d.dispose(),(this._mPub=null)!=(d=this._tabMng)&&d.dispose(),this._tabMng=null,this._hermiteWorkerUrl&&(U.revokeObjectURL(this._hermiteWorkerUrl),this._hermiteWorkerUrl=null),this.isDisposed=!0)},z._getScrBarW=function(){var d=document.createElement("div"),b=document.createElement("div"),A=(d.appendChild(b),d.setAttribute("style","width:180px;height:180px;position:absolute;overflow:auto;"),b.setAttribute("style","width:200px;height:200px;"),document.body.appendChild(d),d.offsetWidth-d.clientWidth);document.body.removeChild(d),this._scrBarW=A,this.vws.forEach(function(O){O.vm.setScrBarW(A)})},z.initWorkerUlr=function(){this._hermiteWorkerUrl=U.createURL(new Blob(["("+function(){onmessage=function(b){var A=b.data.core,O=b.data.width_source,Y=b.data.height_source,re=b.data.width,he=b.data.height,Oe=null;try{Oe=new Uint8ClampedArray(b.data.source)}catch{Oe=new Uint8Array(b.data.source)}var ye=re*he*4,ct=new ArrayBuffer(ye),gt=null;try{gt=new Uint8ClampedArray(ct,0,ye)}catch{gt=new Uint8Array(ct,0,ye)}for(var wt=0;wt<he;wt++)for(var Jt=wt*Y/he,Xt=Math.floor(Jt),an=1-(Jt-Xt),kn=Xt,hn=(wt+1)*Y/he,vn=hn-(Xt=Math.floor(hn-1e-5)),Jn=Xt,Qn=wt*re*4,Cr=0;Cr<re;Cr++){var yr=1-((B=Cr*O/re)-(j=Math.floor(B))),Nr=j,cr=(j=(Cr+1)*O/re)-(k=Math.floor(j-1e-5)),Ur=k,oi=0,ai=0,Wr=0,gn=0,un=(kn+1)*O*4+4*Nr,J=void 0,ne=void 0;for(J=kn+1;J<Jn;++J)oi+=Oe[un+2]*yr*255,ai+=Oe[un+1]*yr*255,Wr+=Oe[un]*yr*255,gn+=255*yr,un+=4*O;var P=(kn+1)*O*4+4*Ur;for(J=kn+1;J<Jn;++J)oi+=Oe[P+2]*cr*255,ai+=Oe[P+1]*cr*255,Wr+=Oe[P]*cr*255,gn+=255*cr,P+=4*O;var E=kn*O*4+4*(Nr+1);for(ne=Nr+1;ne<Ur;++ne)oi+=Oe[E+2]*an*255,ai+=Oe[E+1]*an*255,Wr+=Oe[E]*an*255,gn+=255*an,E+=4;var x=Jn*O*4+4*(Nr+1);for(ne=Nr+1;ne<Ur;++ne)oi+=Oe[x+2]*vn*255,ai+=Oe[x+1]*vn*255,Wr+=Oe[x]*vn*255,gn+=255*vn,x+=4;for(J=kn+1;J<Jn;++J){var R=J*O*4+4*(Nr+1);for(ne=Nr+1;ne<Ur;++ne)oi+=255*Oe[R+2],ai+=255*Oe[R+1],Wr+=255*Oe[R],gn+=255,R+=4}oi+=Oe[2+(k=kn*O*4+4*Nr)]*(an*yr)*255,ai+=Oe[1+k]*(an*yr)*255,Wr+=Oe[k]*(an*yr)*255,gn+=an*yr*255,oi+=Oe[2+(k=kn*O*4+4*Ur)]*(an*cr)*255,ai+=Oe[1+k]*(an*cr)*255,Wr+=Oe[k]*(an*cr)*255,gn+=an*cr*255,oi+=Oe[2+(k=Jn*O*4+4*Nr)]*(vn*yr)*255,ai+=Oe[1+k]*(vn*yr)*255,Wr+=Oe[k]*(vn*yr)*255,gn+=vn*yr*255,oi+=Oe[2+(k=Jn*O*4+4*Ur)]*(vn*cr)*255,ai+=Oe[1+k]*(vn*cr)*255,Wr+=Oe[k]*(vn*cr)*255;var k=(gn+=vn*cr*255)/((j-B)*(hn-Jt)),j=0,B=0,q=0;0!=k&&(j=oi/gn,B=ai/gn,q=Wr/gn),j+=.5,B+=.5,q+=.5,gt[Qn]=Math.floor(q),gt[++Qn]=Math.floor(B),gt[++Qn]=Math.floor(j),gt[++Qn]=255,Qn++}ct={core:A,target:gt,taskUid:b.data.taskUid};try{postMessage(ct,[gt.buffer])}catch{postMessage(ct,null)}}}.toString()+")()"],{type:"application/javascript"}))},z.on=function(d,b){ge.prototype._on.call(this,d,b)},z.emit=function(d){for(var b,A=arguments.length,O=new Array(1<A?A-1:0),Y=1;Y<A;Y++)O[Y-1]=arguments[Y];(b=ge.prototype._emit).call.apply(b,[this,d].concat(O))},z.onM=function(d,b){this._mPub._on(d,b)},z.emitM=function(d){for(var b,A=arguments.length,O=new Array(1<A?A-1:0),Y=1;Y<A;Y++)O[Y-1]=arguments[Y];(b=this._mPub)._emit.apply(b,[d].concat(O))},z._err=function(d){this.emit(Ve,d)},z._ok=function(){this.emit(Ve,et)};var Mr,Bi,To,mr,Wa,ie,me,oe,ge,z,dt=nr,ft=(u(bn,oe=H),(z=bn.prototype).createViewer=function(d,b){return this._vwMng.createViewer(d=void 0===d?{}:d,b)},z.getViewerByUid=function(d){return this._vwMng.uidViewer(d)},z.getViewerByIndex=function(d){return this._vwMng.idxViewer(d)},z.removeViewer=function(d){return this._vwMng.removeViewer(d)},z.getViewerList=function(){return this._vwMng.vws.slice()},z.bindViewUiConstructor=function(d){return this._vwMng.bindViewUi(d)},z.dispose=function(){var d;oe.prototype.dispose.call(this),null!=(d=this._vwMng)&&d.dispose(),this._vwMng=null},bn),Et=(u(pn,me=_t),(z=pn.prototype).removeChildren=function(d,b){var A=this.chs.length;if(A){for(var O=0;O<A;O++){var Y=this.chs[O];if(Y.name===d&&Y.type===b)return this.chs.splice(O,1)[0]}return!1}return!1},z.setName=function(d){this.name=d},z.reorder=function(d){return("file"===this.type||"all"===this.type)&&me.prototype.reorder.call(this,d)},pn),Yt=(u(cn,ie=H),(z=cn.prototype).dispose=function(){ie.prototype.dispose.call(this)},z._initEvent=function(){var d=this;ie.prototype._on.call(this,st,function(b,A,O){var Y=O,re=d.findChild(d.dfNode,b);re||(re=d.createFile(b),ie.prototype._emit.call(d,At,d.dfNode)),A.forEach(function(he){void 0!==O?re.insert(he.uid,Y++):re.append(he.uid),d.all.append(he.uid)}),ie.prototype._emit.call(d,ot,re,"file",O,d.open),ie.prototype._emit.call(d,ot,d.all,"all",O,!1)}),ie.prototype._on.call(this,It,function(b,A,O,Y){var re=null;if("file"===b.type){if(!(re=d._find(b.uid,d.root)))return}else{if("all"!==b.type)return;re=d.all}re[{switch:"switch",move:"move",reorder:"reorder"}[A]](O,Y)}),ie.prototype._on.call(this,Kt,function(b,A){A.forEach(function(O){d.all.remove(O),d._rmPage(O,d.root)})})},z._rmPage=function(d,b){var A=this;if(!(b.chs.length<1))return b.chs[0].uid?void b.chs.forEach(function(O){A._rmPage(d,O)}):b.remove(d)},z.createFile=function(d){var b=this.dfNode||this.root,A=this.findChild(b,d);return A&&"file"===A.type?ie.prototype._emit.call(this,Ve,qt):(A=new Et({uid:D(11),name:d,type:"file",parent:b,chs:[]}),this.curNode.chs.push(A),ie.prototype._emit.call(this,Ve,et)),A},z.openAll=function(d){return ie.prototype._emit.call(this,Lt,this.all,"all",d),this.all.chs.slice()},z.openFile=function(d,b){return(d=this.findChild(this.dfNode,d))&&"file"===d.type?(ie.prototype._emit.call(this,Lt,d,"file",b),ie.prototype._emit.call(this,Ve,et),d.chs.slice()):(ie.prototype._emit.call(this,Ve,wn),!1)},z.removeFile=function(d){for(var b=this.dfNode.chs,A=b.length-1;0<=A;A--)if(b[A].name===d)return ie.prototype._emit.call(this,Nt,b[A]),b.splice(A,1),ie.prototype._emit.call(this,Ve,et),!0;return ie.prototype._emit.call(this,Ve,wn),!1},z.renameFile=function(d,b){var A=this.findChild(this.dfNode,d),O=this.findChild(this.dfNode,b);return A?O?(this._err(qt),!1):(A.name=b,O=A.chs.slice(),ie.prototype._emit.call(this,Pt,d,b,O,A.uid),this._ok(),!0):(this._err(wn),!1)},z.getCurrentFileList=function(){return this.dfNode.chs.slice()},z._getSpiltIndex=function(d){for(var b=d.length,A=0;A<b;A++)if("folder"!==d[A].type)return A;return b},z.findChild=function(d,b){return 0<=d.chs.length&&(d=d.chs.filter(function(A){return A.name===b})).length?d[0]:null},z._find=function(d,b){for(var A=b.chs,O=A.length,Y=0;Y<O;Y++){if(A[Y].uid===d)return A[Y];if(A[Y].children){var re=this._find(d,A[Y]);if(re)return re}}},z._err=function(d){ie.prototype._emit.call(this,Ve,d)},z._ok=function(){ie.prototype._emit.call(this,Ve,et)},cn),$t=((z=ki.prototype).dispose=function(){var d;null!=(d=this._tree)&&d.dispose(),this._tree=null},z.setDefaultFolder=function(d){this._tree.dfNode=d},z.openAll=function(){return this._tree.openAll()},z.getAllContents=function(){return this._tree.all.chs.slice()},z.openFile=function(d,b){return this._tree.openFile(d,b)},z.createFile=function(d){return this._tree.createFile(d)},z.removeFile=function(d){return this._tree.removeFile(d)},z.getCurrentFileList=function(){return this._tree.getCurrentFileList()},z.renameFile=function(d,b){return this._tree.renameFile(d,b)},ki),Zt=(u(jo,Wa=_t),jo),Dn=(u(Mo,mr=H),(z=Mo.prototype).dispose=function(){mr.prototype.dispose.call(this),this.tags=[]},z._initEvent=function(){var d=this;mr.prototype._on.call(this,en,function(b){var A=!1,O=b.data;O.tags||(O.tags=[]),d.dfName&&-1===O.tags.indexOf(d.dfName)&&O.tags.push(d.dfName),O.tags.forEach(function(Y){d.addTag(Y)&&(A=!0),(Y=d.getTag(Y)).append(b.uid),mr.prototype._emit.call(d,ot,Y,"tag",null,null,!1)}),A&&mr.prototype._emit.call(d,pe,d.getTagList())}),mr.prototype._on.call(this,It,function(b,A,O,Y){"tag"===b.type&&(b=d.uidTag(b.uid))&&b[{switch:"switch",move:"move",reorder:"reorder"}[A]](O,Y)}),mr.prototype._on.call(this,Kt,function(b,A){d.getTagList().forEach(function(O){A.forEach(function(Y){O.remove(Y)})})})},z.openTag=function(d,b){var A=this.getTag(d);return A||(this._err(Ln),A=this.emptyItem),this.setDefaultTag(d),this.sltUid=A.uid,mr.prototype._emit.call(this,Lt,A,"tag",b),this._ok(),A.chs.slice()},z.getCurTag=function(){return this.uidTag(this.sltUid)},z.addTag=function(d,b){return-1===this.checkTag(d)&&(d=new Zt({name:d,chs:b||[]}),this.tags.push(d),!0)},z.removeTag=function(d){var b=this.checkTag(d);return-1!==b&&(d===this.dfName&&(this.dfName=null,this.sltUid=null),this.tags.splice(b,1),!0)},z.emptyTag=function(d){return!!(d=this.getTag(d))&&(d.clear(),!0)},z.clear=function(){return this.tags=[],!0},z.getTagContents=function(d){return(d=this.getTag(d))?d.chs.slice():null},z.getDefaultTag=function(){return this.dfName},z.setDefaultTag=function(d){if(!d)return this.dfName=null,!(this.dfUid=null);var b=this.checkTag(d);return-1!==b&&(b=this.tags[b],this.dfName=d,this.dfUid=b.uid,!0)},z.renameTag=function(d,b){if(!l(d)||!l(b))return this._err(lt),!1;var A=this.getTag(b),O=this.getTag(d);return O?A?(this._err(Cn),!1):(O.name=b,A=O.chs.slice(),mr.prototype._emit.call(this,We,d,b,A,O.uid),this._ok(),!0):(this._err(Ln),!1)},z.checkTag=function(d){for(var b=this.tags.length,A=0;A<b;A++)if(this.tags[A].name===d)return A;return-1},z.getTagList=function(){return this.tags},z.getTag=function(d){return-1===(d=this.checkTag(d))?null:this.tags[d]},z.uidTag=function(d){for(var b=this.tags.length,A=0;A<b;A++)if(this.tags[A].uid===d)return this.tags[A];return null},z._err=function(d){mr.prototype._emit.call(this,Ve,d)},z._ok=function(){mr.prototype._emit.call(this,Ve,et)},Mo),er=((_t=Go.prototype).dispose=function(){var d;null!=(d=this._mng)&&d.dispose(),this._mng=null},_t.getTagList=function(){var d=[];return this._mng.tags.forEach(function(b){b={name:b.name,uids:b.chs.slice()},d.push(b)}),d},_t.addTag=function(d){return l(d)?!!this._mng.addTag(d)||(this._err(Cn),!1):(this._err(lt),!1)},_t.removeTag=function(d){var b=this,A=this._mng.getTag(d);return A?(A.chs.slice().forEach(function(O){b.removePageTag(O,d)}),this._ok(),this._mng.removeTag(d)):(this._err(Ln),!1)},_t.emptyTag=function(d){if(!l(d))return this._err(lt),!1;var b=this._mng.uidTag(d);if(!d)return this._err(Ln),!1;var A=b.chs.slice();return this._emit(Ae,d,A,b.uid),this._ok(),this._mng.emptyTag(d)},_t.openTag=function(d,b){return this._mng.openTag(d,b)},_t.getCurrentTag=function(){return this._mng.getCurTag()},_t.getTagContents=function(d){return this._mng.getTagContents(d)},_t.getDefaultTag=function(){return this._mng.getDefaultTag()},_t.setDefaultTag=function(d){return this._mng.setDefaultTag(d)},_t.addPageTag=function(d,b){l(d)&&l(b)||this._err(lt);var A=this._mng.getTag(b);return A?A.append(d)?(this._emit(_e,d,b,A.uid),this._emit(pe,this._mng.tags),this._ok(),!0):(this._err(Cn),!1):(this._err(Ln),!1)},_t.removePageTag=function(d,b){var A=this;if(l(d)||this._err(lt),void 0===b)this._mng.getTagList().forEach(function(Y){Y.remove(d),A._emit(Ee,d,Y.name,Y.uid)});else{l(b)||this._err(lt);var O=this._mng.getTag(b);if(!O)return this._err(Ln),!1;if(!O.remove(d))return this._err(Le),!1;this._emit(Ee,d,b,O.uid)}return b=this._mng.getTagList(),this._emit(pe,b),!0},_t.renameTag=function(d,b){return this._mng.renameTag(d,b)},_t._emit=function(d){for(var b,A=arguments.length,O=new Array(1<A?A-1:0),Y=1;Y<A;Y++)O[Y-1]=arguments[Y];(b=this._mng)._emit.apply(b,[d].concat(O))},_t._err=function(d){this._emit(Ve,d)},_t._ok=function(){this._emit(Ve,et)},Go),Mn=((z=aa.prototype).addDataSync=function(d,b){return!this._check(d)&&(this._d[d]=b,!0)},z.getDataSync=function(d){return this._d[d]},z.removeDataSync=function(d){return!!this._check(d)&&(delete this._d[d],!0)},z.updateDataSync=function(d,b){return!!this._check(d)&&(this._d[d]=b,!0)},z._check=function(d){return void 0!==this._d[d]},aa),sr=((_t=po.prototype).createDatabase=function(d,b){this._d[d]={},this._d[d][b]={}},_t.addDataAsync=function(d,b,A,O){var Y=this;return new Promise(function(re,he){return Y._checkDB(A)?Y._checkTable(A,O)?Y._checkId(A,O,d)?he("The ".concat(d," already exists.")):(Y._d[A][O][d]=b,void re("Save ".concat(d," to database successful."))):he(Y._erMsg(1,O)):he(Y._erMsg(0,A))})},_t.getDataAsync=function(d,b,A){var O=this;return new Promise(function(Y,re){return O._checkDB(b)?O._checkTable(b,A)?O._checkId(b,A,d)?void Y(O._d[b][A][d]):re(O._erMsg(2,d)):re(O._erMsg(1,A)):re(O._erMsg(0,b))})},_t.removeDataAsync=function(d,b,A){var O=this;return new Promise(function(Y,re){return O._checkDB(b)?O._checkTable(b,A)?(delete O._d[b][A][d],void Y("Remove ".concat(d," successful."))):re(O._erMsg(1,A)):re(O._erMsg(0,b))})},_t.updateDataAsync=function(d,b,A,O){var Y=this;return new Promise(function(re,he){return Y._checkDB(A)?Y._checkTable(A,O)?Y._checkId(A,O,d)?(Y._d[A][O][d]=b,void re("Update ".concat(d," successful."))):he(Y._erMsg(2,d)):he(Y._erMsg(1,O)):he(Y._erMsg(0,A))})},_t._checkDB=function(d){return void 0!==this._d[d]},_t._checkTable=function(d,b){return void 0!==this._d[d][b]},_t._checkId=function(d,b,A){return void 0!==this._d[d][b][A]},_t._erMsg=function(d,b){return"The ".concat(["database","table","item"][d]," ").concat(b," does not exist.")},po),ti=((z=ya.prototype).addDataAsync=function(d,b,A,O){return this.DBMng.addDataAsync(d,b,A||this.databaseName,O||this.documentTableName)},z.getDataAsync=function(d,b,A){return this.DBMng.getDataAsync(d,b||this.databaseName,A||this.documentTableName)},z.removeDataAsync=function(d,b,A){return this.DBMng.removeDataAsync(d,b||this.databaseName,A||this.documentTableName)},z.updateDataAsync=function(d,b,A,O){return this.DBMng.updateDataAsync(d,b,A||this.databaseName,O||this.documentTableName)},z.addMid=function(d,b){return this.middle.addDataSync(d,b)},z.getMid=function(d){return this.middle.getDataSync(d)},z.removeMid=function(d){return this.middle.removeDataSync(d)},z.updateMid=function(d,b){return this.middle.updateDataSync(d,b)},z.addMetadata=function(d,b){return this.metadataMng.addDataSync(d,b)},z.getMetadata=function(d){return this.metadataMng.getDataSync(d)},z.removeMetadata=function(d){return this.metadataMng.removeDataSync(d)},z.updateMetadata=function(d,b){return this.metadataMng.updateDataSync(d,b)},ya),Rr=(u(ii,To=H),ii.prototype.updateErrorMessage=function(d){80003!==d.code&&(this.errorMessage=d.message,this.errorCode=d.code)},ii),Co=(u(Eo,Bi=H),(_t=Eo.prototype).updateLogMessage=function(d){var b;this.allowLog&&null!=this&&null!=(b=this.logs)&&b.push(null==this?void 0:this._formatLog(d))},_t._formatLog=function(d){return function(b){var A,O=new Date,Y={"M+":O.getMonth()+1,"d+":O.getDate(),"h+":O.getHours(),"m+":O.getMinutes(),"s+":O.getSeconds(),"q+":Math.floor((O.getMonth()+3)/3),S:O.getMilliseconds()};for(A in/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(O.getFullYear()+"").substr(4-RegExp.$1.length))),Y)new RegExp("("+A+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?Y[A]:("00"+Y[A]).substr((""+Y[A]).length)));return b}("yyyy-MM-dd hh:mm:ss")+" DVS: "+d},_t.clear=function(){this.logs=[]},_t.dispose=function(){Bi.prototype.dispose.call(this),this.logs=null},Eo);function qr(d){var b,A,O,Y,re,he=Mr.call(this,new Z)||this;return he.DataControl=null,he.ViewControl=null,he.File=null,he.Tag=null,he.Annotation=null,he.Error=null,he.Log=null,he.uid=D(11),Array.from||(Array.from=(b=Object.prototype.toString,A=function(ye){return"function"==typeof ye||"[object Function]"===b.call(ye)},O=function(ye){return ye=Number(ye),isNaN(ye)?0:0!==ye&&isFinite(ye)?(0<ye?1:-1)*Math.floor(Math.abs(ye)):ye},Y=Math.pow(2,53)-1,re=function(ye){return ye=O(ye),Math.min(Math.max(ye,0),Y)},function(Oe){var ye=Object(Oe);if(null==Oe)throw new TypeError("Array.from requires an array-like object - not null or undefined");var ct,gt=1<arguments.length?arguments[1]:void 0;if(void 0!==gt){if(!A(gt))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(ct=arguments[2])}for(var wt,Jt=re(ye.length),Xt=A(this)?Object(new this(Jt)):new Array(Jt),an=0;an<Jt;)wt=ye[an],Xt[an]=gt?void 0===ct?gt(wt,an):gt.call(ct,wt,an):wt,an+=1;return Xt.length=Jt,Xt})),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(Oe,ye){if(null==Oe)throw new TypeError("Cannot convert undefined or null to object");for(var ct=Object(Oe),gt=1;gt<arguments.length;gt++){var wt=arguments[gt];if(null!=wt)for(var Jt in wt)Object.prototype.hasOwnProperty.call(wt,Jt)&&(ct[Jt]=wt[Jt])}return ct},writable:!0,configurable:!0}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(Oe,ye,ct){for(var gt=atob(this.toDataURL(ye,ct).split(",")[1]),wt=gt.length,Jt=new Uint8Array(wt),Xt=0;Xt<wt;Xt++)Jt[Xt]=gt.charCodeAt(Xt);Oe(new Blob([Jt],{type:ye||"image/png"}))}}),he.Log=new Co(he._oPub),he._log("DVS"),he._log("db"),he._db=new ti,he._log("db",!1),he._log("Error"),he.Error=new Rr(he._oPub),he._log("Error",!1),he._log("Tag"),he.Tag=new er({pubsub:he._oPub}),he._log("Tag",!1),he._log("File"),he.File=new $t({pubsub:he._oPub}),he._log("File",!1),he._log("ViewControl"),he.ViewControl=new ft(d,he._oPub,he._db,he.uid),he._log("ViewControl",!1),he._log("DataControl"),he.DataControl=new ue(d,he._oPub,he._db),he._log("DataControl",!1),he._log("DVS",!1),he}function Eo(d){return(d=Bi.call(this,d)||this).logs=[],d.allowLog=!0,d.logs.push(d._formatLog("Initialize DVS object.")),d.logs.push(d._formatLog("Initialize DVS object.")),d._on(bt,d.updateLogMessage.bind(zt(d))),d.logs.push(d._formatLog("Complete Log object initialization.")),d}function ii(d){return(d=To.call(this,d)||this).errorMessage="ok",d.errorCode=0,d._on(Ve,d.updateErrorMessage.bind(zt(d))),d}function ya(){this.databaseName="dvsDb",this.documentTableName="dvsDoc",this.imageTableName="dvsImage",this.annotationTableName="dvsAnno",this.middle=new Mn,this.metadataMng=new Mn,this.DBMng=new sr(this.databaseName,this.documentTableName)}function po(d,b){this._d={},this.createDatabase(d,b)}function aa(){this._d={}}function Go(d){this._mng=new Dn(d.pubsub)}function Mo(d){return(d=mr.call(this,d)||this).tags=[],d.dfName=null,d.dfUid=null,d.sltUid=null,d.emptyItem=new Zt({name:"defaultTag",chs:[]}),d._initEvent(),d}function jo(d){var b=Wa.call(this,d)||this;return b.name=d.name,b.chs=d.chs||[],b.uid=d.uid||D(11),b}function ki(d){this.autoOpen=!0,this._tree=new Yt(d.pubsub)}function cn(d){return(d=ie.call(this,d)||this).all=null,d.open=!0,d.dfNode=null,d.root=new Et({uid:D(11),name:"root",type:"root",parent:null,chs:[]}),d.dfNode=d.root,d.all=new Et({uid:D(11),name:"All",type:"file"}),d.curNode=d.root,d.selectedNodeId=null,d._initEvent(),d}function pn(d){var b=me.call(this,d)||this;return b.name=d.name,b.type=d.type,b.parent=d.parent||null,b}function bn(d,b,A,O){var Y=oe.call(this,b)||this;return Y._vwMng=null,Y._vwMng=new dt(d,b,A,O),Y}function nr(d,b,A,O){return(b=ge.call(this,b)||this)._defaultConfig={container:"",ifAllowSlide:!0,useWebWorker:!0,zoomInDelta:1.2,zoomOutDelta:1.2,zoomDelta:.05,fitType:"window",tabMode:"single",displayMode:"single",operationMode:"0",zooming:!0,scrollX:!0,scrollY:!0,minZoom:.01,maxZoom:8,keepZoom:!0,showLatestPage:!0,pageMargin:10,uiConfig:{toolbars:{header:!0,topMenu:!0,asideMenu:!1,bottomMenu:!0},groups:{topMenuRight:{visibility:!0,location:"topMenu",sequence:1}},buttons:{},buttonResize:{ifResize:!1,minSize:24,maxSize:26},tipsConfig:{},thumbnail:{size:180,mouseShape:"pointer",scrollDirection:"vertical",sequence:-1,location:"horizontal",showThumbnail:!0,showPageNumber:!1,showRemoveBtn:!1,fullThumbnail:!1,allowDragDrop:!0,allowResizing:!1,allowKeyboardControl:!1,rows:4,columns:1,background:"rgba(67,66,70,1)",border:"1px solid rgba(27,27,29,1)",pageBackground:"rgba(0,0,0,0)",pageBorder:"1px solid rgba(128,128,128,1)",selectedPageBackground:"rgba(127,133,251,1)",selectedPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgba(196,250,248,1)",hoverPageBorder:"1px solid rgba(255,255,0,1)",placeholderBackground:"rgba(255,192,203,1)",pageMargin:10,checkbox:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:2,borderRadius:0,borderColor:"#000",opacity:.5,left:"",top:"",right:"",bottom:"",checkMarkLineWidth:2,checkMarkColor:"#000"},pageNumber:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:2,borderRadius:0,borderColor:"#000",opacity:.5,color:"#000",fontSize:12,fontFamily:"sans-serif",left:"",top:"",right:0,bottom:0}},canvasConfig:{canvasMouseShape:"default",canvasBackground:"#434246",canvasBorder:"1px solid #1b1b1d",pageBorder:"1px solid rgba(128,128,128,1)",pageMargin:"10",pageBackground:"rgba(0,0,0,0)",selectedPageBorder:"1px solid rgba(255,0,0,1)",selectedPageBackground:"rgba(127,133,251,1)",hoverPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgb(196,250,248)",placeholderBackground:"pink",allowPageDragging:!0,allowKeyboardControl:!1,showPageNumber:!1,selectedBoxLineColor:"rgba(0,0,0,1)",autoChangeIndex:!1,scrollDirection:"vertical",checkbox:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:2,borderRadius:0,borderColor:"#000",opacity:.5,left:0,top:0},pageNumber:{visibility:"hidden",width:24,height:24,background:"#fff",borderWidth:1,borderRadius:0,borderColor:"#000",opacity:.5,color:"#000",fontSize:12,fontFamily:"sans-serif",textAlign:"center",textBaseline:"middle",left:"",top:"",right:0,bottom:0},cropBoxStyle:{borderWidth:1,borderColor:"rgba(0,0,0,1)",invalidBorderColor:"#f00",dashLine:[4,2],background:"",ctrlBorderWidth:1,ctrlBorderRadius:0,ctrlBorderColor:"rgba(0,0,0,1)",invalidCtrlBorderColor:"#f00",ctrlBackground:"",ctrlWidth:8,ctrlHeight:8,enableConcaveBorderColor:!1}},tree:{visibility:!0,iconClass:"ds-dvs-ui-tree",selectedColor:"#0000ff"},tag:{visibility:!0,iconClass:"ds-dvs-ui-tags",selectedColor:"#0000ff",displayMode:""},headerColor:"#2a292b",topMenuColor:"#3a393b",topMenuBorder:"1px solid #1b1b1d",showSidebar:!1,showMain:!0,footerColor:"#434246",showViewer:!0,showVideoContainer:!1,outerBorder:"1px solid #1b1b1d",sidebarWidth:"180",width:"100%",height:"100%"}},b._ViewUi=null,b._scrBarW=0,b._q=[],b.loader=[!1,!1,!1,!1],b._cors=!0,b._outW=4096,b._outH=4096,b._minW=800,b._minH=800,b._group={},b._resizeCb=null,b._focus={viewerId:void 0,thumbnailId:void 0},b.isCanvasInit=!1,b.width=0,b.height=0,b.tempWidth=0,b.tempHeight=0,b.offScreenCanvas=null,b.isDisposed=!1,b.vws=[],b._db=A,b._tabMng=new pr,b._mPub=new H,b.offScreenCanvas=new ao(O,d.baseCanvasSize,d.isKeepCanvasSize),(A=document.createElement("canvas")).id="dvs_generate_min_cvs_".concat(O),b.canvas=A,(A=document.createElement("canvas")).id="dvs_saveTransformation_cvs_".concat(O),b.saveCanvas=A,b._initTopEvent(),b._initViewerEvent(),T(d,b._defaultConfig),b.initWorkerUlr(),b._getScrBarW(),b.createViewer(),b}u(qr,Mr=H),(z=qr.prototype).on=function(d,b){Mr.prototype._on.call(this,d,b)},z.off=function(d,b){Mr.prototype._off.call(this,d,b)},z.emit=function(d){for(var b,A=arguments.length,O=new Array(1<A?A-1:0),Y=1;Y<A;Y++)O[Y-1]=arguments[Y];(b=Mr.prototype._emit).call.apply(b,[this,d].concat(O))},z._log=function(d,b){(b=void 0===b||b)?this._oPub.emit(bt,"Initialize ".concat(d," object.")):this._oPub.emit(bt,"Complete ".concat(d," object initialization."))},z.dispose=function(){var d;Mr.prototype.dispose.call(this),null!=(d=this.Tag)&&d.dispose(),null!=(d=this.File)&&d.dispose(),null!=(d=this.ViewControl)&&null!=(d=d.getViewerByIndex(0))&&d.removeAllSync(),null!=(d=this.ViewControl)&&d.dispose(),null!=(d=this.Error)&&d.dispose(),null!=(d=this.Log)&&d.dispose(),this._db=null,this.Log=null,this.Error=null,this.Tag=null,this.File=null,this.DataControl=null},ur=qr,window.Dynamsoft=window.Dynamsoft||{},window.Dynamsoft.ViewModel=ur},8420:function(e,n,t){function r(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}t.d(n,{Z:function(){return r}})},7344:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(4341);function a(u,s){for(var f=0;f<s.length;f++){var v=s[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),r(u,v.key,v)}}function o(u,s,f){return s&&a(u.prototype,s),f&&a(u,f),r(u,"prototype",{writable:!1}),u}},4845:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(4341);function a(o,u,s){return u in o?r(o,u,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[u]=s,o}},9623:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(1446),a=t(3882);function o(u){return(o="function"==typeof r&&"symbol"==typeof a?function(s){return typeof s}:function(s){return s&&"function"==typeof r&&s.constructor===r&&s!==r.prototype?"symbol":typeof s})(u)}}},$w={};function Dr(e){var n=$w[e];return void 0!==n||(n=$w[e]={exports:{}},xN[e].call(n.exports,n,n.exports,Dr)),n.exports}Dr.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return Dr.d(n,{a:n}),n},Dr.d=function(e,n){for(var t in n)Dr.o(n,t)&&!Dr.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},Dr.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),Dr.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},Dr.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e=Q.Lib;e.timestamp="?t=20220624191623",Q.Ready=function(n){var t=Q.Lib;if(!Q.navInfo)return t.asyncGetNavInfo().then(function(){try{n(t)}catch(r){throw t.log(r.stack||r,"error"),r}});try{n(t)}catch(r){throw t.log(r.stack||r,"error"),r}},Dr(1383),Dr(5930),Dr(9435),Dr(2053),Dr(5775),Dr(7378),Q.Ready(function(){Dr(7843),e.product.bHTML5Edition?(Dr(630),Dr(1505),Dr(7367),Dr(2246),Dr(9475),Dr(8743),Dr(2696),Dr(1097),Dr(8975),Dr(398),Dr(7821),Dr(3839),Dr(5719),Dr(5505),Dr(6831),e.UI=e.UI||{},Dr(4666),Dr(2766)):e.product.bActiveXEdition&&(Dr(9035),Dr(7127),Dr(6045))}),Dr(4571)}(),Q.DWT.bNpm=!0,Q.DWT.dbrCanvasMaxWH=4096,Q.aryAddonReadyFun=[],Q.AddonReady=function(e){Q.aryAddonReadyFun.push(e)},Q.Lib.mix(Q,{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""}),Q.AddonReady(function(e,n){var r,a,t=window.Dynamsoft;t.Lib.preNavInfo.bIE||(r=this,a=function(r){var a,o,u,s,f,v,l,I,ie,c=function(ie,me){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ge){oe.__proto__=ge}||function(oe,ge){for(var z in ge)Object.prototype.hasOwnProperty.call(ge,z)&&(oe[z]=ge[z])})(ie,me)};function _(ie,me){if("function"!=typeof me&&null!==me)throw new TypeError("Class extends value "+String(me)+" is not a constructor or null");function oe(){this.constructor=ie}c(ie,me),ie.prototype=null===me?Object.create(me):(oe.prototype=me.prototype,new oe)}function h(ie,me,oe,ge){return new(oe||(oe=Promise))(function(z,dt){function ft($t){try{Yt(ge.next($t))}catch(Zt){dt(Zt)}}function Et($t){try{Yt(ge.throw($t))}catch(Zt){dt(Zt)}}function Yt($t){var Zt;$t.done?z($t.value):(Zt=$t.value,Zt instanceof oe?Zt:new oe(function(Dn){Dn(Zt)})).then(ft,Et)}Yt((ge=ge.apply(ie,me||[])).next())})}function y(ie,me){var oe,ge,z,dt,ft={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]};return dt={next:Et(0),throw:Et(1),return:Et(2)},"function"==typeof Symbol&&(dt[Symbol.iterator]=function(){return this}),dt;function Et(Yt){return function($t){return function(Zt){if(oe)throw new TypeError("Generator is already executing.");for(;ft;)try{if(oe=1,ge&&(z=2&Zt[0]?ge.return:Zt[0]?ge.throw||((z=ge.return)&&z.call(ge),0):ge.next)&&!(z=z.call(ge,Zt[1])).done)return z;switch(ge=0,z&&(Zt=[2&Zt[0],z.value]),Zt[0]){case 0:case 1:z=Zt;break;case 4:return ft.label++,{value:Zt[1],done:!1};case 5:ft.label++,ge=Zt[1],Zt=[0];continue;case 7:Zt=ft.ops.pop(),ft.trys.pop();continue;default:if(!((z=(z=ft.trys).length>0&&z[z.length-1])||6!==Zt[0]&&2!==Zt[0])){ft=0;continue}if(3===Zt[0]&&(!z||Zt[1]>z[0]&&Zt[1]<z[3])){ft.label=Zt[1];break}if(6===Zt[0]&&ft.label<z[1]){ft.label=z[1],z=Zt;break}if(z&&ft.label<z[2]){ft.label=z[2],ft.ops.push(Zt);break}z[2]&&ft.ops.pop(),ft.trys.pop();continue}Zt=me.call(ie,ft)}catch(Dn){Zt=[6,Dn],ge=0}finally{oe=z=0}if(5&Zt[0])throw Zt[1];return{value:Zt[0]?Zt[1]:void 0,done:!0}}([Yt,$t])}}}function p(ie,me,oe,ge){if("a"===oe&&!ge)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof me?ie!==me||!ge:!me.has(ie))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===oe?ge:"a"===oe?ge.call(ie):ge?ge.value:me.get(ie)}function m(ie,me,oe,ge,z){if("m"===ge)throw new TypeError("Private method is not writable");if("a"===ge&&!z)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof me?ie!==me||!z:!me.has(ie))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===ge?z.call(ie,oe):z?z.value=oe:me.set(ie,oe),oe}(ie=a||(a={})).logInfo="logInfo",ie.logDebug="logDebug",ie.logAll="logAll",ie.imgIO="imgIO",ie.core="imgCore",ie.imgProc="imgProc",ie.pdfR="pdfReader",ie.pdfW="pdfWriter",ie.crypto="crypto",ie.binaryBlobType="application/octet-stream",ie.wasmExtension=".wasm",function(ie){ie.pending="pending",ie.ready="ready",ie.failed="failed",ie.destroyed="destroyed",ie.init="init"}(o||(o={})),function(ie){ie.PARAMETER_TYPE_ERROR="Parameter Type not Supported = ",ie.TIMEOUT="Timeout no Response = ",ie.FILE_STREAM_ERROR="File Stream Error = ",ie.WASM_EXCEPTION_ERROR="An WASM exception occurred."}(u||(u={})),function(ie){ie[ie.LONG_KEY=0]="LONG_KEY",ie[ie.DLS_KEY=1]="DLS_KEY"}(s||(s={})),function(ie){ie[ie.wasmBase=-4e3]="wasmBase",ie[ie.wasmException=-4001]="wasmException",ie[ie.wasmNoModule=-4002]="wasmNoModule",ie[ie.wasmJsBase=-4100]="wasmJsBase",ie[ie.wasmJsObjectNotInit=-4101]="wasmJsObjectNotInit",ie[ie.wasmJsObjectTerminated=-4102]="wasmJsObjectTerminated",ie[ie.wasmJsObjectInitFailed=-4103]="wasmJsObjectInitFailed",ie[ie.wasmJsNotLoaded=-4104]="wasmJsNotLoaded",ie[ie.wasmJsInvalidJson=-4105]="wasmJsInvalidJson",ie[ie.wasmJsWorkerRunException=-4106]="wasmJsWorkerRunException",ie[ie.wasmJsWorkerRunFailed=-4107]="wasmJsWorkerRunFailed",ie[ie.wasmJsReadFileFailed=-4108]="wasmJsReadFileFailed",ie[ie.wasmJsCoreTaskException=-4109]="wasmJsCoreTaskException",ie[ie.wasmJsProcTaskException=-4110]="wasmJsProcTaskException",ie[ie.wasmJsSavePdfFailed=-4111]="wasmJsSavePdfFailed",ie[ie.wasmJsSaveTiffFailed=-4112]="wasmJsSaveTiffFailed"}(f||(f={})),r.ImageType=void 0,(v=r.ImageType||(r.ImageType={}))[v.IT_DIB=-1]="IT_DIB",v[v.IT_RGBA=-2]="IT_RGBA",v[v.IT_BGRA=-3]="IT_BGRA",v[v.IT_BMP=0]="IT_BMP",v[v.IT_JPG=1]="IT_JPG",v[v.IT_PNG=3]="IT_PNG",v[v.IT_ALL=5]="IT_ALL",r.ReturnedDataType=void 0,(l=r.ReturnedDataType||(r.ReturnedDataType={}))[l.RT_AUTO=-1]="RT_AUTO",l[l.RT_BINARY=1]="RT_BINARY",l[l.RT_BASE64=2]="RT_BASE64",function(ie){ie[ie.SF_DEF=0]="SF_DEF",ie[ie.SF_ENABLE=1]="SF_ENABLE",ie[ie.SF_DISABLE=2]="SF_DISABLE"}(I||(I={}));var T,C,D,S,M,G,L,W,F,U,H,Z,X,$,V,De,fe,je,Se,rt,tt,de,_t,be,it,mt=function(){function ie(){}return ie.fetchRetry=function(me,oe,ge,z){var dt=oe.retries,ft=oe.retryDelay;return new Promise(function(Et,Yt){var $t=function(Zt){fetch(me,oe).then(function(Dn){Et(Dn)}).catch(function(Dn){var er;Zt<dt?(er=Zt,ge&&ge(Dn,z),setTimeout(function(){$t(++er)},ft)):Yt(Dn)})};$t(0)})},ie}();!function(ie){ie.imgIOVer="1.7.3",ie.coreVer="1.7.3",ie.imgProcVer="1.7.3",ie.pdfRVer="1.7.3",ie.pdfWVer="1.7.3",ie.cryptoVer="1.7.3"}(it||(it={}));var Ce,we,Ve,bt,At,St,Pe,ae,Ze,Ne,Re,ze,Qe,ot,Lt,Ot,Bt,Ft,It,Kt,tn,en,Ee,_e=function(){function ie(){}return Object.defineProperty(ie,"UseSimd",{get:function(){return p(this,T,"f",L)},set:function(me){m(this,T,me,"f",L)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"License",{get:function(){return p(this,T,"f",C)},set:function(me){m(this,T,me,"f",C)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"LicMode",{get:function(){return p(this,T,"f",D)},set:function(me){m(this,T,me,"f",D),p(this,T,"m",F).call(this)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"UUID",{get:function(){return p(this,T,"f",S)},set:function(me){m(this,T,me,"f",S)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"NavInfo",{get:function(){return p(this,T,"f",M)},set:function(me){m(this,T,me,"f",M)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"Mobile",{get:function(){return p(this,T,"f",G)},set:function(me){m(this,T,me,"f",G)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"DefHeapSize",{get:function(){return p(this,T,"f",U)},set:function(me){m(this,T,me,"f",U)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"MaxHeapSize",{get:function(){return p(this,T,"f",H)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"ImageIOWorkerJS",{get:function(){return"dynamsoft.imageio_wasm-"+it.imgIOVer+".js"},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"PdfReaderWorkerJS",{get:function(){return"dynamsoft.pdfReader_wasm-"+it.pdfRVer+".js"},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"ImageIOPrefixName",{get:function(){return"dynamsoft.imageio-"},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"ImagecorePrefixName",{get:function(){return"dynamsoft.imagecore-"},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"ImageProcPrefixName",{get:function(){return"dynamsoft.imageProc-"},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"PdfReaderPrefixName",{get:function(){return"dynamsoft.pdfReader-"},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"PdfWriterPrefixName",{get:function(){return"dynamsoft.pdfWriter-"},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"CryptoPrefixName",{get:function(){return"dynamsoft.crypto-"},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"ImageIOResource",{get:function(){return p(this,T,"f",$)},set:function(me){m(this,T,p(this,T,"m",Z).call(this,me),"f",$),p(this,T,"m",De).call(this,p(this,T,"f",$),this.imageIOModule),p(this,T,"m",De).call(this,p(this,T,"f",$),p(this,T,"f",fe)),p(this,T,"m",De).call(this,p(this,T,"f",$),p(this,T,"f",Se)),p(this,T,"m",De).call(this,p(this,T,"f",$),p(this,T,"f",rt))},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"PdfReaderResource",{get:function(){return p(this,T,"f",V)},set:function(me){me.useFastCompEdition=!1,m(this,T,p(this,T,"m",Z).call(this,me),"f",V),p(this,T,"m",De).call(this,p(this,T,"f",V),p(this,T,"f",je)),this.PdfReaderModule.singleInstance=!0},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"ImageIOModule",{get:function(){return this.imageIOModule},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"CryptoModule",{get:function(){return p(this,T,"f",fe)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"PdfReaderModule",{get:function(){return p(this,T,"f",je)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"ImagecoreModule",{get:function(){return p(this,T,"f",Se)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"ImageProcModule",{get:function(){return p(this,T,"f",rt)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"PdfWriterModule",{get:function(){return p(this,T,"f",tt)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"LogLevel",{get:function(){return p(this,T,"f",de)},enumerable:!1,configurable:!0}),ie.setLogFunc=function(me,oe,ge){m(this,T,me,"f",de),m(this,T,oe,"f",_t),m(this,T,ge,"f",be)},Object.defineProperty(ie,"LogFunc",{get:function(){return p(this,T,"f",_t)},enumerable:!1,configurable:!0}),Object.defineProperty(ie,"LogContext",{get:function(){return p(this,T,"f",be)},enumerable:!1,configurable:!0}),ie}();W=function(ie){this.LicMode==s.DLS_KEY&&ie.dependencyModules&&-1!=ie.dependencyModules.indexOf(a.imgIO)&&-1==ie.dependencyModules.indexOf(a.crypto)&&ie.dependencyModules.push(a.crypto)},F=function(){p(this,T,"m",W).call(this,p(this,T,"f",Se)),p(this,T,"m",W).call(this,p(this,T,"f",rt)),p(this,T,"m",W).call(this,p(this,T,"f",tt))},Z=function(ie){var me,oe,ge,z,dt,ft={crossScript:!1,resourceDir:ie.resourceDir,workerScript:ie.workerScript,useFastCompEdition:null!==(me=ie.useFastCompEdition)&&void 0!==me&&me,useSimd:null!==(oe=ie.useSimd)&&void 0!==oe?oe:p(this,T,"f",L),fetchOptions:null!==(ge=ie.fetchOptions)&&void 0!==ge?ge:p(this,T,"f",X),defHeapSize:null!==(z=ie.defHeapSize)&&void 0!==z?z:this.DefHeapSize,maxHeapSize:null!==(dt=ie.maxHeapSize)&&void 0!==dt?dt:this.MaxHeapSize};return ft.workerScript=ie.resourceDir+ie.workerScript,ft.workerScript.startsWith("http://")||ft.workerScript.startsWith("https://")?(ft.resourceDir=ie.resourceDir,ft.workerScript.startsWith(location.origin)||(ft.crossScript=!0)):ie.resourceDir.startsWith("/")?null!=location.origin&&(ft.resourceDir=location.origin+ie.resourceDir):null!=location.href&&(ft.resourceDir=location.href.substring(0,location.href.lastIndexOf("/")+1)+ie.resourceDir),ft.resourceDir.endsWith("/")||(ft.resourceDir+="/"),ie.useFastCompEdition&&(ft.resourceDir+="fastcomp/",ft.workerScript=ft.resourceDir+ie.workerScript),ft},De=function(ie,me){me.resourceDir=ie.resourceDir,me.crossScript=ie.crossScript,me.useSimd=me.name===a.imgProc&&ie.useSimd,me.script=ie.workerScript,me.fetchOptions=ie.fetchOptions,me.defHeapSize=ie.defHeapSize,me.maxHeapSize=ie.maxHeapSize},C={value:""},D={value:s.LONG_KEY},S={value:""},M={value:null},G={value:!1},L={value:!1},U={value:32},H={value:200},$={value:{resourceDir:"",workerScript:_e.ImageIOWorkerJS,useFastCompEdition:!1,useSimd:!1,crossScript:!1,fetchOptions:p(_e,T=_e,"f",X={value:{mode:"cors",credentials:"same-origin",retries:3,retryDelay:500}}),defHeapSize:_e.DefHeapSize,maxHeapSize:_e.MaxHeapSize}},V={value:{resourceDir:"",workerScript:_e.PdfReaderWorkerJS,useFastCompEdition:!1,useSimd:!1,crossScript:!1,fetchOptions:p(_e,T,"f",X),defHeapSize:_e.DefHeapSize,maxHeapSize:_e.MaxHeapSize}},_e.imageIOModule={name:a.imgIO,autoLoad:!1,ver:it.imgIOVer,prefixName:_e.ImageIOPrefixName,dependencyModules:[],useSimd:!1,fetchOptions:p(_e,T,"f",X)},fe={value:{name:a.crypto,autoLoad:!1,ver:it.cryptoVer,prefixName:_e.CryptoPrefixName,dependencyModules:[a.imgIO],fetchOptions:p(_e,T,"f",X)}},je={value:{name:a.pdfR,autoLoad:!1,ver:it.pdfRVer,prefixName:_e.PdfReaderPrefixName,dependencyModules:[],fetchOptions:p(_e,T,"f",X)}},Se={value:{name:a.core,autoLoad:!1,ver:it.coreVer,prefixName:_e.ImagecorePrefixName,dependencyModules:[a.imgIO],fetchOptions:p(_e,T,"f",X)}},rt={value:{name:a.imgProc,autoLoad:!1,ver:it.imgProcVer,prefixName:_e.ImageProcPrefixName,dependencyModules:[a.imgIO,a.core],useSimd:_e.UseSimd}},tt={value:{name:a.pdfW,autoLoad:!1,ver:it.pdfWVer,prefixName:_e.PdfWriterPrefixName,dependencyModules:[a.imgIO,a.core],useSimd:_e.UseSimd}},de={value:""},_t={value:void 0},be={value:null};var Ae,We,pe,Ie,$e,st,Nt,Pt,et,lt,Ut,xt,wn,Ln,Cn,In,Le,g,w,N,K,Te,Fe,Ke,Je,Ye,qt,xe,ut,ue,se=function(){function ie(me,oe,ge,z,dt){Ce.add(this),we.set(this,void 0),Ve.set(this,void 0),bt.set(this,void 0),At.set(this,void 0),St.set(this,void 0),Pe.set(this,void 0),ae.set(this,void 0),Ze.set(this,void 0),Ne.set(this,void 0),Re.set(this,void 0),ze.set(this,void 0),Qe.set(this,void 0),ot.set(this,0),Lt.set(this,{}),Ot.set(this,null),m(this,we,me,"f"),m(this,Ne,ge,"f"),m(this,bt,[],"f"),m(this,At,!1,"f"),m(this,St,!1,"f"),m(this,ot,oe,"f"),m(this,Ot,Object.create(null),"f"),p(this,Lt,"f").modulesInfo=[],m(this,ze,Object.create(null),"f"),m(this,Pe,z,"f"),m(this,ae,dt,"f"),m(this,Ze,null,"f"),m(this,Re,0,"f"),m(this,Qe,0,"f"),m(this,Ve,p(this,Ce,"m",Ft).call(this,p(this,we,"f")),"f"),p(this,Ve,"f").on("message",p(this,Ce,"m",tn),this),p(this,Ve,"f").on("error",p(this,Ce,"m",Kt),this),p(this,Ve,"f").on("exit",function(ft,Et,Yt){var $t="Worker #terminated Unexpectedly\n";$t+=" exitCode: `"+ft+"`\n",$t+=" signalCode: `"+Et+"`\n",$t+=" #script: `"+me+"`\n",p(Yt,Ce,"m",Kt).call(Yt,new Error($t),Yt)},this)}return Object.defineProperty(ie.prototype,"WorkerScript",{get:function(){return p(this,Ne,"f")},enumerable:!1,configurable:!0}),ie.prototype.setLogFunc=function(me,oe){m(this,Pe,me,"f"),m(this,ae,oe,"f")},Object.defineProperty(ie.prototype,"id",{get:function(){return p(this,ot,"f")},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"Module",{get:function(){return p(this,Lt,"f")},set:function(me){m(this,Lt,me,"f")},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"Instances",{get:function(){return p(this,Ot,"f")},enumerable:!1,configurable:!0}),ie.prototype.execTask=function(me,oe,ge){ge||((ge={}).promise=new Promise(function(ft,Et){ge.resolve=ft,ge.reject=Et}));var z=m(this,Qe,+p(this,Qe,"f")+1,"f");p(this,ze,"f")[z]={id:z,resolver:ge};var dt={id:z,func:me,params:oe};return p(this,Ce,"m",It).call(this,me+" send"),p(this,St,"f")?ge.reject(new Error("Worker is #terminated")):p(this,At,"f")?ge.reject(new Error("Worker is #terminating")):p(this,Ve,"f").wasmReady||p(this,Ve,"f").ready&&"loadWasm"===me?p(this,Ve,"f").send(dt):p(this,bt,"f").push(dt),ge.promise},Object.defineProperty(ie.prototype,"memSize",{get:function(){return p(this,Re,"f")},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"busy",{get:function(){return this.howManyTasks>0},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"howManyTasks",{get:function(){return Object.keys(p(this,ze,"f")).length},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"alive",{get:function(){return!p(this,At,"f")&&!p(this,St,"f")},enumerable:!1,configurable:!0}),ie.prototype.terminate=function(me,oe){if(p(this,Ce,"m",It).call(this,"worker terminate "+me),me&&p(this,Ce,"m",Ee).call(this,"Worker has been #terminated"),"function"==typeof oe&&m(this,Ze,oe,"f"),this.busy)m(this,At,!0,"f");else{if(p(this,Ve,"f")){if("function"!=typeof p(this,Ve,"f").terminate)throw new Error("Failed to terminate worker");p(this,Ve,"f").terminate(),m(this,Ve,null,"f")}m(this,At,!1,"f"),m(this,St,!0,"f"),p(this,Ze,"f")&&p(this,Ze,"f").call(this,this)}},ie}();we=new WeakMap,Ve=new WeakMap,bt=new WeakMap,At=new WeakMap,St=new WeakMap,Pe=new WeakMap,ae=new WeakMap,Ze=new WeakMap,Ne=new WeakMap,Re=new WeakMap,ze=new WeakMap,Qe=new WeakMap,ot=new WeakMap,Lt=new WeakMap,Ot=new WeakMap,Ce=new WeakSet,Bt=function(ie){for(var me=new Error(""),oe=Object.keys(ie),ge=0;ge<oe.length;ge++)me[oe[ge]]=ie[oe[ge]];return me},Ft=function(ie){if("function"!=typeof Worker&&"object"!=typeof Worker)throw new Error("Web Workers not supported");var me=new Worker(ie);return me.on=function(oe,ge,z){this.addEventListener(oe,function(dt){"exit"===oe?ge(dt.data,"",z):ge(dt.data,z)})},me.send=function(oe){if(null!=oe&&null!=oe.params&&null!=oe.params.input){var ge=Object.prototype.toString.call(oe.params.input);if("[object Array]"===Object.prototype.toString.call(oe.params.input)){if("[object ArrayBuffer]"===(ge=Object.prototype.toString.call(oe.params.input[0]))||"[object Uint8ClampedArray]"===ge||"[object Uint8Array]"===ge)return void this.postMessage(oe,[null!=oe.params.input[0].buffer?oe.params.input[0].buffer:oe.params.input[0]])}else if("[object ArrayBuffer]"===ge||"[object Uint8ClampedArray]"===ge||"[object Uint8Array]"===ge)return void this.postMessage(oe,[null!=oe.params.input.buffer?oe.params.input.buffer:oe.params.input])}this.postMessage(oe)},me},It=function(ie){p(this,Pe,"f")&&p(this,Pe,"f").call(this,ie,p(this,ae,"f"))},Kt=function(ie,me){m(me,St,!0,"f"),p(me,Ce,"m",It).call(me,"[js]["+Date.now()/1e3+"] worker error "+JSON.stringify(ie)),p(me,At,"f")&&p(me,Ze,"f")&&p(me,Ze,"f").call(me,me),m(me,At,!1,"f"),p(me,Ce,"m",Ee).call(me)},tn=function(ie,me){if(p(me,Ce,"m",It).call(me,ie.log?ie.log:ie),"string"==typeof ie&&"ready"===ie)p(me,Ve,"f").ready=!0,p(me,Ce,"m",en).call(me);else if(!ie.log){if("object"==typeof ie){var oe=ie.result;"object"==typeof oe?(null!=oe.errorCode&&(oe.code=oe.errorCode,delete oe.errorCode),null!=oe.errorMessage&&(oe.message=oe.errorMessage,delete oe.errorMessage)):"string"==typeof oe&&(oe=(oe=(oe=(oe=oe.replace('"errorCode"','"code"')).replace("'errorCode'","'code'")).replace('"errorMessage"','"message"')).replace("'errorMessage'","'message'"),ie.result=oe),null!=ie.memSize&&m(me,Re,ie.memSize,"f")}var ge=ie.id,z=p(me,ze,"f")[ge];void 0!==z&&(delete p(me,ze,"f")[ge],p(me,Ce,"m",It).call(me,ie.func+" received"),!0===p(me,At,"f")&&me.terminate(),"loadWasm"===ie.func&&null!=ie.result&&(p(me,Ve,"f").wasmReady=!0,p(me,Ce,"m",en).call(me)),ie.error?z.resolver.reject(p(me,Ce,"m",Bt).call(me,ie.error)):ie.result&&z.resolver.resolve(ie.result))}},en=function(){p(this,bt,"f").forEach(p(this,Ve,"f").send.bind(p(this,Ve,"f"))),m(this,bt,[],"f")},Ee=function(ie){for(var me in p(this,ze,"f"))void 0!==p(this,ze,"f")[me]&&p(this,ze,"f")[me].resolver.reject(new Error(ie));m(this,ze,Object.create(null),"f")};var le,Ue,ke,He,nt,zt,Qt,rn,Gt,ce,Me,Xe,Be=function(){function ie(){Ae.add(this),Ie.set(this,[]),$e.set(this,2),st.set(this,60),Nt.set(this,!1),Pt.set(this,void 0),et.set(this,null),lt.set(this,a.logDebug),xt.set(this,!1)}return Object.defineProperty(ie,"Instance",{get:function(){return p(this,We,"f",pe)||m(this,We,new ie,"f",pe),p(this,We,"f",pe)},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"Terminated",{get:function(){return p(this,Nt,"f")},enumerable:!1,configurable:!0}),ie.prototype.getModuleLoadedError=function(me){for(var oe=0,ge=p(ie,We,"f",Ut);oe<ge.length;oe++){var z=ge[oe];if(z.name==me)return z.error}},ie.prototype.getModuleStatus=function(me){for(var oe=0,ge=p(ie,We,"f",Ut);oe<ge.length;oe++){var z=ge[oe];if(z.name==me)return z.status}return""},ie.prototype.addModules=function(me){var oe=!1;if(p(ie,We,"f",Ut).forEach(function(z,dt,ft){z.name==me.name&&(z.ver==me.ver?oe=!0:ft.splice(dt,1))}),!oe){var ge=me;ge.status="",ge.wasmModule=null,p(ie,We,"f",Ut).push(ge)}},ie.prototype.loadModule=function(me,oe){return h(this,void 0,void 0,function(){var ge,z,dt,ft,Et,Yt,$t;return y(this,function(Zt){for(ge=null,null==oe&&(oe=0!=p(this,Ae,"m",Fe).call(this,me).length),z=0,dt=me.dependencyModules;z<dt.length;z++)(ft=dt[z])===a.imgIO?(this.addModules(_e.ImageIOModule),_e.LicMode===s.DLS_KEY&&this.addModules(_e.CryptoModule)):ft===a.core&&this.addModules(_e.ImagecoreModule);for(Et=0,Yt=p(ie,We,"f",Ut);Et<Yt.length;Et++)if(($t=Yt[Et]).name===me.name){if($t.wasmModule){if(oe)return[2,!0];ge=$t;break}if($t.status===o.pending)return[2,!1];ge=$t;break}if(ge)if(""===ge.status)ge.status=o.pending,ge.wasmModule=null;else{if(ge.status===o.pending)return[2,null];oe||(ge.error={code:0,message:""},ge.status=o.pending)}else(ge=me).status=o.pending,ge.wasmModule=null,p(ie,We,"f",Ut).push(ge);return[2,p(this,Ae,"m",wn).call(this,ge)]})})},ie.prototype.setLogFunc=function(me,oe,ge){m(this,Pt,oe,"f"),m(this,et,ge,"f"),m(this,lt,me,"f")},Object.defineProperty(ie.prototype,"busy",{get:function(){p(this,Ae,"m",qt).call(this);for(var me=0,oe=p(this,Ie,"f");me<oe.length;me++)if(oe[me].busy)return!0;return!1},enumerable:!1,configurable:!0}),ie.prototype.getWorker=function(me,oe){return h(this,void 0,void 0,function(){var ge;return y(this,function(z){switch(z.label){case 0:return p(this,Ae,"m",Ke).call(this,me.name)?(p(this,Ae,"m",Ye).call(this),[2,null]):0==(ge=p(this,Ae,"m",Fe).call(this,me)).length?[3,1]:[2,p(this,Ae,"m",xe).call(this,ge,oe,!me.singleInstance)];case 1:return[4,this.loadModule(me,!1)];case 2:return z.sent(),[2,null]}})})},ie.prototype.removeInstanceInWorker=function(me,oe,ge,z){var dt;if(p(this,Ae,"m",ut).call(this,oe,ge),z&&oe&&null!=oe.memSize){var ft=1024*(null!==(dt=me.maxHeapSize)&&void 0!==dt?dt:_e.MaxHeapSize)*1024;if(p(this,Ae,"m",N).call(this,"current memSize="+oe.memSize+", max="+ft),oe.memSize>ft&&0!=ft&&!p(this,Ae,"m",ue).call(this,oe)){p(this,Ae,"m",N).call(this,"try to terminate the worker"),oe.terminate();var Et=p(this,Ie,"f").indexOf(oe);-1!==Et&&p(this,Ie,"f").splice(Et,1)}}},ie.prototype.terminate=function(me){m(ie,We,null,"f",pe),p(this,Ae,"m",N).call(this,"worker pool terminate "+me),m(this,Nt,!0,"f");var oe=[],ge=p(this,Ie,"f").slice();return m(this,Ie,[],"f"),ge.forEach(function(z){var dt={};dt.promise=new Promise(function(ft,Et){dt.resolve=ft,dt.reject=Et}),oe.push(dt.promise),z.terminate(me,function(ft){dt.resolve(ft)})}),Promise.all(oe)},ie.prototype.terminateWorker=function(me){var oe=p(this,Ie,"f").filter(function(ge){return!ge.Module.modulesInfo[me.name]||(ge.terminate(!0),!1)});m(this,Ie,oe,"f")},ie.prototype.getMemoryUsed=function(){for(var me=[],oe=0,ge=0,z=p(this,Ie,"f");ge<z.length;ge++){var dt=z[ge];dt&&null!=dt.memSize&&(me[oe++]=dt.memSize)}return me},ie}();We=Be,Ie=new WeakMap,$e=new WeakMap,st=new WeakMap,Nt=new WeakMap,Pt=new WeakMap,et=new WeakMap,lt=new WeakMap,xt=new WeakMap,Ae=new WeakSet,wn=function(ie){return h(this,void 0,void 0,function(){var me,oe,ge,z,dt,ft,Et,Yt;return y(this,function($t){switch($t.label){case 0:return me=this,[4,p(this,Ae,"m",K).call(this,ie)];case 1:if(oe=$t.sent()){if((ge={id:0,func:"loadWasm",params:{insId:0,priority:0,module:{modulesInfo:[]},fetchOptions:ie.fetchOptions}}).params.resourceDir=ie.resourceDir,ge.params.initMemory=ie.defHeapSize,ge.params.module){for(z=0,dt=p(Be,We,"f",Ut);z<dt.length;z++)for(ft=dt[z],Et=0,Yt=ie.dependencyModules;Et<Yt.length;Et++)Yt[Et]==ft.name&&ge.params.module.modulesInfo.push(ft);ge.params.module.modulesInfo.push(ie)}return[2,p(this,Ae,"m",Cn).call(this,oe,ge,function(Zt){m(me,$e,p(me,Ae,"m",Le).call(me),"f"),ie.status===o.pending&&(ie.status="")})]}return ie.status="",[2]}})})},Ln=function(ie,me,oe,ge){for(var z=0,dt=p(Be,We,"f",Ut);z<dt.length;z++){var ft=dt[z];if(ft.name===ie){ft.status=me,ft.wasmModule=oe,ft.error=ge;break}}},Cn=function(ie,me,oe){return h(this,void 0,void 0,function(){var ge,z,dt,ft;return y(this,function(Et){switch(Et.label){case 0:ge=this,Et.label=1;case 1:return Et.trys.push([1,3,4,5]),[4,ie.execTask(me.func,me.params)];case 2:return z=Et.sent(),dt=!1,void 0===z.code||z.modules?dt=p(ge,Ae,"m",In).call(ge,z,ie):p(ge,Ae,"m",N).call(ge,z),[2,dt];case 3:return ft=Et.sent(),p(ge,Ae,"m",N).call(ge,ft),[2,!1];case 4:return oe&&oe(),[7];case 5:return[2]}})})},In=function(ie,me){if(p(this,Ae,"m",N).call(this,"handleWasmLoad:"),p(this,Ae,"m",N).call(this,ie),("object"!=typeof ie||null==ie.modules)&&"object"==typeof ie)return!1;for(var oe=!1,ge=0,z=ie.modules;ge<z.length;ge++){var dt=z[ge];ie.code?(p(this,Ae,"m",Ln).call(this,dt.name,o.failed,null,{code:ie.code,message:ie.message}),me.Module.modulesInfo[dt.name]=!1):(p(this,Ae,"m",Ln).call(this,dt.name,o.ready,dt.wasmModule,void 0),me.Module.modulesInfo[dt.name]=!0,oe=!0)}return oe},Le=function(){var ie=2;return"hardwareConcurrency"in self.navigator&&(ie=self.navigator.hardwareConcurrency),Math.max(Math.min(p(this,$e,"f"),Math.max(p(this,$e,"f"),ie/2)),1)},g=function(){_e.LogLevel==p(this,lt,"f")&&_e.LogFunc==p(this,Pt,"f")||this.setLogFunc(_e.LogLevel,_e.LogFunc,_e.LogContext)},w=function(ie){p(this,Ae,"m",g).call(this),p(this,Pt,"f")&&p(this,lt,"f")===a.logAll&&p(this,Pt,"f").call(this,ie,p(this,et,"f"))},N=function(ie){p(this,Ae,"m",g).call(this),p(this,Pt,"f")&&p(this,lt,"f")===a.logDebug&&p(this,Pt,"f").call(this,ie,p(this,et,"f"))},K=function(ie){return h(this,void 0,void 0,function(){var me,oe,ge,z;return y(this,function(dt){for(p(this,Ae,"m",qt).call(this),me=p(this,Ie,"f"),oe=0,ge=me;oe<ge.length;oe++)if((z=ge[oe]).WorkerScript===ie.script)return z.busy?[2,null]:[2,z];return[2,p(this,Ae,"m",Te).call(this,ie)]})})},Te=function(ie){return h(this,void 0,void 0,function(){var me,oe,ge,z;return y(this,function(dt){switch(dt.label){case 0:return(oe=p(me=this,Ie,"f")).length<p(me,$e,"f")&&!p(me,xt,"f")?(m(me,xt,!0,"f"),ge=ie.script,ie.crossScript?[4,mt.fetchRetry(ie.script,ie.fetchOptions,p(me,Pt,"f"),me).then(function(ft){return ft.blob()}).then(function(ft){return URL.createObjectURL(ft)}).catch(function(ft){return p(me,Ae,"m",N).call(me,"get new worker fetch failed: "),p(me,Ae,"m",N).call(me,ft),m(me,xt,!1,"f"),null})]:[3,2]):[3,3];case 1:ge=dt.sent(),dt.label=2;case 2:return z=new se(ge,oe.length+1,ie.script,p(me,Pt,"f"),p(me,et,"f")),oe.push(z),m(me,xt,!1,"f"),p(me,Ae,"m",w).call(me,oe),p(me,Ae,"m",N).call(me,"get new worker "+z.id+" succeed!"),[2,z];case 3:return[2,null]}})})},Fe=function(ie){p(this,Ae,"m",qt).call(this);var me=p(this,Ie,"f");p(this,Ae,"m",w).call(this,me);for(var oe=[],ge=0,z=me;ge<z.length;ge++){var dt=z[ge];if(dt.Module.modulesInfo[ie.name]){if(dt.busy&&me.length<p(this,$e,"f"))continue;oe.push(dt)}}return p(this,Ae,"m",w).call(this,"get workers for module "+ie.name),p(this,Ae,"m",w).call(this,oe),oe},Ke=function(ie){for(var me=0,oe=p(Be,We,"f",Ut);me<oe.length;me++){var ge=oe[me];if(ge.name===ie&&ge.status===o.pending)return!0}return!1},Je=function(){return h(this,void 0,void 0,function(){var ie,me,oe;return y(this,function(ge){switch(ge.label){case 0:this.terminate(!0),ie=0,me=p(Be,We,"f",Ut),ge.label=1;case 1:return ie<me.length?(oe=me[ie],[4,p(this,Ae,"m",wn).call(this,oe)]):[3,4];case 2:ge.sent(),ge.label=3;case 3:return ie++,[3,1];case 4:return[2]}})})},Ye=function(){p(this,Ae,"m",qt).call(this),0==p(this,Ie,"f").length&&0!=p(Be,We,"f",Ut).length&&(p(this,Ae,"m",N).call(this,"no worker ready, reinit"),p(this,Ae,"m",Je).call(this))},qt=function(){m(this,Ie,p(this,Ie,"f").filter(function(ie){return ie.alive}),"f")},xe=function(ie,me,oe){p(this,Ae,"m",w).call(this,"getWorkerByIntanceId"),p(this,Ae,"m",w).call(this,ie);for(var ge=9007199254740991,z=void 0,dt=0,ft=ie;dt<ft.length;dt++){var Et=ft[dt];if(!oe&&0!=Object.keys(Et.Instances).length)return null;if(null!=Et.Instances[me]){z=Et;break}var Yt=Et.howManyTasks;Yt<ge&&(z=Et,ge=Yt)}return z?(z.Instances[me]="",p(this,Ae,"m",w).call(this,ie),p(this,Ae,"m",N).call(this,"get worker "+me+" in "+z.id+" succeed!"),""!=p(this,lt,"f")&&z.setLogFunc(p(this,Pt,"f"),p(this,et,"f")),z):(p(this,Ae,"m",w).call(this,"#getWorkerByIntanceId: no suitable worker"),null)},ut=function(ie,me){var oe=p(this,Ie,"f");p(this,Ae,"m",w).call(this,"removeInstanceInWorkerInner"),p(this,Ae,"m",w).call(this,oe);for(var ge=0,z=oe;ge<z.length;ge++){var dt=z[ge];if(dt===ie){null!=dt.Instances[me]?(delete dt.Instances[me],p(this,Ae,"m",w).call(this,oe),p(this,Ae,"m",N).call(this,"removeInstanceInWorkerInner "+me+" in "+ie.id+" succeed!")):p(this,Ae,"m",N).call(this,"not found instance "+me);break}}},ue=function(ie){return 0!=Object.keys(ie.Instances).length},pe={value:null},Ut={value:new Array},function(ie){ie.Text="Text",ie.Link="Link",ie.FreeText="FreeText",ie.Line="Line",ie.Square="Square",ie.Circle="Circle",ie.Polygon="Polygon",ie.PolyLine="PolyLine",ie.Hignlight="Hignlight",ie.Underline="Underline",ie.Squiggly="Squiggly",ie.StrikeOut="StrikeOut",ie.Stamp="Stamp",ie.Caret="Caret",ie.Ink="Ink",ie.Popup="Popup"}(le||(le={})),function(ie){ie.None="none",ie.Invisible="invisible",ie.Hidden="hidden",ie.Print="print",ie.NoZoom="noZoom",ie.NoRotate="noRotate",ie.NoView="noView",ie.ReadOnly="readOnly",ie.Locked="locked",ie.ToggleNoView="toggleNoView",ie.LockedContents="lockedContents"}(Ue||(Ue={})),function(ie){ie.Solid="S",ie.Dashed="D",ie.Beveled="B",ie.Insert="I",ie.Underline="U"}(ke||(ke={})),function(ie){ie.NoEffect="S",ie.Cloudy="C"}(He||(He={})),function(ie){ie.Comment="Comment",ie.Key="Key",ie.Note="Note",ie.Help="Help",ie.NewParagraph="NewParagraph",ie.Paragraph="Paragraph",ie.Insert="Insert"}(nt||(nt={})),function(ie){ie.Marked="Marked",ie.Review="Review"}(zt||(zt={})),function(ie){ie.Accepted="Accepted",ie.Rejected="Rejected",ie.Cancelled="Cancelled",ie.Completed="Completed",ie.None="None"}(Qt||(Qt={})),function(ie){ie.None="None",ie.Square="Square",ie.Circle="Circle",ie.Diamond="Diamond",ie.OpenArrow="OpenArrow",ie.ClosedArrow="ClosedArrow",ie.Butt="Butt",ie.ROpenArrow="ROpenArrow",ie.RClosedArrow="RClosedArrow",ie.Slash="Slash"}(rn||(rn={})),function(ie){ie[ie.LeftJustified=0]="LeftJustified",ie[ie.Centered=1]="Centered",ie[ie.RightJustified=2]="RightJustified"}(Gt||(Gt={})),function(ie){ie.FreeText="FreeText",ie.FreeTextCallout="FreeTextCallout",ie.FreeTextTypeWriter="FreeTextTypeWriter"}(ce||(ce={})),function(ie){ie.LineArrow="LineArrow",ie.LineDimension="LineDimension"}(Me||(Me={})),function(ie){ie.Approved="Approved",ie.Experimental="Experimental",ie.NotApproved="NotApproved",ie.Asls="Asls",ie.Expired="Expired",ie.NotForPublicRelease="NotForPublicRelease",ie.Confidential="Confidential",ie.Final="Final",ie.Sold="Sold",ie.Departmental="Departmental",ie.ForComment="ForComment",ie.TopSecret="TopSecret",ie.Draft="Draft",ie.ForPublicRelease="ForPublicRelease"}(Xe||(Xe={}));var Ct=function(ie){function me(oe){var ge=ie.call(this,oe)||this;return ge.title=void 0,ge.opacity=void 0,ge.richText=void 0,ge.creationDate=void 0,ge.subject=void 0,ge}return _(me,ie),me}(function(){function ie(me){this.type=void 0,this.rectangle=void 0,this.contents=void 0,this.name=void 0,this.modifiedDate=void 0,this.flags=void 0,this.border=void 0,this.color=void 0,this.normalAppearance=void 0,this.type=me}return ie.prototype.toJsonString=function(){return JSON.stringify(this)},ie}()),at=function(ie){function me(){var oe=ie.call(this,le.Text)||this;return oe.open=void 0,oe.iconName=void 0,oe.state=void 0,oe.stateModel=void 0,oe}return _(me,ie),me}(Ct),Dt=function(ie){function me(){var oe=ie.call(this,le.FreeText)||this;return oe.defaultAppearance=void 0,oe.q=void 0,oe.defaultStyle=void 0,oe.callout=void 0,oe.intent=void 0,oe.borderEffect=void 0,oe.rectDifference=void 0,oe.borderStyle=void 0,oe.lineEnding=void 0,oe}return _(me,ie),me}(Ct),kt=function(ie){function me(oe,ge,z,dt){var ft=ie.call(this,le.Line)||this;return ft.line=void 0,ft.borderStyle=void 0,ft.lineEnding=void 0,ft.interiorColor=void 0,ft.leadLineLength=void 0,ft.leadLineExtensionLength=void 0,ft.caption=void 0,ft.intent=void 0,ft.leadLineOffsetLength=void 0,ft.captionPosition=void 0,ft.captionOffset=void 0,ft.line=[oe,ge,z,dt],ft}return _(me,ie),me}(Ct),Rt=function(ie){function me(){var oe=ie.call(this,le.Square)||this;return oe.borderStyle=void 0,oe.interiorColor=void 0,oe.borderEffect=void 0,oe.rectDifference=void 0,oe}return _(me,ie),me}(Ct),qe=function(ie){function me(){var oe=ie.call(this,le.Circle)||this;return oe.borderStyle=void 0,oe.interiorColor=void 0,oe.borderEffect=void 0,oe.rectDifference=void 0,oe}return _(me,ie),me}(Ct),Mt=function(ie){function me(){var oe=ie.call(this,le.Polygon)||this;return oe.vertices=void 0,oe.borderStyle=void 0,oe.borderEffect=void 0,oe}return _(me,ie),me}(Ct),Ht=function(ie){function me(){var oe=ie.call(this,le.PolyLine)||this;return oe.vertices=void 0,oe.borderStyle=void 0,oe.lineEnding=void 0,oe.borderEffect=void 0,oe}return _(me,ie),me}(Ct),Vt=function(ie){function me(){var oe=ie.call(this,le.Hignlight)||this;return oe.quadPoints=void 0,oe}return _(me,ie),me}(Ct),jt=function(ie){function me(){var oe=ie.call(this,le.Underline)||this;return oe.quadPoints=void 0,oe}return _(me,ie),me}(Ct),ln=function(ie){function me(){var oe=ie.call(this,le.StrikeOut)||this;return oe.quadPoints=void 0,oe}return _(me,ie),me}(Ct),Un=function(ie){function me(){var oe=ie.call(this,le.Squiggly)||this;return oe.quadPoints=void 0,oe}return _(me,ie),me}(Ct),On=function(ie){function me(){var oe=ie.call(this,le.Stamp)||this;return oe.name=void 0,oe}return _(me,ie),me}(Ct),br=function(ie){function me(){var oe=ie.call(this,le.Ink)||this;return oe.inkList=void 0,oe.borderStyle=void 0,oe}return _(me,ie),me}(Ct),En=function(){};En.PdfAnnotType=le,En.PdfAnnotFlag=Ue,En.PdfAnnotBorderStyleStyle=ke,En.PdfAnnotBorderEffectStyle=He,En.PdfAnnotTextName=nt,En.PdfAnnotTextStateModel=zt,En.PdfAnnotTextState=Qt,En.PdfAnnotLineEnding=rn,En.PdfAnnotFreeTextQuadding=Gt,En.PdfAnnotFreeTextIntent=ce,En.PdfAnnotLineIntent=Me,En.PdfAnnotStampName=Xe,En.PdfAnnotAppearance=function(){this.annot=void 0},En.PdfAnnotBorderStyle=function(){this.width=void 0,this.style=void 0,this.dash=void 0},En.PdfAnnotBorderEffect=function(){this.style=void 0,this.intensity=void 0},En.PdfTextAnnot=at,En.PdfFreeTextAnnot=Dt,En.PdfLineAnnot=kt,En.PdfSquareAnnot=Rt,En.PdfCircleAnnot=qe,En.PdfPolygonAnnot=Mt,En.PdfPolyLineAnnot=Ht,En.PdfHighlightAnnot=Vt,En.PdfUnderlineAnnot=jt,En.PdfStrikeOutAnnot=ln,En.PdfSquigglyAnnot=Un,En.PdfRubberStampAnnot=On,En.PdfInkAnnot=br;var vr,ei,fi,pr,Fr,ao=function(){function ie(){}return ie.read=function(me){return new Promise(function(oe,ge){var z=Object.prototype.toString.call(me);if("[object String]"===z)0===me.indexOf("blob:")||me.indexOf(".jpg")>0||me.indexOf(".jpeg")>0||me.indexOf(".png")>0||me.indexOf(".bmp")>0||me.indexOf(".dib")>0||me.indexOf(".pdf")>0||me.indexOf(".tiff")>0||me.indexOf(".tif")>0?fetch(me,{mode:"cors"}).then(function(Et){return Et.arrayBuffer()}).then(function(Et){return oe(Et)}).catch(function(Et){return Promise.reject(Et)}):ge("Error url: Can not read the file URL");else if("[object Blob]"===z||"[object FileList]"===z||"[object File]"===z){var dt=me;"[object FileList]"!==z&&"[object File]"!==z||(dt=me[0]?me[0]:me);var ft=new FileReader;ft.readAsArrayBuffer(dt),ft.onload=function(){oe(ft.result)}}else"[object ArrayBuffer]"===z||"[object Uint8ClampedArray]"===z?oe(me):ge("Not support source type: "+z)})},ie}(),Li=function(){function ie(cn,pn){var bn,nr,d,b;me.add(this),z.set(this,void 0),this._outputType=r.ImageType.IT_JPG,this._inputType=r.ImageType.IT_ALL,this._jpegQuality=80,dt.set(this,null!==(bn=_e.License)&&void 0!==bn?bn:""),ft.set(this,[]),Et.set(this,null),Yt.set(this,0),$t.set(this,""),Zt.set(this,null),Dn.set(this,null),er.set(this,m(b=ie,oe,+p(b,oe,"f",ge)+1,"f",ge)),Mn.set(this,null),sr.set(this,JSON.parse(JSON.stringify(_e.NavInfo))),ti.set(this,_e.Mobile),Rr.set(this,location.origin),Co.set(this,""),ur.set(this,o.init),qr.set(this,!1),Eo.set(this,null!==(nr=_e.LicMode)&&void 0!==nr?nr:s.LONG_KEY),ii.set(this,null!==(d=_e.UUID)&&void 0!==d?d:""),this._handleBooleanResult=function(A,O){return!0},m(this,z,cn,"f"),m(this,dt,pn??_e.License,"f"),this.setLog(_e.LogLevel,_e.LogFunc,_e.LogContext)}var me,oe,ge,z,dt,ft,Et,Yt,$t,Zt,Dn,er,Mn,sr,ti,Rr,Co,ur,qr,Eo,ii,ya,po,aa,Go,Mo,jo,ki;return ie.prototype._prepareModule=function(cn){},ie.prototype.setLog=function(cn,pn,bn){m(this,Zt,pn??null,"f"),m(this,Dn,bn,"f"),m(this,$t,cn??"","f")},ie.prototype._log=function(cn){"function"==typeof p(this,Zt,"f")&&p(this,Zt,"f").call(this,cn,p(this,Dn,"f"))},ie.prototype._logAll=function(cn){p(this,$t,"f")===a.logAll&&this._log(cn)},ie.prototype._handleBasicResult=function(cn,pn){return delete cn.code,delete cn.message,cn},ie.prototype._handleImageData=function(cn,pn){var bn,nr,d;if("object"==typeof cn.imageData)if(null!=cn.imageCount&&cn.imageCount>1)for(var b=0;b<cn.imageCount;b++)cn.imageData[b]=p(bn=pn.context,me,"m",Go).call(bn,cn.imageData[b],cn.blobType,pn.params.returnBlob);else cn.imageData=p(nr=pn.context,me,"m",Go).call(nr,cn.imageData,cn.blobType,pn.params.returnBlob);return"object"==typeof cn.pdfData&&(cn.pdfData=p(d=pn.context,me,"m",Go).call(d,cn.pdfData,cn.blobType,pn.params.returnBlob)),cn},ie.prototype._handleResult=function(cn,pn){var bn,nr,d,b=p(nr=pn.context,me,"m",Mo).call(nr,cn);if(void 0===b.code||!b.code&&"Successful."===b.message)b=pn.handleResult(b,pn),p(d=pn.context,me,"m",po).call(d),(0,pn.resolve)(b);else{var A={code:b.code,message:b.code===f.wasmException?u.WASM_EXCEPTION_ERROR+"("+(null===(bn=pn.params)||void 0===bn?void 0:bn.moduleName)+":"+pn.func+":"+b.message+")":b.message};pn.context.terminated?pn.resolve(A):pn.reject(A)}},ie.prototype._execTask=function(cn){var pn=this,bn=p(pn,Et,"f");if(pn._logAll(cn),bn)try{bn.execTask(cn.func,cn.params).then(function(d){pn._log(d),pn._handleResult(p(pn,me,"m",Mo).call(pn,d),cn)}).catch(function(d){pn._log(d),p(pn,me,"m",po).call(pn);var b=d;"object"==typeof d&&null!=d.message&&(b=d.message);var A={code:f.wasmJsWorkerRunFailed,message:b};p(pn,qr,"f")?cn.resolve(A):cn.reject(A)})}catch(d){p(pn,me,"m",po).call(pn),pn._log(d);var nr={code:f.wasmJsWorkerRunException,message:d.message,stack:d.stack};p(pn,qr,"f")?cn.resolve(nr):cn.reject(nr)}},ie.prototype._cancelAllTasks=function(cn,pn){for(var bn=0,nr=p(this,ft,"f");bn<nr.length;bn++){var d=nr[bn];if(void 0!==d){var b={code:cn,message:pn};p(this,qr,"f")?d.resolve(b):d.reject(b)}}m(this,ft,[],"f")},ie.prototype._createTask=function(cn,pn,bn){var nr={moduleName:p(this,z,"f").name,insId:p(this,er,"f")},d={id:m(this,Yt,+p(this,Yt,"f")+1,"f"),func:cn,params:nr};return d.promise=new Promise(function(b,A){d.resolve=b,d.reject=A}),d.func=cn,d.context=this,d.handleResult=void 0!==bn&&bn?bn:this._handleBasicResult,d.params.input=void 0!==pn&&pn?pn:"",d.params.returnType=r.ReturnedDataType.RT_AUTO,d.params.returnBlob=!0,_e.LogLevel===a.logDebug&&(d.params.logLevel=a.logDebug),d},ie.prototype._addTask=function(cn,pn){return p(this,ur,"f")===o.destroyed?cn.reject({code:f.wasmJsObjectNotInit,message:p(this,qr,"f")?"object has been disposed":"object not init"}):p(this,ur,"f")===o.failed?cn.reject({code:f.wasmJsObjectInitFailed,message:p(this,Co,"f")}):(pn?p(this,ft,"f").unshift(cn):p(this,ft,"f").push(cn),p(this,me,"m",po).call(this)),cn.promise},ie.prototype.terminate=function(cn){var pn=this;cn=null==cn||cn;var bn=p(pn,me,"m",ki).call(pn);m(pn,qr,!0,"f");var nr=Be.Instance;nr&&nr.removeInstanceInWorker(p(pn,z,"f"),p(pn,Et,"f"),p(pn,er,"f"),cn),bn.then(function(d){m(pn,Et,null,"f"),pn._log(p(pn,z,"f").name+" destroy return: "),pn._log(d)}).catch(function(d){m(pn,Et,null,"f"),pn._log(p(pn,z,"f").name+" destroy failed"),pn._log(d)}),m(pn,ur,"","f")},ie.prototype._readFile=function(cn,pn){return new Promise(function(bn,nr){return ao.read(cn).then(function(d){bn(d)},function(d){var b;p(b=pn.context,me,"m",aa).call(b,pn,d,f.wasmJsReadFileFailed)}).catch(function(d){var b;p(b=pn.context,me,"m",aa).call(b,pn,d,f.wasmJsReadFileFailed)})})},oe=ie,z=new WeakMap,dt=new WeakMap,ft=new WeakMap,Et=new WeakMap,Yt=new WeakMap,$t=new WeakMap,Zt=new WeakMap,Dn=new WeakMap,er=new WeakMap,Mn=new WeakMap,sr=new WeakMap,ti=new WeakMap,Rr=new WeakMap,Co=new WeakMap,ur=new WeakMap,qr=new WeakMap,Eo=new WeakMap,ii=new WeakMap,me=new WeakSet,ya=function cn(pn){var bn=pn??this;if(p(bn,Mn,"f")&&clearTimeout(p(bn,Mn,"f")),p(bn,Et,"f")&&p(bn,Et,"f").alive)return p(bn,Et,"f");var nr=Be.Instance;nr?nr.getWorker(p(bn,z,"f"),p(bn,er,"f")).then(function(d){if(m(bn,Et,d,"f"),p(bn,Et,"f")&&p(bn,Et,"f").alive)p(bn,ft,"f").length>0&&p(bn,me,"m",po).call(bn);else{var b=nr.getModuleLoadedError(p(bn,z,"f").name);if(b?.code)return bn._cancelAllTasks(f.wasmJsNotLoaded,b.message),p(bn,Et,"f");p(bn,ft,"f").length>0&&m(bn,Mn,setTimeout(p(bn,me,"m",cn),50,bn),"f")}return p(bn,Et,"f")}).catch(function(d){return p(bn,Et,"f")}):bn._cancelAllTasks(f.wasmJsNotLoaded,"wasm env not loaded or unloaded")},po=function(){if(this._logAll(p(this,ft,"f")),p(this,ur,"f")!=o.init)if(p(this,Et,"f")&&p(this,Et,"f").alive){if(p(this,ft,"f").length>0){var cn=p(this,ft,"f")[0];p(this,ur,"f")!==o.ready&&"init"!==cn.func||(delete p(this,ft,"f")[0],p(this,ft,"f").splice(0,1),this._execTask(cn))}}else{if(p(this,Et,"f")&&!p(this,Et,"f").alive&&p(this,ft,"f").length>0&&"init"!=p(this,ft,"f")[0].func)return m(this,Et,null,"f"),void p(this,me,"m",jo).call(this);p(this,ft,"f").length>0&&p(this,me,"m",ya).call(this,this)}else p(this,me,"m",jo).call(this)},aa=function(cn,pn,bn){var nr=pn;return"object"!=typeof nr&&((nr={}).code=bn,nr.message=pn),cn.context.terminated?cn.resolve(nr):cn.reject(nr)},Go=function(cn,pn,bn){return bn?null!=pn?new Blob([cn],{type:pn}):new Blob([cn]):cn},Mo=function(cn){try{return"string"==typeof cn?JSON.parse(cn):cn}catch{return cn}},jo=function(){var cn=this;cn._prepareModule(p(this,z,"f"));var pn=this._createTask("init");pn.params.key=p(this,dt,"f"),pn.params.uuid=p(this,ii,"f"),pn.params.licMode=p(this,Eo,"f"),pn.params.val={nv:p(this,sr,"f"),mb:p(this,ti,"f"),dm:p(this,Rr,"f")},pn.handleResult=function(bn,nr){return m(nr.context,ur,o.ready,"f"),bn},m(this,ur,o.pending,"f"),this._addTask(pn,!0),pn.promise.then(function(bn){cn._log(p(cn,z,"f").name+" init return: "),cn._log(bn)}).catch(function(bn){m(cn,ur,o.failed,"f"),m(cn,Co,bn.message,"f"),cn._log(p(cn,z,"f").name+" init failed"),cn._log(bn),cn._cancelAllTasks(f.wasmJsObjectInitFailed,bn.message)})},ki=function(){if(p(this,ur,"f")==o.pending||p(this,ur,"f")==o.ready){var cn=this._createTask("destroy");return this._addTask(cn),cn.promise}return Promise.resolve(!0)},ge={value:0},ie}(),Gn=function(ie){function me(oe,ge){return ie.call(this,oe,ge)||this}return _(me,ie),me.prototype._prepareModule=function(oe){var ge=Be.Instance;ge.addModules(_e.ImageIOModule),_e.LicMode===s.DLS_KEY&&ge.addModules(_e.CryptoModule),p(me,vr,"m",ei).call(me,_e.ImageIOModule,oe),ge.addModules(oe)},me}(Li);vr=Gn,ei=function(ie,me){me.resourceDir=ie.resourceDir,me.crossScript=ie.crossScript,me.script=ie.script,me.useSimd=ie.useSimd,me.useSimd=me.name===a.imgProc&&_e.UseSimd,me.fetchOptions=ie.fetchOptions,me.defHeapSize=ie.defHeapSize,me.maxHeapSize=me.maxHeapSize};var wr,Or=function(ie){function me(oe){var ge=ie.call(this,_e.ImagecoreModule,oe)||this;return fi.add(ge),pr.set(ge,0),ge}return _(me,ie),me.prototype.getImageFormat=function(oe){return h(this,void 0,void 0,function(){var ge,z,dt;return y(this,function(ft){switch(ft.label){case 0:return z=(ge=this)._createTask("GetImageFormat"),[4,ge._readFile(oe,z)];case 1:return dt=ft.sent(),z.params.input=dt,ge._addTask(z),[2,z.promise]}})})},me.prototype.readImageInfo=function(oe){return h(this,void 0,void 0,function(){var ge,z,dt;return y(this,function(ft){switch(ft.label){case 0:return z=(ge=this)._createTask("ReadImageInfo"),[4,ge._readFile(oe,z)];case 1:return dt=ft.sent(),z.params.input=dt,ge._addTask(z),[2,z.promise]}})})},me.prototype.getMD5=function(oe){return h(this,void 0,void 0,function(){var ge,z,dt;return y(this,function(ft){switch(ft.label){case 0:return z=(ge=this)._createTask("GetMD5"),[4,ge._readFile(oe,z)];case 1:return dt=ft.sent(),z.params.input=dt,z.handleResult=function(Et,Yt){return Et.MD5},ge._addTask(z),[2,z.promise]}})})},me.prototype.getLicenseInfo=function(){return h(this,void 0,void 0,function(){return y(this,function(oe){return[2,this._addTask(this._createTask("GetLicenseInfo"))]})})},me.prototype.getAesResult=function(oe){return h(this,void 0,void 0,function(){return y(this,function(ge){return[2,this._addTask(this._createTask("GetAesResult",[oe=oe??""]))]})})},me.prototype.saveImage=function(oe,ge,z,dt,ft){return h(this,void 0,void 0,function(){return y(this,function(Et){return(ft=null!=ft&&ft)?[2,p(this,fi,"m",Fr).call(this,oe,void 0,void 0,void 0,1,void 0,void 0,ge,z,dt)]:[2,p(this,fi,"m",Fr).call(this,oe,void 0,void 0,void 0,void 0,void 0,void 0,ge,z,dt)]})})},me.prototype.readImage=function(oe,ge,z,dt,ft){return h(this,void 0,void 0,function(){var Et,Yt,$t;return y(this,function(Zt){switch(Zt.label){case 0:return ge=ge??this._outputType,z=z??this._jpegQuality,dt=null!=dt&&dt,ft=null!=ft&&ft,Yt=(Et=this)._createTask("ReadImage"),[4,Et._readFile(oe,Yt)];case 1:return $t=Zt.sent(),Yt.params.input=[$t,ge,z,ft],Yt.params.returnType=dt?r.ReturnedDataType.RT_BASE64:r.ReturnedDataType.RT_AUTO,Yt.params.returnBlob=!dt,Yt.handleResult=Et._handleImageData,Et._addTask(Yt),[2,Yt.promise]}})})},me.prototype.openTiff=function(oe){return h(this,void 0,void 0,function(){var ge,z,dt,ft,Et;return y(this,function(Yt){switch(Yt.label){case 0:return z=(ge=this)._createTask("LoadTiff"),[4,ge._readFile(oe,z)];case 1:return dt=Yt.sent(),z.params.input=dt,ge._addTask(z),[4,z.promise];case 2:return(ft=Yt.sent()).srcBuffer&&"[object ArrayBuffer]"!=(Et=Object.prototype.toString.call(oe))&&"[object Uint8ClampedArray]"!=Et&&delete ft.srcBuffer,[2,ft]}})})},me.prototype.readTiff=function(oe,ge,z,dt){oe=oe??0,ge=ge??this._outputType,z=null!=z&&z,dt=null!=dt&&dt;var ft=this._createTask("ReadTiffPage");return ft.params.input=[oe,ge,dt],ft.params.returnType=z?r.ReturnedDataType.RT_BASE64:r.ReturnedDataType.RT_AUTO,ft.params.returnBlob=!z,ft.handleResult=this._handleImageData,this._addTask(ft)},me.prototype.readTiffInfo=function(oe){oe=oe??0;var ge=this._createTask("GetTiffPageInfo");return ge.params.input=[oe],this._addTask(ge)},me.prototype.closeTiff=function(){return this._addTask(this._createTask("EndReadTiff",null,this._handleBooleanResult))},me.prototype.createTiff=function(){return this._addTask(this._createTask("NewTiff",null,this._handleBooleanResult))},me.prototype.appendImage=function(oe,ge,z,dt,ft){return h(this,void 0,void 0,function(){var Et,Yt,$t;return y(this,function(Zt){switch(Zt.label){case 0:return ge=ge??this._inputType,z=z??p(this,pr,"f"),dt=dt??this._jpegQuality,ft=null!=ft&&ft,Yt=(Et=this)._createTask("AppendImageToTiff"),[4,Et._readFile(oe,Yt)];case 1:return $t=Zt.sent(),Yt.params.input=[$t,ge,z,dt,ft],Yt.handleResult=Et._handleBooleanResult,Et._addTask(Yt),[2,Yt.promise]}})})},me.prototype.addTag=function(oe,ge,z){return this._addTask(this._createTask("AddTagToNextPage",[oe,ge,z=null!=z&&z],this._handleBooleanResult))},me.prototype.getTiff=function(oe){var ge=this._createTask("GetTiffStream");return ge.handleResult=this._handleImageData,ge.params.returnType=oe??r.ReturnedDataType.RT_AUTO,ge.params.returnBlob=oe!=r.ReturnedDataType.RT_AUTO,this._addTask(ge)},me.prototype.getMemoryUsed=function(){return this._addTask(this._createTask("getMemoryUsed",null,function(oe,ge){return oe.memoryUsed}))},me.prototype.getMultiPartFile=function(oe,ge){return this._addTask(this._createTask("ds_get_file",[oe,ge],function(z,dt){return z}))},me}(Gn);pr=new WeakMap,fi=new WeakSet,Fr=function(ie,me,oe,ge,z,dt,ft,Et,Yt,$t){return h(this,void 0,void 0,function(){var Zt,Dn,er;return y(this,function(Mn){switch(Mn.label){case 0:return me=me??this._inputType,oe=oe??0,ge=ge??0,z=z??24,dt=dt??96,ft=ft??96,Et=Et??this._outputType,Yt=Yt??this._jpegQuality,$t=$t??r.ReturnedDataType.RT_AUTO,Dn=(Zt=this)._createTask("SaveImage"),[4,Zt._readFile(ie,Dn)];case 1:return er=Mn.sent(),Dn.params.input=[er,me,oe,ge,z,dt,ft,Et,Yt],Dn.params.returnType=$t,Dn.params.returnBlob=$t!=r.ReturnedDataType.RT_BASE64,Dn.handleResult=Zt._handleImageData,Zt._addTask(Dn),[2,Dn.promise]}})})},function(ie){ie[ie.NearestNeighbour=1]="NearestNeighbour",ie[ie.Bilinear=2]="Bilinear",ie[ie.Bicublic=3]="Bicublic",ie[ie.BestQuality=5]="BestQuality"}(wr||(wr={}));var Ei,xr,Jr=function(ie){function me(oe){return ie.call(this,_e.ImageProcModule,oe)||this}return _(me,ie),me.prototype.initImage=function(oe,ge,z,dt,ft){return h(this,void 0,void 0,function(){var Et,Yt,$t;return y(this,function(Zt){switch(Zt.label){case 0:return ge=null!=ge&&ge,z=z??0,dt=dt??0,ft=null!=ft&&ft,(Yt=(Et=this)._createTask("InitImageObject")).params.input=[oe,z,dt],ge||ft?(Yt.params.input.push(ge?r.ImageType.IT_RGBA:r.ImageType.IT_BGRA),Et._addTask(Yt),[3,3]):[3,1];case 1:return[4,Et._readFile(oe,Yt)];case 2:$t=Zt.sent(),Yt.params.input[0]=$t,Yt.params.input.push(r.ImageType.IT_ALL),Et._addTask(Yt),Zt.label=3;case 3:return[2,Yt.promise]}})})},me.prototype.rotate=function(oe,ge,z,dt){return((oe=oe??0)<0||oe>360)&&(oe%=360)<0&&(oe+=360),this._addTask(this._createTask("RotateEx",[oe,z=null!=z&&z,dt=dt??wr.Bicublic,ge=ge??"FFFFFF"],this._handleBooleanResult))},me.prototype.flip=function(oe){oe=oe??1;var ge=this._createTask("");return ge.handleResult=this._handleBooleanResult,1===oe?ge.func="Flip":-1===oe&&(ge.func="Mirror"),this._addTask(ge),ge.promise},me.prototype.erase=function(oe,ge,z,dt,ft){ft=ft??"FFFFFF";var Et=this._createTask("Erase");return Et.handleResult=this._handleBooleanResult,Et.params.input=[oe,ge,z,dt,ft],this._addTask(Et),Et.promise},me.prototype.crop=function(oe,ge,z,dt){return this._addTask(this._createTask("Crop",[oe,ge,z,dt],this._handleBooleanResult))},me.prototype.resize=function(oe,ge,z){return this._addTask(this._createTask("ChangeImageSize",[oe,ge,z=z??wr.BestQuality],this._handleBooleanResult))},me.prototype.toGrayscale=function(oe){(oe=oe??1)<1&&(oe=1),oe>3&&(oe=3);var ge="";return 1===oe?ge="0":2===oe?ge="3;3;720;1.05":3===oe&&(ge="3;5;1080;1.05"),this._addTask(this._createTask("ConvertToGrayScale",ge,this._handleBooleanResult))},me.prototype.toBinary=function(oe,ge){(ge=ge??1)<1&&(ge=1),ge>3&&(ge=3);var z="";return null!=oe&&(oe?z="1":1===ge?z="0":2===ge?z="2;3;720;1.05":3===ge&&(z="2;5;1080;1.05")),this._addTask(this._createTask("ConvertToBWScale",z,this._handleBooleanResult))},me.prototype.invert=function(){return this._addTask(this._createTask("Invert",null,this._handleBooleanResult))},me.prototype.setImageWidth=function(oe,ge){return this._addTask(this._createTask("SetImageWidth",[oe,ge=ge??"FFFFFF"],this._handleBooleanResult))},me.prototype.setImageHeight=function(oe,ge){return this._addTask(this._createTask("SetImageHeight",[oe,ge=ge??"FFFFFF"],this._handleBooleanResult))},me.prototype.setDPI=function(oe,ge,z,dt,ft,Et){return this._addTask(this._createTask("SetDPI",[oe,ge,z,dt,ft=null!=ft&&ft,Et=Et??wr.Bilinear],this._handleBooleanResult))},me.prototype.getImage=function(oe,ge,z,dt,ft,Et,Yt,$t,Zt){oe=oe??this._jpegQuality,ge=null==ge||ge,dt=dt??0,ft=ft??0,Et=Et??0,Yt=null==Yt||Yt,$t=(z=null!=z&&z)&&null==$t?r.ImageType.IT_JPG:$t??r.ImageType.IT_ALL,Zt=null!=Zt&&Zt;var Dn=this._createTask("GetCurrentImage");return Dn.params.input=[$t,dt,ft,Et,!1,oe,ge,Zt],Dn.params.returnBlob=Yt,Dn.handleResult=this._handleImageData,this._addTask(Dn)},me.prototype.getSkewAngle=function(oe){return this._addTask(this._createTask("GetSkewAngle",[oe=oe??""],function(ge,z){return ge.skewAngle}))},me.prototype.freeReservedData=function(){return this._addTask(this._createTask("FreeReservedData",null,this._handleBooleanResult))},me.prototype.detectDocument=function(oe,ge,z,dt,ft){return this._addTask(this._createTask("DocumentDetect",[oe=oe??wr.Bilinear,(ge=ge??75)/100,z=z??100,(dt=dt??0)/255,ft=ft??"","1"]))},me.prototype.perspective=function(oe,ge,z,dt,ft,Et,Yt,$t){return this._addTask(this._createTask("Perspective",[oe,ge,z,dt,ft,Et,Yt,$t],this._handleBooleanResult))},me.prototype.changeBrightness=function(oe,ge){return oe=oe??0,0!=(ge=ge??1)&&1!=ge&&(ge=0),this._addTask(1===ge?this._createTask("ChangeBrightnessAndContrast",[oe,0],this._handleBooleanResult):this._createTask("ChangeBrightness",[Math.floor(oe/1e3*255)],this._handleBooleanResult))},me.prototype.changeContrast=function(oe,ge){return oe=oe??0,0!=(ge=ge??1)&&1!=ge&&(ge=0),this._addTask(1===ge?this._createTask("ChangeBrightnessAndContrast",[0,oe],this._handleBooleanResult):this._createTask("ChangeContrast",[1+oe/1e3],this._handleBooleanResult))},me.prototype.changeBrightnessAndContrast=function(oe,ge){return this._addTask(this._createTask("ChangeBrightnessAndContrast",[oe=oe??0,ge=ge??0],this._handleBooleanResult))},me.prototype.removeShadow=function(oe,ge){ge=ge??1.05,(oe=oe??1)<1&&(oe=1),oe>3&&(oe=3);var z="5";return 1===oe?z+=";3;720;"+ge:2===oe?z+=";5;1080;"+ge:3===oe&&(z+=";10;0;"+ge),this._addTask(this._createTask("ShadowRemovel",[z],this._handleBooleanResult))},me.prototype.enhanceAndSharpenImage=function(){return this._addTask(this._createTask("EnhanceAndSharpen",[""],this._handleBooleanResult))},me.prototype.brighten=function(){return this._addTask(this._createTask("Brighten",[""],this._handleBooleanResult))},me.prototype.getBlurryScore=function(){return this._addTask(this._createTask("GetBlurScore",[""],function(oe,ge){return oe.blurryScore}))},me.prototype.drawQuadrangle=function(oe,ge,z,dt,ft,Et,Yt,$t,Zt,Dn){var er=(Zt=Zt??"FFFFFF")+";"+(Dn=Dn??5);return this._addTask(this._createTask("DrawQuadrangle",[oe,ge,z,dt,ft,Et,Yt,$t,er],this._handleBooleanResult))},me}(Gn),Mi=function(){function ie(){}return ie.resize=function(me,oe,ge,z,dt,ft){return h(this,void 0,void 0,function(){var Et,Yt,$t,Zt,Dn;return y(this,function(er){switch(er.label){case 0:if(z<=0||z>=oe&&z>=ge)return[2,{imageData:me}];ft=null!=ft&&ft,Et=new Jr,er.label=1;case 1:return er.trys.push([1,,9,10]),[4,Et.initImage(me)];case 2:return er.sent(),Yt=void 0,$t=void 0,Dn=dt??wr.BestQuality,Zt=oe>ge?oe/z:ge/z,Yt=Math.floor(oe/Zt+.5),$t=Math.floor(ge/Zt+.5),ft?[4,Et.resize(Yt,$t,Dn)]:[3,5];case 3:return er.sent(),[4,Et.toBinary(!1)];case 4:return er.sent(),[3,7];case 5:return[4,Et.resize(Yt,$t,Dn)];case 6:er.sent(),er.label=7;case 7:return[4,Et.getImage()];case 8:return[2,er.sent()];case 9:return Et.terminate(),[7];case 10:return[2]}})})},ie.createImage=function(me){var oe,ge,z,dt,ft,Et,Yt,$t,Zt;return h(this,void 0,void 0,function(){var Dn,er,Mn,sr,ti,Rr,Co,ur,qr,Eo,ii,ya,ki,cn,pn,bn,nr,d,b,O;return y(this,function(Y){switch(Y.label){case 0:Dn=new Jr,Y.label=1;case 1:return Y.trys.push([1,,14,15]),er={src:null,result:null,preview:null},ti=null!==(ge=null!==(oe=(Mn=me.source).imageWidth)&&void 0!==oe?oe:Mn.width)&&void 0!==ge?ge:0,Rr=null!==(dt=null!==(z=Mn.imageHeight)&&void 0!==z?z:Mn.height)&&void 0!==dt?dt:0,Co=Mn.imageData||Mn.data,null==(sr=me.output)||null==sr.orgImage&&null==sr.previewImage?[2,er]:(ur=null!==(ft=Mn.rgba)&&void 0!==ft&&ft,qr=null!==(Et=Mn.bgra)&&void 0!==Et&&Et,Eo=null!==(Yt=me.doPerspective)&&void 0!==Yt&&Yt,ii=Mn.angle||0,[4,Dn.initImage(Co,ur,ti,Rr,qr)]);case 2:return ya=Y.sent(),er.src=ya.srcBuffer,Eo&&me.polygon?[4,Dn.perspective(me.polygon.points[0],me.polygon.points[1],me.polygon.points[2],me.polygon.points[3],me.polygon.points[4],me.polygon.points[5],me.polygon.points[6],me.polygon.points[7])]:[3,4];case 3:Y.sent(),Y.label=4;case 4:return 0==ii?[3,6]:((ii<0||ii>360)&&(ii%=360)<0&&(ii+=360),[4,Dn.rotate(ii)]);case 5:Y.sent(),Y.label=6;case 6:return sr.orgImage?[4,Dn.getImage(sr.orgImage.quality,!1,ur||qr,null!=Mn.imageBitDepth?Mn.imageBitDepth:void 0,null!=Mn.imageXResolution?Mn.imageXResolution:void 0,null!=Mn.imageYResolution?Mn.imageYResolution:void 0,null==sr.orgImage.returnBlob||sr.orgImage.returnBlob,sr.orgImage.returnType,_e.NavInfo.bMac||_e.NavInfo.biPhone||_e.NavInfo.biPad)]:[3,8];case 7:ki=Y.sent(),sr.orgImage.returnType==r.ImageType.IT_BGRA?ki.bgra=!0:sr.orgImage.returnType==r.ImageType.IT_RGBA&&(ki.rgba=!0),er.result=ki,Y.label=8;case 8:return sr.previewImage?(cn=ti,pn=Rr,90!=ii&&270!=ii||(cn=Rr,pn=ti),bn=Math.min((null!==($t=sr.previewImage.width)&&void 0!==$t?$t:ti)/cn,(null!==(Zt=sr.previewImage.height)&&void 0!==Zt?Zt:Rr)/pn),nr=void 0,d=void 0,90==ii||270==ii?(nr=Math.floor(Rr*bn+.5),d=Math.floor(ti*bn+.5)):(nr=Math.floor(ti*bn+.5),d=Math.floor(Rr*bn+.5)),[4,Dn.resize(nr,d,sr.previewImage.nInterplationMethod)]):[3,13];case 9:return Y.sent(),!me.polygon||Eo?[3,11]:(b=me.polygon.points,0!=ii&&(b=p(this,Ei,"m",xr).call(this,b,ii,cn,pn)),[4,Dn.drawQuadrangle(Math.floor(b[0]*bn+.5),Math.floor(b[1]*bn+.5),Math.floor(b[2]*bn+.5),Math.floor(b[3]*bn+.5),Math.floor(b[4]*bn+.5),Math.floor(b[5]*bn+.5),Math.floor(b[6]*bn+.5),Math.floor(b[7]*bn+.5),me.polygon.strokeColor,me.polygon.lineWidth)]);case 10:Y.sent(),Y.label=11;case 11:return[4,Dn.getImage(sr.previewImage.quality,!0,ur||qr,void 0,void 0,void 0,null==sr.previewImage.returnBlob||sr.previewImage.returnBlob,sr.previewImage.returnType)];case 12:O=Y.sent(),sr.previewImage.returnType==r.ImageType.IT_BGRA?O.bgra=!0:sr.previewImage.returnType==r.ImageType.IT_RGBA&&(O.rgba=!0),er.preview=O,Y.label=13;case 13:return[2,er];case 14:return Dn.terminate(),[7];case 15:return[2]}})})},ie.resizeImageWithMeta=function(me,oe,ge,z,dt){return h(this,void 0,void 0,function(){var ft,Et,Yt,$t,Zt,Dn,er;return y(this,function(Rr){switch(Rr.label){case 0:ft=z??85,Et=new Jr,Yt=dt??0,Rr.label=1;case 1:return Rr.trys.push([1,,9,10]),[4,Et.initImage(me)];case 2:return Rr.sent(),$t=void 0,Zt=void 0,Dn=ge??wr.BestQuality,oe.imageWidth>oe.imageHeight?($t=Yt,Zt=Math.floor(oe.imageHeight*Yt/oe.imageWidth+.5)):($t=Math.floor(oe.imageWidth*Yt/oe.imageHeight+.5),Zt=Yt),1!=oe.imageBitDepth?[3,5]:[4,Et.resize($t,Zt,Dn)];case 3:return Rr.sent(),[4,Et.toBinary(!1)];case 4:return Rr.sent(),[3,7];case 5:return[4,Et.resize($t,Zt,Dn)];case 6:Rr.sent(),Rr.label=7;case 7:return[4,Et.getImage(ft,!1,!1,er=oe.imageBitDepth,oe.imageXResolution,oe.imageYResolution,!0,1==er?r.ImageType.IT_PNG:r.ImageType.IT_JPG)];case 8:return[2,Rr.sent()];case 9:return Et.terminate(),[7];case 10:return[2]}})})},ie.getMax4kImage=function(me,oe,ge,z){return h(this,void 0,void 0,function(){var dt,ft,Et,Yt;return y(this,function(Zt){switch(Zt.label){case 0:dt=ge??85,Et=new Or,Zt.label=1;case 1:return Zt.trys.push([1,,3,4]),[4,Et.readImageInfo(me)];case 2:return Yt=Zt.sent(),ft={imageWidth:Yt.imageWidth,imageHeight:Yt.imageHeight,imageBitDepth:Yt.imageBitDepth,imageXResolution:Yt.imageXResolution,imageYResolution:Yt.imageYResolution},[3,4];case 3:return Et.terminate(),[7];case 4:return(_e.NavInfo.biPhone||_e.NavInfo.biPad)&&z&&(ft.imageWidth>z||ft.imageHeight>z)?[4,ie.resizeImageWithMeta(me,ft,oe,ge,z)]:[3,6];case 5:return[2,Zt.sent()];case 6:Et=new Or,Zt.label=7;case 7:return Zt.trys.push([7,,9,10]),[4,Et.readImage(me,1==ft.imageBitDepth?r.ImageType.IT_PNG:r.ImageType.IT_JPG,dt,!1)];case 8:return[2,Zt.sent()];case 9:return Et.terminate(),[7];case 10:return[2]}})})},ie}();Ei=Mi,xr=function(ie,me,oe,ge){for(var z=[],dt=0;dt<ie.length;dt+=2){var ft=void 0,Et=void 0,Yt=ie[dt],$t=ie[dt+1];90==me?(ft=oe-$t,Et=Yt):180==me?(ft=oe-Yt,Et=ge-$t):270==me?(ft=$t,Et=ge-Yt):(ft=Yt,Et=$t),z.push(ft,Et)}return z};var nn,on,fn,mn=function(){function ie(){}return ie.decode=function(me){var oe={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};function ge(z){var dt,ft,Et,Yt,$t=[],Zt=z.length;for(dt=0;dt<Zt;dt++)0==((ft=z.charCodeAt(dt))>>7&255)?$t.push(z.charAt(dt)):6==(ft>>5&255)?(Yt=(31&ft)<<6|63&(Et=z.charCodeAt(++dt)),$t.push(String.fromCharCode(Yt))):14==(ft>>4&255)&&(Yt=(255&(ft<<4|(Et=z.charCodeAt(++dt))>>2&15))<<8|(3&Et)<<6|63&z.charCodeAt(++dt),$t.push(String.fromCharCode(Yt)));return $t.join("")}return function(z){for(var dt,ft,Et,Yt,$t=[],Zt=0,Dn=z.length;Zt<Dn;){do{dt=oe.decodeChars[255&z.charCodeAt(Zt++)]}while(Zt<Dn&&-1==dt);if(-1==dt)break;do{ft=oe.decodeChars[255&z.charCodeAt(Zt++)]}while(Zt<Dn&&-1==ft);if(-1==ft)break;$t.push(String.fromCharCode(dt<<2|(48&ft)>>4));do{if(61==(Et=255&z.charCodeAt(Zt++)))return ge($t.join(""));Et=oe.decodeChars[Et]}while(Zt<Dn&&-1==Et);if(-1==Et)break;$t.push(String.fromCharCode((15&ft)<<4|(60&Et)>>2));do{if(61==(Yt=255&z.charCodeAt(Zt++)))return ge($t.join(""));Yt=oe.decodeChars[Yt]}while(Zt<Dn&&-1==Yt);if(-1==Yt)break;$t.push(String.fromCharCode((3&Et)<<6|Yt))}return ge($t.join(""))}(me)},ie}();!function(ie){ie[ie.render=1]="render",ie[ie.extractImageOnly=2]="extractImageOnly",ie[ie.auto=3]="auto",ie[ie.renderWithAnnot=4]="renderWithAnnot"}(fn||(fn={}));var Sn=function(ie){function me(oe){var ge=ie.call(this,_e.PdfReaderModule,oe)||this;return nn.set(ge,200),on.set(ge,3),ge._outputType=r.ImageType.IT_ALL,ge}return _(me,ie),me.prototype.open=function(oe,ge){return h(this,void 0,void 0,function(){var z,dt,ft;return y(this,function(Et){switch(Et.label){case 0:return ge=ge??"",dt=(z=this)._createTask("LoadPdf"),[4,z._readFile(oe,dt)];case 1:return ft=Et.sent(),dt.params.input=[ft,ge],dt.handleResult=function(Yt,$t){if(Yt.srcBuffer){var Zt=Object.prototype.toString.call(oe);"[object ArrayBuffer]"!=Zt&&"[object Uint8ClampedArray]"!=Zt&&delete Yt.srcBuffer}var Dn=mn.decode(Yt.infoBase64);try{var er=void 0;try{Dn.replace(new RegExp("\\\\","gi"),"\\\\"),er=JSON.parse(Dn)}catch{er=Dn}var Mn={PdfCount:Yt.pageCount,PdfInfo:er,isTextBased:Yt.isTextBased};return Yt.srcBuffer&&(Mn.srcBuffer=Yt.srcBuffer,delete Yt.srcBuffer),Mn}catch(sr){$t.reject({code:f.wasmJsInvalidJson,message:sr.message,stack:sr.stack})}},z._addTask(dt),[2,dt.promise]}})})},me.prototype.readPage=function(oe,ge,z,dt,ft,Et,Yt){return h(this,void 0,void 0,function(){var $t;return y(this,function(Zt){return oe=oe??0,ge=ge??p(this,nn,"f"),z=z??p(this,on,"f"),dt=dt??this._outputType,Et=null!=Et&&Et,ft=null!=ft&&ft,Yt=null!=Yt&&Yt,($t=this._createTask("ReadPdfPage")).params.input=[oe,ge,z,dt,ft,Yt],$t.params.returnType=Et?r.ReturnedDataType.RT_BASE64:r.ReturnedDataType.RT_AUTO,$t.params.returnBlob=!Et,$t.handleResult=this._handleImageData,[2,this._addTask($t)]})})},me.prototype.close=function(){return h(this,void 0,void 0,function(){return y(this,function(oe){return[2,this._addTask(this._createTask("UnloadPdf",null,this._handleBooleanResult))]})})},me.prototype.readPageAnnot=function(oe){return h(this,void 0,void 0,function(){var ge;return y(this,function(z){return(ge=this._createTask("ReadPdfAnnot",[oe=oe??0])).handleResult=function(dt,ft){var Et=mn.decode(dt.annotBase64);try{var Yt=void 0;try{Et.replace(new RegExp("\\\\","gi"),"\\\\"),Yt=JSON.parse(Et)}catch{Yt=Et}return{code:dt.code,message:dt.message,pageIndex:dt.pageIndex,annots:Yt}}catch($t){ft.reject({code:f.wasmJsInvalidJson,message:$t.message,stack:$t.stack})}},[2,this._addTask(ge)]})})},me.prototype.setRenderLimitImageSize=function(oe,ge){return h(this,void 0,void 0,function(){return y(this,function(z){return[2,this._addTask(this._createTask("SetRenderLimitImageSize",[oe=oe??0,ge=ge??0],this._handleBooleanResult))]})})},me.prototype.findText=function(oe,ge,z){return h(this,void 0,void 0,function(){return y(this,function(dt){return[2,this._addTask(this._createTask("FindText",[oe,ge,z=z??0]))]})})},me.prototype.addSystemFont=function(oe,ge){return h(this,void 0,void 0,function(){return y(this,function(z){return[2,this._addTask(this._createTask("AddSystemFont",[oe,ge]))]})})},me.prototype.getModifiedPdf=function(oe){return h(this,void 0,void 0,function(){var ge;return y(this,function(z){return(ge=this._createTask("GetModifiedPdf")).params.returnType=oe??r.ReturnedDataType.RT_AUTO,ge.params.returnBlob=oe!=r.ReturnedDataType.RT_AUTO,ge.handleResult=this._handleImageData,[2,this._addTask(ge)]})})},me.prototype.addAnnot=function(oe,ge){return h(this,void 0,void 0,function(){var z;return y(this,function(dt){return oe=oe??0,z=ge.toJsonString(),[2,this._addTask(this._createTask("PageAddAnnot",[oe,z],this._handleBooleanResult))]})})},me.prototype.addImage=function(oe,ge,z){return h(this,void 0,void 0,function(){var dt,ft,Et,Yt;return y(this,function($t){switch($t.label){case 0:return oe=oe??0,dt=JSON.stringify(z),Et=(ft=this)._createTask("PageAddImage"),[4,ft._readFile(ge,Et)];case 1:return Yt=$t.sent(),Et.params.input=[oe,dt,Yt,0,0],Et.handleResult=ft._handleBooleanResult,ft._addTask(Et),[2,Et.promise]}})})},me.prototype.addText=function(oe,ge){return h(this,void 0,void 0,function(){var z;return y(this,function(dt){return oe=oe??0,z=JSON.stringify(ge),[2,this._addTask(this._createTask("PageAddText",[oe,z],this._handleBooleanResult))]})})},me.prototype.addPath=function(oe,ge){return h(this,void 0,void 0,function(){var z;return y(this,function(dt){return z=JSON.stringify(ge),[2,this._addTask(this._createTask("PageAddPath",[oe,z],this._handleBooleanResult))]})})},me.prototype.deleteAnnot=function(oe,ge){return h(this,void 0,void 0,function(){return y(this,function(z){return[2,this._addTask(this._createTask("PageDeleteAnnot",[oe=oe??0,ge=ge??0],this._handleBooleanResult))]})})},me.prototype.deletePage=function(oe){return h(this,void 0,void 0,function(){return y(this,function(ge){return[2,this._addTask(this._createTask("DeletePdfPage",[oe=oe??0],this._handleBooleanResult))]})})},me.prototype.changePagesOrder=function(oe){return h(this,void 0,void 0,function(){var ge,z;return y(this,function(dt){for(oe=oe??[],ge="",z=0;z<oe.length;z++)0!=z&&(ge+=","),ge+=oe[z]+1;return[2,this._addTask(this._createTask("ChangePagesOrder",[ge],this._handleBooleanResult))]})})},me.prototype.rotatePageLeft=function(oe){return h(this,void 0,void 0,function(){return y(this,function(ge){return[2,this._addTask(this._createTask("PageRotateLeft",[oe=oe??0],this._handleBooleanResult))]})})},me.prototype.rotatePageRight=function(oe){return h(this,void 0,void 0,function(){return y(this,function(ge){return[2,this._addTask(this._createTask("PageRotateRight",[oe=oe??0],this._handleBooleanResult))]})})},me.prototype.insertBlankPage=function(oe,ge,z){return h(this,void 0,void 0,function(){return y(this,function(dt){return[2,this._addTask(this._createTask("InsertBlankPdfPage",[oe=oe??0,ge=ge??595,z=z??842],this._handleBooleanResult))]})})},me.prototype.mergePdf=function(oe,ge,z,dt){return h(this,void 0,void 0,function(){var ft,Et,Yt,$t,Zt;return y(this,function(Dn){switch(Dn.label){case 0:for(dt=dt??-1,z=z??[],ge=ge??"",Et=(ft=this)._createTask("MergePdfPage"),Yt="",$t=0;$t<z.length;$t++)0!=$t&&(Yt+=","),Yt+=z[$t]+1;return[4,ft._readFile(oe,Et)];case 1:return Zt=Dn.sent(),Et.params.input=[Zt,dt,ge,Yt],Et.handleResult=ft._handleBooleanResult,ft._addTask(Et),[2,Et.promise]}})})},me.prototype.getPageInfo=function(oe){return h(this,void 0,void 0,function(){return y(this,function(ge){return[2,this._addTask(this._createTask("GetPdfPageInfo",[oe=oe??0]))]})})},me}(Li);nn=new WeakMap,on=new WeakMap;var jn,tr,Sr,so,gi,yi=function(ie){function me(oe){return ie.call(this,oe)||this}return _(me,ie),me.prototype.readPage=function(oe,ge,z,dt,ft,Et,Yt,$t,Zt,Dn){var er=Object.create(null,{readPage:{get:function(){return ie.prototype.readPage}}});return h(this,void 0,void 0,function(){var Mn,sr;return y(this,function(ti){switch(ti.label){case 0:return[4,er.readPage.call(this,oe,ge,z,dt,ft,Et,Yt)];case 1:return Mn=ti.sent(),sr={imageWidth:Mn.imageWidth,imageHeight:Mn.imageHeight,imageBitDepth:Mn.imageBitDepth,imageXResolution:Mn.imageXResolution,imageYResolution:Mn.imageYResolution},Dn&&(sr.imageWidth>Dn||sr.imageHeight>Dn)?[4,Mi.resizeImageWithMeta(Mn.imageData,sr,$t,Zt,Dn)]:[3,3];case 2:return[2,ti.sent()];case 3:return[2,Mn]}})})},me}(Sn),Mr=function(ie){function me(oe){return ie.call(this,oe)||this}return _(me,ie),me.prototype.readTiff=function(oe,ge,z,dt,ft,Et,Yt){var $t=Object.create(null,{readTiff:{get:function(){return ie.prototype.readTiff}}});return h(this,void 0,void 0,function(){var Zt,Dn;return y(this,function(er){switch(er.label){case 0:return[4,$t.readTiff.call(this,oe,ge,z,dt)];case 1:return Zt=er.sent(),Dn={imageWidth:Zt.imageWidth,imageHeight:Zt.imageHeight,imageBitDepth:Zt.imageBitDepth,imageXResolution:Zt.imageXResolution,imageYResolution:Zt.imageYResolution},Yt&&(Dn.imageWidth>Yt||Dn.imageHeight>Yt)?[2,Mi.resizeImageWithMeta(Zt.imageData,Dn,ft,Et,Yt)]:[2,Zt]}})})},me}(Or),Bi=function(){function ie(){}return ie.buildWasmFileName=function(me,oe,ge,z){return me+(z?"sn-":"")+oe+ge},ie.base64DecToArr=function(me,oe){for(var ge=me.replace(/[^A-Za-z0-9\+\/]/g,""),z=ge.length,dt=oe?Math.ceil((3*z+1>>>2)/oe)*oe:3*z+1>>>2,ft=new Uint8Array(dt),Et=void 0,Yt=void 0,$t=0,Zt=0,Dn=0;Dn<z;Dn++)if(Yt=3&Dn,$t|=p(this,jn,"m",tr).call(this,ge.charCodeAt(Dn))<<18-6*Yt,3===Yt||z-Dn==1){for(Et=0;Et<3&&Zt<dt;Et++,Zt++)ft[Zt]=$t>>>(16>>>Et&24)&255;$t=0}return ft},ie.isWasmSupport=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var me=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(me instanceof WebAssembly.Module)return new WebAssembly.Instance(me)instanceof WebAssembly.Instance}}catch{}return!1},ie.random=function(){return(Date.now()%10086).toString(36).slice(2)+Math.random().toString(36).slice(2)},ie}();jn=Bi,tr=function(ie){return ie>64&&ie<91?ie-65:ie>96&&ie<123?ie-71:ie>47&&ie<58?ie+4:43===ie?62:47===ie?63:0},function(ie){ie[ie.auto=0]="auto",ie[ie.store=1]="store"}(gi||(gi={}));var To=function(ie){function me(oe){var ge=ie.call(this,_e.PdfWriterModule,oe)||this;return Sr.add(ge),ge}return _(me,ie),me.prototype.initPdfSetting=function(oe){return h(this,void 0,void 0,function(){var ge,z;return y(this,function(dt){return(z=(ge=this)._createTask("InitPdfWriter")).params.input=JSON.stringify(p(ge,Sr,"m",so).call(ge,oe)),z.handleResult=this._handleBooleanResult,[2,ge._addTask(z)]})})},me.prototype.appendPage=function(oe,ge){return h(this,void 0,void 0,function(){var z,dt,ft;return y(this,function(Et){switch(Et.label){case 0:return dt=(z=this)._createTask("AddPageFromImageFileStream"),ge=null!=ge&&ge,[4,z._readFile(oe,dt)];case 1:return ft=Et.sent(),dt.params.input=[ft,ge],dt.handleResult=z._handleBooleanResult,z._addTask(dt),[2,dt.promise]}})})},me.prototype.writePdf=function(oe){return h(this,void 0,void 0,function(){var ge;return y(this,function(z){return(ge=this._createTask("GetPdfContent")).params.returnType=oe??r.ReturnedDataType.RT_AUTO,ge.params.returnBlob=oe!=r.ReturnedDataType.RT_AUTO,ge.handleResult=this._handleImageData,[2,this._addTask(ge)]})})},me.prototype.newPage=function(oe,ge){return h(this,void 0,void 0,function(){var z;return y(this,function(dt){return oe=oe??595,ge=ge??842,(z=this._createTask("NewPdfPage")).params.input=[oe,ge],z.handleResult=this._handleBooleanResult,[2,this._addTask(z)]})})},me.prototype.writePage=function(){return h(this,void 0,void 0,function(){var oe;return y(this,function(ge){return(oe=this._createTask("WritePdfPage")).handleResult=this._handleBooleanResult,[2,this._addTask(oe)]})})},me.prototype.pageSetRotate=function(oe){return h(this,void 0,void 0,function(){var ge;return y(this,function(z){return 0!==(oe=oe??0)&&90!==oe&&180!==oe&&270!==oe&&(oe=0),(ge=this._createTask("PdfPageSetRotate")).params.input=[oe],ge.handleResult=this._handleBooleanResult,[2,this._addTask(ge)]})})},me.prototype.pageAddImage=function(oe,ge,z,dt){return h(this,void 0,void 0,function(){var ft,Et,Yt,$t;return y(this,function(Zt){switch(Zt.label){case 0:return Et=(ft=this)._createTask("PdfPageAddImage"),dt=null!=dt&&dt,ge=ge??0,Yt=JSON.stringify(p(ft,Sr,"m",so).call(ft,z)),[4,ft._readFile(oe,Et)];case 1:return $t=Zt.sent(),Et.params.input=[$t,ge,Yt,dt],Et.handleResult=ft._handleBooleanResult,ft._addTask(Et),[2,Et.promise]}})})},me}(Gn);Sr=new WeakSet,so=function(ie){var me={};if(null!=ie&&"object"==typeof ie)for(var oe in ie)me[oe]=ie[oe];return me};var mr=function(){function ie(){}return ie.log=function(me,oe){this.logLevel===oe&&("function"==typeof this.logFunc?this.logFunc(me):console.log(me))},ie.setLoglevel=function(me,oe){this.logLevel=1===me?a.logDebug:"",this.logFunc=oe,_e.setLogFunc(this.logLevel,oe)},ie.getMemoryUsed=function(){return Be.Instance.getMemoryUsed()},ie.getLicenseInfo=function(me,oe,ge){return h(this,void 0,void 0,function(){var z;return y(this,function(dt){switch(dt.label){case 0:return this.Init(me,oe,ge),[4,Be.Instance.loadModule(_e.ImageIOModule)];case 1:dt.sent(),z=new Or(this.productKey),dt.label=2;case 2:return dt.trys.push([2,,4,5]),[4,z.getLicenseInfo()];case 3:return[2,dt.sent()];case 4:return z.terminate(),[7];case 5:return[2]}})})},ie.Init=function(me,oe,ge){this.productKey=me??this.productKey,void 0!==oe&&(this.licMode=oe?1:0),this.uuid=ge??this.uuid,_e.License=this.productKey,_e.UUID=this.uuid,_e.LicMode=this.licMode,_e.NavInfo=JSON.parse(JSON.stringify(t.navInfo)),_e.Mobile=t.Lib.env.bMobile,_e.UseSimd=this.simdFlag===I.SF_ENABLE||this.simdFlag!==I.SF_DISABLE&&this.getUseSimd();var z={resourceDir:this.resourceDir,workerScript:"",useFastCompEdition:this.useFastcompEdition,useSimd:_e.UseSimd,fetchOptions:this.fetchOptions,defHeapSize:_e.DefHeapSize,maxHeapSize:_e.MaxHeapSize};z.workerScript=_e.ImageIOWorkerJS,z.defHeapSize=this.wasmHeap[this.ImageIOWasm].initHeapSize,z.maxHeapSize=this.wasmHeap[this.ImageIOWasm].maxHeapSize,_e.ImageIOResource=z;var dt=Object.assign({},z);dt.defHeapSize=this.wasmHeap[this.PdfReaderWasm].initHeapSize,dt.maxHeapSize=this.wasmHeap[this.PdfReaderWasm].maxHeapSize,dt.workerScript=_e.PdfReaderWorkerJS,_e.PdfReaderResource=dt,""===this.logLevel||this.logFunc||this.setLoglevel(1,console.log)},ie.loadPdfReader=function(me,oe,ge){return h(this,void 0,void 0,function(){return y(this,function(z){switch(z.label){case 0:return this.Init(me,oe,ge),[4,Be.Instance.loadModule(_e.ImageProcModule)];case 1:return z.sent(),[4,Be.Instance.loadModule(_e.PdfReaderModule)];case 2:return[2,z.sent()]}})})},ie.loadMain=function(me,oe,ge){return h(this,void 0,void 0,function(){var z;return y(this,function(dt){switch(dt.label){case 0:return this.Init(me,oe,ge),[4,Be.Instance.loadModule(_e.ImagecoreModule)];case 1:return z=dt.sent(),Be.Instance.loadModule(_e.ImageProcModule),[2,z]}})})},ie.load=function(me,oe,ge){return h(this,void 0,void 0,function(){return y(this,function(z){switch(z.label){case 0:return Be.Instance.terminate(!0),this.Init(me,oe,ge),[4,this.loadMain(me,oe,ge)];case 1:return z.sent(),[4,this.loadPdfReader(me,oe,ge)];case 2:return z.sent(),[2]}})})},ie.unloadMain=function(){Be.Instance.terminateWorker(_e.ImageIOModule)},ie.unloadPdfReader=function(){Be.Instance.terminateWorker(_e.PdfReaderModule)},ie.unload=function(){return h(this,void 0,void 0,function(){return y(this,function(me){switch(me.label){case 0:return[4,Be.Instance.terminate(!0)];case 1:return me.sent(),[2]}})})},ie.getUseSimd=function(){if(this.useFastcompEdition)return!1;if(this.simdFlag===I.SF_DEF){if(void 0!==navigator.userAgentData&&void 0!==navigator.userAgentData.brands)for(var me=0,oe=navigator.userAgentData.brands;me<oe.length;me++){var ge=oe[me];if(ge.brand&&("Chromium"===ge.brand||"Google Chrome"===ge.brand)&&ge.version&&parseInt(ge.version,10)>=94)return!0}}else if(this.simdFlag===I.SF_ENABLE)return!0;return!1},ie}();mr.resourceDir=t.DWT.ResourcesPath+"/src/",mr.logLevel=t.DWT.Debug?a.logDebug:"",mr.logFunc=null,mr.productKey="",mr.licMode=s.LONG_KEY,mr.uuid="",mr.fetchOptions={mode:"cors",credentials:"same-origin",retries:3,retryDelay:500},mr.simdFlag=I.SF_DEF,mr.useFastcompEdition=!1,mr.ImageIOWasm=0,mr.PdfReaderWasm=1,mr.wasmHeap=[{maxHeapSize:300,initHeapSize:_e.DefHeapSize},{maxHeapSize:200,initHeapSize:_e.DefHeapSize}];var Wa=function(){function ie(){}return ie.IsModuleInstalled=function(){if(Bi.isWasmSupport()){var me=Be.Instance.getModuleStatus(a.pdfR),oe=Be.Instance.getModuleStatus(a.pdfW);return me===o.ready&&oe===o.ready}return!1},ie}();r.ImageProc=Jr,r.ImageProcWrapper=Mi,r.ImagecoreEx=Mr,r.PdfAnnot=En,r.PdfReaderEx=yi,r.PdfSettings=function(){this.version=void 0,this.compression=void 0,this.author=void 0,this.creationDate=void 0,this.creator=void 0,this.keywords=void 0,this.modifiedDate=void 0,this.producer=void 0,this.subject=void 0,this.title=void 0,this.quality=void 0,this.jpegMode=void 0},r.PdfWriter=To,r.WasmEnv=mr,r.pdf=Wa,Object.defineProperty(r,"__esModule",{value:!0})},"object"==typeof exports&&typeof module<"u"?a(exports):("function"==typeof define&&define,a(((r=typeof globalThis<"u"?globalThis:r||self).Dynamsoft=r.Dynamsoft||{},r.Dynamsoft.ImageIO={}))),t.WasmEnv=t.ImageIO.WasmEnv,t.Imagecore=t.ImageIO.ImagecoreEx,t.ImageProc=t.ImageIO.ImageProc,t.PdfReader=t.ImageIO.PdfReaderEx,t.PdfWriter=t.ImageIO.PdfWriter,t.ImageProcWrapper=t.ImageIO.ImageProcWrapper,t.pdf=t.ImageIO.pdf,t.ImageProcWrapper=t.ImageIO.ImageProcWrapper,t.Enum_ImageType=t.ImageIO.ImageType,t.Enum_ReturnType=t.ImageIO.ReturnedDataType)}),Q.DWT=Q.DWT||{},Q.DBR=Q.DBR||{},Q.aryAddonReadyFun=Q.aryAddonReadyFun||[],Q.AddonReady=Q.AddonReady||function(e){Q.aryAddonReadyFun.push(e)},function(){Q.BarcodeReaderAddon=Q.BarcodeReaderAddon||{};var e=Q.BarcodeReaderAddon;e.Version="8.6.0.1026",e._decoding=!1,e._decodeQueue=[],e._decodeNext=function(){var n,t;0==e._decodeQueue.length?e._decoding=!1:(n=(t=e._decodeQueue[0]).method,t=t.args,e._decodeQueue.splice(0,1),n.apply(null,t))},e._defaultRuntimeSettingsStr="",e._defaultTemplateStr="",e._wasmInstance=!1,e._activeXInstance=!1,e.BarcodeReaderException=function(){var t,n=Q.DBR.EnumErrorCode.DBR_UNKNOWN;return(t="number"==typeof(t=arguments[0])?(n=t,new Error(arguments[1])):new Error(t)).code=n,t},e.RemoveNonPrintableChar=function(n){return Q.Lib.isString(n)?n.replace(/[^\x20-\x7E]|(\\")/g,""):n},e.errors={webcamNotInstalled:"The Webcam add-on not installed.",nonServiceNotSupportWebcamDecode:"The BarcodeReader add-on does not support reading barcodes from video streams.",decodeResultEmpty:"decode result is empty."},e._activeXMaxIEVersion=9,e.logLevel=3,Q.DBR.EnumAccompanyingTextRecognitionMode={ATRM_GENERAL:1,ATRM_SKIP:0},Q.DBR.EnumBarcodeColourMode={BICM_DARK_ON_LIGHT:1,BICM_LIGHT_ON_DARK:2,BICM_DARK_ON_DARK:4,BICM_LIGHT_ON_LIGHT:8,BICM_DARK_LIGHT_MIXED:16,BICM_DARK_ON_LIGHT_DARK_SURROUNDING:32,BICM_SKIP:0},Q.DBR.EnumBarcodeComplementMode={BCM_AUTO:1,BCM_GENERAL:2,BCM_SKIP:0},Q.DBR.EnumBarcodeFormat={BF_ALL:-32505857,BF_ONED:2047,BF_GS1_DATABAR:260096,BF_CODE_39:1,BF_CODE_128:2,BF_CODE_93:4,BF_CODABAR:8,BF_ITF:16,BF_EAN_13:32,BF_EAN_8:64,BF_UPC_A:128,BF_UPC_E:256,BF_INDUSTRIAL_25:512,BF_CODE_39_EXTENDED:1024,BF_GS1_DATABAR_OMNIDIRECTIONAL:2048,BF_GS1_DATABAR_TRUNCATED:4096,BF_GS1_DATABAR_STACKED:8192,BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:16384,BF_GS1_DATABAR_EXPANDED:32768,BF_GS1_DATABAR_EXPANDED_STACKED:65536,BF_GS1_DATABAR_LIMITED:131072,BF_PATCHCODE:262144,BF_PDF417:33554432,BF_QR_CODE:67108864,BF_DATAMATRIX:134217728,BF_AZTEC:268435456,BF_MAXICODE:536870912,BF_MICRO_QR:1073741824,BF_MICRO_PDF417:524288,BF_GS1_COMPOSITE:-2147483648,BF_NULL:0},Q.DBR.EnumBarcodeFormat_2={BF2_NULL:0,BF2_POSTALCODE:32505856,BF2_NONSTANDARD_BARCODE:1,BF2_USPSINTELLIGENTMAIL:1048576,BF2_POSTNET:2097152,BF2_PLANET:4194304,BF2_AUSTRALIANPOST:8388608,BF2_RM4SCC:16777216,BF2_DOTCODE:2},Q.DBR.EnumBinarizationMode={BM_AUTO:1,BM_LOCAL_BLOCK:2,BM_SKIP:0},Q.DBR.EnumClarityCalculationMethod={ECCM_CONTRAST:1},Q.DBR.EnumClarityFilterMode={CFM_GENERAL:1},Q.DBR.EnumColourClusteringMode={CCM_AUTO:1,CCM_GENERAL_HSV:2,CCM_SKIP:0},Q.DBR.EnumColourConversionMode={CICM_GENERAL:1,CICM_SKIP:0},Q.DBR.EnumConflictMode={CM_IGNORE:1,CM_OVERWRITE:2},Q.DBR.EnumDeformationResistingMode={DRM_AUTO:1,DRM_GENERAL:2,DRM_SKIP:0},Q.DBR.EnumDPMCodeReadingMode={DPMCRM_AUTO:1,DPMCRM_GENERAL:2,DPMCRM_SKIP:0},Q.DBR.EnumErrorCode={DBR_SYSTEM_EXCEPTION:1,DBR_SUCCESS:0,DBR_UNKNOWN:-1e4,DBR_NO_MEMORY:-10001,DBR_NULL_REFERENCE:-10002,DBR_LICENSE_INVALID:-10003,DBR_LICENSE_EXPIRED:-10004,DBR_FILE_NOT_FOUND:-10005,DBR_FILETYPE_NOT_SUPPORTED:-10006,DBR_BPP_NOT_SUPPORTED:-10007,DBR_INDEX_INVALID:-10008,DBR_BARCODE_FORMAT_INVALID:-10009,DBR_CUSTOM_REGION_INVALID:-10010,DBR_MAX_BARCODE_NUMBER_INVALID:-10011,DBR_IMAGE_READ_FAILED:-10012,DBR_TIFF_READ_FAILED:-10013,DBR_QR_LICENSE_INVALID:-10016,DBR_1D_LICENSE_INVALID:-10017,DBR_DIB_BUFFER_INVALID:-10018,DBR_PDF417_LICENSE_INVALID:-10019,DBR_DATAMATRIX_LICENSE_INVALID:-10020,DBR_PDF_READ_FAILED:-10021,DBR_PDF_DLL_MISSING:-10022,DBR_PAGE_NUMBER_INVALID:-10023,DBR_CUSTOM_SIZE_INVALID:-10024,DBR_CUSTOM_MODULESIZE_INVALID:-10025,DBR_RECOGNITION_TIMEOUT:-10026,DBR_JSON_PARSE_FAILED:-10030,DBR_JSON_TYPE_INVALID:-10031,DBR_JSON_KEY_INVALID:-10032,DBR_JSON_VALUE_INVALID:-10033,DBR_JSON_NAME_KEY_MISSING:-10034,DBR_JSON_NAME_VALUE_DUPLICATED:-10035,DBR_TEMPLATE_NAME_INVALID:-10036,DBR_JSON_NAME_REFERENCE_INVALID:-10037,DBR_PARAMETER_VALUE_INVALID:-10038,DBR_DOMAIN_NOT_MATCHED:-10039,DBR_RESERVEDINFO_NOT_MATCHED:-10040,DBR_AZTEC_LICENSE_INVALID:-10041,DBR_LICENSE_DLL_MISSING:-10042,DBR_LICENSEKEY_NOT_MATCHED:-10043,DBR_REQUESTED_FAILED:-10044,DBR_LICENSE_INIT_FAILED:-10045,DBR_PATCHCODE_LICENSE_INVALID:-10046,DBR_POSTALCODE_LICENSE_INVALID:-10047,DBR_DPM_LICENSE_INVALID:-10048,DBR_FRAME_DECODING_THREAD_EXISTS:-10049,DBR_STOP_DECODING_THREAD_FAILED:-10050,DBR_SET_MODE_ARGUMENT_ERROR:-10051,DBR_LICENSE_CONTENT_INVALID:-10052,DBR_LICENSE_KEY_INVALID:-10053,DBR_LICENSE_DEVICE_RUNS_OUT:-10054,DBR_GET_MODE_ARGUMENT_ERROR:-10055,DBR_IRT_LICENSE_INVALID:-10056,DBR_MAXICODE_LICENSE_INVALID:-10057,DBR_GS1_DATABAR_LICENSE_INVALID:-10058,DBR_GS1_COMPOSITE_LICENSE_INVALID:-10059,DBR_DOTCODE_LICENSE_INVALID:-10061,DMERR_FAILED_TO_REACH_LTS:-20200},Q.DBR.EnumGrayscaleTransformationMode={GTM_INVERTED:1,GTM_ORIGINAL:2,GTM_SKIP:0},Q.DBR.EnumImagePixelFormat={IPF_Binary:0,IPF_BinaryInverted:1,IPF_GrayScaled:2,IPF_NV21:3,IPF_RGB_565:4,IPF_RGB_555:5,IPF_RGB_888:6,IPF_ARGB_8888:7,IPF_RGB_161616:8,IPF_ARGB_16161616:9,IPF_ABGR_8888:10,IPF_ABGR_16161616:11,IPF_BGR_888:12},Q.DBR.EnumImagePreprocessingMode={IPM_AUTO:1,IPM_GENERAL:2,IPM_GRAY_EQUALIZE:4,IPM_GRAY_SMOOTH:8,IPM_SHARPEN_SMOOTH:16,IPM_MORPHOLOGY:32,IPM_SKIP:0},Q.DBR.EnumIMResultDataType={IMRDT_IMAGE:1,IMRDT_CONTOUR:2,IMRDT_LINESEGMENT:4,IMRDT_LOCALIZATIONRESULT:8,IMRDT_REGIONOFINTEREST:16,IMRDT_QUADRILATERAL:32},Q.DBR.EnumIntermediateResultSavingMode={IRSM_MEMORY:1,IRSM_FILESYSTEM:2,IRSM_BOTH:4},Q.DBR.EnumIntermediateResultType={IRT_NO_RESULT:0,IRT_ORIGINAL_IMAGE:1,IRT_COLOUR_CLUSTERED_IMAGE:2,IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE:4,IRT_TRANSFORMED_GRAYSCALE_IMAGE:8,IRT_PREDETECTED_REGION:16,IRT_PREPROCESSED_IMAGE:32,IRT_BINARIZED_IMAGE:64,IRT_TEXT_ZONE:128,IRT_CONTOUR:256,IRT_LINE_SEGMENT:512,IRT_FORM:1024,IRT_SEGMENTATION_BLOCK:2048,IRT_TYPED_BARCODE_ZONE:4096,IRT_PREDETECTED_QUADRILATERAL:8192},Q.DBR.EnumLocalizationMode={LM_SKIP:0,LM_AUTO:1,LM_CONNECTED_BLOCKS:2,LM_LINES:8,LM_STATISTICS:4,LM_SCAN_DIRECTLY:16,LM_STATISTICS_MARKS:32,LM_STATISTICS_POSTAL_CODE:64},Q.DBR.EnumPDFReadingMode={PDFRM_RASTER:1,PDFRM_AUTO:2,PDFRM_VECTOR:4},Q.DBR.EnumQRCodeErrorCorrectionLevel={QRECL_ERROR_CORRECTION_H:0,QRECL_ERROR_CORRECTION_L:1,QRECL_ERROR_CORRECTION_M:2,QRECL_ERROR_CORRECTION_Q:3},Q.DBR.EnumRegionPredetectionMode={RPM_AUTO:1,RPM_GENERAL:2,RPM_GENERAL_RGB_CONTRAST:4,RPM_GENERAL_GRAY_CONTRAST:8,RPM_GENERAL_HSV_CONTRAST:16,RPM_SKIP:0},Q.DBR.EnumResultCoordinateType={RCT_PIXEL:1,RCT_PERCENTAGE:2},Q.DBR.EnumResultType={RT_STANDARD_TEXT:0,RT_RAW_TEXT:1,RT_CANDIDATE_TEXT:2,RT_PARTIAL_TEXT:3},Q.DBR.EnumScaleUpMode={SUM_AUTO:1,SUM_LINEAR_INTERPOLATION:2,SUM_NEAREST_NEIGHBOUR_INTERPOLATION:4,SUM_SKIP:0},Q.DBR.EnumTerminatePhase={TP_REGION_PREDETECTED:1,TP_IMAGE_PREPROCESSED:2,TP_IMAGE_BINARIZED:4,TP_BARCODE_LOCALIZED:8,TP_BARCODE_TYPE_DETERMINED:16,TP_BARCODE_RECOGNIZED:32},Q.DBR.EnumTextAssistedCorrectionMode={TACM_AUTO:1,TACM_VERIFYING:2,TACM_VERIFYING_PATCHING:4,TACM_SKIP:0},Q.DBR.EnumTextFilterMode={TFM_AUTO:1,TFM_GENERAL_CONTOUR:2,TFM_SKIP:0},Q.DBR.EnumTextResultOrderMode={TROM_CONFIDENCE:1,TROM_POSITION:2,TROM_FORMAT:4,TROM_SKIP:0},Q.DBR.EnumTextureDetectionMode={TDM_AUTO:1,TDM_GENERAL_WIDTH_CONCENTRATION:2,TDM_SKIP:0}}(),Q.AddonReady(function(e,n){var t,r=Q.BarcodeReaderAddon;function a(o){return o&&o instanceof ArrayBuffer}r.Class=function(){function o(){this._runtimeSettings=null,this._initSettingsContent=null,this._tplContentArr=[],this.bWasm=!1}var u,s=Q.Lib;return o.prototype._decodeBlob=function(f,v){var l=this;return new Promise(function(I){if(!(f instanceof Blob))throw TypeError("'_decodeBlob(blob, templateName)': Type of 'blob' should be 'Blob'.");I()}).then(function(){return l._innerDecode(0,f,v)})},o.prototype._decodeArrayBuffer=function(f,v){var l=this;return new Promise(function(I){if(!(f instanceof ArrayBuffer))throw TypeError("'_decodeBlob(arrayBuffer, templateName)': Type of 'arrayBuffer' should be 'ArrayBuffer'.");I()}).then(function(){return l._innerDecode(0,f,v)})},o.prototype._decodeUint8Array=function(f,v){var l=this;return new Promise(function(I){if(!(f instanceof Uint8Array||self.Uint8ClampedArray&&f instanceof Uint8ClampedArray))throw TypeError("'_decodeBlob(uint8Array, templateName)': Type of 'uint8Array' should be 'Uint8Array'.");I()}).then(function(){return l._innerDecode(0,f,v)})},o.prototype._decodeImage=function(f,v){var l=this;return new Promise(function(I){if(!(f instanceof HTMLImageElement))throw TypeError("'_decodeImage(image, templateName)': Type of 'image' should be 'HTMLImageElement'.");if(f.crossOrigin&&"anonymous"!=f.crossOrigin)throw"cors";v=v||"",I()}).then(function(){return"data:image/"==f.src.substring(0,11)?l._decodeBase64(f.src,v):l._decodeUrl(f.src,v).catch(function(I){return 3<=r.logLevel&&console&&console.warn&&(console.warn("'_decodeImage(image, templateName)': Image src not available. Use '_decodeCanvas' instead."),console.warn(I)),self.HTMLCanvasElement?((I=document.createElement("canvas")).width=f.naturalWidth,I.height=f.naturalHeight,I.getContext("2d").drawImage(f,0,0),l._decodeCanvas(I,v)):Promise.reject(Error("'_decodeImage(image, templateName)': Browser not support HTMLCanvasElement."))})})},o.prototype._decodeCanvas=function(f,v){var l=this;return new Promise(function(I){if(!(f instanceof HTMLCanvasElement))throw TypeError("'_decodeCanvas(canvas, templateName)': Type of 'canvas' should be 'HTMLCanvasElement'.");if(f.crossOrigin&&"anonymous"!=f.crossOrigin)throw"cors";v=v||"",f.toBlob?f.toBlob(function(c){I(c)}):f.msToBlob?f.msToBlob(function(c){I(c)}):I(f.toDataURL())}).then(function(I){return f.toBlob||f.msToBlob?l._decodeBlob(I,v):l._decodeBase64(I,v)})},o.prototype._decodeVideo=function(f){var v,l=this,I=arguments;return new Promise(function(c){if(!(f instanceof HTMLVideoElement))throw TypeError("'_decodeVideo(video [ [, sx, sy, sWidth, sHeight], dWidth, dHeight] [, templateName] )': Type of 'video' should be 'HTMLVideoElement'.");if(f.crossOrigin&&"anonymous"!=f.crossOrigin)throw"cors";I.length<=2?(_=h=0,y=m=f.videoWidth,p=T=f.videoHeight):T=I.length<=4?(_=h=0,y=f.videoWidth,p=f.videoHeight,m=I[1],I[2]):(_=I[1],h=I[2],y=I[3],p=I[4],m=I[5],I[6]),v="string"==typeof I[I.length-1]?I[I.length-1]:"";var _,h,y,p,m,T,C=document.createElement("canvas");C.width=m,C.height=T,C.getContext("2d").drawImage(f,_,h,y,p,0,0,m,T),c(C)}).then(function(c){return l._decodeCanvas(c,v)})},o.prototype._decodeBase64=o.prototype.decodeBase64String=function(f,v){var l=this;return new Promise(function(I){if(!("string"==typeof f||"object"==typeof f&&f instanceof String))throw TypeError("'decodeBase64(base64Str, templateName)': Type of 'base64Str' should be 'String'.");"data:image/"==f.substring(0,11)&&(f=f.substring(f.indexOf(",")+1)),I()}).then(function(){return l._innerDecode(1,f,v)})},o.prototype._decodeUrl=function(f,v){var l=this;return f&&f.indexOf&&(0==f.indexOf("dwt://")||0==f.indexOf("dcs://"))?l._decodeDynamsoftServiceInnerUrl(f,v):r._wasmInstance?r._wasmInstance.decode(f):new Promise(function(I,c){var _;if(!("string"==typeof f||"object"==typeof f&&f instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'url' should be 'String'.");v=v||"",r._activeXInstance?((_=new ActiveXObject("MSXML2.XMLHTTP")).open("GET",f,!0),_.overrideMimeType?_.overrideMimeType("text/plain; charset=x-user-defined"):_.setRequestHeader("Accept-Charset","x-user-defined"),_.onreadystatechange=function(){4==_.readyState&&I(new VBArray(_.responseBody).toArray())},_.send("")):((_=new XMLHttpRequest).open("GET",f,!0),_.responseType="arraybuffer",_.send(),_.onloadend=function(){I(this.response)},_.onerror=function(){c(Error(_.error))})}).then(function(I){return r._activeXInstance?l._activeXDecodeArray(I,v):l._decodeArrayBuffer(I,v)})},o.prototype._decodeDynamsoftServiceInnerUrl=function(f,v){var l=this;return new Promise(function(I){if(!("string"==typeof f||"object"==typeof f&&f instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'innerUrl' should be 'String'.");if(0!=f.indexOf("dwt://")&&0!=f.indexOf("dcs://"))throw TypeError("'_decodeDynamsoftServiceInnerUrl(innerUrl, templateName)': 'innerUrl' should start with 'dwt://' or 'dcs://'.");I()}).then(function(){return l._innerDecode(4e3,f,v)})},o.prototype._activeXDecodeArray=function(f,v){var l=this;return new Promise(function(I,c){if(!(f instanceof Array))throw TypeError("'_activeXDecodeArray(array, templateName)': Type of 'array' should be 'Array'.");v=v||"";try{I(Q.Lib.btoa(String.fromCharCode.apply(String,f)))}catch(_){c(_)}}).then(function(I){return l._decodeBase64(I,v)})},o.prototype._activeXDecodeHandle=function(f,v){var l=this;return new Promise(function(I){v=v||"",I()}).then(function(){return l._innerDecode(4001,f,v)})},o.prototype._decode=o.prototype.decode=function(f,v){return r._activeXInstance?"string"==typeof f||f instanceof String?this._activeXDecodeHandle(f,v):Promise.reject(TypeError("'_decode(source, templateName)' in activeX: Type of 'source' should be 'String(partUrl)'.")):r._wasmInstance?r._wasmInstance.decode(f):self.Blob&&f instanceof Blob?this._decodeBlob(f,v):self.ArrayBuffer&&f instanceof ArrayBuffer?this._decodeArrayBuffer(f,v):self.Uint8Array&&f instanceof Uint8Array||self.Uint8ClampedArray&&f instanceof Uint8ClampedArray?this._decodeUint8Array(f,v):f instanceof Array?this._activeXDecodeArray(f,v):self.HTMLImageElement&&f instanceof HTMLImageElement?this._decodeImage(f,v):self.HTMLCanvasElement&&f instanceof HTMLCanvasElement?this._decodeCanvas(f,v):self.HTMLVideoElement&&f instanceof HTMLVideoElement?this._decodeVideo(f,v):isNaN(f)?"string"==typeof f||f instanceof String?"data:image/"==f.substring(0,11)?this._decodeBase64(f,v):this._decodeUrl(f,v):Promise.reject(TypeError("'_decode(source, templateName)' in H5: Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'.")):this._activeXDecodeHandle(f,v)},o.prototype._innerServiceCmd=function(f,v){return new Promise(function(l,I){var c={method:"ReadBarcode",parameter:[Q.DWT.ProductKey,4002,"",""],updateSettings:f,initSettingsContent:v};r._activeXInstance?l(r._activeXInstance.Process(s.stringify(c),location.protocol+"//"+location.host)):(s.License.isLTS()?Q.DWT.lglic(Q.DWT.EnumInstance.dwt_desktop).then(function(_){return c.parameter.push(_.ar),c.parameter.push(_.cu),c.parameter.push(0),c.parameter.push(""),s.stringify(c)}):Promise.resolve(s.stringify(c))).then(function(_){return s.fetch(r._urlRoot+"ReadBarcode",{mode:"cors",method:"post",body:_,dataType:"arrayBuffer"})}).then(function(_){a(_)?l(String.fromCharCode.apply(null,new Uint8Array(_))):l(_)},function(_){var h="Init template & runtimeSettings failed.";_&&(h=[h," Http info: ",_.errorString," (",_.httpCode,")"].join("")),I(h)})})},o.prototype._innerDecode=function(f,v,l,I){var c=this;return c._runtimeSettings&&0==c._runtimeSettings.expectedBarcodesCount&&(c._runtimeSettings.expectedBarcodesCount=512),new Promise(function(_,h){function y(T,C,D){try{var S,M,G,L,W=u&&u(T);for(W&&W.textResults||h(new r.BarcodeReaderException(W.exception,W.description)),s.product.bHTML5Edition&&D&&D.config.data&&(S=s.parse(D.config.data),s.isArray(S.parameter)&&2<S.parameter.length&&4e3==S.parameter[1]&&(4<S.parameter.length&&S.parameter[4]?W.textResults.imageid=S.parameter[4]:0<=(L=(G=S.parameter[2]).indexOf("&index="))&&(W.textResults.imageid=G.substring(L+7,G.indexOf("&t="))))),M=0;M<W.textResults.length;M++){var F=W.textResults[M];F.BarcodeText=F.barcodeText,W.exception!=Q.DBR.EnumErrorCode.DBR_SUCCESS&&(F.exception=W.exception)}W.exception!=Q.DBR.EnumErrorCode.DBR_SUCCESS&&(W.textResults.exception=W.exception,W.textResults.description=W.description),r._activeXInstance&&W.records&&(Q.Lib.each(W.records,function(U,H){Q.DWT.lavrf(H,U,Q.DWT.EnumInstance.dwt_desktop)}),Q.DWT.lavrf_(1,Q.DWT.EnumInstance.dwt_desktop)),_(W.textResults)}catch(U){h(U)}}var p,m={method:"ReadBarcode",parameter:[Q.DWT.ProductKey,f,0!=f?v:null,l||""],updateSettings:c._runtimeSettings,conflictMode:1==c.conflictMode?"ignore":"overwrite",initSettingsContent:c._initSettingsContent,tplContent:function(){if(l)for(var T=0;T<c._tplContentArr.length;++T)if(l==c._tplContentArr[T].ImageParameter.Name)return s.stringify(c._tplContentArr[T]);return null}()};r._activeXInstance?s.License.isLTS()?Q.DWT.lglic(Q.DWT.EnumInstance.dwt_desktop).then(function(T){m.parameter.push(T.ar),m.parameter.push(T.cu),m.parameter.push(0),m.parameter.push(""),y(r._activeXInstance.Process(s.stringify(m),location.protocol+"//"+location.host))}):y(r._activeXInstance.Process(s.stringify(m),location.protocol+"//"+location.host)):(p=r._urlRoot+"ReadBarcode",0==f&&(p+="/LoadZipFromBytes?cmd="+encodeURIComponent(s.stringify(m))),(0==f?Promise.resolve(v):s.License.isLTS()?Q.DWT.lglic(Q.DWT.EnumInstance.dwt_desktop).then(function(T){return m.parameter.push(T.ar),m.parameter.push(T.cu),m.parameter.push(0),m.parameter.push([s.product.getDWTPrefix(),s.product.getServerVersionInfo(),"/verify?id=",I,"&t=",s.getRandom()].join("")),s.stringify(m)}):Promise.resolve(s.stringify(m))).then(function(T){return s.fetch(p,{mode:"cors",method:"post",body:T,dataType:"arrayBuffer"})}).then(function(T,C,D){a(T)?y(String.fromCharCode.apply(null,new Uint8Array(T)),0,D):y(T,0,D)},function(T){var C="ReadBarcode request fail.";T&&(C=[C," Http info: ",T.errorString," (",T.httpCode,")"].join("")),h(Error(C))}))})},u=r._handleRetJsonString=function(f){var v;if("string"==typeof f||"object"==typeof f&&f instanceof String)try{v=s.parse(f)}catch{v=s.parse(r.RemoveNonPrintableChar(f))}else v=f;if(!v)throw r.BarcodeReaderException(Q.DBR.EnumErrorCode.DBR_UNKNOWN,r.errors.decodeResultEmpty);if("textResults"in v&&s.isArray(v.textResults)||v.exception==Q.DBR.EnumErrorCode.DBR_SUCCESS)return v;throw r.BarcodeReaderException(v.exception,v.description)},o.prototype.getAllParameterTemplateNames=function(){for(var f=[],v=0;v<this._tplContentArr.length;++v)f.push(this._tplContentArr[v].ImageParameter.Name);return f},o.prototype.getRuntimeSettings=function(){return this.bWasm?r._wasmInstance.getRuntimeSettings():(this._runtimeSettings||(this._runtimeSettings=s.parse(r._defaultRuntimeSettingsStr)),Promise.resolve(this._runtimeSettings))},o.prototype.updateRuntimeSettings=function(f){var v,l=this;if("string"==typeof f||"object"==typeof f&&f instanceof String){if("speed"==f||"balance"==f||"coverage"==f||"default"==f)return l.initRuntimeSettingsWithString("speed"==f?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":3,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"bestSpeed","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"Mode":"TFM_SKIP"}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"balance"==f?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":5,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"balance","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"coverage"==f?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"},{"Mode":"GTM_INVERTED"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"coverage","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":214748347,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":null,"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"}],"MaxAlgorithmThreadCount":4,"Name":"default","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}');v=f}else{if("object"!=typeof f)throw TypeError("'setTemplateSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");v=s.stringify(f)}return f=s.parse(v),l.bWasm?r._wasmInstance.updateRuntimeSettings(f).then(function(){return r._wasmInstance.getRuntimeSettings()}):(l._runtimeSettings=f,l._initSettingsContent=null,l._innerServiceCmd(l._runtimeSettings,null).then(function(I){return I=r._handleRetJsonString(I),l._runtimeSettings=I.settings,l._runtimeSettings||(l._runtimeSettings=s.parse(r._defaultRuntimeSettingsStr)),I.settings}))},o.prototype.resetRuntimeSettings=function(){var f=this;return f.bWasm?r._wasmInstance.resetRuntimeSettings().then(function(){return r._wasmInstance.getRuntimeSettings()}):(f._runtimeSettings=s.parse(r._defaultRuntimeSettingsStr),f._initSettingsContent=null,f._innerServiceCmd(f._runtimeSettings,null).then(function(v){return v=r._handleRetJsonString(v),f._runtimeSettings=v.settings,f._runtimeSettings||(f._runtimeSettings=s.parse(r._defaultRuntimeSettingsStr)),v.settings}))},o.prototype.outputSettingsToString=function(f){if(!f)return r._defaultTemplateStr;for(var v=0;v<this._tplContentArr.length;++v)if(f==this._tplContentArr[v].ImageParameter.Name)return s.stringify(this._tplContentArr[v])},o.prototype.initRuntimeSettingsWithString=function(f){var v=this;if(s.isString(f))return v.bWasm?r._wasmInstance.initRuntimeSettingsWithString(f).then(function(){return r._wasmInstance.getRuntimeSettings()}):(v._runtimeSettings=null,v._initSettingsContent=s.parse(f),v._innerServiceCmd(null,v._initSettingsContent).then(function(l){return l=r._handleRetJsonString(l),v._runtimeSettings=l.settings,v._runtimeSettings||(v._runtimeSettings=s.parse(r._defaultRuntimeSettingsStr)),l.settings}));throw TypeError("'initRuntimeSettingsWithString(settings)': Type of 'settings' should be 'String'.")},o}(),r._dbr=!1,r._initH5=function(o,u){return new Promise(function(s,f){r._urlRoot=Q.dcp._getPreUrl(Q.dcp.detect.curPortIndex)+"dcp/dbr_"+r.Version.replace(/\./g,"")+"/";var v=5,l={method:"POST",url:r._urlRoot+"VersionInfo?t="+e.getRandom(),data:'{"method":"VersionInfo"}',onSuccess:function(){s()},onError:function(){if(--v<=0)return f("Failed to connect to the Barcode Reader Add-on, the library may be missing in the Dynamsoft Service directory.");setTimeout(function(){e.ajax(l)},300)},dataType:"json",async:!0,timeout:800};e.ajax(l)}).then(function(){return r._dbr=new r.Class,r._dbr._innerServiceCmd(null,null)}).then(function(s){try{var f=r._handleRetJsonString(s);r._dbr._runtimeSettings=f.settings,r._defaultRuntimeSettingsStr=e.stringify(f.settings),r._defaultTemplateStr=e.stringify(f.outputSettings),o(r._dbr)}catch(v){u(Error("Init template & runtimeSettings failed: "+v.message)||v)}},function(s){u(s)})},r.dbrInitPromiseFun=function(o,u){function s(){Q.DBR&&Q.DBR.BarcodeReader&&Q.DBR.BarcodeReader.createInstance&&Q.DBR.BarcodeReader.createInstance().then(function(_){return Q.DBR.EnumErrorCode.DMERR_FAILED_TO_REACH_LTS==Q.DBR.BarcodeReader.lastErrorCode&&(Q.DWT.licenseException.code=Q.DBR.BarcodeReader.lastErrorCode,Q.DWT.licenseException.message=Q.DBR.BarcodeReader.lastErrorString),Q.DBR.BarcodeReader._bNeverShowDialog=!0,Q.DWT.dbrCanvasMaxWH&&(_._canvasMaxWH=Q.DWT.dbrCanvasMaxWH),(c._wasmInstance=_).getRuntimeSettings()}).then(function(_){c._dbr._runtimeSettings=_,c._defaultRuntimeSettingsStr=e.stringify(_),o(c._dbr)},u)}var f,v,l,I,c=Q.BarcodeReaderAddon;c._dbr?c._dbr.bWasm&&!c._wasmInstance?s():o(c._dbr):(f=Q.Lib.timestamp,I=Q.DWT.ResourcesPath,l=function(){var _;if(v)return Q.DBR&&Q.DBR.BarcodeReader||Q.BarcodeReader||window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader?(Q.DBR||(Q.BarcodeReader?Q.DBR={BarcodeReader:Q.BarcodeReader}:window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader&&(Q.DBR={BarcodeReader:window.DSBarcodeReader.BarcodeReader})),Q.DBR.BarcodeReader.engineResourcePath=Q.DWT.ResourcesPath+"/addon/dbrjs/",e.isString(Q.DWT.sessionPassword)&&(Q.DBR.BarcodeReader.sessionPassword=Q.DWT.sessionPassword),e.isArray(Q.DWT.licenseServer)&&(Q.DBR.BarcodeReader.licenseServer=Q.DWT.licenseServer),e.isString(Q.DWT.handshakeCode)?Q.DBR.BarcodeReader.handshakeCode=Q.DWT.handshakeCode:e.isString(Q.DWT.organizationID)?Q.DBR.BarcodeReader.organizationID=Q.DWT.organizationID:e.isString(Q.DWT.ProductKey)&&(_=Q.DWT.ProductKey,""!=Q.DWT.ProductKey&&"f"!=(h=Q.DWT.ProductKey.charAt(0))&&"t"!=h&&(y=_,_=void 0),Q.DBR.BarcodeReader.organizationID=y,Q.DBR.BarcodeReader.productKeys=_),e.showLoadingMsg(-1,"",Q.MSG.Init_CompilingWasm),Q.DBR.BarcodeReader._bUseFullFeature=!0,Q.DBR.BarcodeReader._bNeverShowDialog=!0,c._dbr=new c.Class,c._dbr.bWasm=!0,void s()):void 0;if(e.product.bHTML5Edition)c._initH5(o,u);else{var h=Q.navInfoSync,y={method:"ReadBarcode",parameter:[Q.DWT.ProductKey,4002,"",""]};if(!h.bIE)return u(Error("The DBR init error."));try{c._activeXInstance=new ActiveXObject("DBRModule.AtlDBR");var m=c._activeXInstance.Process(e.stringify(y),location.protocol+"//"+location.host),T=e.parse(m);if(!T)return u(Error("The DBR init error."));if(!("settings"in T))return u(Error(T.description||"The DBR init error."));c._dbr=new c.Class,c._dbr._runtimeSettings=T.settings,c._defaultRuntimeSettingsStr=e.stringify(T.settings),"outputSettings"in T&&(c._defaultTemplateStr=e.stringify(T.outputSettings)),o(c._dbr)}catch(C){return u(Error("The DBR .dll is missing or not accessible: "+(C.message||C)))}}},!(v=!Q.navInfo.bWin||e.product.bHTML5Edition&&(!Q.DWT.UseLocalService||e.env.bMobile||Q.DWT.UseBarcodeAddonWasm))||e.detect.dbrwasmScriptLoaded?l():function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var _=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(_ instanceof WebAssembly.Module)return new WebAssembly.Instance(_)instanceof WebAssembly.Instance}}catch{}}()?(I=e.getScript([I,"/addon/dbrjs/dbr.js",f].join(""),!0,function(_){e.detect.dbrwasmScriptLoaded=!0,l()}),e.isString(Q.DWT.handshakeCode)?I.setAttribute("data-productKeys",Q.DWT.handshakeCode):e.isString(Q.DWT.organizationID)?I.setAttribute("data-organizationID",Q.DWT.organizationID):e.isString(Q.DWT.ProductKey)&&I.setAttribute("data-productKeys",Q.DWT.ProductKey)):u(Error(Q.MSG.Err_BrowserNotSupportWasm)))},e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(o){var u;t=Q.dcp.b64bit?"dbrx64_"+Q.BarcodeReaderAddon.Version+".dll":"dbr_"+Q.BarcodeReaderAddon.Version+".dll",e.product.bHTML5Edition&&!o._isMobileMode()&&o._innerSend("GetAddOnVersion",e.html5.Funs.makeParams("barcodereader",t),!0,!1,!1),u={BarcodeReader:{decode:function(s){return e.License.checkProductKey(o,{Core:!0})?!e.isNumber(s)||s<0||s>=o.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(o),Promise.reject(r.BarcodeReaderException(o._errorCode,o._errorString))):new Promise(function(f){r._decoding?r._decodeQueue.push({method:f,args:[s]}):(r._decoding=!0,f(s))}).then(function(f){var v;if(e.product.bHTML5Edition){if(-1==(v=o._ImgManager.convertClientIndexToServerId(f)))throw e.Errors.IndexOutOfRange(o),setTimeout(r._decodeNext,0),r.BarcodeReaderException(o._errorCode,o._errorString)}else v=f;return new Promise(function(l,I){r.dbrInitPromiseFun(function(c){var _,h;if(!c.bWasm)return e.product.bHTML5Edition?c.bWasm?void 0:(_=o._ImgManager.convertServerIdToClientIndex(v),h=o.GetImagePartURL(_,-1,-1),c._innerDecode(4e3,h,"",o.clientId).then(function(y){y.imageid=o.IndexToImageID(_),setTimeout(r._decodeNext,0),l(y),e.License.isLTS()&&Q.DWT.lcvrf(o)},function(y){setTimeout(r._decodeNext,0),I(y)})):(h=o.GetImagePartURL(_=v,-1,-1),c._innerDecode(4001,h,"").then(function(y){y.imageid=o.IndexToImageID(_),setTimeout(r._decodeNext,0),l(y)},function(y){setTimeout(r._decodeNext,0),I(y)}));h=(h=c.getRuntimeSettings()).then(function(y){if(0==y.expectedBarcodesCount)return y.expectedBarcodesCount=512,c.updateRuntimeSettings(y)}),(h=(h=o._isMobileMode()?(h=h.then(function(){var y=o._ImgManager.convertServerIdToClientIndex(v);return o._ImgManager.getWebViewer().GetImageData(o._ImgManager.getUidByIndex(y))})).then(function(y){return y.oriData||y.originalData}):h.then(function(){var y=o._ImgManager.convertServerIdToClientIndex(v);return o.GetImageURL(y,-1,-1)})).then(function(y){return y instanceof Blob||y instanceof ArrayBuffer?r._wasmInstance.decode(y):e.fetch(y,{mode:"cors",dataType:"blob"}).then(function(p){return r._wasmInstance.decode(p)})})).then(function(y){y.imageid=o.objImageIndexManager.convertServerIdToGuid(v),setTimeout(r._decodeNext,0),l(y)},function(y){var p="decode failed.";y&&(p=[p," ",y.errorString," (",y.httpCode,")"].join("")),setTimeout(r._decodeNext,0),I(Error(p))})},function(c){setTimeout(r._decodeNext,0),I(c)})})}):Promise.reject(r.BarcodeReaderException(o._errorCode,o._errorString))},resetRuntimeSettings:function(){return e.License.checkProductKey(o,{Core:!0})?new Promise(r.dbrInitPromiseFun).then(function(s){return s.resetRuntimeSettings()}):Promise.reject(r.BarcodeReaderException(o._errorCode,o._errorString))},getRuntimeSettings:function(s){return e.License.checkProductKey(o,{Core:!0})?!e.isString(s)||"speed"!=s&&"balance"!=s&&"coverage"!=s&&"default"!=s?new Promise(r.dbrInitPromiseFun).then(function(f){return f.getRuntimeSettings()}):this.updateRuntimeSettings(s):Promise.reject(r.BarcodeReaderException(o._errorCode,o._errorString))},updateRuntimeSettings:function(s){return e.License.checkProductKey(o,{Core:!0})?new Promise(r.dbrInitPromiseFun).then(function(f){return f.updateRuntimeSettings(s)}):Promise.reject(r.BarcodeReaderException(o._errorCode,o._errorString))},initRuntimeSettingsWithString:function(s){return e.License.checkProductKey(o,{Core:!0})?new Promise(r.dbrInitPromiseFun).then(function(f){return f.initRuntimeSettingsWithString(s)}):Promise.reject(r.BarcodeReaderException(o._errorCode,o._errorString))}}},e.product.bHTML5Edition?(o.__addon=o.__addon||{},e.mix(o.__addon,u)):(o.Addon=o.Addon||{},e.mix(o.Addon,u))}),Q.unloadQueue.push(function(){r._wasmInstance&&(r._wasmInstance.destroy(),r._wasmInstance=!1)})}),Q.DWT=Q.DWT||{},Q.aryAddonReadyFun=Q.aryAddonReadyFun||[],Q.AddonReady=Q.AddonReady||function(e){Q.aryAddonReadyFun.push(e)},function(){for(var e=[Q.DWT],n=0;n<1;n++){var t=e[n];t.EnumDWT_ConvertMode={CM_RENDERALL:1,CM_IMAGEONLY:2,CM_AUTO:3,CM_RENDERALLWITHANNOTATION:4},t.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7}}}(),Q.AddonReady(function(e,n){var t;!e.product.bHTML5Edition||e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(r){var a,o=e.html5.Funs;t=e.env.bMac?Q.dcp.b64bit?"libDynamicPdfCorex64_"+Q.DWT.PdfVersion+".dylib":"libDynamicPdfCore_"+Q.DWT.PdfVersion+".dylib":e.env.bLinux?"libDynamicPdfCore_"+Q.DWT.PdfVersion+".so":Q.dcp.b64bit?"DynamicPdfCorex64_"+Q.DWT.PdfVersion+".dll":"DynamicPdfCore_"+Q.DWT.PdfVersion+".dll",r._isMobileMode()||r._innerSend("GetAddOnVersion",o.makeParams("pdf",t),!0,!1,!1),a={PDF:{IsModuleInstalled:function(){var u=r;return u._resetErr(),u._isMobileMode()?!!Q.pdf&&Q.pdf.IsModuleInstalled():""!=u._innerFun("GetAddOnVersion",o.makeParams("pdf",t))},IsModuleInstalledAsync:function(){var u=r;return u._resetErr(),u._isMobileMode()?e.Promise.resolve(!!Q.pdf&&Q.pdf.IsModuleInstalled()):u._innerFunV2("GetAddOnVersion",o.makeParams("pdf",t)).then(function(s){return""!=s})},ConvertToImage:function(l,s,f,v){l=o.replaceLocalFilename(l);var I="ConvertPDFToImage",c=r;return c._resetErr(),c._isMobileMode()||(o.showMask(I),c._innerSend(I,o.makeParams(l,s),!0,function(_){return o.hideMask(I),f&&f(),!0},function(_){return o.hideMask(I),v&&v(),!1})),!0},SetPassword:function(u){var s=r;return s._resetErr(),s._isMobileMode()?(s._pdfPassword=u,!0):s._innerFun("SetPDFPassword",o.makeParams(u))},SetConvertMode:function(u){return r._setConvertMode(u)},SetConvertModeAsync:function(u){return r._setConvertModeAsync(u)},GetConvertMode:function(){var u=r;return u._resetErr(),u._pdfConvertMode},SetResolution:function(u){var s=r;return s._resetErr(),s._isMobileMode()?(s._pdfResolution=+u,!0):r._innerFun("SetPDFResolution",o.makeParams(u))},SetResolutionAsync:function(u){var s=r;return s._resetErr(),s._isMobileMode()?(s._pdfResolution=+u,e.Promise.resolve(!0)):r._innerFunV2("SetPDFResolution",o.makeParams(u))},IsTextBasedPDF:function(u,s,f){var v=r;return v._resetErr(),v._isMobileMode()?v._mobileNotSupport("IsTextBasedPDF",f):(u=o.replaceLocalFilename(u),u=r._innerFun("IsTextBasedPDF",o.makeParams(u)),0==v.ErrorCode?e.isFunction(s)&&s(u):e.isFunction(f)&&f(v.ErrorCode,v.ErrorString),u)},Write:{Setup:function(s){var f=(2<e.stringify(s=s||{version:15}).length&&(e.isNumber(s.version)?1<=s.version&&s.version<2&&(s.version=parseInt(10*s.version)):s.version=15),e.isNumber(s.compression)&&s.compression==Q.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(s.compression=Q.DWT.EnumDWT_PDFCompressionType.PDF_FAX4),r);return f._resetErr(),f._isMobileMode()?(f._pdfWriteSetting=s,!0):(s=e.stringify(s),s=e.replaceAll(s,'"','\\"'),f._innerFun("SetPDFSettings",['["',s,'"]'].join("")))}}}},r.__addon=r.__addon||{},e.mix(r.__addon,a)})}),Q.AddonReady(function(e,n){!e.product.bActiveXEdition||e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(t){var r,a,o;if(!t.getSWebTwain()||!t.getSWebTwain().Addon)return!1;Q.navInfo.bWin&&(o=!Q.navInfo.bOSx64||Q.navInfo.bWOW64?"DynamicPdfCore_"+Q.DWT.PdfVersion+".dll":"DynamicPdfCorex64_"+Q.DWT.PdfVersion+".dll"),a=t.getSWebTwain(),r={PDF:{IsModuleInstalled:function(){var u=a.GetAddOnVersion("pdf",o);return e.setErrorString(t),""!=u},IsModuleInstalledAsync:function(){var u=a.GetAddOnVersion("pdf",o);return e.setErrorString(t),e.Promise.resolve(""!=u)},ConvertToImage:function(u,s,f,v){return u=a.ConvertPDFToImage(u,s),e.wrapperRet(t,u,f,v)},SetPassword:function(u){return u=a.SetPDFPassword(u),e.wrapperRet(t,u)},SetConvertMode:function(u){return t._setConvertMode(u)},SetConvertModeAsync:function(u){return Promise.resolve(t._setConvertMode(u))},GetConvertMode:function(){return t._resetErr(),t._pdfConvertMode},SetResolution:function(u){return u=a.SetPDFResolution(u),e.wrapperRet(t,u)},SetResolutionAsync:function(u){return u=a.SetPDFResolution(u),e.Promise.resolve(e.wrapperRet(t,u))},IsTextBasedPDF:function(u){return u=a.IsTextBasedPDF(u),e.wrapperRet(t,u)}}},t.Addon=t.Addon||{},e.mix(t.Addon,r)})}),Q.DWT=Q.DWT||{},Q.aryAddonReadyFun=Q.aryAddonReadyFun||[],Q.AddonReady=Q.AddonReady||function(e){Q.aryAddonReadyFun.push(e)},Q.DWT.OCRVerInName="10.0.0.0618",function(e){for(var n=[Q.DWT],t=0;t<1;t++){var r=n[t];r.EnumDWT_OCRLanguage={OCRL_ENG:"eng",OCRL_ARA:"ara",OCRL_CHI_SIM:"chi_sim",OCRL_CHI_TRA:"chi_tra",OCRL_HIN:"hin",OCRL_URD:"urd",OCRL_SPA:"spa",OCRL_FRA:"fra",OCRL_MSA:"msa",OCRL_IND:"ind",OCRL_RUS:"rus",OCRL_BEN:"ben",OCRL_POR:"por",OCRL_PAN:"pan",OCRL_DEU:"deu",OCRL_JPN:"jpn",OCRL_FAS:"fas",OCRL_SWA:"swa",OCRL_JAV:"jav",OCRL_TEL:"tel",OCRL_TUR:"tur",OCRL_KOR:"kor",OCRL_MAR:"mar",OCRL_TAM:"tam",OCRL_VIE:"vie",OCRL_ITA:"ita",OCRL_THA:"tha"},r.EnumDWT_OCRPageSetMode={OCRPSM_OSD_ONLY:0,PSM_AUTO_OSD:1,PSM_AUTO_ONLY:2,PSM_AUTO:3,PSM_SINGLE_COLUMN:4,PSM_SINGLE_BLOCK_VERT_TEXT:5,PSM_SINGLE_BLOCK:6,PSM_SINGLE_LINE:7,PSM_SINGLE_WORD:8,PSM_CIRCLE_WORD:9,PSM_SINGLE_CHAR:10},r.EnumDWT_OCROutputFormat={OCROF_TEXT:0,OCROF_PDFPLAINTEXT:1,OCROF_PDFIMAGEOVERTEXT:2,OCROF_PDFPLAINTEXT_PDFX:3,OCROF_PDFIMAGEOVERTEXT_PDFX:4},r.EnumDWT_OCRDownloadType={OCRDT_Dll:0,OCRDT_LANGUAGE:1}}}(typeof window<"u"&&window),Q.DWT.OCRLanguageData_eng="4113088",Q.DWT.OCRLanguageData_ara="1432056",Q.DWT.OCRLanguageData_chi_sim="2469156",Q.DWT.OCRLanguageData_chi_tra="2366642",Q.DWT.OCRLanguageData_hin="1122751",Q.DWT.OCRLanguageData_urd="1398718",Q.DWT.OCRLanguageData_spa="2294433",Q.DWT.OCRLanguageData_fra="1130365",Q.DWT.OCRLanguageData_msa="1747801",Q.DWT.OCRLanguageData_ind="1122661",Q.DWT.OCRLanguageData_rus="3861738",Q.DWT.OCRLanguageData_ben="855841",Q.DWT.OCRLanguageData_por="1982756",Q.DWT.OCRLanguageData_pan="497721",Q.DWT.OCRLanguageData_deu="1525436",Q.DWT.OCRLanguageData_jpn="2471260",Q.DWT.OCRLanguageData_fas="431500",Q.DWT.OCRLanguageData_swa="2167651",Q.DWT.OCRLanguageData_jav="2982741",Q.DWT.OCRLanguageData_tel="2769654",Q.DWT.OCRLanguageData_tur="4550554",Q.DWT.OCRLanguageData_kor="1677415",Q.DWT.OCRLanguageData_mar="2118233",Q.DWT.OCRLanguageData_tam="3237963",Q.DWT.OCRLanguageData_vie="531275",Q.DWT.OCRLanguageData_ita="2701314",Q.DWT.OCRLanguageData_tha="1072600",Q.DWT.OCRLanguageData={},Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_ENG]=Q.DWT.OCRLanguageData_eng,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_ARA]=Q.DWT.OCRLanguageData_ara,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_CHI_TRA]=Q.DWT.OCRLanguageData_chi_tra,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_CHI_SIM]=Q.DWT.OCRLanguageData_chi_sim,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_HIN]=Q.DWT.OCRLanguageData_hin,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_URD]=Q.DWT.OCRLanguageData_urd,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_SPA]=Q.DWT.OCRLanguageData_spa,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_FRA]=Q.DWT.OCRLanguageData_fra,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_MSA]=Q.DWT.OCRLanguageData_msa,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_IND]=Q.DWT.OCRLanguageData_ind,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_RUS]=Q.DWT.OCRLanguageData_rus,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_BEN]=Q.DWT.OCRLanguageData_ben,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_POR]=Q.DWT.OCRLanguageData_por,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_PAN]=Q.DWT.OCRLanguageData_pan,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_DEU]=Q.DWT.OCRLanguageData_deu,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_JPN]=Q.DWT.OCRLanguageData_jpn,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_FAS]=Q.DWT.OCRLanguageData_fas,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_SWA]=Q.DWT.OCRLanguageData_swa,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_JAV]=Q.DWT.OCRLanguageData_jav,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_TEL]=Q.DWT.OCRLanguageData_tel,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_TUR]=Q.DWT.OCRLanguageData_tur,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_KOR]=Q.DWT.OCRLanguageData_kor,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_MAR]=Q.DWT.OCRLanguageData_mar,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_TAM]=Q.DWT.OCRLanguageData_tam,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_VIE]=Q.DWT.OCRLanguageData_vie,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_ITA]=Q.DWT.OCRLanguageData_ita,Q.DWT.OCRLanguageData[Q.DWT.EnumDWT_OCRLanguage.OCRL_THA]=Q.DWT.OCRLanguageData_tha,function(e){function n(){var t=this;t._text="",t._fontName="",t._fontSize="",t._left=0,t._top=0,t._right=0,t._bottom=0}n.prototype.GetText=function(){return this._text},n.prototype.GetFontName=function(){return this._fontName},n.prototype.GetFontSize=function(){return this._fontSize},n.prototype.GetWordRect=function(){var t=this;return t._left+","+t._top+","+t._right+","+t._bottom},e.NewWordBasicResult=function(){return new n}}(Q.Lib),function(e){function n(){var t=this;t._count=0,t._left=0,t._top=0,t._right=0,t._bottom=0,t._wordlist=[]}n.prototype.GetWordCount=function(){return this._count},n.prototype.GetLineRect=function(){var t=this;return t._left+","+t._top+","+t._right+","+t._bottom},n.prototype.GetWordContent=function(t){var r=this;if(r._errorCode<0)return"";if(null==t||t>=r._wordlist.length||t<0)return Q.Lib.Errors.OCR_InvalidIndex(r,"GetWordContent"),"";var o=Q.Lib.NewWordBasicResult();return o._text=r._wordlist[t].text,o._fontName=r._wordlist[t].fontname,o._fontSize=r._wordlist[t].fontsize,o._left=r._wordlist[t].rect[0],o._top=r._wordlist[t].rect[1],o._right=r._wordlist[t].rect[2],o._bottom=r._wordlist[t].rect[3],o},e.NewLineBasicResult=function(){return new n}}(Q.Lib),function(e){function n(){this._count=0,this._linelist=[]}n.prototype.GetLineCount=function(){return this._count},n.prototype.GetLineContent=function(t){var r=this;if(r._errorCode<0)return"";if(null==t||t>=r._linelist.length||t<0)return Q.Lib.Errors.OCR_InvalidIndex(r,"GetLineContent"),"";var o=Q.Lib.NewLineBasicResult();return o._count=r._linelist[t].words.length,o._left=r._linelist[t].rect[0],o._top=r._linelist[t].rect[1],o._right=r._linelist[t].rect[2],o._bottom=r._linelist[t].rect[3],o._wordlist=r._linelist[t].words,o},e.NewPageBasicResult=function(){return new n}}(Q.Lib),function(e){function n(){this._count=0,this._pagelist=[]}n.prototype.GetPageCount=function(){return this._count},n.prototype.GetPageContent=function(t){var r=this;if(r._errorCode<0)return"";if(null==t||t>=r._pagelist.length||t<0)return Q.Lib.Errors.OCR_InvalidIndex(r,"GetPageContent"),"";var o=Q.Lib.NewPageBasicResult();return o._count=r._pagelist[t].lines.length,o._linelist=r._pagelist[t].lines,o},e.NewPageSetBasicResult=function(){return new n}}(Q.Lib),function(e){function n(t){var r=this;r._errorCode=0,r._errorString="",r._resultlist=[],r._stwain=t}n.prototype.GetErrorCode=function(){return this._errorCode},n.prototype.GetErrorString=function(){return this._errorString},n.prototype.GetFormat=function(){return this._resultlist[0].format},n.prototype.GetInput=function(){var r=this._resultlist[0].input;if(r){var a=Number(r);if(!isNaN(a))return this._stwain._ImgManager.convertServerIdToClientIndex(a)}return r},n.prototype.GetPageSetCount=function(){return this._resultlist[0].pagesets.length},n.prototype.GetPageSetContent=function(t){var r=this;if(r._errorCode<0)return"";if(null==t||t>=r._resultlist[0].pagesets.length||t<0)return Q.Lib.Errors.OCR_InvalidIndex(r,"GetPageSetContent"),"";var o=Q.Lib.NewPageSetBasicResult();return o._count=r._resultlist[0].pagesets[t].pages.length,o._pagelist=r._resultlist[0].pagesets[t].pages,o},n.prototype.Get=function(){return this._stwain._innerFun("GetOCRRestult")},n.prototype.Save=function(t){var a=e.html5.Funs.replaceLocalFilename(t);return this._stwain._innerFun("SaveOCRRestult",e.html5.Funs.makeParams(a))},e.NewOCRBasicResult=function(t){return new n(t)}}(Q.Lib),function(e){function n(){var t=this;t.UnicodeFontName="",t.UseDetectedFont=!0,t.MinFontSizeforMoreAccurateResult=0,t.OCRLanguage=Q.DWT.EnumDWT_OCRLanguage.OCRL_ENG,t.PageSetMode=Q.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO,t.OutputFormat=Q.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT}n.prototype.GetUnicodeFontName=function(){return this.UnicodeFontName},n.prototype.SetUnicodeFontName=function(t){var a=t;return e.isString(a)||(a=""),this.UnicodeFontName=a,!0},n.prototype.GetUseDetectedFont=function(){return!!this.UseDetectedFont},n.prototype.SetUseDetectedFont=function(t){return this.UseDetectedFont=!!t,!0},n.prototype.GetMinFontSizeforMoreAccurateResult=function(){return this.MinFontSizeforMoreAccurateResult},n.prototype.SetMinFontSizeforMoreAccurateResult=function(t){var a=1*t;return a<0&&(a=0),this.MinFontSizeforMoreAccurateResult=a,!0},n.prototype.GetOCRLanguage=function(){return this.OCRLanguage},n.prototype.SetOCRLanguage=function(t){var a=t;return e.isString(a)||(a=""),this.OCRLanguage=a,!0},n.prototype.GetPageSetMode=function(){return this.PageSetMode},n.prototype.SetPageSetMode=function(t){var a=1*t;return(a<0||a>Q.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR)&&(a=Q.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO),this.PageSetMode=a,!0},n.prototype.GetOutputFormat=function(){return this.OutputFormat},n.prototype.SetOutputFormat=function(t){var a=1*t;return(a<0||a>Q.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX)&&(a=Q.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT),this.OutputFormat=a,!0},e.NewOptions=function(){return new n}}(Q.Lib),Q.AddonReady(function(e,n){var t;e.product.bHTML5Edition&&(e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(u){var f,s=e.html5.Funs,v=e.NewOptions();(function r(u){var s=e.html5.Funs;t=e.env.bMac?"DynamicOCR_"+Q.DWT.OCRVerInName+".dylib":e.env.bLinux?"DynamicOCR_"+Q.DWT.OCRVerInName+".so":Q.dcp.b64bit?"DynamicOCRx64_"+Q.DWT.OCRVerInName+".dll":"DynamicOCR_"+Q.DWT.OCRVerInName+".dll",u._isMobileMode()||u._innerSend("GetAddOnVersion",s.makeParams("ocr",t),!0,!1,!1),u.__innerOCRBasicReadFunction=function(f,v,l,I,c,_,h,y,p,m,T){return e.isFunction(m)?this.__innerOCRBasicAsyncReadFunction(f,v,l,I,c,_,h,y,p,m,T):this.__innerOCRSyncReadFunction(f,p)},u.__innerGetOCRBasicResultAsyncFunction=function(f){var v=Q.Lib.NewOCRBasicResult(this);return f&&(v._errorCode=f.exception,v._errorString=f.description,v._resultlist=f.result),v},u.__innerOCRBasicAsyncReadFunction=function(f,v,l,I,c,_,h,y,p,m,T){var C=this;return s.showMask(f),C._innerSend(f,p,!0,function(M){if(0==M.exception){if(e.isFunction(m))if(-1!=v){var G=C.objImageIndexManager.convertServerIdToGuid(v);1==I?m(G,c,_,h,y,C.__innerGetOCRBasicResultAsyncFunction(M)):m(G,C.__innerGetOCRBasicResultAsyncFunction(M))}else""!=l?m(l,C.__innerGetOCRBasicResultAsyncFunction(M)):m(C.__innerGetOCRBasicResultAsyncFunction(M));e.License.isLTS()&&Q.DWT.lcvrf(u)}else e.isFunction(T)&&T(M.exception,M.description);s.hideMask(f)},function(M){s.hideMask(f)}),!0},u.__innerOCRSyncReadFunction=function(f,v){var I,c,l=this;return I=l._innerFunRaw(f,v,!1,!1),(c=e.NewOCRBasicResult())._errorCode=l._errorCode,c._errorString=l._errorString,I&&e.isArray(I)&&(c._resultlist=I,c._Count=I.length,e.License.isLTS()&&Q.DWT.lcvrf(u)),c},u.__IsOCRBasicModuleInstalled=function(){return""!=u._innerFun("GetAddOnVersion",s.makeParams("ocr",t)).split("|")[0]},u.__innerBasicDownload=function(f,v,l,I,c){var _=u;e.cancelFrome=2,f=f.toString();var y=function(){return e.isFunction(I)&&I(),!0},p=function(){return e.isFunction(c)&&c(_.ErrorCode,_.ErrorString),!1};if(!e.License.checkProductKey(_,{Core:!0})||!e.License.checkProductKey(_,{OCR:!0},!0))return p();v!=Q.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll&&_._innerFun("SetOCRLanguage",s.makeParams(l));var T=_._innerFun("GetAddOnVersion",s.makeParams("ocr",t)).split("|");if(v==Q.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll){if(""!=T[0])return y(),!0}else{var C=Q.DWT.OCRLanguageData[l];if(C&&T[1]==C)return y(),!0}if(!f||""==f)return e.Errors.OCR_InvalidRemoteFilename(_),p(),!1;if(s.isServerInvalid(_))return p(),!1;e.showProgress(_,"Download",!0);var S=!0;_._OnPercentDone(v==Q.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll?[0,-1,"Downloading OCR Module...","http"]:[0,-1,"Downloading OCR Language Data...","http"]),e.isFunction(I)||(S=!1),s.loadHttpBlob(_,"get",f,S,function(M){_._OnPercentDone([0,-1,"Loading..."]);var G=100;v==Q.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE&&(G=101),_.__LoadImageFromBytes(M,G,"",S,y,p)},function(){e.closeProgress("Download"),p()},function(M){var G=0===M.total?100:Math.round(100*M.loaded/M.total);[M.loaded," / ",M.total].join(""),_._OnPercentDone([0,G,"","http"])})}})(u),f={OCR:{SetUnicodeFontName:function(l){var I=u;return I._resetErr(),I._isMobileMode()?I._mobileNotSupport("Addon.OCR.SetUnicodeFontName"):v.SetUnicodeFontName(l)},GetUnicodeFontName:function(){var l=u;return l._resetErr(),l._isMobileMode()?l._mobileNotSupport("Addon.OCR.GetUnicodeFontName"):v.GetUnicodeFontName()},SetIfUseDetectedFont:function(l){var I=u;return I._resetErr(),I._isMobileMode()?I._mobileNotSupport("Addon.OCR.SetIfUseDetectedFont"):v.SetUseDetectedFont(l)},GetIfUseDetectedFont:function(){var l=u;return l._resetErr(),l._isMobileMode()?l._mobileNotSupport("Addon.OCR.GetIfUseDetectedFont"):v.GetUseDetectedFont()},SetMinFontSizeforMoreAccurateResult:function(l){var I=u;return I._resetErr(),I._isMobileMode()?I._mobileNotSupport("Addon.OCR.SetMinFontSizeforMoreAccurateResult"):v.SetMinFontSizeforMoreAccurateResult(l)},GetMinFontSizeforMoreAccurateResult:function(){var l=u;return l._resetErr(),l._isMobileMode()?l._mobileNotSupport("Addon.OCR.GetMinFontSizeforMoreAccurateResult"):v.GetMinFontSizeforMoreAccurateResult()},SetLanguage:function(l){var I=u;return I._resetErr(),I._isMobileMode()?I._mobileNotSupport("Addon.OCR.SetLanguage"):v.SetOCRLanguage(l)},IsModuleInstalled:function(){var l=u;return l._resetErr(),l._isMobileMode()?l._mobileNotSupport("Addon.OCR.IsModuleInstalled"):l.__IsOCRBasicModuleInstalled()},SetPageSetMode:function(l){var I=u;if(I._resetErr(),I._isMobileMode())return I._mobileNotSupport("Addon.OCR.SetPageSetMode");var c=1*l;return c==Q.DWT.EnumDWT_OCRPageSetMode.OCRPSM_OSD_ONLY||c==Q.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_OSD||c==Q.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_ONLY||c==Q.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO||c==Q.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_COLUMN||c==Q.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK_VERT_TEXT||c==Q.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK||c==Q.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_LINE||c==Q.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_WORD||c==Q.DWT.EnumDWT_OCRPageSetMode.PSM_CIRCLE_WORD||c==Q.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR?v.SetPageSetMode(c):(Q.Lib.Errors.OCR_InvalidPageSetMode(I),!1)},SetOutputFormat:function(l){var I=u;if(I._resetErr(),I._isMobileMode())return I._mobileNotSupport("Addon.OCR.SetOutputFormat");var c=1*l;return c==Q.DWT.EnumDWT_OCROutputFormat.OCROF_TEXT||c==Q.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT||c==Q.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT||c==Q.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT_PDFX||c==Q.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX?v.SetOutputFormat(c):(Q.Lib.Errors.OCR_InvalidOutputFormat(I),!1)},Recognize:function(l,I,c){var _=u;if(_._resetErr(),_._isMobileMode())return _._mobileNotSupport("Addon.OCR.Recognize");if(!e.License.checkProductKey(_,{OCR:!0},!0))return e.isFunction(c)&&c(_._errorCode,_._errorString),!1;var h=_._ImgManager.convertClientIndexToServerId(l);return _.__innerOCRBasicReadFunction("OCRRecognize",h,"",0,0,0,0,0,s.makeParams(0,h,"",0,0,0,0,v.GetUnicodeFontName(),v.GetUseDetectedFont(),v.GetMinFontSizeforMoreAccurateResult(),v.GetOCRLanguage(),v.GetPageSetMode(),v.GetOutputFormat(),""),I,c)},RecognizeRect:function(l,I,c,_,h,y,p){var m=u;if(m._resetErr(),m._isMobileMode())return m._mobileNotSupport("Addon.OCR.RecognizeRect");if(!I&&0!=I||!c&&0!=c||!_&&0!=_||!h&&0!=h){var T=Q.Lib.NewOCRBasicResult(m);return Q.Lib.Errors.OCR_InvalidLeftOrTopOrRightOrBottom(T,"RecognizeRect"),void p(T.GetErrorCode(),T.GetErrorString())}if(!e.License.checkProductKey(m,{OCR:!0},!0))return e.isFunction(p)&&p(m._errorCode,m._errorString),!1;var C=m._ImgManager.convertClientIndexToServerId(l);return m.__innerOCRBasicReadFunction("OCRRecognize",C,"",1,I,c,_,h,s.makeParams(0,C,"",I,c,_,h,v.GetUnicodeFontName(),v.GetUseDetectedFont(),v.GetMinFontSizeforMoreAccurateResult(),v.GetOCRLanguage(),v.GetPageSetMode(),v.GetOutputFormat(),""),y,p)},RecognizeFile:function(l,I,c){var _=u;if(_._resetErr(),_._isMobileMode())return _._mobileNotSupport("Addon.OCR.RecognizeFile");var h=s.replaceLocalFilename(l);return e.License.checkProductKey(_,{OCR:!0},!0)?_.__innerOCRBasicReadFunction("OCRRecognize",-1,h,0,0,0,0,0,s.makeParams(1,-1,h,0,0,0,0,v.GetUnicodeFontName(),v.GetUseDetectedFont(),v.GetMinFontSizeforMoreAccurateResult(),v.GetOCRLanguage(),v.GetPageSetMode(),v.GetOutputFormat(),""),I,c):(e.isFunction(c)&&c(_._errorCode,_._errorString),!1)},RecognizeSelectedImages:function(l,I){var c=u;if(c._resetErr(),c._isMobileMode())return c._mobileNotSupport("Addon.OCR.RecognizeSelectedImages");if(!e.License.checkProductKey(c,{OCR:!0},!0))return e.isFunction(I)&&I(c._errorCode,c._errorString),!1;var h=function(u){var v,l,s=[];return u._ImgManager.count()<=0||(v=u._ImgManager.getCurrentImageIndex(),u._ImgManager.convertClientIndexToServerId(v),l=u._ImgManager.getSelectedClientIndexArray(),e.isArray(l)&&e.each(l,function(I){var c=u._ImgManager.convertClientIndexToServerId(I);s.push(c)})),s}(c);return c.__innerOCRBasicReadFunction("OCRRecognize",-1,"",0,0,0,0,0,s.makeParams(2,-1,"",0,0,0,0,v.GetUnicodeFontName(),v.GetUseDetectedFont(),v.GetMinFontSizeforMoreAccurateResult(),v.GetOCRLanguage(),v.GetPageSetMode(),v.GetOutputFormat(),h.join(",")),l,I)},Download:function(l,I,c){var _=u;return _._resetErr(),_._isMobileMode()?_._mobileNotSupport("Addon.OCR.Download"):_.__innerBasicDownload(l,Q.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll,v.GetOCRLanguage(),I,c)},DownloadLangData:function(l,I,c){var _=u;return _._resetErr(),_._isMobileMode()?_._mobileNotSupport("Addon.OCR.DownloadLangData"):_.__innerBasicDownload(l,Q.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE,v.GetOCRLanguage(),I,c)}}},u.__addon=u.__addon||{},e.mix(u.__addon,f)}))}),Q.DWT=Q.DWT||{},Q.aryAddonReadyFun=Q.aryAddonReadyFun||[],Q.AddonReady=Q.AddonReady||function(e){Q.aryAddonReadyFun.push(e)},Q.ProOCRVerInName="1.2.0.0806",function(e){function n(){var t=this;t._text="",t._left=0,t._top=0,t._right=0,t._bottom=0}n.prototype.GetText=function(){return this._text},n.prototype.GetLetterRect=function(){var t=this;return t._left+","+t._top+","+t._right+","+t._bottom},e.NewLetterResult=function(){return new n}}(Q.Lib),function(e){function n(){var t=this;t._count=0,t._letterlist=[],t._zoneCount=0,t._zoneWords=[]}n.prototype.GetLettersCount=function(){return this._count},n.prototype.GetZoneCount=function(){return this._zoneCount},n.prototype.GetLetterContent=function(t){var r=this;if(r._errorCode<0)return"";if(null==t||t>=r._count||t<0)return Q.Lib.Errors.OCR_InvalidIndex(r,"GetLetterContent"),"";var o=Q.Lib.NewLetterResult();return o._text=r._letterlist[t].letter,o._left=r._letterlist[t].boundary[0],o._top=r._letterlist[t].boundary[1],o._right=r._letterlist[t].boundary[2],o._bottom=r._letterlist[t].boundary[3],o},n.prototype.GetZoneContent=function(t){var r=this;return r._errorCode<0?"":null==t||t>=r._zoneCount||t<0?(Q.Lib.Errors.OCR_InvalidIndex(r,"GetZoneContent"),""):r._zoneWords[t]},e.NewPageResult=function(){return new n}}(Q.Lib),function(e){function n(){var t=this;t._input=0,t._message="",t._page=-1}n.prototype.GetInput=function(){return this._input},n.prototype.GetMessage=function(){return this._message},n.prototype.GetPage=function(){return this._page},e.NewErrorInfo=function(){return new n}}(Q.Lib),function(e){function n(t){var r=this;r._errorCode=0,r._errorString="",r._errorlist=[],r._request="",r._ocrTotalCount=0,r._alreadyOCRCount=0,r._resultlist=[],r._resultZoneDetail=[],r._stwain=t}n.prototype.GetErrorCode=function(){return this._errorCode},n.prototype.GetErrorString=function(){return this._errorString},n.prototype.GetInput=function(){var t=this;if(t._request&&t._request.input){var r=t._request.input;if(r){var a=Number(r);if(!isNaN(a))return t._stwain._ImgManager.convertServerIdToClientIndex(a)}return r}return""},n.prototype.GetErrorDetailList=function(){var t=this,r=0;t._errorlist&&(r=t._errorlist.length);for(var a=[],o=0;o<r;o++){var u=Q.Lib.NewErrorInfo();u._input=t._errorlist[o].input,u._message=t._errorlist[o].message,u._page=t._errorlist[o].page,a.push(u)}return a},n.prototype.GetOCRTotalCount=function(){return this._ocrTotalCount?this._ocrTotalCount:0},n.prototype.GetAlreadyOCRCount=function(){return this._alreadyOCRCount?this._alreadyOCRCount:0},n.prototype.GetPageCount=function(){var t=this;return t._resultlist&&t._resultlist.length?t._resultlist.length:0},n.prototype.GetPageContent=function(t){var r=this,a=0;if(r._resultlist&&(a=r._resultlist.length),null==t||t>=a||t<0)return Q.Lib.Errors.OCR_InvalidIndex(r,"GetPageContent"),"";var o=Q.Lib.NewPageResult();return r._resultlist?(o._count=r._resultlist[t].length,o._letterlist=r._resultlist[t]):o._count=0,r._resultZoneDetail?(o._zoneCount=r._resultZoneDetail[t].length,o._zoneWords=r._resultZoneDetail[t]):o._zoneCount=0,o},n.prototype.Get=function(){return this._stwain._innerFun("GetOCRRestult")},n.prototype.Save=function(t){var a=e.html5.Funs.replaceLocalFilename(t);return this._stwain._innerFun("SaveOCRRestult",e.html5.Funs.makeParams(a))},e.NewOCRProResult=function(t){return new n(t)}}(Q.Lib),function(e){for(var n=[Q.DWT],t=0;t<1;t++){var r=n[t];r.EnumDWT_OCRProRecognitionModule={OCRPM_AUTO:"AUTO",OCRPM_MOSTACCURATE:"MOSTACCURATE",OCRPM_BALANCED:"BALANCED",OCRPM_FASTEST:"FASTEST"},r.EnumDWT_OCRProOutputFormat={OCRPFT_TXTS:"TXTS",OCRPFT_TXTCSV:"TXTCSV",OCRPFT_TXTF:"TXTF",OCRPFT_XML:"XML",OCRPFT_IOTPDF:"IOTPDF",OCRPFT_IOTPDF_MRC:"IOTPDF_MRC"},r.EnumDWT_OCRProPDFVersion={OCRPPDFV_0:"1.0",OCRPPDFV_1:"1.1",OCRPPDFV_2:"1.2",OCRPPDFV_3:"1.3",OCRPPDFV_4:"1.4",OCRPPDFV_5:"1.5",OCRPPDFV_6:"1.6",OCRPPDFV_7:"1.7"},r.EnumDWT_OCRProPDFAVersion={OCRPPDFAV_1A:"pdf/a-1a",OCRPPDFAV_1B:"pdf/a-1b",OCRPPDFAV_2A:"pdf/a-2a",OCRPPDFAV_2B:"pdf/a-2b",OCRPPDFAV_2U:"pdf/a-2u",OCRPPDFAV_3A:"pdf/a-3a",OCRPPDFAV_3B:"pdf/a-3b",OCRPPDFAV_3U:"pdf/a-3u"},r.EnumDWT_OCRProType={OCRDT_File:0,OCRDT_Index:1},r.EnumDWT_OCRFindTextFlags={OCRFT_WHOLEWORD:1,OCRFT_MATCHCASE:2,OCRFT_FUZZYMATCH:4},r.EnumDWT_OCRFindTextAction={OCRFT_HIGHLIGHT:0,OCRFT_STRIKEOUT:1,OCRFT_MARKFORREDACT:2}}}(typeof window<"u"&&window),function(e){function n(){var t=this;t.FindText="",t.FindTextFlags=Q.DWT.EnumDWT_OCRFindTextFlags.OCRFT_WHOLEWORD,t.FindTextAction=Q.DWT.EnumDWT_OCRFindTextAction.OCRFT_MARKFORREDACT}e.NewRedaction=function(){return new n}}(Q.Lib),Q.WebTwain={Addon:{OCRPro:{}}},function(e){function n(){var t=this;t.RecognitionModule="",t.Languages="eng",t.OutputFormat="",t.PDFVersion="",t.PDFAVersion="",t.LicenseChecker="",t.Redaction=Q.Lib.NewRedaction()}e.NewSettings=function(){return new n}}(Q.WebTwain.Addon.OCRPro),function(){function e(n,t,r,a){var o=this;o.left=n,o.top=t,o.right=r,o.bottom=a}Q.WebTwain.Addon.OCRPro.NewOCRZone=function(n,t,r,a){return new e(n,t,r,a)}}(),Q.AddonReady(function(e,n){if(e.product.bHTML5Edition){var u=function(L,W,F,U){var H=e.NewOCRProResult(L);H._errorCode=W,H._errorString=F;var Z=e.NewErrorInfo();return Z.input=U,Z.message=H._errorString,Z.page=0,H._errorlist=[Z],H};e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(L){var F,U,W=e.html5.Funs;U=e.env.bMac?"DynamicOCRPro_"+Q.ProOCRVerInName+".dylib":e.env.bLinux?"DynamicOCRPro_"+Q.ProOCRVerInName+".so":Q.dcp.b64bit?"DynamicOCRProx64_"+Q.ProOCRVerInName+".dll":"DynamicOCRPro_"+Q.ProOCRVerInName+".dll",function a(L){var W=e.html5.Funs;L.__innerGetOCRProResultAsyncFunction=function(F){var U=Q.Lib.NewOCRProResult(this);return F&&(U._errorCode=F.code,U._errorString=F.message,U._request=F.request,U._errorlist=F.errorList,U._ocrTotalCount=F.ocrTotalCount,U._alreadyOCRCount=F.alreadyOCRCount,U._resultlist=F.resultDetail,U._resultZoneDetail=F.resultZoneDetail),U},L.__innerIsOCRTrial=function(F,U){var H=this,Z=function(){var X=!1;if(H.__licenseInfo.Detail)for(var $=0;$<H.__licenseInfo.Detail.length;$++)"10"==H.__licenseInfo.Detail[$].EnumLicenseType&&"TRUE"==H.__licenseInfo.Detail[$].Trial&&(X=!0);return F(X)};return H.__licenseInfo&&H.__licenseInfo.Detail?Z():H.GetLicenseInfo(Z,U)},L.__innerOCRReadFunction=function(F,U,H,Z,X,$,V,De){return this.__innerOCRAsyncReadFunction(F,U,H,Z,X,$,V,De)},L.__innerOCRAsyncReadFunction=function(F,U,H,Z,X,$,V,De){var fe=this;return W.showMask(F),fe._innerSend(F,$,!0,function(rt){0==rt.code?(e.isFunction(V)&&(-1!=U?1==Z?V(U,X,fe.__innerGetOCRProResultAsyncFunction(rt)):V(U,fe.__innerGetOCRProResultAsyncFunction(rt)):""!=H?V(H,fe.__innerGetOCRProResultAsyncFunction(rt)):V(fe.__innerGetOCRProResultAsyncFunction(rt))),e.License.isLTS()&&Q.DWT.lcvrf(L)):e.isFunction(De)&&De(rt.code,rt.message,fe.__innerGetOCRProResultAsyncFunction(rt)),W.hideMask(F)},function(rt){W.hideMask(F)}),!0},L.__innerGetRequestJson=function(F,U,H,Z,X){var V,De="[{";for(De+='"id":"'+L.clientId+'",',De+='"method":"OCRProRecognize",',De+='"dllName":"'+X+'",',De+='"productkey":"'+Q.DWT.ProductKey+'",',De+=F==Q.DWT.EnumDWT_OCRProType.OCRDT_File?'"inputType":"file",':'"inputType":"index",',De+='"input":[',V=0;V<U.length;V++)De+=F==Q.DWT.EnumDWT_OCRProType.OCRDT_File?'"'+U[V]+'"':U[V],V+1<U.length&&(De+="|");if(De+="],",De+='"settings":{',De+='"recognitionMethod": "Page"',H&&(H.RecognitionModule&&H.RecognitionModule.length>0&&(De+=',"recognitionModule":"'+H.RecognitionModule+'"'),H.Languages&&H.Languages.length>0&&(De+=',"languages":"'+H.Languages+'"'),H.OutputFormat&&H.OutputFormat.length>0&&(De+=',"outputFormat":"'+H.OutputFormat+'"'),H.PDFVersion&&H.PDFVersion.length>0&&(De+=',"pdfVersion":"'+H.PDFVersion+'"'),H.PDFAVersion&&H.PDFAVersion.length>0&&(De+=',"pdfAVersion":"'+H.PDFAVersion+'"'),H.Redaction&&H.Redaction.FindText&&H.Redaction.FindText.length>0)){var fe=parseInt(H.Redaction.FindTextFlags),je=parseInt(H.Redaction.FindTextAction);if(!isNaN(fe)&&!isNaN(je)){De+=',"redaction":{';var Se=H.Redaction.FindText;De+='"findText":"'+(Se=Se.replace(/\"/g,'\\"'))+'"',De+=',"findTextFlags":'+fe,De+=',"findTextAction":'+je,De+="}"}}for(De+="},",De+='"zones":[',V=0;V<Z.length;V++)De+="["+Z[V].left+","+Z[V].top+","+Z[V].right+","+Z[V].bottom+"]",V+1<Z.length&&(De+=",");return De+="],",(De+='"outputFile":""')+"}]"},L.__LoadImageFromBytesForDownloadInner=function(F,U,H,Z,X,$,V,De,fe){var Se,tt,je=L;tt=F>=Z?U.slice(Se=$*Z,X):U.slice(Se=F*$,(F+1)*$),je.__LoadImageFromBytes(tt,H,"",V,function(){F>=Z?Q.Lib.isFunction(De)&&De():je.__LoadImageFromBytesForDownloadInner(F+=1,U,H,Z,X,$,V,De,fe)},function(){Q.Lib.isFunction(fe)&&fe()},Se,X)},L.__LoadImageFromBytesForDownload=function(F,U,H,Z,X,$){var V=L,De=2e6,fe=F.size||F.length,je=parseInt(fe/De);0==fe%De&&(je-=1),V.__LoadImageFromBytesForDownloadInner(0,F,U,je,fe,De,Z,X,$)}}(L),F={OCRPro:{Settings:!1,Recognize:function(H,Z,X){var V,De,$=[],Se=L;if(Se._resetErr(),Se._isMobileMode())return Se._mobileNotSupport("Addon.OCRPro.Recognize");if(V=parseInt(H),e.isNaN(V)||!e.isNumber(V))return De=u(L,-2201,"Invalid parameter type.",H),e.isFunction(X)?X(De._errorCode,De._errorString,De):e.Errors.WebviewerError(L,De._errorString,De._errorCode),!1;var rt=L._ImgManager.convertClientIndexToServerId(V);if(-1==rt)return e.isFunction(X)&&(e.Errors.IndexOutOfRange(L),De=u(L,L._errorCode,L._errorString,H),X(De._errorCode,De._errorString,De)),!1;if(!e.License.checkProductKey(L,{OCRPro:!0},!0))return e.isFunction(X)&&(De=u(L,L._errorCode,L._errorString,H),X(De._errorCode,De._errorString,De)),!1;$.push(rt);var tt=[],de=this.Settings,_t=L.__innerGetRequestJson(Q.DWT.EnumDWT_OCRProType.OCRDT_Index,$,de,tt,U);return L.__innerIsOCRTrial(function(be){return be||e.License.isLTS()?L.__innerOCRReadFunction("OCRProRecognize",H,"",0,tt,_t,Z,X):l(de.LicenseChecker,L,"OCRProRecognize",H,"",0,tt,_t,Z,X)},X)},RecognizeRect:function(H,Z,X,$){var De,fe,V=[],rt=L;if(rt._resetErr(),rt._isMobileMode())return rt._mobileNotSupport("Addon.OCRPro.RecognizeRect");if(De=parseInt(H),e.isNaN(De)||!e.isNumber(De))return fe=u(L,-2201,"Invalid parameter type.",H),e.isFunction($)?$(fe._errorCode,fe._errorString,fe):e.Errors.WebviewerError(L,fe._errorString,fe._errorCode),!1;var tt=L._ImgManager.convertClientIndexToServerId(De),de=L._ImgManager.GetImageWidth(De),_t=L.GetImageHeight(De);if(-1==tt)return e.isFunction($)&&(e.Errors.IndexOutOfRange(L),fe=u(L,L._errorCode,L._errorString,H),$(fe._errorCode,fe._errorString,fe)),!1;if(!e.License.checkProductKey(L,{OCRPro:!0},!0))return e.isFunction($)&&(fe=u(L,L._errorCode,L._errorString,H),$(fe._errorCode,fe._errorString,fe)),!1;if(de>0&&_t>0)for(var be,it,mt,Ce,we,Ve,bt=0;bt<Z.length;bt++)(it=(be=Z[bt]).left)<0&&(it=0),(mt=be.top)<0&&(mt=0),(Ce=be.right)<0&&(Ce=0),(we=be.bottom)<0&&(we=0),it>Ce&&(Ve=it,it=Ce,Ce=Ve),mt>we&&(Ve=mt,mt=we,we=Ve),Ce>de&&(Ce=de),we>_t&&(we=_t),be.left=it,be.top=mt,be.right=Ce,be.bottom=we;V.push(tt);var At=this.Settings,St=L.__innerGetRequestJson(Q.DWT.EnumDWT_OCRProType.OCRDT_Index,V,At,Z,U);return L.__innerIsOCRTrial(function(Pe){return Pe||e.License.isLTS()?L.__innerOCRReadFunction("OCRProRecognize",H,"",1,Z,St,X,$):l(At.LicenseChecker,L,"OCRProRecognize",H,"",1,Z,St,X,$)},$)},RecognizeFile:function(H,Z,X){var V,De,fe,$=L;if($._resetErr(),$._isMobileMode())return $._mobileNotSupport("Addon.OCRPro.RecognizeFile");if(0==H.length)return e.isFunction(X)&&((V=Q.Lib.NewOCRProResult(L))._errorCode=-2201,V._errorString="File name cannot be empty.",fe=[],(De=Q.Lib.NewErrorInfo()).input=H,De.message=V._errorString,De.page=0,fe.push(De),V._errorlist=fe,X(V._errorCode,V._errorString,V)),!1;if(!e.License.checkProductKey(L,{OCRPro:!0},!0))return e.isFunction(X)&&((V=Q.Lib.NewOCRProResult(L))._errorCode=L._errorCode,V._errorString=L._errorString,fe=[],(De=Q.Lib.NewErrorInfo()).input=H,De.message=V._errorString,De.page=0,fe.push(De),V._errorlist=fe,X(V._errorCode,V._errorString,V)),!1;var je=W.replaceLocalFilename(H),Se=[];je.indexOf("|")>0?Se=je.split("|"):je.indexOf(";")>0?Se=je.split(";"):je.indexOf(",")>0&&(Se=je.split(","));var rt=[];if(Se.length>0)for(var tt=0;tt<Se.length;tt++)rt.push(Se[tt]);else rt.push(je);var de=[],_t=this.Settings,be=L.__innerGetRequestJson(Q.DWT.EnumDWT_OCRProType.OCRDT_File,rt,_t,de,U);L.__innerIsOCRTrial(function(it){return it||e.License.isLTS()?L.__innerOCRReadFunction("OCRProRecognize",-1,H,0,de,be,Z,X):l(_t.LicenseChecker,L,"OCRProRecognize",-1,H,0,de,be,Z,X)},X)},RecognizeSelectedImages:function(H,Z){var X,$,V,De=L;if(De._resetErr(),De._isMobileMode())return De._mobileNotSupport("Addon.OCRPro.RecognizeSelectedImages");if(!e.License.checkProductKey(L,{OCRPro:!0},!0)){if(e.isFunction(Z)){var fe=Q.Lib.NewOCRProResult(L);fe._errorCode=L._errorCode,fe._errorString=L._errorString,$=[],(V=Q.Lib.NewErrorInfo()).input="",V.message=fe._errorString,V.page=0,$.push(V),fe._errorlist=$,Z(fe._errorCode,fe._errorString,fe)}return!1}var je=[],Se=this.Settings,rt=function(L){var U,H,W=[];return L._ImgManager.count()<=0||(U=L._ImgManager.getCurrentImageIndex(),L._ImgManager.convertClientIndexToServerId(U),H=L._ImgManager.getSelectedClientIndexArray(),e.isArray(H)&&e.each(H,function(Z){var X=L._ImgManager.convertClientIndexToServerId(Z);W.push(X)})),W}(L),tt=L.__innerGetRequestJson(Q.DWT.EnumDWT_OCRProType.OCRDT_Index,rt,Se,je,U);return L.__innerIsOCRTrial(function(de){X=de||e.License.isLTS()?L.__innerOCRReadFunction("OCRProRecognize",-1,"",0,je,tt,H,Z):l(Se.LicenseChecker,L,"OCRProRecognize",-1,"",0,je,tt,H,Z)},Z),X},IsModuleInstalled:function(){var H=L;return H._resetErr(),H._isMobileMode()?H._mobileNotSupport("Addon.OCRPro.IsModuleInstalled"):""!=H._innerFun("GetAddOnVersion",W.makeParams("proocr",U))},Download:function(H,Z,X){var $=L;if($._resetErr(),$._isMobileMode())return $._mobileNotSupport("Addon.OCRPro.Download");var De=function(){return e.isFunction(Z)&&Z(),!0},fe=function(){return e.isFunction(X)&&X($.ErrorCode,$.ErrorString),!1};if(!e.License.checkProductKey($,{Core:!0})||!e.License.checkProductKey($,{OCRPro:!0},!0))return fe();if(this.IsModuleInstalled())return De(),!0;if(!H||""==H||!e.isString(H))return e.Errors.OCR_InvalidRemoteFilename($),fe(),!1;if(W.isServerInvalid($))return fe(),!1;e.cancelFrome=2,e.showProgress($,"Download",!0);var Se=!0;return $._OnPercentDone([0,-1,"Downloading OCR Resources...","http"]),e.isFunction(Z)||(Se=!1),W.loadHttpBlob($,"get",H,Se,function(rt){$._OnPercentDone([0,-1,"Loading..."]),$.__LoadImageFromBytesForDownload(rt,102,"",Se,De,fe)},function(){e.closeProgress("Download"),fe()},function(rt){var tt=0===rt.total?100:Math.round(100*rt.loaded/rt.total);[rt.loaded," / ",rt.total].join(""),$._OnPercentDone([0,tt,"","http"])})}}},L.__addon=L.__addon||{},e.mix(L.__addon,F)}),Q.WebTwain.Addon.OCRPro.NewOCRReadPara=function(L,W,F,U,H,Z,X,$,V,De){return new f(L,W,F,U,H,Z,X,$,V,De)},Q.WebTwain.Addon.OCRPro.NewOCRError=function(){return new _},Q.Lib.mix(Q.Lib.Errors,{OCR_LicenseCheckerEmpty:function(L){var F="LicenseChecker cannot be empty.";L.errorString=F,L.responseText=M("false;-2601;"+F+";")},OCR_LicenseCheckerNotConnect:function(L){var F="Cannot connect to the LicenseChecker, please check and make sure it's set correctly.";L.errorString=F,L.responseText=M("false;-2602;"+F+";")},OCR_AccessDenied:function(L){var F="Access denied.";L.errorString=F,L.responseText=M("false;-2603;"+F+";")},OCR_LicenseCheckerError:function(L,W){var U="Error occured in '"+W+"'.";L.errorString=U,L.responseText=M("false;-2604;"+U+";")},OCR_HTTPError:function(L,W){var U="HTTP Error "+W+".";L.errorString=U,L.responseText=M("false;-2605;"+U+";")},OCR_LicenseCheckerUnauthorized:function(L,W){var U="You do not have permission to view this directory or page using the credentials you supplied (access denied due to Access Control Lists). Ask the Web server's administrator to give you access to '"+W+"'.";L.errorString=U,L.responseText=M("false;-2606;"+U+";")},__last:!1});var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}function f(L,W,F,U,H,Z,X,$,V,De){var fe=this;fe.STWAIN=W,fe.AjaxFunctionUrl=L,fe.FunctionName=F,fe.ImageIndex=U,fe.FileNames=H,fe.Type=Z,fe.AryZone=X,fe.JsonString=$,fe.OnSuccess=V,fe.OnFailure=De}function v(L,W){var F="",U=L.responseText;if(0==U.length){var H=Q.WebTwain.Addon.OCRPro.NewOCRError();Q.Lib.Errors.OCR_LicenseCheckerError(H,W.AjaxFunctionUrl),U=H.responseText}F=function G(L){return function S(L){var W,F,U,H,Z,X;for(W="",U=L.length,F=0;F<U;)switch(H=L.charCodeAt(F++),H>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:W+=L.charAt(F-1);break;case 12:case 13:Z=L.charCodeAt(F++),W+=String.fromCharCode((31&H)<<6|63&Z);break;case 14:Z=L.charCodeAt(F++),X=L.charCodeAt(F++),W+=String.fromCharCode((15&H)<<12|(63&Z)<<6|(63&X)<<0)}return W}(function C(L){var W,F,U,H,Z,X,$;for(X=L.length,Z=0,$="";Z<X;){do{W=m[255&L.charCodeAt(Z++)]}while(Z<X&&-1==W);if(-1==W)break;do{F=m[255&L.charCodeAt(Z++)]}while(Z<X&&-1==F);if(-1==F)break;$+=String.fromCharCode(W<<2|(48&F)>>4);do{if(61==(U=255&L.charCodeAt(Z++)))return $;U=m[U]}while(Z<X&&-1==U);if(-1==U)break;$+=String.fromCharCode((15&F)<<4|(60&U)>>2);do{if(61==(H=255&L.charCodeAt(Z++)))return $;H=m[H]}while(Z<X&&-1==H);if(-1==H)break;$+=String.fromCharCode((3&U)<<6|H)}return $}(L))}(U);var Z=F.split(";");1==Z.length?W.OnFailure(-1,U,Q.Lib.NewOCRProResult()):"true"==Z[0]?W.STWAIN.__innerOCRReadFunction(W.FunctionName,W.ImageIndex,W.FileNames,W.Type,W.AryZone,W.JsonString,function($,V,De){Q.Lib.isUndefined(De)?Q.Lib.isUndefined(V)?(W.OnSuccess($),I(W.AjaxFunctionUrl,$.GetPageCount())):(W.OnSuccess($,V),I(W.AjaxFunctionUrl,V.GetPageCount())):(W.OnSuccess($,V,De),I(W.AjaxFunctionUrl,De.GetPageCount()))},W.OnFailure):W.OnFailure(Z[1],Z[2],Q.Lib.NewOCRProResult())}function l(L,W,F,U,H,Z,X,$,V,De){return y(L,"DTW_AjaxMethod=CheckLicense&Productkey="+M(Q.DWT.ProductKey),v,Q.WebTwain.Addon.OCRPro.NewOCRReadPara(L,W,F,U,H,Z,X,$,V,De))}function I(L,W){y(L,"DTW_AjaxMethod=WriteOCRCount&OCRCount="+M(W+""),c,null)}function c(L,W){}function _(){this.responseText="",this.errorString=""}function y(L,W,F,U){var H=Q.WebTwain.Addon.OCRPro.NewOCRError();if(""==L)return Q.Lib.Errors.OCR_LicenseCheckerEmpty(H),alert(H.errorString),F(H,U),!1;var Z=function h(){var L=null,W=window;try{L=new W.ActiveXObject("Msxml2.XMLHTTP")}catch{try{L=new W.ActiveXObject("Microsoft.XMLHTTP")}catch{L=new XMLHttpRequest}}return L}();return Z.open("POST",L,!0),Z.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),Z.onreadystatechange=function(){if(4==Z.readyState){if(200!=Z.status)return 401==Z.status?(Q.Lib.Errors.OCR_LicenseCheckerUnauthorized(H,U.AjaxFunctionUrl),F(H,U),!1):404==Z.status?(Q.Lib.Errors.OCR_LicenseCheckerNotConnect(H),alert(H.errorString),F(H,U),!1):403==Z.status?(Q.Lib.Errors.OCR_AccessDenied(H),F(H,U),!1):(Q.Lib.Errors.OCR_HTTPError(H,Z.status),F(H,U),!1);null!=F&&"function"==typeof F&&F(Z,U)}},Z&&W&&Z.send(W),!0}function M(L){return function T(L){var W,F,U,H,Z,X;for(U=L.length,F=0,W="";F<U;){if(H=255&L.charCodeAt(F++),F==U){W+=p.charAt(H>>2),W+=p.charAt((3&H)<<4),W+="==";break}if(Z=L.charCodeAt(F++),F==U){W+=p.charAt(H>>2),W+=p.charAt((3&H)<<4|(240&Z)>>4),W+=p.charAt((15&Z)<<2),W+="=";break}X=L.charCodeAt(F++),W+=p.charAt(H>>2),W+=p.charAt((3&H)<<4|(240&Z)>>4),W+=p.charAt((15&Z)<<2|(192&X)>>6),W+=p.charAt(63&X)}return W}(function D(L){var W,F,U,H;for(W="",U=L.length,F=0;F<U;F++)(H=L.charCodeAt(F))>=1&&H<=127?W+=L.charAt(F):H>2047?(W+=String.fromCharCode(224|H>>12&15),W+=String.fromCharCode(128|H>>6&63),W+=String.fromCharCode(128|H>>0&63)):(W+=String.fromCharCode(192|H>>6&31),W+=String.fromCharCode(128|H>>0&63));return W}(L))}}),Q.DWT=Q.DWT||{},Q.aryAddonReadyFun=Q.aryAddonReadyFun||[],Q.AddonReady=Q.AddonReady||function(e){Q.aryAddonReadyFun.push(e)},Q.WebcamVerForActiveX="15.0.0.0625",Q.WebcamVerInName="15.0.0.0625",function(){for(var e=[Q.DWT],n=0;n<1;n++){var t=e[n];t.EnumDWT_VideoRotateMode={VRM_NONE:0,VRM_90_DEGREES_CLOCKWISE:1,VRM_180_DEGREES_CLOCKWISE:2,VRM_270_DEGREES_CLOCKWISE:3,VRM_FLIP_VERTICAL:4,VRM_FLIP_HORIZONTAL:5},t.EnumDWT_VideoProperty={VP_BRIGHTNESS:0,VP_CONTRAST:1,VP_HUE:2,VP_SATURATION:3,VP_SHARPNESS:4,VP_GAMMA:5,VP_COLORENABLE:6,VP_WHITEBALANCE:7,VP_BACKLIGHTCOMPENSATION:8,VP_GAIN:9},t.EnumDWT_CameraControlProperty={CCP_PAN:0,CCP_TILT:1,CCP_ROLL:2,CCP_ZOOM:3,CCP_EXPOSURE:4,CCP_IRIS:5,CCP_FOCUS:6}}}(),Q.Lib.WebcamErrors={InvalidParameter:function(e){e._errorCode=-10001,e._errorString="The parameter is invalid."},VideoNotPlayingWhenCapture:function(e){e._errorCode=-10002,e._errorString="To capture an image, the video must be playing."},VideoNotPlayingWhenGetURL:function(e){e._errorCode=-10003,e._errorString="To get the url for the current frame, the video must be playing."},Success:function(e){e._errorCode=0,e._errorString="Successful."}},function(e){function n(t){var r=this;r._Count=0,r._resultlist=[],r._stwain=t}n.prototype.GetCount=function(){return e.WebcamErrors.Success(this._stwain),this._Count-1},n.prototype.Get=function(t){var r=this;return r._resultlist.length-1<=t||t<0?(Q.Lib.Errors.Webcam_InvalidIndex(r._stwain,"Get"),""):(e.WebcamErrors.Success(r._stwain),r._resultlist[t])},n.prototype.GetCurrent=function(){var t=this,r=t._resultlist.length;return 0==r?(Q.Lib.Errors.Webcam_InvalidIndex(t._stwain,"GetCurrent"),""):(e.WebcamErrors.Success(t._stwain),t._resultlist[r-1])},e.NewWebcamValue=function(t){return new n(t)}}(Q.Lib),function(e){function n(t){var r=this;r._Count=0,r._resultlist=[],r._stwain=t}n.prototype.GetValue=function(){var t=this;return 0==t._resultlist.length?(Q.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),""):(e.WebcamErrors.Success(t._stwain),t._resultlist[0].current)},n.prototype.GetIfAuto=function(){var t=this;return 0==t._resultlist.length?(Q.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),!1):(e.WebcamErrors.Success(t._stwain),"true"==t._resultlist[0].auto)},e.NewWebcamSetting=function(t){return new n(t)}}(Q.Lib),function(e){function n(t){var r=this;r._Count=0,r._resultlist=[],r._stwain=t}n.prototype.GetMinValue=function(){var t=this;return 0==t._resultlist.length?(Q.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),""):t._resultlist[0].min},n.prototype.GetMaxValue=function(){var t=this;return 0==t._resultlist.length?(Q.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),""):t._resultlist[0].max},n.prototype.GetSteppingDelta=function(){var t=this;return 0==t._resultlist.length?(Q.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),0):t._resultlist[0].step},n.prototype.GetDefaultValue=function(){var t=this;return 0==t._resultlist.length?(Q.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),0):t._resultlist[0].defaultValue},n.prototype.GetIfAuto=function(){var t=this;return 0==t._resultlist.length?(Q.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),!1):"true"==t._resultlist[0].auto},e.NewWebcamMoreSetting=function(t){return new n(t)}}(Q.Lib),Q.AddonReady(function(e,n){e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(t){t._innerSetWebcamValue=function(r){var a=e.NewWebcamValue(t);return r&&e.isArray(r)&&(a._resultlist=r,a._Count=r.length),a},t._innerSetWebcamSetting=function(r){var a=e.NewWebcamSetting(t);return r&&e.isArray(r)&&(a._resultlist=r,a._Count=r.length),a},t._innerSetWebcamMoreSetting=function(r){var a=e.NewWebcamMoreSetting(t);return r&&e.isArray(r)&&(a._resultlist=r,a._Count=r.length),a}}),e.Addon_Events.push("OnFrameCaptured"),e.Addon_Events.push("OnCaptureSuccess"),e.Addon_Events.push("OnCaptureError")}),Q.AddonReady(function(e,n){e.product.bHTML5Edition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(t){var r,a=e.html5.Funs,o=e.env.bMac?"DynamicWebcam_"+Q.WebcamVerInName+".dylib":e.env.bLinux?"DynamicWebcam_"+Q.WebcamVerInName+".so":Q.dcp.b64bit?"DynamicWebcamx64_"+Q.WebcamVerInName+".dll":"DynamicWebcam_"+Q.WebcamVerInName+".dll";t._isMobileMode()||t._innerSend("GetAddOnVersion",a.makeParams("webcam",o),!0,!1,!1),(r=t)._innerWebcamValueFunction=function(u,s){return u=this._innerFunRaw(u,s,!1,!1),this._innerSetWebcamValue(u)},r._innerWebcamSettingFunction=function(u,s){return u=this._innerFunRaw(u,s,!1,!1),this._innerSetWebcamSetting(u)},r._innerWebcamMoreSettingFunction=function(u,s){return u=this._innerFunRaw(u,s,!1,!1),this._innerSetWebcamMoreSetting(u)},r._OnCaptureSuccess=function(u){Q.Lib.isFunction(this.__OnCaptureSuccess)&&this.__OnCaptureSuccess()},r._OnCaptureError=function(f){var s=f[1];f=f[2],Q.Lib.isFunction(this.__OnCaptureError)&&this.__OnCaptureError(s,f)},r._OnFrameCaptured=function(u){var s,f=this,v=Q.Lib;f.__videoPause||(s=(s=f.__videoQuality)||60,f.__videoDest&&f.__videoDest.UpdateVideoContainer(f.GetImageURL(-1,-1,-1,0,s))),v.isFunction(f.__OnFrameCaptured)&&f.__OnFrameCaptured(u)},r={Webcam:{IsModuleInstalled:function(){var u=t;return u._resetErr(),u._isMobileMode()?u._mobileNotSupport("Addon.Webcam.IsModuleInstalled"):""!=u._innerFun("GetAddOnVersion",a.makeParams("webcam",o))},Download:function(u,s,f){var v=t;if(v._resetErr(),v._isMobileMode())return v._mobileNotSupport("Addon.Webcam.Download");function l(){return Q.Lib.isFunction(s)&&s(),!0}function I(){return Q.Lib.isFunction(f)&&f(t.ErrorCode,t.ErrorString),!1}if(Q.Lib.cancelFrome=2,!e.License.checkProductKey(t,{Webcam:!0},!0))return I();if(this.IsModuleInstalled())return l();if(!u||""==u)return Q.Lib.Errors.Webcam_InvalidRemoteFilename(v),I();if(a.isServerInvalid(v))return I(),!1;Q.Lib.showProgress(v,"Download",!0);var c=!0;return v._OnPercentDone([0,-1,"Downloading Webcam Module...","http"]),Q.Lib.isFunction(s)||(c=!1),a.loadHttpBlob(v,"get",u,c,function(_){v._OnPercentDone([0,-1,"Loading..."]),v.__LoadImageFromBytes(_,100,"",c,l,I)},function(){Q.Lib.closeProgress(v,"Download"),I()},function(_){var h=0===_.total?100:Math.round(100*_.loaded/_.total);[_.loaded," / ",_.total].join(""),v._OnPercentDone([0,h,"","http"])})},GetSourceList:function(){var u=t;if(u._resetErr(),u._isMobileMode())return u._mobileNotSupport("Addon.Webcam.GetSourceList");if(!e.License.checkProductKey(u,{Webcam:!0},!0))return[];var s=u._innerFunRaw("GetWebcamSourceList");return 0==u.ErrorCode&&s.splice(s.length-1,1),s},SelectSource:function(u){var s=t;return s._resetErr(),s._isMobileMode()?s._mobileNotSupport("Addon.Webcam.SelectSource"):!!e.License.checkProductKey(s,{Webcam:!0},!0)&&s._innerFun("SelectWebcam",a.makeParams(u))},CloseSource:function(){var u=t;return u._resetErr(),u._isMobileMode()?u._mobileNotSupport("Addon.Webcam.CloseSource"):(this._clear(),u._innerFun("StopCapture"))},GetFramePartURL:function(){var u=t;return u._resetErr(),u._isMobileMode()?u._mobileNotSupport("Addon.Webcam.GetFramePartURL"):this._isPlaying()?u.GetImageURL(-1,-1,-1,!0,u.__videoQuality):(e.WebcamErrors.VideoNotPlayingWhenGetURL(u),"")},GetFrameURL:function(){var u=t;return u._resetErr(),u._isMobileMode()?u._mobileNotSupport("Addon.Webcam.GetFrameURL"):this._isPlaying()?u.GetImageURL(-1,-1,-1,0,u.__videoQuality):(e.WebcamErrors.VideoNotPlayingWhenGetURL(u),"")},PlayVideo:function(u,s,f,v,l){var I=t;if(I._resetErr(),I._isMobileMode())return I._mobileNotSupport("Addon.Webcam.PlayVideo");function c(){return y._clear(),Q.Lib.isFunction(l)&&l(t.ErrorCode,t.ErrorString),!1}var _=Q.Lib,h=60,y=this;return u?e.License.checkProductKey(t,{Webcam:!0},!0)?(I.__videoDest=u,I.__videoDest.ShowVideoContainer(!0),_.isFunction(f)&&(t.__OnFrameCaptured=f),t.__videoPause?(t.__videoPause=!1,e.isFunction(v)&&v(),!0):(t.__videoPause=!1,t.__videoQuality=s?h=(h=+s)<1?60:h:h,t._innerSend("PlayVideo",a.makeParams(!0),!0,v,c))):c():(Q.Lib.Errors.ParameterCannotEmpty(t),c())},PauseVideo:function(){var u=t;return u._resetErr(),u._isMobileMode()?u._mobileNotSupport("Addon.Webcam.PauseVideo"):(this._isPlaying()&&(u.__videoPause=!0),!0)},_clear:function(){var u=t;u.__videoPause=!1,u.__OnFrameCaptured=!1,u.__videoQuality=60,u.__videoDest&&u.__videoDest.ShowVideoContainer(!1),u.__videoDest=!1},_isPlaying:function(){return t.GetIfShowVideoContainer()},StopVideo:function(){var u=t;if(u._resetErr(),u._isMobileMode())return u._mobileNotSupport("Addon.Webcam.StopVideo");this._clear();var s=u._innerFun("PlayVideo",a.makeParams(!1,0));return u._innerFun("StopCapture"),s},CaptureImage:function(u,s){var f=t;if(f._resetErr(),f._isMobileMode())return f._mobileNotSupport("Addon.Webcam.CaptureImage"),e.isFunction(s)&&s(f._errorCode,f._errorString),!1;if(!e.License.checkProductKey(f,{Webcam:!0},!0))return e.isFunction(s)&&s(f._errorCode,f._errorString),!1;function v(){a.hideMask(l),e.isFunction(s)&&s(f._errorCode,f._errorString)}var l="CaptureImage";return a.showMask(l),f.__OnCaptureError=v,f._innerSend(l,a.makeParams(!1),!0,function(){a.hideMask(),0==f.ErrorCode?(a.hideMask(l),e.isFunction(u)&&setTimeout(u,0),e.License.isLTS()&&Q.DWT.lcvrf(t)):v()},v)},GetMediaType:function(){var u=t;return u._resetErr(),u._isMobileMode()?u._mobileNotSupport("Addon.Webcam.GetMediaType"):u._innerWebcamValueFunction("GetMediaType")},SetMediaType:function(u){var s=t;return s._resetErr(),s._isMobileMode()?s._mobileNotSupport("Addon.Webcam.SetMediaType"):e.isString(u)?s._innerFun("SetMediaType",a.makeParams(u)):(e.Errors.InvalidValue(s),!1)},GetResolution:function(){var u=t;if(u._resetErr(),u._isMobileMode())return u._mobileNotSupport("Addon.Webcam.GetResolution");if((u=u._innerWebcamValueFunction("GetResolution"))&&u._resultlist){var s,f,v=u._resultlist,l=[],I=[];for(""==(f=0<v.length?v[v.length-1]:f)&&0<v.length&&(f=v[0]),s=0;s<v.length-1;s++){for(var c,_=(c=v[s]).toLowerCase().split("x"),h=(p=y=h=void 0,{value:c,p1:parseInt(_[0]),p2:parseInt(_[1])}),y=l,p=y.length-1;0<=p&&y[p].p1>=h.p1&&!(y[p].p1==h.p1&&y[p].p2<h.p2);)y[p+1]=y[p],p--;y[p+1]=h}for(s=0;s<l.length;s++)I.push(c=l[s].value);f&&I.push(f),u._resultlist=I,I=l=null}return u},SetResolution:function(u){var s=t;return s._resetErr(),s._isMobileMode()?s._mobileNotSupport("Addon.Webcam.SetResolution"):e.isNumber(u)||e.isString(u)?s._innerFun("SetResolution",a.makeParams(u)):(e.Errors.InvalidValue(s),!1)},GetFrameRate:function(){var u=t;return u._resetErr(),u._isMobileMode()?u._mobileNotSupport("Addon.Webcam.GetFrameRate"):u._innerWebcamValueFunction("GetFrameRate")},SetFrameRate:function(u){var s=t;return s._resetErr(),s._isMobileMode()?s._mobileNotSupport("Addon.Webcam.SetFrameRate"):e.isNumber(u)?t._innerFun("SetFrameRate",a.makeParams(u)):(e.Errors.InvalidValue(s),!1)},GetVideoPropertySetting:function(u){var s=t;return s._resetErr(),s._isMobileMode()?s._mobileNotSupport("Addon.Webcam.GetVideoPropertySetting"):s._innerWebcamSettingFunction("GetWebcamVideoPropertySetting",a.makeParams(u))},GetVideoPropertyMoreSetting:function(u){var s=t;return s._resetErr(),s._isMobileMode()?s._mobileNotSupport("Addon.Webcam.GetVideoPropertyMoreSetting"):s._innerWebcamMoreSettingFunction("GetWebcamVideoPropertyMoreSetting",a.makeParams(u))},SetVideoPropertySetting:function(u,s,f){var v=t;return v._resetErr(),v._isMobileMode()?v._mobileNotSupport("Addon.Webcam.SetVideoPropertySetting"):v._innerFun("SetWebcamVideoPropertySetting",a.makeParams(u,s,f))},SetVideoRotateMode:function(u){var s=t;return s._resetErr(),s._isMobileMode()?s._mobileNotSupport("Addon.Webcam.SetVideoRotateMode"):s._innerFun("SetVideoRotateMode",a.makeParams(u))},GetCameraControlPropertySetting:function(u){var s=t;return s._resetErr(),s._isMobileMode()?s._mobileNotSupport("Addon.Webcam.GetCameraControlPropertySetting"):s._innerWebcamSettingFunction("GetWebcamCameraControlSetting",a.makeParams(u))},GetCameraControlPropertyMoreSetting:function(u){var s=t;return s._resetErr(),s._isMobileMode()?s._mobileNotSupport("Addon.Webcam.GetCameraControlPropertyMoreSetting"):s._innerWebcamMoreSettingFunction("GetWebcamCameraControlMoreSetting",a.makeParams(u))},SetCameraControlPropertySetting:function(u,s,f){var v=t;return v._resetErr(),v._isMobileMode()?v._mobileNotSupport("Addon.Webcam.SetCameraControlPropertySetting"):v._innerFun("SetWebcamCameraControlPropertySetting",a.makeParams(u,s,f))}}},t.__addon=t.__addon||{},e.mix(t.__addon,r)})}),Q.AddonReady(function(e,n){var t;e.product.bActiveXEdition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(r){var a,o,u;if(!r.getSWebTwain()||!r.getSWebTwain().Addon)return!1;Q.navInfo.bWin&&(t=(u=!Q.navInfo.bOSx64||Q.navInfo.bWOW64)?"DynamicWebcam_"+Q.WebcamVerForActiveX+".dll":"DynamicWebcamx64_"+Q.WebcamVerForActiveX+".dll"),a=r.getSWebTwain();try{a.GetAddOnVersion("webcam",t)}catch{}(u=r)._innerRead=function(s){var f;try{f=Q.Lib.parse(s)}catch{}return f.result},u._innerWebcamValueFunctionPlugin=function(s){return s=this._innerRead(s),this._innerSetWebcamValue(s)},u._innerWebcamSettingFunctionPlugin=function(s){return s=this._innerRead(s),this._innerSetWebcamSetting(s)},u._innerWebcamMoreSettingFunctionPlugin=function(s){return s=this._innerRead(s),this._innerSetWebcamMoreSetting(s)},o={Webcam:{IsModuleInstalled:function(){var s=a.GetAddOnVersion("webcam",t);return e.setErrorString(r),""!=s},Download:function(s,f,v){function l(){return Q.Lib.isFunction(f)&&f(),!0}function I(){return Q.Lib.isFunction(v)&&v(r.ErrorCode,r.ErrorString),!1}return e.License.checkProductKey(r,{Webcam:!0},!0)?this.IsModuleInstalled()?l():s&&""!=s?(s=a.DownloadAddon(s),e.wrapperRet(r,s,l,I)):(Q.Lib.Errors.Webcam_InvalidRemoteFilename(r),I()):I()},GetSourceList:function(){if(!e.License.checkProductKey(r,{Webcam:!0},!0))return[];var s=a.GetWebcamSourceList(),f=[];return e.setErrorString(r),0==r.ErrorCode&&(f=r._innerRead(s))&&1<f.length&&f.splice(f.length-1,1),f},SelectSource:function(s){return!!e.License.checkProductKey(r,{Webcam:!0},!0)&&(s=a.SelectWebcam(s),e.setErrorString(r),s)},CloseSource:function(){r._playVideoDWT=null;var s=a.StopCapture();return e.setErrorString(r),s},GetFramePartURL:function(){if(!this._isPlaying())return e.WebcamErrors.VideoNotPlayingWhenGetURL(r),"";var s=a.GetDIB(-1);return e.setErrorString(r),s},GetFrameURL:function(){return""},PlayVideo:function(s,f,v,l,I){function c(){return r._playVideoDWT=null,Q.Lib.isFunction(I)&&I(r.ErrorCode,r.ErrorString),!1}if(!s||!s.getSWebTwain())return Q.Lib.WebcamErrors.InvalidParameter(r),c();if(!e.License.checkProductKey(r,{Webcam:!0},!0))return c();var _=s.getSWebTwain().CurrentHWND;return _?(r._playVideoDWT=s,setTimeout(function(){var h=a.RunWebcamCmd("PlayVideo",_,null,null,v);e.wrapperRet(r,h,l,c)},0),!0):(e.WebcamErrors.InvalidParameter(r),c())},PauseVideo:function(){return!0},StopVideo:function(){r._playVideoDWT=null;var s=a.RunWebcamCmd("StopVideo",0,null,null,null);return e.setErrorString(r),a.StopCapture(),s},CaptureImage:function(s,f){function v(){return Q.Lib.isFunction(f)&&f(r.ErrorCode,r.ErrorString),!1}if(!e.License.checkProductKey(r,{Webcam:!0},!0))return v();var l=a.RunWebcamCmd("Capture",0,function(){e.isFunction(s)&&setTimeout(s,0),e.License.isLTS()&&Q.DWT.lcvrf(r)},v,null);return e.setErrorString(r),l},GetMediaType:function(){var s=r._innerWebcamValueFunctionPlugin(a.GetMediaType());return e.setErrorString(r),s},SetMediaType:function(s){return e.isString(s)?(s=a.SetMediaType(s),e.setErrorString(r),s):(e.Errors.InvalidValue(r),!1)},GetResolution:function(){var s=r._innerWebcamValueFunctionPlugin(a.GetResolution());if(e.setErrorString(r),s&&s._resultlist){var f,v,l=s._resultlist,I=[],c=[];for(0<l.length&&(v=l[l.length-1]),f=0;f<l.length-1;f++){for(var _,h=(_=l[f]).toLowerCase().split("x"),y=(m=p=y=void 0,{value:_,p1:parseInt(h[0]),p2:parseInt(h[1])}),p=I,m=p.length-1;0<=m&&p[m].p1>=y.p1&&!(p[m].p1==y.p1&&p[m].p2<y.p2);)p[m+1]=p[m],m--;p[m+1]=y}for(f=0;f<I.length;f++)c.push(_=I[f].value);v&&c.push(v),s._resultlist=c,c=I=null}return s},SetResolution:function(s){return e.isNumber(s)||e.isString(s)?(s=a.SetResolution(s),e.setErrorString(r),s):(e.Errors.InvalidValue(r),!1)},GetFrameRate:function(){var s=r._innerWebcamValueFunctionPlugin(a.GetFrameRate());return e.setErrorString(r),s},SetFrameRate:function(s){return e.isNumber(s)?(s=a.SetFrameRate(s),e.setErrorString(r),s):(e.Errors.InvalidValue(r),!1)},GetVideoPropertySetting:function(s){return s=a.GetWebcamVideoPropertySetting(s),e.setErrorString(r),r._innerWebcamSettingFunctionPlugin(s)},GetVideoPropertyMoreSetting:function(s){return s=a.GetWebcamVideoPropertyMoreSetting(s),e.setErrorString(r),r._innerWebcamMoreSettingFunctionPlugin(s)},SetVideoPropertySetting:function(s,f,v){return s=a.SetWebcamVideoPropertySetting(s,f,v),e.setErrorString(r),s},SetVideoRotateMode:function(s){return s=a.SetVideoRotateMode(s),e.setErrorString(r),s},GetCameraControlPropertySetting:function(s){return s=a.GetWebcamCameraControlSetting(s),e.setErrorString(r),r._innerWebcamSettingFunctionPlugin(s)},GetCameraControlPropertyMoreSetting:function(s){return s=a.GetWebcamCameraControlMoreSetting(s),e.setErrorString(r),r._innerWebcamMoreSettingFunctionPlugin(s)},SetCameraControlPropertySetting:function(s,f,v){return s=a.SetWebcamCameraControlPropertySetting(s,f,v),e.setErrorString(r),s},_isPlaying:function(){return!!r._playVideoDWT}}},r.Addon=r.Addon||{},e.mix(r.Addon,o)})}),Q.DWT=Q.DWT||{},Q.aryAddonReadyFun=Q.aryAddonReadyFun||[],Q.AddonReady=Q.AddonReady||function(e){Q.aryAddonReadyFun.push(e)},Q.CameraVerInName="17.3.0.0531",Q.AddonReady(function(e,n){if(e.product.bHTML5Edition&&!Q.navInfoSync.bIE){var t={757:function(o,u,s){o.exports=s(666)},666:function(o){o=function(u){var s,f=Object.prototype,v=f.hasOwnProperty,l=(L="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",I=L.asyncIterator||"@@asyncIterator",c=L.toStringTag||"@@toStringTag";function _(fe,je,Se){return Object.defineProperty(fe,je,{value:Se,enumerable:!0,configurable:!0,writable:!0}),fe[je]}try{_({},"")}catch{_=function(je,Se,rt){return je[Se]=rt}}function h(fe,it,Se,mt){var tt,de,_t,be;return it=it&&it.prototype instanceof S?it:S,it=Object.create(it.prototype),mt=new $(mt||[]),it._invoke=(tt=fe,de=Se,_t=mt,be=p,function(Ce,we){if(be===T)throw new Error("Generator is already running");if(be===C){if("throw"===Ce)throw we;return De()}for(_t.method=Ce,_t.arg=we;;){var Ve=_t.delegate;if(Ve&&(Ve=function bt(At,St){var Pe=At.iterator[St.method];if(Pe===s){if(St.delegate=null,"throw"===St.method){if(At.iterator.return&&(St.method="return",St.arg=s,bt(At,St),"throw"===St.method))return D;St.method="throw",St.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}return"throw"===(Pe=y(Pe,At.iterator,St.arg)).type?(St.method="throw",St.arg=Pe.arg,St.delegate=null,D):(Pe=Pe.arg)?Pe.done?(St[At.resultName]=Pe.value,St.next=At.nextLoc,"return"!==St.method&&(St.method="next",St.arg=s),St.delegate=null,D):Pe:(St.method="throw",St.arg=new TypeError("iterator result is not an object"),St.delegate=null,D)}(Ve,_t))){if(Ve===D)continue;return Ve}if("next"===_t.method)_t.sent=_t._sent=_t.arg;else if("throw"===_t.method){if(be===p)throw be=C,_t.arg;_t.dispatchException(_t.arg)}else"return"===_t.method&&_t.abrupt("return",_t.arg);if(be=T,"normal"===(Ve=y(tt,de,_t)).type){if(be=_t.done?C:m,Ve.arg!==D)return{value:Ve.arg,done:_t.done}}else"throw"===Ve.type&&(be=C,_t.method="throw",_t.arg=Ve.arg)}}),it}function y(fe,je,Se){try{return{type:"normal",arg:fe.call(je,Se)}}catch(rt){return{type:"throw",arg:rt}}}u.wrap=h;var p="suspendedStart",m="suspendedYield",T="executing",C="completed",D={};function S(){}function M(){}function G(){}var L,W,F=(_(L={},l,function(){return this}),(W=(W=Object.getPrototypeOf)&&W(W(V([]))))&&W!==f&&v.call(W,l)&&(L=W),G.prototype=S.prototype=Object.create(L));function U(fe){["next","throw","return"].forEach(function(je){_(fe,je,function(Se){return this._invoke(je,Se)})})}function H(fe,je){var Se;this._invoke=function(rt,tt){function de(){return new je(function(_t,be){!function it(At,Ce,we,Ve){var bt;if("throw"!==(At=y(fe[At],fe,Ce)).type)return(Ce=(bt=At.arg).value)&&"object"==typeof Ce&&v.call(Ce,"__await")?je.resolve(Ce.__await).then(function(St){it("next",St,we,Ve)},function(St){it("throw",St,we,Ve)}):je.resolve(Ce).then(function(St){bt.value=St,we(bt)},function(St){return it("throw",St,we,Ve)});Ve(At.arg)}(rt,tt,_t,be)})}return Se=Se?Se.then(de,de):de()}}function Z(fe){var je={tryLoc:fe[0]};1 in fe&&(je.catchLoc=fe[1]),2 in fe&&(je.finallyLoc=fe[2],je.afterLoc=fe[3]),this.tryEntries.push(je)}function X(fe){var je=fe.completion||{};je.type="normal",delete je.arg,fe.completion=je}function $(fe){this.tryEntries=[{tryLoc:"root"}],fe.forEach(Z,this),this.reset(!0)}function V(fe){if(fe){var je,Se=fe[l];if(Se)return Se.call(fe);if("function"==typeof fe.next)return fe;if(!isNaN(fe.length))return je=-1,(Se=function rt(){for(;++je<fe.length;)if(v.call(fe,je))return rt.value=fe[je],rt.done=!1,rt;return rt.value=s,rt.done=!0,rt}).next=Se}return{next:De}}function De(){return{value:s,done:!0}}return _(F,"constructor",M.prototype=G),_(G,"constructor",M),M.displayName=_(G,c,"GeneratorFunction"),u.isGeneratorFunction=function(fe){return!!(fe="function"==typeof fe&&fe.constructor)&&(fe===M||"GeneratorFunction"===(fe.displayName||fe.name))},u.mark=function(fe){return Object.setPrototypeOf?Object.setPrototypeOf(fe,G):(fe.__proto__=G,_(fe,c,"GeneratorFunction")),fe.prototype=Object.create(F),fe},u.awrap=function(fe){return{__await:fe}},U(H.prototype),_(H.prototype,I,function(){return this}),u.AsyncIterator=H,u.async=function(fe,je,Se,rt,tt){void 0===tt&&(tt=Promise);var de=new H(h(fe,je,Se,rt),tt);return u.isGeneratorFunction(je)?de:de.next().then(function(_t){return _t.done?_t.value:de.next()})},U(F),_(F,c,"Generator"),_(F,l,function(){return this}),_(F,"toString",function(){return"[object Generator]"}),u.keys=function(fe){var je,Se=[];for(je in fe)Se.push(je);return Se.reverse(),function rt(){for(;Se.length;){var tt=Se.pop();if(tt in fe)return rt.value=tt,rt.done=!1,rt}return rt.done=!0,rt}},u.values=V,$.prototype={constructor:$,reset:function(fe){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(X),!fe)for(var je in this)"t"===je.charAt(0)&&v.call(this,je)&&!isNaN(+je.slice(1))&&(this[je]=s)},stop:function(){this.done=!0;var fe=this.tryEntries[0].completion;if("throw"===fe.type)throw fe.arg;return this.rval},dispatchException:function(fe){if(this.done)throw fe;var je=this;function Se(it,mt){return de.type="throw",de.arg=fe,je.next=it,mt&&(je.method="next",je.arg=s),!!mt}for(var rt=this.tryEntries.length-1;0<=rt;--rt){var tt=this.tryEntries[rt],de=tt.completion;if("root"===tt.tryLoc)return Se("end");if(tt.tryLoc<=this.prev){var _t=v.call(tt,"catchLoc"),be=v.call(tt,"finallyLoc");if(_t&&be){if(this.prev<tt.catchLoc)return Se(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return Se(tt.finallyLoc)}else if(_t){if(this.prev<tt.catchLoc)return Se(tt.catchLoc,!0)}else{if(!be)throw new Error("try statement without catch or finally");if(this.prev<tt.finallyLoc)return Se(tt.finallyLoc)}}}},abrupt:function(fe,je){for(var Se=this.tryEntries.length-1;0<=Se;--Se){var rt=this.tryEntries[Se];if(rt.tryLoc<=this.prev&&v.call(rt,"finallyLoc")&&this.prev<rt.finallyLoc){var tt=rt;break}}var de=(tt=tt&&("break"===fe||"continue"===fe)&&tt.tryLoc<=je&&je<=tt.finallyLoc?null:tt)?tt.completion:{};return de.type=fe,de.arg=je,tt?(this.method="next",this.next=tt.finallyLoc,D):this.complete(de)},complete:function(fe,je){if("throw"===fe.type)throw fe.arg;return"break"===fe.type||"continue"===fe.type?this.next=fe.arg:"return"===fe.type?(this.rval=this.arg=fe.arg,this.method="return",this.next="end"):"normal"===fe.type&&je&&(this.next=je),D},finish:function(fe){for(var je=this.tryEntries.length-1;0<=je;--je){var Se=this.tryEntries[je];if(Se.finallyLoc===fe)return this.complete(Se.completion,Se.afterLoc),X(Se),D}},catch:function(fe){for(var je=this.tryEntries.length-1;0<=je;--je){var Se,rt,tt=this.tryEntries[je];if(tt.tryLoc===fe)return"throw"===(Se=tt.completion).type&&(rt=Se.arg,X(tt)),rt}throw new Error("illegal catch attempt")},delegateYield:function(fe,je,Se){return this.delegate={iterator:V(fe),resultName:je,nextLoc:Se},"next"===this.method&&(this.arg=s),D}},u}(o.exports);try{regeneratorRuntime=o}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},r={};a.n=function(o){var u=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(u,{a:u}),u},a.d=function(o,u){for(var s in u)a.o(u,s)&&!a.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:u[s]})},a.o=function(o,u){return Object.prototype.hasOwnProperty.call(o,u)},function(){function o(ne,J,P,E,x,R,k){try{var j=ne[R](k),B=j.value}catch(q){return void P(q)}j.done?J(B):Promise.resolve(B).then(E,x)}function u(ne){return function(){var J=this,P=arguments;return new Promise(function(E,x){var R=ne.apply(J,P);function k(B){o(R,E,x,k,j,"next",B)}function j(B){o(R,E,x,k,j,"throw",B)}k(void 0)})}}var gn=a(757),s=a.n(gn),f=window.Dynamsoft;function v(){return(v=Object.assign||function(ne){for(var J=1;J<arguments.length;J++){var P,E=arguments[J];for(P in E)Object.prototype.hasOwnProperty.call(E,P)&&(ne[P]=E[P])}return ne}).apply(this,arguments)}function l(ne){if(void 0===ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}function I(ne,J){return(I=Object.setPrototypeOf||function(P,E){return P.__proto__=E,P})(ne,J)}function c(ne,J){ne.prototype=Object.create(J.prototype),I(ne.prototype.constructor=ne,J)}function _(ne,J){if(Object.prototype.hasOwnProperty.call(ne,J))return ne;throw new TypeError("attempted to use private field on non-instance")}var h=0;function y(ne){return"__private_"+h+++"_"+ne}var de,p={code:0,message:"ok."},m={code:80001,message:"The parameter type is wrong."},T={code:80025,message:"The camera class is required."},C={code:80027,message:"The license of webcam is invalid."},D={code:80028,message:"The video is shown."},S={code:80033,message:"The options is invalid."},M={code:80034,message:"The file name is invalid."},G="_updateErrorMessage",L="_canvasClick",W="_afterRender",F="_documentClickUI",U="_pagerChangedUI",H="__dynamsoft_camera_files",Z="dynamsoft-dvs-file",X="documentScanPage",V={scannerViewer:{maxDocuments:20,maxImagesInBuffer:20,fullScreen:!0,enableBorderDetection:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid"},headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},bodyStyle:{background:"#ffffff"},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},scanButtonStyle:{background:"#fe8e14",color:"#ffffff"},resolution:{visibility:"visible",valueList:[{label:"720P",value:{width:1280,height:720}},{label:"1080P",value:{width:1920,height:1080}},{label:"2K",value:{width:2560,height:1440}},{label:"4K",value:{width:3840,height:2160}}],defaultValue:{width:1280,height:720}},autoDetect:{visibility:"visible",enableAutoDetect:!1,acceptedPolygonConfidence:0,acceptedBlurryScore:0},autoScan:{visibility:"visible",enableAutoScan:!1},continuousScan:{visibility:"visible",enableContinuousScan:!0},switchCamera:{visibility:"visible"},loadLocalFile:{visibility:"visible"}},documentEditorSettings:{visibility:"visible",headerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14",disabledColor:"#808080"},bodyStyle:{background:"#ffffff"},footerStyle:{background:"#000000",color:"#ffffff",selectedColor:"#fe8e14"},insert:{visibility:"visible",position:"before"},delete:{visibility:"visible"},rotateLeft:{visibility:"visible"},filter:{visibility:"visible",valueList:[{label:"Original",value:"original",option:{level:1}},{label:"B&W",value:"blackAndWhite",option:{level:1}},{label:"Grayscale",value:"grayscale",option:{level:1}},{label:"Clean",value:"clean",option:{level:1}},{label:"Brightening",value:"brightening",option:{level:1}},{label:"Save Toner",value:"saveToner",option:{level:1}}],applyToAll:{visibility:"visible",enableApplyToAll:!0,label:"Apply to All"},defaultValue:"original"},cropViewer:{visibility:"visible",polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid"},rotateLeft:{visibility:"visible"},rotateRight:{visibility:"visible"},autoDetectBorder:{visibility:"visible"},apply:{visibility:"visible"}}}},De="error",fe="cropViewer",je="mainViewer",_t=function(){function ne(J){this._updateData(J)}return ne.prototype._updateData=function(J){var P=this;Object.keys(J).forEach(function(E){P[E]=J[E]})},ne}(),be_HTTPS_REQUIRED={code:-4201,message:"HTTPS is required for accessing cameras."},be_MEDIADEVICES_NOT_IMPL={code:-4202,message:"The current browser has not implemented the MediaDevices interface."},be_GETUSERMEDIA_NOT_IMPL={code:-4203,message:"The current browser has not implemented the getUserMedia interface."},be_NO_CAMERA_SELECTED={code:-4205,message:"No camera is selected."},be_VIDEO_ELEMENT_REQUIRED={code:-4206,message:"A Video element is required for this operation."},be_CAMERA_PLUG_OUT={code:-4207,message:"The camera is not plugged in."},be_CAMERA_NOT_OPEN={code:-4208,message:"The camera is not open."},be_FAILED_GET_USERMEDIA={code:-4210,message:"Failed to get camera input."},be_SOURCE_NOT_FOUND={code:-4211,message:"The camera source can not be found."},be_VIDEO_NOT_PLAY={code:-4214,message:"The video must be playing for the capture operation to work."},be_VIDEO_NOT_STOP={code:-4215,message:"The video is already playing. Please stop the video before attempting to play it again to a different container."},be_NO_CAMERA={code:-4216,message:"No camera is found."},be_LICENSE_INVALID={code:-4217,message:"The license is invalid."},be_MAX_IMAGES_IN_BUFFER_LIMIT={code:-4219,message:"The number of images processed exceeded memory limit."},be_CAPTURE_NO_IMAGE={code:-4220,message:"No image is found for the capture operation."},be_IMAGE_FORMAT_INVALID={code:-4221,message:"The image format is not support."},be_RESOLUTION_INVALID={code:-4222,message:"The resolution is not support."},it=((gn=de=de||{}).iconResolution="dynamsoft-camera-icon-resolution",gn.iconAutoDetect="dynamsoft-camera-icon-autoDetect",gn.iconClose="dynamsoft-camera-icon-close",gn.iconLoad="dynamsoft-camera-icon-loadLocalFile",gn.iconSwitch="dynamsoft-camera-icon-switchCamera",gn.iconCapture="dynamsoft-camera-icon-scan",gn.iconAutoCapture="dynamsoft-camera-icon-autoScan",gn.iconContinuous="dynamsoft-camera-icon-continuous",gn.iconBack="dynamsoft-camera-icon-back",gn.iconArrow="dynamsoft-camera-icon-arrow",gn.iconDelete="dynamsoft-camera-icon-remove",gn.iconInsert="dynamsoft-camera-icon-insert",gn.iconRotateLeft="dynamsoft-camera-icon-rotateLeft",gn.iconFilter="dynamsoft-camera-icon-filter",gn.iconCrop="dynamsoft-camera-icon-crop",gn.iconSave="dynamsoft-camera-icon-save",gn.iconRotateRight="dynamsoft-camera-icon-rotateRight",gn.iconFullCrop="dynamsoft-camera-icon-autoDetectBorder",gn.iconNext="dynamsoft-camera-icon-next",gn.uiIcon="dynamsoft-camera-ui-icon",gn.uiExitMutiple="dynamsoft-camera-ui-exitMutiple",gn.uiCapture="dynamsoft-camera-ui-capture",gn.uiDetect="dynamsoft-camera-ui-detect",gn.uiPrevious="dynamsoft-camera-ui-previous",gn.uiNext="dynamsoft-camera-ui-next",gn.uiDelete="dynamsoft-camera-ui-delete",gn.uiSave="dynamsoft-camera-ui-save",gn.displayNone="dynamsoft-camera-display-none",gn.fixedFull="dynamsoft-camera-fixed-full",gn.font="dynamsoft-camera-font",gn.disable="dynamsoft-camera-disable",gn.filterDropDown="dynamsoft-camera-filterDropDown",gn.buttonMultipleImg="dynamsoft-camera-button-multipleImg",gn.filterApplyAll="dynamsoft-camera-filterApplyAll",gn.hidden="dynamsoft-camera-display-none",gn.previewImg="dynamsoft-camera-previewImg",gn.cameraVideo="dynamsoft-camera-cameraVideo",gn.cameraCvs="dynamsoft-camera-cameraCvs",gn.cameraContainer="dynamsoft-camera-cameraContainer",gn.overflowHidden="dynamsoft-camera-overflowHidden",gn.relative="dynamsoft-camera-relative",gn.cvsContainer="dynamsoft-camera-cvsContainer",gn.detectCvs="dynamsoft-camera-detectCvs",gn.documentScanPage="dynamsoft-camera-scanPage",gn.documentEditPage="dynamsoft-camera-documentEditPage",gn.cropPage="dynamsoft-camera-cropPage",gn.block="dynamsoft-camera-block",gn.capturing="dynamsoft-camera-capturing",gn.headerfont="dynamsoft-camera-header-icon-font",gn.footerfont="dynamsoft-camera-footer-icon-font",gn.headerSelected="dynamsoft-camera-header-selected",gn.footerSelected="dynamsoft-camera-footer-selected",gn.filterSelectedItem="dynamsoft-camera-filter-selected",gn.filterCheckBox="dynamsoft-camera-filter-checkBox",gn.filterCheckedBox="dynamsoft-camera-filter-checkedBox",gn.ddlSelectedItem="dynamsoft-camera-ddl-selected",gn.BUTTON_PREFIX="dynamsoft-camera-button-",["blobList"]);function mt(ne){ne&&!ne.isDestroyed&&ne.destroy()}function Ce(){return(Ce=u(s().mark(function ne(J,P){var E;return s().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(void 0===P&&(P=!0),J){x.next=4;break}return document.body.classList.remove(de.overflowHidden),x.abrupt("return");case 4:if(!J.element){x.next=25;break}if(E=J.container){x.next=15;break}if(J.container=document.body,P)return x.next=11,J.show();x.next=11;break;case 11:return J.element.classList.add(de.fixedFull),document.body.appendChild(J.element),document.body.classList.add(de.overflowHidden),x.abrupt("return");case 15:if(!(E=Ye(E)?document.getElementById(E):E)){x.next=25;break}if(document.body.classList.contains(de.overflowHidden)&&document.body.classList.remove(de.overflowHidden),document.body===E&&document.body.classList.add(de.overflowHidden),"static"===window.getComputedStyle(E).position&&document.body!==E&&E.classList.add(de.relative),E.appendChild(J.element),J.container=E,P)return x.next=25,J.show();x.next=25;break;case 25:case"end":return x.stop()}},ne)}))).apply(this,arguments)}function we(){return Ve.apply(this,arguments)}function Ve(){return(Ve=u(s().mark(function ne(J,P,E){var x,R,k,j,B;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return R=!1,E&&(x=_e(E),R=Qt(x,J.imageWidth,J.imageHeight)),j=!1,B={quality:85,returnType:f.Enum_ImageType.IT_BGRA,returnBlob:!1},!R&&E&&(Fe(x)&&8==x.length&&(k={points:x}),j=!0),q.abrupt("return",We(J,P,k,j,B,!1).then(function(ee){return J.imageData=ee.src,Te(ee.result),ee.result}));case 5:case"end":return q.stop()}},ne)}))).apply(this,arguments)}function bt(ne,J){var P,E=void 0===(E=(R=se(void 0===(R=ne.config)?{}:R,"documentEditorSettings.filter")).defaultValue)?"original":E,x=R.applyToAll,R=R.valueList;return"original"!==(P=(P=x&&x.enableApplyToAll&&Ye(ne.filterApplyToAllValue)&&""!=ne.filterApplyToAllValue?ne.filterApplyToAllValue:P)||(P=Ye(J)&&""!=J?J:P)||E)&&R.some(function(k){return k.value===P})?P:"original"}function At(){return(At=u(s().mark(function ne(J,P,E,x){var R;return s().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if("original"===(R=bt(J,x)))return j.abrupt("return",{filterValue:R,filterBlob:E});j.next=3;break;case 3:return j.next=5,J.filterHandlerByIImageData(P,E,R);case 5:return j.abrupt("return",{filterValue:R,filterBlob:j.sent});case 7:case"end":return j.stop()}},ne)}))).apply(this,arguments)}function St(){return Pe.apply(this,arguments)}function Pe(){return(Pe=u(s().mark(function ne(J,P,E,x,R,k,j){var B,q,ee,te,ve,Ge,ht,pt,vt,dn;return s().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:if(void 0===E&&(E=!1),void 0===x&&(x=!1),void 0===R&&(R=!1),!k){Wt.next=14;break}if(!R){Wt.next=11;break}Wt.next=7;var Tn=J;return f.ImageProcWrapper.createImage({source:Tn,output:{orgImage:!1,previewImage:{quality:85,width:200,height:200,returnType:f.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}}}).then(function(_n){return Tn.imageData=_n.src,Te(_n.preview),_n.preview});case 7:B=new _t({oriBlob:k,preview:B=Wt.sent}),Wt.next=12;break;case 11:B=new _t({oriBlob:k});case 12:Wt.next=21;break;case 14:return R||(q=!1),Wt.next=17,We(J,void 0,void 0,void 0,void 0,q);case 17:J.imageData=(ee=Wt.sent).src,Te(ee.result),B=R?(Te(ee.preview),new _t({oriBlob:ee.result,preview:ee.preview})):new _t({oriBlob:ee.result});case 21:if(ee=se(P,"config.scannerViewer"),te=J.imageWidth,ve=J.imageHeight,Ge=void 0===(Ge=ee.enableBorderDetection)||Ge)return Wt.next=26,ze(J,P);Wt.next=40;break;case 26:if(vt=function(_n,Nn,zn){return _n.map(function(Pn,yn){return yn%2==0?(yn=Pn,yn=Math.max(0,Pn),Math.min(yn,Nn)):(yn=Math.max(0,Pn),Math.min(yn,zn))})}(_e((Ge=Wt.sent).cornerPoints),te,ve),B.detectArea=vt,x||E)return Wt.next=33,we(J,void 0,B.detectArea);Wt.next=38;break;case 33:return ht=Wt.sent,Wt.next=36,Ze(ht);case 36:pt=Wt.sent,E&&(B.resImage=ht,B.resBlob=K(pt));case 38:Wt.next=43;break;case 40:B.detectArea=[0,0,te,0,te,ve,0,ve],x&&(ht=J,pt=B.oriBlob),E&&(B.resImage=J,B.resBlob=K(B.oriBlob));case 43:if(x)return Wt.next=46,function(){return At.apply(this,arguments)}(P,ht,pt,j);Wt.next=51;break;case 46:dn=(vt=Wt.sent).filterBlob,B.filterValue=vt.filterValue,B.filterBlob=dn;case 51:return pt=ht=null,Wt.abrupt("return",B);case 54:case"end":return Wt.stop()}},ne)}))).apply(this,arguments)}function ae(ne,J,P,E){return Ie.log("blobToImageData"),We(ne,J,P,E,{quality:85,returnType:f.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(x){return Te(x.result),x.result})}function Ze(ne){return Ie.log("ImageDataToBlob"),We(ne,void 0,void 0,void 0,{quality:85,returnType:f.Enum_ImageType.IT_JPG,returnBlob:!0},!1).then(function(P){return ne.imageData=P.src,Te(P.result),P.result})}function Ne(){return Re.apply(this,arguments)}function Re(){return(Re=u(s().mark(function ne(J,P,E){var x,R,k,j,B,q,ee,te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(x=J.getCurrentPage()){ve.next=3;break}return ve.abrupt("return");case 3:if(R=x.getHtmlElement()){ve.next=6;break}return ve.abrupt("return");case 6:if(k=R?.querySelector("."+de.buttonMultipleImg)){ve.next=9;break}return ve.abrupt("return");case 9:if(j=x.queryPreviewImageElement()){ve.next=12;break}return ve.abrupt("return");case 12:if(!(B=P).preview){ve.next=16;break}ve.next=26;break;case 16:return ve.next=18,ae(B.oriBlob);case 18:return ee=ve.sent,B.detectArea&&(q={cornerPoints:B.detectArea}),ve.next=22,tn(J,q,ee,!1,!1);case 22:B.preview=(ee=ve.sent).preview,delete ee.preview,ee=null;case 26:return ve.next=28,new Promise(function(Ge,ht){var pt=j.src;j.src=ke.createURL(B.preview),B.detectArea&&j.setAttribute("data",JSON.stringify(B.detectArea)),N(B),B=null,j.onload=function(){j.onload=null,pt&&ke.revokeObjectURL(pt),Ge(!0)},j.onerror=function(vt){ht(vt)}});case 28:te=k?.querySelector(".dynamsoft-camera-imgCount"),0<E?(te.innerText=String(E),te.classList.remove(de.displayNone)):(te.innerText="",te.classList.add(de.displayNone)),te=R?.querySelector("."+de.BUTTON_PREFIX+"continuousMode"),k.classList.remove(de.displayNone),te?.classList.add(de.footerSelected);case 33:case"end":return ve.stop()}},ne)}))).apply(this,arguments)}function ze(){return Qe.apply(this,arguments)}function Qe(){return(Qe=u(s().mark(function ne(J,P){var E,x,R,k,j,B,q,ee,te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(E=J.imageWidth,x=J.imageHeight,R=void 0===(R=(k=void 0===(k=(k=P.config.scannerViewer||{}).autoDetect)?{}:k).acceptedPolygonConfidence)?80:R,k=void 0===(k=k.acceptedBlurryScore)?80:k,j=P.getAreaDetectCallback()){ve.next=7;break}return P.emit(De,{message:"The detect function is not bind.",code:-4290}),ve.abrupt("return",{cornerPoints:[],detectedArea:!1});case 7:return ve.next=9,j(J,R,k,void 0,void 0);case 9:return J.imageData=(B=ve.sent).src,q=void 0===(q=B.confidence)?[0]:q,ee=void 0===(ee=B.blurryScore)?0:ee,te=B.cornerPoints,P.emit("documentDetected",B),q[0]<R/100||ee<k||te.every(function(Ge){return 0===Ge})?(B.detectedArea=!1,B.cornerPoints=[0,0,E,0,E,x,0,x]):B.detectedArea=!0,ve.abrupt("return",B);case 15:case"end":return ve.stop()}},ne)}))).apply(this,arguments)}function ot(){return(ot=u(s().mark(function ne(J,P,E,x,R){var k,j,B;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if("original"===R)return q.abrupt("return",P);q.next=2;break;case 2:if(k=E.find(function(ee){return ee.label===R}),j=x.find(function(ee){return ee.value===R}),k&&k.handler&&j){q.next=6;break}return q.abrupt("return",P);case 6:return q.next=8,ae(P);case 8:return B=q.sent,q.next=11,k.handler(B,j.option);case 11:return q.abrupt("return",(B=q.sent).result);case 13:case"end":return q.stop()}},ne)}))).apply(this,arguments)}function Lt(){return(Lt=u(s().mark(function ne(J,P,E,x,R){var k,j,B;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if("original"===R)return q.abrupt("return",P);q.next=2;break;case 2:if(k=E.find(function(ee){return ee.label===R}),j=x.find(function(ee){return ee.value===R}),k&&k.handler&&j){q.next=6;break}return q.abrupt("return",P);case 6:return q.next=8,k.handler(J,j.option);case 8:return J.imageData=(B=q.sent).src,Te(B.result),q.abrupt("return",B.result);case 12:case"end":return q.stop()}},ne)}))).apply(this,arguments)}function Ot(E,J){var P=(E=E||{}).iconCss;return E=void 0===(E=E.visibility)||E,P&&(J.icon=P),(Ye(E)&&"hidden"==E.toLowerCase()||!1===E)&&(J.visibility="hidden"),J}function Bt(){return(Bt=u(s().mark(function ne(J,P,E,x){var R;return s().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(E)return R=function(j,B){if(null==j)return{};for(var q,ee={},te=Object.keys(j),ve=0;ve<te.length;ve++)0<=B.indexOf(q=te[ve])||(ee[q]=j[q]);return ee}(x,it),k.next=4,Promise.resolve(E([{iImageData:P,file:v({},R)}]));k.next=8;break;case 4:!1!==k.sent&&J.redirectToHome(),k.next=9;break;case 8:J.redirectToHome();case 9:case"end":return k.stop()}},ne)}))).apply(this,arguments)}function Ft(){return(Ft=u(s().mark(function ne(J,P,E,x){var R,k,j,B,q,ee,te,ve,Ge,ht,pt,vt,Tt,dn,Wt,Tn,xn,_n,Nn,zn,Pn;return s().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:if(R=J.getCurrentPage(),k=void 0===(k=(void 0===(k=J.config.scannerViewer)?{}:k).continuousScan)?{}:k,0==P.length)return yn.abrupt("return");yn.next=5;break;case 5:if(k.enableContinuousScan||1!=P.length){yn.next=20;break}return j=P[0],yn.next=9,ae(j);case 9:return B=yn.sent,yn.next=12,St(B,J,!1,!1,!1,j);case 12:return ee={cornerPoints:ee=(ee=yn.sent).detectArea,detectedArea:!0},yn.next=17,It(J,B,!1,ee,E,j);case 17:R instanceof pr&&R.enableMultiImages(),yn.next=56;break;case 20:if(q=R.getImageCount(),Ge=ve=void 0===(ve=(ee=J.config.scannerViewer||{}).maxDocuments)?20:ve,te=P.length,(q+P.length>Ge||q+P.length>ve)&&(J.emit("video-error",be_MAX_IMAGES_IN_BUFFER_LIMIT),te=Ge-q),ve=R.getDvs(),!(0<te)){yn.next=56;break}Ge=bt(J,null),vt=pt=0;case 30:if(vt<te)return Tt=P[vt],yn.next=34,ae(Tt);yn.next=46;break;case 34:return dn=yn.sent,yn.next=37,St(dn,J,!0,!0,!1,Tt,Ge);case 37:Wt=(dn=yn.sent).filterBlob,Tn=dn.resBlob,xn=dn.detectArea,_n=dn.oriBlob,zn=Nt(Nn=x?_n:Wt||Tn),ht=xn,ve.DataControl.appendSync(E,[{oriData:Nn.imageData,metadata:zn,customData:{oriBlob:_n,angle:pt,detectArea:xn,filterValue:Ge,resBlob:Wt||Tn}}]);case 43:vt++,yn.next=30;break;case 46:return Pn={oriBlob:P[te-1],detectArea:ht},yn.next=49,Ne(J,Pn,q+te);case 49:if(N(Pn),Pn=null,k.enableContinuousScan){yn.next=56;break}if(R instanceof pr)return R.enableMultiImages(),yn.next=56,In(null,{dcs:J});yn.next=56;break;case 56:case"end":return yn.stop()}},ne)}))).apply(this,arguments)}function It(){return Kt.apply(this,arguments)}function Kt(){return(Kt=u(s().mark(function ne(J,P,E,x,R,k){var j,B,q,ee,te,ve,Ge,ht,pt,vt,Tt,dn,Wt,Tn,xn,_n,Nn,zn;return s().wrap(function(Pn){for(;;)switch(Pn.prev=Pn.next){case 0:if(B=J.getCurrentPage(),q=B.options,ee=void 0===(ee=(void 0===(ee=J.config.scannerViewer)?{}:ee).continuousScan)?{}:ee,te=void 0===(te=(te=se(J,"config.documentEditorSettings.cropViewer")).visibility)||te,ve=P,Ge=void 0===(Ge=(void 0===(Ge=J.config)?{}:Ge).documentEditorSettings)?{}:Ge,vt=pt=void 0===(pt=(pt=J.config.scannerViewer||{}).maxDocuments)?20:pt,ht=B.getImageCount()+1,Ie.log("continuous mode."),vt<ht||pt<ht)return Ie.log("maxImagesInBuffer."),J.emit("video-error",be_MAX_IMAGES_IN_BUFFER_LIMIT),(J.config.scannerViewer.autoScan.enableAutoScan||J.config.scannerViewer.autoDetect.enableAutoDetect)&&(vt=J.captureLoop.getLoopType(),J.captureLoop.stopCaptureLoop(),J.captureLoop.changeStyle(),J.captureLoop._setLoopType(vt),J.captureLoop.setDisable()),Pn.abrupt("return");Pn.next=17;break;case 17:if(ee.enableContinuousScan){Pn.next=61;break}if(J.showLoading("handle sigle image"),Ie.log("not continuous mode."),J.stop(),te)return Ie.log("get BlobItem no filter+noPerspective+no preview"),Pn.next=25,St(ve,J,!1,!1,!1,k);Pn.next=30;break;case 25:j=Pn.sent,E&&J.setImageDataBack(ve.imageData),j.filterValue=bt(J,null),Pn.next=48;break;case 30:return Ie.log("get BlobItem filter+Perspective+no preview"),Pn.next=33,St(ve,J,!0,!0,!1,k);case 33:if(j=Pn.sent,E&&(J.setImageDataBack(ve.imageData),delete ve.imageData),vt=(pt=j).filterBlob,dn=pt.resBlob,Wt=j.resImage,(yn=j)&&(g(yn),w(yn),N(yn)),Wt&&delete j.resImage,vt&&delete j.filterBlob,"hidden"==Ge.visibility.toString().toLowerCase())return Wt={blobList:[]},Pn.next=44,function(){return Bt.apply(this,arguments)}(J,vt||dn,q.onSaveCapture,Wt);Pn.next=48;break;case 44:return J.captureLoop&&J.captureLoop.setIsLooping(!1),J.emit("focusPage"),J.hideLoading("handle sigle image"),Pn.abrupt("return");case 48:if(J.emit("blurPage"),Tt=J.getCurrentPage())return Tt.hide(),(dn=Tt.getDvs()).DataControl.appendSync(R,[{oriData:(Wt=j.resBlob||j.oriBlob).imageData,metadata:Nt(Wt),customData:{oriBlob:j.oriBlob,detectArea:j.detectArea,filterValue:j.filterValue}}]),Pn.next=57,Tt.clickMultipleImage();Pn.next=57;break;case 57:Tt instanceof pr&&(Tt.enableMultiImages(),Tt.setPreviewImageFlag()),J.hideLoading("handle sigle image"),Pn.next=74;break;case 61:return Pn.next=63,tn(J,x,ve,E,!0);case 63:return xn=(_n=Tn=Pn.sent).oriBlob,_n=_n.detectArea,Nn=bt(J,null),zn=Nt(xn),B.getDvs().DataControl.appendSync(R,[{oriData:xn.imageData,metadata:zn,customData:{oriBlob:xn,detectArea:_n,angle:0,filterValue:Nn}}]),Pn.next=72,Ne(J,Tn,ht);case 72:N(Tn),Tn=null;case 74:case"end":return Pn.stop()}var yn},ne)}))).apply(this,arguments)}function tn(){return en.apply(this,arguments)}function en(){return(en=u(s().mark(function ne(J,P,E,x,R){var k,j,B;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(Ie.log("package to BlobItem"),J.config.scannerViewer.enableBorderDetection){q.next=5;break}k={},q.next=12;break;case 5:if(!P){q.next=9;break}k=P,q.next=12;break;case 9:return q.next=11,ze(E,J);case 11:k=q.sent;case 12:j=k.cornerPoints,B=void 0===(B=(B=se(J,"config.scannerViewer")).polygonStyle)?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:B,Ie.log("get detected preview"),q.next=18;var ee,te=E,ve=j,Ge=B,ht=R,pt="fe8e14";return Ge&&Ye(Ge.stroke)&&0==Ge.stroke.indexOf("#")&&(pt=Ge.stroke.substr(1)),ve&&(ee={points:Ge=_e(ve),lineWidth:5,strokeColor:pt}),We(te,void 0,ee,!1,ht,!0).then(function(vt){return te.imageData=vt.src,vt&&(Te(vt.result),Te(vt.preview)),vt});case 18:return B=q.sent,Ie.log("get detected preview ok"),x&&(J.setImageDataBack(E.imageData),delete E.imageData),q.abrupt("return",new _t({oriBlob:B.result,preview:B.preview,detectArea:j}));case 22:case"end":return q.stop()}},ne)}))).apply(this,arguments)}function Ee(ne){if(!ne)return[];for(var J=0;J<ne.length;J++)ne[J]=Math.fround(ne[J]);return ne}function _e(P){var J,E,x,R,k,j;return E=function(E){var x,R,k;if(E&&8===E.length)return E=function(R){for(var k=[],j=0;j<R.length;j+=2)k.push({x:R[j],y:R[j+1]});return k}(E),k={x:0,y:0},(R=E).forEach(function(j){k.x+=j.x,k.y+=j.y}),k.x/=R.length,k.y/=R.length,x=k,E.sort(function(R,k){return Math.atan2(R.y-x.y,R.x-x.x)-Math.atan2(k.y-x.y,k.x-x.x)}),E}(P),x=E.slice().sort(function(B,q){return B.y-q.y})[0],R=E.indexOf(x),k=E[R-1],0===R&&(k=E[3]),k={x:x.x-k.x,y:x.y-k.y},j={x:(j=E[R+1]).x-x.x,y:j.y-x.y},k=Ae(x={x:10,y:0},k),x=Ae(x,j),j=R,k<x&&(j=0===R?3:R-1),P=E.slice(j).concat(E.slice(0,j)),J=[],P.forEach(function(E){J.push(E.x,E.y)}),J}function Ae(x,J){var P=Math.pow(Math.pow(x.x,2)+Math.pow(x.y,2),.5),E=Math.pow(Math.pow(J.x,2)+Math.pow(J.y,2),.5);return x=x.x*J.x+x.y*J.y,Math.acos(x/(P*E))}function We(ne,J,P,E,x,R){var k;return xe(ne,(k={polygon:k=void 0,doPerspective:k,source:{angle:k},output:{orgImage:k,previewImage:k}}).source),k.source.angle=J,P&&Fe(P.points)&&8==P.points.length&&(k.polygon=P,E&&(k.doPerspective=!0)),!1!==x&&(k.output.orgImage=x instanceof Object?x:{quality:85,returnType:f.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==R&&(k.output.previewImage=R instanceof Object?R:{quality:85,width:200,height:200,returnType:f.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),f.ImageProcWrapper.createImage(k)}function pe(ne){return(ne%=360)<0&&(ne+=360),ne}var Ie={log:function(ne,J,P,E){window.Dynamsoft&&window.Dynamsoft.Lib.debug&&window.Dynamsoft.Lib.log(ne,J,P,E)},error:function(ne){window.Dynamsoft&&window.Dynamsoft.Lib.error(ne)}};function $e(){return st.apply(this,arguments)}function st(){return(st=u(s().mark(function ne(J,P,E,x,R){var k,j;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return void 0===R&&(R={}),q.next=3,P.DataControl.getData(E);case 3:return k=q.sent.customData,j=Nt(J),k?x&&(w(k),N(k)):k={},R&&(f.Lib.each(x?["angle","detectArea","filterValue","bitDepth"]:["angle","detectArea","filterValue","bitDepth","resBlob","preview"],function(ee){void 0!==R[ee]&&(k[ee]=R[ee])}),!k.oriBlob&&R.oriBlob&&(k.oriBlob=K(R.oriBlob))),P.DataControl.updateSync(E,{oriData:J.imageData,metadata:j,customData:k},!0),q.abrupt("return",!0);case 10:case"end":return q.stop()}},ne)}))).apply(this,arguments)}function Nt(ne){return{width:ne.imageWidth,height:ne.imageHeight,bitDepth:ne.imageBitDepth,resolutionX:ne.imageXResolution,resolutionY:ne.imageYResolution,rgba:ne.rgba,bgra:ne.bgra}}function Pt(ne){return{imageWidth:ne.width,imageHeight:ne.height,imageBitDepth:ne.bitDepth,imageXResolution:ne.resolutionX,imageYResolution:ne.resolutionY}}function et(ne){var J=ne?.querySelectorAll(".dynamsoft-camera-preFilter");if(J)for(var P=0;P<J.length;P++){var E=J[P];E&&"IMG"==E.tagName&&E.src&&(ke.revokeObjectURL(E.src),E.onload=null,E.parentNode.remove())}}function lt(ne){var J,P=ne.getCurrentPage();!P||(P=P.getHtmlElement())&&((J=P?.querySelector("."+de.filterDropDown))&&(et(J),ne&&ne.removeGlobalClickEvent(J),J.remove()),null!=P&&null!=(ne=P.querySelector("."+de.filterDropDown))&&ne.remove())}function Ut(ne){var J,P,E;return(f.navInfo.biPhone||f.navInfo.biPad)&&(J=5,P=85,E=3840),f.ImageProcWrapper.getMax4kImage(ne,J,P,E)}function xt(x){var J=void 0===(J=x.defaultViewerName)?fe:J,E=x.cropViewer,P=!0;return x=x.visibility,(Ye(E=(void 0===E?{}:E).visibility)&&"hidden"==E.toLowerCase()||Ye(x)&&"hidden"==x.toLowerCase())&&(P=!1),J=J.toLowerCase(),!(!P||J!=fe.toLowerCase())}function wn(){return(wn=u(s().mark(function ne(J,P,E,x,R){var k;return s().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(xt(E))return k={fileName:x,initFileName:x,curIndex:-1,saveData:!1,fromInternal:R},j.next=5,J.showCropPage(k,P);j.next=7;break;case 5:j.next=10;break;case 7:return k={fileName:x,initFileName:x,curIndex:-1,saveData:!1,fromInternal:R,visibility:E.visibility},j.next=10,J.showDocumentEditPage(k,P);case 10:case"end":return j.stop()}},ne)}))).apply(this,arguments)}function Ln(ne){return!(null!=ne&&(Ye(ne)&&ne.toLowerCase(),"hidden"===ne||!1===ne))}function Cn(ne,J){return!Ye(ne)&&"original"==J||ne==J}function In(ne,J){return Le.apply(this,arguments)}function Le(){return(Le=u(s().mark(function ne(J,P){var E,x;return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(x=(E=P.dcs).getCurrentPage()){R.next=4;break}return R.abrupt("return");case 4:return E.hideLoading("handle multiple image"),E.emit("blurPage"),E.stop(),R.next=9,x.clickMultipleImage();case 9:x.setPreviewImageFlag();case 10:case"end":return R.stop()}},ne)}))).apply(this,arguments)}function g(ne){ne&&ne.oriBlob&&(delete ne.oriBlob.imageData,delete ne.oriBlob)}function w(ne){ne&&ne.resBlob&&(delete ne.resBlob.imageData,delete ne.resBlob)}function N(ne){ne&&ne.preview&&(Ke(ne.preview)&&delete ne.preview.imageData,delete ne.preview)}function K(ne){var J;return ne&&(Ke(ne)&&ne.imageData?(J={},f.Lib.each(["imageHeight","imageWidth","imageBitDepth","imageXResolution","imageYResolution","rgba","bgra","imageData"],function(P){void 0!==ne[P]&&(J[P]=ne[P])})):J=ne),J}function Te(ne){ne&&(delete ne.code,delete ne.message)}function Fe(ne){return Array.isArray?Array.isArray(ne):"[object Array]"===Object.prototype.toString.call(ne)}function Ke(ne){return"[object Object]"===Object.prototype.toString.call(ne)}function Je(ne){return"function"==typeof ne}function Ye(ne){return"string"==typeof ne}function qt(ne){return"number"==typeof ne&&!Number.isNaN(ne)}function xe(ne,J){for(var P in ne)void 0===J[P]?J[P]=ne[P]:Ke(ne[P])&&Ke(J[P])?xe(ne[P],J[P]):void 0!==ne[P]&&(J[P]=ne[P]);return J}function ut(ne){if(null==ne||"object"!=typeof ne)return ne;var J,P,E;if(ne instanceof Date)return(J=new Date).setTime(ne.getTime()),J;if(ne instanceof Array){for(J=[],E=ne.length,P=0;P<E;P++)J[P]=ut(ne[P]);return J}if(ne instanceof Object){for(P in J={},ne)ne.hasOwnProperty(P)&&(J[P]=ut(ne[P]));return J}return qt(ne)||"[object Boolean]"===Object.prototype.toString.call(ne)?ne:Ye(ne)?new String(ne):{}}function ue(ne,J){ne&&ne.emit(De,J)}function se(ne,J){return J.split(".").reduce(function(P,E){return P[E]||{}},ne)}function le(ne){var J,P,E;return(f.navInfo.biPhone||f.navInfo.biPad)&&(J=5,P=85,E=3840),f.ImageProcWrapper.getMax4kImage(ne,J,P,E)}var Ue="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",ke={windowURL:window.URL||window.webkitURL,createURL:function(ne){return Ye(ne)?ne:function(J){if(Ye(J)||void 0===J)return{type:"string",data:J};if(J instanceof Blob)return{type:"object",data:ke.createObjectURL(J)};if(J.imageData&&J.imageData instanceof Blob)return{type:"object",data:ke.createObjectURL(J.imageData)};if(J.imageData){var P=Object.prototype.toString.call(J.imageData);if(/\[object \w*Array\w*\]/.test(P))return{type:"object",data:ke.createObjectURL(new Blob([J.imageData]))}}else if(P=Object.prototype.toString.call(J),/\[object \w*Array\w*\]/.test(P))return{type:"object",data:ke.createObjectURL(new Blob([J]))};return/data:image\/\w+;base64/.test(J)?{type:"string",data:J}:{type:"object",data:J}}(ne).data},createObjectURL:function(ne){return ne?(ne=ke.windowURL.createObjectURL(ne),Ie.log("createObjectURL:"+ne),ne):""},revokeObjectURL:function(ne){Ie.log("revokeObjectURL:"+ne),Ye(ne)&&0==ne.indexOf("blob:http")&&ke.windowURL.revokeObjectURL(ne)}};function He(ne){var J=Math.random().toString(35).substring(2);return J.length<11&&(J+=Math.random().toString(35).substring(2)),ne=Math.max(Math.min(Math.round(ne),11),8),J.substring(0,ne)}function nt(ne,J){if(ne==J)return 1;var P=!1;if(Fe(ne)&&Fe(J)){var E=ne.length;if(E==J.length){P=!0;for(var x=0;x<E;x++)if(!zt(ne[x],J[x])){P=!1;break}}}return P}function zt(ne,J,P){return void 0===P&&(P=1),Math.abs(ne-J)<P}function Qt(ne,J,P){var E,x,R,k,j,B,q;return!(!Fe(ne)||8!=ne.length)&&(E=ne[0],x=ne[1],R=ne[2],k=ne[3],j=ne[4],B=ne[5],q=ne[6],ne=ne[7],zt(E,0)&&zt(x,0)&&zt(R,J)&&zt(k,0)&&zt(j,J)&&zt(B,P)&&zt(q,0)&&zt(ne,P))}gn=function(){function ne(P){this._evtIds=[],this._oPub=null,this._bDisposePub=!1,P?this._oPub=P:(this._oPub=new rn,this._bDisposePub=!0)}var J=ne.prototype;return J.getPublishSubscribe=function(){return this._oPub},J._on=function(P,E){E=this._oPub.on(P,E),this.push(P,E)},J._emit=function(P){for(var E,x=arguments.length,R=new Array(1<x?x-1:0),k=1;k<x;k++)R[k-1]=arguments[k];null!=(E=this._oPub)&&E.emit.apply(E,[P].concat(R))},J._off=function(P,E){var x;null!=(x=this._oPub)&&x.off(P,E)},J.push=function(P,E){this._evtIds.push({name:P,id:E})},J.dispose=function(){if(this._oPub){for(var P=this._evtIds.length,E=0;E<P;E++){var x=this._evtIds[E];this._oPub.offById(x.name,x.id)}this._bDisposePub&&this._oPub&&this._oPub.dispose()}this._oPub=null},ne}();var rn=function(){function ne(){this._events={}}var J=ne.prototype;return J.on=function(P,E,x){this._events[P]||(this._events[P]=[]);var R=He(10);return this._events[P].push({fn:E,once:x,evtId:R}),R},J.once=function(P,E){this.on(P,E,!0)},J.emit=function(P){var E=this._events[P];if(!E||0===E.length)return!1;for(var x=E.length,R=arguments.length,k=new Array(1<R?R-1:0),j=1;j<R;j++)k[j-1]=arguments[j];for(var B=0;B<x;B++){var q,ee=E[B];ee&&((q=ee.fn).call.apply(q,[null].concat(k)),ee.once&&(E.splice(B,1),B--))}},J.emitEx=function(P){var E=this._events[P];if(!E||0===E.length)return Promise.resolve(!0);for(var x=E.length,R=Promise.resolve(!0),k=arguments.length,j=new Array(1<k?k-1:0),B=1;B<k;B++)j[B-1]=arguments[B];if(1===E.length)return(P=null==(P=E[0])?void 0:(P=P.fn).call.apply(P,[null].concat(j)))instanceof Promise?P:R;for(var q=0;q<x;q++){var ee=E[q];ee&&function(){var te,ve=(te=ee.fn).call.apply(te,[null].concat(j));ve instanceof Promise&&(R=R.then(function(){return ve})),ee.once&&(E.splice(q,1),q--)}()}return R},J.off=function(P,E){var x=this._events[P];if(!x)return!1;if(E)for(var R=x.length-1;0<=R;R--){var k=x[R];k&&k.fn===E&&x.splice(R,1),k=null}else x&&(x.length=0)},J.offById=function(P,E){var x=this._events[P];if(!x)return!1;if(E)for(var R=x.length-1;0<=R;R--){var k=x[R];if(k&&k.evtId===E){x.splice(R,1);break}k=null}else x&&(x.length=0)},J.dispose=function(){for(var P=Object.keys(this._events),E=0,x=P.length;E<x;E++){var R;(R=this._events[R=P[E]])&&R.splice(0),R=null}this._events={}},ne}(),Gt=function(){function ne(P,E){this.name="",this.icon="",this.text="",this.color="",this.className="",this.onclick=null,this.element=null,this.options=P,this.context=E,this.element=this._initEl()}var J=ne.prototype;return J._initEl=function(){var P,E,x,R,k,j,B,q,ee,te,yn=(Wn=this.options).icon,ve=Wn.text,Ge=Wn.colorStyle,Pn=Wn.className,ht=Wn.bHeader,pt=Wn.onclick,zn=Wn.name,vt=Wn.onmount,Tt=Wn.onunmount,dn=Wn.dropdown,Wt=void 0===(Wt=Wn.order)?0:Wt,Tn=Wn.onSelected,xn=void 0!==(xn=Wn.isSelected)&&xn,Wn=void 0===(Wn=Wn.visibility)?"visible":Wn,_n=this.context,Nn=document.createElement("div");if(this.name=zn,"capture"==this.name&&(Nn.style.background=Ge.background),Pn){if("hidden"===Wn)return Nn.className=Pn+" "+de.block,Nn;Nn.className=Pn}return Nn.style.order=String(Wt),zn=Nn,Pn=Ge.color,(Wn=yn)&&((Wt=document.createElement("i")).className=Wn,Wt.style.color=Pn,zn.appendChild(Wt)),yn=Nn,(Wn=ve)&&((Pn=document.createElement("p")).innerText=Wn,yn.appendChild(Pn)),P=Nn,x=_n,R=xn,(E=vt)&&setTimeout(function(){E(P,x,R)},0),Tt&&(this._unmount=Tt.bind(null,Nn,_n)),k=pt,j=_n,Nn.addEventListener("click",function(ci){Ye(k)?j.dcs.emit(k,ci,j):Je(k)&&k(ci,j),ci.preventDefault()}),q=Tn,ee=_n,Wt=ht,(te=B=Nn).bSelected=zn=xn,te.bHeader=Wt,q&&(zn&&B.classList.add(Wt?de.headerSelected:de.footerSelected),B.addEventListener("click",function(ci){te.bSelected=!te.bSelected,B.classList[te.bSelected?"add":"remove"](te.bHeader?de.headerSelected:de.footerSelected),q?.(te.bSelected,ee),ci.preventDefault()})),function(){ce.apply(this,arguments)}(Nn,_n,dn,Ge),Nn},J.destroy=function(){var P;null!=(P=this._unmount)&&P.call(this),this.element=null},J.update=function(){var P,E;this.element&&(E=this._initEl(),null!=(P=this.element.parentElement)&&P.insertBefore(E,this.element),this.element.remove(),this.element=E)},J.setSelected=function(P){var E=this.options.onSelected;E&&E(P,this.context)},ne}();function ce(){return(ce=u(s().mark(function ne(J,P,E,x){var R,k,j,B,q,ee,te,ve;return s().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:if(Ge.prev=0,ve=function(ht,pt,vt){pt.dataset.showDropdown="false",ht.onclick=function(Tt){"true"!=pt.dataset.showDropdown&&(pt.classList.remove(de.displayNone),ht.classList.add(de.headerSelected),pt.dataset.showDropdown="true",Tt.stopPropagation(),vt.dcs.addGlobalClickEvent(pt,function(){return!(!pt||"true"!=pt.dataset.showDropdown||(pt.classList.add(de.displayNone),pt.parentElement.classList.remove(de.headerSelected),pt.dataset.showDropdown="false",vt.dcs.emit("hideResolutionList"),0))}))}},te=function(ht,pt,vt,Tt){void 0===pt&&(pt=!1);for(var dn=[],Wt=ht.children,Tn=0;Tn<Wt.length;Tn++)Wt[Tn].classList.contains(de.ddlSelectedItem)&&dn.push(Wt[Tn]);var xn=!0;function _n(Nn,zn){Nn.classList[zn?"add":"remove"](de.ddlSelectedItem)}ht.onclick=function(Nn){var zn,Pn=!1;if(Nn instanceof MouseEvent){if(Nn.stopPropagation(),!xn)return;zn=Nn.target,Pn=!0}else zn=Nn;if("LI"===(null==(Nn=zn)?void 0:Nn.tagName)){if(xn=!1,-1<(Nn=dn.indexOf(zn))){if(!pt)return void(xn=!0);dn.splice(Nn,1),_n(zn,!0)}else if(pt)dn.push(zn),_n(zn,!0);else{for(;dn.length;)_n(dn.pop(),!1);_n(zn,!0),dn.push(zn),ht&&(ht.parentElement.classList.remove(de.headerSelected),ht.classList.add(de.displayNone),ht.dataset.showDropdown="false",Tt.dcs.emit("hideResolutionList",ht,Tt))}Pn&&(Nn=vt?.(zn,zn.customData,Tt),Promise.resolve(Nn).then(function(){xn=!0}))}}},ee=function(ht){var pt=document.createDocumentFragment();return ht.forEach(function(vt,Tt){var dn=document.createElement("li"),Wt=vt.value,Tn=vt.innerHtml;dn.customData=Wt,vt.isSelected&&dn.classList.add(de.ddlSelectedItem),Tn?dn.innerHTML=Tn:((Wt=document.createElement("i")).style.pointerEvents="none",Wt.className=vt.icon||"",(Tn=document.createElement("p")).style.pointerEvents="none",Tn.innerText=vt.text||"",dn.appendChild(Wt),dn.appendChild(Tn)),pt.appendChild(dn)}),pt},E){Ge.next=6;break}return Ge.abrupt("return");case 6:return j=E.list,R=E.multiple,k=E.onclick,Ge.next=9,j(J,P);case 9:if(Ge.t0=Ge.sent,Ge.t0){Ge.next=12;break}Ge.t0=[];case 12:B=ee(j=Ge.t0),(q=J?.querySelector("dropdown"))?(q.removeEventListener("click",null),q.childNodes&&q.childNodes.forEach(function(ht){ht.remove()}),q.appendChild(B)):((q=document.createElement("ul")).className="resolutionList dropdown "+de.displayNone,q.style.background=x.background,q.style.color=x.color,q.appendChild(B),J.appendChild(q)),ve(J,q,P),te(q,R,k,P),Ge.next=29;break;case 20:return Ge.prev=20,Ge.t1=Ge.catch(0),Ie.log("Error Begin---"),Ie.log(Ge.t1),Ie.log(J),Ie.log(P),Ie.log(E),Ie.log("Error End---"),Ge.abrupt("return",null);case 29:case"end":return Ge.stop()}},ne,null,[[0,20]])}))).apply(this,arguments)}var Me="dvsDb",Xe="dvsDoc",Be=function(){function ne(P,E){this._db=P.DataControl._db,E?this.syncDb={}:((P=this._db.DBMng._d)[Me]||(P[Me]={}),P[Me][Xe]||(P[Me][Xe]={}),this.syncDb=P[Me][Xe])}var J=ne.prototype;return J.setCustomDataSync=function(P,E){if(this.syncDb)return this.syncDb[P].customData=E,!0},J.getCustomDataSync=function(P){return this.syncDb&&this.syncDb[P]&&this.syncDb[P].customData?this.syncDb[P].customData:null},J.getOriDataSync=function(P){return this.syncDb&&this.syncDb[P]?this.syncDb[P].oriData:null},J.getDataRootSync=function(P){return this.syncDb&&this.syncDb[P]?this.syncDb[P]:null},J.getMetaDataSync=function(P){if(this._db)return this._db.getMetadata(P)},J.removeMidSync=function(P){var E,x=this._db.middle._d;x&&(x=x[P])&&((E=x.customData)&&(g(E),w(E),N(E),delete x.customData),Ye(x.oriData)&&ke.revokeObjectURL(x.oriData),Ye(x.minData)&&ke.revokeObjectURL(x.minData),delete x.oriData,delete x.minData,(E=x.img)&&(E.src=Ue,E.onload=null,E.onerror=null,x.img=null)),this._db.removeMid(P),this._db.removeMetadata(P)},J.removeSync=function(P){var E;this.syncDb&&this.syncDb[P]&&((E=this.syncDb[P])&&(delete E.oriData,g(E.customData),w(E.customData),N(E.customData),E.metadata&&delete E.metadata,E.tags&&(E.tags.slice(0),delete E.tags)),delete this.syncDb[P]),this.removeMidSync(P)},J.dispose=function(){this._db=null,this.syncDb=null},ne}(),Ct=function(){function ne(P){this._fileTree=P._tree}var J=ne.prototype;return J.createFile=function(P){if(this._fileTree)return this._fileTree.createFile(P)},J.openFile=function(P){return this._fileTree&&(P=this._fileTree.findChild(this._fileTree.dfNode,P))&&"file"===P.type?P.chs.slice():[]},J.findFile=function(P){return this._fileTree?this._fileTree.dfNode&&(P=this._fileTree.findChild(this._fileTree.dfNode,P))&&"file"===P.type?P:null:[]},J.replaceFileContent=function(P,E){(P=this.findFile(P))&&(P.chs.splice(0),P.chs=E)},J.getFileCount=function(P){return(P=this.findFile(P))?P.chs.length:0},J.getIndexByUidInFile=function(P,E){var x=this.findFile(P);if(x)for(var R=x.chs.length,k=0;k<R;k++)if(x.chs[k]==E)return k;return-1},J.removeByIndexInFile=function(P,E){return(P=this.findFile(P))&&0<=E&&E<P.chs.length?P.chs.splice(E,1):null},J.removeFile=function(P,E){if(P&&E)for(var R=this.openFile(E),k=0;k<R.length;k++)P.removeSync(R[k])},J.dispose=function(){this._fileTree=null},ne}(),un=function(){function ne(P,E,x){this.element=null,this.headerButtons=[],this.footerButtons=[],this.className="",this.pageName="",this.container=null,this.isDestroyed=!1,this._fileWrapper=null,this._dvsWrapper=null,this.template="",this._dcs=null,this._dvs=null,this._pagepubsub=new rn,this._dvsWrapper=new Be(E),this._fileWrapper=new Ct(E.File),this.initPageOption(P,x),this._dcs=x,this._dvs=E}var P,J=ne.prototype;return J.initPageOption=function(P,E){this.options=P},J.getDcs=function(){return this._dcs},J.getDvs=function(){return this._dvs},J.getHeaderButtons=function(){return[]},J.getFooterButtons=function(){return[]},J.getOptionsEl=function(){return null},J.createEl=function(){this.headerButtons=this.getHeaderButtons(),this.footerButtons=this.getFooterButtons(),this.container=this.getOptionsEl(),this.element||(P=this.template,(E=document.createElement("div")).innerHTML=P,E.className=this.className,this.element=E);var P,E=null==(P=this.element)?void 0:P.querySelector("header");this.insertButtons(E,this.headerButtons),E=null==(P=this.element)?void 0:P.querySelector("footer"),this.insertButtons(E,this.footerButtons)},J.insertButtons=function(P,E){var x;P.appendChild((P=E,x=document.createDocumentFragment(),P.forEach(function(R){x.appendChild(R.element)}),x))},J.destroy=function(){this.isDestroyed=!0,this._dvsWrapper&&this._dvsWrapper.dispose(),this._dvsWrapper=null,this._fileWrapper&&this._fileWrapper.dispose(),this._fileWrapper=null,at(this.headerButtons),at(this.footerButtons),this.headerButtons=[],this.footerButtons=[],this.element&&(this.element.parentElement&&this.element.parentElement.childNodes&&1==this.element.parentElement.childNodes.length?this.element.parentElement.remove():(this.element.remove(),this.element=null)),"documentScanPage"==this.pageName&&(lt(this._dcs),this._dcs.emit("video-closed")),lt(this._dcs),this._dcs=null},J.hide=function(){var P;null!=(P=this.element)&&P.classList.add(de.displayNone)},J.show=(P=u(s().mark(function E(){var x;return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:null!=(x=this.element)&&x.classList.remove(de.displayNone);case 1:case"end":return R.stop()}},E,this)})),function(){return P.apply(this,arguments)}),J.updateButton=function(P,E){for(var x=[].concat(this.headerButtons,this.footerButtons),R=0;R<x.length;R++){var k=x[R];if(k.name===P)return xe(E,k.options),void k.update()}},J.on=function(P,E){this._pagepubsub.on(P,E)},J.once=function(P,E){this._pagepubsub.once(P,E)},J.off=function(P,E){this._pagepubsub.off(P,E)},J.emit=function(P){for(var E,x=arguments.length,R=new Array(1<x?x-1:0),k=1;k<x;k++)R[k-1]=arguments[k];(E=this._pagepubsub).emit.apply(E,[P].concat(R))},J.emitEx=function(P){for(var E,x=arguments.length,R=new Array(1<x?x-1:0),k=1;k<x;k++)R[k-1]=arguments[k];return(E=this._pagepubsub).emitEx.apply(E,[P].concat(R))},J.setDefaultBackgroundColors=function(P,E,x){P.background||(P.background="#000"),E.background||(E.background="#323232"),x.background||(x.background="#000")},J.createIconItems=function(P,E,x,R){var k,j=[],B={dcs:this._dcs,page:this};for(k in P)P[k]&&(P[k].colorStyle="capture"==k&&R?R:E,P[k].bHeader=x,j.push(new Gt(v({},P[k],{name:k}),B)));return j},J.getHtmlElement=function(){return this.element},ne}();function at(ne){ne.forEach(function(J,P){J.destroy(),ne[P]=null})}function Dt(){return{icon:de.font+" "+de.iconLoad,onclick:(ne=u(s().mark(function J(P,E){var x,R,k,j;return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!(j=(x=E.dcs).getLoadCallback())){B.next=18;break}if(B.prev=3,R=x.getCurrentPage())return x.emit("blurPage"),k=xt(void 0===(k=R.options.documentEditorSettings)?{}:k),B.next=11,j(E);B.next=13;break;case 11:(j=B.sent)&&!R.isDestroyed&&Mt(j,x,k);case 13:return B.prev=13,x.emit("focusPage"),B.finish(13);case 16:B.next=19;break;case 18:!function(q){var ee=document.createElement("input");ee.style.display="none",document.body.appendChild(ee),ee.addEventListener("click",function(te){te.stopPropagation()}),ee.type="file",ee.multiple=!0,ee.accept="image/png,image/jpeg,image/jpg",ee.click(),ee.onchange=function(){var te;""!=ee.value&&((te=q.dcs).showLoading("load local image"),te.emit("blurPage"),kt({el:ee,context:q,callback:Rt})),document.body.removeChild(ee)}}(E);case 19:case"end":return B.stop()}},J,null,[[3,,13,16]])})),function(J,P){return ne.apply(this,arguments)}),className:de.BUTTON_PREFIX+"loadBtn",text:"Load"};var ne}function kt(ne){ne.context.dcs.captureLoop.getIsLooping()?setTimeout(kt,200,ne):ne.callback.apply(null,[ne.el,ne.context])}function Rt(ne,J){return qe.apply(this,arguments)}function qe(){return(qe=u(s().mark(function ne(J,P){var E,x,R,k,j,B,q;return s().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:E=P.dcs,x=J.files,ee.prev=2,R=xt(void 0===(R=(R=E.getCurrentPage()).options.documentEditorSettings)?{}:R),j=!(k=[]),B=0;case 9:if(!(B<x.length)){ee.next=22;break}if("application/pdf"==(q=x[B]).type||"image/tiff"==q.type)return 0==j&&E.emit("video-error",be_IMAGE_FORMAT_INVALID),j=!0,ee.abrupt("continue",19);ee.next=15;break;case 15:return ee.next=17,le(x[B]);case 17:k.push(q=ee.sent);case 19:B++,ee.next=9;break;case 22:0<k.length&&!P.page.isDestroyed&&Mt(k,E,R);case 23:return ee.prev=23,E.hideLoading("load local image"),J.value=null,J.files=null,J.onchange=null,J=null,E.emit("focusPage"),ee.finish(23);case 31:case"end":return ee.stop()}},ne,null,[[2,,23,31]])}))).apply(this,arguments)}function Mt(){Ht.apply(this,arguments)}function Ht(){return(Ht=u(s().mark(function ne(J,P,E){return s().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:P.showLoading("handleBlobList"),function(){return Ft.apply(this,arguments)}(P,J,H,E).finally(function(){P.hideLoading("handleBlobList")});case 2:case"end":return x.stop()}},ne)}))).apply(this,arguments)}function Vt(){return{icon:de.font+" "+de.iconCapture,className:de.BUTTON_PREFIX+"captureBtn",onclick:function(ne,J){J.dcs.captureLoop.startManualCapture(J)}}}function jt(){return{icon:de.font+" "+de.iconClose,className:de.BUTTON_PREFIX+"closeBtn",onclick:(ne=u(s().mark(function J(P,E){var x,R,k,j;return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(x=E.dcs,k=!1,0<(R=E.page).getImageCount()&&(k=!0),R.pageName==X&&x.config.scannerViewer.funcConfirmExit)return B.next=6,x.config.scannerViewer.funcConfirmExit(k);B.next=13;break;case 6:if(0==(j=B.sent))return B.abrupt("return");B.next=11;break;case 11:if(1!=j&&2!=j)return B.abrupt("return");B.next=13;break;case 13:if(void 0===j&&(j=1),R._isClosed)return B.next=17,x.navigateBack();B.next=18;break;case 17:return B.abrupt("return");case 18:return R._isClosed=!0,x.emit("blurPage"),x.stop(),B.next=23,x.navigateBack();case 23:R.pageName!=X||1!=j&&2!=j||x.exit(R.getDvs());case 24:case"end":return B.stop()}},J)})),function(J,P){return ne.apply(this,arguments)})};var ne}function ln(){return{icon:de.font+" "+de.iconSwitch,onclick:function(ne,E){var P=E.dcs;P.emit("blurPage"),P.showLoading("switch camera button click"),P.toggleCamera((E=P.config.scannerViewer.resolution.defaultValue).width,E.height).finally(function(){P.hideLoading("switch camera button click"),P.emit("focusPage")})},className:de.BUTTON_PREFIX+"toggleCamera",text:"Switch Camera"}}function Un(){return{icon:de.font+" "+de.iconAutoCapture,className:de.BUTTON_PREFIX+"autoCapture",onmount:function(ne,J){},onSelected:function(ne,J){var P=J.dcs,E=P.config;ne?(E.scannerViewer.autoDetect.enableAutoDetect=!0,E.scannerViewer.autoScan.enableAutoScan=!0):E.scannerViewer.autoScan.enableAutoScan=!1,P.captureLoop.loadLoopTypeFromConfig(),P.captureLoop.startLoop(J)}}}function On(){return{icon:de.font+" "+de.iconResolution,className:de.BUTTON_PREFIX+"resBtn",dropdown:{multiple:!1,list:function(ne,J){var P=J.dcs;return new Promise(function(E,x){P.once("onPlayed",u(s().mark(function R(){var k,j,q,ee;return s().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(j=se(P,"config.scannerViewer.resolution"),k=j.valueList,j=j.defaultValue,P.showLoading("resolution list"),te.prev=3,k&&k.length){te.next=12;break}return te.next=7,P.getResolution();case 7:j=j||{width:1280,height:720},k=te.sent.map(function(ve){return{label:ve.width+"\xd7"+ve.height,value:ve}}),te.next=13;break;case 12:j=j||k[k.length-1].value;case 13:if((q=br(j,k))<0)return te.next=17,P.getCurrentResolution();te.next=35;break;case 17:if(!(ee=te.sent)||ee.width==j.width&&ee.height==j.height){te.next=34;break}return te.prev=19,te.next=22,P.setResolution(j);case 22:return te.next=24,P.getCurrentResolution();case 24:(q=br(ee=te.sent,k))<0&&(k.push({value:ee,label:ee.width+"\xd7"+ee.height}),q=k.length-1),te.next=32;break;case 29:te.prev=29,te.t0=te.catch(19);case 32:te.next=35;break;case 34:q<0&&(k.push({value:ee,label:ee.width+"\xd7"+ee.height}),q=k.length-1);case 35:E(k.map(function(ve,Ge){return{value:ve.value,text:ve.label,icon:"checkBox",isSelected:Ge===q}}));case 36:return te.prev=36,P.hideLoading("resolution list"),te.finish(36);case 39:case"end":return te.stop()}},R,null,[[3,,36,39],[19,29]])}))),P.on("resetResolution",function(){var B,k=P.config.scannerViewer.resolution.valueList,j=br(B=P.config.scannerViewer.resolution.defaultValue,k);if(j<0&&(k.push({value:B,label:B.width+"\xd7"+B.height}),j=k.length-1),(B=document.getElementsByClassName("resolutionList"))&&0<B.length){var q=B[0];if(q.childNodes)for(var ee=0;ee<q.childNodes.length;ee++)ee==j&&q.onclick(q.childNodes[ee])}}),P.on("resetRealResolution",function(){var R=P.config.scannerViewer.resolution.defaultValue;P.showLoading("resolution button click"),P.setResolution(R).then(function(k){P.hideLoading("resolution button click")})})})},onclick:function(ne,J,P){var E=P.dcs;E.showLoading("resolution button click"),E.setResolution(J).then(function(x){J.width!=x.width&&J.height!=x.height&&E.emit("video-error",be_RESOLUTION_INVALID),E.config.scannerViewer.resolution.defaultValue=J,E.hideLoading("resolution button click"),E.getCameraView().resetVideoInfo()})}},onclick:function(ne,J){var P=J.dcs;P.emit("blurPage"),P.once("hideResolutionList",function(){P.emit("focusPage")})}}}function br(x,J){var P=x.width,E=x.height;return(x=J.findIndex(function(j){var k=(j=j.value||{}).width;return j=j.height,k===P&&j===E}))<0?J.findIndex(function(j){var k=(j=j.value||{}).width;return j=j.height,k===E&&j===P}):x}function En(){return{icon:de.font+" "+de.iconAutoDetect,onmount:function(ne,J){},onSelected:function(ne,J){var P=J.dcs,E=P.config;ne?E.scannerViewer.autoDetect.enableAutoDetect=!0:(E.scannerViewer.autoDetect.enableAutoDetect=!1,E.scannerViewer.autoScan.enableAutoScan=!1),P.captureLoop.loadLoopTypeFromConfig(),P.captureLoop.startLoop(J)},className:de.BUTTON_PREFIX+"detectCamera"}}var vr="dynamsoft_camera_scan_page_style",ei=y("initElement"),fi=y("addStyle"),pr=function(ne){function J(E,x,R){return x=ne.call(this,E,x,R)||this,Object.defineProperty(l(x),fi,{value:ao}),Object.defineProperty(l(x),ei,{value:Fr}),x.fileName=null,x._nextViewerPage=null,x.pageName=X,_(l(x),ei)[ei](),x.attachDefaultEvent(),x.initFileName(E),x}c(J,ne);var E,P=J.prototype;return P.initFileName=function(E){this.fileName=H,this._fileWrapper.findFile(this.fileName)||this._fileWrapper.createFile(this.fileName)},P.getFileName=function(){return this.fileName},P.getImageCount=function(){return this._fileWrapper.getFileCount(this.fileName)},P.attachDefaultEvent=function(){var E=this;this.on("onSaveCapture",function(x,R,k,j,B){return It(R.dcs,k,j,B,E.fileName)})},P.setDefaultColors=function(E,x,R,k){this.setDefaultBackgroundColors(E,x,R),E.color||(E.color="#fff"),E.selectedColor||(E.selectedColor="#fe8e14"),x.maskColor||(x.maskColor="#323232"),R.color||(R.color="#fff"),R.selectedColor||(R.selectedColor="#fe8e14"),k.color||(k.color="#fff"),k.background||(k.background="#fe8e14")},P.getOptionsEl=function(){var E;return Ye(E=(void 0===(E=this.options.scannerViewer)?{}:E).element)?document.getElementById(E):E},P.getHeaderButtons=function(){var R,E=(R=this.options).headerButtons,x=(R=void 0===(R=R.scannerViewer)?{}:R).scanButtonStyle;return ne.prototype.createIconItems.call(this,void 0===E?{}:E,void 0===(R=R.headerStyle)?{}:R,!0,void 0===x?{}:x)},P.getFooterButtons=function(){var R,E=(R=this.options).footerButtons,x=(R=void 0===(R=R.scannerViewer)?{}:R).scanButtonStyle;return ne.prototype.createIconItems.call(this,void 0===E?{}:E,void 0===(R=R.footerStyle)?{}:R,!1,void 0===x?{}:x)},P.initPageOption=function(E,B){E.scannerViewer||(E.scannerViewer=ut(B.config.scannerViewer),B.config&&B.config.scannerViewer&&B.config.scannerViewer.element&&(E.scannerViewer.element=B.config.scannerViewer.element));var ee=(B=E.scannerViewer).resolution,R=B.autoScan,k=B.autoDetect,j=B.switchCamera,q=(B=B.loadLocalFile,{icon:de.font+" "+de.iconContinuous,className:de.BUTTON_PREFIX+"continuousMode"});ee={headerButtons:{changeResBtn:Ot(ee,On()),autoDetect:v({isSelected:R?.enableAutoScan||k?.enableAutoDetect},Ot(k,En())),closeBtn:jt()},footerButtons:{load:Ot(B,Dt()),toggleCamera:Ot(j,ln()),capture:Vt(),autoCapture:v({isSelected:R?.enableAutoScan},Ot(R,Un())),multipleBtn:{onclick:In,onmount:function(te){te.innerHTML='<img class="'+de.previewImg+'">\n<div class="dynamsoft-camera-imgCount '+de.displayNone+'"></div>\n<div class="dynamsoft-camera-nextArr '+de.font+" "+de.iconBack+'"></div>',Ie.log(te)},className:de.buttonMultipleImg+" "+de.displayNone,text:"Continuous"},continuous:q},scannerViewer:{resolution:{defaultValue:{width:1280,height:720}},fullScreen:!1}},this.options=xe(E,ee)},P.show=(E=u(s().mark(function x(){return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:ne.prototype.show.call(this);case 1:case"end":return R.stop()}},x,this)})),function(){return E.apply(this,arguments)}),P.generatePreview=function(){var E=u(s().mark(function x(){var R,k,j,B,q,ee,te,ve,Ge,ht,pt;return s().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:if(R=this._fileWrapper.openFile(this.fileName),k=R.length,j=null==(j=this.element)?void 0:j.querySelector("."+de.buttonMultipleImg),B=j?.querySelector("."+de.previewImg),j&&B){vt.next=6;break}return vt.abrupt("return");case 6:if((q=j?.querySelector(".dynamsoft-camera-imgCount"))&&(0<k?(q.innerText=String(k),q.classList.remove(de.displayNone)):(q.innerText="",q.classList.add(de.displayNone))),k<=0)return j.classList.add(de.displayNone),B.src!=Ue&&""!=B.src&&(ke.revokeObjectURL(B.src),B.src=Ue),B.setAttribute("data",""),vt.abrupt("return");vt.next=13;break;case 13:if(!(ee=this._dvsWrapper.getCustomDataSync(q=R[k-1]))){vt.next=41;break}if(te=ee.detectArea,!0!==ee.preview){vt.next=23;break}if(nt(Ge=Ye(Ge=B.getAttribute("data"))&&""!=Ge?JSON.parse(Ge):Ge,te))return vt.abrupt("return");vt.next=22;break;case 22:delete ee.preview;case 23:if(B.src!=Ue&&""!=B.src&&(ke.revokeObjectURL(B.src),B.src=Ue),!ee.preview){vt.next=28;break}ve=ee.preview,vt.next=38;break;case 28:return vt.next=30,ae(ee.oriBlob);case 30:return Ge=vt.sent,te&&(ht={cornerPoints:te}),vt.next=34,tn(this._dcs,ht,Ge,!1,!1);case 34:ve=(pt=vt.sent).preview,g(pt);case 38:B.src=ke.createURL(ve),ve.imageData&&delete ve.imageData,te&&B.setAttribute("data",JSON.stringify(te));case 41:case"end":return vt.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P.playVideo=function(){var E=u(s().mark(function x(){var R,k,j,B,q,ee,te,ve;return s().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:if(k=(k=this.element).children[1],(R=this._dcs).showLoading("ShowDocumentScanPage"),Ge.prev=4,q=(B=void 0===(B=(B=this.options).scannerViewer)?{}:B).resolution,j=B.fullScreen,B=void 0===(B=B.deviceId)?"":B,ee=void 0===(ee=(q=void 0===q?{}:q).valueList)?[]:ee,(q=q.defaultValue)||ee&&0<ee.length&&(q=ee[ee.length-1].value),!R.isRunPlaying()){Ge.next=13;break}if(R.getCameraManage().getCurrentCamera())return Ge.next=13,R.closeSource();Ge.next=13;break;case 13:if(""!=B)return Ge.next=16,R.selectSource(B);Ge.next=16;break;case 16:return te=(ee={width:void 0,height:void 0}).width,ve=ee.height,q&&(te=q.width||void 0,ve=q.height||void 0),Ge.next=20,R.play(k,te,ve,j);case 20:Ge.next=27;break;case 22:return Ge.prev=22,Ge.t0=Ge.catch(4),Ge.next=26,R.navigateBack();case 26:R.emit(De,Ge.t0);case 27:return Ge.prev=27,R.hideLoading("ShowDocumentScanPage"),Ge.finish(27);case 30:case"end":return Ge.stop()}},x,this,[[4,22,27,30]])}));return function(){return E.apply(this,arguments)}}(),P.queryPreviewImageElement=function(){var E=null==(E=this.element)?void 0:E.querySelector("."+de.buttonMultipleImg);return E?E?.querySelector("."+de.previewImg):null},P.destroy=function(){var E=this.queryPreviewImageElement();E&&(E.src&&ke.revokeObjectURL(E.src),E.onload=null,E.onerror=null),this.pageName==X&&(null!=(E=this._fileWrapper)&&E.removeFile(this._dvsWrapper,this.fileName),null!=(E=this._dvs)&&null!=(E=E.File)&&E.removeFile(this.fileName),this._dcs.exit(this._dvs)),this._nextViewerPage&&(this._nextViewerPage.destroy(),this._nextViewerPage=null),ne.prototype.destroy.call(this)},P.setNextViewerPage=function(E){this._nextViewerPage=E},P.clickMultipleImage=function(){var E=u(s().mark(function x(){var R,k,j;return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(this._nextViewerPage)return R=this._nextViewerPage,k=this._fileWrapper.openFile(this.fileName),B.next=5,R.syncFiles(!1,k);B.next=13;break;case 5:return R.gotoViewPage((k=B.sent)-1),B.next=9,this._dcs.navigateToPage(R);case 9:this.hide(),this._nextViewerPage=null,B.next=16;break;case 13:return j=void 0===(j=this._dcs.config.documentEditorSettings)?{}:j,B.next=16,function(){return wn.apply(this,arguments)}(this._dcs,this._dvs,j,H,!0);case 16:case"end":return B.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P.removeDataByIndex=function(E,x){E=this._fileWrapper.removeByIndexInFile(E,x),this._dvsWrapper.removeSync(E)},P.insertDataByIndex=function(E,x,R){return(R=0<=R?this._dvs.DataControl.insertSync(E,[x],R):this._dvs.DataControl.appendSync(E,[x]))&&1==R.length?R[0]:null},P.enableMultiImages=function(){var E;this.element&&((E=null==(E=this.element)?void 0:E.querySelector("."+de.iconContinuous))&&E.classList.add(de.displayNone),(E=null==(E=this.element)?void 0:E.querySelector("."+de.buttonMultipleImg))&&E.classList.remove(de.displayNone))},P.moveMultipleImgPosition=function(){var E,x;this.element&&(E=null==(E=this.element)?void 0:E.querySelector("."+de.buttonMultipleImg))&&(E.style.top="0",E.style.right="0",E.style.position="relative",(x=null==(x=this.element)?void 0:x.querySelector("."+de.BUTTON_PREFIX+"continuousMode"))&&x.appendChild(E),(null==(x=this.element)?void 0:x.querySelector("."+de.iconContinuous)).classList.add(de.displayNone))},P.refreshPreviewWhenChanged=function(){var E=u(s().mark(function x(){return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,this.generatePreview();case 2:case"end":return R.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P.setPreviewImageFlag=function(){var E=this._fileWrapper.openFile(this.fileName);if(0<E.length)for(var x=E.length,R=x-1,k=0;k<x;k++){var j;(j=this._dvsWrapper.getCustomDataSync(j=E[k]))&&(k==R?j.preview=!0:void 0!==j.preview&&delete j.preview)}},J}(un);function Fr(){var J,P,E,ne=this.options,x=(this.setDefaultColors(J=void 0===(J=(x=void 0===(x=ne.scannerViewer)?{}:x).headerStyle)?{}:J,P=void 0===(P=x.bodyStyle)?{}:P,E=void 0===(E=x.footerStyle)?{}:E,void 0===(x=x.scanButtonStyle)?{}:x),'\n        <header style="background:'+J.background+'"></header>\n        <div style="background:'+P.background+'" class="videoContainer"></div>\n        <footer style="background:'+E.background+'" class="buttonList">\n            '+(ne.title?'<div class="modeTitle">'+ne.title+"</div>":"")+"\n        </footer>\n        ");this.template=x,this.className=de.documentScanPage,this.createEl(),_(this,fi)[fi]()}function ao(){var J,E,ne=(P=void 0===(P=this.options.scannerViewer)?{}:P).bodyStyle,P="\n."+de.documentScanPage+" ."+de.headerSelected+" i {\n  color: "+(E=void 0===(E=P.headerStyle)?{}:E).selectedColor+" !important;\n}\n."+de.documentScanPage+" ."+de.footerSelected+" i {\n  color: "+(J=void 0===(J=P.footerStyle)?{}:J).selectedColor+" !important;\n}\n@keyframes dynamsoft-camera-glow-keyframe-insert {\n  0% {border: 3px solid transparent;}\n  100% {border: 3px solid "+(void 0===(P=P.scanButtonStyle)?{}:P).background+";}\n}\n."+de.documentScanPage+" .resolutionList .checkBox {\n  border: 1px solid "+E.color+";\n}\n."+de.documentScanPage+" .resolutionList ."+de.ddlSelectedItem+" .checkBox {\n  background-color: "+E.selectedColor+";\n}\n."+de.buttonMultipleImg+" .dynamsoft-camera-imgCount {\n  color: "+J.color+";\n  background: "+J.selectedColor+";\n}\n."+de.buttonMultipleImg+" .dynamsoft-camera-nextArr {\n  color: "+J.selectedColor+";\n}\n.dcs-loading-content div>div {\n  background: "+(void 0===ne?{}:ne).maskColor+";\n}\n";if(E=document.getElementById(vr))E.innerHTML=P;else{(E=document.createElement("style")).type="text/css",E.id=vr;try{E.appendChild(document.createTextNode(P))}catch{}document.body.appendChild(E)}}function Gn(){return(Gn=u(s().mark(function ne(J,P,E,x){var R,k,j,B,q,ee,te,ve,Ge,ht,pt,vt,Tt,dn,Wt,Tn,xn,_n,Nn,zn,Pn,yn,Wn;return s().wrap(function(ci){for(;;)switch(ci.prev=ci.next){case 0:if(Wn=function(){var Er,Fi,uo,Ao,Po=document.createElement("span"),Ho=document.createElement("div");return Ho.className=""+de.filterCheckBox,Er=document.createElement("span"),(Fi=document.createElement("input")).type="checkBox",Fi.id="dynamsoft-camera-"+He(6),Ho.appendChild(Er),Er.appendChild(Fi),((Ao=(null==(Ao=x.config.documentEditorSettings)?void 0:Ao.filter).applyToAll)&&Ao.enableApplyToAll&&(Fi.checked=!0),(uo=document.createElement("label")).innerHTML=Ao.label,uo.setAttribute("for",Fi.id),Po.appendChild(Ho),Po.appendChild(uo),Ao=document.createElement("span")).className="dynamsoft-filter-close dynamsoft-camera-font dynamsoft-camera-icon-arrow",Ao.onclick=function(){lt(x),R=!1},Po.appendChild(Ao),Fi.checked?(Ho.classList.add(de.filterCheckedBox),Er.style.background=""):(Ho.classList.remove(de.filterCheckedBox),Er.style.background="none"),Fi.addEventListener("click",function(){var is=this.checked,os=(is?(Ho.classList.add(de.filterCheckedBox),Er.style.background="",k?x.filterApplyToAllValue=k.dataset.filterValue:(is=!1,x.filterApplyToAllValue=void 0)):(Ho.classList.remove(de.filterCheckedBox),Er.style.background="none",x.filterApplyToAllValue=void 0),null==(os=x.config.documentEditorSettings)?void 0:os.filter);os.applyToAll||(os.applyToAll={}),os.applyToAll.enableApplyToAll=is}),Po},yn=function(){var Er;null!=(Er=k)&&Er.classList.remove(de.filterSelectedItem),null!=q&&null!=(Er=q.querySelector("."+de.filterDropDown))&&null!=(Er=Er.querySelector("."+de.filterSelectedItem))&&Er.classList.remove(de.filterSelectedItem)},Pn=function(){return(Pn=u(s().mark(function Er(Fi){var uo,Po,Ho,Ao,is,os,nS,xu,Cm,Zd,Yc;return s().wrap(function(Pi){for(;;)switch(Pi.prev=Pi.next){case 0:if(Fi.stopPropagation(),(uo=Fi.target)===k||"LI"!==uo.tagName)return Pi.abrupt("return");Pi.next=4;break;case 4:if(x.showLoading("click filter"),Pi.prev=5,is=x.getCurrentPage(),0<=(Ao=ve.getCurrentIndex()))return Po=ve.getUidByIndex(Ao),os=is.GetFilterDirty(),Pi.next=13,is.getCurImageData(Po);Pi.next=15;break;case 13:Ho=Pi.sent,os||is.ClearFilterDirty();case 15:if(Po&&Ho)return nS=ve.getRotateAngle(Ao),yn(),(k=uo).classList.add(de.filterSelectedItem),xu=uo.dataset.filterValue,Pi.next=23,Ze(Ho);Pi.next=38;break;case 23:if(Cm=Pi.sent,"original"!==xu){Pi.next=28;break}Zd=Cm,Pi.next=31;break;case 28:return Pi.next=30,x.filterHandlerByIImageData(Ho,Cm,xu);case 30:Zd=Pi.sent;case 31:return Yc=(Yc=x.config.documentEditorSettings.filter).applyToAll,x.curFilterValue=xu,x.filterApplyToAllValue=Yc&&Yc.enableApplyToAll?xu:void 0,Pi.next=37,$e(Zd,P,Po,!1,{filterValue:xu,bitDepth:Zd.imageBitDepth});case 37:ve.rotate(nS);case 38:return Pi.prev=38,x.hideLoading("click filter"),Pi.finish(38);case 41:case"end":return Pi.stop()}},Er,null,[[5,,38,41]])}))).apply(this,arguments)},zn=function(Er){return Pn.apply(this,arguments)},Nn=function(Er,Fi){Er&&(Er.classList[Fi?"remove":"add"](de.displayNone),Fi&&k&&(Er.scrollLeft=k.offsetLeft),R=Fi)},_n=function(){var Er=q?.querySelector("."+de.filterDropDown);Nn(Er,!1)},k=null,j=R=!(xn=function(){j||(ve.on(F,_n),ve.on(L,_n),ve.on(U,function(){lt(x),R=!1}),j=!0)}),!(B=x.getCurrentPage())||B.isDestroyed)return ci.abrupt("return");ci.next=13;break;case 13:if(q=B.getHtmlElement()){ci.next=16;break}return ci.abrupt("return");case 16:if(ee=q?.querySelector("."+de.BUTTON_PREFIX+"filter"),te=ee?.querySelector("."+de.filterDropDown),ve=B.getViewerByUid(E),(Ge=ve.getCurrentIndex())<0)return te&&(et(te),te.remove()),ci.abrupt("return");ci.next=23;break;case 23:if(Ye(ht=ve.getUidByIndex(Ge))&&""!=ht){ci.next=27;break}return te&&(et(te),te.remove()),ci.abrupt("return");case 27:if(te&&(pt=te.getAttribute("data")),te&&pt==ht){ci.next=39;break}return vt=!te,te?(et(te),Tt=null==(Tt=te)?void 0:Tt.querySelector("ul")):(te=document.createElement("span"),Tt=document.createElement("ul"),te.appendChild(Tt)),ci.next=33,B.appendFilterDropdownImages(ve);case 33:dn="",(Wt=ci.sent)&&(Tt.appendChild(Wt),k=null==(Wt=Tt)?void 0:Wt.querySelector("."+de.filterSelectedItem),Wt=!1,ee?.querySelector("."+de.filterApplyAll)?Wt=!0:(Tn=(Tn=x.config.documentEditorSettings.filter).applyToAll)&&"visible"==Tn.visibility&&(Tn=Wn())&&(Tn.classList.add(de.filterApplyAll),te.insertBefore(Tn,te.firstChild),Wt=!0),dn=Wt?"dynamsoft-camera-H100":"dynamsoft-camera-H71"),te.className=de.filterDropDown+" "+de.displayNone+" "+dn,vt&&(te.addEventListener("click",function(){var Er=u(s().mark(function Fi(uo){return s().wrap(function(Po){for(;;)switch(Po.prev=Po.next){case 0:zn(uo);case 1:case"end":return Po.stop()}},Fi)}));return function(Fi){return Er.apply(this,arguments)}}()),ee.appendChild(te)),ht&&te.setAttribute("data",ht);case 39:Nn(te,R=!R),J.stopPropagation(),xn();case 43:case"end":return ci.stop()}},ne)}))).apply(this,arguments)}var Or="dynamsoft_camera_viewer_style",Ei=y("bindCameraEvents"),xr=y("getViewer"),Jr=y("createCameraDvs"),Mi=y("removeCameraDvs"),nn=y("setViewerStyle"),on=y("addStyle"),fn=function(ne){function J(E,x,R){return x=ne.call(this,E,x,R)||this,Object.defineProperty(l(x),on,{value:so}),Object.defineProperty(l(x),nn,{value:Sr}),Object.defineProperty(l(x),Mi,{value:tr}),Object.defineProperty(l(x),Jr,{value:jn}),Object.defineProperty(l(x),xr,{value:Sn}),Object.defineProperty(l(x),Ei,{value:mn}),x._backFileName=null,x._initFileName=null,x._pageFileName=null,x._viewerId=null,x._editUid=null,x._zooming=!0,x._savedUid=null,x._copyRefMap={},x._isHandlingPageUid=!1,x._nextHandlePageUid=null,x._backInfo={origApplyToAll:"",origDocumentData:{},initDocumentData:{}},x._currentInfo={documentData:{}},x._nextViewerPage=null,x._bSyncViewerDataFromBackupData=!1,x._backFileName=E.fileName,x._initFileName=E.initFileName,x._pageFileName=E.fileName,x.setPageFilename(),x.options.initDocumentData&&(x._backInfo.initDocumentData=x.options.initDocumentData),x.setZooming(),_(l(x),Jr)[Jr](x.options),_(l(x),on)[on](),x}c(J,ne);var E,P=J.prototype;return P.setPageFilename=function(){},P.setZooming=function(){},P.getPageFileName=function(){return this._pageFileName},P.getViewerUid=function(){return this._viewerId},P.getViewerByUid=function(E){return this._dvs.ViewControl.getViewerByUid(E)},P.getImageCount=function(){var E=_(this,xr)[xr]();return E?E.getCurrentPageUids().length:0},P.initPageOption=function(E,x){E&&0==E.fromInternal&&E.documentEditorSettings?this.options=E||{}:(this.options=xe(E||{},{scannerViewer:ut(x.config.scannerViewer),documentEditorSettings:ut(x.config.documentEditorSettings)}),x.config&&x.config.documentEditorSettings&&x.config.documentEditorSettings.element&&(this.options.documentEditorSettings.element=x.config.documentEditorSettings.element))},P.destroy=function(){this.isDestroyed=!0,this._nextViewerPage&&(this._nextViewerPage.destroy(),this._nextViewerPage=null),_(this,Mi)[Mi](),ne.prototype.destroy.call(this)},P.getOptionsEl=function(){var E;return Ye(E=(void 0===(E=this.options.documentEditorSettings)?{}:E).element)?document.getElementById(E):E},P.gotoViewPage=function(E){var x=this.getViewerByUid(this._viewerId);if(x){var R=x.getCurrentPageUids();if(0<=E&&E<R.length)return x.gotoPage(E),!0}return!1},P.handlePageByIndex=(E=u(s().mark(function x(R){var k,j;return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(j=this.getViewerByUid(this._viewerId),k=j.getCurrentPageUids(),!(0<=R&&R<k.length)){B.next=9;break}if(j.gotoPage(R),Ye(k=j.getUidByIndex(R))&&""!=k)return j=this._dvs,B.next=9,this.handlePageByUid(k,j);B.next=9;break;case 9:case"end":return B.stop()}},x,this)})),function(x){return E.apply(this,arguments)}),P.handlePageByUid=function(){var E=u(s().mark(function x(R,k){return s().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,this.initOrigDataByUid(R);case 2:case"end":return j.stop()}},x,this)}));return function(x,R){return E.apply(this,arguments)}}(),P.getCurrentIndex=function(){return this.getViewerByUid(this._viewerId).getCurrentIndex()},P.removePageFile=function(){this._pageFileName&&(Ie.log("remove file: "+this._pageFileName),this._dvs.File.removeFile(this._pageFileName),this._pageFileName=null)},P.show=function(){var E=u(s().mark(function x(){var R,k;return s().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(this.isDestroyed)return j.abrupt("return");j.next=2;break;case 2:if(!(k=_(this,xr)[xr]())){j.next=12;break}if(0<=(R=k.getCurrentIndex()))return k=k.getUidByIndex(R),j.next=9,this.handlePageByUid(k,this._dvs);j.next=9;break;case 9:if(this.isDestroyed){j.next=12;break}return j.next=12,ne.prototype.show.call(this);case 12:case"end":return j.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P.isVisible=function(){return!!this.element&&!this.element.classList.contains(de.displayNone)},P.backupImageDataFromUids=function(E){for(var x,R,k=E.length,j=0;j<k;j++)Ye(x=E[j])&&""!=x&&(R=null==(R=this._dvsWrapper)?void 0:R.getCustomDataSync(x),this.backupImageDataFromSrcUid(x,R))},P.backupImageDataFromSrcUid=function(E,x){this.isDestroyed||(this._backInfo.origDocumentData[E]=x?{detectArea:x.detectArea,angle:x.angle,filterValue:x.filterValue}:{detectArea:null,angle:0,filterValue:"original"})},P.isCropPage=function(){return!1},P.fileDataCopyOneToViewer=function(E,x,R,k,j){var B,q,ee,te=(ee=(ee=null==(ee=this._dvsWrapper)?void 0:ee.getCustomDataSync(R))?xe(ee,{}):{}).oriBlob,ve=ee.resBlob;return x?te&&te.imageData&&(B=te.imageData,q=Nt(te)):ve&&ve.imageData&&(B=ve.imageData,q=Nt(ve)),B&&q||(B=null==(x=this._dvsWrapper)?void 0:x.getOriDataSync(R),(ve=Pt(q=null==(te=this._dvsWrapper)?void 0:te.getMetaDataSync(R))).imageData=B,ee.oriBlob||(ee.oriBlob=K(ve))),x=k<0||j<=k?this._dvs.DataControl.appendSync(this._pageFileName,[{oriData:B,metadata:q,customData:ee}]):this._dvs.DataControl.insertSync(this._pageFileName,[{oriData:B,metadata:q,customData:ee}],k),q=B=null,x&&1==x.length?(this._copyRefMap[te=x[0]]=R,te):null},P.fileDataCopyToViewer=function(E){for(var x,R=this.isCropPage(),k=E.length,j=0;j<k;j++)Ye(x=E[j])&&""!=x&&this.fileDataCopyOneToViewer(!1,R,x,-1,k)},P.initOrigDataByUid=function(){var E=u(s().mark(function x(R){var k,j,B,q,ee,te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(this.isCropPage(),this.isDestroyed)return ve.abrupt("return");ve.next=4;break;case 4:if(Ye(R)&&""!=R){ve.next=6;break}return ve.abrupt("return");case 6:if(k=this._dvsWrapper.getDataRootSync(R)){ve.next=9;break}return ve.abrupt("return");case 9:if(B=void 0===(B=k.metadata)?{}:B,te=k.oriData,ee=!1,(j=void 0===(j=k.customData)?{}:j).oriBlob?q=j.oriBlob:(q=te,j.oriBlob=K(te)),Ye(q))return ve.next=15,fetch(q);ve.next=20;break;case 15:return te=ve.sent,ve.next=18,te.blob();case 18:q=ve.sent,ee=!0;case 20:if(q instanceof Blob)return ve.next=23,Ut(q);ve.next=26;break;case 23:q=ve.sent,1==B.bitDepth&&(q.imageBitDepth=1),ee=!0;case 26:ee&&(j.oriBlob=K(q),j.angle=0);case 27:case"end":return ve.stop()}},x,this)}));return function(x){return E.apply(this,arguments)}}(),P.ifOldDocumentDataChanged=function(){var E=this.getViewerByUid(this._viewerId),x=!1;if(E)for(var R=E.getCurrentPageUids(),k=0;k<R.length;k++){var j=R[k];if(Ye(j)&&""!=j){var B=this._copyRefMap[j];if(Ye(B)&&""!=B){if(!(B=this._backInfo.origDocumentData[B]))return!0;var q=null==(q=this._dvsWrapper)?void 0:q.getCustomDataSync(j);if(q&&(x=this.compareOldValueChanged(B,q,j=q.oriBlob)))break}}}return x},P.compareOldValueChanged=function(E,x,R){if(!E||!x)return!0;if(void 0===E.detectArea){if(R&&!Qt(x.detectArea,R.imageWidth,R=R.imageHeight))return!0}else if(!nt(E.detectArea,x.detectArea))return!0;if(void 0===E.angle){if(0!=x.angle)return!0}else if(E.angle!=x.angle)return!0;return!Cn(E.filterValue,x.filterValue)},P.getRefUid=function(E,x){if(this.isDestroyed)return null;if(E=this._copyRefMap[E],x){var R=this._dcs.getPreviousPageByPage(this);if(R&&R instanceof J)return R.getRefUid(E,x)}return Ye(E)&&""!=E?E:null},P.setNextViewerPage=function(E){this._nextViewerPage=E},P.syncFiles=function(){var E=u(s().mark(function x(R,k){var j,B,q,ee,te,ve,Ge,ht,pt,vt,Tt,dn,Wt,Tn,xn,_n,Nn,zn,Pn,yn;return s().wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:if(this.isDestroyed)return Wn.abrupt("return");Wn.next=2;break;case 2:if(j=this.getViewerByUid(this._viewerId),B=0,!j){Wn.next=74;break}if(!(q=j.getCurrentPageUids())){Wn.next=73;break}ve=[],Ge=[],ht=q.length,ee=0;case 9:if(!(ee<ht)){Wn.next=33;break}if(Ye(pt=q[ee])&&""!=pt){Wn.next=13;break}return Wn.abrupt("continue",30);case 13:if(Ye(vt=this._copyRefMap[pt])&&""!=vt){Wn.next=17;break}return ve.push(ee),Wn.abrupt("continue",30);case 17:Tt=!1,te=0;case 19:if(!(te<k.length)){Wn.next=29;break}if(Ye(dn=k[te])&&""!=dn){Wn.next=23;break}return Wn.abrupt("continue",26);case 23:if(dn==vt)return Tt=!0,Wn.abrupt("break",29);Wn.next=26;break;case 26:te++,Wn.next=19;break;case 29:Tt||(ve.push(ee),this._dvsWrapper.removeSync(vt),delete this._copyRefMap[pt],delete this._backInfo.origDocumentData[vt]);case 30:ee++,Wn.next=9;break;case 33:0<ve.length&&(ht-=ve.length,j.removeSync(ve)),te=0;case 35:if(!(te<k.length)){Wn.next=43;break}if(Ye(Wt=k[te])&&""!=Wt){Wn.next=39;break}return Wn.abrupt("continue",40);case 39:this._backInfo.origDocumentData[Wt]||Ge.push({uid:Wt,index:te});case 40:te++,Wn.next=35;break;case 43:if(Tn=this.isCropPage(),!(0<Ge.length)){Wn.next=71;break}xn=[],te=0;case 47:if(!(te<Ge.length)){Wn.next=60;break}if(Ye(Nn=(_n=Ge[te]).uid)&&""!=Nn){Wn.next=52;break}return Wn.abrupt("continue",57);case 52:if(this._backInfo.origDocumentData[Nn])return Wn.abrupt("continue",57);Wn.next=54;break;case 54:Pn=null==(Pn=this._dvsWrapper)?void 0:Pn.getCustomDataSync(Nn),this.backupImageDataFromSrcUid(Nn,Pn),this._pageFileName&&(Pn=this.fileDataCopyOneToViewer(R,Tn,Nn,_n.index,ht))&&(ht++,xn.push(Pn),this._copyRefMap[Pn]=Nn);case 57:te++,Wn.next=47;break;case 60:if(!this._pageFileName){Wn.next=71;break}te=0;case 62:if(!(te<xn.length)){Wn.next=71;break}if(Ye(zn=xn[te])&&""!=zn){Wn.next=66;break}return Wn.abrupt("continue",68);case 66:return Wn.next=68,this.fillOneCustomDataByUidFirstTime(zn,this.isCropPage(),!0);case 68:te++,Wn.next=62;break;case 71:(Pn=this._dvs.File.openFile(this._pageFileName,j.uid))&&(B=Pn.length);case 73:this._nextViewerPage&&(yn=j.getCurrentPageUids(),this._nextViewerPage.syncFiles(R,yn));case 74:return Wn.abrupt("return",B);case 75:case"end":return Wn.stop()}},x,this)}));return function(x,R){return E.apply(this,arguments)}}(),P.reorderImages=function(E,x){for(var R,k,j=x.length,B={},q=0;q<j;q++)!Ye(k=x[q])||""==k||Ye(R=this._copyRefMap[k])&&""!=R&&(B[R]=k);var ee,te=E.length,ve=[];for(q=0;q<te;q++)Ye(ee=E[q])&&""!=ee&&ve.push(B[ee]);return ve},P.resetViewerAngleByIndexes=function(E){var x=this.getViewerByUid(this._viewerId);if(x&&E)for(var k=E.length,j=0;j<k;j++)x.resetByIndex(E[j],!1)},P.restoreViewerCustomData=function(){var E=[],x=_(this,xr)[xr]();if(x)for(var R,k,j=x.getCurrentPageUids(),B=j.length,q=0;q<B;q++)Ye(k=j[q])&&""!=k&&Ye(R=this._copyRefMap[k])&&""!=R&&(R=this._backInfo.origDocumentData[R])&&(k=this.restoreOneViewerCustomData(x,k,q,R)).changed&&k.needReset&&E.push(q);return E},P.regetViewerCustomDataFromSrc=function(){var E=[],x=_(this,xr)[xr]();if(x)for(var R,k,j,B=x.getCurrentPageUids(),q=B.length,ee=0;ee<q;ee++)Ye(R=B[ee])&&""!=R&&Ye(j=this._copyRefMap[R])&&""!=j&&(k=null==(k=this._dvsWrapper)?void 0:k.getCustomDataSync(j))&&(j=this.restoreOneViewerCustomData(x,R,ee,k)).changed&&j.needReset&&E.push(ee);return E},P.restoreOneViewerCustomData=function(E,x,R,k){var j={changed:!1,needReset:!1},B=null==(B=this._dvsWrapper)?void 0:B.getCustomDataSync(x);return B&&k?(this.compareOldValueChanged(k,B,x=B.oriBlob)&&(void 0!==k.detectArea&&(B.detectArea=k.detectArea),B.angle!=k.angle&&(B.angle=k.angle,j.needReset=!0),void 0!==k.filterValue&&(B.filterValue=k.filterValue),w(B),j.changed=!0),j):j},P.saveViewerCustomData=function(){var E=_(this,xr)[xr]();if(E)for(var x,R,k,j,B=E.getCurrentPageUids(),q=B.length,ee=0;ee<q;ee++)Ye(j=B[ee])&&""!=j&&Ye(x=this._copyRefMap[j])&&""!=x&&(R=null==(R=this._dvsWrapper)?void 0:R.getCustomDataSync(x))&&(k=null==(k=this._dvsWrapper)?void 0:k.getCustomDataSync(j))&&(j=!1,nt(R.detectArea,k.detectArea)||(R.detectArea=k.detectArea,j=!0),R.angle!=k.angle&&(R.angle=k.angle,j=!0),Cn(R.filterValue,k.filterValue)||(R.filterValue=k.filterValue,j=!0),j&&R.resBlob&&delete R.resBlob,this._backInfo.origDocumentData[x]={detectArea:k.detectArea,angle:k.angle,filterValue:k.filterValue})},P.render=function(){},P.syncFileFromExternalEvent=function(){var E=u(s().mark(function x(R,k){var j;return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(this.isDestroyed)return B.abrupt("return");B.next=2;break;case 2:return j=null==(j=this._fileWrapper)?void 0:j.openFile(this._backFileName),B.next=5,this.syncFiles(R,j);case 5:case"end":return B.stop()}},x,this)}));return function(x,R){return E.apply(this,arguments)}}(),P.getCurrentEditUid=function(){return this._editUid},P.setEditUidAfterSyncImages=function(){var E=u(s().mark(function x(R){var k,j;return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(this.isDestroyed)return B.abrupt("return");B.next=2;break;case 2:if(!(k=_(this,xr)[xr]())){B.next=9;break}if(0<=(j=!qt(j=k.getIndexByUid(R))||j<0?k.getCurrentIndex():j))return B.next=9,this.handlePageByIndex(j);B.next=9;break;case 9:case"end":return B.stop()}},x,this)}));return function(x){return E.apply(this,arguments)}}(),P.fillOneCustomDataByUidFirstTime=function(){var E=u(s().mark(function x(R,k,j){var B,q,ee,te,ve,Ge,ht,pt,vt,Tt,dn;return s().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:if(this.isDestroyed)return Wt.abrupt("return");Wt.next=2;break;case 2:if(Ye(R)&&""!=R){Wt.next=4;break}return Wt.abrupt("return");case 4:if(B=this._dvsWrapper.getDataRootSync(R)){Wt.next=7;break}return Wt.abrupt("return");case 7:if(q=void 0===(q=B.metadata)?{}:q,Tt=B.oriData,ve=te=!1,(Ge=B.customData)||(B.customData=Ge={},ve=!0),Ge.resBlob?(vt=k&&Ge.oriBlob?Ge.oriBlob:Ge.resBlob)&&vt.imageData&&(B.oriData=K(vt.imageData),B.metadata=Nt(vt),ht=vt.imageWidth,pt=vt.imageHeight):((vt=Pt(q)).imageData=Tt,k||j||(Ge.resBlob=K(vt)),Ge.oriBlob?ee=Ge.oriBlob:(ee=vt,Ge.oriBlob=K(vt)),void 0===Ge.angle&&(Ge.angle=0),te=!0),Ye(ee))return Wt.next=14,fetch(ee);Wt.next=19;break;case 14:return Tt=Wt.sent,Wt.next=17,Tt.blob();case 17:ee=Wt.sent,ve=!0;case 19:if(ee instanceof Blob)return Wt.next=22,Ut(ee);Wt.next=27;break;case 22:ht=(ee=Wt.sent).imageWidth,pt=ee.imageHeight,1==q.bitDepth&&(ee.imageBitDepth=1),ve=!0;case 27:ve&&(Ge.oriBlob=K(ee),Ge.angle=0,te=!0),Ge.detectArea||(ht&&pt||(ee=Ge.oriBlob)&&(ht=ee.imageWidth,pt=ee.imageHeight),0<ht&&0<pt&&(Ge.detectArea=[0,0,ht,0,ht,pt,0,pt]),te=!0),Ge.filterValue||(Ge.filterValue="original",te=!0),te&&(dn=this._copyRefMap[R])&&this.backupImageDataFromSrcUid(dn,Ge);case 31:case"end":return Wt.stop()}},x,this)}));return function(x,R,k){return E.apply(this,arguments)}}(),P.fillOrigCustomDataFirstTime=function(){var E=u(s().mark(function x(){var R,k,j;return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(this.isDestroyed)return B.abrupt("return");B.next=2;break;case 2:if(!(R=this.getViewerByUid(this._viewerId))){B.next=17;break}if(!(R=R.getCurrentPageUids())){B.next=17;break}k=0;case 7:if(!(k<R.length)){B.next=17;break}if(Ye(j=R[k])&&""!=j){B.next=11;break}return B.abrupt("continue",14);case 11:return B.next=13,this.fillOneCustomDataByUidFirstTime(R[k],this.isCropPage(),!1);case 13:this.copyOneBackupToInitData(j);case 14:k++,B.next=7;break;case 17:case"end":return B.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P.copyOneBackupToInitData=function(E){Ye(E=this._copyRefMap[E])&&""!=E&&(this._backInfo.initDocumentData[E]=xe(this._backInfo.origDocumentData[E],{}))},J}(un);function mn(){var ne=this;this.getViewerByUid(this._viewerId).on("slideFinished",u(s().mark(function J(){var P;return s().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:(P=ne.getViewerByUid(ne._viewerId))&&0<=(P=P.getCurrentIndex())&&ne.handlePageByIndex(P);case 2:case"end":return E.stop()}},J)})))}function Sn(){return this.getViewerByUid(this._viewerId)}function jn(ne){var J=this._dvs.ViewControl.createViewer({container:null,displayMode:"single",uiConfig:{canvasConfig:{canvasMouseShape:"pointer"},outerBorder:"0px"},scrollerConfig:{},zooming:this._zooming}),P=(this._viewerId=J.uid,this.options.curIndex),E=null==(E=this._fileWrapper)?void 0:E.openFile(this._backFileName);this._dvs.File.createFile(this._pageFileName,this._viewerId),this._dvs.File.openFile(this._pageFileName,this._viewerId),0==E.length?P=-1:(this.backupImageDataFromUids(E),this._pageFileName&&this.fileDataCopyToViewer(E),0<=P&&(P>=E.length?P=E.length-1:P<0&&(P=0),J.gotoPage(P)),0<=(E=J.getCurrentIndex())&&(this._savedUid=J.getUidByIndex(P=E))),this.options.curIndex=P,J&&_(this,nn)[nn](J),_(this,Ei)[Ei]()}function tr(){var ne=_(this,xr)[xr]();ne.removeAllSync(),this._dvs.ViewControl.removeViewer(ne)}function Sr(ne){var J=(E=void 0===(E=this.options.documentEditorSettings)?{}:E).headerStyle,P=void 0===(P=E.bodyStyle)?{}:P,E=void 0===(E=E.footerStyle)?{}:E;(J=void 0===J?{}:J).background||(J.background="#000"),P.background||(P.background="#323232"),E.background||(E.background="#000"),ne.topMenuBorder="none",ne.topMenuColor=J.background,ne.canvasBorder="none",ne.canvasBackground=P.background,ne.displayMode="single",ne.footerColor=E.background,ne.width="100%",ne.height="100%"}function so(){var ne,P,J=(ne=void 0===(ne=this.options.documentEditorSettings)?{}:ne).bodyStyle;if(J="."+de.headerfont+" { color: "+(P=void 0===(P=ne.headerStyle)?{}:P).color+"; background: "+P.background+" !important; }\n."+de.footerfont+" { color: "+(ne=void 0===(ne=ne.footerStyle)?{}:ne).color+" !important; }\n."+de.documentEditPage+" ."+de.headerSelected+" i { color: "+P.selectedColor+" !important; }\n."+de.documentEditPage+" ."+de.footerSelected+" i { color: "+ne.selectedColor+" !important; }\n."+de.cropPage+" ."+de.footerSelected+" i { color: "+ne.selectedColor+" !important; }\n."+de.documentEditPage+" ."+de.cvsContainer+", ."+de.cropPage+" ."+de.cvsContainer+" { background: "+(void 0===J?{}:J).background+" !important; }\n."+de.documentEditPage+" .dvs-cameraPager, ."+de.cropPage+" .dvs-cameraPager{  color: "+P.color+" !important; }\n."+de.documentEditPage+" .dvs-cameraPager p, ."+de.cropPage+" .dvs-cameraPager p{  color: "+P.color+" !important; }\n."+de.documentEditPage+" .dvs-cameraPager .dvs-curPage, ."+de.cropPage+" .dvs-cameraPager .dvs-curPage{ color: "+P.selectedColor+" !important; }\n."+de.documentEditPage+" .dvs-cameraPager ."+de.disable+", ."+de.cropPage+" .dvs-cameraPager ."+de.disable+"{ color: "+P.disabledColor+" !important; }\n."+de.filterDropDown+" {background: "+ne.background+" !important;}\n."+de.filterDropDown+" ul {background: "+ne.background+" !important;}\n."+de.filterDropDown+" ul li {border-color: "+ne.background+"}\n."+de.filterSelectedItem+" { border: 2px solid "+ne.selectedColor+" !important; }\n."+de.filterCheckedBox+" { border-color:"+ne.selectedColor+"; !important}\n."+de.filterCheckedBox+" span { background: "+ne.selectedColor+" !important}\n."+de.filterCheckedBox+" +label { color: "+ne.selectedColor+" }",P=document.getElementById(Or))P.innerHTML=J;else{(P=document.createElement("style")).type="text/css",P.id=Or;try{P.appendChild(document.createTextNode(J))}catch{}document.body.appendChild(P)}}var gi=y("initElement"),yi=y("initViewer"),Mr=function(ne){function J(E,x,R){return x=ne.call(this,E,x,R)||this,Object.defineProperty(l(x),yi,{value:To}),Object.defineProperty(l(x),gi,{value:Bi}),x.viewerPagerEventId=null,x._curImageData=null,x._filterDirty=!1,x._preEditPageCropData=null,x._bInsertingImage=!1,x._iInsertingIndex=-1,x.pageName=je,_(l(x),gi)[gi](),x._backInfo.origApplyToAll=R.filterApplyToAllValue,"hidden"==E.visibility&&x.clickSaveButton(),x}c(J,ne);var E,P=J.prototype;return P.rotateLeft=function(){this._rotate(-90)},P.rotateRight=function(){this._rotate(90)},P._rotate=function(E){if(!(this.isDestroyed||this.getImageCount()<=0)){var x=this._dcs,R=this.getViewerUid(),k=(R=this.getViewerByUid(R)).getCurrentIndex();if(!(k<0)){x.showLoading("rotate button init");try{R.rotateMode=0,R.rotate(E),this._rotateFilterDropDown(R.getRotateAngle(k))}finally{x.hideLoading("rotate button init")}}}},P._rotateFilterDropDown=function(E){var x;if(!this.isDestroyed){var R=null==(x=this.element)?void 0:x.querySelectorAll(".dynamsoft-camera-preFilter");if(R)for(var k=0;k<R.length;k++){var j=R[k];j&&"IMG"==j.tagName&&j.src&&(j.style.transform="rotate("+E+"deg)")}}},P.getOrigAngle=function(R){return(R=this._copyRefMap[R])&&(R=this._backInfo.origDocumentData[R])?R.angle:0},P.getCurrentCustomData=function(){var E,x,R=this._editUid;return Ye(R)&&""!=R?(E=this._preEditPageCropData&&Ye(x=this._copyRefMap[R])&&""!=x?this._preEditPageCropData[x]:E)||this._dvsWrapper.getCustomDataSync(R):E},P.destroy=function(){this.isDestroyed=!0,lt(this._dcs);var E=this.getViewerByUid(this._viewerId);E&&this.viewerPagerEventId&&E.offById(U,this.viewerPagerEventId),this.viewerPagerEventId=null,this.removePageFile(),this.setCurImageData(null),ne.prototype.destroy.call(this),this.options=null},P.setPageFilename=function(){this._pageFileName=["__dynamsoft_edit_files",He(6)].join("_")},P.getHeaderButtons=function(){var x,E=(x=this.options).headerButtons;return ne.prototype.createIconItems.call(this,void 0===E?{}:E,void 0===(x=(void 0===(x=x.documentEditorSettings)?{}:x).headerStyle)?{}:x,!0,null)},P.getFooterButtons=function(){var x,E=(x=this.options).footerButtons;return ne.prototype.createIconItems.call(this,void 0===E?{}:E,void 0===(x=(void 0===(x=x.documentEditorSettings)?{}:x).footerStyle)?{}:x,!1,null)},P.initPageOption=function(ee,x){ne.prototype.initPageOption.call(this,ee,x);var j,R=void 0===(R=(ee=this.options.documentEditorSettings).remove)?{}:R,k=void 0===(k=ee.insert)?{}:k,B=void 0===(B=ee.rotateLeft)?{}:B,q=void 0===(q=ee.crop)?{}:q,te=void 0===(te=(j=void 0===(j=ee.filter)?{}:j).applyToAll)?{}:te;x.curFilterValue=ee=void 0===(ee=j.defaultValue)?"original":ee,x.filterApplyToAllValue=te&&te.enableApplyToAll?ee:void 0,te={curIndex:-1,fileName:null,initFileName:this._initFileName,headerButtons:{close:{icon:de.font+" "+de.iconBack,className:de.BUTTON_PREFIX+"back",onclick:function(ve,Ge){(Ge=Ge.dcs.getCurrentPage())&&Ge.clickBackButton()}},pager:{className:"dvs-cameraPager"},delete:Ot(R,{icon:de.font+" "+de.iconDelete,className:de.BUTTON_PREFIX+"delete",onclick:function(ve,Ge){(Ge=Ge.dcs.getCurrentPage())&&Ge.clickDeleteButton()}})},footerButtons:{insert:Ot(k,{icon:de.font+" "+de.iconInsert,className:de.BUTTON_PREFIX+"insert",onclick:function(ne,R){var P,E,x,k=(R=R.dcs).getCurrentPage();function j(ee){var te=ee.dcs;te.captureLoop.getIsLooping()?setTimeout(j,200,ee):ee.callback.apply(null,[ee.selectedFile,te])}function B(ee,te){var ve;ee&&("application/pdf"==ee.type||"image/tiff"==ee.type?te.emit("video-error",be_IMAGE_FORMAT_INVALID):(ve=te.getCurrentPage())instanceof ki&&(te.emit("blurPage"),te.showLoading("insert - load image"),j({selectedFile:ee,dcs:te,callback:ve.selectedFile})))}k&&((P=k._dcs.getPreviousPage())&&P instanceof qr&&P.exitReuseMode(),E=R,R=(P=k).getDvs(),x=!1,E.showInsertPage({fileName:P.getPageFileName(),footerButtons:{capture:{onclick:function(ee,te){x||(x=!0,E.getCurrentPage()instanceof ki&&E.captureLoop.startManualCapture({dcs:E}),x=!1)}},load:{onclick:function(ee,te){E.getCurrentPage()instanceof ki&&function q(ee,te){var ve=document.createElement("input");ve.style.display="none",document.body.appendChild(ve),ve.addEventListener("click",function(Ge){Ge.stopPropagation()}),ve.type="file",ve.multiple=!1,ve.accept="image/png,image/jpeg,image/jpg",ve.onchange=function(){var Ge;""!==ve.value&&0<(Ge=ve.files).length&&(te&&te(Ge[0],ee),te=null),document.body.removeChild(ve),ve.value=null,ve.files=null,ve.onchange=null,ve=null},ve.click()}(E,B)}}}},R),E.emit("focusPage"))}}),rotate:Ot(B,{icon:de.font+" "+de.iconRotateLeft,className:de.BUTTON_PREFIX+"rotateLeft",onclick:function(ve,Ge){(Ge=Ge.dcs.getCurrentPage())&&Ge.rotateLeft()}}),filter:Ot(j,{icon:de.font+" "+de.iconFilter,className:de.BUTTON_PREFIX+"filter",onclick:function(ne,x){var P,E,R=(x=x.dcs).getCurrentPage();R&&(P=R.getDvs(),E=R.getViewerUid(),R.getViewerByUid(E).getCurrentIndex()<0||function(){Gn.apply(this,arguments)}(ne,P,E,x))}}),crop:Ot(q,{icon:de.font+" "+de.iconCrop,className:de.BUTTON_PREFIX+"crop",onclick:function(ve,Ge){(Ge=Ge.dcs.getCurrentPage())&&Ge.clickCropButton()}}),save:{icon:de.font+" "+de.iconSave,className:de.BUTTON_PREFIX+"save",onclick:function(ve,Ge){(Ge=Ge.dcs.getCurrentPage())&&Ge.clickSaveButton()}}}},this.options=xe(this.options,te)},P.changePageNumber=function(E,x){var R,k;this.element&&(R=null==(k=null==(k=this.element)?void 0:k.querySelector(".dvs-cameraPager"))?void 0:k.querySelector(".dvs-curPage"),k=k?.querySelector(".dvs-totalPage"),R.innerText=String(E+1),k.innerText=String(x))},P.changeStatus=function(E,x){var R,k;this.element&&(R=null==(k=null==(k=this.element)?void 0:k.querySelector(".dvs-cameraPager"))?void 0:k.querySelector(".dvs-previousPage"),k=k?.querySelector(".dvs-nextPage"),0<=E?(R.classList[E<=0?"add":"remove"](de.disable),k.classList[x===E+1?"add":"remove"](de.disable)):(R.classList.add(de.disable),k.classList.add(de.disable)))},P.handlePageByUid=(E=u(s().mark(function x(R,k){var j,B,q,ee,te,ve,Ge,ht,pt;return s().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:if(this.isDestroyed)return vt.abrupt("return");vt.next=2;break;case 2:if(this._isHandlingPageUid)return this._nextHandlePageUid=R,vt.abrupt("return");vt.next=5;break;case 5:return this._isHandlingPageUid=!0,j=this._dcs,this._editUid!=(B=R)&&(this.setCurPageId(B),this.setCurImageData(null)),j?.showLoading("handle page by uid"),vt.prev=10,vt.next=13,this.initOrigDataByUid(B);case 13:if(q=null==(q=this._dvsWrapper)?void 0:q.getCustomDataSync(B)){vt.next=21;break}if(!(te=this.getViewerByUid(this._viewerId))){vt.next=21;break}if((B=te.getUidByIndex(0))&&(q=null==(te=this._dvsWrapper)?void 0:te.getCustomDataSync(B),this.setCurPageId(B)),q){vt.next=21;break}return vt.abrupt("return");case 21:if(ee=q.detectArea,ht=q.resBlob,ve=bt(j,te=q.filterValue),te&&ve==te&&ht||this.SetFilterDirty(!0),!ee||!te||this._filterDirty){vt.next=29;break}vt.next=44;break;case 29:return ee||(this.setCurImageData(null),this.SetFilterDirty(!0)),vt.next=32,this.getCurImageData(B);case 32:if((Ge=vt.sent)&&this._filterDirty)return vt.next=36,Ze(Ge);vt.next=42;break;case 36:return ht=vt.sent,vt.next=39,j.filterHandlerByIImageData(Ge,ht,ve);case 39:return pt=vt.sent,vt.next=42,$e(pt,k,B,!1,{resBlob:pt,filterValue:ve,bitDepth:pt.imageBitDepth});case 42:this._filterDirty=!1,this.setFilterDropDownDirty();case 44:return vt.prev=44,j?.hideLoading("handle page by uid"),this._isHandlingPageUid=!1,vt.finish(44);case 48:if(this._nextHandlePageUid)return pt=this._nextHandlePageUid,this._nextHandlePageUid=null,vt.next=53,this.handlePageByUid(pt,this._dvs);vt.next=53;break;case 53:case"end":return vt.stop()}},x,this,[[10,,44,48]])})),function(x,R){return E.apply(this,arguments)}),P.setCurImageData=function(E){this._curImageData&&delete this._curImageData.imageData,this._curImageData=E},P.getCurImageData=function(){var E=u(s().mark(function x(R){var k,j,B,q,ee,te,ve,Ge,ht;return s().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:if(this.isDestroyed)return pt.abrupt("return");pt.next=2;break;case 2:if(k=this._dcs,!(j=this._editUid==R)){pt.next=6;break}if(this._curImageData)return pt.abrupt("return",this._curImageData);pt.next=6;break;case 6:if(B=null==(B=this._dvsWrapper)?void 0:B.getCustomDataSync(R)){pt.next=9;break}return pt.abrupt("return");case 9:if(q=B.oriBlob,ee=B.detectArea,te=void 0===(te=B.angle)?0:te,k?.showLoading("handle page by uid"),pt.prev=11,ee)return pt.next=15,ae(q);pt.next=22;break;case 15:return Ge=pt.sent,pt.next=18,we(Ge,te,ee);case 18:ve=pt.sent,j&&(this.setCurImageData(ve),this.SetFilterDirty(!0)),pt.next=32;break;case 22:return pt.next=24,ae(q,te);case 24:return Ge=pt.sent,pt.next=27,St(Ge,k,!0,!1,!1);case 27:B.detectArea=(ht=pt.sent).detectArea,ve=ht.resImage,this.setCurPageId(R),j&&(this.setCurImageData(ve),this.SetFilterDirty(!0));case 32:return pt.prev=32,k?.hideLoading("handle page by uid"),pt.finish(32);case 35:return pt.abrupt("return",ve);case 36:case"end":return pt.stop()}},x,this,[[11,,32,35]])}));return function(x){return E.apply(this,arguments)}}(),P.render=function(){var E=this.getViewerByUid(this._viewerId),x=E.getCurrentPageUids();x&&0<x.length&&setTimeout(function(){var R;null!=E&&null!=(R=E.ui)&&R.styleChange(),E?.rotate(0)},0)},P.setCurPageId=function(E){this._editUid=E},P.setFilterDropDownDirty=function(){var E=null==(E=this.element)?void 0:E.querySelector("."+de.BUTTON_PREFIX+"filter");E&&(E=E?.querySelector("."+de.filterDropDown))&&E.setAttribute("data","")},P.SetFilterDirty=function(E){this._filterDirty=!0},P.ClearFilterDirty=function(){this._filterDirty=!1},P.GetFilterDirty=function(){return this._filterDirty},P.clickCropButton=function(){var E=u(s().mark(function x(){var R,k,j,B,q,ee;return s().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if("hidden"==this.options.documentEditorSettings.cropViewer.visibility.toString().toLowerCase())return te.abrupt("return");te.next=2;break;case 2:if(this.getImageCount()<=0)return te.abrupt("return");te.next=4;break;case 4:if(R=this.getDvs(),k=this.getCurrentIndex(),!this._pageFileName){te.next=23;break}if(j=this.saveViewerAngle(),B={fileName:this._pageFileName,initFileName:this._initFileName,curIndex:k,saveData:!0,fromInternal:this.options.fromInternal,documentEditorSettings:this.options.documentEditorSettings,nextButtonCss:de.font+" "+de.iconSave},(q=this._dcs.getPreviousPage())&&q instanceof qr)return ee=(ee=this.getViewerByUid(this._viewerId)).getCurrentPageUids(),q.enterReuseMode(B,ee),q.gotoViewPage(k),te.next=17,this._dcs.navigateToPage(q);te.next=18;break;case 17:return te.abrupt("return");case 18:return(ee=new qr(B,R,this._dcs)).gotoViewPage(k),te.next=22,this._dcs.navigateToPage(ee);case 22:this.resetViewerAngleByIndexes(j);case 23:case"end":return te.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P.updateFileDataToViewer=function(){var E=u(s().mark(function x(){var R,k,j,B,q,ee,te,ve,Ge,ht,pt,vt,Tt,dn;return s().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:if(!(R=this.getViewerByUid(this._viewerId))){Wt.next=47;break}0<=(k=R.getCurrentIndex())&&(j=R.getUidByIndex(k)),B=R.getCurrentPageUids(),te=B.length,Ge=!(ve=[]),ee=0;case 7:if(!(ee<te)){Wt.next=18;break}if(Ye(q=B[ee])&&""!=q){Wt.next=11;break}return Wt.abrupt("continue",15);case 11:if(Ye(ht=this._copyRefMap[q])&&""!=ht){Wt.next=14;break}return Wt.abrupt("continue",15);case 14:ve.push(ht);case 15:ee++,Wt.next=7;break;case 18:this.backupImageDataFromUids(ve),ee=0;case 20:if(!(ee<te)){Wt.next=47;break}if(Ye(q=B[ee])&&""!=q){Wt.next=24;break}return Wt.abrupt("continue",44);case 24:if(Ge=j==q,Ye(pt=this._copyRefMap[q])&&""!=pt){Wt.next=28;break}return Wt.abrupt("continue",44);case 28:if(vt=this._backInfo.origDocumentData[pt],Tt=this._preEditPageCropData[pt],!((dn=null==(dn=this._dvsWrapper)?void 0:dn.getCustomDataSync(q))&&Tt&&vt)){Wt.next=44;break}if(!nt(Tt.detectArea,vt.detectArea)||Tt.angle!=vt.angle){Wt.next=35;break}Wt.next=44;break;case 35:if(dn.angle=vt.angle,dn.detectArea=vt.detectArea,dn.resBlob&&delete dn.resBlob,this._dvsWrapper.setCustomDataSync(q,dn),Ge)return R.resetByIndex(k,!1),this.setCurImageData(null),Wt.next=44,this.handlePageByUid(j,this._dvs);Wt.next=44;break;case 44:ee++,Wt.next=20;break;case 47:case"end":return Wt.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P.hide=function(){ne.prototype.hide.call(this)},P.show=function(){var E=u(s().mark(function x(){var R;return s().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(this.isDestroyed)return this.hide(),k.abrupt("return");k.next=3;break;case 3:if(this._bSyncViewerDataFromBackupData)return k.next=6,this.updateFileDataToViewer();k.next=8;break;case 6:this._preEditPageCropData=null,this._bSyncViewerDataFromBackupData=!1;case 8:return this._dcs.config.documentEditorSettings.visibility="visible",k.next=11,ne.prototype.show.call(this);case 11:(R=this.getViewerByUid(this._viewerId))&&0<R.getCurrentPageUids().length&&this.render();case 13:case"end":return k.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P.clickDeleteButton=function(){var E=u(s().mark(function x(){var R,k,j,B,q,ee;return s().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(this.isDestroyed)return te.abrupt("return");te.next=2;break;case 2:if(this.getImageCount()<=0)return te.abrupt("return");te.next=4;break;case 4:if((j=this._dcs).config.documentEditorSettings.remove.funcConfirmRemove)return te.next=8,j.config.documentEditorSettings.remove.funcConfirmRemove();te.next=11;break;case 8:if(0==te.sent)return te.abrupt("return");te.next=11;break;case 11:if(R=this.getViewerByUid(this._viewerId),(k=R.getCurrentIndex())<0)return te.abrupt("return");te.next=15;break;case 15:if(j=R.getUidByIndex(k),(ee=this._dcs.getPreviousPage())&&ee instanceof qr&&ee.exitReuseMode(),ee=this.getRefUid(j,!0),B=!1,!Ye(ee)||""==ee){te.next=29;break}if(!(q=this._initFileName)){te.next=29;break}if(0<=(q=this._fileWrapper.getIndexByUidInFile(q,ee)))return ee=this._dcs.getRemovePhotoCallback(),te.next=28,ee(this._initFileName,q);te.next=29;break;case 28:B=!0;case 29:if(B||R.removeSync(k),0<R.currentPageCount)return te.next=33,this.refreshViewer();te.next=33;break;case 33:case"end":return te.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P.clickSaveButton=function(){var E=u(s().mark(function x(){var R,k,j,B,q,ee,te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(this.isDestroyed)return ve.abrupt("return");ve.next=2;break;case 2:if(R=this.getDvs(),k=this._dcs,q=this.getViewerByUid(this._viewerId),k.showLoading("save button init"),j=!1,B=this.options.fromInternal,ve.prev=7,this.saveViewerAngle(),(ee=k.getPreviousPage())&&ee instanceof qr&&ee.exitReuseMode(),this.setCurImageData(null),this.SetFilterDirty(!0),!(0<(ee=q.getCurrentPageUids()).length)){ve.next=23;break}if(B)return ve.next=18,this._saveToWebTwain(ee);ve.next=21;break;case 18:R.File.removeFile(this._backFileName),ve.next=23;break;case 21:return ve.next=23,this.saveFromExternal(ee);case 23:(te=null==(q=document)?void 0:q.querySelector(".dvs-showImageArea"))&&(te.style.display=""==te.style.display?"block":""),lt(k),j=!0,k.exit(R);case 28:return ve.prev=28,k.hideLoading("save button init"),ve.finish(28);case 31:if(j&&k.closeAllPages)return ve.next=34,k.closeAllPages();ve.next=37;break;case 34:if(k.config.documentEditorSettings.funcConfirmExitAfterSave)return ve.next=37,k.config.documentEditorSettings.funcConfirmExitAfterSave(!B);ve.next=37;break;case 37:case"end":return ve.stop()}},x,this,[[7,,28,31]])}));return function(){return E.apply(this,arguments)}}(),P.ifOldDocumentDataChanged=function(){if(this._backInfo.origApplyToAll!=this._dcs.filterApplyToAllValue)return!0;var E=this.getViewerByUid(this._viewerId),x=!1;if(E)for(var R=E.getCurrentPageUids(),k=0;k<R.length;k++){var j=R[k];if(Ye(j)&&""!=j){var B=this._copyRefMap[j];if(Ye(B)&&""!=B){if(!(B=this._backInfo.origDocumentData[B]))return!0;var q=null==(q=this._dvsWrapper)?void 0:q.getCustomDataSync(j);if(q&&(q=(j=xe(q,{})).oriBlob,j.angle=pe(j.angle+E.getRotateAngle(k)),x=this.compareOldValueChanged(B,j,q)))break}}}return x},P.refreshViewer=function(){var E=u(s().mark(function x(){var R,k;return s().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(R=this.getViewerByUid(this._viewerId),0<=(k=R.getCurrentIndex()))return k=R.getUidByIndex(k),j.next=6,this.handlePageByUid(k,this._dvs);j.next=7;break;case 6:R.render();case 7:case"end":return j.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P._saveToWebTwain=function(){var E=u(s().mark(function x(R){var k,j,B,q,ee,te,ve,Ge;return s().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:k=this._dvs,B=(j=this._dcs).getSavePhotoCallback(),q=0;case 3:if(!(q<R.length)){ht.next=24;break}if(Ye(ee=R[q])&&""!=ee){ht.next=7;break}return ht.abrupt("continue",21);case 7:if(te=this._dvsWrapper.getDataRootSync(ee)){ht.next=10;break}return ht.abrupt("continue",21);case 10:return ve=!1,te.customData&&!te.customData.resBlob&&(ve=!0),ht.next=14,Wa(j,te,ve);case 14:return Ge=(ve=ht.sent).filterBlob,delete ve.filterBlob,ht.next=19,B([{file:ve,iImageData:Ge}]);case 19:return ht.next=21,k.DataControl.removeData(ee);case 21:q++,ht.next=3;break;case 24:case"end":return ht.stop()}},x,this)}));return function(x){return E.apply(this,arguments)}}(),P.getFileName=function(){return this._backFileName},P.saveCurrentCropData=function(){var E=this.getViewerByUid(this._viewerId),x={};if(E)for(var R,k,j,B=E.getCurrentPageUids(),q=B.length,ee=0;ee<q;ee++)Ye(R=B[ee])&&""!=R&&(k=this._copyRefMap[R],j=null==(j=this._dvsWrapper)?void 0:j.getCustomDataSync(R),x[k]=j?{detectArea:j.detectArea,angle:j.angle,filterValue:j.filterValue}:{detectArea:null,angle:0,filterValue:"original"});return x},P.saveFromExternal=function(){var E=u(s().mark(function x(R){var k,j,B,q,ee,te,ve,Ge,ht,pt,vt;return s().wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:if(this.isDestroyed)return Tt.abrupt("return");Tt.next=2;break;case 2:k=this._dvs,j=this._dcs.getPreviousPageByPage(this),B=R.length-1;case 5:if(!(0<=B)){Tt.next=37;break}if(Ye(q=R[B])&&""!=q){Tt.next=9;break}return Tt.abrupt("continue",34);case 9:if(ee=!0,te=void 0,ve=null==(ve=this._dvsWrapper)?void 0:ve.getCustomDataSync(q)){Tt.next=13;break}return Tt.abrupt("continue",34);case 13:if(Ye(Ge=this._copyRefMap[q])&&""!=Ge&&(te=(te=this._backInfo.initDocumentData[Ge])||this._backInfo.origDocumentData[Ge])&&(this._dcs.filterApplyToAllValue?"original"!=this._dcs.filterApplyToAllValue||Ye(te.filterValue)&&"original"!=te.filterValue||nt(te.detectArea,ve.detectArea)&&te.angle==ve.angle&&(ee=!1):nt(te.detectArea,ve.detectArea)&&te.angle==ve.angle&&Cn(te.filterValue,ve.filterValue)&&(ee=!1)),!ee){Tt.next=34;break}if(ht=this._dvsWrapper.getDataRootSync(q)){Tt.next=19;break}return Tt.abrupt("continue",34);case 19:if(ht.customData&&ht.customData.oriBlob){Tt.next=22;break}return Tt.next=22,this.handlePageByUid(q,k);case 22:return Tt.next=24,Wa(this._dcs,ht,!0);case 24:if(vt=(pt=Tt.sent).filterBlob,delete pt.filterBlob,j&&j instanceof qr)return Tt.next=30,j.updateUid(Ge,vt,pt);Tt.next=32;break;case 30:Tt.next=34;break;case 32:return Tt.next=34,$e(vt,k,Ge,!0,pt);case 34:B--,Tt.next=5;break;case 37:case"end":return Tt.stop()}},x,this)}));return function(x){return E.apply(this,arguments)}}(),P.clickBackButton=function(){var E=u(s().mark(function x(){var R,k,j,B,q,ee,te,ve,Ge,ht,pt,vt,Tt,dn;return s().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:if(this.isDestroyed)return Wt.abrupt("return");Wt.next=2;break;case 2:if(R=this._dcs,k=this.getCurrentIndex(),j=R.getPreviousPage(),B=this.ifOldDocumentDataChanged(),(Ge=this.options.documentEditorSettings.funcConfirmExit)&&Je(Ge))return ht="",j&&(ht=j.pageName),Wt.next=12,Ge(B,ht);Wt.next=19;break;case 12:if(0==(q=Wt.sent))return Wt.abrupt("return");Wt.next=17;break;case 17:if(1!=q&&2!=q)return Wt.abrupt("return");Wt.next=19;break;case 19:if(void 0===q&&(q=j?2:1),!j){Wt.next=23;break}Wt.next=29;break;case 23:if(1!=q){Wt.next=26;break}Wt.next=29;break;case 26:if(2==q)return this.clickSaveButton(),Wt.abrupt("return");Wt.next=29;break;case 29:if(ee=!1,Wt.prev=30,ve=R.getCurrentPage(),lt(R),j&&j instanceof qr)return j.exitReuseMode(),2==q?(te=this.saveViewerAngle(),this.resetViewerAngleByIndexes(te),this.saveViewerCustomData()):1==q&&(this.restoreViewerCustomData(),this.resetViewerAngle()),B&&(Ge=j.getViewerByUid(j.getViewerUid()),ht=Ge.getCurrentPageUids(),te=j.resetCropInfoByUids(ht),j.resetViewerAngleByIndexes(te)),this._bSyncViewerDataFromBackupData=!0,this._preEditPageCropData=this.saveCurrentCropData(),j.gotoViewPage(k),Wt.next=42,R.navigateBack(1,!1);Wt.next=47;break;case 42:pt=Wt.sent,R.showLoading("close edit page"),1==pt.length?j.setNextViewerPage(pt.pop()):R.destroyRemovedPages(),Wt.next=88;break;case 47:if(j&&j instanceof pr)return 2==q?(te=this.saveViewerAngle(),this.resetViewerAngleByIndexes(te),this.saveViewerCustomData()):1==q&&(this.restoreViewerCustomData(),this.resetViewerAngle()),Wt.next=51,j.refreshPreviewWhenChanged();Wt.next=78;break;case 51:return Wt.next=53,R.navigateBack(1,!1);case 53:if(pt=Wt.sent,R.showLoading("close edit page"),1==pt.length?j.setNextViewerPage(pt.pop()):R.destroyRemovedPages(),"playing"!=(vt=R.getStatus())){Wt.next=60;break}Wt.next=74;break;case 60:if("paused"!=vt){Wt.next=64;break}R.resume(),Wt.next=74;break;case 64:if(Tt=(Tt=j.element).children[1],(dn=this.options.scannerViewer)&&dn.resolution&&dn.resolution.defaultValue)return Wt.next=70,R.play(Tt,dn.resolution.defaultValue.width,dn.resolution.defaultValue.height,dn.fullScreen);Wt.next=72;break;case 70:Wt.next=74;break;case 72:return Wt.next=74,R.play(Tt);case 74:R.emit("resetResolution"),R.emit("focusPage"),Wt.next=88;break;case 78:if(R.showLoading("close edit page"),j)return Wt.next=82,R.navigateBack();Wt.next=85;break;case 82:ve.hide(),Wt.next=88;break;case 85:ee=!0,ve.hide(),R.exit(this._dvs);case 88:return Wt.prev=88,R.hideLoading("close edit page"),Wt.finish(88);case 91:if(ee&&R.closeAllPages)return Wt.next=94,R.closeAllPages();Wt.next=94;break;case 94:case"end":return Wt.stop()}},x,this,[[30,,88,91]])}));return function(){return E.apply(this,arguments)}}(),P.insertImgByBlobItem=function(){var E=u(s().mark(function x(R,k){var j,B,q,ee,te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(ee=(null==(ee=k.config.documentEditorSettings)?void 0:ee.filter)||{},te={detectArea:te=R.detectArea,oriBlob:j=R.oriBlob,resBlob:B=R.filterBlob||R.resBlob||j,filterValue:ee=ee.defaultValue,angle:0},j={oriData:B.imageData,metadata:Nt(B),customData:te},ee=te=void 0===(B=(ee=k.config.scannerViewer||{}).maxDocuments)?20:B,B=this.getViewerByUid(this._viewerId),q="before"===(void 0===(q=(q=(null==(q=k.config.documentEditorSettings)?void 0:q.insert)||{}).position)?"before":q)?B.getCurrentIndex():B.getCurrentIndex()+1,!this.options.fromInternal||B.currentPageCount+1<=ee&&B.currentPageCount+1<=te)return ee=B.currentPageCount,(q<0||ee-1<q)&&(q=-1),this._bInsertingImage=!0,te=this._dcs.getInsertPhotoCallback(),ve.next=17,te(this._initFileName,j,q);ve.next=19;break;case 17:ve.next=20;break;case 19:k.emit("video-error",be_MAX_IMAGES_IN_BUFFER_LIMIT);case 20:return ve.abrupt("return",q);case 21:case"end":return ve.stop()}},x,this)}));return function(x,R){return E.apply(this,arguments)}}(),P.insertFile=function(){var E=u(s().mark(function x(R){var k,j,B,q,ee;return s().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(k=this._dcs,this.isDestroyed)return te.abrupt("return");te.next=3;break;case 3:if(te.prev=3,j=q=void 0===(q=(q=k.config.scannerViewer||{}).maxDocuments)?20:q,B=this.getViewerByUid(this._viewerId),!this.options.fromInternal||B.currentPageCount+1<=j&&B.currentPageCount+1<=q)return te.next=10,le(R);te.next=29;break;case 10:return j=te.sent,te.next=13,ae(j);case 13:return B=te.sent,te.next=16,k.packageBlobItemFromIImageData(B,!0,!0,!0);case 16:return q=te.sent,te.next=19,this.insertImgByBlobItem(q,k);case 19:if(0<=(this._iInsertingIndex=ee=te.sent))return te.next=24,this.handlePageByIndex(ee);te.next=24;break;case 24:return te.next=26,k.navigateBack();case 26:te.next=32;break;case 29:return k.emit("video-error",be_MAX_IMAGES_IN_BUFFER_LIMIT),te.next=32,k.navigateBack();case 32:return te.prev=32,k.stop(),te.finish(32);case 35:case"end":return te.stop()}},x,this,[[3,,32,35]])}));return function(x){return E.apply(this,arguments)}}(),P.isInsertingImage=function(){return this._bInsertingImage},P.setInsertingImageIndex=function(E){this._iInsertingIndex=E,this._bInsertingImage=!0},P.clearInserting=function(){var E=u(s().mark(function x(){var R;return s().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(this._bInsertingImage=!1,0<=(R=(R=this._iInsertingIndex)<0&&0<this.getImageCount()?0:R))return this.setCurImageData(null),this.SetFilterDirty(!0),k.next=8,this.handlePageByIndex(R);k.next=8;break;case 8:this._iInsertingIndex=-1;case 9:case"end":return k.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P.applyChanged=function(){var E=this.getViewerByUid(this._viewerId);if(E)for(var x=E.getCurrentPageUids(),R=0;R<x.length;R++){var k,j,B,q=x[R];!Ye(q)||""==q||(B=null==(B=this._dvsWrapper)?void 0:B.getCustomDataSync(q))&&(k=B.detectArea,j=B.angle,(q=this._copyRefMap[q])&&(B=B.filterValue,this._backInfo.origDocumentData[q]&&(B=this._backInfo.origDocumentData[q].filterValue),this._backInfo.origDocumentData[q]={detectArea:k,angle:void 0===j?0:j,filterValue:B}))}},P.appendFilterDropdownImages=function(){var E=u(s().mark(function x(R){var k,j,B,q,ee,te,ve,Ge,ht,pt,vt,Tt,dn,Wt,Tn,xn,_n,Nn,zn,Pn;return s().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:if(k=this._dcs,yn.prev=1,0<=(B=R.getCurrentIndex()))return q=R.getUidByIndex(B),te=this.GetFilterDirty(),yn.next=8,this.getCurImageData(q);yn.next=10;break;case 8:ee=yn.sent,te||this.ClearFilterDirty();case 10:if(!q||!ee){yn.next=48;break}ve=R.getRotateAngle(B),zn=this._dvsWrapper.getCustomDataSync(q),ht=null==(ht=k.config.documentEditorSettings)?void 0:ht.filter,Pn=void 0===(Pn=ht.defaultValue)?"original":Pn,Tn=ht.applyToAll,ht=ht.valueList,Ge=(Ge=Tn&&Tn.enableApplyToAll&&Ye(k.filterApplyToAllValue)&&""!=k.filterApplyToAllValue?k.filterApplyToAllValue:Ge)||(Ge=zn.filterValue)||Pn,yn.next=19;var Wn=ee;return f.ImageProcWrapper.createImage({source:Wn,output:{orgImage:!1,previewImage:{quality:85,width:200,height:200,returnType:f.Enum_ImageType.IT_BGRA,returnBlob:!1,nInterplationMethod:5}}}).then(function(Er){return Wn.imageData=Er.src,Te(Er.preview),Er.preview});case 19:if(pt=yn.sent)return yn.next=23,Ze(pt);yn.next=48;break;case 23:vt=yn.sent,dn=!(Tt=[]),Wt=0;case 27:if(!(Wt<ht.length)){yn.next=43;break}if(_n=(Tn=ht[Wt]).label,Nn=void 0,"original"!==(xn=Tn.value)){yn.next=35;break}Nn=vt,dn=!0,yn.next=39;break;case 35:return yn.next=37,k.filterHandlerByIImageData(pt,vt,xn);case 37:Nn=zn=yn.sent;case 39:Nn&&(Pn=ke.createURL(Nn),Tt.push({value:xn,url:Pn,label:_n}));case 40:Wt++,yn.next=27;break;case 43:pt=null,dn||Tt.unshift({value:"original",url:ke.createURL(vt),label:"Original"}),ht.some(function(Er){return Er.value===Ge})||(Ge="original"),0<Tt.length&&(j=document.createDocumentFragment()),Tt.forEach(function(Er,Fi){var uo=document.createElement("li");uo.innerHTML='<img class="dynamsoft-camera-preFilter" src="'+Er.url+'" style="transform:rotate('+ve+'deg)"><p>'+Er.label+"</p>",j.appendChild(uo),uo.dataset.filterValue=Er.value,Er.value===Ge&&uo.classList.add(de.filterSelectedItem)});case 48:return yn.prev=48,yn.finish(48);case 50:return yn.abrupt("return",j);case 51:case"end":return yn.stop()}},x,this,[[1,,48,50]])}));return function(x){return E.apply(this,arguments)}}(),P.initOrigDataByUid=function(){var E=u(s().mark(function x(R){return s().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,ne.prototype.initOrigDataByUid.call(this,R);case 2:case"end":return k.stop()}},x,this)}));return function(x){return E.apply(this,arguments)}}(),P.restoreViewerCurrentCustomData=function(){var E=[],x=this.getViewerByUid(this._viewerId),R=x.getCurrentIndex();if(0<=R){var k=x.getCurrentPageUids()[R];if(!Ye(B=this._copyRefMap[k])||""==B)return;var B,j=null==(j=this._dvsWrapper)?void 0:j.getCustomDataSync(B);(B=this.restoreOneViewerCustomData(x,k,R,j)).changed&&(this.setCurImageData(null),B.needReset&&E.push(R))}return E},P.saveViewerAngle=function(){var E=[],x=this.getViewerByUid(this._viewerId);if(x)for(var R,k=x.getCurrentPageUids(),j=k.length,B=x.getCurrentIndex(),q=0;q<j;q++)Ye(R=k[q])&&""!=R&&this.saveViewerOneAngle(x,q==B,q,R)&&E.push(q);return E},P.resetViewerAngle=function(){var E=[],x=this.getViewerByUid(this._viewerId);if(x)for(var R=x.getCurrentPageUids().length,k=0;k<R;k++)0!==x.getRotateAngle(k)&&E.push(k);this.resetViewerAngleByIndexes(E)},P.saveViewerOneAngle=function(B,x,q,k){var j=!1;return B=B.getRotateAngle(q),(q=null==(q=this._dvsWrapper)?void 0:q.getCustomDataSync(k))&&0!=B&&(q.angle=pe(q.angle+B),q.resBlob&&delete q.resBlob,x&&this.setCurImageData(null),j=!0),j},J}(fn);function Bi(){var ne,P,J=(P=void 0===(P=this.options.documentEditorSettings)?{}:P).bodyStyle;this.setDefaultBackgroundColors(ne=void 0===(ne=P.headerStyle)?{}:ne,void 0===J?{}:J,P=void 0===(P=P.footerStyle)?{}:P),this.template=['<header style="background:'+ne.background+'" class="headerButtons"></header>','<div class="'+de.cvsContainer+'" style="width:100%;height:100%"></div>','<footer style="background:'+P.background+'" class="footerButtons"></footer>'].join(""),this.className=de.documentEditPage,this.createEl(),_(this,yi)[yi]()}function To(){return mr.apply(this,arguments)}function mr(){return(mr=u(s().mark(function ne(){var J,P,E,x,R,k,j,B=this;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(this.element){q.next=2;break}return q.abrupt("return");case 2:x=void 0===(x=(void 0===(x=(x=this.options).documentEditorSettings)?{}:x).bodyStyle)?{}:x,J=this._dvs,k=null==(k=this.element)?void 0:k.querySelector(".dvs-cameraPager"),j=k?.querySelector(".dvs-previousPage"),P=k?.querySelector(".dvs-nextPage"),(E=this.getViewerByUid(this._viewerId)).canvasBackground=x.background,E.bindView(null==(x=this.element)?void 0:x.querySelector("."+de.cvsContainer)),x=E.getCurrentTab(),j&&P||(k.innerHTML='<div class="dvs-previousPage '+de.font+" "+de.iconArrow+" "+de.headerfont+" "+de.disable+'"></div>\n      <p><span class="dvs-curPage">0</span>/<span class="dvs-totalPage">0</span></p>\n      <div class="dvs-nextPage '+de.font+" "+de.iconArrow+" "+de.headerfont+" "+de.disable+'"></div>',j=k?.querySelector(".dvs-previousPage"),P=k?.querySelector(".dvs-nextPage"),x&&0<=x.total&&(j.onclick=u(s().mark(function ee(){var te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(-1!=(te=E.getPrePageIndex()))return te=E.getUidByIndex(te),ve.next=5,B.handlePageByUid(te,J);ve.next=6;break;case 5:E.prevPage();case 6:case"end":return ve.stop()}},ee)})),P.onclick=u(s().mark(function ee(){var te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(-1!=(te=E.getNextPageIndex()))return te=E.getUidByIndex(te),ve.next=5,B.handlePageByUid(te,J);ve.next=6;break;case 5:E.nextPage();case 6:case"end":return ve.stop()}},ee)})),(R=this).viewerPagerEventId=E.on(U,function(ee){R&&ee&&(R.changePageNumber(ee.cur,ee.total),R.changeStatus(ee.cur,ee.total))}))),x&&0<=(k=x.total)&&0<=(j=E.getCurrentIndex())&&(this.changeStatus(j,k),this.changePageNumber(j,k)),null!=(P=E.ui)&&P._resizeViewer();case 16:case"end":return q.stop()}},ne,this)}))).apply(this,arguments)}function Wa(){return ie.apply(this,arguments)}function ie(){return(ie=u(s().mark(function ne(J,P,E){var x,R,k,j,B,q,ee,te,ve,Ge,ht,pt,vt;return s().wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:if(x=(q=P.customData).oriBlob,R=q.detectArea,j=q.filterValue,k=q.angle,q=void 0===(q=q.bitDepth)?0:q,ve=E,k=pe(k=void 0===k?0:k),B=K(x),J.filterApplyToAllValue&&j&&j!=J.filterApplyToAllValue&&(j=J.filterApplyToAllValue,ve=!0),!ve&&R&&j&&0==k)return(ve=P.metadata?Pt(P.metadata):{}).imageData=P.oriData,0<q&&(ve.imageBitDepth=q),J.emit("resetResolution"),Tt.abrupt("return",{filterBlob:ve,detectArea:R,oriBlob:B,angle:0,filterValue:j});Tt.next=14;break;case 14:if(R)return Tt.next=17,ae(x);Tt.next=32;break;case 17:return q=Tt.sent,Tt.next=20,we(q,k,R);case 20:return ee=Tt.sent,te=bt(J,j),Tt.next=24,Ze(ee);case 24:return ve=Tt.sent,Tt.next=27,J.filterHandlerByIImageData(ee,ve,te);case 27:return ht=Tt.sent,J.emit("resetResolution"),Tt.abrupt("return",{filterBlob:ht,detectArea:R,oriBlob:B,angle:k,filterValue:te});case 32:return Ge=bt(J,j),Tt.next=35,ae(x,k);case 35:return ht=Tt.sent,Tt.next=38,J.packageBlobItemFromIImageData(ht,!0,!0,!1,Ge);case 38:return pt=(vt=Tt.sent).detectArea,vt=vt.filterBlob,J.emit("resetResolution"),Tt.abrupt("return",{filterBlob:vt,detectArea:pt,oriBlob:B,angle:k,filterValue:Ge});case 42:case"end":return Tt.stop()}},ne)}))).apply(this,arguments)}var me=function(){function ne(P){var E=this;this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.ctrlRadius=4,this.sensorRadius=4,this.defaultLineColor="rgba(0,0,0,1)",this.defaultFirstPointColor="rgba(255,0,0,1)",this.invalidLineColor="rgba(255,0,0,1)",this.invalidFirstPointColor="rgba(0,0,0,1)",this.lineColor="rgba(0,0,0,1)",this.firstPointColor="rgba(0,0,0,1)",this.pointFillColor="rgba(255,255,255,0)",this.lineWidth=1,this.dashLine=[4,2],this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.imgWidth=0,this.imgHeight=0,this.leftEdge=0,this.topEdge=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.dpr=1,Object.keys(P).forEach(function(x){E[x]=P[x]}),this.resetBox()}var J=ne.prototype;return J.getRect=function(){var P=(R=this._getMaxPoint()).minX,E=R.maxX,x=R.minY,R=R.maxY;return{x:Math.floor(P),y:Math.floor(x),width:Math.floor(E-P),height:Math.floor(R-x)}},J.resetBox=function(){this.midpoints=oe(this.vertexes),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=ge(this.vertexes)},J._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},J.checkPointPosition=function(P){var E=(k=this._getMaxPoint()).minX,x=k.maxX,R=k.minY,k=k.maxY,j=this.probePoints[2*P],B=this.probePoints[2*P+1];return P<4?j===x&&B===k?"se":j===x&&B===R?"ne":j===E&&B===R?"nw":j===E&&B===k?"sw":null:j===x?"e":B===k?"s":j===E?"w":B===R?"n":null},J.onStartHandler=function(P,E,x){var R=this.isBoxSelected(P,E);null!==(R=void 0!==x?x:R)&&(this._startX=P,this._startY=E,this._lastX=P,this._lastY=E,-1===R?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=R,this.isMoveBox=!1),"free"===this.mode&&3<R&&(this.k1=this.slopeRatio[(1+(x=R-4))%4],this.b1=this.probePoints[(2*x+3)%8]-this.k1*this.probePoints[(2*x+2)%8],this.k2=this.slopeRatio[(3+x)%4],this.b2=this.probePoints[(2*x+1)%8]-this.k2*this.probePoints[(2*x+0)%8]))},J.onMoveHandler=function(P,E,x){if(this.isPointSelected||this.isMoveBox){var R=this.probePoints.slice();if(this.isPointSelected){var k=this.activeProbePoint;void 0!==x&&(k=x),"normal"===this.mode?R=this._movePointNormal(R,k,P,E):(R=this._movePointFree(R,k,P,E),this.slopeRatio=ge(this.probePoints).slice(0,4)),this.probePoints=R.slice(),this._checkRectConvexity(this.probePoints)?(this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor):(this.lineColor=this.invalidLineColor,this.firstPointColor=this.invalidFirstPointColor)}else if(this.isMoveBox){if(k=E-this._lastY,0==(x=P-this._lastX)&&0==k)return;R=this._moveBox(R,x,k),this.probePoints=R.slice()}x=oe(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(x),this.midpoints=x,this._lastX=P,this._lastY=E}},J.onEndHandler=function(){this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor;var P,E=this._startX,x=this._startY,R=(this._startX=0,this._startY=0,this._lastX),k=this._lastY;(this.isPointSelected||this.isMoveBox)&&(this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null,P=this._checkRectConvexity(this.probePoints),(E!==R||x!==k)&&P||(this.probePoints=this.vertexes.slice().concat(this.midpoints)),this.vertexes=this.probePoints.slice(0,8),this.midpoints=oe(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(this.midpoints),this.slopeRatio=ge(this.probePoints).slice(0,4))},J._checkEdge=function(P,E){return 0<=P&&P<=this.width&&0<=E&&E<this.height},J._movePointNormal=function(P,E,x,R){x=Math.max(this.leftEdge,Math.min(this.width,x)),R=Math.max(this.topEdge,Math.min(this.height,R));var k=0,j=0;if(this.keepAspectRatio){var ve=(q=this._getMaxPoint()).minX,te=q.maxX,B=q.minY,q=q.maxY,ee=this.checkPointPosition(E);if(0==(te=(te-ve)/(q-B))||te===1/0||te===-1/0||Number.isNaN(te)?te=this._lastWhr:this._lastWhr=te,j=k=0,ve="width",E<4){if(j=R-P[2*E+1],0==(k=x-P[2*E])||0===j)return P;ve="width"}else if(q=E-4,"e"===ee?(E=(1+q)%4,ve="width"):"s"===ee?(E=q,ve="height"):"w"===ee?(E=q,ve="width"):"n"===ee&&(E=(1+q)%4,ve="height"),j=R-P[2*q+1],0==(k=x-P[2*q])||0===j)return P;"height"===ve?(k=j*te,"ne"!==ee&&"sw"!==ee&&"n"!==ee&&"w"!==ee||(k=-k)):(j=k/te,"ne"!==ee&&"sw"!==ee&&"n"!==ee&&"w"!==ee||(j=-j)),q=P[2*E+1]+j,(B=P[2*E]+k)<0?(k=0-P[2*E],j=0):B>this.width?(k=this.width-P[2*E],j=0):q<0?(j=0-P[2*E+1],k=0):q>this.height&&(j=this.height-P[2*E+1],k=0),P[2*E]+=k,P[2*E+1]+=j,ve=(E+1)%4,te=(E+3)%4,E%2?(P[2*ve]+=k,P[2*te+1]+=j):(P[2*ve+1]+=j,P[2*te]+=k)}else if(E<4){if(j=R-P[2*E+1],0==(k=x-P[2*E])&&0===j)return P;P[2*E]=x,P[2*E+1]=R,ee=(E+1)%4,B=(E+3)%4,E%2?(P[2*ee]=x,P[2*B+1]=R):(P[2*ee+1]=R,P[2*B]=x)}else 0===(ve=this.slopeRatio[(q=E-4)%4])?(P[(2*q+3)%8]=R,P[(2*q+1)%8]=R):ve!==1/0&&ve!==-1/0||(P[(2*q+2)%8]=x,P[(2*q+0)%8]=x);return P},J._movePointFree=function(P,E,x,R){x=Math.max(this.leftEdge,Math.min(this.width,x)),R=Math.max(this.topEdge,Math.min(this.height,R));var k=P.slice();if(E<4){var B=R-P[2*E+1];if(0==(j=x-P[2*E])&&0==B)return P;P[2*E]=x,P[2*E+1]=R}else{var j,q=-(E=R-(B=this.slopeRatio[(j=E-4)%4])*x)/B,ee=E,te=P[(2*j+9)%8]-B*P[(2*j+8)%8],ve=-te/B,Ge=this.k1,ht=this.b1,pt=this.k2,vt=this.b2;0===B?(P[(2*j+3)%8]=R,Ge!==1/0&&Ge!==-1/0&&(P[(2*j+2)%8]=(R-ht)/Ge),P[(2*j+1)%8]=R,pt!==1/0&&pt!==-1/0&&(P[(2*j+0)%8]=(R-vt)/pt)):B===1/0||B===-1/0?(P[(2*j+2)%8]=x,P[(2*j+3)%8]=Ge*x+ht,P[(2*j+0)%8]=x,P[(2*j+1)%8]=pt*x+vt):(0===Ge?P[(2*j+2)%8]+=q-ve:Ge===1/0||Ge===-1/0?P[(2*j+3)%8]+=ee-te:(P[(2*j+2)%8]=(ht-E)/(B-Ge),P[(2*j+3)%8]=(B*ht-Ge*E)/(B-Ge)),0===pt?P[(2*j+0)%8]+=q-ve:pt===1/0||pt===-1/0?P[(2*j+1)%8]+=ee-te:(P[(2*j+0)%8]=(vt-E)/(B-pt),P[(2*j+1)%8]=(B*vt-pt*E)/(B-pt)));for(var Tt=0;Tt<4;Tt++){var dn=P[2*Tt],Wt=P[2*Tt+1];if(dn<this.leftEdge-.5||dn>this.width+.5||Wt<this.topEdge-.5||Wt>this.height+.5)return k}}return P},J._moveBox=function(P,E,x){if("normal"===this.mode){var R=Math.min(P[0],P[2],P[4],P[6]),k=Math.max(P[0],P[2],P[4],P[6]),j=Math.min(P[1],P[3],P[5],P[7]),B=Math.max(P[1],P[3],P[5],P[7]);k+(E=R+E<0?-R:E)>this.width&&(E=this.width-k),B+(x=j+x<0?-j:x)>this.height&&(x=this.height-B);for(var q=0;q<4;q++)P[2*q]+=E,P[2*q+1]+=x}return P},J._isPointOnBox=function(P,E){var x,R,k,j;return"normal"===this.mode&&(x=(j=this._getMaxPoint()).minX,R=j.maxX,k=j.minY,j=j.maxY,x<=P&&P<=R&&k<=E&&E<=j)},J.isBoxSelected=function(R,E){var x=this._isPointOnBox(R,E);return null!==(R=this.isCtrlPointSelected(R,E))?R:x?-1:null},J.isCtrlPointSelected=function(P,E){var x=this.sensorRadius,R=(B=this._getMaxPoint()).minX,k=B.maxX,j=B.minY,B=B.maxY,q=Math.min(Math.max(x,.1*(k-R)),3*x)*this.dpr,ee=Math.min(Math.max(x,.1*(B-j)),3*x)*this.dpr,te=8;"free"===this.mode&&(te=8);for(var ve=0;ve<te;ve++){var Ge=this.probePoints[2*ve],ht=this.probePoints[2*ve+1];if(P<=Ge+q&&Ge-q<=P&&E<=ht+ee&&ht-ee<=E)return ve}return null},J._checkRectConvexity=function(P){var E=(P[6]-P[0])*(P[3]-P[1])-(P[7]-P[1])*(P[2]-P[0]),x=(P[0]-P[2])*(P[5]-P[3])-(P[1]-P[3])*(P[4]-P[2]),R=(P[2]-P[4])*(P[7]-P[5])-(P[3]-P[5])*(P[6]-P[4]),k=(P[4]-P[6])*(P[1]-P[7])-(P[5]-P[7])*(P[0]-P[6]);if(E*x*R*k<0)return!1;var j=P.slice().concat(P.slice(0,2));if(this.slopeRatio.length)for(var B=0;B<2;B++)if(this.slopeRatio[B]!==this.slopeRatio[B+2]&&function(q,ee,te,ve){if(xn=q,_n=ee,Nn=te,zn=ve,Pn=Math.min,yn=Math.max,Pn(xn[0],_n[0])<=yn(Nn[0],zn[0])&&Pn(Nn[0],zn[0])<=yn(xn[0],_n[0])&&Pn(xn[1],_n[1])<=yn(Nn[1],zn[1])&&Pn(Nn[1],zn[1])<=yn(xn[1],_n[1])&&function(xn,_n,Nn,zn){var Pn,yn;if(!(0<=((Pn=xn[0]*(Nn[1]-_n[1])+_n[0]*(xn[1]-Nn[1])+Nn[0]*(_n[1]-xn[1]))^(yn=xn[0]*(zn[1]-_n[1])+_n[0]*(xn[1]-zn[1])+zn[0]*(_n[1]-xn[1])))&&0!==Pn&&0!==yn||(Pn=Nn[0]*(xn[1]-zn[1])+zn[0]*(Nn[1]-xn[1])+xn[0]*(zn[1]-Nn[1]),yn=Nn[0]*(_n[1]-zn[1])+zn[0]*(Nn[1]-_n[1])+_n[0]*(zn[1]-Nn[1]),0<=(Pn^yn)&&0!==Pn&&0!==yn)))return 1}(q,ee,te,ve)){var Ge,ht;if(ht=(q[1]-te[1])*(ee[0]-q[0])*(ve[0]-te[0])+te[0]*(ve[1]-te[1])*(ee[0]-q[0])-q[0]*(ee[1]-q[1])*(ve[0]-te[0]),0==(Ge=(ve[0]-te[0])*(q[1]-ee[1])-(ee[0]-q[0])*(te[1]-ve[1]))||0===ht){var pt=z(q,ee),vt=z(te,ve),Tt=pt[0],dn=pt[1],Wt=vt[0],Tn=vt[1];if(dn[0]===Wt[0]&&dn[1]===Wt[1])return dn;if(Tt[0]===Tn[0]&&Tt[1]===Tn[1])return Tt;if(dt(dn,vt)&&dt(Wt,pt))return[Wt,dn];if(dt(Tt,vt)&&dt(Tn,pt))return[Tt,Tn];if(dt(Tt,vt)&&dt(dn,vt))return[Tt,dn];if(dt(Wt,vt)&&dt(Tn,vt))return[Wt,Tn]}return[pt=ht/Ge,Tt=(ht=ee[1]*(q[0]-ee[0])*(ve[1]-te[1])+(ve[0]-ee[0])*(ve[1]-te[1])*(q[1]-ee[1])-ve[1]*(te[0]-ve[0])*(ee[1]-q[1]))/(Ge=(q[0]-ee[0])*(ve[1]-te[1])-(ee[1]-q[1])*(te[0]-ve[0]))]}var xn,_n,Nn,zn,Pn,yn;return!1}(j.slice(2*B,2*B+2),j.slice(2*B+2,2*B+4),j.slice(2*B+4,2*B+6),j.slice(2*B+6,2*B+8)))return!1;return 0<E*x*R*k},ne}();function oe(ne){for(var J=ne.slice(0,8).concat(ne[0],ne[1]),P=[],E=0;E<4;E++)P.push((J[2*E]+J[2*E+2])/2,(J[2*E+1]+J[2*E+3])/2);return P}function ge(ne){for(var J=[],E=ne.slice(0,8).concat(ne[0],ne[1]),x=0;x<4;x++)J.push(E[2*x+3]-E[2*x+1]==0&&E[2*x+2]-E[2*x]==0?0:E[2*x+2]-E[2*x]==0?1/0:(E[2*x+3]-E[2*x+1])/(E[2*x+2]-E[2*x]));return J}function z(ne,J){return ne[0]===J[0]?ne[1]<J[1]?[ne,J]:[J,ne]:ne[0]<J[0]?[ne,J]:[J,ne]}function dt(ne,J){return J[0][0]===J[1][0]?ne[1]>=J[0][1]&&ne[1]<=J[1][1]:ne[0]>=J[0][0]&&ne[0]<=J[1][0]}var ft=function(){function ne(P){this._cvs=null,this._cropBox=null,this._isCropping=!1,this._zoom=1,this._edgeMargin=10,this._cropStyle={cornerColor:"#FE8E14",lineColor:"#FE8E14",lineWidth:2,lineDash:"solid"},this._cvs=P,this._initEvent()}var J=ne.prototype;return J.getEdgeMargin=function(){return this._edgeMargin},J.dispose=function(){this._cvs.removeEventListener("touchstart",null),this._cvs.removeEventListener("touchmove",null),this._cvs.removeEventListener("touchend",null),this._cvs.removeEventListener("mousedown",null),document.removeEventListener("mousemove",null),document.removeEventListener("mouseup",null),this._cvs=null,this.onAreaChanged=null},J.setCropMode=function(P){this._isCropping=P},J.getCropMode=function(){return this._isCropping},J.clearCropBox=function(){this._cropBox=null,this._cvs.getContext("2d").clearRect(0,0,this._cvs.width,this._cvs.height)},J.setZoom=function(P){this._zoom=P},J.setCropArea=function(P,E){var x,R,k,j,B,q;P&&(x=E.relLeft,R=E.relTop,B=E.relWidth,this._limitArea=E,E=this._cvs,j=this._edgeMargin,q=B/=k=this._zoom,P=_e(Ee(P.map(function(ee,te){return te%2==0?ee/k+x+j:ee/k+R+j}))),this._cropBox=new me({vertexes:P,width:E.width-j-x,height:E.height-j-R,leftEdge:j+x,topEdge:j+R,imgWidth:B,imgHeight:q,mode:"free",dpr:window.devicePixelRatio}),this._isCropping&&this._drawCropArea())},J.getCropArea=function(){var P=this._cropBox,E=this._zoom,x=this._edgeMargin,R=this._limitArea;return P?_e(Ee(P.vertexes.map(function(k,j){return j%2==0?(k-R.relLeft-x)*E:(k-R.relTop-x)*E}))):[]},J.setCropStyle=function(P){xe(P,this._cropStyle),this._isCropping&&this._drawCropArea()},J.resize=function(P){var E,x,R=this._cropBox,k=this._edgeMargin;R&&(E=(x=this._cvs).width,x=x.height,R.width=E-k-P.relLeft,R.height=x-k-P.relTop,R.leftEdge=k+P.relLeft,R.topEdge=k+P.relTop,R.imgWidth=P.relWidth,R.imgHeight=P.relHeight)},J._initEvent=function(){var P=this,E=this._cvs;function x(j){this._cvsBoundingRect=this._cvs.getBoundingClientRect();var B=this._cropBox,q=this._cvsBoundingRect;B&&this._cropBox.onStartHandler(j.clientX-(B=q.left),j.clientY-(q=q.top))}function R(j){var B,q;this._cropBox&&this._cropBox.isPointSelected&&(B=(q=this._cvsBoundingRect).left,this._cropBox.onMoveHandler(j.clientX-B,j.clientY-(q=q.top)),this._drawCropArea())}function k(){var j;this._cropBox&&this._cropBox.isPointSelected&&(this._cropBox.onEndHandler(),this._drawCropArea(),null!=(j=this.onAreaChanged)&&j.call(this,this.getCropArea()))}E.addEventListener("touchstart",function(j){1<(j=j.touches).length||x.call(P,j[0])},{passive:!1}),E.addEventListener("mousedown",x.bind(this)),E.addEventListener("touchmove",function(j){var B=j.touches;1<B.length||P._cropBox&&P._cropBox.isPointSelected&&(R.call(P,B[0]),j.preventDefault())},{passive:!1}),document.addEventListener("mousemove",R.bind(this)),E.addEventListener("touchend",k.bind(this)),document.addEventListener("mouseup",k.bind(this))},J._drawCropArea=function(){var E=this._cvs,x=this._cropStyle;if(P=this._cropBox){var P,R=P.probePoints.slice(),k=((P=E.getContext("2d")).clearRect(0,0,E.width,E.height),x.lineWidth);if(k%2!=0)for(var j=0;j<R.length;j++)R[j]=Math.floor(R[j])-k/2;var ht=R.slice(0,8),B=(P.fillStyle="rgba(255,255,255,0)",P.fillRect(0,0,E.width,E.height),P),q=ht;E=x,B.save(),B.beginPath(),B.strokeStyle=E.lineColor,B.lineWidth=E.lineWidth,"dashed"===E.lineDash&&B.setLineDash([5,5]),B.moveTo(q[0],q[1]);for(var ee=0;ee<q.length;ee+=2){var te;B.lineTo.apply(B,te=[q[te=(ee+2)%8],q[1+te]])}B.closePath(),B.globalCompositeOperation="destination-out",B.fillStyle="rgba(0,0,0)",B.fill(),B.globalCompositeOperation="source-over",B.stroke(),B.closePath(),B.restore();var ve=P,Ge=R,pt=(ht=x,Math.floor(8));ve.save(),ve.strokeStyle=ht.cornerColor,ve.lineWidth=ht.lineWidth;for(var vt=0;vt<Ge.length;vt+=2){var Tt=[Ge[vt],Ge[vt+1]];ve.clearRect(Tt[0]-pt/2,Tt[1]-pt/2,pt,pt),ve.strokeRect(Tt[0]-pt/2,Tt[1]-pt/2,pt,pt)}ve.restore()}},J.setFullArea=function(){var P,E,x,R;this._cropBox&&(P=(R=this._cropBox).imgWidth,E=R.imgHeight,this._cropBox.vertexes=[x=R.leftEdge,R=R.topEdge,x+P,R,x+P,R+E,x,R+E],this._cropBox.resetBox(),this._isCropping&&this._drawCropArea())},J.checkFull=function(){if(!this._cropBox)return!1;var P=this.getInnerCropArea(),E=this._cropBox.getRect();return Qt(P,E.width,E.height)},J.getInnerCropArea=function(){var P=this._cropBox,E=this._edgeMargin,x=this._limitArea;return P?_e(Ee(P.vertexes.map(function(R,k){return k%2==0?R-x.relLeft-E:R-x.relTop-E}))):[]},ne}(),Et=function(){function ne(P,E){this._obElement=null,this._callback=null,this._unbindFn=null,this._callback=E,this._obElement=P,this._initObserver()}var J=ne.prototype;return J._initObserver=function(){var P,E,x=this._callback,R=this._obElement;void 0!==window.ResizeObserver?((P=new window.ResizeObserver(function(k){x((k=k[0]).contentRect)})).observe(R),this._unbindFn=function(){P.unobserve(R),P.disconnect(),P=null}):((E=document.createElement("iframe")).id="fm",E.style.cssText="width:100%;height:100%;z-index:-1;",E.onresize=function(){var k=R.getBoundingClientRect();x(k)},this._unbindFn=function(){E.remove(),E=null})},J.dispose=function(){this._unbindFn(),this._unbindFn=null,this._callback=null,this._obElement=null},J.getCallback=function(){return this._callback},ne}(),er=function(){function ne(){this._cropInfoObjs={}}var J=ne.prototype;return J.getCropInfo=function(P){return this._cropInfoObjs[P]||(this._cropInfoObjs[P]={}),this._cropInfoObjs[P]},J.destroy=function(){if(this._cropInfoObjs)for(var P in this._cropInfoObjs)delete this._cropInfoObjs[P];this._cropInfoObjs=null},ne}(),Mn=y("getCropInfo"),sr=y("initCanvas"),ti=y("initToggleButtonEvent"),Rr=y("getImageArea"),Co=y("initElement"),ur=y("initViewer"),qr=function(ne){function J(E,x,R){return E=ne.call(this,E,x,R)||this,Object.defineProperty(l(E),ur,{value:Go}),Object.defineProperty(l(E),Co,{value:aa}),Object.defineProperty(l(E),Rr,{value:po}),Object.defineProperty(l(E),ti,{value:ya}),Object.defineProperty(l(E),sr,{value:ii}),Object.defineProperty(l(E),Mn,{value:Eo}),E.viewerPagerEventId=null,E.cropMng=null,E._resizeMng=null,E._cropInfoHelper=null,E._renderEvents=[],E._imageArea=null,E._reused=!1,E._bk={_cropInfoHelper:null,_backInfo:null,_backFileName:null,_copyRefMap:null,_customData:null},E._renderType=1,E.pageName=fe,_(l(E),Co)[Co](),E}c(J,ne);var E,P=J.prototype;return P.isCropPage=function(){return!0},P.enterReuseMode=function(E,x){var R,k,j,B,q=this.getViewerByUid(this._viewerId),ee=q.getCurrentPageUids(),te=0;if(!this._reused){for(this._reused=!0,this._bk._cropInfoHelper=this._cropInfoHelper,this._bk._backInfo=this._backInfo,this._bk._backFileName=this._backFileName,this._bk._copyRefMap=this._copyRefMap,this._bk._customData={},te=0;te<ee.length;te++){var ve=ee[te],Ge=null==(Ge=this._dvsWrapper)?void 0:Ge.getCustomDataSync(ve);Ge&&(this._bk._customData[ve]={detectArea:Ge.detectArea,angle:Ge.angle})}this._cropInfoHelper=new er,this._copyRefMap={},this._backInfo={origApplyToAll:"",origDocumentData:{},initDocumentData:{}},this._backFileName=E.fileName}for(this.backupImageDataFromUids(x),te=0;te<ee.length;te++)this._copyRefMap[ve=ee[te]]=R=x[te],(k=null==(k=this._dvsWrapper)?void 0:k.getCustomDataSync(ve))&&(j=null==(j=this._dvsWrapper)?void 0:j.getCustomDataSync(R))&&(k.detectArea=j.detectArea,k.angle=j.angle,_(this,Mn)[Mn](ve).alreadyHandle=!1,q.resetByIndex(te,!1));E.nextButtonCss&&((null==(B=this.element)?void 0:B.querySelector("."+de.BUTTON_PREFIX+"save i")).className=E.nextButtonCss),this._editUid=null,this.render()},P.render=function(){var E,x=this.getViewerByUid(this._viewerId),R=x.getCurrentPageUids();R&&0<R.length&&(E=this,setTimeout(function(){var k;null!=x&&null!=(k=x.ui)&&k.styleChange(),E._renderType=1,x.rotate(0),E._resizeMng&&Je(k=E._resizeMng.getCallback())&&k(null)},0))},P.exitReuseMode=function(){var E;if(this._reused){var x=this.getViewerByUid(this._viewerId),R=x.getCurrentPageUids(),k=0;for(this._cropInfoHelper=this._bk._cropInfoHelper,this._backInfo=this._bk._backInfo,this._backFileName=this._bk._backFileName,this._copyRefMap=this._bk._copyRefMap,k=0;k<R.length;k++){var j,B=R[k],q=null==(q=this._dvsWrapper)?void 0:q.getCustomDataSync(B);q&&this._bk._customData&&(j=this._bk._customData[B])&&(q.detectArea=j.detectArea,q.angle=j.angle),_(this,Mn)[Mn](B).alreadyHandle=!1,x.resetByIndex(k,!1)}this._bk._cropInfoHelper=null,this._bk._backInfo=null,this._bk._backFileName=null,this._bk._copyRefMap=null,this._bk._customData=null,this._editUid=null,this._reused=!1}(null==(E=this.element)?void 0:E.querySelector("."+de.BUTTON_PREFIX+"save i")).className=de.font+" "+de.iconNext},P.getCurrentArea=function(){if(this.cropMng){var E=this.cropMng.getCropArea();if(E&&0<E.length)return E}return _(this,Mn)[Mn](this._editUid).savedArea},P.getEditUid=function(){return this._editUid},P.setPageFilename=function(){this._pageFileName=["__dynamsoft_crop_files",He(6)].join("_")},P.initImageCropInfoByUid=function(E){var x,R,k,j,B,q,ee;this.isDestroyed||Ye(E)&&""!=E&&(x=_(this,Mn)[Mn](E),(R=null==(R=this._dvsWrapper)?void 0:R.getCustomDataSync(E))&&(k=null==(k=this._dvsWrapper)?void 0:k.getMetaDataSync(E),E=!1,ee=q=0,R.detectArea?j=R.detectArea:(j=[],ee=k.height,R.detectArea=j=0<(q=k.width)&&0<ee?[0,0,q,0,q,ee,0,ee]:j),R.angle?B=pe(R.angle):R.angle=B=0,k&&(ee=k.height,0<(q=k.width)&&0<ee&&(x.w=q,x.h=ee),E=Qt(j,q,ee)),x.fullArea=E,x.savedArea=j,x.angle=B))},P._updateViewerSize=function(){var E,x,R;!this.isDestroyed&&this.element&&(x=null==(x=this.element)?void 0:x.querySelector("."+de.cvsContainer))&&(E=(x=x.getBoundingClientRect()).width,x=x.height,R=null==(R=this.element)?void 0:R.querySelector(".dvs-WebViewer"),E-=2*this.cropMng.getEdgeMargin(),x-=2*this.cropMng.getEdgeMargin(),R.width=E,R.height=x,R.style.cssText="width:"+E+"px;height:"+x+"px")},P._resetCropCanvas=function(){var E;(E=null==(E=this.element)?void 0:E.querySelector(".dvs-cropper"))&&(E.width=1,E.height=1,E.style.cssText="width:1px !important;height:1px !important"),(E=null==(E=this.element)?void 0:E.querySelector(".dvs-canvasEventLayer"))&&(E.width=1,E.height=1,E.style.cssText="width:1px !important;height:1px !important;background:rgba(255,255,255,0)")},P._listenResize=function(){var E=this,x=(x=null==(x=this.element)?void 0:x.querySelector(".dvs-WebViewer"))||this.element;this._resizeMng=new Et(x,function(){setTimeout(function(){var R,k=E._editUid;k&&(E._setDetectCanvasSize(k),E._updateViewerSize(),R=E._rotateSavedArea(k,0),E._drawCropArea(k,R),E._renderType=2)},0)})},P._drawFullArea=function(){this._setDetectCanvasSize(this._editUid);var E=_(this,Rr)[Rr]();if(!E)return this._renderType=1,void this.render();this.cropMng.resize(E),this.cropMng.setFullArea()},P.getAreaForResize=function(){var E=this.cropMng.getCropArea(),x=_(this,Mn)[Mn](this._editUid);return this.isAreaFulfilled(E)?[0,0,E=x.w,0,E,E=x.h,0,E]:x.savedArea},P.rotateLeft=function(){this._rotate(this._editUid,-90)},P.rotateRight=function(){this._rotate(this._editUid,90)},P._rotateSavedArea=function(E,ee,R){var k,j,B,q;return void 0===R&&(R=null),ee=pe(ee),this.cropMng&&(k=(j=(E=_(this,Mn)[Mn](E)).angle%180==0)?E.w:E.h,j=j?E.h:E.w,0==(q=R||this.cropMng.getCropArea()).length&&(q=E.savedArea),B=this.isAreaFulfilled(q),q=jo(q,ee,j,k),B?(E.fullArea=!0,0!=ee&&(E.savedArea=jo(E.savedArea,ee,j,k))):(E.fullArea=!1,E.savedArea=q)),q},P._rotate=function(E,x,R){if(void 0===R&&(R=-1),!(this.isDestroyed||this.getImageCount()<=0)){var k=this._dcs,j=this.getViewerByUid(this._viewerId),B=(x=pe(x),j.getCurrentPageUids());if(0!=B.length){var q=-1;try{if(k?.showLoading("rotate button init"),(q=(q=j&&E?j.getIndexByUid(E):q)<0?this.options.curIndex:q)<0||q>=B.length)return;var ee,te,ve,Ge=this._rotateSavedArea(E,x);0!=x&&(this._renderType=3,j.rotateMode=0,j.rotate(x,q),(te=null==(ee=this._dvsWrapper)?void 0:ee.getCustomDataSync(E))&&(-1==R&&(R=void 0===(ve=te.angle)?0:ve),te.angle=pe(R+x),te.resBlob&&delete te.resBlob,_(this,Mn)[Mn](E).angle=te.angle))}finally{k?.hideLoading("rotate button init")}this._drawCropArea(E,Ge)}}},P.getAngle=function(E){return qt((E=_(this,Mn)[Mn](E)).angle)?pe(E.angle):E.angle=0},P.hide=function(){ne.prototype.hide.call(this)},P.show=(E=u(s().mark(function x(){var R;return s().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(this.isDestroyed)return this.hide(),k.abrupt("return");k.next=3;break;case 3:return this._dcs.config.documentEditorSettings.visibility="visible",k.next=6,ne.prototype.show.call(this);case 6:this._updateViewerSize(),(R=this.getViewerByUid(this._viewerId))&&(R.getCurrentPageUids().length<=0&&this.disableCrop(),R.render());case 9:case"end":return k.stop()}},x,this)})),function(){return E.apply(this,arguments)}),P.destroy=function(){var E;this._reused?this.hide():(this.isDestroyed=!0,(E=this.getViewerByUid(this._viewerId))&&this.viewerPagerEventId&&E.offById(U,this.viewerPagerEventId),this.viewerPagerEventId=null,this.removePageFile(),null!=(E=this._resizeMng)&&E.dispose(),(this._resizeMng=null)!=(E=this.cropMng)&&E.dispose(),null!=(E=this.detectCvsEl)&&E.remove(),this.cropMng=null,this.detectCvsEl=null,this._renderEvents.slice(0),null!=(E=this._cropInfoHelper)&&E.destroy(),this._cropInfoHelper=null,ne.prototype.destroy.call(this),this.options=null)},P._calImageArea=function(R){var x=this.getViewerByUid(this._viewerId);if(!x||!(x=x.getCurrentTab())||!(x=x.getCurPage())||(x={x:x.style.left,y:x.style.top,width:x.style.width,height:x.style.height}).width<=1||x.height<=1)return null;R=this.getAngle(R)%180==0;var j=(B=_(this,Mn)[Mn](this._editUid)).w,B=B.h,q=R?x.width:x.height,ee=R?x.height:x.width,k=Math.min(q/j,ee/B);return j=Math.fround(k*j),B=Math.fround(k*B),q=Math.floor(.5*Math.abs(q-j)),ee=Math.floor(.5*Math.abs(ee-B)),this._imageArea={relLeft:x.x+(R?q:ee),relTop:x.y+(R?ee:q),relWidth:R?j:B,relHeight:R?B:j,zoom:1/k},this._imageArea},P._drawCropArea=function(E,x){if(!this.isDestroyed&&(this._setDetectCanvasSize(E),this.cropMng)){var R=_(this,Rr)[Rr]();if(!R)return this._renderType=1,void this.render();this.cropMng.resize(R),R=(R=x)?_e(R=Ee(R)):_(this,Mn)[Mn](E).savedArea,this.cropMng.setCropArea(R,_(this,Rr)[Rr]())}},P._setDetectCanvasSize=function(E){var x,R,k;this.element&&(x=(R=(null==(R=this.element)?void 0:R.querySelector("."+de.cvsContainer)).getBoundingClientRect()).width,R=R.height,(k=this.detectCvsEl)&&(k.width=x,k.height=R,k.style.cssText="left:0px;top:0px;width:"+x+"px;height:"+R+"px")),this.cropMng&&E&&(k=this._calImageArea(E))&&this.cropMng.setZoom(k.zoom)},P.getCropManage=function(){return this.cropMng},P.getDetectAreaForNotRotate=function(E){if(!this.cropMng)return[];var x=this.cropMng.getCropArea();if(!(k=_(this,Rr)[Rr]()))return this._renderType=1,this.render(),[];var R=k.relWidth,k=k.relHeight,j=this.cropMng._zoom;return _e(function(B,q,ee,te){var ve=[],Ge=pe(q);if(0==Ge)return B;for(var ht=0;ht<B.length;ht+=2){var pt=void 0,vt=B[ht],Tt=B[ht+1],dn=90==Ge?(pt=Tt,ee-vt):180==Ge?(pt=ee-vt,te-Tt):270==Ge?(pt=te-Tt,vt):(pt=vt,Tt);ve.push(pt,dn)}return ve}(x,this.getAngle(E),Math.fround(R*j),Math.fround(k*j)))},P.isAreaFulfilled=function(E){if(!(x=this.cropMng))return!1;if(this._editUid){if(!(k=this._calImageArea(this._editUid)))return!0;var R=k.relWidth,k=k.relHeight,x=x._zoom;return Qt(E,Math.fround(R*x),Math.fround(k*x))}return!0},P.toggleFullAreaButton=function(){var E=this.cropMng;if(!E)return!1;if(!(this.getImageCount()<=0)){var x=_(this,Mn)[Mn](this._editUid),j=(B=x.angle%180==0)?x.w:x.h,B=B?x.h:x.w,R=this._calImageArea(this._editUid);if(!R)return!1;j=Math.fround(+j),B=Math.fround(+B);var k,q=this.getCurrentArea(),ee=Qt(q,j,B);return ee?0===x.savedArea.length?(x.savedArea=[0,0,j-2,0,j-2,B-2,0,B-2],k=x.savedArea):Qt(k=_e(k=Ee(k=x.savedArea)),j,B)&&(x.savedArea=k=[0,0,j-2,0,j-2,B-2,0,B-2]):(x.savedArea=q,k=[0,0,j,0,j,B,0,B]),E.setCropArea(k.slice(),R),ee}},P.setZooming=function(){this._zooming=!1},P.getHeaderButtons=function(){var x,E=(x=this.options).headerButtons;return ne.prototype.createIconItems.call(this,void 0===E?{}:E,void 0===(x=(void 0===(x=x.documentEditorSettings)?{}:x).headerStyle)?{}:x,!0,null)},P.getFooterButtons=function(){var x,E=(x=this.options).footerButtons;return ne.prototype.createIconItems.call(this,void 0===E?{}:E,void 0===(x=(void 0===(x=x.documentEditorSettings)?{}:x).footerStyle)?{}:x,!1,null)},P.resetCropInfoByUids=function(E){var x=[],R=this.getViewerByUid(this._viewerId);if(E&&R)for(var k,j,B=R.getCurrentPageUids().length,q=0;q<E.length;q++)!Ye(j=E[q])||""==j||qt(k=R.getIndexByUid(j))&&0<=k&&k<B&&(this.initImageCropInfoByUid(j),_(this,Mn)[Mn](j).alreadyHandle=!1,x.push(k));return x},P._resetViewerWhenChanged=function(){var E=[],x=[],R=this.getViewerByUid(this._viewerId);if(R)for(var k=R.getCurrentPageUids(),j=0;j<k.length;j++){var B,q,ee,te=k[j];Ye(te)&&""!=te&&_(this,Mn)[Mn](te).alreadyHandle&&(this._editUid=null,(q=this._copyRefMap[te])&&(q=this._backInfo.origDocumentData[q])?(B=q.detectArea,q=q.angle,(ee=null==(ee=this._dvsWrapper)?void 0:ee.getCustomDataSync(te))&&nt(B,ee.detectArea)&&q==ee.angle||(x.push(te),E.push(j))):(x.push(te),E.push(j)))}return this.resetCropInfoByUids(x),E},P.clickBackButton=function(){var E=u(s().mark(function x(){var R,k,j,B,q,ee,te,ve,Ge,ht,pt;return s().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:if(this.isDestroyed)return vt.abrupt("return");vt.next=2;break;case 2:if((R=this._dcs).getCurrentPage(),k=R.getPreviousPage(),this.saveCurrentDataToUid(this._editUid),j=this.ifOldDocumentDataChanged(),(ee=(void 0===(ee=this.options.documentEditorSettings.cropViewer)?{}:ee).funcConfirmExit)&&Je(ee))return te="",k&&(te=k.pageName),vt.next=14,ee(j,te);vt.next=21;break;case 14:if(0==(B=vt.sent))return vt.abrupt("return");vt.next=19;break;case 19:if(1!=B&&2!=B)return vt.abrupt("return");vt.next=21;break;case 21:if(void 0===B&&(B=!k||k instanceof Mr?1:2),!k){vt.next=35;break}if(!(k instanceof Mr)){vt.next=33;break}if(1!=B){vt.next=27;break}vt.next=31;break;case 27:if(2==B)return vt.next=30,this.clickSaveButton();vt.next=31;break;case 30:return vt.abrupt("return");case 31:vt.next=33;break;case 33:vt.next=42;break;case 35:if(1!=B){vt.next=38;break}vt.next=42;break;case 38:if(2!=B){vt.next=42;break}R.showLoading("crop back button SaveAndExit");try{this.clickSaveButton(!0)}finally{R.hideLoading("crop back button SaveAndExit")}return vt.abrupt("return");case 42:if(q=!1,vt.prev=43,!k){vt.next=85;break}if(j&&(ee=this._resetViewerWhenChanged(),this.resetViewerAngleByIndexes(ee),2==B?this.saveViewerCustomData():1==B&&(ee=this.restoreViewerCustomData(),this.resetViewerAngleByIndexes(ee))),k instanceof Mr)return q=!0,R.showLoading("click crop back"),te=this.getCurrentIndex(),k.hide(),k.gotoViewPage(te),vt.next=54,R.navigateBack();vt.next=56;break;case 54:vt.next=85;break;case 56:if(k instanceof pr)return q=!0,vt.next=60,R.navigateBack(1,!1);vt.next=85;break;case 60:return ve=vt.sent,R.showLoading("click crop back"),vt.next=64,k.refreshPreviewWhenChanged();case 64:if(1==ve.length?k.setNextViewerPage(ve.pop()):R.destroyRemovedPages(),"playing"!=(Ge=R.getStatus())){vt.next=69;break}vt.next=84;break;case 69:if("paused"!=Ge){vt.next=73;break}R.isHidden()||R.resume(),vt.next=84;break;case 73:if(R.isHidden()){vt.next=84;break}if(ht=(ht=k.element).children[1],(pt=this.options.scannerViewer)&&pt.resolution&&pt.resolution.defaultValue)return vt.next=80,R.play(ht,pt.resolution.defaultValue.width,pt.resolution.defaultValue.height,pt.fullScreen);vt.next=82;break;case 80:vt.next=84;break;case 82:return vt.next=84,R.play(ht);case 84:R.isHidden()||R.emit("resetResolution");case 85:if(k){vt.next=93;break}if(R.showLoading("click crop back"),R.closeAllPages)return vt.next=90,R.closeAllPages();vt.next=90;break;case 90:R.exit(this._dvs),vt.next=96;break;case 93:if(q){vt.next=96;break}return vt.next=96,R.navigateBack();case 96:return vt.prev=96,k&&R.emit("focusPage"),R.hideLoading("click crop back"),vt.finish(96);case 100:case"end":return vt.stop()}},x,this,[[43,,96,100]])}));return function(){return E.apply(this,arguments)}}(),P.initPageOption=function(te,q){var R,k=this,j=(q=void 0===(ne.prototype.initPageOption.call(this,te,q),q=this.options.documentEditorSettings.cropViewer)?{}:q).rotateLeft,B=q.rotateRight,ee=(q=q.autoDetectBorder,{icon:de.font+" "+de.iconNext,className:de.BUTTON_PREFIX+"save",onclick:function(ve,Ge){(Ge=Ge.dcs.getCurrentPage())&&Ge.clickSaveButton()}});te.nextButtonCss&&(ee.icon=te.nextButtonCss),te={footerButtons:{rotateLeft:Ot(j,{icon:de.font+" "+de.iconRotateLeft,className:de.BUTTON_PREFIX+"rotateLeft",onclick:function(ve,Ge){(Ge=Ge.dcs.getCurrentPage())&&Ge.rotateLeft()}}),rotateRight:Ot(B,{icon:de.font+" "+de.iconRotateRight,className:de.BUTTON_PREFIX+"rotateRight",onclick:function(ve,Ge){(Ge=Ge.dcs.getCurrentPage())&&Ge.rotateRight()}}),toggleFullArea:Ot(q,{icon:de.font+" "+de.iconFullCrop,className:de.BUTTON_PREFIX+"toggleFullArea",onclick:function(ve,Ge){var ht=Ge.page;ht.getImageCount()<=0||(Ge=ht.toggleFullAreaButton(),(ht=ve?.currentTarget)&&ht.classList[Ge?"remove":"add"](de.footerSelected))}}),save:ee},headerButtons:{backBtn:{icon:de.font+" "+de.iconBack,className:de.BUTTON_PREFIX+"backBtn",onclick:(R=u(s().mark(function ve(Ge,ht){return s().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=3,k.clickBackButton();case 3:case"end":return pt.stop()}},ve)})),function(ve,Ge){return R.apply(this,arguments)})},pager:{className:"dvs-cameraPager"}}},this.options=xe(this.options,te)},P.changePageNumber=function(E,x){var R,k;this.element&&(R=null==(k=null==(k=this.element)?void 0:k.querySelector(".dvs-cameraPager"))?void 0:k.querySelector(".dvs-curPage"),k=k?.querySelector(".dvs-totalPage"),R.innerText=String(E+1),k.innerText=String(x))},P.changeStatus=function(E,x){var R,k;this.element&&(R=null==(k=null==(k=this.element)?void 0:k.querySelector(".dvs-cameraPager"))?void 0:k.querySelector(".dvs-previousPage"),k=k?.querySelector(".dvs-nextPage"),0<=E?(R.classList[E<=0?"add":"remove"](de.disable),k.classList[x===E+1?"add":"remove"](de.disable)):(R.classList.add(de.disable),k.classList.add(de.disable)))},P.handlePageByUid=function(){var E=u(s().mark(function x(R,k){var j,B,q,ee,te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(j=this._dcs,this.isDestroyed)return ve.abrupt("return");ve.next=3;break;case 3:if(this._editUid==R){ve.next=7;break}this._editUid=R,ve.next=8;break;case 7:return ve.abrupt("return");case 8:if(this.isDestroyed)return ve.abrupt("return");ve.next=10;break;case 10:return j.showLoading("handle crop page by uid"),ve.prev=11,this._renderType=1,ve.next=15,this.initOrigDataByUid(R);case 15:if(this.isDestroyed)return ve.abrupt("return");ve.next=17;break;case 17:this.initImageCropInfoByUid(R),B=0,te=_(this,Mn)[Mn](R),ee=te.fullArea,B=te.angle,te.alreadyHandle?null!=te.angle&&(B=te.angle,te.angle=0,q=this._rotateSavedArea(R,B,te.savedArea),te.angle=B,this._drawCropArea(R,q)):(0!=(B=B??this.getAngle(R))?(te.angle=0,q=this._rotateSavedArea(R,0,te.savedArea),this._drawCropArea(R,q),this._rotate(R,B,0)):(q=this._rotateSavedArea(R,0,te.savedArea),this._drawCropArea(R,q)),this._renderType=1,te.alreadyHandle=!0),(te=null==(B=this.element)?void 0:B.querySelector("."+de.BUTTON_PREFIX+"toggleFullArea"))&&te.classList[ee?"add":"remove"](de.footerSelected);case 25:return ve.prev=25,j.hideLoading("handle crop page by uid"),ve.finish(25);case 28:case"end":return ve.stop()}},x,this,[[11,,25,28]])}));return function(x,R){return E.apply(this,arguments)}}(),P.saveCurrentDataToUid=function(E){if(Ye(E)&&""!=E){this._dcs.showLoading("crop save current data");try{var x,R,k,j=this.getAngle(E),B=null==(x=this._dvsWrapper)?void 0:x.getCustomDataSync(E);B&&(R=!1,this.cropMng&&this.cropMng.getCropMode()&&(k=this.getDetectAreaForNotRotate(E),B.detectArea=k,R=!0),B.angle!=j&&(B.angle=j,R=!0),R&&B.resBlob&&delete B.resBlob)}finally{this._dcs.hideLoading("crop save current data")}}},P.clickSaveButton=function(){var E=u(s().mark(function x(R){var k,j,B,q,ee,te,ve,Ge,ht,pt,vt,Tt,dn,Wt,Tn,xn;return s().wrap(function(_n){for(;;)switch(_n.prev=_n.next){case 0:if(void 0===R&&(R=!1),this.isDestroyed)return _n.abrupt("return");_n.next=3;break;case 3:if((k=this._dcs).showLoading("crop save"),_n.prev=5,te=k.getPreviousPage(),this.saveCurrentDataToUid(this._editUid),j=!1,!te){_n.next=24;break}if(te instanceof Mr)return(ht=this.ifOldDocumentDataChanged())&&(te.setCurPageId(null),te.setCurImageData(null),te.SetFilterDirty(!0)),this.mergeChangedToSavedFileSync(),this._reused&&this.saveChangedTo_bk(),ht&&(this._editUid=null),this.options.fromInternal&&te.applyChanged(),j=!0,ht=this.getCurrentIndex(),te.hide(),te.gotoViewPage(ht),_n.next=23,k.navigateBack();_n.next=24;break;case 23:lt(k);case 24:if(j){_n.next=85;break}if(q=this.getDvs(),ee=this.getCurrentIndex(),te=this.getViewerByUid(this._viewerId),ve=te.getCurrentPageUids(),(Ge=this._nextViewerPage)&&Ge instanceof Mr)return _n.next=33,Ge.syncFiles(!1,ve);_n.next=53;break;case 33:if(B=Ge.regetViewerCustomDataFromSrc(),Ge.resetViewerAngleByIndexes(B),ht=Ge.getCurrentIndex(),ee!=ht&&(Ge.setCurImageData(null),Ge.SetFilterDirty(!0)),this.isNextEditPageCurrentDataDifferent(Ge)&&(B=Ge.restoreViewerCurrentCustomData(),Ge.resetViewerAngleByIndexes(B),Ge.setCurImageData(null),Ge.SetFilterDirty(!0)),Ge.gotoViewPage(ee),R)return _n.next=42,this._dcs.navigateToPage(Ge,!1);_n.next=48;break;case 42:return Ge.hide(),this.show(),_n.next=46,Ge.clickSaveButton();case 46:_n.next=50;break;case 48:return _n.next=50,this._dcs.navigateToPage(Ge);case 50:this._nextViewerPage=null,_n.next=83;break;case 53:if(pt={fileName:this._pageFileName,initFileName:this._initFileName,curIndex:ee,fromInternal:this.options.fromInternal,documentEditorSettings:this.options.documentEditorSettings},this.options.fromInternal){_n.next=70;break}vt={},Tt=0;case 57:if(!(Tt<ve.length)){_n.next=69;break}if(Ye(dn=ve[Tt])&&""!=dn){_n.next=61;break}return _n.abrupt("continue",66);case 61:if(Ye(Wt=this._copyRefMap[dn])&&""!=Wt){_n.next=64;break}return _n.abrupt("continue",66);case 64:vt[dn]=xe(xn=this._backInfo.initDocumentData[Wt],{});case 66:Tt++,_n.next=57;break;case 69:pt.initDocumentData=vt;case 70:if(Tn=new Mr(pt,q,k),R)return _n.next=74,k.navigateToPage(Tn,!1);_n.next=80;break;case 74:return Tn.hide(),this.show(),_n.next=78,Tn.clickSaveButton();case 78:_n.next=83;break;case 80:return Tn.gotoViewPage(ee),_n.next=83,k.navigateToPage(Tn);case 83:R||((xn=k.getPreviousPage())&&xn.hide(),B=this._resetViewerWhenChanged(),this.resetViewerAngleByIndexes(B)),j=!0;case 85:return _n.prev=85,k.hideLoading("crop save"),_n.finish(85);case 88:case"end":return _n.stop()}},x,this,[[5,,85,88]])}));return function(x){return E.apply(this,arguments)}}(),P.isNextEditPageCurrentDataDifferent=function(E){if(x=E.getCurrentEditUid()){var x=E.getRefUid(x,!1),R=E.getCurrentCustomData();if(R&&x){var k=null==(k=this._dvsWrapper)?void 0:k.getCustomDataSync(x);if(k)return E.compareOldValueChanged(k,R,null)}}return!0},P.mergeChangedToSavedFileSync=function(){for(var E=this.getViewerByUid(this._viewerId).getCurrentPageUids(),x=0;x<E.length;x++){var R,k,j=E[x],B=this._copyRefMap[j];!Ye(B)||""==B||(R=null==(R=this._dvsWrapper)?void 0:R.getCustomDataSync(j))&&(j=this._backInfo.origDocumentData[B],!(k=null==(k=this._dvsWrapper)?void 0:k.getCustomDataSync(B))||nt(k.detectArea,R.detectArea)&&k.angle==R.angle||(B=!1,nt(k.detectArea,R.detectArea)||(k.detectArea=R.detectArea,B=!0),k.angle!=R.angle&&(k.angle=R.angle,B=!0),B&&k.resBlob&&delete k.resBlob,j&&(B=!1,nt(j.detectArea,R.detectArea)||(j.detectArea=R.detectArea,B=!0),j.angle!=R.angle&&(j.angle=R.angle,B=!0),B&&j.resBlob&&delete j.resBlob)))}},P.compareOldValueChanged=function(E,x,R){if(!E||!x)return!0;if(void 0===E.detectArea){if(!Qt(x.detectArea,R.imageWidth,R=R.imageHeight))return!0}else if(!nt(E.detectArea,x.detectArea))return!0;if(void 0===E.angle){if(0!=x.angle)return!0}else if(E.angle!=x.angle)return!0;return!1},P.saveChangedTo_bk=function(){if(this._bk&&this._bk._customData){var E=this._cropInfoHelper;this._cropInfoHelper=this._bk._cropInfoHelper;for(var x=this.getViewerByUid(this._viewerId).getCurrentPageUids(),R=0;R<x.length;R++){var k,j,B=x[R],q=null==(q=this._dvsWrapper)?void 0:q.getCustomDataSync(B);q&&((k=this._bk._customData[B])&&(j=!1,nt(k.detectArea,q.detectArea)||(k.detectArea=q.detectArea,j=!0),k.angle!=q.angle&&(k.angle=q.angle,j=!0),j&&k.resBlob&&delete k.resBlob),this._cropInfoHelper&&this.initImageCropInfoByUid(B))}this._cropInfoHelper=E}},P.updateUid=function(){var E=u(s().mark(function x(R,k,j){var B,q;return s().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(this._reused)return ee.abrupt("return");ee.next=2;break;case 2:if(B=this._dvs,Ye(q=this._copyRefMap[R])&&""!=q){ee.next=6;break}return ee.abrupt("return");case 6:return ee.next=8,$e(k,B,q,!0,j);case 8:case"end":return ee.stop()}},x,this)}));return function(x,R,k){return E.apply(this,arguments)}}(),P.syncFileFromExternalEvent=function(){var E=u(s().mark(function x(R,k){return s().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(this.isDestroyed)return j.abrupt("return");j.next=2;break;case 2:if(this._reused)return j.next=5,this.syncFileForReusedFromExternalEvent(R,k);j.next=7;break;case 5:j.next=9;break;case 7:return j.next=9,ne.prototype.syncFileFromExternalEvent.call(this,R,k);case 9:this.getImageCount()<=0&&this.disableCrop();case 10:case"end":return j.stop()}},x,this)}));return function(x,R){return E.apply(this,arguments)}}(),P.syncFileForReusedFromExternalEvent=function(){var E=u(s().mark(function x(R,k){var j,B,q,ee,te,ve,Ge,ht;return s().wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:if(this._reused)return j=this._copyRefMap,B=this._backInfo,this._copyRefMap=this._bk._copyRefMap,this._backInfo=this._bk._backInfo,ee=this._fileWrapper.openFile(this._bk._backFileName),Tt.next=8,this.syncFiles(R,ee);Tt.next=19;break;case 8:for(this._copyRefMap=j,this._backInfo=B,this._bk._copyRefMap=this._copyRefMap,this._bk._backInfo=this._backInfo,q=this._fileWrapper.openFile(this._backFileName),this.backupNewImageDataFromUids(q),ee=this.getViewerByUid(this._viewerId),te=ee.getCurrentPageUids(),ve=te.length,ht=q.length,Ge=0;Ge<ve;Ge++)this._copyRefMap[te[Ge]]=Ge<ht?q[Ge]:void 0;case 19:case"end":return Tt.stop()}},x,this)}));return function(x,R){return E.apply(this,arguments)}}(),P.backupNewImageDataFromUids=function(E){for(var x,R,k=E.length,j=0;j<k;j++)Ye(x=E[j])&&""!=x&&!this._backInfo.origDocumentData[x]&&(R=null==(R=this._dvsWrapper)?void 0:R.getCustomDataSync(x),this._backInfo.origDocumentData[x]=R?{detectArea:R.detectArea,angle:R.angle,filterValue:R.filterValue}:{detectArea:null,angle:0,filterValue:this._dcs.curFilterValue})},P.disableCrop=function(){this.cropMng&&(this.cropMng.setCropMode(!1),this.cropMng.clearCropBox());var E=null==(E=this.element)?void 0:E.querySelector("."+de.BUTTON_PREFIX+"toggleFullArea");E&&E.classList.remove(de.footerSelected)},J}(fn);function Eo(ne){return this._cropInfoHelper||(this._cropInfoHelper=new er),this._cropInfoHelper.getCropInfo(ne)}function ii(){var ne=this,J=this.element;this.detectCvsEl=J?.querySelector("."+de.detectCvs),this.detectCvsEl&&(J=(void 0===(J=this.options.documentEditorSettings.cropViewer)?{}:J).polygonStyle,this.cropMng=new ft(this.detectCvsEl),J&&this.cropMng.setCropStyle({lineColor:J.stroke,lineWidth:parseInt(J.strokeWidth,10),cornerColor:J.stroke,lineDash:J.dash}),this.cropMng.onAreaChanged=function(P){for(var E in ne.isAreaFulfilled(P)||(_(ne,Mn)[Mn](ne._editUid).savedArea=P),ne._renderEvents)Je(ne._renderEvents[E])&&ne._renderEvents[E](P)})}function ya(){var ne=this;this._renderEvents.push(function(P){P=P||ne.getCurrentArea(),P=ne.isAreaFulfilled(P);var E=null==(E=ne.element)?void 0:E.querySelector("."+de.iconFullCrop);E&&E.parentElement&&E.parentElement.classList[P?"add":"remove"](de.footerSelected)})}function po(){return this._imageArea||(this._imageArea=this._calImageArea(this._editUid)),this._imageArea}function aa(){var ne,P,J=(P=void 0===(P=this.options.documentEditorSettings)?{}:P).bodyStyle;this.setDefaultBackgroundColors(ne=void 0===(ne=P.headerStyle)?{}:ne,void 0===J?{}:J,P=void 0===(P=P.footerStyle)?{}:P),this.template=['<header style="background:'+ne.background+'" class="headerButtons"></header>','<div class="'+de.cvsContainer+'"><canvas class="'+de.detectCvs+'"></canvas></div>','</div><footer style="background:'+P.background+'" class="footerButtons"></footer>'].join(""),this.className=de.cropPage,this.createEl(),this._listenResize(),_(this,ur)[ur](),_(this,sr)[sr](),_(this,ti)[ti]()}function Go(){return Mo.apply(this,arguments)}function Mo(){return(Mo=u(s().mark(function ne(){var J,P,E,x,R,k,j,B=this;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(this.element){q.next=2;break}return q.abrupt("return");case 2:E=void 0===(E=(void 0===(E=(E=this.options).documentEditorSettings)?{}:E).bodyStyle)?{}:E,J=this._dvs,R=null==(R=this.element)?void 0:R.querySelector(".dvs-cameraPager"),k=R?.querySelector(".dvs-previousPage"),j=R?.querySelector(".dvs-nextPage"),(P=this.getViewerByUid(this._viewerId)).canvasBackground=E.background,P.bindView(null==(E=this.element)?void 0:E.querySelector("."+de.cvsContainer)),P.on(W,function(){if(!B.isDestroyed)if(3==B._renderType)B._renderType=0;else{0!=B._renderType&&(B._renderType=0);var ee=P.getCurrentTab();if(ee&&(ee=ee.getCurPage())&&1<ee.style.width&&1<ee.style.height){B.cropMng.setCropMode(!0),B._resetCropCanvas();var te,ve=B._rotateSavedArea(B._editUid,0);for(te in B._drawCropArea(ee.uid,ve),B._renderEvents)Je(B._renderEvents[te])&&B._renderEvents[te]()}}}),this._resetCropCanvas(),E=P.getCurrentTab(),k&&j||(R.innerHTML='<div class="dvs-previousPage '+de.font+" "+de.iconArrow+" "+de.headerfont+" "+de.disable+'"></div>\n      <p><span class="dvs-curPage">0</span>/<span class="dvs-totalPage">0</span></p>\n      <div class="dvs-nextPage '+de.font+" "+de.iconArrow+" "+de.headerfont+" "+de.disable+'"></div>',k=R?.querySelector(".dvs-previousPage"),j=R?.querySelector(".dvs-nextPage"),E&&0<=E.total&&(k.onclick=u(s().mark(function ee(){var te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(B.isDestroyed)return ve.abrupt("return");ve.next=2;break;case 2:if(-1!=(te=P.getPrePageIndex()))return te=P.getUidByIndex(te),B.saveCurrentDataToUid(B._editUid),ve.next=8,B.handlePageByUid(te,J);ve.next=10;break;case 8:B.disableCrop(),P.prevPage();case 10:case"end":return ve.stop()}},ee)})),j.onclick=u(s().mark(function ee(){var te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(B.isDestroyed)return ve.abrupt("return");ve.next=2;break;case 2:if(-1!=(te=P.getNextPageIndex()))return te=P.getUidByIndex(te),B.saveCurrentDataToUid(B._editUid),ve.next=8,B.handlePageByUid(te,J);ve.next=10;break;case 8:B.disableCrop(),P.nextPage();case 10:case"end":return ve.stop()}},ee)})),(x=this).viewerPagerEventId=P.on(U,function(ee){B.isDestroyed||x&&ee&&(x.changePageNumber(ee.cur,ee.total),x.changeStatus(ee.cur,ee.total))}))),E&&0<=(R=E.total)&&0<=(k=P.getCurrentIndex())&&(this.changeStatus(k,R),this.changePageNumber(k,R),Ye(j=P.getUidByIndex(k))&&""!=j&&this._editUid&&this.saveCurrentDataToUid(this._editUid)),null!=(E=P.ui)&&E._resizeViewer();case 18:case"end":return q.stop()}},ne,this)}))).apply(this,arguments)}function jo(ne,J,P,E){var x=[],R=pe(J);if(0==R)return ut(ne);for(var k=0;k<ne.length;k+=2){var j=void 0,B=Math.fround(ne[k]),q=Math.fround(ne[k+1]),ee=90==R?(j=P-q,B):180==R?(j=E-B,P-q):270==R?(j=q,E-B):(j=B,q);x.push(j,ee)}return x}var ki=function(ne){function J(E,x,R){return(E=ne.call(this,E,x,R)||this).pageName="insertPage",E}c(J,ne);var E,P=J.prototype;return P.initFileName=function(E){E&&E.fileName&&(this.fileName=E.fileName)},P.attachDefaultEvent=function(){this.on("onSaveCapture",function(E,x,R,k,j){!function(){cn.apply(this,arguments)}(E,x,R,k,j)})},P.initPageOption=function(E,B){E.scannerViewer||(E.scannerViewer=ut(B.config.scannerViewer),B.config&&B.config.scannerViewer&&B.config.scannerViewer.element&&(E.scannerViewer.element=B.config.scannerViewer.element));var q=(B=E.scannerViewer).resolution,R=B.autoScan,k=B.autoDetect,j=B.switchCamera;B=B.loadLocalFile,q={headerButtons:{changeResBtn:Ot(q,On()),autoDetect:v({isSelected:R?.enableAutoScan||k?.enableAutoDetect},Ot(k,En())),closeBtn:jt()},footerButtons:{load:Ot(B,Dt()),toggleCamera:Ot(j,ln()),capture:Vt(),autoCapture:v({isSelected:R?.enableAutoScan},Ot(R,Un())),continuous:{icon:de.font+" "+de.iconContinuous,className:de.BUTTON_PREFIX+"continuousMode",visibility:"hidden"}},scannerViewer:{resolution:{defaultValue:{width:1280,height:720}},fullScreen:!1}},this.options=xe(E,q)},P.selectedFile=(E=u(s().mark(function x(R,k){var j;return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(k.stop(),B.prev=1,(j=k.getPreviousPage())&&j instanceof Mr)return B.next=6,j.insertFile(R);B.next=6;break;case 6:B.next=12;break;case 8:throw B.prev=8,B.t0=B.catch(1),k.hideLoading("insert - load image"),B.t0;case 12:return B.prev=12,k.hideLoading("insert - load image"),B.finish(12);case 15:case"end":return B.stop()}},x,null,[[1,8,12,15]])})),function(x,R){return E.apply(this,arguments)}),J}(pr);function cn(){return(cn=u(s().mark(function ne(J,P,E,x,R){var k,j,B,q,ee;return s().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(!(j=(k=P.dcs).getPreviousPage()).isDestroyed&&j instanceof Mr){te.next=4;break}return te.abrupt("return");case 4:if(k.showLoading("OnInsertPageSave"),te.prev=5,q=B=void 0===(B=(B=k.config.scannerViewer||{}).maxDocuments)?20:B,ee=j.getViewerByUid(j.getViewerUid()),!j.options.fromInternal||ee.currentPageCount+1<=q&&ee.currentPageCount+1<=B)return k.config&&k.config.scannerViewer&&k.config.scannerViewer.autoScan&&!k.config.scannerViewer.autoScan.enableAutoScan&&k.setLoadingNumber(2),te.next=13,k.packageBlobItemFromIImageData(E,!0,!0,!1);te.next=28;break;case 13:return q=te.sent,te.next=16,j.insertImgByBlobItem(q,k);case 16:if(j.setInsertingImageIndex(ee=te.sent),0<=ee)return te.next=21,j.handlePageByIndex(ee);te.next=21;break;case 21:return x&&k.setImageDataBack(E.imageData),k.emit("blurPage"),te.next=25,k.navigateBack();case 25:te.next=31;break;case 28:return k.emit("video-error",be_MAX_IMAGES_IN_BUFFER_LIMIT),te.next=31,k.navigateBack();case 31:return te.prev=31,k.stop(),k.hideLoading("OnInsertPageSave"),te.finish(31);case 35:case"end":return te.stop()}},ne,null,[[5,,31,35]])}))).apply(this,arguments)}var pn=[{width:320,height:240,type:"exact"},{width:640,height:480,type:"exact"},{width:640,height:360,type:"exact"},{width:800,height:600,type:"exact"},{width:1280,height:720,type:"exact"},{width:1920,height:1080,type:"exact"},{width:2560,height:1440,type:"exact"},{width:3840,height:2160,type:"exact"}],bn={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}};function nr(ne,J){var P,E=typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(E)return(E=E.call(ne)).next.bind(E);if(Array.isArray(ne)||(E=function(x,R){if(x){if("string"==typeof x)return d(x,R);var k=Object.prototype.toString.call(x).slice(8,-1);return"Map"===(k="Object"===k&&x.constructor?x.constructor.name:k)||"Set"===k?Array.from(x):"Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?d(x,R):void 0}}(ne))||J&&ne&&"number"==typeof ne.length)return E&&(ne=E),P=0,function(){return P>=ne.length?{done:!0}:{done:!1,value:ne[P++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(ne,J){(null==J||J>ne.length)&&(J=ne.length);for(var P=0,E=new Array(J);P<J;P++)E[P]=ne[P];return E}function b(ne,J,P,ee,x,R,k,j){void 0===j&&(j=!1);var B,q=JSON.parse(JSON.stringify({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:j?"user":"environment"}}}));if(ee="exact"===ee&&!x,J&&(q.video.width=((B={})[ee?"exact":"ideal"]=J,B)),P&&(q.video.height=((B={})[ee?"exact":"ideal"]=P,B)),R&&R.bMobile&&R.bSafari&&x&&(B=Math.max(J||1280,P||720),q.video.width=((x={})[ee?"exact":"ideal"]=B,x),delete q.video.height),ne)delete q.video.facingMode,q.video.deviceId={exact:ne};else if(k&&!j){for(var te,ve=["rear","back","r\xfcck","arri\xe8re","trasera","tr\xe1s","traseira","posteriore","\u540e\u9762","\u5f8c\u9762","\u80cc\u9762","\u540e\u7f6e","\u5f8c\u7f6e","\u80cc\u7f6e","\u0437\u0430\u0434\u043d\u0435\u0439","\u0627\u0644\u062e\u0644\u0641\u064a\u0629","\ud6c4","arka","achterzijde","\u0e2b\u0e25\u0e31\u0e07","baksidan","bagside","sau","bak","tylny","takakamera","belakang","\u05d0\u05d7\u05d5\u05e8\u05d9\u05ea","\u03c0\u03af\u03c3\u03c9","spate","h\xe1ts\xf3","zadn\xed","darrere","zadn\xe1","\u0437\u0430\u0434\u043d\u044f","stra\u017enja","belakang","\u092c\u0948\u0915"],Ge=nr(k);!(te=Ge()).done&&"break"!==function(){var ht=te.value,pt=ht.label.toLowerCase();if(pt&&ve.some(function(vt){return-1!=pt.indexOf(vt)})&&/\b0(\b)?/.test(pt))return delete q.video.facingMode,q.video.deviceId={ideal:ht.deviceId},"break"}(););!q.video.deviceId&&R.bAndroid&&R.bHarmonyOS&&(delete q.video.facingMode,q.video.deviceId={ideal:k[k.length-1].deviceId})}return q.video.facingMode&&"environment"===(J=(J=(J=q.video.facingMode)instanceof Array&&J.length?J[0]:J).exact||J.ideal||J)&&(q.bFmEnvironment=!!q.video.facingMode),q}function A(){return O.apply(this,arguments)}function O(){return(O=u(s().mark(function ne(J,P,E,x,R,k,j){var B,q,ee,te,ve,Ge;return s().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return B={},ee=q=null,ht.prev=3,ve=b(J,P,E,x,!1,R,k),ht.next=7,Y(ve,!1,R,k);case 7:if(q=ht.sent){ht.next=10;break}return ht.abrupt("return",B);case 10:if(document&&document.createElement?ee=document.createElement("video"):ue(j,be_VIDEO_ELEMENT_REQUIRED),te="exact"===x,R.bFirefox||!te)return ee.srcObject=q,ht.next=16,ee.play();ht.next=16;break;case 16:B.type=x,te?(ve=q.getVideoTracks()[0],(Ge=ve.getConstraints())&&Ge.width?(B.height=Ge.height.exact||Ge.height,B.width=Ge.width.exact||Ge.width):(Ge=ve.getSettings(),B.height=Ge.height.exact||Ge.height,B.width=Ge.width.exact||Ge.width)):(B.height=ee.videoHeight,B.width=ee.videoWidth),ht.next=23;break;case 20:ht.prev=20,ht.t0=ht.catch(3),this._fireLog&&this._fireLog("_getResolution exception:"+(ht.t0.message||ht.t0));case 23:if(q)return R.bFirefox&&(ee.srcObject=null),ht.next=27,q.getTracks().forEach(function(pt){pt.stop()});ht.next=29;break;case 27:ee=q=null;case 29:return ht.abrupt("return",B);case 30:case"end":return ht.stop()}},ne,this,[[3,20]])}))).apply(this,arguments)}function Y(){return re.apply(this,arguments)}function re(){return(re=u(s().mark(function ne(J,P,E,x){return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return"boolean"==typeof J.video&&(J.video={}),R.prev=1,R.next=4,navigator.mediaDevices.getUserMedia(J);case 4:return R.abrupt("return",R.sent);case 7:if(R.prev=7,R.t0=R.catch(1),!R.t0.name||"OverconstrainedError"!==R.t0.name){R.next=13;break}if(P)throw R.t0;R.next=12;break;case 12:return R.abrupt("return",null);case 13:return E&&E.bMobile&&E.bSafari?(delete J.video.width,delete J.video.height):J.bFmEnvironment?(delete J.video.facingMode,x&&x.length&&(J.video.deviceId={ideal:x[x.length-1].deviceId})):J.video=!0,R.abrupt("return",navigator.mediaDevices.getUserMedia(J));case 15:case"end":return R.stop()}},ne,null,[[1,7]])}))).apply(this,arguments)}function he(ne){function J(P){if(Object(P)!==P)return Promise.reject(new TypeError(P+" is not an object."));var E=P.done;return Promise.resolve(P.value).then(function(x){return{value:x,done:E}})}return(he=function(P){this.s=P,this.n=P.next}).prototype={s:null,n:null,next:function(){return J(this.n.apply(this.s,arguments))},return:function(P){var E=this.s.return;return void 0===E?Promise.resolve({value:P,done:!0}):J(E.apply(this.s,arguments))},throw:function(P){var E=this.s.return;return void 0===E?Promise.reject(P):J(E.apply(this.s,arguments))}},new he(ne)}var Oe=function(){function ne(P,E,x,R){this.videoSettings=bn,this._browserInfo=null,this._isPlugOut=!1,this._resolutionSelector=null,this._cameraInfo=null,this._allCameras=null,this._videoTrack=null,this._allResolutions=[],this._curResolution=null,this._videoEle=null,this._isFill=!1,this._isUser=!1,this._useWebgl=!0,this.videoGlCvs=null,this.videoGl=null,this.glImgData=null,this.glCropImgData=null,this._cameraManager=null,this._oPub=null,this._browserInfo=f.navInfo,!this._browserInfo.bMobile&&this._browserInfo.bSafari?15<=parseInt(this._browserInfo.strBrowserVersion)&&(this._useWebgl=!1):this._browserInfo.bHuaWeiBrowser&&(this._useWebgl=!1),this._cameraInfo=P||{deviceId:"",label:""},this._videoEle=E,this._allCameras=x,this._oPub=R||new rn}var P,J=ne.prototype;return J.getFrame=function(){Date.now();var P,E,x=this._videoEle.videoWidth,R=this._videoEle.videoHeight,k=(this.videoGlCvs||(this.videoGlCvs=globalThis.OffscreenCanvas?new globalThis.OffscreenCanvas(x,R):document.createElement("canvas")),this.videoGlCvs),j=this._useWebgl,B=null;return(B=j?this.videoGl||k.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0})||k.getContext("experimental-webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0}):B)&&j||(j=!1,this.videoGlCvs=document.createElement("canvas"),k=this.videoGlCvs),k.width==x&&k.height==R||(k.height=R,k.width=x,B&&B.viewport(0,0,x,R)),j?(this.videoGl||(j=(this.videoGl=B).createShader(B.VERTEX_SHADER),B.shaderSource(j,"\nattribute vec4 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\n\nvoid main() {\ngl_Position = a_position;\nv_uv = a_uv;\n}\n"),B.compileShader(j),B.getShaderParameter(j,B.COMPILE_STATUS),E=B.createShader(B.FRAGMENT_SHADER),B.shaderSource(E,"\nprecision lowp float;\n\nvarying vec2 v_uv;\n\nuniform sampler2D u_texture;\n\nvoid main() {\nvec4 sample =  texture2D(u_texture, v_uv);\ngl_FragColor = vec4(sample.b, sample.g, sample.r, 1.0);\n}\n"),B.compileShader(E),B.getShaderParameter(E,B.COMPILE_STATUS),P=B.createProgram(),B.attachShader(P,j),B.attachShader(P,E),B.linkProgram(P),B.getProgramParameter(P,B.LINK_STATUS),B.useProgram(P),B.bindBuffer(B.ARRAY_BUFFER,B.createBuffer()),B.bufferData(B.ARRAY_BUFFER,new Float32Array([-1,1,0,1,1,1,1,1,-1,-1,0,0,1,-1,1,0]),B.STATIC_DRAW),j=B.getAttribLocation(P,"a_position"),B.enableVertexAttribArray(j),B.vertexAttribPointer(j,2,B.FLOAT,!1,16,0),E=B.getAttribLocation(P,"a_uv"),B.enableVertexAttribArray(E),B.vertexAttribPointer(E,2,B.FLOAT,!1,16,8),B.activeTexture(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,B.createTexture()),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.NEAREST),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.NEAREST),B.uniform1i(B.getUniformLocation(P,"u_texture"),0)),(!this.glImgData||this.glImgData.length<x*R*4)&&(this.glImgData=new Uint8Array(x*R*4)),B.texImage2D(B.TEXTURE_2D,0,B.RGBA,B.RGBA,B.UNSIGNED_BYTE,this._videoEle),B.drawArrays(B.TRIANGLE_STRIP,0,4),B.readPixels(0,0,B.drawingBufferWidth,B.drawingBufferHeight,B.RGBA,B.UNSIGNED_BYTE,j=this.glImgData),this.glImgData):((E=k.getContext("2d")).drawImage(this._videoEle,0,0),0===k.width||0===k.height?null:((!this.glImgData||this.glImgData.length<k.width*k.height*4)&&(this.glImgData=new Uint8Array(k.width*k.height*4)),this.glImgData.set(E.getImageData(0,0,k.width,k.height).data),this.glImgData))},J.capture=(P=u(s().mark(function E(x){var R,k,j,B,q,ee,te,ve,Ge,ht,pt,vt,Tt,dn,Wt;return s().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:if(void 0===x&&(x=!1),R=null,Tn.prev=2,Ie.log("capture"),k=(ee=this._videoEle).videoWidth,ee=this.getVideoSizeInfo(),j=ee.width,B=ee.height,q=ee.offsetX,ee=ee.offsetY,te=this.getFrame(),Ge=ve=!1,this.videoGl?Ge=!0:ve=!0,R={imageData:null,imageWidth:j,imageHeight:B,rgba:ve,bgra:Ge},this._isFill){for((!this.glCropImgData||this.glCropImgData.length<j*B*4)&&(this.glCropImgData=new Uint8Array(j*B*4)),ht=this.glCropImgData,pt=0,vt=ee+B,Tt=ee;Tt<vt;Tt++)Wt=pt*j*4,ht.set(te.subarray(dn=4*(Tt*k+q),dn+4*j),Wt),pt++;R.imageData=ht.buffer}else R.imageData=te.buffer;if(x){Tn.next=16;break}return Tn.next=15,Ze(R);case 15:return Tn.abrupt("return",Tn.sent);case 16:Tn.next=21;break;case 18:return Tn.prev=18,Tn.t0=Tn.catch(2),Tn.abrupt("return",Promise.reject(Tn.t0));case 21:return Tn.abrupt("return",R);case 22:case"end":return Tn.stop()}},E,this,[[2,18]])})),function(E){return P.apply(this,arguments)}),J.setImageDataBack=function(P){Ie.log("setImageDataBack"),this._isFill?this.glCropImgData=new Uint8Array(P):this.glImgData=new Uint8Array(P)},J.getVideoSizeInfo=function(){if("none"==(null==(ee=this._videoEle)||null==(E=ee.style)?void 0:E.display))return{width:ee.videoWidth,height:E=ee.videoHeight,offsetX:0,offsetY:0};if("playing"!==this.getStatus())throw be_VIDEO_NOT_PLAY;var P=(E=ee.getBoundingClientRect()).width,E=E.height;if(0===P||0===E)throw be_CAPTURE_NO_IMAGE;var x,R,k,j=0,B=0,q=ee.videoHeight,ee=ee.videoWidth;return this._isFill?(x=P/(ee*(P=Math.max(P/ee,E/q))),E/=q*P,R=Math.floor(ee*x),k=Math.floor(q*E),j=Math.floor((1-x)/2*ee),B=Math.floor((1-E)/2*q)):(R=ee,k=q),{width:R,height:k,offsetX:j,offsetY:B}},J.setFillMode=function(P){this._isFill=P,this._videoEle&&(this._videoEle.style.objectFit=P?"cover":"contain")},J.setPlugOut=function(){this._isPlugOut=!0},J._checkPlugOut=function(){this._isPlugOut&&this._oPub.emit("video-error",be_CAMERA_PLUG_OUT)},J.getResolutions=function(){var P=u(s().mark(function E(x){var R,k,j,B,q,ee,te,ve,Ge,ht;return s().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:if(void 0===x&&(x=!1),0<this._allResolutions.length&&!x)return pt.abrupt("return",this._allResolutions);pt.next=3;break;case 3:if(this._cameraInfo){pt.next=5;break}return pt.abrupt("return",null);case 5:R=[],this._allResolutions=[],j=k=!1,pt.prev=9,q=function(vt){var Tt,dn,Wt,Tn=2;for(typeof Symbol<"u"&&(dn=Symbol.asyncIterator,Wt=Symbol.iterator);Tn--;){if(dn&&null!=(Tt=vt[dn]))return Tt.call(vt);if(Wt&&null!=(Tt=vt[Wt]))return new he(Tt.call(vt));dn="@@asyncIterator",Wt="@@iterator"}throw new TypeError("Object is not async iterable")}(pn);case 11:return pt.next=13,q.next();case 13:if(k=!(Ge=pt.sent).done)return ee=(Ge=Ge.value).width,te=Ge.height,Ge=Ge.type,pt.next=18,A(this._cameraInfo.deviceId,ee,te,Ge,this._browserInfo,this._allCameras,this._oPub);pt.next=32;break;case 18:if(ht=(ve=pt.sent).height===te&&ve.width===ee||ve.height===ee&&ve.width===te,(Ge=ve&&ve.height)&&ht){pt.next=27;break}return pt.next=24,A(this._cameraInfo.deviceId,ee,te,"ideal",this._browserInfo,this._allCameras,this._oPub);case 24:return(ht=pt.sent)&&ht.height&&!function(vt,Tt){for(var dn=vt.width,Wt=vt.height,Tn=nr(Tt);!(xn=Tn()).done;){var xn=xn.value;if(xn.height===Wt&&xn.width===dn)return 1}}({width:ht.width,height:ht.height},R)&&(delete ht.type,R.push(ht)),pt.abrupt("continue",29);case 27:delete ve.type,R.push(ve);case 29:k=!1,pt.next=11;break;case 32:pt.next=38;break;case 34:pt.prev=34,pt.t0=pt.catch(9),j=!0,B=pt.t0;case 38:if(pt.prev=38,pt.prev=39,k&&null!=q.return)return pt.next=43,q.return();pt.next=43;break;case 43:if(pt.prev=43,j)throw B;pt.next=46;break;case 46:return pt.finish(43);case 47:return pt.finish(38);case 48:return this._allResolutions=R,pt.abrupt("return",R);case 50:case"end":return pt.stop()}},E,this,[[9,34,38,48],[39,,43,47]])}));return function(E){return P.apply(this,arguments)}}(),J.setResolution=function(){var P=u(s().mark(function E(x,R){return s().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(this.playing())return k.abrupt("return",this.play(x,R,this._cameraManager));k.next=2;break;case 2:return this._curResolution={width:x,height:R},k.abrupt("return",this._curResolution);case 4:case"end":return k.stop()}},E,this)}));return function(E,x){return P.apply(this,arguments)}}(),J.getCurrentResolution=function(){return this._curResolution},J.getCameraInfo=function(){return this._cameraInfo},J.destroy=function(){this.stop(),this._cameraInfo=null,this._allCameras=null,this._allResolutions=null,this._videoEle=null,this._browserInfo=null,this.videoGlCvs=null},J.stop=function(){this._videoEle&&this._videoEle.srcObject&&(this._videoEle.srcObject.getTracks().forEach(function(P){P.stop()}),this._videoEle.srcObject=null,this._videoTrack=null)},J.getDeviceId=function(P){return P&&(P=P.getVideoTracks()).length?(this._videoTrack=P[0],this._videoTrack.getSettings().deviceId):""},J.updateCameraInfo=function(P){var E={};return P&&(P=P.getVideoTracks()).length&&(this._videoTrack=P[0],P={deviceId:(E=this._videoTrack.getSettings()).deviceId,label:this._videoTrack.label},this._cameraInfo=P),E},J.getBestMediaStream=function(){var P=u(s().mark(function E(x,R,k){var j,B,q,ee;return s().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return this.videoSettings=b(this._cameraInfo.deviceId,x,R,k,!0,this._browserInfo,this._allCameras,this._isUser),j=this.videoSettings,te.prev=2,te.next=5,Y(j,!0,this._browserInfo,this._allCameras);case 5:if(q=this.getDeviceId(B=te.sent),this._cameraManager&&j.bFmEnvironment&&!this._isUser)return te.next=10,this._cameraManager.getAllCamerasInfo();te.next=21;break;case 10:if(this._allCameras=te.sent,this.videoSettings=b(this._cameraInfo.deviceId,x,R,k,!0,this._browserInfo,this._allCameras,this._isUser),"boolean"==typeof(j=this.videoSettings).video&&(j.video={}),(ee=(ee=j.video.deviceId)&&(ee.exact||ee.ideal||ee))&&0<q.length&&q!=ee)return B.getTracks().forEach(function(ve){ve.stop()}),te.next=20,Y(j,!0,this._browserInfo,this._allCameras);te.next=21;break;case 20:B=te.sent;case 21:return ee=this.updateCameraInfo(B),te.abrupt("return",{settings:ee,stream:B});case 25:te.prev=25,te.t0=te.catch(2),this.throwError("NotAllowedError"===te.t0.name||"Permission denied"===te.t0.message?be_CAMERA_NOT_OPEN:be_FAILED_GET_USERMEDIA);case 28:case"end":return te.stop()}},E,this,[[2,25]])}));return function(E,x,R){return P.apply(this,arguments)}}(),J.play=function(){var P=u(s().mark(function E(x,R,k){var j,B,q,ee,te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return(j=this._videoEle)||this.throwError(be_VIDEO_ELEMENT_REQUIRED),this._cameraManager=k,this._checkPlugOut(),ee=this._curResolution,"number"==typeof x&&0<x&&"number"==typeof R&&0<R||(x=ee?ee.width:1280,R=ee?ee.height:720),ee=function(Ge,ht){for(var pt=Ge.width,vt=Ge.height,Tt=nr(ht);!(dn=Tt()).done;){var dn=dn.value;if(dn.height===vt&&dn.width===pt)return dn.type}return"ideal"}({width:x,height:R},B=this._allResolutions),this.stop(),ve.next=10,this.getBestMediaStream(x,R,ee);case 10:return q=(B=ve.sent).settings,j.srcObject=ee=B.stream,ve.next=16,new Promise(function(Ge){j.onloadedmetadata=function(ht){Ge(ht)}});case 16:return ve.prev=16,ve.next=19,j.play();case 19:ve.next=27;break;case 21:return ve.prev=21,ve.t0=ve.catch(16),ve.next=25,new Promise(function(Ge){setTimeout(Ge,1e3)});case 25:return ve.next=27,j.play();case 27:return te={width:j.videoWidth,height:j.videoHeight},q.width&&q.height&&(q.width===x&&q.height===R||q.width===R&&q.height===x)&&(te.width=x,te.height=R),this._curResolution=te,this._oPub.emit("onPlayed",j),ve.abrupt("return",te);case 32:case"end":return ve.stop()}},E,this,[[16,21]])}));return function(E,x,R){return P.apply(this,arguments)}}(),J.pause=function(){this._videoEle&&this._videoEle.pause()},J.resume=function(){this._videoEle&&this.paused()&&this.playing()&&this._videoEle.play()},J.paused=function(){return!!this._videoEle&&this._videoEle.paused},J.playing=function(){if(this._isPlugOut)return!1;if(this._videoEle&&this._videoEle.srcObject)try{var P=this._videoEle.srcObject;if(P){var E=P.getVideoTracks();if(E&&0!==E.length)return!0}}catch(x){this.throwError(x)}return!1},J.getStatus=function(){return this.playing()?this.paused()?"paused":"playing":"stopped"},J.getVideoSetting=function(){return this.videoSettings},J.toggleCamera=function(P,E,x){return this._isUser=!this._isUser,this._cameraInfo.deviceId="",this.play(P,E,x)},J.throwError=function(P){this._oPub.emit(De,P)},ne}();function ye(ne,J){var P,E=typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(E)return(E=E.call(ne)).next.bind(E);if(Array.isArray(ne)||(E=function(x,R){if(x){if("string"==typeof x)return ct(x,R);var k=Object.prototype.toString.call(x).slice(8,-1);return"Map"===(k="Object"===k&&x.constructor?x.constructor.name:k)||"Set"===k?Array.from(x):"Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?ct(x,R):void 0}}(ne))||J&&ne&&"number"==typeof ne.length)return E&&(ne=E),P=0,function(){return P>=ne.length?{done:!0}:{done:!1,value:ne[P++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ct(ne,J){(null==J||J>ne.length)&&(J=ne.length);for(var P=0,E=new Array(J);P<J;P++)E[P]=ne[P];return E}var gt=function(ne){function J(E,x){return(E=ne.call(this,E)||this)._allCamerasInfo=[],E.selectedCamera=null,E.videoEl=null,E._trackCameraDeviceChanged(),E._initEl(x),E}c(J,ne);var E,P=J.prototype;return P.selectCamera=(E=u(s().mark(function x(R){var k,j,B,q,ee;return s().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(this._allCamerasInfo.length){te.next=3;break}return te.next=3,this.getAllCamerasInfo();case 3:if(k=this._allCamerasInfo,R=R||new Oe(null,this.videoEl,k,this._oPub),j=null,!Ye(R)){te.next=21;break}B={deviceId:"",label:""},q=0;case 9:if(!(q<k.length)){te.next=19;break}if(R===(ee=k[q]).deviceId)return B.deviceId=ee.deviceId,B.label=ee.label,j=new Oe(B,this.videoEl,k,this._oPub),te.abrupt("break",19);te.next=16;break;case 16:q++,te.next=9;break;case 19:te.next=22;break;case 21:R instanceof Oe&&(j=R);case 22:return this.selectedCamera&&this.selectedCamera.destroy(),this.selectedCamera=j,te.abrupt("return",j);case 25:case"end":return te.stop()}},x,this)})),function(x){return E.apply(this,arguments)}),P.closeCamera=function(){this.selectedCamera&&(this.selectedCamera.destroy(),this.selectedCamera=null)},P.getCurrentCamera=function(){return this.selectedCamera},P.destroy=function(){this._oPub.off("onCameraChanged")},P.getAllCamerasInfo=function(){var E=u(s().mark(function x(){return s().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return wt(this._oPub),k.next=3,function(){return Jt.apply(this,arguments)}();case 3:return this._allCamerasInfo=k.sent,k.abrupt("return",this._allCamerasInfo);case 6:case"end":return k.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P._trackCameraDeviceChanged=function(){var E=this;void 0!==navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=function(x){E._cameraChangedHandler(x)})},P._initEl=function(E){E?this.videoEl=E:((E=document.createElement("video")).className=de.cameraVideo,E.playsInline=!0,E.muted=!0,this.videoEl=E,this._oPub.on("onPlayed",function(x){Xt(x)}))},P._cameraChangedHandler=function(E){},P._requestCamera=function(){var E=u(s().mark(function x(){return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return wt(this._oPub),0===this._allCamerasInfo.length&&this._oPub.emit("onThrowError",be_NO_CAMERA),R.next=4,this._checkAllowCamera();case 4:case"end":return R.stop()}},x,this)}));return function(){return E.apply(this,arguments)}}(),P._checkAllowCamera=function(){var E=u(s().mark(function x(){return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:case"end":return R.stop()}},x)}));return function(){return E.apply(this,arguments)}}(),P.requestCamera=function(){var E=u(s().mark(function x(){return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:case"end":return R.stop()}},x)}));return function(){return E.apply(this,arguments)}}(),J.cameraExist=function(E,x){return!0},J}(gn);function wt(ne){void 0===navigator.mediaDevices&&(0!==location.origin.lastIndexOf("https://",0)?ue(ne,be_HTTPS_REQUIRED):ue(ne,be_MEDIADEVICES_NOT_IMPL)),void 0===navigator.mediaDevices.getUserMedia&&ue(ne,be_GETUSERMEDIA_NOT_IMPL)}function Jt(){return(Jt=u(s().mark(function ne(){var J,P,E,x,R,k,j,B;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=3,navigator.mediaDevices.enumerateDevices();case 3:J=q.sent,P=[],x=E=0;case 7:if(!(x<J.length)){q.next=24;break}if("videoinput"!==(R=J[x]).kind)return q.abrupt("continue",21);q.next=11;break;case 11:k=!1,j=ye(P);case 13:if((B=j()).done){q.next=20;break}if(B.value.deviceId===R.deviceId)return k=!0,q.abrupt("break",20);q.next=18;break;case 18:q.next=13;break;case 20:k||((B={}).deviceId=R.deviceId,B.label=!R.label||/^camera\s[0-9]+$/.test(R.label)?"camera "+E++:R.label,P.push(B));case 21:x++,q.next=7;break;case 24:return q.abrupt("return",P);case 25:case"end":return q.stop()}},ne)}))).apply(this,arguments)}function Xt(ne,J,P){var E,x,R,k;ne&&(x=ne.style.objectFit,J=J&&P?(k=J,P):(k=ne.videoWidth,ne.videoHeight),R=(P=ne.getBoundingClientRect()).width,P=P.height,E={zoom:1,left:0,top:0},"cover"===x?(x=Math.max(R/k,P/J),E.zoom=x):(R=(R-k*(x=Math.min(R/k,P/J)))/2,k=(P-J*x)/2,E.zoom=x,E.left=R,E.top=k),ne.videoLayout=E)}var an=function(ne){function J(E,x){return(E=ne.call(this,E)||this)._showCanvas=null,E._containerEl=null,E._videoEl=null,E._obEl=null,E._srcVideoInfo=null,E._videoEl=x,E._showCanvas=E.createCameraCanvas(),E}c(J,ne);var P=J.prototype;return P.createCameraCanvas=function(){var E=document.createElement("canvas");return E.className=de.cameraCvs,E.addEventListener("touchstart",function(x){"touchstart"===x.type&&x.cancelable&&x.preventDefault()},{passive:!1}),E},P.getCameraDvs=function(){return this._showCanvas},P.resetVideoInfo=function(){var E;f.navInfo.bMobile&&(f.navInfo.biPhone||f.navInfo.biPad)&&(E=0==(E=window.orientation)||180==E?0:90,this._srcVideoInfo={videoWidth:this._videoEl.videoWidth,videoHeight:this._videoEl.videoHeight,orientation:E})},P.bindView=function(R){var x=this;if(!(R=Ye(R)?document.getElementById(R):R))return!1;var B,k=this._showCanvas,j=this._videoEl,q=(((B=j.parentElement)?.remove(),B=document.createElement("div")).className=de.cameraContainer,B.appendChild(j),B.appendChild(k),this._containerEl=B,R.appendChild(B),this.updateCanvasRect(),this);return this._obEl=new Et(B,function(ee){var te,ve,Ge;f.navInfo.bMobile&&(f.navInfo.biPhone||f.navInfo.biPad)&&q._videoEl&&0<q._videoEl.videoWidth&&0<q._videoEl.videoHeight&&(Ge=0==(Ge=window.orientation)||180==Ge?0:90,q._srcVideoInfo?Ge==q._srcVideoInfo.orientation?(te=q._srcVideoInfo.videoWidth,ve=q._srcVideoInfo.videoHeight):(ve=q._srcVideoInfo.videoHeight,te=q._srcVideoInfo.videoWidth):(q._srcVideoInfo={videoWidth:q._videoEl.videoWidth,videoHeight:q._videoEl.videoHeight,orientation:Ge},te=q._srcVideoInfo.videoWidth,ve=q._srcVideoInfo.videoHeight)),Xt(q._videoEl,te,ve),q.updateCanvasRect(),x._oPub.emit("uiResize",ee)}),!0},P.updateCanvasRect=function(){this._showCanvas&&(this._showCanvas.width=this._showCanvas.getBoundingClientRect().width,this._showCanvas.height=this._showCanvas.getBoundingClientRect().height)},P.unbindView=function(){this._obEl&&(this._obEl.dispose(),this._obEl=null);var E=this._containerEl;return!!E&&(E.remove(),!0)},P.dispose=function(){var E;this.unbindView(),this._showCanvas.width=1,this._showCanvas.height=1,null!=(E=this._showCanvas)&&E.remove(),this._showCanvas=null,this._containerEl=null,this._videoEl=null,this._obEl=null},J}(gn);var hn,vn=function(){function ne(){this.path=[],this._removedPages=[],this._currentPage=null}var J,x,E=ne.prototype;return E.setCurrentPage=(x=u(s().mark(function R(k,j){var B,q,ee;return s().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(void 0===j&&(j=!0),B=this._currentPage,this._currentPage=k,B&&B instanceof pr?(q=B.getDcs())&&q.emit("blurPage"):k&&k instanceof pr&&k.pageName==X&&(q=k.getDcs())&&q.emit("focusPage"),k)return te.next=7,function(){return Ce.apply(this,arguments)}(k,j);te.next=7;break;case 7:B&&!k&&(ee=B.getDcs())&&(ee.off("blurPage"),ee.off("focusPage"));case 8:case"end":return te.stop()}},R,this)})),function(R,k){return x.apply(this,arguments)}),E.navigateTo=function(){var x=u(s().mark(function R(k,j){return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return void 0===j&&(j=!0),this.path.push(k),B.next=4,this.setCurrentPage(k,j);case 4:case"end":return B.stop()}},R,this)}));return function(R,k){return x.apply(this,arguments)}}(),E.redirectTo=function(x){this.closeAllPages(),this.navigateTo(x)},E.redirectToHome=function(){var x=u(s().mark(function R(){return s().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return this.navigatePopPageSync(this.path.length-1),j.next=4,this.resetCurrentPageAfterPopPage();case 4:case"end":return j.stop()}},R,this)}));return function(){return x.apply(this,arguments)}}(),E.navigatePopPageSync=function(x,R){void 0===x&&(x=1),void 0===R&&(R=!0);for(var k=this.path;0<x;){var j=k.pop();j&&!j.isDestroyed&&(R&&j.hide(),this._removedPages.push(j)),x--}return null},E.getRemovedPages=function(){return this._removedPages},E.destroyRemovedPages=function(){this._removedPages.forEach(function(x){mt(x)}),this._removedPages=[]},E.closeAllPages=function(){this.path.forEach(function(x){mt(x)}),this.path=[],this.destroyRemovedPages(),this.setCurrentPage(null)},E.hideAllPages=function(){this.path.forEach(function(x){x.hide()})},E.showAllPages=function(){this.path.forEach(function(x){x.show()})},E.showDocumentScanPage=function(x,R,k){return x=new pr(x,R,k),this.navigateTo(x),k.captureLoop&&(k.captureLoop.setEnable(),k.once("onPlayed",function(){k.captureLoop&&k.captureLoop.startLoop({dcs:k})}),k.once("video-closed",function(){lt(k),k.captureLoop&&k.captureLoop.stopCaptureLoop()}),(k.config.scannerViewer.autoDetect||k.config.scannerViewer.autoScan)&&(k.captureLoop.loadLoopTypeFromConfig(),k.captureLoop.clearCaptureTimer()),k.on("blurPage",function(){k.captureLoop&&k.captureLoop.isEnable()&&(k.captureLoop.saveLoopTypeToConfig(),k.captureLoop.stopCaptureLoop(),k.captureLoop.setDisable())}),k.on("focusPage",function(){k.captureLoop&&(k.captureLoop.setEnable(),k.config.scannerViewer.autoScan.enableAutoScan?k.captureLoop.setAutoScan():k.config.scannerViewer.autoDetect.enableAutoDetect&&!k.config.scannerViewer.autoScan.enableAutoScan?k.captureLoop.setAutoDetect():k.captureLoop.changeStyle())})),x.moveMultipleImgPosition(),x},E.showInsertPage=function(B,R,k){var j=k.getCurrentPage();return B=new ki(B,R,k),this.navigateTo(B),j.hide(),k.captureLoop&&(k.captureLoop.setEnable(),k.once("onPlayed",function(){k.captureLoop&&k.captureLoop.startLoop({dcs:k})}),k.once("video-closed",function(){lt(k),k.captureLoop&&k.captureLoop.stopCaptureLoop()}),k.captureLoop.loadLoopTypeFromConfig()),B},E.showCropPage=function(x,te,k){var j=k.getCurrentPage(),B=new qr(x,te,k),q=x.documentEditorSettings||k.config.documentEditorSettings,ee=this;return(te=x.doFillData?B.fillOrigCustomDataFirstTime():Promise.resolve()).then(u(s().mark(function ve(){var Ge;return s().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(B.isDestroyed)return ht.abrupt("return");ht.next=2;break;case 2:return Ge=Ln(x.visibility)&&Ln(q.visibility),ht.next=5,ee.navigateTo(B,Ge);case 5:!B.isDestroyed&&Ge?B.render():B.hide(),j&&j.pageName!=fe.toLowerCase&&j.hide();case 7:case"end":return ht.stop()}},ve)}))),B},E.showDocumentEditPage=function(x,te,k){var j,B=k.getCurrentPage(),q=new Mr(x,te,k),ee=x.documentEditorSettings||k.config.documentEditorSettings;return te=x.doFillData?q.fillOrigCustomDataFirstTime():Promise.resolve(),Ln(x.visibility)&&(j=this,te.then(u(s().mark(function ve(){var Ge;return s().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(q.isDestroyed)return ht.abrupt("return");ht.next=2;break;case 2:return Ge=Ln(x.visibility)&&Ln(ee.visibility),ht.next=5,j.navigateTo(q,Ge);case 5:!q.isDestroyed&&Ge?q.render():q.hide(),B&&B.pageName!=je.toLowerCase&&B.hide();case 7:case"end":return ht.stop()}},ve)})))),q},E.removePage=function(){var x=u(s().mark(function R(k){var j,B;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if((j=this.path.length)<=1)return this.navigatePopPageSync(),q.next=5,this.resetCurrentPageAfterPopPage();q.next=6;break;case 5:return q.abrupt("return");case 6:if(this.path[j-1]==k)return this.navigatePopPageSync(),q.next=11,this.resetCurrentPageAfterPopPage();q.next=12;break;case 11:return q.abrupt("return");case 12:B=j-2;case 13:if(!(0<=B)){q.next=21;break}if(this.path[B]==k)return this.path.splice(B,1),q.abrupt("return");q.next=18;break;case 18:B--,q.next=13;break;case 21:case"end":return q.stop()}},R,this)}));return function(R){return x.apply(this,arguments)}}(),E.resetCurrentPageAfterPopPage=function(){var x=u(s().mark(function R(k){var j,B;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(void 0===k&&(k=!0),0<(j=this.path).length)return B=j[j.length-1],q.next=6,this.setCurrentPage(B,k);q.next=7;break;case 6:return q.abrupt("return",B);case 7:return q.abrupt("return",null);case 8:case"end":return q.stop()}},R,this)}));return function(R){return x.apply(this,arguments)}}(),E=ne,(J=[{key:"currentPage",get:function(){return this._currentPage}},{key:"previousPage",get:function(){var x=this.path;return 2<=x.length?x[x.length-2]:null}}])&&function kn(ne,J){for(var P=0;P<J.length;P++){var E=J[P];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(ne,E.key,E)}}(E.prototype,J),Object.defineProperty(E,"prototype",{writable:!1}),ne}(),Jn=((un=hn=hn||{})[un.None=0]="None",un[un.AutoScan=1]="AutoScan",un[un.AutoDetect=2]="AutoDetect",function(){function ne(P){this.isLooping=!1,this._dcs=null,this._cameraCvs=null,this._enabled=!1,this._loopType=hn.None,this.loopTimer=null,this.lastConfirmTime=0,this.lastDetectTime=(new Date).getTime(),this._captureLoopSub=new rn,this._oldLoopType=[],this._dcs=P}var P,J=ne.prototype;return J.dispose=function(){this._loopType=hn.None,this.clearCaptureTimer(),this._dcs=null,this._captureLoopSub=null,this._cameraCvs=null},J.resetLastConfirmTime=function(){this.lastConfirmTime=0},J.setAutoScan=function(){this.innerSetNextLoopType(hn.AutoScan)},J.setAutoDetect=function(){this.innerSetNextLoopType(hn.AutoDetect)},J.innerSetNextLoopType=function(P){this._loopType==ne.EnumLoopType_ManualScan?0==this._oldLoopType.length?this._oldLoopType.push(P):this._oldLoopType[0]=P:(this._loopType=P,this.changeStyle(),this.clearCaptureTimer(),this.startLoop({dcs:this._dcs}))},J.saveLoopTypeToConfig=function(){this._loopType==hn.AutoScan?(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!0,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):this._loopType==hn.AutoDetect?(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1)},J.loadLoopTypeFromConfig=function(){this.isAutoButtonEnabled()&&this._dcs.config.scannerViewer.autoScan.enableAutoScan?(this._loopType=hn.AutoScan,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):this.isAutoButtonEnabled()&&this._dcs.config.scannerViewer.autoDetect.enableAutoDetect?this._loopType=hn.AutoDetect:(this._loopType=hn.None,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1,this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1),this.changeStyle()},J.getLoopType=function(){return this._loopType},J._setLoopType=function(P){this._loopType=P},J.setIsLooping=function(P){this.isLooping=P},J.getIsLooping=function(){return this.isLooping},J.setEnable=function(){this.isAutoButtonEnabled()&&(this._enabled=!0)},J.setDisable=function(){this._enabled=!1},J.isEnable=function(){return this._enabled},J.isAutoButtonDisabled=function(){return 1!=this._dcs.config.scannerViewer.enableBorderDetection},J.isAutoButtonEnabled=function(){return 1==this._dcs.config.scannerViewer.enableBorderDetection},J.startManualCapture=function(P){var x,E=this;Ie.log("startManualCapture"),this._oldLoopType.push(this._loopType),this._captureLoopSub.once("onCapturedImage",(x=u(s().mark(function R(k,j,B){var q,ee,te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return q={dcs:k,page:k.getCurrentPage()},ve.prev=1,0==(void 0===(ee=(void 0===(ee=k.config.scannerViewer)?{}:ee).continuousScan)?{}:ee).enableContinuousScan&&E.loadLoopTypeFromConfig(),ve.next=7,q.page.emitEx("onSaveCapture",!1,q,j,!0,B);case 7:ve.next=14;break;case 9:ve.prev=9,ve.t0=ve.catch(1),Ie.log("manual capture error."),Ie.log(ve.t0),702==ve.t0.code&&(k.hideLoading("startManualCapture 1"),k.emit(De,ve.t0));case 14:if(!k.captureLoop){ve.next=30;break}if((te=k.captureLoop._oldLoopType).length<=0)return Ie.log("manual capture stack error."),k.captureLoop._loopType=hn.None,k.hideLoading("startManualCapture 2"),ve.abrupt("return");ve.next=21;break;case 21:if(k.captureLoop._loopType=te.pop(),k.captureLoop.resetLastConfirmTime(),k.captureLoop.loopTypeIsManualScan())return k.captureLoop.innerLoop(q),k.hideLoading("startManualCapture 3"),ve.abrupt("return");ve.next=27;break;case 27:k.hideLoading("startManualCapture 4"),k.captureLoop.innerLoop(q),k.captureLoop.changeStyle();case 30:case"end":return ve.stop()}},R,null,[[1,9]])})),function(R,k,j){return x.apply(this,arguments)})),this.lastConfirmTime=(new Date).getTime(),this.loopTypeIsManualScan()||(this._loopType=ne.EnumLoopType_ManualScan,this._dcs.showLoading("startManualCapture start loop"),this.isLooping||(this.clearCaptureTimer(),this.innerLoop(P)))},J.startLoop=function(P){Ie.log("startLoop"),this.isAutoButtonDisabled()&&(this._loopType=hn.None),this._loopType==hn.AutoScan||this._loopType==hn.AutoDetect?null==this.loopTimer&&(this.lastConfirmTime=0,this.isLooping||(this.clearCaptureTimer(),this.innerLoop(P))):(this.stopCaptureLoop(),this._dcs.hideLoading("startLoop")),this.changeStyle()},J.changeStyle=function(){if(P=null==(P=this._dcs)||null==(P=P.getCurrentPage())?void 0:P.element){var E=P?.querySelector("."+de.BUTTON_PREFIX+"autoCapture"),x=P?.querySelector("."+de.BUTTON_PREFIX+"captureBtn"),P=P?.querySelector("."+de.BUTTON_PREFIX+"detectCamera");if(this.isAutoButtonDisabled())return E&&(E.classList.remove(de.footerSelected),E.classList.add(de.disable),E.bSelected=!1),P&&x.classList.remove(de.capturing),void(P&&(P.classList.remove(de.headerSelected),P.classList.add(de.disable),P.bSelected=!1));this._loopType==hn.AutoScan?(E&&(E.classList.add(de.footerSelected),E.bSelected=!0),P&&x.classList.add(de.capturing),P&&(P.classList.add(de.headerSelected),P.bSelected=!0)):this._loopType==hn.AutoDetect?(E&&(E.classList.remove(de.footerSelected),E.bSelected=!1),P&&x.classList.remove(de.capturing),P&&(P.classList.add(de.headerSelected),P.bSelected=!0)):(E&&(E.classList.remove(de.footerSelected),E.classList.remove(de.disable),E.bSelected=!1),P&&x.classList.remove(de.capturing),P&&(P.classList.remove(de.headerSelected),P.classList.remove(de.disable),P.bSelected=!1))}},J.getDetectRemainTime=function(){var E=(new Date).getTime(),P=se(this._dcs,"config.scannerViewer.autoDetect").fpsLimit;return Math.max(0,1e3/(void 0===P?3:P)-(E-=this.lastDetectTime))},J.loopTypeIsNone=function(){return this._loopType==hn.None},J.loopTypeIsManualScan=function(){return this._loopType==ne.EnumLoopType_ManualScan},J.innerLoop=function(P){var E=this,x=P.dcs,R=x.getAreaDetectCallback(),k=this.getDetectRemainTime();if(R)return this.loopTypeIsNone()?this.exitAutoCaptureFromInner(0):void((this._loopType!=hn.AutoScan&&this._loopType!=hn.AutoDetect||this.isEnable())&&(clearTimeout(this.loopTimer),this.loopTimer=setTimeout(u(s().mark(function j(){var B;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(E.loopTypeIsNone())return q.abrupt("return",E.exitAutoCaptureFromInner(1));q.next=2;break;case 2:if(E.isLooping)return q.abrupt("return");q.next=4;break;case 4:return E.isLooping=!0,q.next=7,E.innerLoopTimeout(P);case 7:B=q.sent,E.isLooping=!1,B&&(E._loopType==hn.AutoScan||E._loopType==hn.AutoDetect)&&E.isEnable()?setTimeout(function(){!x.captureLoop||x.captureLoop._loopType!=hn.AutoScan&&x.captureLoop._loopType!=hn.AutoDetect||!x.captureLoop.isEnable()||x.captureLoop.innerLoop(P)},10):E.clearCaptureTimer();case 10:case"end":return q.stop()}},j)})),k)))},J.innerLoopTimeout=(P=u(s().mark(function E(x){var R,k,j,B,q,ee,te,ve,Ge,ht,pt,vt;return s().wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:if(R=x.dcs,this.lastDetectTime=(new Date).getTime(),k=void 0===(k=(j=R.config.scannerViewer).polygonStyle)?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:k,j=void 0===(j=j.autoDetect)?{}:j,B=!0,Tt.prev=4,"playing"!=R.getStatus())return Tt.abrupt("return",!0);Tt.next=7;break;case 7:return Tt.next=9,R.capture(B);case 9:if(q=Tt.sent,this.loopTypeIsNone())return Tt.abrupt("return",this.exitAutoCaptureFromInner(2));Tt.next=14;break;case 14:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",R,q),Tt.abrupt("return",!1);Tt.next=17;break;case 17:return Tt.prev=17,Tt.next=20,ze(q,R);case 20:if(ee=Tt.sent,this._loopType!=hn.AutoScan){Tt.next=69;break}if(te=ee.cornerPoints,this.loopTypeIsNone())return Ie.log("loop setImageDataBack"),R.setImageDataBack(q.imageData),Tt.abrupt("return",this.exitAutoCaptureFromInner(3));Tt.next=27;break;case 27:if(!ee.detectedArea){Tt.next=58;break}if(this.drawArea(te,k,R.getVideoElement()),this.loopTypeIsNone())return Ie.log("loop setImageDataBack"),R.setImageDataBack(q.imageData),Tt.abrupt("return",this.exitAutoCaptureFromInner(5));Tt.next=35;break;case 35:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",R,q,ee),Tt.abrupt("return",!1);Tt.next=38;break;case 38:if(ht=void 0===(ht=j.autoCaptureDelay)?2e3:ht,ve=(new Date).getTime(),!(this._loopType==hn.AutoScan&&0<this.lastConfirmTime&&ve-this.lastConfirmTime>ht)){Tt.next=55;break}if(R.showLoading("auto capture"),Tt.prev=43,ht=x.dcs.getCurrentPage())return Tt.next=48,ht.emitEx("onSaveCapture",!0,x,q,!0,ee);Tt.next=48;break;case 48:return Tt.prev=48,R.hideLoading("auto capture"),Tt.finish(48);case 51:return R.captureLoop.resetLastConfirmTime(),Tt.abrupt("return",!0);case 55:0==this.lastConfirmTime&&(this.lastConfirmTime=ve);case 56:Tt.next=62;break;case 58:Ie.log("[capture loop] detect result:"),Ie.log(ee),this.lastConfirmTime=0,this.clearCanvas();case 62:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",R,q,ee),Tt.abrupt("return",!1);Tt.next=65;break;case 65:Ie.log("loop setImageDataBack"),R.setImageDataBack(q.imageData),Tt.next=85;break;case 69:if(this._loopType!=hn.AutoDetect){Tt.next=82;break}if(Ge=ee.cornerPoints,Ie.log("loop setImageDataBack"),R.setImageDataBack(q.imageData),this.loopTypeIsNone())return Tt.abrupt("return",this.exitAutoCaptureFromInner(3));Tt.next=75;break;case 75:if(pt=Qt(Ge,ht=q.imageWidth,pt=q.imageHeight),this.loopTypeIsNone())return Tt.abrupt("return",this.exitAutoCaptureFromInner(4));Tt.next=79;break;case 79:pt?this.clearCanvas():(vt=R.getVideoElement(),R.captureLoop.drawArea(Ge,k,vt)),Tt.next=85;break;case 82:if(this.loopTypeIsManualScan())return this._captureLoopSub.emit("onCapturedImage",R,q,ee),Tt.abrupt("return",!1);Tt.next=85;break;case 85:Tt.next=90;break;case 87:Tt.prev=87,Tt.t0=Tt.catch(17),Ie.log(Tt.t0);case 90:Tt.next=95;break;case 92:Tt.prev=92,Tt.t1=Tt.catch(4),Ie.log(Tt.t1);case 95:return Tt.abrupt("return",!0);case 97:case"end":return Tt.stop()}},E,this,[[4,92],[17,87],[43,,48,51]])})),function(E){return P.apply(this,arguments)}),J.exitAutoCaptureFromInner=function(P){return this.clearCaptureTimer(),this._dcs.hideLoading("innerLoop exitAutoCaptureFromInner"),Ie.log("auto capture loop: loopType is None "+P),!1},J.clearCaptureTimer=function(){clearTimeout(this.loopTimer),this.loopTimer=null,this.lastConfirmTime=0},J.stopCaptureLoop=function(){this._loopType=hn.None,this.clearCaptureTimer(),this.clearCanvas()},J.getCameraCvs=function(){return this._cameraCvs||(this._cameraCvs=this._dcs.getCameraView().getCameraDvs()),this._cameraCvs},J.clearCanvas=function(){var P=this.getCameraCvs();P&&P.getContext("2d").clearRect(0,0,P.width,P.height)},J.drawArea=function(P,E,k){var B,R=(B=this.getCameraCvs()).getContext("2d"),j=(k=(R.save(),R.clearRect(0,0,B.width,B.height),B=k.videoLayout).zoom,B.left);R.translate(j,B=B.top),R.scale(k,k),R.beginPath(),R.moveTo(P[0],P[1]);for(var q=2;q<P.length;q+=2)R.lineTo(P[q],P[q+1]);R.closePath(),j=parseInt(E.strokeWidth,10)/k,R.strokeStyle=E.stroke,R.lineCap="round",R.lineWidth=j,"dashed"===E.dash&&R.setLineDash([Math.max(2,j),Math.max(4,2*j)]),R.stroke(),R.restore()},ne}()),Qn=(Jn.EnumLoopType_ManualScan=3,Jn._defaultConfig={autoScan:{enableAutoScan:!1},autoDetect:{enableAutoDetect:!1},enableBorderDetection:!0},new Map),Cr=new Map,yr=new Map,Nr=function(){function ne(P){this._cameraMng=null,this._cameraView=null,this._uiRouters=null,this.captureLoop=null,this.filterApplyToAllValue=void 0,this.curFilterValue=void 0,this._runPlaying=!1,this._loadingConfig={imageSource:null,background:"rgba(0, 0, 0, 0.2)"},this._loadingNumber=0,this.config={},this._container=null,this._savedFilename=null,this._externalViewerUid=null,this._oPub=null,this._areaDetectCallback=null,this._perspectiveCallback=null,this._licenseCallback=null,this._filterHandleList=[],this._savePhotoCallback=null,this._insertPhotoCallback=null,this._removeImageCallback=null,this._changeIndexCallback=null,this._freeCallback=null,this._loadCallback=null,this._exiting=!1,this._oPub=P,this._cameraMng=new gt(this._oPub),this._cameraView=new an(this._oPub,this._cameraMng.videoEl),this._uiRouters=new vn,this.captureLoop=new Jn(this),document.addEventListener("click",cr),window.addEventListener("focus",oi),window.addEventListener("blur",Ur)}var P,J=ne.prototype;return J.bindView=function(P){return(P=Ye(P=void 0===P?this._container:P)?document.getElementById(P):P)?(this._cameraView||(this._cameraView=new an(this._oPub,this._cameraMng.videoEl)),this.captureLoop||(this.captureLoop=new Jn(this)),this._cameraView.bindView(P),this._container=P,!0):(ue(this._oPub,be_VIDEO_ELEMENT_REQUIRED),!1)},J.unbindView=function(){var P;return(this._container=null)!=(P=this._cameraView)&&P.dispose(),(this._cameraView=null)!=(P=this.captureLoop)&&P.dispose(),this.captureLoop=null,document.body.classList.remove(de.overflowHidden),!0},J.getVideoElement=function(){return this._cameraMng.videoEl},J.getCameraView=function(){return this._cameraView},J.play=(P=u(s().mark(function E(x,R,k,j,B){var q,ee,te;return s().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(void 0===B&&(B=!1),this._checkLicense(),!B&&this._runPlaying)return ve.abrupt("return",Promise.reject(be_VIDEO_NOT_STOP));ve.next=4;break;case 4:if(x&&(x instanceof HTMLElement||ai(this._oPub,typeof x,"HTMLElement"),this.bindView(x)),this._container){ve.next=7;break}return ve.abrupt("return",Promise.reject(be_VIDEO_ELEMENT_REQUIRED));case 7:if(void 0===R||qt(R)||ai(this._oPub,typeof R,"number"),void 0===k||qt(k)||ai(this._oPub,typeof k,"number"),this._runPlaying=!0,ve.prev=10,ee=this._cameraMng.getCurrentCamera()){ve.next=16;break}return ve.next=15,this._cameraMng.selectCamera();case 15:ee=ve.sent;case 16:return null==j?(te=V.scannerViewer.fullScreen,this.config&&this.config.scannerViewer&&null!=this.config.scannerViewer.fullScreen&&(te=this.config.scannerViewer.fullScreen),ee.setFillMode(te)):ee.setFillMode(j),ve.next=19,ee.play(R,k,this._cameraMng);case 19:q=ve.sent,ve.next=26;break;case 22:return ve.prev=22,ve.t0=ve.catch(10),this._runPlaying=!1,ve.abrupt("return",Promise.reject(ve.t0));case 26:return ve.abrupt("return",q);case 27:case"end":return ve.stop()}},E,this,[[10,22]])})),function(E,x,R,k,j){return P.apply(this,arguments)}),J.pause=function(){var P=this._cameraMng.getCurrentCamera();P&&P.pause()},J.stop=function(){var P=this._cameraMng.getCurrentCamera();P&&(P.stop(),this._runPlaying=!1)},J.resume=function(){var P=this._cameraMng.getCurrentCamera();P&&P.resume()},J.getStatus=function(){var P=this._cameraMng.getCurrentCamera();return P?P.getStatus():""},J.capture=function(P){var E=this._cameraMng.getCurrentCamera();return E?E.capture(P):Promise.reject(be_NO_CAMERA_SELECTED)},J.setImageDataBack=function(P){var E=this._cameraMng.getCurrentCamera();return E?E.setImageDataBack(P):(ue(this._oPub,be_NO_CAMERA_SELECTED),null)},J.getSourceList=function(){return this._checkLicense(),this._cameraMng.getAllCamerasInfo()},J.selectSource=function(){var P=u(s().mark(function E(x){var R;return s().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return this._checkLicense(),k.next=3,this._cameraMng.selectCamera(x);case 3:if(R=k.sent,this._runPlaying=!1,R){k.next=7;break}return k.abrupt("return",Promise.reject(be_SOURCE_NOT_FOUND));case 7:return k.abrupt("return",R?.getCameraInfo());case 8:case"end":return k.stop()}},E,this)}));return function(E){return P.apply(this,arguments)}}(),J.closeSource=function(){var P=u(s().mark(function E(){var x;return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(this._runPlaying=!1,x=this._cameraMng.getCurrentCamera())return x=x.getCameraInfo(),this._cameraMng.closeCamera(),R.abrupt("return",x);R.next=6;break;case 6:return R.abrupt("return",Promise.reject(be_NO_CAMERA_SELECTED));case 7:case"end":return R.stop()}},E,this)}));return function(){return P.apply(this,arguments)}}(),J.getCurrentSource=function(){var P=u(s().mark(function E(){var x;return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(x=this._cameraMng.getCurrentCamera())return R.abrupt("return",x.getCameraInfo());R.next=3;break;case 3:return R.abrupt("return",null);case 4:case"end":return R.stop()}},E,this)}));return function(){return P.apply(this,arguments)}}(),J.getCurrentResolution=function(){var P=u(s().mark(function E(){var x;return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(x=this._cameraMng.getCurrentCamera())return R.abrupt("return",x.getCurrentResolution());R.next=3;break;case 3:return R.abrupt("return",Promise.reject(be_NO_CAMERA_SELECTED));case 4:case"end":return R.stop()}},E,this)}));return function(){return P.apply(this,arguments)}}(),J.getResolution=function(){var P=u(s().mark(function E(){var x;return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(x=this._cameraMng.getCurrentCamera())return R.abrupt("return",x.getResolutions());R.next=3;break;case 3:return R.abrupt("return",Promise.reject(be_NO_CAMERA_SELECTED));case 4:case"end":return R.stop()}},E,this)}));return function(){return P.apply(this,arguments)}}(),J.setResolution=function(){var P=u(s().mark(function E(x){var R;return s().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(R=this._cameraMng.getCurrentCamera())return Ke(x),k.abrupt("return",R.setResolution(x.width,x.height));k.next=5;break;case 5:return k.abrupt("return",Promise.reject(be_NO_CAMERA_SELECTED));case 6:case"end":return k.stop()}},E,this)}));return function(E){return P.apply(this,arguments)}}(),J.getVideoSetting=function(){var P=this._cameraMng.getCurrentCamera();return P?P.getVideoSetting():(ue(this._oPub,be_NO_CAMERA_SELECTED),null)},J.toggleCamera=function(){var P=u(s().mark(function E(x,R){var k;return s().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(k=this._cameraMng.getCurrentCamera())return j.abrupt("return",k.toggleCamera(x,R,this._cameraMng));j.next=3;break;case 3:return j.abrupt("return",Promise.reject(be_NO_CAMERA_SELECTED));case 4:case"end":return j.stop()}},E,this)}));return function(E,x){return P.apply(this,arguments)}}(),J.show=function(){return!!this._container&&this.bindView()},J.isHidden=function(){return!this._container},J.hide=function(){this.unbindView()},J.getAreaDetectCallback=function(){return this._areaDetectCallback},J.getPerspectiveCallback=function(){return this._perspectiveCallback},J.getLicenseCallback=function(){return this._licenseCallback},J.getSavePhotoCallback=function(){return this._savePhotoCallback},J.getInsertPhotoCallback=function(){return this._insertPhotoCallback},J.getRemovePhotoCallback=function(){return this._removeImageCallback},J.getChangeIndexCallback=function(){return this._changeIndexCallback},J.getFreeHandle=function(){return this._freeCallback},J.getLoadCallback=function(){return this._loadCallback},J.bindAreaDetectFunction=function(P){return!!Je(P)&&(this._areaDetectCallback=P,!0)},J.bindPerspectiveFunction=function(P){return!!Je(P)&&(this._perspectiveCallback=P,!0)},J.bindLicenseCallback=function(P){return!!Je(P)&&(this._licenseCallback=P,!0)},J.bindLoadHandle=function(P){return!!Je(P)&&(this._loadCallback=P,!0)},J.bindFilterHandleList=function(P){return!!Fe(P)&&(this._filterHandleList=P,!0)},J.bindFreeHandle=function(P){return!!Je(P)&&(this._freeCallback=P,!0)},J.bindSavePhotoCallback=function(P){return!!Je(P)&&(this._savePhotoCallback=P,!0)},J.bindInsertPhotoCallback=function(P){return!!Je(P)&&(this._insertPhotoCallback=P,!0)},J.bindRemovePhotoCallback=function(P){return!!Je(P)&&(this._removeImageCallback=P,!0)},J.bindChangeIndexCallback=function(P){return!!Je(P)&&(this._changeIndexCallback=P,!0)},J.showDocumentScanPage=function(){var P=u(s().mark(function E(x,R){var k,j,B;return s().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return void 0===x&&(x={}),this._checkLicense(),this.captureLoop||(this.captureLoop=new Jn(this)),k=this._uiRouters.showDocumentScanPage(x,R,this),j=this,B=function(){var ee=u(s().mark(function te(ve,Ge,ht){var pt,vt;return s().wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return pt=k.insertDataByIndex(ve,Ge,ht),vt={action:"add",fileName:k.getFileName(),fromViewerBufferChanged:!1},Tt.next=4,j.syncFile(vt,[pt]);case 4:case"end":return Tt.stop()}},te)}));return function(te,ve,Ge){return ee.apply(this,arguments)}}(),this.bindInsertPhotoCallback(B),B=function(){var ee=u(s().mark(function te(ve,Ge){var ht;return s().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return k.removeDataByIndex(ve,Ge),ht={action:"remove",fileName:k.getFileName(),fromViewerBufferChanged:!1},pt.next=4,j.syncFile(ht);case 4:case"end":return pt.stop()}},te)}));return function(te,ve){return ee.apply(this,arguments)}}(),this.bindRemovePhotoCallback(B),q.next=11,k.playVideo();case 11:return q.abrupt("return",k);case 12:case"end":return q.stop()}},E,this)}));return function(E,x){return P.apply(this,arguments)}}(),J.showInsertPage=function(){var P=u(s().mark(function E(x,R){var k;return s().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return void 0===x&&(x={}),this._checkLicense(),k=this._uiRouters.showInsertPage(x,R,this),j.next=5,k.playVideo();case 5:return j.abrupt("return",k);case 6:case"end":return j.stop()}},E,this)}));return function(E,x){return P.apply(this,arguments)}}(),J.showDocumentEditPage=function(P,E){return this._checkLicense(),this._uiRouters.showDocumentEditPage(P,E,this)},J.showCropPage=function(P,E){return this._checkLicense(),this._uiRouters.showCropPage(P,E,this)},J.navigateToPage=function(){var P=u(s().mark(function E(x,R){return s().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",this._uiRouters.navigateTo(x,R));case 1:case"end":return k.stop()}},E,this)}));return function(E,x){return P.apply(this,arguments)}}(),J.destroyRemovedPages=function(){return this._uiRouters.destroyRemovedPages()},J.navigateBack=function(){var P=u(s().mark(function E(x,R){var k,j,B,q;return s().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return void 0===R&&(R=!0),k=q=!0,1==(x=void 0===x?1:x)&&(k=q=!1),this._uiRouters.navigatePopPageSync(x,q),ee.next=7,this._uiRouters.resetCurrentPageAfterPopPage(k);case 7:if(j=ee.sent,B=this._uiRouters.getRemovedPages(),1!=x){ee.next=14;break}if(j)return ee.next=13,j.show();ee.next=13;break;case 13:B[0].hide();case 14:if(R&&this._uiRouters.destroyRemovedPages(),(!j||j instanceof pr)&&this._cameraMng.getCurrentCamera()&&this.closeSource(),!j){ee.next=20;break}j instanceof pr&&(this.bindView(q=j.element.children[1]),j.pageName==X&&j.getDcs().emit("focusPage")),ee.next=22;break;case 20:return this.unbindView(),ee.abrupt("return",[]);case 22:return ee.abrupt("return",B);case 23:case"end":return ee.stop()}},E,this)}));return function(E,x){return P.apply(this,arguments)}}(),J.redirectToHome=function(){var P=u(s().mark(function E(){return s().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",this._uiRouters.redirectToHome());case 1:case"end":return x.stop()}},E,this)}));return function(){return P.apply(this,arguments)}}(),J.closeAllPages=function(){var P;this._uiRouters.closeAllPages(),null!=(P=this._container)&&P.classList.remove(de.relative),this._cameraMng.getCurrentCamera()&&this.closeSource(),document.body.classList.remove(de.overflowHidden)},J._checkLicense=function(){return this._licenseCallback&&0!==this._licenseCallback().errorCode&&ue(this._oPub,be_LICENSE_INVALID),!0},J.showLoading=function(R){this._loadingNumber++,R&&Ie.log(["show loading: ",R,", num: ",this._loadingNumber].join("")),R=this.getCurrentPage();var E,x,k={background:this._loadingConfig.background};R instanceof fn?(E=(E=null==(E=R.options)||null==(E=E.documentEditorSettings)?void 0:E.bodyStyle)||se(this.config.documentEditorSettings,"bodyStyle"),R.options&&R.options.documentEditorSettings&&(k.wrapperEl=R.options.documentEditorSettings.element,k.wrapperEl&&(k.confined=!0))):R instanceof pr&&(E=(E=null==(x=R.options)||null==(x=x.scannerViewer)?void 0:x.bodyStyle)||se(this.config.scannerViewer,"bodyStyle"),R.options&&R.options.scannerViewer&&(k.wrapperEl=R.options.scannerViewer.element,k.wrapperEl&&(k.confined=!0))),E&&Ye(E.loaderBarSource)&&""!=E.loaderBarSource&&(k.imageSource=E.loaderBarSource),this._loadingConfig.imageSource!==k.imageSource&&(this._loadingConfig.imageSource=k.imageSource,f.Lib.hideMask()),f.Lib.showMask(k)},J.setLoadingNumber=function(P){this._loadingNumber=P},J.hideLoading=function(P){this._loadingNumber--,P&&Ie.log(["hide loading: ",P,", num: ",this._loadingNumber].join("")),this._loadingNumber<1&&(f.Lib.hideMask(),this._loadingNumber=0)},J.getDetectArea=function(P){return ze(P,this)},J.filterHandler=function(){var P=u(s().mark(function E(x,R){var k;return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return k=se(this.config,"documentEditorSettings.filter"),B.abrupt("return",function(){return ot.apply(this,arguments)}(this,x,this._filterHandleList,k=k.valueList,R));case 4:case"end":return B.stop()}},E,this)}));return function(E,x){return P.apply(this,arguments)}}(),J.filterHandlerByIImageData=function(){var P=u(s().mark(function E(x,R,k){var j;return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",function(){return Lt.apply(this,arguments)}(x,R,this._filterHandleList,j=(void 0===(j=(void 0===(j=this.config.documentEditorSettings)?{}:j).filter)?{}:j).valueList,k));case 4:case"end":return B.stop()}},E,this)}));return function(E,x,R){return P.apply(this,arguments)}}(),J.packageBlobItemFromIImageData=function(P,E,x,R,k){return St(P,this,E=void 0!==E&&E,x=void 0!==x&&x,R=void 0!==R&&R,null,k)},J.on=function(P,E){this._oPub.on(P,E)},J.once=function(P,E){this._oPub.once(P,E)},J.off=function(P,E){this._oPub.off(P,E)},J.emit=function(P){for(var E,x=arguments.length,R=new Array(1<x?x-1:0),k=1;k<x;k++)R[k-1]=arguments[k];(E=this._oPub).emit.apply(E,[P].concat(R))},J.getCurrentPage=function(){return this._uiRouters.currentPage},J.getPreviousPage=function(){return this._uiRouters.previousPage},J.getPreviousPageByPage=function(P){for(var E=this._uiRouters.path,x=-1,R=0;R<E.length;R++)if(P==E[R]){x=R;break}return 0<x?E[x-1]:null},J.dispose=function(){var P;document.removeEventListener("click",cr),window.removeEventListener("focus",oi),window.removeEventListener("blur",Ur),Qn.clear(),Cr.clear(),(this._container=null)!=(P=this._cameraView)&&P.dispose(),(this._cameraView=null)!=(P=this._cameraMng)&&P.destroy(),(this._cameraMng=null)!=(P=this._uiRouters)&&P.closeAllPages(),(this._uiRouters=null)!=(P=this.captureLoop)&&P.dispose(),this.captureLoop=null,this._areaDetectCallback=null,this._perspectiveCallback=null,this._licenseCallback=null,this._filterHandleList=[],this._savePhotoCallback=null,this._insertPhotoCallback=null,this._removeImageCallback=null,this._changeIndexCallback=null,this._freeCallback=null,this._loadCallback=null},J.addGlobalClickEvent=function(P,E){var x;Je(E)&&(x=this,Qn.set(P,function(R){E(R,x)&&x.removeGlobalClickEvent(R)}))},J.removeGlobalClickEvent=function(P){Qn.delete(P)},J.addGlobalBlurEvent=function(P,E){var x;Je(E)&&(x=this,Cr.set(P,function(R){E(R,x)&&x.removeGlobalBlurEvent(R)}))},J.removeGlobalBlurEvent=function(P){Cr.delete(P)},J.addGlobalFocusEvent=function(P,E){var x;Je(E)&&(x=this,yr.set(P,function(R){E(R,x)&&x.removeGlobalBlurEvent(R)}))},J.removeGlobalFocusEvent=function(P){yr.delete(P)},J.getCameraManage=function(){return this._cameraMng},J.isRunPlaying=function(){return this._runPlaying},J.setSavedFilename=function(P){this._savedFilename=P},J.getSavedFilename=function(){return this._savedFilename},J.setExternalViewerUid=function(P){P&&(this._externalViewerUid=P)},J.getExternalViewerUid=function(){return this._externalViewerUid},J.openSavedFile=function(P){var E=this.getSavedFilename();return E?(Ie.log("open file: "+E),P.File.openFile(E)):(Ie.log("open file: "+Z),P.File.openFile(Z)),!0},J.clearExitFlag=function(){this._exiting=!1},J.exit=function(P){this._exiting=!0,this._freeCallback&&this._freeCallback(),document.body.classList.remove(de.overflowHidden),this._savedFilename&&(this._savedFilename=null)},J.syncFile=function(){var P=u(s().mark(function E(x,R){var k,j,B,q,ee;return s().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(this._exiting)return te.abrupt("return");te.next=2;break;case 2:if(j=!1,!x){te.next=13;break}if("remove"!=x.action){te.next=8;break}te.next=12;break;case 8:if("add"!=x.action){te.next=11;break}te.next=12;break;case 11:return te.abrupt("return");case 12:void 0!==x.fromViewerBufferChanged&&(j=x.fromViewerBufferChanged);case 13:if(!(0<(B=this._uiRouters.path).length)){te.next=60;break}if((ee=B[B.length-1])instanceof fn&&(q=ee.getCurrentEditUid()),!((k=B[0])instanceof pr)){te.next=32;break}if(1<B.length)return k=B[1],te.next=23,k.syncFileFromExternalEvent(j,R);te.next=30;break;case 23:if(!(2<B.length)){te.next=30;break}if(!((k=B[2])instanceof ki)){te.next=28;break}te.next=30;break;case 28:return te.next=30,k.syncFileFromExternalEvent(j,R);case 30:te.next=41;break;case 32:return te.next=34,k.syncFileFromExternalEvent(j);case 34:if(!(1<B.length)){te.next=41;break}if(!((k=B[1])instanceof ki)){te.next=39;break}te.next=41;break;case 39:return te.next=41,k.syncFileFromExternalEvent(j);case 41:if(!ee){te.next=60;break}if(Ye(q)&&""!=q){te.next=48;break}if(ee instanceof ki)return te.abrupt("return");te.next=47;break;case 47:q=ee.getCurrentEditUid();case 48:if(!(ee instanceof Mr)){te.next=58;break}if(ee.isInsertingImage())return te.next=52,ee.clearInserting();te.next=54;break;case 52:te.next=56;break;case 54:return te.next=56,ee.setEditUidAfterSyncImages(q);case 56:te.next=60;break;case 58:return te.next=60,ee.setEditUidAfterSyncImages(q);case 60:case"end":return te.stop()}},E,this)}));return function(E,x){return P.apply(this,arguments)}}(),ne}();function cr(ne){Qn.forEach(function(J,P){Je(J)&&J(P)})}function Ur(ne){Cr.forEach(function(J,P){Je(J)&&J(P)})}function oi(ne){yr.forEach(function(J,P){Je(J)&&J(P)})}function ai(ne,J,P){ne&&ne.emit("typeError",J,P)}var Wr=function(ne){function J(E){var x=ne.call(this,E)||this;return x.errorMessage="ok",x.errorCode=0,x._on(G,x.updateErrorMessage.bind(l(x))),x._on("error",function(R){var k=new Error(R.message);k.code=R.code,x._throwErr(k)}),x._on("typeError",function(R,k){(R=new Error("Argument of type '"+R+"' is not assignable to parameter of type '"+k+"'.")).code=-4212,x._throwErr(R)}),x._on("valueError",function(R,k){(R=new Error("The argument '"+R+"' is not valid for the parameter '"+k+"'")).code=-4213,x._throwErr(R)}),x}c(J,ne);var P=J.prototype;return P.updateErrorMessage=function(E){this.errorMessage=E.message,this.errorCode=E.code},P._throwErr=function(E){throw this.updateErrorMessage(E),E},J}(gn);un=function(ne){function J(){var E=ne.call(this,new rn)||this;return E.Error=null,E.videoShown=!1,E._dvs=null,E._dcs=null,E.Error=new Wr(E._oPub),E._dcs=new Nr(E._oPub),E}c(J,ne);var P=J.prototype;return P.notBindCamera=function(){return!this._dvs},P.bindCamera=function(E,x){var R=this._dcs.getLicenseCallback();if(R&&0!==R().errorCode)return this._e(C),!1;(this._dvs=x).ViewControl.bindViewUiConstructor(E),this._dcs.off("video-closed"),this._dcs.off("video-error");var k=this;return this._dcs.on("video-closed",function(){var j;k.videoShown=!1,lt(k._dcs),null!=(j=x._oPub)&&j.emit("video-closed")}),this._dcs.on("video-error",function(j){x._oPub.emit("video-error",j)}),this._e(p),!0},P.bindAreaDetectFunction=function(E){return Je(E)?(this._dcs.bindAreaDetectFunction(E),this._e(p),!0):(this._e(m),!1)},P.bindPerspectiveFunction=function(E){return Je(E)?(this._dcs.bindPerspectiveFunction(E),this._e(p),!0):(this._e(m),!1)},P.bindLicenseCallback=function(E){return Je(E)?(this._dcs.bindLicenseCallback(E),this._e(p),!0):(this._e(m),!1)},P.bindSavePhotoCallback=function(E){return Je(E)?(this._dcs.bindSavePhotoCallback(E),this._e(p),!0):(this._e(m),!1)},P.bindInsertPhotoCallback=function(E){return Je(E)?(this._dcs.bindInsertPhotoCallback(E),this._e(p),!0):(this._e(m),!1)},P.bindRemovePhotoCallback=function(E){return Je(E)?(this._dcs.bindRemovePhotoCallback(E),this._e(p),!0):(this._e(m),!1)},P.bindFilterHandleList=function(E){return this._dcs.bindFilterHandleList(E),this._e(p),!0},P.bindFreeHandle=function(E){return Fe(E)?(this._dcs.bindFreeHandle(E),this._e(p),!0):(this._e(m),!1)},P._e=function(E){ne.prototype._emit.call(this,G,E)},P.dispose=function(){var E;ne.prototype.dispose.call(this),null!=(E=this.Error)&&E.dispose(),this.Error=null,this._dcs&&(this._dcs.exit(this._dvs),this._dcs.off("video-closed"),this._dcs.off("video-error"),this._dcs.dispose()),this._dcs=null},P.on=function(E,x){ne.prototype._on.call(this,E,x)},P.emit=function(E){for(var x,R=arguments.length,k=new Array(1<R?R-1:0),j=1;j<R;j++)k[j-1]=arguments[j];(x=ne.prototype._emit).call.apply(x,[this,E].concat(k))},P.off=function(E,x){ne.prototype._off.call(this,E,x)},J}(gn),gn=function(ne){function J(){return ne.call(this)||this}c(J,ne);var E,P=J.prototype;return P.showVideo=(E=u(s().mark(function x(R,k){var j;return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(this.videoShown)return B.abrupt("return",Promise.reject(D));B.next=2;break;case 2:if(R){B.next=4;break}return B.abrupt("return",Promise.reject(S));case 4:if(this._dvs){B.next=6;break}return B.abrupt("return",Promise.reject(T));case 6:return this.videoShown=!0,(j=xe(R,ut(V))).scannerViewer&&(this._dcs.config.scannerViewer=j.scannerViewer),j.documentEditorSettings&&(this._dcs.config.documentEditorSettings=j.documentEditorSettings),j.saveData=!0,j.fromInternal=!0,B.prev=12,this._dcs.clearExitFlag(),this._dcs.setSavedFilename(k),B.next=17,this._dcs.showDocumentScanPage(j,this._dvs);case 17:B.next=23;break;case 19:throw B.prev=19,B.t0=B.catch(12),this.videoShown=!1,B.t0;case 23:return this.videoShown=!0,B.next=26,this._dcs.getCurrentResolution();case 26:return B.abrupt("return",B.sent);case 27:case"end":return B.stop()}},x,this,[[12,19]])})),function(x,R){return E.apply(this,arguments)}),P.closeVideo=function(){this._dcs.closeAllPages(),this._dcs.exit(this._dvs)},J}(un),un=function(ne){function J(){return ne.call(this)||this}c(J,ne);var P=J.prototype;return P.createEditPage=function(E,j){if(!j)throw S;var R=j.fileName;if(!Ye(R)||""==R)throw M;var k=j.viewerUid;(j=xe(j,ut(V))).initFileName=R,j.scannerViewer&&(this._dcs.config.scannerViewer=j.scannerViewer,delete j.scannerViewer);var B,q,ee=!0;return j.documentEditorSettings&&(this._dcs.config.documentEditorSettings=j.documentEditorSettings,(void 0===(q=j.documentEditorSettings.defaultViewerName)?fe:q).toLowerCase()==fe.toLowerCase()?(B="crop",Ye(q=null==(q=this._dcs.config)||null==(q=q.documentEditorSettings)||null==(q=q.cropViewer)?void 0:q.visibility)&&"hidden"==q.toLowerCase()&&(ee=!1)):B="edit"),this._dcs.setSavedFilename(R),this._dcs.setExternalViewerUid(k),j.saveData=!0,j.fromInternal=!1,j.curIndex=E,j.doFillData=!0,this._dcs.clearExitFlag(),"crop"==B&&ee?this._dcs.showCropPage(j,this._dvs):this._dcs.showDocumentEditPage(j,this._dvs)},P.syncFile=function(E){this._dcs.syncFile(E)},P.removeEditPage=function(E){try{lt(this._dcs),this._dcs.closeAllPages(),this._dcs.stop(),this._dcs.exit(null),E.isDestroyed||E.destroy()}catch{return!1}return!0},J}(un),window.Dynamsoft||(window.Dynamsoft={}),window.Dynamsoft.CameraViewer=Nr,window.Dynamsoft.CameraModel=gn,window.Dynamsoft.DocumentEditManager=un}()}function a(o){var u=r[o];return void 0!==u||(u=r[o]={exports:{}},t[o](u,u.exports,a)),u.exports}}),Q.AddonReady(function(e,n){var t;e.product.bHTML5Edition&&!Q.navInfoSync.bIE&&(e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(r){function a(){this._stwain=r,this._viewer=null}a.prototype._getCameraViewer=function(){return null==this._viewer&&(e.log("camera addon: bind viewer."),this._viewer=new Q.CameraViewer,this._stwain._ImgManager.getWebViewer().bindCameraForCameraManager()),this._viewer},a.prototype._checkWasmAndLic=function(){var o=!0;return e.detect.wasmScriptLoaded||(Q.DWT.UseService&&!Q.DWT.UseCameraAddonWasm?e.Errors.WasmNotLoaded_UseWasmFalse(this._stwain):e.Errors.WasmNotLoaded(this._stwain),o=!1),e.License.checkProductKey(this._stwain,{Webcam:!0},!0)||(e.log("camera addon: check camera license failed."),o=!1),o&&!e.License.checkProductKey(this._stwain,{Webcam:!0,Wasm:!0},!0)&&(e.log("camera addon: check camera wasm license failed."),o=!1),!o&&{code:this._stwain._errorCode,message:this._stwain._errorString}},a.prototype.getSourceList=function(){var o=this._checkWasmAndLic();return o?e.Promise.reject(o):this._getCameraViewer().getSourceList()},a.prototype.selectSource=function(o){var u=this._checkWasmAndLic();return u?e.Promise.reject(u):(this._getCameraViewer().hide(),this._getCameraViewer().selectSource(o))},a.prototype.closeSource=function(){var o=this._checkWasmAndLic();return o?e.Promise.reject(o):(this._getCameraViewer().hide(),o=this._getCameraViewer().closeSource(),this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()),o)},a.prototype.play=function(o,u,s){var f,v,l=this._checkWasmAndLic();return l?e.Promise.reject(l):this._stwain._ImgManager.getWebViewer()._imageEditorInner&&this._stwain._ImgManager.getWebViewer()._imageEditorInner.bShowImageEditForFullScreen?(e.Errors.ImageEditorOpenCannotPlayVideo(this._stwain),e.Promise.reject({code:this._stwain._errorCode,message:this._stwain._errorString})):((l=o)||(this._stwain._ImgManager.getWebViewer().myViewer.bOnlyShowThumbnailsView||!this._stwain._ImgManager.getWebViewer().myViewer.showMain?(o=e.one(["#showImageArea",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join("")))&&0<o.length&&o[0].className.indexOf("DVS_disabled")<0&&(l=o[0]):(o=e.one(["#container",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join("")))&&0<o.length&&o[0].className.indexOf("DVS_disabled")<0&&(l=o[0])),l?("object"==typeof u&&(f=u.width,v=u.height),(l=l&&"DIV"==l.nodeName?l:document.getElementById(l)).offsetHeight||l.scrollHeight||l.clientHeight||(l.style.height="200px"),l.offsetWidth||l.scrollWidth||l.clientWidth||(l.style.width="200px"),this._getCameraViewer().show()):((o=this._getCameraViewer())&&o.hide(),this._stwain._ImgManager.getWebViewer().render()),e.log("camera addon: play."),e.isUndefined(s)&&(s=!1),this._getCameraViewer().play(l,f,v,s))},a.prototype.pause=function(){return e.log("camera addon: pause."),this._getCameraViewer().pause()},a.prototype.resume=function(){return e.log("camera addon: resume."),this._getCameraViewer().resume()},a.prototype.getStatus=function(){return e.log("camera addon: get status."),this._getCameraViewer().getStatus()},a.prototype.capture=function(){var o=this._checkWasmAndLic(),u=this._stwain,s=u.GetCurrentDocumentName();return o?e.Promise.reject(o):(""==s&&(s=u._ImgManager.getWebViewer().GetDefaultFileName()),e.log("camera addon: start capture."),this._getCameraViewer().capture().then(function(f){return e.log("camera addon: captured."),new e.Promise(function(v,l){var I=f.imageData||f.blob,c=-1,_=Q.DWT.EnumDWT_ImageType;u._bLocalService?(e.isString(I.type)&&("application/pdf"==I.type?c=_.IT_PDF:"image/png"==I.type?c=_.IT_PNG:"image/jpeg"==I.type||"image/jpg"==I.type?c=_.IT_JPG:"image/bmp"==I.type?c=_.IT_BMP:"image/tiff"==I.type||"image/tif"==I.type?c=_.IT_TIF:"image/jp2"==I.type&&(c=_.IT_J2K)),u.__captureImage(I,c,function(){e.log("camera addon: loaded image from capture."),v(I)},function(h,y){e.log("camera addon: failed to load image from capture."),l({code:h,message:y})})):u._innerSendToMobile("LoadImageFromBinary",[I,!0,null,s],0,function(){e.log("camera addon: loaded image from capture."),v(I)},function(h,y){e.log("camera addon: failed to load image from capture."),l({code:h,message:y})})})}))},a.prototype.stop=function(){this._getCameraViewer().hide(),e.log("camera addon: stop.");var o=this._getCameraViewer().stop();return this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()),this._stwain._ImgManager.getWebViewer().render(),o},a.prototype.show=function(){return e.log("camera addon: show."),this._getCameraViewer().show()},a.prototype.hide=function(){return e.log("camera addon: hide."),this._getCameraViewer().hide()},a.prototype.getCurrentResolution=function(){return e.log("camera addon: get current resolution."),this._getCameraViewer().getCurrentResolution()},a.prototype.getCurrentSource=function(){return e.log("camera addon: get current source."),this._getCameraViewer().getCurrentSource()},a.prototype.getResolution=function(){var o=this._checkWasmAndLic();return o?e.Promise.reject(o):(e.log("camera addon: get resolution."),this._getCameraViewer().getResolution())},a.prototype.setResolution=function(o){var u=this._checkWasmAndLic();return u?e.Promise.reject(u):(e.log("camera addon: set resolution."),this._getCameraViewer().setResolution(o))},a.prototype.showVideo=function(o,u,s,f){var v=this._checkWasmAndLic();return v?e.Promise.reject(v):(this._getCameraViewer(),e.log("camera addon: show video."),this._stwain._ImgManager.getWebViewer().showVideo(o,u,s,f))},a.prototype.scanDocument=function(o){var u=this._checkWasmAndLic();return u?e.Promise.reject(u):(this._getCameraViewer(),e.log("camera addon: scan document."),this._stwain._ImgManager.getWebViewer().showVideoEx(o))},a.prototype.closeVideo=function(){var o=this._checkWasmAndLic();return o?e.Promise.reject(o):(e.log("camera addon: close video."),this._stwain._ImgManager.getWebViewer().closeVideo())},a.prototype.on=function(o,u){"video-closed"!=o&&"video-error"!=o?e.Errors.EventNotExist(this._stwain):e.isFunction(u)?(e.log("camera addon: add event "+o),this._stwain._ImgManager.getWebViewer().camera_on(o,u)):e.Errors.CallbackNotAFunction(this._stwain)},a.prototype.off=function(o,u){"video-closed"!=o||"video-error"!=o?e.Errors.EventNotExist(this._stwain):e.isUndefined(u)?this._stwain._ImgManager.getWebViewer().off(o):e.isFunction(u)?(e.log("camera addon: remove event "+o),this._stwain._ImgManager.getWebViewer().off(o,u)):e.Errors.CallbackNotAFunction(this._stwain)},r.__addon=r.__addon||{},r.__addon.Camera=new a}),t=[Q.DWT.ResourcesPath,"/addon/dynamsoft.webtwain.addon.camera.css",e.timestamp].join(""),e.getCss(t))}),function(e){e.DWT||(e.DWT={}),e.Lib||(e.Lib={})}(Q=window.Dynamsoft||{}),Q.aryAddonReadyFun=Q.aryAddonReadyFun||[],Q.AddonReady=Q.AddonReady||function(e){Q.aryAddonReadyFun.push(e)},Q.AddonReady(function(e,n){function t(){var F,U=!1,H=Q.navInfoSync.bMobile;return Q.DWT&&(U=!1===Q.DWT.UseLocalService),Q.navInfo&&(F=Q.navInfo,H=H||F.bPad||F.biPhone||F.biPad),U||H}Q.DWT.EnumTransferErrorCode={TRANS_OK:0,TRANS_URL_MALFFORMAT:1,TRANS_FAILED_RESOLVE_PROXY:2,TRANS_FAILED_RESOLVE_HOST:3,TRANS_FAILED_CONNECT:4,TRANS_REMOTE_ACCESS_DENIED:5,TRANS_PARTIAL_FILE:6,TRANS_UPLOAD_FAILED:7,TRANS_READ_FAILED:8,TRANS_OUT_OF_MEMORY:9,TRANS_REMOTE_FULL_DISK:10,TRANS_OPERATION_TIMEOUT:11,TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14,TRANS_SERVICE_ERROR:15,TRANS_NOT_SEND:16,TRANS_WAITFOR_SEND:17,TRANS_SENDING:18,TRANS_PAUSE:19,TRANS_FINISHED:20,TRANS_NULL_POINTER:21,TRANS_INVALID_ID:22,TRANS_Failed:23,TRANS_SERVICE_ERROR_MORE_THAN_500:24,TRANS_SERVICE_ERROR_LESS_THAN_200:25,TRANS_SERVICE_ERROR_MORE_THAN_300:26,TRANS_CANNOT_FINDFILE:27,TRANS_ABORT:28,TRANS_NOT_FINISHED:29,TRANS_TASK_PREPARE_INIT:30,TRANS_TASK_INIT:31,TRANS_BEYOND_MAXSIZE:32};var r=Q,a=Q.dcp,o=[1,7,2,"1026"],u="upload_"+o.join(""),s={Version:"1.0",HttpVersion:"1.1",ServerUrl:"",FileName:"",VERIFYPEER:!1,VERIFYHOST:!1,BlockSize:10240,ThreadNum:1,OnUploadTransferPercentage:function(F,U){},OnRunSuccess:function(F){},OnRunFailure:function(F,U,H){}},f=0,v="",I=function(){f=-2,v="Upload failed because the url to upload to is invalid."},c=function(F,U,H){f=-3,F?v="Upload cancelled.":(v=U&&""!=U?"Upload failed with error: "+U:"Upload failed.",U&&""!=U&&(v=v+"("+H+")"))},p=function(){f=-7,v="The file name is incorrect in the upload job."},C=function(){f=-2400,v="File uploader addon doesn't work under current settings."},D=function(){f=0,v=""};function S(){}function M(F){this.job=F}function G(F){this.job=F}S.prototype={runWaiting:0,CreateJob:function(){var F={HttpHeader:{},documents:[],formFields:[],bEvent:!1};return e.mix(F,s),F.SourceValue=new M(F),F.FormField=new G(F),F},Run:function(F){var U,H=this,Z='""',X=F.ServerUrl,$="";if((!F.ar||!F.cu)&&r.DWT&&(r.DWT.ProductKey&&(Z='"'+r.DWT.ProductKey+'"'),r.DWT.handshakeCode||r.DWT.organizationID))return Q.DWT.lglic().then(function(Se){F.ar=Se.ar,F.cu=Se.cu,H.Run(F)}),!0;if(!e.isString(X)||""==X)return F.id=-1,I(),!F.bEvent&&e.isFunction(F.OnRunFailure)&&(F.bEvent=!0,F.OnRunFailure(F,f,v),F.bEvent=!1),!1;if(!F.documents||!e.isArray(F.documents)||F.documents.length<=0)return F.id=-1,f=-4,v="Upload failed because the file to upload has invalid content.",!F.bEvent&&e.isFunction(F.OnRunFailure)&&(F.bEvent=!0,F.OnRunFailure(F,f,v),F.bEvent=!1),!1;for(F.Url=X,delete F.ServerUrl,U=0;U<F.documents;U++){var V=F.documents[U];if(!e.isString(V.files)||""==V.files)return F.id=-1,p(),!F.bEvent&&e.isFunction(F.OnRunFailure)&&(F.bEvent=!0,F.OnRunFailure(F,f,v),F.bEvent=!1),!1;e.isString(V.remoteName)&&""!=V.remoteName||(V.remoteName="RemoteFile")}var De=F.SourceValue,fe=(delete F.SourceValue,F.FormField),je=(delete F.FormField,e.stringify(F));return je=e.replaceAll(je,'"',"'"),F.ServerUrl=X,delete F.Url,F.SourceValue=De,F.FormField=fe,X=['{"id":"',1,'","method":"RunUploadFile","version":"',u,'","parameter":[',Z,',"',je,'"'],F.ar&&F.cu?($=[',"',F.ar,'","',F.cu,'",0]}'].join(""),delete F.ar,delete F.cu,X.push($)):X.push("]}"),De=X.join(""),H.runWaiting++,Q.FileUploader._sendCmd("RunUploadFile",De,function(Se){var rt;H.runWaiting--,Se&&((rt=Se.UploadId)&&0<rt?(F.id=rt,r.FileUploader.map[F.id]=F,r.FileUploader.ids.push(Se.UploadId),F.OnUploadTransferPercentage&&F.OnUploadTransferPercentage(F,0)):(rt=Se.errorcode,Se=Se.errorstring,rt&&Se?(f=rt,v=Se):(f=-6,v="Cannot create an upload job."),!F.bEvent&&e.isFunction(F.OnRunFailure)&&(F.bEvent=!0,F.OnRunFailure(F,f,v),F.bEvent=!1)))},function(Se,rt,tt){H.runWaiting--,r.FileUploader.parseHttpErrors(Se,rt,tt),!F.bEvent&&e.isFunction(F.OnRunFailure)&&(F.bEvent=!0,F.OnRunFailure(F,f,v),F.bEvent=!1)}),!0},Cancel:function(F){return!F.id||F.id<0?(f=-5,v="Invalid upload job id.",!F.bEvent&&e.isFunction(F.OnRunFailure)&&(F.bEvent=!0,F.OnRunFailure(F,f,v),F.bEvent=!1),!1):(Q.FileUploader._sendCmd("DeleteUploadTask",'{"id":"1","method":"DeleteUploadTask","version":"'+u+'","parameter":["'+F.id+'"]}',function(H){r.FileUploader.deleteJobById(F.id)},function(H,Z,X){r.FileUploader.parseHttpErrors(H,Z,X),!F.bEvent&&e.isFunction(F.OnRunFailure)&&(F.bEvent=!0,F.OnRunFailure(F,f,v),F.bEvent=!1)}),!0)},CancelAllUpload:function(){var F=r.FileUploader.ids,U='{"id":"1","method":"DeleteUploadTask","version":"'+u+'","parameter":["'+F.join(",")+'"]}';return 0<this.runWaiting?(f=-8,v="Can not cancel all jobs when at least one job is still being created.",!1):(this.runWaiting<0&&(this.runWaiting=0),F.length<=0||Q.FileUploader._sendCmd("DeleteUploadTask",U,function(H){for(var Z=0;Z<F.length;Z++)r.FileUploader.deleteJobById(F[Z]);r.FileUploader.ids=[],r.FileUploader.map=[]},function(H,Z,X){r.FileUploader.parseHttpErrors(H,Z,X)}),!0)},OnUploadTransferPercentage:function(F,U){},OnRunSuccess:function(F){},OnRunFailure:function(F,U,H){}},(r.SourceValue=M).prototype.Add=function(F,U,H){var Z=this.job;if(!e.isString(F)||""==F)return p(),void(!Z.bEvent&&e.isFunction(Z.OnRunFailure)&&(Z.bEvent=!0,Z.OnRunFailure(Z,f,v),Z.bEvent=!1));H=H||"RemoteFile",F=Q.Lib.replaceAll(F,"\\\\","\\\\"),Z.documents.push({files:[F],fileName:U,remoteName:H})},r.FormField=G,r.FileUploader={ids:[],map:{},port:18625,protocol:"https://",ip:"127.0.0.1",wsUrl:"",running:!(G.prototype.Add=function(F,U){var H,Z,X=U,$=F;if(null==X&&(X=""),!e.isString($)||""==$||!e.isString(X)||(X=encodeURI(X),-1<($=encodeURI($)).indexOf("'")||-1<X.indexOf("'")))return!1;for(H=0;H<this.job.formFields.length;H++)if((Z=this.job.formFields[H]).name==$)return Z.value=X,!0;return this.job.formFields.push({name:$,value:X}),!0}),ws:null,nextLoopTime:600,deleteJobById:function(F){if(D(),t())return C(),!1;var U;if(F){for(U=0;U<r.FileUploader.ids.length;U++)if(F==r.FileUploader.ids[U]){r.FileUploader.ids.splice(U,1);break}var H=r.FileUploader.map[F];for(H.SourceValue.job=null,delete H.SourceValue,H.FormField.job=null,delete H.FormField,delete r.FileUploader.map[F],U=H.documents.length-1;0<=U;U--)H.documents.splice(U,1);for(U=H.formFields.length-1;0<=U;U--)H.formFields.splice(U,1);Q.FileUploader._sendCmd("DeleteUploadTask",'{"id":"1","method":"DeleteUploadTask","version":"'+u+'","parameter":["'+F+'"]}')}},_sendCmdByWS:function(F,U,H){var Z;return r.FileUploader.ws?Z=r.FileUploader.ws:(Z=a.newWebsocket(r.FileUploader.wsUrl),r.FileUploader.ws=Z),Z.onopen=function(){1==Z.readyState?(Z.onopen=null,Z.send(F)):0==Z.readyState&&setTimeout(Z.onopen,100)},Z.onmessage=function(X){var $=X.data;if("object"==typeof $)return X=$=null,void H();X=$.replace(/\0/g,"");try{(X=e.parse(X))&&"result"in X?U(X.result):H()}catch{e.log($),H()}$=null},Z.onerror=function(X){X&&e.log("websocket error: "+X),H()},Z.onclose=function(X){Z.onclose=null,Z.onerror=null,Z.onmessage=null,r.FileUploader.ws=null},!0},_sendCmd:function(F,U,H,Z){return Q.DWT.ConnectWithSocket?_sendCmdByWS(U,H,Z):(F=[r.FileUploader.protocol,r.FileUploader.ip,":",r.FileUploader.port,"/dcp/",u,"/",F,"?type=1&dsver=",o.join(""),"&ts=",e.now()].join(""),e.ajax({url:F,method:"post",dataType:"json",processData:!1,data:U,onSuccess:H,onError:Z}))},parseHttpErrors:function(X,U,H){var Z;2==(X=X&&e.isArray(X)&&2<X.length?(Z=X[1],X[2]):(Z=U,H)).state&&0==X.status?"abort"===X.statusText?c(!0):I():c(!1,Z,X.status)},loadHttpBlob:function(F,U,H,Z,X,$,V){F={method:F,url:U,dataType:"blob",async:H,onSuccess:Z,onError:function(De,fe,je){r.FileUploader.parseHttpErrors(De,fe,je),e.isFunction(X)&&X()}},e.isFunction($)&&(F.beforeSend=function(De){De.addEventListener("progress",function(fe){delete fe.totalSize,delete fe.position,$(fe)},!1)}),e.ajax(F)},_OnPercentDone:function(){},Download:function(F,U,H){if(!e.isString(F))return f=-1,v="The zip file that contains the upload library (.dll) is invalid.",e.isFunction(H)&&H(f,v),!1;function Z(){return f=-9,v="The zip file that contains the upload library (.dll) download failed.",e.isFunction(H)&&H(f,v),!1}return r.FileUploader.loadHttpBlob("get",F,!0,function(X){a.loadZip(X,100,U,Z)},Z,!1)},Init:function(F,U,H){if(D(),t())return C(),e.isFunction(H)&&H(f,v),!1;function Z(){var X,$=Q.dcp.ports[0];$=Q.navInfoSync.bSSL?(X="https://",$[1]):(X="http://",$[0]),r.FileUploader.port=$,r.FileUploader.protocol=X,r.FileUploader.ip=a.host,r.FileUploader.wsUrl=a._getDcpWsPreUrl(0),r.FileUploader.running=!0,U(new S),setTimeout(r.FileUploader.StatusLoop,500)}Q.dcp.detect.bConnected?Z():Q.dcp.checkDcpV3(Q.DWT.ProductKey,H,Z)},Close:function(){Q.DWT.ConnectWithSocket&&r.FileUploader.ws&&(r.FileUploader.ws.close(),r.FileUploader.ws=null),r.FileUploader.running=!1},VersionInfo:function(F,U){return D(),t()?(C(),e.isFunction(U)&&U(f,v),!1):(Q.FileUploader._sendCmd("VersionInfo",'{"id":"1","method":"VersionInfo","version":"'+u+'","parameter":[]}',F,function(Z,X,$){r.FileUploader.parseHttpErrors(Z,X,$),e.isFunction(U)&&U(f,v)}),!0)},StatusLoop:function(){return D(),t()?(C(),!1):(r.FileUploader.GetUploadStatus(),r.FileUploader.running&&setTimeout(r.FileUploader.StatusLoop,r.FileUploader.nextLoopTime),!0)},GetUploadStatus:function(){if(D(),r.FileUploader.ids.length<=0)return!0;if(t())return C(),!1;var F='{"id":"1","method":"GetUploadStatus","version":"'+u+'","parameter":["'+r.FileUploader.ids.join(",")+'"]}';return Q.FileUploader._sendCmd("GetUploadStatus",F,function(U){if(e.isArray(U))for(var H=0;H<U.length;H++){var Z=(fe=U[H]).id,X=r.FileUploader.map[Z],$=fe.percentage,V=fe.errorcode,De=fe.response,fe=fe.errorstring;X&&(V==Q.DWT.EnumTransferErrorCode.TRANS_FINISHED?(X.OnUploadTransferPercentage(X,100,W(De)),!X.bEvent&&e.isFunction(X.OnRunSuccess)&&(X.bEvent=!0,X.OnRunSuccess(X,W(De)),X.bEvent=!1),r.FileUploader.deleteJobById(Z)):V==Q.DWT.EnumTransferErrorCode.TRANS_OK||V==Q.DWT.EnumTransferErrorCode.TRANS_NOT_SEND||V==Q.DWT.EnumTransferErrorCode.TRANS_WAITFOR_SEND||V==Q.DWT.EnumTransferErrorCode.TRANS_SENDING||V==Q.DWT.EnumTransferErrorCode.TRANS_PAUSE||V==Q.DWT.EnumTransferErrorCode.TRANS_TASK_PREPARE_INIT||V==Q.DWT.EnumTransferErrorCode.TRANS_TASK_INIT?X.OnUploadTransferPercentage(X,$,W(De)):(!X.bEvent&&e.isFunction(X.OnRunFailure)&&(X.bEvent=!0,X.OnRunFailure(X,V,fe,W(De)),X.bEvent=!1),r.FileUploader.deleteJobById(Z)))}},function(U,H,Z){}),!0}};var L=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function W(F){for(var U,H,Z,X,$=F.length,V=0,De="";V<$;){for(;U=L[255&F.charCodeAt(V++)],V<$&&-1==U;);if(-1==U)break;for(;H=L[255&F.charCodeAt(V++)],V<$&&-1==H;);if(-1==H)break;De+=String.fromCharCode(U<<2|(48&H)>>4);do{if(61==(Z=255&F.charCodeAt(V++)))return De}while(Z=L[Z],V<$&&-1==Z);if(-1==Z)break;De+=String.fromCharCode((15&H)<<4|(60&Z)>>2);do{if(61==(X=255&F.charCodeAt(V++)))return De}while(X=L[X],V<$&&-1==X);if(-1==X)break;De+=String.fromCharCode((3&Z)<<6|X)}return De}}),function(){var e=screen.width,n=e>550?550:e-10,t=e>680?680:e-10,r=0;function o(u,s,f){var l="flex:1;height:100%;display:flex;align-items:center;justify-content: center;font-size:14px";return Q.DWT.ShowDialog(500,0,["<div style=position:fixed;top:50%;left:50%;width:260px;transform:translate(-50%,-50%);background:#fff;z-index:999;border-radius: 5px;overflow: hidden;>",'<div style="padding:20px;font-size: 16px; color:black;height:70%;text-align:center;display:flex;align-items:center">',u,"</div>",'<div style="height:40px;background:#f5f5f5;display:flex;border-top: solid 1px #cdcccc" >','<span id="dynamsoft-confirm-dialog-yes" style="'+l+';color:#fe8e14;border-right: solid 1px #cdcccc">OK</span>','<span id="dynamsoft-confirm-dialog-no" style="'+l+'">Cancel</span></div>',"</div>"].join(""),!0,!0),new Promise(function(c){document.getElementById("dynamsoft-confirm-dialog-yes").addEventListener("click",function(){Q.DWT.CloseDialog(),c(s)}),document.getElementById("dynamsoft-confirm-dialog-no").addEventListener("click",function(){Q.DWT.CloseDialog(),c(f)})})}Q.OnWebTwainNotFoundOnWindowsCallback=function(u,s,f,v,l,I,c,_){Q._show_install_dialog(u,{default:s},f,Q.DWT.EnumDWT_PlatformType.enumWindow,v,l,I,c,!1,_)},Q.OnWebTwainNotFoundOnLinuxCallback=function(u,s,f,v,l,I,c,_,h,y){h||(h=Q.DWT.EnumDWT_PlatformType.enumLinux),Q._show_install_dialog(u,{default:s,deb:s,rpm:f},v,h,l,I,c,_,!1,y)},Q.OnWebTwainNotFoundOnMacCallback=function(u,s,f,v,l,I,c,_){Q._show_install_dialog(u,{default:s},f,Q.DWT.EnumDWT_PlatformType.enumMac,v,l,I,c,!1,_)},Q.dwt_change_install_url=function(u){var s=document.getElementById("dwt-btn-install");s&&(s.href=u)},Q.DWT_Reconnect=function(){var u=Q;if((new Date-r)/1e3>30){var s=document.getElementById("dwt-btn-install");s&&(s.innerHTML='Failed to connect to the service, have you run the setup?<br />If not, please run the setup and <a href="javascript:void(0)" onclick="Dynamsoft.DCP_DWT_onclickInstallButton()">click here to connect again</a>.')}else u.DWT?u.DWT.CheckConnectToTheService(function(){Q.DWT.ConnectToTheService()},function(){Q.DWT.NeedCheckWebTwainBySocket()?Q.DWT.CheckWebTwainBySocket(function(){Q.OnHTTPCorsError()},function(){setTimeout(Q.DWT_Reconnect,500)},function(){setTimeout(Q.DWT_Reconnect,500)}):setTimeout(Q.DWT_Reconnect,500)}):console.log("The Dynamsoft namespace is missing")},Q.DCP_DWT_onclickInstallButton=function(){return document.getElementById("dwt-btn-install")&&setTimeout(function(){var s=document.getElementById("dwt-install-url-div");s&&(s.style.display="none");var f=document.getElementById("dwt-btn-install");if(f&&"1"==f.getAttribute("html5")){var v=f.parentNode,l=document.createElement("div");l.id="dwt-btn-install",l.style.textAlign="center",l.style.paddingBottom="15px",l.innerHTML="Connecting to the service...",l.setAttribute("html5","1"),v.removeChild(f),v.appendChild(l),r=new Date,setTimeout(Q.DWT_Reconnect,10)}else(v=f.parentNode).removeChild(f)},10),!0},Q._show_install_dialog=function(u,s,f,v,l,I,c,_,h,y){return Q._show_install_dialog_Detail(u,s,f,v,l,I,c,_,h,y)},Q._show_install_dialog_Detail=function(u,s,f,v,l,I,c,_,h,y){var m,C,p=Q,D=Q.DWT.EnumDWT_PlatformType,S=v==D.enumLinux||v==D.enumEmbed||v==D.enumChromeOS||v==D.enumHarmonyOS;if(Q.DWT.bNpm&&Q.navInfoSync.bFileSystem)return Q._show_online_download_dialog(s,f,v);m=['<div class="dynamsoft-dwt-dlg-title">',h?"Please update your document scanning service":"Please complete one-time setup","</div>"],p.DWT?(C=S||Q.navInfoSync.bFirefox?"RESTART":"REFRESH",m.push('<div class="dynamsoft-dwt-installdlg-iconholder"> '),m.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 125px"></div>'),m.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>'),m.push('<img style="margin: 0px 134px 0px 0px" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABOklEQVRIie2WTW6DMBCFH4h1l22VqmqPVUEvEJa9gRt6FDhDpfx0FdJj+Arx3nldhEjEdchgWlaM9CSwMZ/fzMgQvX0TwvA+ePOpIsniRIwZGIl/n/8AGs3RWKB4JA4STjUKBo1EivLtGakEkP7Ru6vbpcpONzFxPFsazQloZyxEmkDepsYk0JIhkZGwzngfWRKvd0u1Pwf93k1NoBjg5uN+pbZuHn0gEFgQ2AVAdgTefQVzU9e2nzaplKbMkEhnK2W9oAOAC9IHIO+Yd5U/rJX2QbocnVSSqARuqse1Ki9BumrUp+U1gXkXRAoyBDIC1jNnCWRPG2Wug2SFrkkUnvHieaPqaxCpo3bL104rLySQviDbpNA0Sgl4W9kXfU9vjWPho+ZaHCHfo6r/kumfYUBEL1/jeJpqFBw/d5aBU2kHOMQAAAAASUVORK5CYII= alt="download">'),m.push('<img style="margin: 2px 132px 2px 0px" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAA+klEQVRIid2SMWoCQRiFv3GnW7BII6ZPqeAlorewtBELsZdFOz2Q0VYkXQ6QA9iaIqU+mx2Y3QRd12WKffCY4WdmPt5jzPRT5PQOfOSHnky6/rnoqd/cJFt/0FB6I3UkWOVmZbz+GcyjLEjgeSjRzc3KuCMxzIC8fQwsbtTxqJan/jz+r7qZ4LWC2pzbgpkDmclBAG3gO011T0U+g9Mv8PayTY4u0UIQV5jGORYsAcz4oA7wBWR+SUWJAM5Az17E6gFIGUXA2goGJR8wAK1dUuiwVdECnpQZ7cOggiWy5zCcgIkCcbCX2iUKB6pfdfVLFAwUiNS4f6QaXQHE5K75dPBEiQAAAABJRU5ErkJggg== alt="install">'),m.push('<img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAADI0lEQVRIibWXTUhUURTHf+/NsxRCp3QGwhKT/MDoAyNo1apmNhYkodGmaFOWmUXQcpgo2gRN5kerllEGLWqjBqZGFH2BlSRJRVqCjpNjYOaUc1q80fnovZmnMx34w+Odc+///u+9595zlbPPBAuWBbiBPcAOoASwR3xB4BPwAngIdOV2en+n6lA5k5zYDjQBJwCHlRECk0Ar4Mvr9AbNglQRMMFBEYZE8IjgSBKXiIJIm6Gg23PQVHHT038U24DrQL1FhamsHThl7/LOxysGYmAT6BCoT/ifDuoFOqbcHlsyYp9ATQZJF1AjcC2OOMZbh9CQacYYnPzu8tQlKrYLNP8/zkU0B1weeyxxk4AzkySqYvjfKXp6opx8IiuAr1jP05S2bQ3sL4a29zA++4/bD6xTBVwCjkwp3eGAo+WQnw1b8w1jHAIuTQRXppTuWgt1JaAA90egc9Q01K0JVGWCdHch1BTr33c/Q89Y0vAqLQxl6ZJWF8He9RAWuPURHo+nbFKqiZC3XEIFOLAB9hTqpDc/wHO/paZ5ahgwQtEqOFIGNtXYD3Boo076R+DGe3jmN441gibCNAmplKXA8QooyAb7CmgZhLlw1G9T4GgZ7HRCKAytg/DO9AI0tGlVYDhxy4cEmgdhOgSVdjizGXI03acpcKxCJ/01D1ffwdvgktNuWBV4ZeQc/QmX30BgDkpz4dxmWL0SGjbB9gKY+QNX3sLQ9LLy/bVyuE+qgQdmc5K/Es5vAWcO/A5Dlgo/QjrpyMySpjfW9qkC3QIBs9FNzsGlARj7qZNOzcHlAfgys+zTzS/QpYq+pC3JgqdCOvnLSbg4AN9m0zpW20oeeUMLNZdPhIlktdSPEFwbhIlZ8xgL8Ivgg+i1GBRoTEOFVTRu7NUrz9gq844IrWmoSYXW0l7v7YXdpUn8bjsNrAVqLO9Pa3Yv0veiJRZ78wK1Au0ZnN52gdryvvjyVjMY3Tz6y6EfvTJ0LlPlBHC6oi86vfGKzdfktgjlIlwQIbCEtQxE2pSbkQIotT1i5ou1hUebi+ijbXXEN0X00dYNdFf2e0OpOvwLFunYK2i9bNwAAAAASUVORK5CYII= alt="scan">'),m.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>'),m.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Install</span>'),m.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>'),m.push("</div>"),m.push("</div>"),f&&S&&(m.push('<div style="margin:10px 0 0 60px;">'),m.push('<div id="dwt-install-url-div">'),Q.navInfo.bArm64||Q.navInfo.bMips64||Q.navInfoSync.bChromeOS||Q.navInfoSync.bHarmonyOS||(m.push('<div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\''+s.deb+'\')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian)</label></div>'),m.push('<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\''+s.rpm+'\')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div>')),m.push("</div></div>")),m.push('<div><a id="dwt-btn-install" target="_blank" href="'),m.push(s.default),m.push('"'),m.push(f?' html5="1"':' html5="0"'),m.push(' onclick="Dynamsoft.DCP_DWT_onclickInstallButton()"><div class="dynamsoft-dwt-dlg-button">Download</div></a></div>'),f?l?(m.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'),m.push("If you still see the dialog after installing the scan service, please<br />"),m.push("1. Add the website to the zone of trusted sites.<br />"),m.push("IE | Tools | Internet Options | Security | Trusted Sites.<br />"),m.push("2. Refresh your browser."),m.push("</div>")):S&&(m.push('<div class="dynamsoft-dwt-dlg-tail">'),m.push('<div class="dynamsoft-dwt-dlg-red">After the installation, please <strong>'+C+"</strong>  your browser.</div>"),m.push("</div>")):(m.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'),l?(m.push("After the installation, please<br />"),m.push("1. Restart the browser<br />"),m.push('2. Allow "DynamicWebTWAIN" add-on to run by right clicking on the Information Bar in the browser.')):m.push('<div class="dynamsoft-dwt-dlg-red">After installation, please <strong>REFRESH</strong> your browser.</div>'),m.push("</div>")),p.DWT.ShowMessage(m.join(""),{width:n,headerStyle:1})):console.log("The Dynamsoft namespace is missing")},Q.OnWebTwainNeedUpgradeCallback=function(u,s,f,v,l,I,c,_){Q._show_install_dialog(u,s,f,v,l,I,c,_,!0,!0)},Q.OnWebTwainPostExecuteCallback=function(){Q.DWT?Q.DWT.OnWebTwainPostExecute():console.log("The Dynamsoft namespace is missing")},Q.OnRemoteWebTwainNotFoundCallback=function(u,s,f,v,l){Q.DWT?Q.DWT.ShowMessage((l?['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left;font-size:1.4em">',"Failed to connect to the Dynamsoft Service, please make sure that the certificate is valid.<br /><br />","</div>"]:['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',"Failed to connect to the Dynamsoft Service.<br />","Please make sure that the certificate is valid OR ","If you change the Dynamsoft.DWT.Host to your own IP/domain, do not forget to update the certificate accordingly.","</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>']).join(""),{width:n,headerStyle:1}):console.log("The Dynamsoft namespace is missing")},Q.OnRemoteWebTwainNeedUpgradeCallback=function(u,s,f,v){Q.DWT?Q.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',"Dynamsoft Service is outdated on the PC with IP/domain <br />",'"',s,'".<br />',"Please open the page on that PC to download and install it.","</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'].join(""),{width:n,headerStyle:1}):console.log("The Dynamsoft namespace is missing")},Q.OnWebTWAINDllDownloadSuccessful=function(){console.log("The Web TWAIN Module was downloaded successfully!")},Q.OnWebTWAINDllDownloadFailure=function(u,s,f){if(Q.DWT)return-2371==s&&Q.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',f,"</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">You can try <strong>REFRESHING</strong> your browser to try again. <br /> If the issue persists, please contact the website administrator.</div></div>'].join(""),{width:n,headerStyle:1}),!0;console.log("The Dynamsoft namespace is missing")},Q.OnGetServiceUpdateStatus=function(u,s,f){"Update skipped"!=f&&console.log(f)},Q.OnWebTWAINModuleDownloadManually=function(u,s,f,v,l,I){return Q._show_install_dialog("",u,!0,s,f,v,l,I,!1,!1)},Q.OnLTSLicenseError=function(u){var s="",v=Q.DWT.licenseException,l=0;v&&(l=v.code),(-2440==l||-2441==l||-2443==l||-2446==l||u.indexOf("Internet connection")>-1||u.indexOf("Storage")>-1)&&(s='<div>You can register for a free 30-day trial <a href="https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&deploymenttype=js" target="_blank" class="dynamsoft-major-color">here</a>. Make sure to select the product Dynamic Web TWAIN.</div>'),Q.DWT.ShowMessage([u,s].join(""),{width:t,headerStyle:2})},Q.OnLTSConnectionFailure=Q.OnLTSLicenseError,Q.OnLTSReturnedAnError=Q.OnLTSLicenseError,Q.OnLTSUUIDError=Q.OnLTSLicenseError,Q.OnLTSConnectionWarning=function(){var u=["Warning: You are seeing this dialog because Dynamic Web TWAIN has failed to connect to the License Tracking Server. ","A cached authorization is being used, and you can continue to use the software as usual. ","Please get connected to the network as soon as possible. ",Q.DWT.isPublicLicense()?'<a class="dynamsoft-major-color" href="https://www.dynamsoft.com/company/contact/">Contact Dynamsoft</a> ':"Contact the site administrator ","for more information."].join("");Q.DWT.ShowMessage(u,{width:t,caption:"Warning",headerStyle:2})},Q.OnLTSPublicLicenseMessage=function(u){Q.DWT.ShowMessage(u,{width:t,caption:"Warning",headerStyle:2})},Q.OnHTTPCorsError=function(){var u=["<div>The Connection from the insecure (HTTP) web page to the local 'Dynamsoft Service' failed!</div>",'<div style="margin-top:10px">To fix the issue, please update your website to HTTPS or refer to <br /><a target="_blank" href="https://www.dynamsoft.com/web-twain/docs/faq/http-insecure-websites-in-chromium-browser.html?ver=latest">this article</a> for other workarounds.</div>'].join("");Q.DWT.ShowMessage(u,{width:t,headerStyle:2})},Q.OnLicenseExpiredMessage=function(u,s){var f,v='<a target="_blank" href="https://www.dynamsoft.com/company/contact/">contact us</a>',l='<a target="_blank" href="https://www.dynamsoft.com/store/dynamic-web-twain/#DynamicWebTWAIN">online store</a>',I="https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product";s>5||(f=s>0?['<div style="padding:0 0 10px 0">Kindly note your trial key is expiring in ',s<=1?"1 day":parseInt(s)+" days",". Two quick steps to extend your trial:</div>",'<div style="margin:0 0 0 10px">1. <a target="_blank" href="',I,'">Request a new trial key</a> and follow the instructions to set the new key</div>','<div style="margin:0 0 0 10px">2. Refresh your scan page and try again</div>','<div style="padding:10px 0 0 0">If you run into any issues, please ',v,".</div>",'<div style="padding:0">If you are ready to purchase a full license, please go to the ',l," or ",v,".</div>"].join(""):['<div style="padding:0">Sorry. Your trial key has expired on ',u,". You can purchase a full license at the ",l,".</div>",'<div style="padding:0">Or, you can try requesting a new trial key at <a target="_blank" href="',I,'">this page</a>.</div>','<div style="padding:0">If you need any help, please ',v,".</div>"].join("")),f&&Q.DWT.ShowMessage(f,{width:t,caption:"Warning",headerStyle:2})},Q.OnLicenseError=function(u,s){Q.DWT.ShowMessage(u,{width:t,headerStyle:2})},Q.OnSSLCertInfo=function(u){},Q.funcConfirmRemove=function(){return o("Are you sure you want to delete this image?",!0,!1)},Q.funcConfirmExit=function(u){return u?o(" Are you sure you want to exit without saving?",!0,!1):Promise.resolve(!0)},Q.funcConfirmExitAfterSave=function(u){},Q.funcConfirmCropViewerExit=function(u,s){return"mainViewer"==s&&u?o("Are you sure you want to exit without saving?",Q.DWT.EnumDWT_ConfirmExitType.Exit,Q.DWT.EnumDWT_ConfirmExitType.Cancel):Promise.resolve("documentScanPage"==s&&u?Q.DWT.EnumDWT_ConfirmExitType.SaveAndExit:Q.DWT.EnumDWT_ConfirmExitType.Exit)},Q.funcConfirmMainViewerExit=function(u,s){return""==s&&u?o("Are you sure you want to exit without saving?",Q.DWT.EnumDWT_ConfirmExitType.Exit,Q.DWT.EnumDWT_ConfirmExitType.Cancel):Promise.resolve("cropViewer"==s&&u?Q.DWT.EnumDWT_ConfirmExitType.SaveAndExit:Q.DWT.EnumDWT_ConfirmExitType.Exit)},Q.OnWebTwainPreExecuteCallback=function(){Q.DWT&&Q.DWT.OnWebTwainPreExecute&&Q.DWT.OnWebTwainPreExecute()},Q._show_online_download_dialog=function(u,s,f){var _,h,y,l=Q.DWT.JSVersion.split(","),I=l[0]+"."+l[1],c=location.pathname;c=c.substring(0,c.lastIndexOf("/")+1),f==Q.DWT.EnumDWT_PlatformType.enumLinux&&(arm64||mips64)&&(arm64?u.default=getDebPath("arm64"):mips64&&(u.default=getDebPath("mips64el"))),_=["https://www.dynamsoft.com/web-twain/install-dynamsoft-service/?productId=1000001","&downloadLink=https://demo.dynamsoft.com/DWT/Resources/dist/DynamsoftServiceSetup_",I,".",y=u.default.substr(u.default.length-3)].join(""),h=Q.Lib.Path.normalize([c,u.default].join("")),f==Q.DWT.EnumDWT_PlatformType.enumWindow&&0==h.indexOf("/")&&(h=h.substr(1)),Q.DWT.ShowMessage(['<div class="dynamsoft-dwt-ltsdlg-body" style="padding:0 20px 20px 20px">',"<div>To support document scanning, please complete one-time installation of the DynamsoftServiceSetup.",y," on this machine.</div>","<div>You can download the file via this trust site:</div>",'<div><a id="dwt-btn-install" target="_blank" href="',_,'"><div class="dynamsoft-dwt-dlg-button">Open Site</div></a></div>','<div style="word-break: break-word;">Or, go to <br />',h," if the file exists.</div>","<div>After the installation, please <strong>REFRESH</strong>  your browser.<br /></div>","</div>"].join(""),{width:n,headerStyle:1,closeButton:!1})}}(),Q.DWT.AutoLoad=!1,Q.DWT.IfAddMD5InUploadHeader=!1,Q.DWT.IfConfineMaskWithinTheViewer=!1;const $r=Q;function RN(e,n){1&e&&to(0,"select",4)}function LN(e,n){if(1&e){const t=function iI(){return sn()}();Qr(0,"button",3),Wo("click",function(){return function p_(e){return rr.lFrame.contextLView=e,e[8]}(t),function m_(e){return rr.lFrame.contextLView=null,e}(gu().acquireImage())}),no(1,"Scan Documents"),ni()}}const eS="button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:20px;width:130px;margin:20px}";class tS{constructor(){this.licenseKey="",this.resourcePath=""}}let Tm=(()=>{class e{constructor(t){t&&($r.DWT.ProductKey=t.licenseKey,$r.DWT.ResourcesPath=t.resourcePath)}}return e.\u0275fac=function(t){return new(t||e)(Kn(tS,8))},e.\u0275prov=dr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),kN=(()=>{class e{constructor(){this.containerId="",this.useLocalService=!1,this.width="600px",this.height="600px"}ngOnDestroy(){$r.DWT.Unload()}ngOnInit(){$r.DWT.Containers=[{ContainerId:this.containerId,Width:this.width,Height:this.height}],$r.DWT.UseLocalService=this.useLocalService,$r.DWT.Load(),$r.DWT.RegisterEvent("OnWebTwainReady",()=>{this.onReady()})}onReady(){if(this.dwtObject=$r.DWT.GetWebTwain(this.containerId),this.useLocalService){let r=this.dwtObject.GetSourceNames();this.selectSources=document.getElementById("sources"),this.selectSources.options.length=0;for(let a=0;a<r.length;a++)this.selectSources.options.add(new Option(r[a],a.toString()))}else this.dwtObject.Viewer.cursor="pointer";let t=document.getElementById("scanner-capture");t&&(t.hidden=!1)}acquireImage(){if(this.dwtObject||(this.dwtObject=$r.DWT.GetWebTwain()),this.useLocalService)if(this.dwtObject.SourceCount>0&&this.selectSources&&this.dwtObject.SelectSourceByIndex(this.selectSources.selectedIndex)){const t=()=>{this.dwtObject&&this.dwtObject.CloseSource()},r=t;this.dwtObject.OpenSource(),this.dwtObject.AcquireImage({},t,r)}else alert("No Source Available!");else alert("Scanning is not supported under the WASM mode!")}openImage(){this.dwtObject||(this.dwtObject=$r.DWT.GetWebTwain("dwtcontrolContainer")),this.dwtObject.IfShowFileDialog=!0,this.dwtObject.Addon.PDF.SetConvertMode($r.DWT.EnumDWT_ConvertMode.CM_RENDERALL),this.dwtObject.LoadImageEx("",$r.DWT.EnumDWT_ImageType.IT_ALL,()=>{},()=>{})}downloadDocument(){this.dwtObject&&this.dwtObject.SaveAsJPEG("document.jpg",this.dwtObject.CurrentImageIndexInBuffer)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Lo({type:e,selectors:[["ngx-scanner-capture"]],inputs:{containerId:"containerId",useLocalService:"useLocalService",width:"width",height:"height"},decls:8,vars:2,consts:[["id","scanner-capture","hidden",""],["id","sources",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["id","sources"]],template:function(t,r){1&t&&(Qr(0,"div",0),Qa(1,RN,1,0,"select",1),to(2,"br"),Qa(3,LN,2,0,"button",2),Qr(4,"button",3),Wo("click",function(){return r.openImage()}),no(5,"Load Documents"),ni(),Qr(6,"button",3),Wo("click",function(){return r.downloadDocument()}),no(7,"Download Documents"),ni()()),2&t&&(eo(1),zi("ngIf",r.useLocalService),eo(2),zi("ngIf",r.useLocalService))},dependencies:[ap],styles:["button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:20px;width:130px;margin:20px}"]}),e})(),FN=(()=>{class e{constructor(){this.sourceDict={},this.containerId="",this.useLocalService=!0,this.width="600px",this.height="600px",this.previewId=""}ngOnDestroy(){$r.DWT.Unload()}ngOnInit(){this.videoSelect=document.querySelector("select#videoSource"),$r.DWT.Containers=[{ContainerId:this.containerId,Width:this.width,Height:this.height}],$r.DWT.UseLocalService=this.useLocalService,$r.DWT.Load(),$r.DWT.RegisterEvent("OnWebTwainReady",()=>{this.onReady()})}openCamera(){if(this.videoSelect){let r=this.videoSelect.selectedIndex;if(r<0)return;var t=this.videoSelect.options[r];this.dwtObject&&this.dwtObject.Addon.Camera.selectSource(this.sourceDict[t.text]).then(a=>{this.videoSelect&&this.createCameraScanner(this.sourceDict[t.text])})}}captureDocument(){var t=this;return Kc(function*(){t.dwtObject&&(yield t.dwtObject.Addon.Camera.capture())})()}downloadDocument(){var t=this;return Kc(function*(){t.dwtObject&&t.dwtObject.SaveAsJPEG("document.jpg",t.dwtObject.CurrentImageIndexInBuffer)})()}onReady(){this.dwtObject=$r.DWT.GetWebTwain(this.containerId),this.updateCameraList();let t=document.getElementById("camera-capture");t&&(t.hidden=!1)}createCameraScanner(t){var r=this;return Kc(function*(){r.dwtObject&&(yield r.dwtObject.Addon.Camera.closeVideo(),yield r.dwtObject.Addon.Camera.play(document.getElementById(r.previewId)))})()}updateCameraList(){this.videoSelect&&this.dwtObject&&(this.videoSelect.options.length=0,this.dwtObject.Addon.Camera.getSourceList().then(t=>{for(var r=0;r<t.length;r++){var a=document.createElement("option");a.text=t[r].label||t[r].deviceId,t[r].label?this.sourceDict[t[r].label]=t[r].deviceId:this.sourceDict[t[r].deviceId]=t[r].deviceId,this.videoSelect&&this.videoSelect.options.add(a)}}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Lo({type:e,selectors:[["ngx-camera-capture"]],inputs:{containerId:"containerId",useLocalService:"useLocalService",width:"width",height:"height",previewId:"previewId"},decls:11,vars:0,consts:[["id","camera-capture","hidden",""],["for","videoSource"],["id","videoSource"],[3,"click"]],template:function(t,r){1&t&&(Qr(0,"div",0)(1,"div"),to(2,"label",1)(3,"select",2)(4,"br"),Qr(5,"button",3),Wo("click",function(){return r.openCamera()}),no(6,"Open a Camera"),ni(),Qr(7,"button",3),Wo("click",function(){return r.captureDocument()}),no(8,"Capture Documents"),ni(),Qr(9,"button",3),Wo("click",function(){return r.downloadDocument()}),no(10,"Download Documents"),ni()()())},styles:[eS]}),e})(),ON=(()=>{class e{constructor(){this.sourceDict={},this.containerId="",this.useLocalService=!0,this.width="600px",this.height="600px"}ngOnDestroy(){$r.DWT.Unload()}ngOnInit(){this.videoSelect=document.querySelector("select#videoSource"),$r.DWT.Containers=[{ContainerId:this.containerId,Width:this.width,Height:this.height}],$r.DWT.UseLocalService=this.useLocalService,$r.DWT.Load(),$r.DWT.RegisterEvent("OnWebTwainReady",()=>{this.onReady()})}scanDocument(){if(this.videoSelect){let r=this.videoSelect.selectedIndex;if(r<0)return;var t=this.videoSelect.options[r];this.dwtObject&&this.dwtObject.Addon.Camera.selectSource(this.sourceDict[t.text]).then(a=>{this.videoSelect&&this.createCameraScanner(this.sourceDict[t.text])})}}downloadDocument(){var t=this;return Kc(function*(){t.dwtObject&&t.dwtObject.SaveAsJPEG("document.jpg",t.dwtObject.CurrentImageIndexInBuffer)})()}onReady(){this.dwtObject=$r.DWT.GetWebTwain(this.containerId),this.updateCameraList();let t=document.getElementById("camera-capture");t&&(t.hidden=!1)}createCameraScanner(t){var r=this;return Kc(function*(){r.dwtObject&&(yield r.dwtObject.Addon.Camera.closeVideo(),r.dwtObject.Addon.Camera.scanDocument({scannerViewer:{deviceId:t,fullScreen:!0,autoDetect:{enableAutoDetect:!0},continuousScan:!0}}).then(function(){console.log("OK")},function(a){console.log(a.message)}))})()}updateCameraList(){this.videoSelect&&this.dwtObject&&(this.videoSelect.options.length=0,this.dwtObject.Addon.Camera.getSourceList().then(t=>{for(var r=0;r<t.length;r++){var a=document.createElement("option");a.text=t[r].label||t[r].deviceId,t[r].label?this.sourceDict[t[r].label]=t[r].deviceId:this.sourceDict[t[r].deviceId]=t[r].deviceId,this.videoSelect&&this.videoSelect.options.add(a)}}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Lo({type:e,selectors:[["ngx-document-scanner"]],inputs:{containerId:"containerId",useLocalService:"useLocalService",width:"width",height:"height"},decls:9,vars:0,consts:[["id","camera-capture","hidden",""],["for","videoSource"],["id","videoSource"],[3,"click"]],template:function(t,r){1&t&&(Qr(0,"div",0)(1,"div"),to(2,"label",1)(3,"select",2)(4,"br"),Qr(5,"button",3),Wo("click",function(){return r.scanDocument()}),no(6,"Scan Documents"),ni(),Qr(7,"button",3),Wo("click",function(){return r.downloadDocument()}),no(8,"Download Documents"),ni()()())},styles:[eS]}),e})(),NN=(()=>{class e{constructor(t){if(t)throw new Error("GreetingModule is already loaded. Import it in the AppModule only")}static forRoot(t){return{ngModule:e,providers:[{provide:tS,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)(Kn(e,12))},e.\u0275mod=Va({type:e}),e.\u0275inj=wa({imports:[g0]}),e})();const WN=[{path:"",component:PN},{path:"scanner-capture",component:(()=>{class e{constructor(t){this.DocumentScannerService=t}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(Hn(Tm))},e.\u0275cmp=Lo({type:e,selectors:[["app-scanner-capture"]],decls:3,vars:4,consts:[["id","container"],["id","dwtcontrolContainer"],[3,"useLocalService","containerId","width","height"]],template:function(t,r){1&t&&(Qr(0,"div",0),to(1,"div",1),ni(),to(2,"ngx-scanner-capture",2)),2&t&&(eo(2),zi("useLocalService",!0)("containerId","dwtcontrolContainer")("width","600px")("height","600px"))},dependencies:[kN]}),e})()},{path:"camera-capture",component:(()=>{class e{constructor(t){this.DocumentScannerService=t}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(Hn(Tm))},e.\u0275cmp=Lo({type:e,selectors:[["app-camera-capture"]],decls:4,vars:5,consts:[["id","container"],["id","dwtcontrolContainer"],[3,"useLocalService","containerId","width","height","previewId"],["id","preview"]],template:function(t,r){1&t&&(Qr(0,"div",0),to(1,"div",1),ni(),to(2,"ngx-camera-capture",2)(3,"div",3)),2&t&&(eo(2),zi("useLocalService",!1)("containerId","dwtcontrolContainer")("width","600px")("height","600px")("previewId","preview"))},dependencies:[FN]}),e})()},{path:"document-scanner",component:(()=>{class e{constructor(t){this.DocumentScannerService=t}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(Hn(Tm))},e.\u0275cmp=Lo({type:e,selectors:[["app-document-scanner"]],decls:3,vars:4,consts:[["id","container"],["id","dwtcontrolContainer"],[3,"useLocalService","containerId","width","height"]],template:function(t,r){1&t&&(Qr(0,"div",0),to(1,"div",1),ni(),to(2,"ngx-document-scanner",2)),2&t&&(eo(2),zi("useLocalService",!1)("containerId","dwtcontrolContainer")("width","600px")("height","600px"))},dependencies:[ON]}),e})()}];let BN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Va({type:e}),e.\u0275inj=wa({imports:[Qw.forRoot(WN),Qw]}),e})();const VN=function(){return["/"]};let UN=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Lo({type:e,selectors:[["app-top-bar"]],decls:3,vars:2,consts:[[3,"routerLink"]],template:function(t,r){1&t&&(Qr(0,"a",0)(1,"h1"),no(2,"Dynamsoft Web Document Scanner"),ni()()),2&t&&zi("routerLink",yc(1,VN))},dependencies:[zc]}),e})(),GN=(()=>{class e{constructor(){this.title="angular-scanner-camera-capture"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Lo({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(to(0,"app-top-bar"),Qr(1,"div",0),to(2,"router-outlet"),ni())},dependencies:[Wp,UN]}),e})(),jN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Va({type:e,bootstrap:[GN]}),e.\u0275inj=wa({imports:[xk,BN,NN.forRoot({licenseKey:"t01529gIAAIGHmfSo/qdMWQ5slm6TDyCI+vx2zTkVYuuBJyIn1jAxUGeIsZwB7Oma+DoyPk4NTxMg7XAMQb+PjbuYU3fGposwN1JzowgMlibqXsmm4oxu4NYAO4AvcgTtli9w5/s0quCAZoAJaN34Ac5DfnqlQUgPNANMwHlIB4JOVnum8iRk7SElBJoBJqCHdGAqGIUzX1rpmp0=",resourcePath:"assets/dynamic-web-twain"})]}),e})();(function $x(){Fb=!1})(),Ak().bootstrapModule(jN).catch(e=>console.error(e))}},zr=>{zr(zr.s=375)}]);